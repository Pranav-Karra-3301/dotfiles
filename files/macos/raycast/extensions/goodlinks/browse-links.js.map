{
  "version": 3,
  "sources": ["../../../../Goodlinks_Raycast_Extensions/GoodlinksXraycast/src/browse-links.tsx"],
  "sourcesContent": ["import { useState, useEffect } from \"react\";\nimport { List, Detail, showToast, Toast, ActionPanel, Action, open } from \"@raycast/api\";\nimport { exec } from \"child_process\";\n\n// Interface for Link data structure\ninterface Link {\n  id: string;\n  title: string;\n  url: string;\n  tags: string[];\n  summary: string;\n}\n\n// Main function for the Raycast extension\nexport default function Command() {\n  const [links, setLinks] = useState<Link[]>([]);\n  const [selectedLink, setSelectedLink] = useState<Link | null>(null);\n  const [isLoading, setIsLoading] = useState<boolean>(true);\n\n  useEffect(() => {\n    async function fetchLinks() {\n      try {\n        const linksData = await runAppleScript(`\n          tell application \"GoodLinks\"\n            set allLinks to every link\n            set output to \"\"\n            repeat with aLink in allLinks\n              set output to output & id of aLink & \"||\" & title of aLink & \"||\" & url of aLink & \"||\" & tag names of aLink & \"||\" & summary of aLink & \"\\\\n\"\n            end repeat\n            return output\n          end tell\n        `);\n        setLinks(parseLinks(linksData));\n      } catch (error) {\n        console.error(\"Error fetching links:\", error);\n        showToast(Toast.Style.Failure, \"Failed to fetch links\");\n      } finally {\n        setIsLoading(false);\n      }\n    }\n    fetchLinks();\n  }, []);\n\n  function parseLinks(linksData: string): Link[] {\n    try {\n      const linkRecords = linksData.trim().split(\"\\n\");\n      return linkRecords.map((record) => {\n        const [id, title, url, tags, summary] = record.split(\"||\");\n        return {\n          id: id.trim(),\n          title: title.trim(),\n          url: url.trim(),\n          tags: tags.trim() ? tags.trim().split(\",\") : [],\n          summary: summary.trim(),\n        };\n      });\n    } catch (error) {\n      console.error(\"Failed to parse links data:\", error);\n      return [];\n    }\n  }\n\n  const handleSelect = (linkId: string | null) => {\n    if (linkId === null) {\n      setSelectedLink(null);\n    } else {\n      const link = links.find((l) => l.id === linkId) || null;\n      setSelectedLink(link);\n    }\n  };\n\n  const handleOpenInBrowser = (url: string) => {\n    open(url);\n  };\n\n  const renderListView = () => (\n    <List\n      isLoading={isLoading}\n      onSelectionChange={(id) => handleSelect(id)}\n    >\n      {links.map((link) => (\n        <List.Item\n          key={link.id}\n          id={link.id}\n          title={link.title}\n          subtitle={link.tags.join(\", \")}\n          actions={\n            <ActionPanel>\n              <Action title=\"Open in Browser\" onAction={() => handleOpenInBrowser(link.url)} />\n            </ActionPanel>\n          }\n        />\n      ))}\n    </List>\n  );\n\n  const renderDetailView = () => {\n    if (!selectedLink) return null;\n\n    return (\n      <Detail\n        markdown={`# ${selectedLink.title}\\n\\n${selectedLink.summary}`}\n        actions={\n          <ActionPanel>\n            <Action title=\"Open in Browser\" onAction={() => handleOpenInBrowser(selectedLink.url)} />\n          </ActionPanel>\n        }\n      />\n    );\n  };\n\n  return selectedLink ? renderDetailView() : renderListView();\n}\n\n// Function to run AppleScript commands\nasync function runAppleScript(script: string): Promise<string> {\n  return new Promise((resolve, reject) => {\n    exec(`osascript -e '${script}'`, (error, stdout) => {\n      if (error) {\n        reject(error);\n      } else {\n        resolve(stdout);\n      }\n    });\n  });\n}\n"],
  "mappings": "yaAAA,IAAAA,EAAA,GAAAC,EAAAD,EAAA,aAAAE,IAAA,eAAAC,EAAAH,GAAA,IAAAI,EAAoC,iBACpCC,EAA0E,wBAC1EC,EAAqB,yBAsFPC,EAAA,6BA1EC,SAARL,GAA2B,CAChC,GAAM,CAACM,EAAOC,CAAQ,KAAI,YAAiB,CAAC,CAAC,EACvC,CAACC,EAAcC,CAAe,KAAI,YAAsB,IAAI,EAC5D,CAACC,EAAWC,CAAY,KAAI,YAAkB,EAAI,KAExD,aAAU,IAAM,CACd,eAAeC,GAAa,CAC1B,GAAI,CACF,IAAMC,EAAY,MAAMC,EAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAStC,EACDP,EAASQ,EAAWF,CAAS,CAAC,CAChC,OAASG,EAAO,CACd,QAAQ,MAAM,wBAAyBA,CAAK,KAC5C,aAAU,QAAM,MAAM,QAAS,uBAAuB,CACxD,QAAE,CACAL,EAAa,EAAK,CACpB,CACF,CACAC,EAAW,CACb,EAAG,CAAC,CAAC,EAEL,SAASG,EAAWF,EAA2B,CAC7C,GAAI,CAEF,OADoBA,EAAU,KAAK,EAAE,MAAM;AAAA,CAAI,EAC5B,IAAKI,GAAW,CACjC,GAAM,CAACC,EAAIC,EAAOC,EAAKC,EAAMC,CAAO,EAAIL,EAAO,MAAM,IAAI,EACzD,MAAO,CACL,GAAIC,EAAG,KAAK,EACZ,MAAOC,EAAM,KAAK,EAClB,IAAKC,EAAI,KAAK,EACd,KAAMC,EAAK,KAAK,EAAIA,EAAK,KAAK,EAAE,MAAM,GAAG,EAAI,CAAC,EAC9C,QAASC,EAAQ,KAAK,CACxB,CACF,CAAC,CACH,OAASN,EAAO,CACd,eAAQ,MAAM,8BAA+BA,CAAK,EAC3C,CAAC,CACV,CACF,CAEA,IAAMO,EAAgBC,GAA0B,CAC9C,GAAIA,IAAW,KACbf,EAAgB,IAAI,MACf,CACL,IAAMgB,EAAOnB,EAAM,KAAMoB,GAAMA,EAAE,KAAOF,CAAM,GAAK,KACnDf,EAAgBgB,CAAI,CACtB,CACF,EAEME,EAAuBP,GAAgB,IAC3C,QAAKA,CAAG,CACV,EAsCA,OAAOZ,EAdAA,KAGH,OAAC,UACC,SAAU,KAAKA,EAAa,KAAK;AAAA;AAAA,EAAOA,EAAa,OAAO,GAC5D,WACE,OAAC,eACC,mBAAC,UAAO,MAAM,kBAAkB,SAAU,IAAMmB,EAAoBnB,EAAa,GAAG,EAAG,EACzF,EAEJ,EAVwB,QArB1B,OAAC,QACC,UAAWE,EACX,kBAAoBQ,GAAOK,EAAaL,CAAE,EAEzC,SAAAZ,EAAM,IAAKmB,MACV,OAAC,OAAK,KAAL,CAEC,GAAIA,EAAK,GACT,MAAOA,EAAK,MACZ,SAAUA,EAAK,KAAK,KAAK,IAAI,EAC7B,WACE,OAAC,eACC,mBAAC,UAAO,MAAM,kBAAkB,SAAU,IAAME,EAAoBF,EAAK,GAAG,EAAG,EACjF,GAPGA,EAAK,EASZ,CACD,EACH,CAmBJ,CAGA,eAAeX,EAAec,EAAiC,CAC7D,OAAO,IAAI,QAAQ,CAACC,EAASC,IAAW,IACtC,QAAK,iBAAiBF,CAAM,IAAK,CAACZ,EAAOe,IAAW,CAC9Cf,EACFc,EAAOd,CAAK,EAEZa,EAAQE,CAAM,CAElB,CAAC,CACH,CAAC,CACH",
  "names": ["browse_links_exports", "__export", "Command", "__toCommonJS", "import_react", "import_api", "import_child_process", "import_jsx_runtime", "links", "setLinks", "selectedLink", "setSelectedLink", "isLoading", "setIsLoading", "fetchLinks", "linksData", "runAppleScript", "parseLinks", "error", "record", "id", "title", "url", "tags", "summary", "handleSelect", "linkId", "link", "l", "handleOpenInBrowser", "script", "resolve", "reject", "stdout"]
}
