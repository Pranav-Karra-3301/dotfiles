"use strict";
var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __esm = (fn, res) => function __init() {
  return fn && (res = (0, fn[__getOwnPropNames(fn)[0]])(fn = 0)), res;
};
var __commonJS = (cb, mod2) => function __require() {
  return mod2 || (0, cb[__getOwnPropNames(cb)[0]])((mod2 = { exports: {} }).exports, mod2), mod2.exports;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod2, isNodeMode, target) => (target = mod2 != null ? __create(__getProtoOf(mod2)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod2 || !mod2.__esModule ? __defProp(target, "default", { value: mod2, enumerable: true }) : target,
  mod2
));
var __toCommonJS = (mod2) => __copyProps(__defProp({}, "__esModule", { value: true }), mod2);

// node_modules/web-streams-polyfill/dist/ponyfill.es2018.js
var require_ponyfill_es2018 = __commonJS({
  "node_modules/web-streams-polyfill/dist/ponyfill.es2018.js"(exports2, module2) {
    (function(global2, factory) {
      typeof exports2 === "object" && typeof module2 !== "undefined" ? factory(exports2) : typeof define === "function" && define.amd ? define(["exports"], factory) : (global2 = typeof globalThis !== "undefined" ? globalThis : global2 || self, factory(global2.WebStreamsPolyfill = {}));
    })(exports2, (function(exports3) {
      "use strict";
      function noop2() {
        return void 0;
      }
      function typeIsObject(x2) {
        return typeof x2 === "object" && x2 !== null || typeof x2 === "function";
      }
      const rethrowAssertionErrorRejection = noop2;
      function setFunctionName(fn, name) {
        try {
          Object.defineProperty(fn, "name", {
            value: name,
            configurable: true
          });
        } catch (_a2) {
        }
      }
      const originalPromise = Promise;
      const originalPromiseThen = Promise.prototype.then;
      const originalPromiseReject = Promise.reject.bind(originalPromise);
      function newPromise(executor) {
        return new originalPromise(executor);
      }
      function promiseResolvedWith(value) {
        return newPromise((resolve) => resolve(value));
      }
      function promiseRejectedWith(reason) {
        return originalPromiseReject(reason);
      }
      function PerformPromiseThen(promise, onFulfilled, onRejected) {
        return originalPromiseThen.call(promise, onFulfilled, onRejected);
      }
      function uponPromise(promise, onFulfilled, onRejected) {
        PerformPromiseThen(PerformPromiseThen(promise, onFulfilled, onRejected), void 0, rethrowAssertionErrorRejection);
      }
      function uponFulfillment(promise, onFulfilled) {
        uponPromise(promise, onFulfilled);
      }
      function uponRejection(promise, onRejected) {
        uponPromise(promise, void 0, onRejected);
      }
      function transformPromiseWith(promise, fulfillmentHandler, rejectionHandler) {
        return PerformPromiseThen(promise, fulfillmentHandler, rejectionHandler);
      }
      function setPromiseIsHandledToTrue(promise) {
        PerformPromiseThen(promise, void 0, rethrowAssertionErrorRejection);
      }
      let _queueMicrotask = (callback) => {
        if (typeof queueMicrotask === "function") {
          _queueMicrotask = queueMicrotask;
        } else {
          const resolvedPromise = promiseResolvedWith(void 0);
          _queueMicrotask = (cb) => PerformPromiseThen(resolvedPromise, cb);
        }
        return _queueMicrotask(callback);
      };
      function reflectCall(F2, V, args) {
        if (typeof F2 !== "function") {
          throw new TypeError("Argument is not a function");
        }
        return Function.prototype.apply.call(F2, V, args);
      }
      function promiseCall(F2, V, args) {
        try {
          return promiseResolvedWith(reflectCall(F2, V, args));
        } catch (value) {
          return promiseRejectedWith(value);
        }
      }
      const QUEUE_MAX_ARRAY_SIZE = 16384;
      class SimpleQueue {
        constructor() {
          this._cursor = 0;
          this._size = 0;
          this._front = {
            _elements: [],
            _next: void 0
          };
          this._back = this._front;
          this._cursor = 0;
          this._size = 0;
        }
        get length() {
          return this._size;
        }
        // For exception safety, this method is structured in order:
        // 1. Read state
        // 2. Calculate required state mutations
        // 3. Perform state mutations
        push(element) {
          const oldBack = this._back;
          let newBack = oldBack;
          if (oldBack._elements.length === QUEUE_MAX_ARRAY_SIZE - 1) {
            newBack = {
              _elements: [],
              _next: void 0
            };
          }
          oldBack._elements.push(element);
          if (newBack !== oldBack) {
            this._back = newBack;
            oldBack._next = newBack;
          }
          ++this._size;
        }
        // Like push(), shift() follows the read -> calculate -> mutate pattern for
        // exception safety.
        shift() {
          const oldFront = this._front;
          let newFront = oldFront;
          const oldCursor = this._cursor;
          let newCursor = oldCursor + 1;
          const elements = oldFront._elements;
          const element = elements[oldCursor];
          if (newCursor === QUEUE_MAX_ARRAY_SIZE) {
            newFront = oldFront._next;
            newCursor = 0;
          }
          --this._size;
          this._cursor = newCursor;
          if (oldFront !== newFront) {
            this._front = newFront;
          }
          elements[oldCursor] = void 0;
          return element;
        }
        // The tricky thing about forEach() is that it can be called
        // re-entrantly. The queue may be mutated inside the callback. It is easy to
        // see that push() within the callback has no negative effects since the end
        // of the queue is checked for on every iteration. If shift() is called
        // repeatedly within the callback then the next iteration may return an
        // element that has been removed. In this case the callback will be called
        // with undefined values until we either "catch up" with elements that still
        // exist or reach the back of the queue.
        forEach(callback) {
          let i2 = this._cursor;
          let node = this._front;
          let elements = node._elements;
          while (i2 !== elements.length || node._next !== void 0) {
            if (i2 === elements.length) {
              node = node._next;
              elements = node._elements;
              i2 = 0;
              if (elements.length === 0) {
                break;
              }
            }
            callback(elements[i2]);
            ++i2;
          }
        }
        // Return the element that would be returned if shift() was called now,
        // without modifying the queue.
        peek() {
          const front = this._front;
          const cursor = this._cursor;
          return front._elements[cursor];
        }
      }
      const AbortSteps = Symbol("[[AbortSteps]]");
      const ErrorSteps = Symbol("[[ErrorSteps]]");
      const CancelSteps = Symbol("[[CancelSteps]]");
      const PullSteps = Symbol("[[PullSteps]]");
      const ReleaseSteps = Symbol("[[ReleaseSteps]]");
      function ReadableStreamReaderGenericInitialize(reader, stream) {
        reader._ownerReadableStream = stream;
        stream._reader = reader;
        if (stream._state === "readable") {
          defaultReaderClosedPromiseInitialize(reader);
        } else if (stream._state === "closed") {
          defaultReaderClosedPromiseInitializeAsResolved(reader);
        } else {
          defaultReaderClosedPromiseInitializeAsRejected(reader, stream._storedError);
        }
      }
      function ReadableStreamReaderGenericCancel(reader, reason) {
        const stream = reader._ownerReadableStream;
        return ReadableStreamCancel(stream, reason);
      }
      function ReadableStreamReaderGenericRelease(reader) {
        const stream = reader._ownerReadableStream;
        if (stream._state === "readable") {
          defaultReaderClosedPromiseReject(reader, new TypeError(`Reader was released and can no longer be used to monitor the stream's closedness`));
        } else {
          defaultReaderClosedPromiseResetToRejected(reader, new TypeError(`Reader was released and can no longer be used to monitor the stream's closedness`));
        }
        stream._readableStreamController[ReleaseSteps]();
        stream._reader = void 0;
        reader._ownerReadableStream = void 0;
      }
      function readerLockException(name) {
        return new TypeError("Cannot " + name + " a stream using a released reader");
      }
      function defaultReaderClosedPromiseInitialize(reader) {
        reader._closedPromise = newPromise((resolve, reject) => {
          reader._closedPromise_resolve = resolve;
          reader._closedPromise_reject = reject;
        });
      }
      function defaultReaderClosedPromiseInitializeAsRejected(reader, reason) {
        defaultReaderClosedPromiseInitialize(reader);
        defaultReaderClosedPromiseReject(reader, reason);
      }
      function defaultReaderClosedPromiseInitializeAsResolved(reader) {
        defaultReaderClosedPromiseInitialize(reader);
        defaultReaderClosedPromiseResolve(reader);
      }
      function defaultReaderClosedPromiseReject(reader, reason) {
        if (reader._closedPromise_reject === void 0) {
          return;
        }
        setPromiseIsHandledToTrue(reader._closedPromise);
        reader._closedPromise_reject(reason);
        reader._closedPromise_resolve = void 0;
        reader._closedPromise_reject = void 0;
      }
      function defaultReaderClosedPromiseResetToRejected(reader, reason) {
        defaultReaderClosedPromiseInitializeAsRejected(reader, reason);
      }
      function defaultReaderClosedPromiseResolve(reader) {
        if (reader._closedPromise_resolve === void 0) {
          return;
        }
        reader._closedPromise_resolve(void 0);
        reader._closedPromise_resolve = void 0;
        reader._closedPromise_reject = void 0;
      }
      const NumberIsFinite = Number.isFinite || function(x2) {
        return typeof x2 === "number" && isFinite(x2);
      };
      const MathTrunc = Math.trunc || function(v) {
        return v < 0 ? Math.ceil(v) : Math.floor(v);
      };
      function isDictionary(x2) {
        return typeof x2 === "object" || typeof x2 === "function";
      }
      function assertDictionary(obj, context) {
        if (obj !== void 0 && !isDictionary(obj)) {
          throw new TypeError(`${context} is not an object.`);
        }
      }
      function assertFunction(x2, context) {
        if (typeof x2 !== "function") {
          throw new TypeError(`${context} is not a function.`);
        }
      }
      function isObject(x2) {
        return typeof x2 === "object" && x2 !== null || typeof x2 === "function";
      }
      function assertObject(x2, context) {
        if (!isObject(x2)) {
          throw new TypeError(`${context} is not an object.`);
        }
      }
      function assertRequiredArgument(x2, position, context) {
        if (x2 === void 0) {
          throw new TypeError(`Parameter ${position} is required in '${context}'.`);
        }
      }
      function assertRequiredField(x2, field, context) {
        if (x2 === void 0) {
          throw new TypeError(`${field} is required in '${context}'.`);
        }
      }
      function convertUnrestrictedDouble(value) {
        return Number(value);
      }
      function censorNegativeZero(x2) {
        return x2 === 0 ? 0 : x2;
      }
      function integerPart(x2) {
        return censorNegativeZero(MathTrunc(x2));
      }
      function convertUnsignedLongLongWithEnforceRange(value, context) {
        const lowerBound = 0;
        const upperBound = Number.MAX_SAFE_INTEGER;
        let x2 = Number(value);
        x2 = censorNegativeZero(x2);
        if (!NumberIsFinite(x2)) {
          throw new TypeError(`${context} is not a finite number`);
        }
        x2 = integerPart(x2);
        if (x2 < lowerBound || x2 > upperBound) {
          throw new TypeError(`${context} is outside the accepted range of ${lowerBound} to ${upperBound}, inclusive`);
        }
        if (!NumberIsFinite(x2) || x2 === 0) {
          return 0;
        }
        return x2;
      }
      function assertReadableStream(x2, context) {
        if (!IsReadableStream(x2)) {
          throw new TypeError(`${context} is not a ReadableStream.`);
        }
      }
      function AcquireReadableStreamDefaultReader(stream) {
        return new ReadableStreamDefaultReader(stream);
      }
      function ReadableStreamAddReadRequest(stream, readRequest) {
        stream._reader._readRequests.push(readRequest);
      }
      function ReadableStreamFulfillReadRequest(stream, chunk, done) {
        const reader = stream._reader;
        const readRequest = reader._readRequests.shift();
        if (done) {
          readRequest._closeSteps();
        } else {
          readRequest._chunkSteps(chunk);
        }
      }
      function ReadableStreamGetNumReadRequests(stream) {
        return stream._reader._readRequests.length;
      }
      function ReadableStreamHasDefaultReader(stream) {
        const reader = stream._reader;
        if (reader === void 0) {
          return false;
        }
        if (!IsReadableStreamDefaultReader(reader)) {
          return false;
        }
        return true;
      }
      class ReadableStreamDefaultReader {
        constructor(stream) {
          assertRequiredArgument(stream, 1, "ReadableStreamDefaultReader");
          assertReadableStream(stream, "First parameter");
          if (IsReadableStreamLocked(stream)) {
            throw new TypeError("This stream has already been locked for exclusive reading by another reader");
          }
          ReadableStreamReaderGenericInitialize(this, stream);
          this._readRequests = new SimpleQueue();
        }
        /**
         * Returns a promise that will be fulfilled when the stream becomes closed,
         * or rejected if the stream ever errors or the reader's lock is released before the stream finishes closing.
         */
        get closed() {
          if (!IsReadableStreamDefaultReader(this)) {
            return promiseRejectedWith(defaultReaderBrandCheckException("closed"));
          }
          return this._closedPromise;
        }
        /**
         * If the reader is active, behaves the same as {@link ReadableStream.cancel | stream.cancel(reason)}.
         */
        cancel(reason = void 0) {
          if (!IsReadableStreamDefaultReader(this)) {
            return promiseRejectedWith(defaultReaderBrandCheckException("cancel"));
          }
          if (this._ownerReadableStream === void 0) {
            return promiseRejectedWith(readerLockException("cancel"));
          }
          return ReadableStreamReaderGenericCancel(this, reason);
        }
        /**
         * Returns a promise that allows access to the next chunk from the stream's internal queue, if available.
         *
         * If reading a chunk causes the queue to become empty, more data will be pulled from the underlying source.
         */
        read() {
          if (!IsReadableStreamDefaultReader(this)) {
            return promiseRejectedWith(defaultReaderBrandCheckException("read"));
          }
          if (this._ownerReadableStream === void 0) {
            return promiseRejectedWith(readerLockException("read from"));
          }
          let resolvePromise;
          let rejectPromise;
          const promise = newPromise((resolve, reject) => {
            resolvePromise = resolve;
            rejectPromise = reject;
          });
          const readRequest = {
            _chunkSteps: (chunk) => resolvePromise({ value: chunk, done: false }),
            _closeSteps: () => resolvePromise({ value: void 0, done: true }),
            _errorSteps: (e2) => rejectPromise(e2)
          };
          ReadableStreamDefaultReaderRead(this, readRequest);
          return promise;
        }
        /**
         * Releases the reader's lock on the corresponding stream. After the lock is released, the reader is no longer active.
         * If the associated stream is errored when the lock is released, the reader will appear errored in the same way
         * from now on; otherwise, the reader will appear closed.
         *
         * A reader's lock cannot be released while it still has a pending read request, i.e., if a promise returned by
         * the reader's {@link ReadableStreamDefaultReader.read | read()} method has not yet been settled. Attempting to
         * do so will throw a `TypeError` and leave the reader locked to the stream.
         */
        releaseLock() {
          if (!IsReadableStreamDefaultReader(this)) {
            throw defaultReaderBrandCheckException("releaseLock");
          }
          if (this._ownerReadableStream === void 0) {
            return;
          }
          ReadableStreamDefaultReaderRelease(this);
        }
      }
      Object.defineProperties(ReadableStreamDefaultReader.prototype, {
        cancel: { enumerable: true },
        read: { enumerable: true },
        releaseLock: { enumerable: true },
        closed: { enumerable: true }
      });
      setFunctionName(ReadableStreamDefaultReader.prototype.cancel, "cancel");
      setFunctionName(ReadableStreamDefaultReader.prototype.read, "read");
      setFunctionName(ReadableStreamDefaultReader.prototype.releaseLock, "releaseLock");
      if (typeof Symbol.toStringTag === "symbol") {
        Object.defineProperty(ReadableStreamDefaultReader.prototype, Symbol.toStringTag, {
          value: "ReadableStreamDefaultReader",
          configurable: true
        });
      }
      function IsReadableStreamDefaultReader(x2) {
        if (!typeIsObject(x2)) {
          return false;
        }
        if (!Object.prototype.hasOwnProperty.call(x2, "_readRequests")) {
          return false;
        }
        return x2 instanceof ReadableStreamDefaultReader;
      }
      function ReadableStreamDefaultReaderRead(reader, readRequest) {
        const stream = reader._ownerReadableStream;
        stream._disturbed = true;
        if (stream._state === "closed") {
          readRequest._closeSteps();
        } else if (stream._state === "errored") {
          readRequest._errorSteps(stream._storedError);
        } else {
          stream._readableStreamController[PullSteps](readRequest);
        }
      }
      function ReadableStreamDefaultReaderRelease(reader) {
        ReadableStreamReaderGenericRelease(reader);
        const e2 = new TypeError("Reader was released");
        ReadableStreamDefaultReaderErrorReadRequests(reader, e2);
      }
      function ReadableStreamDefaultReaderErrorReadRequests(reader, e2) {
        const readRequests = reader._readRequests;
        reader._readRequests = new SimpleQueue();
        readRequests.forEach((readRequest) => {
          readRequest._errorSteps(e2);
        });
      }
      function defaultReaderBrandCheckException(name) {
        return new TypeError(`ReadableStreamDefaultReader.prototype.${name} can only be used on a ReadableStreamDefaultReader`);
      }
      const AsyncIteratorPrototype = Object.getPrototypeOf(Object.getPrototypeOf(async function* () {
      }).prototype);
      class ReadableStreamAsyncIteratorImpl {
        constructor(reader, preventCancel) {
          this._ongoingPromise = void 0;
          this._isFinished = false;
          this._reader = reader;
          this._preventCancel = preventCancel;
        }
        next() {
          const nextSteps = () => this._nextSteps();
          this._ongoingPromise = this._ongoingPromise ? transformPromiseWith(this._ongoingPromise, nextSteps, nextSteps) : nextSteps();
          return this._ongoingPromise;
        }
        return(value) {
          const returnSteps = () => this._returnSteps(value);
          return this._ongoingPromise ? transformPromiseWith(this._ongoingPromise, returnSteps, returnSteps) : returnSteps();
        }
        _nextSteps() {
          if (this._isFinished) {
            return Promise.resolve({ value: void 0, done: true });
          }
          const reader = this._reader;
          let resolvePromise;
          let rejectPromise;
          const promise = newPromise((resolve, reject) => {
            resolvePromise = resolve;
            rejectPromise = reject;
          });
          const readRequest = {
            _chunkSteps: (chunk) => {
              this._ongoingPromise = void 0;
              _queueMicrotask(() => resolvePromise({ value: chunk, done: false }));
            },
            _closeSteps: () => {
              this._ongoingPromise = void 0;
              this._isFinished = true;
              ReadableStreamReaderGenericRelease(reader);
              resolvePromise({ value: void 0, done: true });
            },
            _errorSteps: (reason) => {
              this._ongoingPromise = void 0;
              this._isFinished = true;
              ReadableStreamReaderGenericRelease(reader);
              rejectPromise(reason);
            }
          };
          ReadableStreamDefaultReaderRead(reader, readRequest);
          return promise;
        }
        _returnSteps(value) {
          if (this._isFinished) {
            return Promise.resolve({ value, done: true });
          }
          this._isFinished = true;
          const reader = this._reader;
          if (!this._preventCancel) {
            const result = ReadableStreamReaderGenericCancel(reader, value);
            ReadableStreamReaderGenericRelease(reader);
            return transformPromiseWith(result, () => ({ value, done: true }));
          }
          ReadableStreamReaderGenericRelease(reader);
          return promiseResolvedWith({ value, done: true });
        }
      }
      const ReadableStreamAsyncIteratorPrototype = {
        next() {
          if (!IsReadableStreamAsyncIterator(this)) {
            return promiseRejectedWith(streamAsyncIteratorBrandCheckException("next"));
          }
          return this._asyncIteratorImpl.next();
        },
        return(value) {
          if (!IsReadableStreamAsyncIterator(this)) {
            return promiseRejectedWith(streamAsyncIteratorBrandCheckException("return"));
          }
          return this._asyncIteratorImpl.return(value);
        }
      };
      Object.setPrototypeOf(ReadableStreamAsyncIteratorPrototype, AsyncIteratorPrototype);
      function AcquireReadableStreamAsyncIterator(stream, preventCancel) {
        const reader = AcquireReadableStreamDefaultReader(stream);
        const impl = new ReadableStreamAsyncIteratorImpl(reader, preventCancel);
        const iterator = Object.create(ReadableStreamAsyncIteratorPrototype);
        iterator._asyncIteratorImpl = impl;
        return iterator;
      }
      function IsReadableStreamAsyncIterator(x2) {
        if (!typeIsObject(x2)) {
          return false;
        }
        if (!Object.prototype.hasOwnProperty.call(x2, "_asyncIteratorImpl")) {
          return false;
        }
        try {
          return x2._asyncIteratorImpl instanceof ReadableStreamAsyncIteratorImpl;
        } catch (_a2) {
          return false;
        }
      }
      function streamAsyncIteratorBrandCheckException(name) {
        return new TypeError(`ReadableStreamAsyncIterator.${name} can only be used on a ReadableSteamAsyncIterator`);
      }
      const NumberIsNaN = Number.isNaN || function(x2) {
        return x2 !== x2;
      };
      var _a, _b, _c;
      function CreateArrayFromList(elements) {
        return elements.slice();
      }
      function CopyDataBlockBytes(dest, destOffset, src, srcOffset, n) {
        new Uint8Array(dest).set(new Uint8Array(src, srcOffset, n), destOffset);
      }
      let TransferArrayBuffer = (O) => {
        if (typeof O.transfer === "function") {
          TransferArrayBuffer = (buffer) => buffer.transfer();
        } else if (typeof structuredClone === "function") {
          TransferArrayBuffer = (buffer) => structuredClone(buffer, { transfer: [buffer] });
        } else {
          TransferArrayBuffer = (buffer) => buffer;
        }
        return TransferArrayBuffer(O);
      };
      let IsDetachedBuffer = (O) => {
        if (typeof O.detached === "boolean") {
          IsDetachedBuffer = (buffer) => buffer.detached;
        } else {
          IsDetachedBuffer = (buffer) => buffer.byteLength === 0;
        }
        return IsDetachedBuffer(O);
      };
      function ArrayBufferSlice(buffer, begin, end) {
        if (buffer.slice) {
          return buffer.slice(begin, end);
        }
        const length = end - begin;
        const slice = new ArrayBuffer(length);
        CopyDataBlockBytes(slice, 0, buffer, begin, length);
        return slice;
      }
      function GetMethod(receiver, prop) {
        const func = receiver[prop];
        if (func === void 0 || func === null) {
          return void 0;
        }
        if (typeof func !== "function") {
          throw new TypeError(`${String(prop)} is not a function`);
        }
        return func;
      }
      function CreateAsyncFromSyncIterator(syncIteratorRecord) {
        const syncIterable = {
          [Symbol.iterator]: () => syncIteratorRecord.iterator
        };
        const asyncIterator = (async function* () {
          return yield* syncIterable;
        })();
        const nextMethod = asyncIterator.next;
        return { iterator: asyncIterator, nextMethod, done: false };
      }
      const SymbolAsyncIterator = (_c = (_a = Symbol.asyncIterator) !== null && _a !== void 0 ? _a : (_b = Symbol.for) === null || _b === void 0 ? void 0 : _b.call(Symbol, "Symbol.asyncIterator")) !== null && _c !== void 0 ? _c : "@@asyncIterator";
      function GetIterator(obj, hint = "sync", method) {
        if (method === void 0) {
          if (hint === "async") {
            method = GetMethod(obj, SymbolAsyncIterator);
            if (method === void 0) {
              const syncMethod = GetMethod(obj, Symbol.iterator);
              const syncIteratorRecord = GetIterator(obj, "sync", syncMethod);
              return CreateAsyncFromSyncIterator(syncIteratorRecord);
            }
          } else {
            method = GetMethod(obj, Symbol.iterator);
          }
        }
        if (method === void 0) {
          throw new TypeError("The object is not iterable");
        }
        const iterator = reflectCall(method, obj, []);
        if (!typeIsObject(iterator)) {
          throw new TypeError("The iterator method must return an object");
        }
        const nextMethod = iterator.next;
        return { iterator, nextMethod, done: false };
      }
      function IteratorNext(iteratorRecord) {
        const result = reflectCall(iteratorRecord.nextMethod, iteratorRecord.iterator, []);
        if (!typeIsObject(result)) {
          throw new TypeError("The iterator.next() method must return an object");
        }
        return result;
      }
      function IteratorComplete(iterResult) {
        return Boolean(iterResult.done);
      }
      function IteratorValue(iterResult) {
        return iterResult.value;
      }
      function IsNonNegativeNumber(v) {
        if (typeof v !== "number") {
          return false;
        }
        if (NumberIsNaN(v)) {
          return false;
        }
        if (v < 0) {
          return false;
        }
        return true;
      }
      function CloneAsUint8Array(O) {
        const buffer = ArrayBufferSlice(O.buffer, O.byteOffset, O.byteOffset + O.byteLength);
        return new Uint8Array(buffer);
      }
      function DequeueValue(container) {
        const pair = container._queue.shift();
        container._queueTotalSize -= pair.size;
        if (container._queueTotalSize < 0) {
          container._queueTotalSize = 0;
        }
        return pair.value;
      }
      function EnqueueValueWithSize(container, value, size) {
        if (!IsNonNegativeNumber(size) || size === Infinity) {
          throw new RangeError("Size must be a finite, non-NaN, non-negative number.");
        }
        container._queue.push({ value, size });
        container._queueTotalSize += size;
      }
      function PeekQueueValue(container) {
        const pair = container._queue.peek();
        return pair.value;
      }
      function ResetQueue(container) {
        container._queue = new SimpleQueue();
        container._queueTotalSize = 0;
      }
      function isDataViewConstructor(ctor) {
        return ctor === DataView;
      }
      function isDataView(view) {
        return isDataViewConstructor(view.constructor);
      }
      function arrayBufferViewElementSize(ctor) {
        if (isDataViewConstructor(ctor)) {
          return 1;
        }
        return ctor.BYTES_PER_ELEMENT;
      }
      class ReadableStreamBYOBRequest {
        constructor() {
          throw new TypeError("Illegal constructor");
        }
        /**
         * Returns the view for writing in to, or `null` if the BYOB request has already been responded to.
         */
        get view() {
          if (!IsReadableStreamBYOBRequest(this)) {
            throw byobRequestBrandCheckException("view");
          }
          return this._view;
        }
        respond(bytesWritten) {
          if (!IsReadableStreamBYOBRequest(this)) {
            throw byobRequestBrandCheckException("respond");
          }
          assertRequiredArgument(bytesWritten, 1, "respond");
          bytesWritten = convertUnsignedLongLongWithEnforceRange(bytesWritten, "First parameter");
          if (this._associatedReadableByteStreamController === void 0) {
            throw new TypeError("This BYOB request has been invalidated");
          }
          if (IsDetachedBuffer(this._view.buffer)) {
            throw new TypeError(`The BYOB request's buffer has been detached and so cannot be used as a response`);
          }
          ReadableByteStreamControllerRespond(this._associatedReadableByteStreamController, bytesWritten);
        }
        respondWithNewView(view) {
          if (!IsReadableStreamBYOBRequest(this)) {
            throw byobRequestBrandCheckException("respondWithNewView");
          }
          assertRequiredArgument(view, 1, "respondWithNewView");
          if (!ArrayBuffer.isView(view)) {
            throw new TypeError("You can only respond with array buffer views");
          }
          if (this._associatedReadableByteStreamController === void 0) {
            throw new TypeError("This BYOB request has been invalidated");
          }
          if (IsDetachedBuffer(view.buffer)) {
            throw new TypeError("The given view's buffer has been detached and so cannot be used as a response");
          }
          ReadableByteStreamControllerRespondWithNewView(this._associatedReadableByteStreamController, view);
        }
      }
      Object.defineProperties(ReadableStreamBYOBRequest.prototype, {
        respond: { enumerable: true },
        respondWithNewView: { enumerable: true },
        view: { enumerable: true }
      });
      setFunctionName(ReadableStreamBYOBRequest.prototype.respond, "respond");
      setFunctionName(ReadableStreamBYOBRequest.prototype.respondWithNewView, "respondWithNewView");
      if (typeof Symbol.toStringTag === "symbol") {
        Object.defineProperty(ReadableStreamBYOBRequest.prototype, Symbol.toStringTag, {
          value: "ReadableStreamBYOBRequest",
          configurable: true
        });
      }
      class ReadableByteStreamController {
        constructor() {
          throw new TypeError("Illegal constructor");
        }
        /**
         * Returns the current BYOB pull request, or `null` if there isn't one.
         */
        get byobRequest() {
          if (!IsReadableByteStreamController(this)) {
            throw byteStreamControllerBrandCheckException("byobRequest");
          }
          return ReadableByteStreamControllerGetBYOBRequest(this);
        }
        /**
         * Returns the desired size to fill the controlled stream's internal queue. It can be negative, if the queue is
         * over-full. An underlying byte source ought to use this information to determine when and how to apply backpressure.
         */
        get desiredSize() {
          if (!IsReadableByteStreamController(this)) {
            throw byteStreamControllerBrandCheckException("desiredSize");
          }
          return ReadableByteStreamControllerGetDesiredSize(this);
        }
        /**
         * Closes the controlled readable stream. Consumers will still be able to read any previously-enqueued chunks from
         * the stream, but once those are read, the stream will become closed.
         */
        close() {
          if (!IsReadableByteStreamController(this)) {
            throw byteStreamControllerBrandCheckException("close");
          }
          if (this._closeRequested) {
            throw new TypeError("The stream has already been closed; do not close it again!");
          }
          const state = this._controlledReadableByteStream._state;
          if (state !== "readable") {
            throw new TypeError(`The stream (in ${state} state) is not in the readable state and cannot be closed`);
          }
          ReadableByteStreamControllerClose(this);
        }
        enqueue(chunk) {
          if (!IsReadableByteStreamController(this)) {
            throw byteStreamControllerBrandCheckException("enqueue");
          }
          assertRequiredArgument(chunk, 1, "enqueue");
          if (!ArrayBuffer.isView(chunk)) {
            throw new TypeError("chunk must be an array buffer view");
          }
          if (chunk.byteLength === 0) {
            throw new TypeError("chunk must have non-zero byteLength");
          }
          if (chunk.buffer.byteLength === 0) {
            throw new TypeError(`chunk's buffer must have non-zero byteLength`);
          }
          if (this._closeRequested) {
            throw new TypeError("stream is closed or draining");
          }
          const state = this._controlledReadableByteStream._state;
          if (state !== "readable") {
            throw new TypeError(`The stream (in ${state} state) is not in the readable state and cannot be enqueued to`);
          }
          ReadableByteStreamControllerEnqueue(this, chunk);
        }
        /**
         * Errors the controlled readable stream, making all future interactions with it fail with the given error `e`.
         */
        error(e2 = void 0) {
          if (!IsReadableByteStreamController(this)) {
            throw byteStreamControllerBrandCheckException("error");
          }
          ReadableByteStreamControllerError(this, e2);
        }
        /** @internal */
        [CancelSteps](reason) {
          ReadableByteStreamControllerClearPendingPullIntos(this);
          ResetQueue(this);
          const result = this._cancelAlgorithm(reason);
          ReadableByteStreamControllerClearAlgorithms(this);
          return result;
        }
        /** @internal */
        [PullSteps](readRequest) {
          const stream = this._controlledReadableByteStream;
          if (this._queueTotalSize > 0) {
            ReadableByteStreamControllerFillReadRequestFromQueue(this, readRequest);
            return;
          }
          const autoAllocateChunkSize = this._autoAllocateChunkSize;
          if (autoAllocateChunkSize !== void 0) {
            let buffer;
            try {
              buffer = new ArrayBuffer(autoAllocateChunkSize);
            } catch (bufferE) {
              readRequest._errorSteps(bufferE);
              return;
            }
            const pullIntoDescriptor = {
              buffer,
              bufferByteLength: autoAllocateChunkSize,
              byteOffset: 0,
              byteLength: autoAllocateChunkSize,
              bytesFilled: 0,
              minimumFill: 1,
              elementSize: 1,
              viewConstructor: Uint8Array,
              readerType: "default"
            };
            this._pendingPullIntos.push(pullIntoDescriptor);
          }
          ReadableStreamAddReadRequest(stream, readRequest);
          ReadableByteStreamControllerCallPullIfNeeded(this);
        }
        /** @internal */
        [ReleaseSteps]() {
          if (this._pendingPullIntos.length > 0) {
            const firstPullInto = this._pendingPullIntos.peek();
            firstPullInto.readerType = "none";
            this._pendingPullIntos = new SimpleQueue();
            this._pendingPullIntos.push(firstPullInto);
          }
        }
      }
      Object.defineProperties(ReadableByteStreamController.prototype, {
        close: { enumerable: true },
        enqueue: { enumerable: true },
        error: { enumerable: true },
        byobRequest: { enumerable: true },
        desiredSize: { enumerable: true }
      });
      setFunctionName(ReadableByteStreamController.prototype.close, "close");
      setFunctionName(ReadableByteStreamController.prototype.enqueue, "enqueue");
      setFunctionName(ReadableByteStreamController.prototype.error, "error");
      if (typeof Symbol.toStringTag === "symbol") {
        Object.defineProperty(ReadableByteStreamController.prototype, Symbol.toStringTag, {
          value: "ReadableByteStreamController",
          configurable: true
        });
      }
      function IsReadableByteStreamController(x2) {
        if (!typeIsObject(x2)) {
          return false;
        }
        if (!Object.prototype.hasOwnProperty.call(x2, "_controlledReadableByteStream")) {
          return false;
        }
        return x2 instanceof ReadableByteStreamController;
      }
      function IsReadableStreamBYOBRequest(x2) {
        if (!typeIsObject(x2)) {
          return false;
        }
        if (!Object.prototype.hasOwnProperty.call(x2, "_associatedReadableByteStreamController")) {
          return false;
        }
        return x2 instanceof ReadableStreamBYOBRequest;
      }
      function ReadableByteStreamControllerCallPullIfNeeded(controller) {
        const shouldPull = ReadableByteStreamControllerShouldCallPull(controller);
        if (!shouldPull) {
          return;
        }
        if (controller._pulling) {
          controller._pullAgain = true;
          return;
        }
        controller._pulling = true;
        const pullPromise = controller._pullAlgorithm();
        uponPromise(pullPromise, () => {
          controller._pulling = false;
          if (controller._pullAgain) {
            controller._pullAgain = false;
            ReadableByteStreamControllerCallPullIfNeeded(controller);
          }
          return null;
        }, (e2) => {
          ReadableByteStreamControllerError(controller, e2);
          return null;
        });
      }
      function ReadableByteStreamControllerClearPendingPullIntos(controller) {
        ReadableByteStreamControllerInvalidateBYOBRequest(controller);
        controller._pendingPullIntos = new SimpleQueue();
      }
      function ReadableByteStreamControllerCommitPullIntoDescriptor(stream, pullIntoDescriptor) {
        let done = false;
        if (stream._state === "closed") {
          done = true;
        }
        const filledView = ReadableByteStreamControllerConvertPullIntoDescriptor(pullIntoDescriptor);
        if (pullIntoDescriptor.readerType === "default") {
          ReadableStreamFulfillReadRequest(stream, filledView, done);
        } else {
          ReadableStreamFulfillReadIntoRequest(stream, filledView, done);
        }
      }
      function ReadableByteStreamControllerConvertPullIntoDescriptor(pullIntoDescriptor) {
        const bytesFilled = pullIntoDescriptor.bytesFilled;
        const elementSize = pullIntoDescriptor.elementSize;
        return new pullIntoDescriptor.viewConstructor(pullIntoDescriptor.buffer, pullIntoDescriptor.byteOffset, bytesFilled / elementSize);
      }
      function ReadableByteStreamControllerEnqueueChunkToQueue(controller, buffer, byteOffset, byteLength) {
        controller._queue.push({ buffer, byteOffset, byteLength });
        controller._queueTotalSize += byteLength;
      }
      function ReadableByteStreamControllerEnqueueClonedChunkToQueue(controller, buffer, byteOffset, byteLength) {
        let clonedChunk;
        try {
          clonedChunk = ArrayBufferSlice(buffer, byteOffset, byteOffset + byteLength);
        } catch (cloneE) {
          ReadableByteStreamControllerError(controller, cloneE);
          throw cloneE;
        }
        ReadableByteStreamControllerEnqueueChunkToQueue(controller, clonedChunk, 0, byteLength);
      }
      function ReadableByteStreamControllerEnqueueDetachedPullIntoToQueue(controller, firstDescriptor) {
        if (firstDescriptor.bytesFilled > 0) {
          ReadableByteStreamControllerEnqueueClonedChunkToQueue(controller, firstDescriptor.buffer, firstDescriptor.byteOffset, firstDescriptor.bytesFilled);
        }
        ReadableByteStreamControllerShiftPendingPullInto(controller);
      }
      function ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(controller, pullIntoDescriptor) {
        const maxBytesToCopy = Math.min(controller._queueTotalSize, pullIntoDescriptor.byteLength - pullIntoDescriptor.bytesFilled);
        const maxBytesFilled = pullIntoDescriptor.bytesFilled + maxBytesToCopy;
        let totalBytesToCopyRemaining = maxBytesToCopy;
        let ready = false;
        const remainderBytes = maxBytesFilled % pullIntoDescriptor.elementSize;
        const maxAlignedBytes = maxBytesFilled - remainderBytes;
        if (maxAlignedBytes >= pullIntoDescriptor.minimumFill) {
          totalBytesToCopyRemaining = maxAlignedBytes - pullIntoDescriptor.bytesFilled;
          ready = true;
        }
        const queue = controller._queue;
        while (totalBytesToCopyRemaining > 0) {
          const headOfQueue = queue.peek();
          const bytesToCopy = Math.min(totalBytesToCopyRemaining, headOfQueue.byteLength);
          const destStart = pullIntoDescriptor.byteOffset + pullIntoDescriptor.bytesFilled;
          CopyDataBlockBytes(pullIntoDescriptor.buffer, destStart, headOfQueue.buffer, headOfQueue.byteOffset, bytesToCopy);
          if (headOfQueue.byteLength === bytesToCopy) {
            queue.shift();
          } else {
            headOfQueue.byteOffset += bytesToCopy;
            headOfQueue.byteLength -= bytesToCopy;
          }
          controller._queueTotalSize -= bytesToCopy;
          ReadableByteStreamControllerFillHeadPullIntoDescriptor(controller, bytesToCopy, pullIntoDescriptor);
          totalBytesToCopyRemaining -= bytesToCopy;
        }
        return ready;
      }
      function ReadableByteStreamControllerFillHeadPullIntoDescriptor(controller, size, pullIntoDescriptor) {
        pullIntoDescriptor.bytesFilled += size;
      }
      function ReadableByteStreamControllerHandleQueueDrain(controller) {
        if (controller._queueTotalSize === 0 && controller._closeRequested) {
          ReadableByteStreamControllerClearAlgorithms(controller);
          ReadableStreamClose(controller._controlledReadableByteStream);
        } else {
          ReadableByteStreamControllerCallPullIfNeeded(controller);
        }
      }
      function ReadableByteStreamControllerInvalidateBYOBRequest(controller) {
        if (controller._byobRequest === null) {
          return;
        }
        controller._byobRequest._associatedReadableByteStreamController = void 0;
        controller._byobRequest._view = null;
        controller._byobRequest = null;
      }
      function ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(controller) {
        while (controller._pendingPullIntos.length > 0) {
          if (controller._queueTotalSize === 0) {
            return;
          }
          const pullIntoDescriptor = controller._pendingPullIntos.peek();
          if (ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(controller, pullIntoDescriptor)) {
            ReadableByteStreamControllerShiftPendingPullInto(controller);
            ReadableByteStreamControllerCommitPullIntoDescriptor(controller._controlledReadableByteStream, pullIntoDescriptor);
          }
        }
      }
      function ReadableByteStreamControllerProcessReadRequestsUsingQueue(controller) {
        const reader = controller._controlledReadableByteStream._reader;
        while (reader._readRequests.length > 0) {
          if (controller._queueTotalSize === 0) {
            return;
          }
          const readRequest = reader._readRequests.shift();
          ReadableByteStreamControllerFillReadRequestFromQueue(controller, readRequest);
        }
      }
      function ReadableByteStreamControllerPullInto(controller, view, min, readIntoRequest) {
        const stream = controller._controlledReadableByteStream;
        const ctor = view.constructor;
        const elementSize = arrayBufferViewElementSize(ctor);
        const { byteOffset, byteLength } = view;
        const minimumFill = min * elementSize;
        let buffer;
        try {
          buffer = TransferArrayBuffer(view.buffer);
        } catch (e2) {
          readIntoRequest._errorSteps(e2);
          return;
        }
        const pullIntoDescriptor = {
          buffer,
          bufferByteLength: buffer.byteLength,
          byteOffset,
          byteLength,
          bytesFilled: 0,
          minimumFill,
          elementSize,
          viewConstructor: ctor,
          readerType: "byob"
        };
        if (controller._pendingPullIntos.length > 0) {
          controller._pendingPullIntos.push(pullIntoDescriptor);
          ReadableStreamAddReadIntoRequest(stream, readIntoRequest);
          return;
        }
        if (stream._state === "closed") {
          const emptyView = new ctor(pullIntoDescriptor.buffer, pullIntoDescriptor.byteOffset, 0);
          readIntoRequest._closeSteps(emptyView);
          return;
        }
        if (controller._queueTotalSize > 0) {
          if (ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(controller, pullIntoDescriptor)) {
            const filledView = ReadableByteStreamControllerConvertPullIntoDescriptor(pullIntoDescriptor);
            ReadableByteStreamControllerHandleQueueDrain(controller);
            readIntoRequest._chunkSteps(filledView);
            return;
          }
          if (controller._closeRequested) {
            const e2 = new TypeError("Insufficient bytes to fill elements in the given buffer");
            ReadableByteStreamControllerError(controller, e2);
            readIntoRequest._errorSteps(e2);
            return;
          }
        }
        controller._pendingPullIntos.push(pullIntoDescriptor);
        ReadableStreamAddReadIntoRequest(stream, readIntoRequest);
        ReadableByteStreamControllerCallPullIfNeeded(controller);
      }
      function ReadableByteStreamControllerRespondInClosedState(controller, firstDescriptor) {
        if (firstDescriptor.readerType === "none") {
          ReadableByteStreamControllerShiftPendingPullInto(controller);
        }
        const stream = controller._controlledReadableByteStream;
        if (ReadableStreamHasBYOBReader(stream)) {
          while (ReadableStreamGetNumReadIntoRequests(stream) > 0) {
            const pullIntoDescriptor = ReadableByteStreamControllerShiftPendingPullInto(controller);
            ReadableByteStreamControllerCommitPullIntoDescriptor(stream, pullIntoDescriptor);
          }
        }
      }
      function ReadableByteStreamControllerRespondInReadableState(controller, bytesWritten, pullIntoDescriptor) {
        ReadableByteStreamControllerFillHeadPullIntoDescriptor(controller, bytesWritten, pullIntoDescriptor);
        if (pullIntoDescriptor.readerType === "none") {
          ReadableByteStreamControllerEnqueueDetachedPullIntoToQueue(controller, pullIntoDescriptor);
          ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(controller);
          return;
        }
        if (pullIntoDescriptor.bytesFilled < pullIntoDescriptor.minimumFill) {
          return;
        }
        ReadableByteStreamControllerShiftPendingPullInto(controller);
        const remainderSize = pullIntoDescriptor.bytesFilled % pullIntoDescriptor.elementSize;
        if (remainderSize > 0) {
          const end = pullIntoDescriptor.byteOffset + pullIntoDescriptor.bytesFilled;
          ReadableByteStreamControllerEnqueueClonedChunkToQueue(controller, pullIntoDescriptor.buffer, end - remainderSize, remainderSize);
        }
        pullIntoDescriptor.bytesFilled -= remainderSize;
        ReadableByteStreamControllerCommitPullIntoDescriptor(controller._controlledReadableByteStream, pullIntoDescriptor);
        ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(controller);
      }
      function ReadableByteStreamControllerRespondInternal(controller, bytesWritten) {
        const firstDescriptor = controller._pendingPullIntos.peek();
        ReadableByteStreamControllerInvalidateBYOBRequest(controller);
        const state = controller._controlledReadableByteStream._state;
        if (state === "closed") {
          ReadableByteStreamControllerRespondInClosedState(controller, firstDescriptor);
        } else {
          ReadableByteStreamControllerRespondInReadableState(controller, bytesWritten, firstDescriptor);
        }
        ReadableByteStreamControllerCallPullIfNeeded(controller);
      }
      function ReadableByteStreamControllerShiftPendingPullInto(controller) {
        const descriptor = controller._pendingPullIntos.shift();
        return descriptor;
      }
      function ReadableByteStreamControllerShouldCallPull(controller) {
        const stream = controller._controlledReadableByteStream;
        if (stream._state !== "readable") {
          return false;
        }
        if (controller._closeRequested) {
          return false;
        }
        if (!controller._started) {
          return false;
        }
        if (ReadableStreamHasDefaultReader(stream) && ReadableStreamGetNumReadRequests(stream) > 0) {
          return true;
        }
        if (ReadableStreamHasBYOBReader(stream) && ReadableStreamGetNumReadIntoRequests(stream) > 0) {
          return true;
        }
        const desiredSize = ReadableByteStreamControllerGetDesiredSize(controller);
        if (desiredSize > 0) {
          return true;
        }
        return false;
      }
      function ReadableByteStreamControllerClearAlgorithms(controller) {
        controller._pullAlgorithm = void 0;
        controller._cancelAlgorithm = void 0;
      }
      function ReadableByteStreamControllerClose(controller) {
        const stream = controller._controlledReadableByteStream;
        if (controller._closeRequested || stream._state !== "readable") {
          return;
        }
        if (controller._queueTotalSize > 0) {
          controller._closeRequested = true;
          return;
        }
        if (controller._pendingPullIntos.length > 0) {
          const firstPendingPullInto = controller._pendingPullIntos.peek();
          if (firstPendingPullInto.bytesFilled % firstPendingPullInto.elementSize !== 0) {
            const e2 = new TypeError("Insufficient bytes to fill elements in the given buffer");
            ReadableByteStreamControllerError(controller, e2);
            throw e2;
          }
        }
        ReadableByteStreamControllerClearAlgorithms(controller);
        ReadableStreamClose(stream);
      }
      function ReadableByteStreamControllerEnqueue(controller, chunk) {
        const stream = controller._controlledReadableByteStream;
        if (controller._closeRequested || stream._state !== "readable") {
          return;
        }
        const { buffer, byteOffset, byteLength } = chunk;
        if (IsDetachedBuffer(buffer)) {
          throw new TypeError("chunk's buffer is detached and so cannot be enqueued");
        }
        const transferredBuffer = TransferArrayBuffer(buffer);
        if (controller._pendingPullIntos.length > 0) {
          const firstPendingPullInto = controller._pendingPullIntos.peek();
          if (IsDetachedBuffer(firstPendingPullInto.buffer)) {
            throw new TypeError("The BYOB request's buffer has been detached and so cannot be filled with an enqueued chunk");
          }
          ReadableByteStreamControllerInvalidateBYOBRequest(controller);
          firstPendingPullInto.buffer = TransferArrayBuffer(firstPendingPullInto.buffer);
          if (firstPendingPullInto.readerType === "none") {
            ReadableByteStreamControllerEnqueueDetachedPullIntoToQueue(controller, firstPendingPullInto);
          }
        }
        if (ReadableStreamHasDefaultReader(stream)) {
          ReadableByteStreamControllerProcessReadRequestsUsingQueue(controller);
          if (ReadableStreamGetNumReadRequests(stream) === 0) {
            ReadableByteStreamControllerEnqueueChunkToQueue(controller, transferredBuffer, byteOffset, byteLength);
          } else {
            if (controller._pendingPullIntos.length > 0) {
              ReadableByteStreamControllerShiftPendingPullInto(controller);
            }
            const transferredView = new Uint8Array(transferredBuffer, byteOffset, byteLength);
            ReadableStreamFulfillReadRequest(stream, transferredView, false);
          }
        } else if (ReadableStreamHasBYOBReader(stream)) {
          ReadableByteStreamControllerEnqueueChunkToQueue(controller, transferredBuffer, byteOffset, byteLength);
          ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(controller);
        } else {
          ReadableByteStreamControllerEnqueueChunkToQueue(controller, transferredBuffer, byteOffset, byteLength);
        }
        ReadableByteStreamControllerCallPullIfNeeded(controller);
      }
      function ReadableByteStreamControllerError(controller, e2) {
        const stream = controller._controlledReadableByteStream;
        if (stream._state !== "readable") {
          return;
        }
        ReadableByteStreamControllerClearPendingPullIntos(controller);
        ResetQueue(controller);
        ReadableByteStreamControllerClearAlgorithms(controller);
        ReadableStreamError(stream, e2);
      }
      function ReadableByteStreamControllerFillReadRequestFromQueue(controller, readRequest) {
        const entry = controller._queue.shift();
        controller._queueTotalSize -= entry.byteLength;
        ReadableByteStreamControllerHandleQueueDrain(controller);
        const view = new Uint8Array(entry.buffer, entry.byteOffset, entry.byteLength);
        readRequest._chunkSteps(view);
      }
      function ReadableByteStreamControllerGetBYOBRequest(controller) {
        if (controller._byobRequest === null && controller._pendingPullIntos.length > 0) {
          const firstDescriptor = controller._pendingPullIntos.peek();
          const view = new Uint8Array(firstDescriptor.buffer, firstDescriptor.byteOffset + firstDescriptor.bytesFilled, firstDescriptor.byteLength - firstDescriptor.bytesFilled);
          const byobRequest = Object.create(ReadableStreamBYOBRequest.prototype);
          SetUpReadableStreamBYOBRequest(byobRequest, controller, view);
          controller._byobRequest = byobRequest;
        }
        return controller._byobRequest;
      }
      function ReadableByteStreamControllerGetDesiredSize(controller) {
        const state = controller._controlledReadableByteStream._state;
        if (state === "errored") {
          return null;
        }
        if (state === "closed") {
          return 0;
        }
        return controller._strategyHWM - controller._queueTotalSize;
      }
      function ReadableByteStreamControllerRespond(controller, bytesWritten) {
        const firstDescriptor = controller._pendingPullIntos.peek();
        const state = controller._controlledReadableByteStream._state;
        if (state === "closed") {
          if (bytesWritten !== 0) {
            throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream");
          }
        } else {
          if (bytesWritten === 0) {
            throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");
          }
          if (firstDescriptor.bytesFilled + bytesWritten > firstDescriptor.byteLength) {
            throw new RangeError("bytesWritten out of range");
          }
        }
        firstDescriptor.buffer = TransferArrayBuffer(firstDescriptor.buffer);
        ReadableByteStreamControllerRespondInternal(controller, bytesWritten);
      }
      function ReadableByteStreamControllerRespondWithNewView(controller, view) {
        const firstDescriptor = controller._pendingPullIntos.peek();
        const state = controller._controlledReadableByteStream._state;
        if (state === "closed") {
          if (view.byteLength !== 0) {
            throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream");
          }
        } else {
          if (view.byteLength === 0) {
            throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");
          }
        }
        if (firstDescriptor.byteOffset + firstDescriptor.bytesFilled !== view.byteOffset) {
          throw new RangeError("The region specified by view does not match byobRequest");
        }
        if (firstDescriptor.bufferByteLength !== view.buffer.byteLength) {
          throw new RangeError("The buffer of view has different capacity than byobRequest");
        }
        if (firstDescriptor.bytesFilled + view.byteLength > firstDescriptor.byteLength) {
          throw new RangeError("The region specified by view is larger than byobRequest");
        }
        const viewByteLength = view.byteLength;
        firstDescriptor.buffer = TransferArrayBuffer(view.buffer);
        ReadableByteStreamControllerRespondInternal(controller, viewByteLength);
      }
      function SetUpReadableByteStreamController(stream, controller, startAlgorithm, pullAlgorithm, cancelAlgorithm, highWaterMark, autoAllocateChunkSize) {
        controller._controlledReadableByteStream = stream;
        controller._pullAgain = false;
        controller._pulling = false;
        controller._byobRequest = null;
        controller._queue = controller._queueTotalSize = void 0;
        ResetQueue(controller);
        controller._closeRequested = false;
        controller._started = false;
        controller._strategyHWM = highWaterMark;
        controller._pullAlgorithm = pullAlgorithm;
        controller._cancelAlgorithm = cancelAlgorithm;
        controller._autoAllocateChunkSize = autoAllocateChunkSize;
        controller._pendingPullIntos = new SimpleQueue();
        stream._readableStreamController = controller;
        const startResult = startAlgorithm();
        uponPromise(promiseResolvedWith(startResult), () => {
          controller._started = true;
          ReadableByteStreamControllerCallPullIfNeeded(controller);
          return null;
        }, (r2) => {
          ReadableByteStreamControllerError(controller, r2);
          return null;
        });
      }
      function SetUpReadableByteStreamControllerFromUnderlyingSource(stream, underlyingByteSource, highWaterMark) {
        const controller = Object.create(ReadableByteStreamController.prototype);
        let startAlgorithm;
        let pullAlgorithm;
        let cancelAlgorithm;
        if (underlyingByteSource.start !== void 0) {
          startAlgorithm = () => underlyingByteSource.start(controller);
        } else {
          startAlgorithm = () => void 0;
        }
        if (underlyingByteSource.pull !== void 0) {
          pullAlgorithm = () => underlyingByteSource.pull(controller);
        } else {
          pullAlgorithm = () => promiseResolvedWith(void 0);
        }
        if (underlyingByteSource.cancel !== void 0) {
          cancelAlgorithm = (reason) => underlyingByteSource.cancel(reason);
        } else {
          cancelAlgorithm = () => promiseResolvedWith(void 0);
        }
        const autoAllocateChunkSize = underlyingByteSource.autoAllocateChunkSize;
        if (autoAllocateChunkSize === 0) {
          throw new TypeError("autoAllocateChunkSize must be greater than 0");
        }
        SetUpReadableByteStreamController(stream, controller, startAlgorithm, pullAlgorithm, cancelAlgorithm, highWaterMark, autoAllocateChunkSize);
      }
      function SetUpReadableStreamBYOBRequest(request, controller, view) {
        request._associatedReadableByteStreamController = controller;
        request._view = view;
      }
      function byobRequestBrandCheckException(name) {
        return new TypeError(`ReadableStreamBYOBRequest.prototype.${name} can only be used on a ReadableStreamBYOBRequest`);
      }
      function byteStreamControllerBrandCheckException(name) {
        return new TypeError(`ReadableByteStreamController.prototype.${name} can only be used on a ReadableByteStreamController`);
      }
      function convertReaderOptions(options, context) {
        assertDictionary(options, context);
        const mode = options === null || options === void 0 ? void 0 : options.mode;
        return {
          mode: mode === void 0 ? void 0 : convertReadableStreamReaderMode(mode, `${context} has member 'mode' that`)
        };
      }
      function convertReadableStreamReaderMode(mode, context) {
        mode = `${mode}`;
        if (mode !== "byob") {
          throw new TypeError(`${context} '${mode}' is not a valid enumeration value for ReadableStreamReaderMode`);
        }
        return mode;
      }
      function convertByobReadOptions(options, context) {
        var _a2;
        assertDictionary(options, context);
        const min = (_a2 = options === null || options === void 0 ? void 0 : options.min) !== null && _a2 !== void 0 ? _a2 : 1;
        return {
          min: convertUnsignedLongLongWithEnforceRange(min, `${context} has member 'min' that`)
        };
      }
      function AcquireReadableStreamBYOBReader(stream) {
        return new ReadableStreamBYOBReader(stream);
      }
      function ReadableStreamAddReadIntoRequest(stream, readIntoRequest) {
        stream._reader._readIntoRequests.push(readIntoRequest);
      }
      function ReadableStreamFulfillReadIntoRequest(stream, chunk, done) {
        const reader = stream._reader;
        const readIntoRequest = reader._readIntoRequests.shift();
        if (done) {
          readIntoRequest._closeSteps(chunk);
        } else {
          readIntoRequest._chunkSteps(chunk);
        }
      }
      function ReadableStreamGetNumReadIntoRequests(stream) {
        return stream._reader._readIntoRequests.length;
      }
      function ReadableStreamHasBYOBReader(stream) {
        const reader = stream._reader;
        if (reader === void 0) {
          return false;
        }
        if (!IsReadableStreamBYOBReader(reader)) {
          return false;
        }
        return true;
      }
      class ReadableStreamBYOBReader {
        constructor(stream) {
          assertRequiredArgument(stream, 1, "ReadableStreamBYOBReader");
          assertReadableStream(stream, "First parameter");
          if (IsReadableStreamLocked(stream)) {
            throw new TypeError("This stream has already been locked for exclusive reading by another reader");
          }
          if (!IsReadableByteStreamController(stream._readableStreamController)) {
            throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");
          }
          ReadableStreamReaderGenericInitialize(this, stream);
          this._readIntoRequests = new SimpleQueue();
        }
        /**
         * Returns a promise that will be fulfilled when the stream becomes closed, or rejected if the stream ever errors or
         * the reader's lock is released before the stream finishes closing.
         */
        get closed() {
          if (!IsReadableStreamBYOBReader(this)) {
            return promiseRejectedWith(byobReaderBrandCheckException("closed"));
          }
          return this._closedPromise;
        }
        /**
         * If the reader is active, behaves the same as {@link ReadableStream.cancel | stream.cancel(reason)}.
         */
        cancel(reason = void 0) {
          if (!IsReadableStreamBYOBReader(this)) {
            return promiseRejectedWith(byobReaderBrandCheckException("cancel"));
          }
          if (this._ownerReadableStream === void 0) {
            return promiseRejectedWith(readerLockException("cancel"));
          }
          return ReadableStreamReaderGenericCancel(this, reason);
        }
        read(view, rawOptions = {}) {
          if (!IsReadableStreamBYOBReader(this)) {
            return promiseRejectedWith(byobReaderBrandCheckException("read"));
          }
          if (!ArrayBuffer.isView(view)) {
            return promiseRejectedWith(new TypeError("view must be an array buffer view"));
          }
          if (view.byteLength === 0) {
            return promiseRejectedWith(new TypeError("view must have non-zero byteLength"));
          }
          if (view.buffer.byteLength === 0) {
            return promiseRejectedWith(new TypeError(`view's buffer must have non-zero byteLength`));
          }
          if (IsDetachedBuffer(view.buffer)) {
            return promiseRejectedWith(new TypeError("view's buffer has been detached"));
          }
          let options;
          try {
            options = convertByobReadOptions(rawOptions, "options");
          } catch (e2) {
            return promiseRejectedWith(e2);
          }
          const min = options.min;
          if (min === 0) {
            return promiseRejectedWith(new TypeError("options.min must be greater than 0"));
          }
          if (!isDataView(view)) {
            if (min > view.length) {
              return promiseRejectedWith(new RangeError("options.min must be less than or equal to view's length"));
            }
          } else if (min > view.byteLength) {
            return promiseRejectedWith(new RangeError("options.min must be less than or equal to view's byteLength"));
          }
          if (this._ownerReadableStream === void 0) {
            return promiseRejectedWith(readerLockException("read from"));
          }
          let resolvePromise;
          let rejectPromise;
          const promise = newPromise((resolve, reject) => {
            resolvePromise = resolve;
            rejectPromise = reject;
          });
          const readIntoRequest = {
            _chunkSteps: (chunk) => resolvePromise({ value: chunk, done: false }),
            _closeSteps: (chunk) => resolvePromise({ value: chunk, done: true }),
            _errorSteps: (e2) => rejectPromise(e2)
          };
          ReadableStreamBYOBReaderRead(this, view, min, readIntoRequest);
          return promise;
        }
        /**
         * Releases the reader's lock on the corresponding stream. After the lock is released, the reader is no longer active.
         * If the associated stream is errored when the lock is released, the reader will appear errored in the same way
         * from now on; otherwise, the reader will appear closed.
         *
         * A reader's lock cannot be released while it still has a pending read request, i.e., if a promise returned by
         * the reader's {@link ReadableStreamBYOBReader.read | read()} method has not yet been settled. Attempting to
         * do so will throw a `TypeError` and leave the reader locked to the stream.
         */
        releaseLock() {
          if (!IsReadableStreamBYOBReader(this)) {
            throw byobReaderBrandCheckException("releaseLock");
          }
          if (this._ownerReadableStream === void 0) {
            return;
          }
          ReadableStreamBYOBReaderRelease(this);
        }
      }
      Object.defineProperties(ReadableStreamBYOBReader.prototype, {
        cancel: { enumerable: true },
        read: { enumerable: true },
        releaseLock: { enumerable: true },
        closed: { enumerable: true }
      });
      setFunctionName(ReadableStreamBYOBReader.prototype.cancel, "cancel");
      setFunctionName(ReadableStreamBYOBReader.prototype.read, "read");
      setFunctionName(ReadableStreamBYOBReader.prototype.releaseLock, "releaseLock");
      if (typeof Symbol.toStringTag === "symbol") {
        Object.defineProperty(ReadableStreamBYOBReader.prototype, Symbol.toStringTag, {
          value: "ReadableStreamBYOBReader",
          configurable: true
        });
      }
      function IsReadableStreamBYOBReader(x2) {
        if (!typeIsObject(x2)) {
          return false;
        }
        if (!Object.prototype.hasOwnProperty.call(x2, "_readIntoRequests")) {
          return false;
        }
        return x2 instanceof ReadableStreamBYOBReader;
      }
      function ReadableStreamBYOBReaderRead(reader, view, min, readIntoRequest) {
        const stream = reader._ownerReadableStream;
        stream._disturbed = true;
        if (stream._state === "errored") {
          readIntoRequest._errorSteps(stream._storedError);
        } else {
          ReadableByteStreamControllerPullInto(stream._readableStreamController, view, min, readIntoRequest);
        }
      }
      function ReadableStreamBYOBReaderRelease(reader) {
        ReadableStreamReaderGenericRelease(reader);
        const e2 = new TypeError("Reader was released");
        ReadableStreamBYOBReaderErrorReadIntoRequests(reader, e2);
      }
      function ReadableStreamBYOBReaderErrorReadIntoRequests(reader, e2) {
        const readIntoRequests = reader._readIntoRequests;
        reader._readIntoRequests = new SimpleQueue();
        readIntoRequests.forEach((readIntoRequest) => {
          readIntoRequest._errorSteps(e2);
        });
      }
      function byobReaderBrandCheckException(name) {
        return new TypeError(`ReadableStreamBYOBReader.prototype.${name} can only be used on a ReadableStreamBYOBReader`);
      }
      function ExtractHighWaterMark(strategy, defaultHWM) {
        const { highWaterMark } = strategy;
        if (highWaterMark === void 0) {
          return defaultHWM;
        }
        if (NumberIsNaN(highWaterMark) || highWaterMark < 0) {
          throw new RangeError("Invalid highWaterMark");
        }
        return highWaterMark;
      }
      function ExtractSizeAlgorithm(strategy) {
        const { size } = strategy;
        if (!size) {
          return () => 1;
        }
        return size;
      }
      function convertQueuingStrategy(init, context) {
        assertDictionary(init, context);
        const highWaterMark = init === null || init === void 0 ? void 0 : init.highWaterMark;
        const size = init === null || init === void 0 ? void 0 : init.size;
        return {
          highWaterMark: highWaterMark === void 0 ? void 0 : convertUnrestrictedDouble(highWaterMark),
          size: size === void 0 ? void 0 : convertQueuingStrategySize(size, `${context} has member 'size' that`)
        };
      }
      function convertQueuingStrategySize(fn, context) {
        assertFunction(fn, context);
        return (chunk) => convertUnrestrictedDouble(fn(chunk));
      }
      function convertUnderlyingSink(original, context) {
        assertDictionary(original, context);
        const abort = original === null || original === void 0 ? void 0 : original.abort;
        const close = original === null || original === void 0 ? void 0 : original.close;
        const start = original === null || original === void 0 ? void 0 : original.start;
        const type = original === null || original === void 0 ? void 0 : original.type;
        const write = original === null || original === void 0 ? void 0 : original.write;
        return {
          abort: abort === void 0 ? void 0 : convertUnderlyingSinkAbortCallback(abort, original, `${context} has member 'abort' that`),
          close: close === void 0 ? void 0 : convertUnderlyingSinkCloseCallback(close, original, `${context} has member 'close' that`),
          start: start === void 0 ? void 0 : convertUnderlyingSinkStartCallback(start, original, `${context} has member 'start' that`),
          write: write === void 0 ? void 0 : convertUnderlyingSinkWriteCallback(write, original, `${context} has member 'write' that`),
          type
        };
      }
      function convertUnderlyingSinkAbortCallback(fn, original, context) {
        assertFunction(fn, context);
        return (reason) => promiseCall(fn, original, [reason]);
      }
      function convertUnderlyingSinkCloseCallback(fn, original, context) {
        assertFunction(fn, context);
        return () => promiseCall(fn, original, []);
      }
      function convertUnderlyingSinkStartCallback(fn, original, context) {
        assertFunction(fn, context);
        return (controller) => reflectCall(fn, original, [controller]);
      }
      function convertUnderlyingSinkWriteCallback(fn, original, context) {
        assertFunction(fn, context);
        return (chunk, controller) => promiseCall(fn, original, [chunk, controller]);
      }
      function assertWritableStream(x2, context) {
        if (!IsWritableStream(x2)) {
          throw new TypeError(`${context} is not a WritableStream.`);
        }
      }
      function isAbortSignal2(value) {
        if (typeof value !== "object" || value === null) {
          return false;
        }
        try {
          return typeof value.aborted === "boolean";
        } catch (_a2) {
          return false;
        }
      }
      const supportsAbortController = typeof AbortController === "function";
      function createAbortController() {
        if (supportsAbortController) {
          return new AbortController();
        }
        return void 0;
      }
      class WritableStream {
        constructor(rawUnderlyingSink = {}, rawStrategy = {}) {
          if (rawUnderlyingSink === void 0) {
            rawUnderlyingSink = null;
          } else {
            assertObject(rawUnderlyingSink, "First parameter");
          }
          const strategy = convertQueuingStrategy(rawStrategy, "Second parameter");
          const underlyingSink = convertUnderlyingSink(rawUnderlyingSink, "First parameter");
          InitializeWritableStream(this);
          const type = underlyingSink.type;
          if (type !== void 0) {
            throw new RangeError("Invalid type is specified");
          }
          const sizeAlgorithm = ExtractSizeAlgorithm(strategy);
          const highWaterMark = ExtractHighWaterMark(strategy, 1);
          SetUpWritableStreamDefaultControllerFromUnderlyingSink(this, underlyingSink, highWaterMark, sizeAlgorithm);
        }
        /**
         * Returns whether or not the writable stream is locked to a writer.
         */
        get locked() {
          if (!IsWritableStream(this)) {
            throw streamBrandCheckException$2("locked");
          }
          return IsWritableStreamLocked(this);
        }
        /**
         * Aborts the stream, signaling that the producer can no longer successfully write to the stream and it is to be
         * immediately moved to an errored state, with any queued-up writes discarded. This will also execute any abort
         * mechanism of the underlying sink.
         *
         * The returned promise will fulfill if the stream shuts down successfully, or reject if the underlying sink signaled
         * that there was an error doing so. Additionally, it will reject with a `TypeError` (without attempting to cancel
         * the stream) if the stream is currently locked.
         */
        abort(reason = void 0) {
          if (!IsWritableStream(this)) {
            return promiseRejectedWith(streamBrandCheckException$2("abort"));
          }
          if (IsWritableStreamLocked(this)) {
            return promiseRejectedWith(new TypeError("Cannot abort a stream that already has a writer"));
          }
          return WritableStreamAbort(this, reason);
        }
        /**
         * Closes the stream. The underlying sink will finish processing any previously-written chunks, before invoking its
         * close behavior. During this time any further attempts to write will fail (without erroring the stream).
         *
         * The method returns a promise that will fulfill if all remaining chunks are successfully written and the stream
         * successfully closes, or rejects if an error is encountered during this process. Additionally, it will reject with
         * a `TypeError` (without attempting to cancel the stream) if the stream is currently locked.
         */
        close() {
          if (!IsWritableStream(this)) {
            return promiseRejectedWith(streamBrandCheckException$2("close"));
          }
          if (IsWritableStreamLocked(this)) {
            return promiseRejectedWith(new TypeError("Cannot close a stream that already has a writer"));
          }
          if (WritableStreamCloseQueuedOrInFlight(this)) {
            return promiseRejectedWith(new TypeError("Cannot close an already-closing stream"));
          }
          return WritableStreamClose(this);
        }
        /**
         * Creates a {@link WritableStreamDefaultWriter | writer} and locks the stream to the new writer. While the stream
         * is locked, no other writer can be acquired until this one is released.
         *
         * This functionality is especially useful for creating abstractions that desire the ability to write to a stream
         * without interruption or interleaving. By getting a writer for the stream, you can ensure nobody else can write at
         * the same time, which would cause the resulting written data to be unpredictable and probably useless.
         */
        getWriter() {
          if (!IsWritableStream(this)) {
            throw streamBrandCheckException$2("getWriter");
          }
          return AcquireWritableStreamDefaultWriter(this);
        }
      }
      Object.defineProperties(WritableStream.prototype, {
        abort: { enumerable: true },
        close: { enumerable: true },
        getWriter: { enumerable: true },
        locked: { enumerable: true }
      });
      setFunctionName(WritableStream.prototype.abort, "abort");
      setFunctionName(WritableStream.prototype.close, "close");
      setFunctionName(WritableStream.prototype.getWriter, "getWriter");
      if (typeof Symbol.toStringTag === "symbol") {
        Object.defineProperty(WritableStream.prototype, Symbol.toStringTag, {
          value: "WritableStream",
          configurable: true
        });
      }
      function AcquireWritableStreamDefaultWriter(stream) {
        return new WritableStreamDefaultWriter(stream);
      }
      function CreateWritableStream(startAlgorithm, writeAlgorithm, closeAlgorithm, abortAlgorithm, highWaterMark = 1, sizeAlgorithm = () => 1) {
        const stream = Object.create(WritableStream.prototype);
        InitializeWritableStream(stream);
        const controller = Object.create(WritableStreamDefaultController.prototype);
        SetUpWritableStreamDefaultController(stream, controller, startAlgorithm, writeAlgorithm, closeAlgorithm, abortAlgorithm, highWaterMark, sizeAlgorithm);
        return stream;
      }
      function InitializeWritableStream(stream) {
        stream._state = "writable";
        stream._storedError = void 0;
        stream._writer = void 0;
        stream._writableStreamController = void 0;
        stream._writeRequests = new SimpleQueue();
        stream._inFlightWriteRequest = void 0;
        stream._closeRequest = void 0;
        stream._inFlightCloseRequest = void 0;
        stream._pendingAbortRequest = void 0;
        stream._backpressure = false;
      }
      function IsWritableStream(x2) {
        if (!typeIsObject(x2)) {
          return false;
        }
        if (!Object.prototype.hasOwnProperty.call(x2, "_writableStreamController")) {
          return false;
        }
        return x2 instanceof WritableStream;
      }
      function IsWritableStreamLocked(stream) {
        if (stream._writer === void 0) {
          return false;
        }
        return true;
      }
      function WritableStreamAbort(stream, reason) {
        var _a2;
        if (stream._state === "closed" || stream._state === "errored") {
          return promiseResolvedWith(void 0);
        }
        stream._writableStreamController._abortReason = reason;
        (_a2 = stream._writableStreamController._abortController) === null || _a2 === void 0 ? void 0 : _a2.abort(reason);
        const state = stream._state;
        if (state === "closed" || state === "errored") {
          return promiseResolvedWith(void 0);
        }
        if (stream._pendingAbortRequest !== void 0) {
          return stream._pendingAbortRequest._promise;
        }
        let wasAlreadyErroring = false;
        if (state === "erroring") {
          wasAlreadyErroring = true;
          reason = void 0;
        }
        const promise = newPromise((resolve, reject) => {
          stream._pendingAbortRequest = {
            _promise: void 0,
            _resolve: resolve,
            _reject: reject,
            _reason: reason,
            _wasAlreadyErroring: wasAlreadyErroring
          };
        });
        stream._pendingAbortRequest._promise = promise;
        if (!wasAlreadyErroring) {
          WritableStreamStartErroring(stream, reason);
        }
        return promise;
      }
      function WritableStreamClose(stream) {
        const state = stream._state;
        if (state === "closed" || state === "errored") {
          return promiseRejectedWith(new TypeError(`The stream (in ${state} state) is not in the writable state and cannot be closed`));
        }
        const promise = newPromise((resolve, reject) => {
          const closeRequest = {
            _resolve: resolve,
            _reject: reject
          };
          stream._closeRequest = closeRequest;
        });
        const writer = stream._writer;
        if (writer !== void 0 && stream._backpressure && state === "writable") {
          defaultWriterReadyPromiseResolve(writer);
        }
        WritableStreamDefaultControllerClose(stream._writableStreamController);
        return promise;
      }
      function WritableStreamAddWriteRequest(stream) {
        const promise = newPromise((resolve, reject) => {
          const writeRequest = {
            _resolve: resolve,
            _reject: reject
          };
          stream._writeRequests.push(writeRequest);
        });
        return promise;
      }
      function WritableStreamDealWithRejection(stream, error) {
        const state = stream._state;
        if (state === "writable") {
          WritableStreamStartErroring(stream, error);
          return;
        }
        WritableStreamFinishErroring(stream);
      }
      function WritableStreamStartErroring(stream, reason) {
        const controller = stream._writableStreamController;
        stream._state = "erroring";
        stream._storedError = reason;
        const writer = stream._writer;
        if (writer !== void 0) {
          WritableStreamDefaultWriterEnsureReadyPromiseRejected(writer, reason);
        }
        if (!WritableStreamHasOperationMarkedInFlight(stream) && controller._started) {
          WritableStreamFinishErroring(stream);
        }
      }
      function WritableStreamFinishErroring(stream) {
        stream._state = "errored";
        stream._writableStreamController[ErrorSteps]();
        const storedError = stream._storedError;
        stream._writeRequests.forEach((writeRequest) => {
          writeRequest._reject(storedError);
        });
        stream._writeRequests = new SimpleQueue();
        if (stream._pendingAbortRequest === void 0) {
          WritableStreamRejectCloseAndClosedPromiseIfNeeded(stream);
          return;
        }
        const abortRequest = stream._pendingAbortRequest;
        stream._pendingAbortRequest = void 0;
        if (abortRequest._wasAlreadyErroring) {
          abortRequest._reject(storedError);
          WritableStreamRejectCloseAndClosedPromiseIfNeeded(stream);
          return;
        }
        const promise = stream._writableStreamController[AbortSteps](abortRequest._reason);
        uponPromise(promise, () => {
          abortRequest._resolve();
          WritableStreamRejectCloseAndClosedPromiseIfNeeded(stream);
          return null;
        }, (reason) => {
          abortRequest._reject(reason);
          WritableStreamRejectCloseAndClosedPromiseIfNeeded(stream);
          return null;
        });
      }
      function WritableStreamFinishInFlightWrite(stream) {
        stream._inFlightWriteRequest._resolve(void 0);
        stream._inFlightWriteRequest = void 0;
      }
      function WritableStreamFinishInFlightWriteWithError(stream, error) {
        stream._inFlightWriteRequest._reject(error);
        stream._inFlightWriteRequest = void 0;
        WritableStreamDealWithRejection(stream, error);
      }
      function WritableStreamFinishInFlightClose(stream) {
        stream._inFlightCloseRequest._resolve(void 0);
        stream._inFlightCloseRequest = void 0;
        const state = stream._state;
        if (state === "erroring") {
          stream._storedError = void 0;
          if (stream._pendingAbortRequest !== void 0) {
            stream._pendingAbortRequest._resolve();
            stream._pendingAbortRequest = void 0;
          }
        }
        stream._state = "closed";
        const writer = stream._writer;
        if (writer !== void 0) {
          defaultWriterClosedPromiseResolve(writer);
        }
      }
      function WritableStreamFinishInFlightCloseWithError(stream, error) {
        stream._inFlightCloseRequest._reject(error);
        stream._inFlightCloseRequest = void 0;
        if (stream._pendingAbortRequest !== void 0) {
          stream._pendingAbortRequest._reject(error);
          stream._pendingAbortRequest = void 0;
        }
        WritableStreamDealWithRejection(stream, error);
      }
      function WritableStreamCloseQueuedOrInFlight(stream) {
        if (stream._closeRequest === void 0 && stream._inFlightCloseRequest === void 0) {
          return false;
        }
        return true;
      }
      function WritableStreamHasOperationMarkedInFlight(stream) {
        if (stream._inFlightWriteRequest === void 0 && stream._inFlightCloseRequest === void 0) {
          return false;
        }
        return true;
      }
      function WritableStreamMarkCloseRequestInFlight(stream) {
        stream._inFlightCloseRequest = stream._closeRequest;
        stream._closeRequest = void 0;
      }
      function WritableStreamMarkFirstWriteRequestInFlight(stream) {
        stream._inFlightWriteRequest = stream._writeRequests.shift();
      }
      function WritableStreamRejectCloseAndClosedPromiseIfNeeded(stream) {
        if (stream._closeRequest !== void 0) {
          stream._closeRequest._reject(stream._storedError);
          stream._closeRequest = void 0;
        }
        const writer = stream._writer;
        if (writer !== void 0) {
          defaultWriterClosedPromiseReject(writer, stream._storedError);
        }
      }
      function WritableStreamUpdateBackpressure(stream, backpressure) {
        const writer = stream._writer;
        if (writer !== void 0 && backpressure !== stream._backpressure) {
          if (backpressure) {
            defaultWriterReadyPromiseReset(writer);
          } else {
            defaultWriterReadyPromiseResolve(writer);
          }
        }
        stream._backpressure = backpressure;
      }
      class WritableStreamDefaultWriter {
        constructor(stream) {
          assertRequiredArgument(stream, 1, "WritableStreamDefaultWriter");
          assertWritableStream(stream, "First parameter");
          if (IsWritableStreamLocked(stream)) {
            throw new TypeError("This stream has already been locked for exclusive writing by another writer");
          }
          this._ownerWritableStream = stream;
          stream._writer = this;
          const state = stream._state;
          if (state === "writable") {
            if (!WritableStreamCloseQueuedOrInFlight(stream) && stream._backpressure) {
              defaultWriterReadyPromiseInitialize(this);
            } else {
              defaultWriterReadyPromiseInitializeAsResolved(this);
            }
            defaultWriterClosedPromiseInitialize(this);
          } else if (state === "erroring") {
            defaultWriterReadyPromiseInitializeAsRejected(this, stream._storedError);
            defaultWriterClosedPromiseInitialize(this);
          } else if (state === "closed") {
            defaultWriterReadyPromiseInitializeAsResolved(this);
            defaultWriterClosedPromiseInitializeAsResolved(this);
          } else {
            const storedError = stream._storedError;
            defaultWriterReadyPromiseInitializeAsRejected(this, storedError);
            defaultWriterClosedPromiseInitializeAsRejected(this, storedError);
          }
        }
        /**
         * Returns a promise that will be fulfilled when the stream becomes closed, or rejected if the stream ever errors or
         * the writers lock is released before the stream finishes closing.
         */
        get closed() {
          if (!IsWritableStreamDefaultWriter(this)) {
            return promiseRejectedWith(defaultWriterBrandCheckException("closed"));
          }
          return this._closedPromise;
        }
        /**
         * Returns the desired size to fill the streams internal queue. It can be negative, if the queue is over-full.
         * A producer can use this information to determine the right amount of data to write.
         *
         * It will be `null` if the stream cannot be successfully written to (due to either being errored, or having an abort
         * queued up). It will return zero if the stream is closed. And the getter will throw an exception if invoked when
         * the writers lock is released.
         */
        get desiredSize() {
          if (!IsWritableStreamDefaultWriter(this)) {
            throw defaultWriterBrandCheckException("desiredSize");
          }
          if (this._ownerWritableStream === void 0) {
            throw defaultWriterLockException("desiredSize");
          }
          return WritableStreamDefaultWriterGetDesiredSize(this);
        }
        /**
         * Returns a promise that will be fulfilled when the desired size to fill the streams internal queue transitions
         * from non-positive to positive, signaling that it is no longer applying backpressure. Once the desired size dips
         * back to zero or below, the getter will return a new promise that stays pending until the next transition.
         *
         * If the stream becomes errored or aborted, or the writers lock is released, the returned promise will become
         * rejected.
         */
        get ready() {
          if (!IsWritableStreamDefaultWriter(this)) {
            return promiseRejectedWith(defaultWriterBrandCheckException("ready"));
          }
          return this._readyPromise;
        }
        /**
         * If the reader is active, behaves the same as {@link WritableStream.abort | stream.abort(reason)}.
         */
        abort(reason = void 0) {
          if (!IsWritableStreamDefaultWriter(this)) {
            return promiseRejectedWith(defaultWriterBrandCheckException("abort"));
          }
          if (this._ownerWritableStream === void 0) {
            return promiseRejectedWith(defaultWriterLockException("abort"));
          }
          return WritableStreamDefaultWriterAbort(this, reason);
        }
        /**
         * If the reader is active, behaves the same as {@link WritableStream.close | stream.close()}.
         */
        close() {
          if (!IsWritableStreamDefaultWriter(this)) {
            return promiseRejectedWith(defaultWriterBrandCheckException("close"));
          }
          const stream = this._ownerWritableStream;
          if (stream === void 0) {
            return promiseRejectedWith(defaultWriterLockException("close"));
          }
          if (WritableStreamCloseQueuedOrInFlight(stream)) {
            return promiseRejectedWith(new TypeError("Cannot close an already-closing stream"));
          }
          return WritableStreamDefaultWriterClose(this);
        }
        /**
         * Releases the writers lock on the corresponding stream. After the lock is released, the writer is no longer active.
         * If the associated stream is errored when the lock is released, the writer will appear errored in the same way from
         * now on; otherwise, the writer will appear closed.
         *
         * Note that the lock can still be released even if some ongoing writes have not yet finished (i.e. even if the
         * promises returned from previous calls to {@link WritableStreamDefaultWriter.write | write()} have not yet settled).
         * Its not necessary to hold the lock on the writer for the duration of the write; the lock instead simply prevents
         * other producers from writing in an interleaved manner.
         */
        releaseLock() {
          if (!IsWritableStreamDefaultWriter(this)) {
            throw defaultWriterBrandCheckException("releaseLock");
          }
          const stream = this._ownerWritableStream;
          if (stream === void 0) {
            return;
          }
          WritableStreamDefaultWriterRelease(this);
        }
        write(chunk = void 0) {
          if (!IsWritableStreamDefaultWriter(this)) {
            return promiseRejectedWith(defaultWriterBrandCheckException("write"));
          }
          if (this._ownerWritableStream === void 0) {
            return promiseRejectedWith(defaultWriterLockException("write to"));
          }
          return WritableStreamDefaultWriterWrite(this, chunk);
        }
      }
      Object.defineProperties(WritableStreamDefaultWriter.prototype, {
        abort: { enumerable: true },
        close: { enumerable: true },
        releaseLock: { enumerable: true },
        write: { enumerable: true },
        closed: { enumerable: true },
        desiredSize: { enumerable: true },
        ready: { enumerable: true }
      });
      setFunctionName(WritableStreamDefaultWriter.prototype.abort, "abort");
      setFunctionName(WritableStreamDefaultWriter.prototype.close, "close");
      setFunctionName(WritableStreamDefaultWriter.prototype.releaseLock, "releaseLock");
      setFunctionName(WritableStreamDefaultWriter.prototype.write, "write");
      if (typeof Symbol.toStringTag === "symbol") {
        Object.defineProperty(WritableStreamDefaultWriter.prototype, Symbol.toStringTag, {
          value: "WritableStreamDefaultWriter",
          configurable: true
        });
      }
      function IsWritableStreamDefaultWriter(x2) {
        if (!typeIsObject(x2)) {
          return false;
        }
        if (!Object.prototype.hasOwnProperty.call(x2, "_ownerWritableStream")) {
          return false;
        }
        return x2 instanceof WritableStreamDefaultWriter;
      }
      function WritableStreamDefaultWriterAbort(writer, reason) {
        const stream = writer._ownerWritableStream;
        return WritableStreamAbort(stream, reason);
      }
      function WritableStreamDefaultWriterClose(writer) {
        const stream = writer._ownerWritableStream;
        return WritableStreamClose(stream);
      }
      function WritableStreamDefaultWriterCloseWithErrorPropagation(writer) {
        const stream = writer._ownerWritableStream;
        const state = stream._state;
        if (WritableStreamCloseQueuedOrInFlight(stream) || state === "closed") {
          return promiseResolvedWith(void 0);
        }
        if (state === "errored") {
          return promiseRejectedWith(stream._storedError);
        }
        return WritableStreamDefaultWriterClose(writer);
      }
      function WritableStreamDefaultWriterEnsureClosedPromiseRejected(writer, error) {
        if (writer._closedPromiseState === "pending") {
          defaultWriterClosedPromiseReject(writer, error);
        } else {
          defaultWriterClosedPromiseResetToRejected(writer, error);
        }
      }
      function WritableStreamDefaultWriterEnsureReadyPromiseRejected(writer, error) {
        if (writer._readyPromiseState === "pending") {
          defaultWriterReadyPromiseReject(writer, error);
        } else {
          defaultWriterReadyPromiseResetToRejected(writer, error);
        }
      }
      function WritableStreamDefaultWriterGetDesiredSize(writer) {
        const stream = writer._ownerWritableStream;
        const state = stream._state;
        if (state === "errored" || state === "erroring") {
          return null;
        }
        if (state === "closed") {
          return 0;
        }
        return WritableStreamDefaultControllerGetDesiredSize(stream._writableStreamController);
      }
      function WritableStreamDefaultWriterRelease(writer) {
        const stream = writer._ownerWritableStream;
        const releasedError = new TypeError(`Writer was released and can no longer be used to monitor the stream's closedness`);
        WritableStreamDefaultWriterEnsureReadyPromiseRejected(writer, releasedError);
        WritableStreamDefaultWriterEnsureClosedPromiseRejected(writer, releasedError);
        stream._writer = void 0;
        writer._ownerWritableStream = void 0;
      }
      function WritableStreamDefaultWriterWrite(writer, chunk) {
        const stream = writer._ownerWritableStream;
        const controller = stream._writableStreamController;
        const chunkSize = WritableStreamDefaultControllerGetChunkSize(controller, chunk);
        if (stream !== writer._ownerWritableStream) {
          return promiseRejectedWith(defaultWriterLockException("write to"));
        }
        const state = stream._state;
        if (state === "errored") {
          return promiseRejectedWith(stream._storedError);
        }
        if (WritableStreamCloseQueuedOrInFlight(stream) || state === "closed") {
          return promiseRejectedWith(new TypeError("The stream is closing or closed and cannot be written to"));
        }
        if (state === "erroring") {
          return promiseRejectedWith(stream._storedError);
        }
        const promise = WritableStreamAddWriteRequest(stream);
        WritableStreamDefaultControllerWrite(controller, chunk, chunkSize);
        return promise;
      }
      const closeSentinel = {};
      class WritableStreamDefaultController {
        constructor() {
          throw new TypeError("Illegal constructor");
        }
        /**
         * The reason which was passed to `WritableStream.abort(reason)` when the stream was aborted.
         *
         * @deprecated
         *  This property has been removed from the specification, see https://github.com/whatwg/streams/pull/1177.
         *  Use {@link WritableStreamDefaultController.signal}'s `reason` instead.
         */
        get abortReason() {
          if (!IsWritableStreamDefaultController(this)) {
            throw defaultControllerBrandCheckException$2("abortReason");
          }
          return this._abortReason;
        }
        /**
         * An `AbortSignal` that can be used to abort the pending write or close operation when the stream is aborted.
         */
        get signal() {
          if (!IsWritableStreamDefaultController(this)) {
            throw defaultControllerBrandCheckException$2("signal");
          }
          if (this._abortController === void 0) {
            throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");
          }
          return this._abortController.signal;
        }
        /**
         * Closes the controlled writable stream, making all future interactions with it fail with the given error `e`.
         *
         * This method is rarely used, since usually it suffices to return a rejected promise from one of the underlying
         * sink's methods. However, it can be useful for suddenly shutting down a stream in response to an event outside the
         * normal lifecycle of interactions with the underlying sink.
         */
        error(e2 = void 0) {
          if (!IsWritableStreamDefaultController(this)) {
            throw defaultControllerBrandCheckException$2("error");
          }
          const state = this._controlledWritableStream._state;
          if (state !== "writable") {
            return;
          }
          WritableStreamDefaultControllerError(this, e2);
        }
        /** @internal */
        [AbortSteps](reason) {
          const result = this._abortAlgorithm(reason);
          WritableStreamDefaultControllerClearAlgorithms(this);
          return result;
        }
        /** @internal */
        [ErrorSteps]() {
          ResetQueue(this);
        }
      }
      Object.defineProperties(WritableStreamDefaultController.prototype, {
        abortReason: { enumerable: true },
        signal: { enumerable: true },
        error: { enumerable: true }
      });
      if (typeof Symbol.toStringTag === "symbol") {
        Object.defineProperty(WritableStreamDefaultController.prototype, Symbol.toStringTag, {
          value: "WritableStreamDefaultController",
          configurable: true
        });
      }
      function IsWritableStreamDefaultController(x2) {
        if (!typeIsObject(x2)) {
          return false;
        }
        if (!Object.prototype.hasOwnProperty.call(x2, "_controlledWritableStream")) {
          return false;
        }
        return x2 instanceof WritableStreamDefaultController;
      }
      function SetUpWritableStreamDefaultController(stream, controller, startAlgorithm, writeAlgorithm, closeAlgorithm, abortAlgorithm, highWaterMark, sizeAlgorithm) {
        controller._controlledWritableStream = stream;
        stream._writableStreamController = controller;
        controller._queue = void 0;
        controller._queueTotalSize = void 0;
        ResetQueue(controller);
        controller._abortReason = void 0;
        controller._abortController = createAbortController();
        controller._started = false;
        controller._strategySizeAlgorithm = sizeAlgorithm;
        controller._strategyHWM = highWaterMark;
        controller._writeAlgorithm = writeAlgorithm;
        controller._closeAlgorithm = closeAlgorithm;
        controller._abortAlgorithm = abortAlgorithm;
        const backpressure = WritableStreamDefaultControllerGetBackpressure(controller);
        WritableStreamUpdateBackpressure(stream, backpressure);
        const startResult = startAlgorithm();
        const startPromise = promiseResolvedWith(startResult);
        uponPromise(startPromise, () => {
          controller._started = true;
          WritableStreamDefaultControllerAdvanceQueueIfNeeded(controller);
          return null;
        }, (r2) => {
          controller._started = true;
          WritableStreamDealWithRejection(stream, r2);
          return null;
        });
      }
      function SetUpWritableStreamDefaultControllerFromUnderlyingSink(stream, underlyingSink, highWaterMark, sizeAlgorithm) {
        const controller = Object.create(WritableStreamDefaultController.prototype);
        let startAlgorithm;
        let writeAlgorithm;
        let closeAlgorithm;
        let abortAlgorithm;
        if (underlyingSink.start !== void 0) {
          startAlgorithm = () => underlyingSink.start(controller);
        } else {
          startAlgorithm = () => void 0;
        }
        if (underlyingSink.write !== void 0) {
          writeAlgorithm = (chunk) => underlyingSink.write(chunk, controller);
        } else {
          writeAlgorithm = () => promiseResolvedWith(void 0);
        }
        if (underlyingSink.close !== void 0) {
          closeAlgorithm = () => underlyingSink.close();
        } else {
          closeAlgorithm = () => promiseResolvedWith(void 0);
        }
        if (underlyingSink.abort !== void 0) {
          abortAlgorithm = (reason) => underlyingSink.abort(reason);
        } else {
          abortAlgorithm = () => promiseResolvedWith(void 0);
        }
        SetUpWritableStreamDefaultController(stream, controller, startAlgorithm, writeAlgorithm, closeAlgorithm, abortAlgorithm, highWaterMark, sizeAlgorithm);
      }
      function WritableStreamDefaultControllerClearAlgorithms(controller) {
        controller._writeAlgorithm = void 0;
        controller._closeAlgorithm = void 0;
        controller._abortAlgorithm = void 0;
        controller._strategySizeAlgorithm = void 0;
      }
      function WritableStreamDefaultControllerClose(controller) {
        EnqueueValueWithSize(controller, closeSentinel, 0);
        WritableStreamDefaultControllerAdvanceQueueIfNeeded(controller);
      }
      function WritableStreamDefaultControllerGetChunkSize(controller, chunk) {
        try {
          return controller._strategySizeAlgorithm(chunk);
        } catch (chunkSizeE) {
          WritableStreamDefaultControllerErrorIfNeeded(controller, chunkSizeE);
          return 1;
        }
      }
      function WritableStreamDefaultControllerGetDesiredSize(controller) {
        return controller._strategyHWM - controller._queueTotalSize;
      }
      function WritableStreamDefaultControllerWrite(controller, chunk, chunkSize) {
        try {
          EnqueueValueWithSize(controller, chunk, chunkSize);
        } catch (enqueueE) {
          WritableStreamDefaultControllerErrorIfNeeded(controller, enqueueE);
          return;
        }
        const stream = controller._controlledWritableStream;
        if (!WritableStreamCloseQueuedOrInFlight(stream) && stream._state === "writable") {
          const backpressure = WritableStreamDefaultControllerGetBackpressure(controller);
          WritableStreamUpdateBackpressure(stream, backpressure);
        }
        WritableStreamDefaultControllerAdvanceQueueIfNeeded(controller);
      }
      function WritableStreamDefaultControllerAdvanceQueueIfNeeded(controller) {
        const stream = controller._controlledWritableStream;
        if (!controller._started) {
          return;
        }
        if (stream._inFlightWriteRequest !== void 0) {
          return;
        }
        const state = stream._state;
        if (state === "erroring") {
          WritableStreamFinishErroring(stream);
          return;
        }
        if (controller._queue.length === 0) {
          return;
        }
        const value = PeekQueueValue(controller);
        if (value === closeSentinel) {
          WritableStreamDefaultControllerProcessClose(controller);
        } else {
          WritableStreamDefaultControllerProcessWrite(controller, value);
        }
      }
      function WritableStreamDefaultControllerErrorIfNeeded(controller, error) {
        if (controller._controlledWritableStream._state === "writable") {
          WritableStreamDefaultControllerError(controller, error);
        }
      }
      function WritableStreamDefaultControllerProcessClose(controller) {
        const stream = controller._controlledWritableStream;
        WritableStreamMarkCloseRequestInFlight(stream);
        DequeueValue(controller);
        const sinkClosePromise = controller._closeAlgorithm();
        WritableStreamDefaultControllerClearAlgorithms(controller);
        uponPromise(sinkClosePromise, () => {
          WritableStreamFinishInFlightClose(stream);
          return null;
        }, (reason) => {
          WritableStreamFinishInFlightCloseWithError(stream, reason);
          return null;
        });
      }
      function WritableStreamDefaultControllerProcessWrite(controller, chunk) {
        const stream = controller._controlledWritableStream;
        WritableStreamMarkFirstWriteRequestInFlight(stream);
        const sinkWritePromise = controller._writeAlgorithm(chunk);
        uponPromise(sinkWritePromise, () => {
          WritableStreamFinishInFlightWrite(stream);
          const state = stream._state;
          DequeueValue(controller);
          if (!WritableStreamCloseQueuedOrInFlight(stream) && state === "writable") {
            const backpressure = WritableStreamDefaultControllerGetBackpressure(controller);
            WritableStreamUpdateBackpressure(stream, backpressure);
          }
          WritableStreamDefaultControllerAdvanceQueueIfNeeded(controller);
          return null;
        }, (reason) => {
          if (stream._state === "writable") {
            WritableStreamDefaultControllerClearAlgorithms(controller);
          }
          WritableStreamFinishInFlightWriteWithError(stream, reason);
          return null;
        });
      }
      function WritableStreamDefaultControllerGetBackpressure(controller) {
        const desiredSize = WritableStreamDefaultControllerGetDesiredSize(controller);
        return desiredSize <= 0;
      }
      function WritableStreamDefaultControllerError(controller, error) {
        const stream = controller._controlledWritableStream;
        WritableStreamDefaultControllerClearAlgorithms(controller);
        WritableStreamStartErroring(stream, error);
      }
      function streamBrandCheckException$2(name) {
        return new TypeError(`WritableStream.prototype.${name} can only be used on a WritableStream`);
      }
      function defaultControllerBrandCheckException$2(name) {
        return new TypeError(`WritableStreamDefaultController.prototype.${name} can only be used on a WritableStreamDefaultController`);
      }
      function defaultWriterBrandCheckException(name) {
        return new TypeError(`WritableStreamDefaultWriter.prototype.${name} can only be used on a WritableStreamDefaultWriter`);
      }
      function defaultWriterLockException(name) {
        return new TypeError("Cannot " + name + " a stream using a released writer");
      }
      function defaultWriterClosedPromiseInitialize(writer) {
        writer._closedPromise = newPromise((resolve, reject) => {
          writer._closedPromise_resolve = resolve;
          writer._closedPromise_reject = reject;
          writer._closedPromiseState = "pending";
        });
      }
      function defaultWriterClosedPromiseInitializeAsRejected(writer, reason) {
        defaultWriterClosedPromiseInitialize(writer);
        defaultWriterClosedPromiseReject(writer, reason);
      }
      function defaultWriterClosedPromiseInitializeAsResolved(writer) {
        defaultWriterClosedPromiseInitialize(writer);
        defaultWriterClosedPromiseResolve(writer);
      }
      function defaultWriterClosedPromiseReject(writer, reason) {
        if (writer._closedPromise_reject === void 0) {
          return;
        }
        setPromiseIsHandledToTrue(writer._closedPromise);
        writer._closedPromise_reject(reason);
        writer._closedPromise_resolve = void 0;
        writer._closedPromise_reject = void 0;
        writer._closedPromiseState = "rejected";
      }
      function defaultWriterClosedPromiseResetToRejected(writer, reason) {
        defaultWriterClosedPromiseInitializeAsRejected(writer, reason);
      }
      function defaultWriterClosedPromiseResolve(writer) {
        if (writer._closedPromise_resolve === void 0) {
          return;
        }
        writer._closedPromise_resolve(void 0);
        writer._closedPromise_resolve = void 0;
        writer._closedPromise_reject = void 0;
        writer._closedPromiseState = "resolved";
      }
      function defaultWriterReadyPromiseInitialize(writer) {
        writer._readyPromise = newPromise((resolve, reject) => {
          writer._readyPromise_resolve = resolve;
          writer._readyPromise_reject = reject;
        });
        writer._readyPromiseState = "pending";
      }
      function defaultWriterReadyPromiseInitializeAsRejected(writer, reason) {
        defaultWriterReadyPromiseInitialize(writer);
        defaultWriterReadyPromiseReject(writer, reason);
      }
      function defaultWriterReadyPromiseInitializeAsResolved(writer) {
        defaultWriterReadyPromiseInitialize(writer);
        defaultWriterReadyPromiseResolve(writer);
      }
      function defaultWriterReadyPromiseReject(writer, reason) {
        if (writer._readyPromise_reject === void 0) {
          return;
        }
        setPromiseIsHandledToTrue(writer._readyPromise);
        writer._readyPromise_reject(reason);
        writer._readyPromise_resolve = void 0;
        writer._readyPromise_reject = void 0;
        writer._readyPromiseState = "rejected";
      }
      function defaultWriterReadyPromiseReset(writer) {
        defaultWriterReadyPromiseInitialize(writer);
      }
      function defaultWriterReadyPromiseResetToRejected(writer, reason) {
        defaultWriterReadyPromiseInitializeAsRejected(writer, reason);
      }
      function defaultWriterReadyPromiseResolve(writer) {
        if (writer._readyPromise_resolve === void 0) {
          return;
        }
        writer._readyPromise_resolve(void 0);
        writer._readyPromise_resolve = void 0;
        writer._readyPromise_reject = void 0;
        writer._readyPromiseState = "fulfilled";
      }
      function getGlobals() {
        if (typeof globalThis !== "undefined") {
          return globalThis;
        } else if (typeof self !== "undefined") {
          return self;
        } else if (typeof global !== "undefined") {
          return global;
        }
        return void 0;
      }
      const globals = getGlobals();
      function isDOMExceptionConstructor(ctor) {
        if (!(typeof ctor === "function" || typeof ctor === "object")) {
          return false;
        }
        if (ctor.name !== "DOMException") {
          return false;
        }
        try {
          new ctor();
          return true;
        } catch (_a2) {
          return false;
        }
      }
      function getFromGlobal() {
        const ctor = globals === null || globals === void 0 ? void 0 : globals.DOMException;
        return isDOMExceptionConstructor(ctor) ? ctor : void 0;
      }
      function createPolyfill() {
        const ctor = function DOMException3(message, name) {
          this.message = message || "";
          this.name = name || "Error";
          if (Error.captureStackTrace) {
            Error.captureStackTrace(this, this.constructor);
          }
        };
        setFunctionName(ctor, "DOMException");
        ctor.prototype = Object.create(Error.prototype);
        Object.defineProperty(ctor.prototype, "constructor", { value: ctor, writable: true, configurable: true });
        return ctor;
      }
      const DOMException2 = getFromGlobal() || createPolyfill();
      function ReadableStreamPipeTo(source, dest, preventClose, preventAbort, preventCancel, signal) {
        const reader = AcquireReadableStreamDefaultReader(source);
        const writer = AcquireWritableStreamDefaultWriter(dest);
        source._disturbed = true;
        let shuttingDown = false;
        let currentWrite = promiseResolvedWith(void 0);
        return newPromise((resolve, reject) => {
          let abortAlgorithm;
          if (signal !== void 0) {
            abortAlgorithm = () => {
              const error = signal.reason !== void 0 ? signal.reason : new DOMException2("Aborted", "AbortError");
              const actions = [];
              if (!preventAbort) {
                actions.push(() => {
                  if (dest._state === "writable") {
                    return WritableStreamAbort(dest, error);
                  }
                  return promiseResolvedWith(void 0);
                });
              }
              if (!preventCancel) {
                actions.push(() => {
                  if (source._state === "readable") {
                    return ReadableStreamCancel(source, error);
                  }
                  return promiseResolvedWith(void 0);
                });
              }
              shutdownWithAction(() => Promise.all(actions.map((action) => action())), true, error);
            };
            if (signal.aborted) {
              abortAlgorithm();
              return;
            }
            signal.addEventListener("abort", abortAlgorithm);
          }
          function pipeLoop() {
            return newPromise((resolveLoop, rejectLoop) => {
              function next(done) {
                if (done) {
                  resolveLoop();
                } else {
                  PerformPromiseThen(pipeStep(), next, rejectLoop);
                }
              }
              next(false);
            });
          }
          function pipeStep() {
            if (shuttingDown) {
              return promiseResolvedWith(true);
            }
            return PerformPromiseThen(writer._readyPromise, () => {
              return newPromise((resolveRead, rejectRead) => {
                ReadableStreamDefaultReaderRead(reader, {
                  _chunkSteps: (chunk) => {
                    currentWrite = PerformPromiseThen(WritableStreamDefaultWriterWrite(writer, chunk), void 0, noop2);
                    resolveRead(false);
                  },
                  _closeSteps: () => resolveRead(true),
                  _errorSteps: rejectRead
                });
              });
            });
          }
          isOrBecomesErrored(source, reader._closedPromise, (storedError) => {
            if (!preventAbort) {
              shutdownWithAction(() => WritableStreamAbort(dest, storedError), true, storedError);
            } else {
              shutdown(true, storedError);
            }
            return null;
          });
          isOrBecomesErrored(dest, writer._closedPromise, (storedError) => {
            if (!preventCancel) {
              shutdownWithAction(() => ReadableStreamCancel(source, storedError), true, storedError);
            } else {
              shutdown(true, storedError);
            }
            return null;
          });
          isOrBecomesClosed(source, reader._closedPromise, () => {
            if (!preventClose) {
              shutdownWithAction(() => WritableStreamDefaultWriterCloseWithErrorPropagation(writer));
            } else {
              shutdown();
            }
            return null;
          });
          if (WritableStreamCloseQueuedOrInFlight(dest) || dest._state === "closed") {
            const destClosed = new TypeError("the destination writable stream closed before all data could be piped to it");
            if (!preventCancel) {
              shutdownWithAction(() => ReadableStreamCancel(source, destClosed), true, destClosed);
            } else {
              shutdown(true, destClosed);
            }
          }
          setPromiseIsHandledToTrue(pipeLoop());
          function waitForWritesToFinish() {
            const oldCurrentWrite = currentWrite;
            return PerformPromiseThen(currentWrite, () => oldCurrentWrite !== currentWrite ? waitForWritesToFinish() : void 0);
          }
          function isOrBecomesErrored(stream, promise, action) {
            if (stream._state === "errored") {
              action(stream._storedError);
            } else {
              uponRejection(promise, action);
            }
          }
          function isOrBecomesClosed(stream, promise, action) {
            if (stream._state === "closed") {
              action();
            } else {
              uponFulfillment(promise, action);
            }
          }
          function shutdownWithAction(action, originalIsError, originalError) {
            if (shuttingDown) {
              return;
            }
            shuttingDown = true;
            if (dest._state === "writable" && !WritableStreamCloseQueuedOrInFlight(dest)) {
              uponFulfillment(waitForWritesToFinish(), doTheRest);
            } else {
              doTheRest();
            }
            function doTheRest() {
              uponPromise(action(), () => finalize(originalIsError, originalError), (newError) => finalize(true, newError));
              return null;
            }
          }
          function shutdown(isError, error) {
            if (shuttingDown) {
              return;
            }
            shuttingDown = true;
            if (dest._state === "writable" && !WritableStreamCloseQueuedOrInFlight(dest)) {
              uponFulfillment(waitForWritesToFinish(), () => finalize(isError, error));
            } else {
              finalize(isError, error);
            }
          }
          function finalize(isError, error) {
            WritableStreamDefaultWriterRelease(writer);
            ReadableStreamReaderGenericRelease(reader);
            if (signal !== void 0) {
              signal.removeEventListener("abort", abortAlgorithm);
            }
            if (isError) {
              reject(error);
            } else {
              resolve(void 0);
            }
            return null;
          }
        });
      }
      class ReadableStreamDefaultController {
        constructor() {
          throw new TypeError("Illegal constructor");
        }
        /**
         * Returns the desired size to fill the controlled stream's internal queue. It can be negative, if the queue is
         * over-full. An underlying source ought to use this information to determine when and how to apply backpressure.
         */
        get desiredSize() {
          if (!IsReadableStreamDefaultController(this)) {
            throw defaultControllerBrandCheckException$1("desiredSize");
          }
          return ReadableStreamDefaultControllerGetDesiredSize(this);
        }
        /**
         * Closes the controlled readable stream. Consumers will still be able to read any previously-enqueued chunks from
         * the stream, but once those are read, the stream will become closed.
         */
        close() {
          if (!IsReadableStreamDefaultController(this)) {
            throw defaultControllerBrandCheckException$1("close");
          }
          if (!ReadableStreamDefaultControllerCanCloseOrEnqueue(this)) {
            throw new TypeError("The stream is not in a state that permits close");
          }
          ReadableStreamDefaultControllerClose(this);
        }
        enqueue(chunk = void 0) {
          if (!IsReadableStreamDefaultController(this)) {
            throw defaultControllerBrandCheckException$1("enqueue");
          }
          if (!ReadableStreamDefaultControllerCanCloseOrEnqueue(this)) {
            throw new TypeError("The stream is not in a state that permits enqueue");
          }
          return ReadableStreamDefaultControllerEnqueue(this, chunk);
        }
        /**
         * Errors the controlled readable stream, making all future interactions with it fail with the given error `e`.
         */
        error(e2 = void 0) {
          if (!IsReadableStreamDefaultController(this)) {
            throw defaultControllerBrandCheckException$1("error");
          }
          ReadableStreamDefaultControllerError(this, e2);
        }
        /** @internal */
        [CancelSteps](reason) {
          ResetQueue(this);
          const result = this._cancelAlgorithm(reason);
          ReadableStreamDefaultControllerClearAlgorithms(this);
          return result;
        }
        /** @internal */
        [PullSteps](readRequest) {
          const stream = this._controlledReadableStream;
          if (this._queue.length > 0) {
            const chunk = DequeueValue(this);
            if (this._closeRequested && this._queue.length === 0) {
              ReadableStreamDefaultControllerClearAlgorithms(this);
              ReadableStreamClose(stream);
            } else {
              ReadableStreamDefaultControllerCallPullIfNeeded(this);
            }
            readRequest._chunkSteps(chunk);
          } else {
            ReadableStreamAddReadRequest(stream, readRequest);
            ReadableStreamDefaultControllerCallPullIfNeeded(this);
          }
        }
        /** @internal */
        [ReleaseSteps]() {
        }
      }
      Object.defineProperties(ReadableStreamDefaultController.prototype, {
        close: { enumerable: true },
        enqueue: { enumerable: true },
        error: { enumerable: true },
        desiredSize: { enumerable: true }
      });
      setFunctionName(ReadableStreamDefaultController.prototype.close, "close");
      setFunctionName(ReadableStreamDefaultController.prototype.enqueue, "enqueue");
      setFunctionName(ReadableStreamDefaultController.prototype.error, "error");
      if (typeof Symbol.toStringTag === "symbol") {
        Object.defineProperty(ReadableStreamDefaultController.prototype, Symbol.toStringTag, {
          value: "ReadableStreamDefaultController",
          configurable: true
        });
      }
      function IsReadableStreamDefaultController(x2) {
        if (!typeIsObject(x2)) {
          return false;
        }
        if (!Object.prototype.hasOwnProperty.call(x2, "_controlledReadableStream")) {
          return false;
        }
        return x2 instanceof ReadableStreamDefaultController;
      }
      function ReadableStreamDefaultControllerCallPullIfNeeded(controller) {
        const shouldPull = ReadableStreamDefaultControllerShouldCallPull(controller);
        if (!shouldPull) {
          return;
        }
        if (controller._pulling) {
          controller._pullAgain = true;
          return;
        }
        controller._pulling = true;
        const pullPromise = controller._pullAlgorithm();
        uponPromise(pullPromise, () => {
          controller._pulling = false;
          if (controller._pullAgain) {
            controller._pullAgain = false;
            ReadableStreamDefaultControllerCallPullIfNeeded(controller);
          }
          return null;
        }, (e2) => {
          ReadableStreamDefaultControllerError(controller, e2);
          return null;
        });
      }
      function ReadableStreamDefaultControllerShouldCallPull(controller) {
        const stream = controller._controlledReadableStream;
        if (!ReadableStreamDefaultControllerCanCloseOrEnqueue(controller)) {
          return false;
        }
        if (!controller._started) {
          return false;
        }
        if (IsReadableStreamLocked(stream) && ReadableStreamGetNumReadRequests(stream) > 0) {
          return true;
        }
        const desiredSize = ReadableStreamDefaultControllerGetDesiredSize(controller);
        if (desiredSize > 0) {
          return true;
        }
        return false;
      }
      function ReadableStreamDefaultControllerClearAlgorithms(controller) {
        controller._pullAlgorithm = void 0;
        controller._cancelAlgorithm = void 0;
        controller._strategySizeAlgorithm = void 0;
      }
      function ReadableStreamDefaultControllerClose(controller) {
        if (!ReadableStreamDefaultControllerCanCloseOrEnqueue(controller)) {
          return;
        }
        const stream = controller._controlledReadableStream;
        controller._closeRequested = true;
        if (controller._queue.length === 0) {
          ReadableStreamDefaultControllerClearAlgorithms(controller);
          ReadableStreamClose(stream);
        }
      }
      function ReadableStreamDefaultControllerEnqueue(controller, chunk) {
        if (!ReadableStreamDefaultControllerCanCloseOrEnqueue(controller)) {
          return;
        }
        const stream = controller._controlledReadableStream;
        if (IsReadableStreamLocked(stream) && ReadableStreamGetNumReadRequests(stream) > 0) {
          ReadableStreamFulfillReadRequest(stream, chunk, false);
        } else {
          let chunkSize;
          try {
            chunkSize = controller._strategySizeAlgorithm(chunk);
          } catch (chunkSizeE) {
            ReadableStreamDefaultControllerError(controller, chunkSizeE);
            throw chunkSizeE;
          }
          try {
            EnqueueValueWithSize(controller, chunk, chunkSize);
          } catch (enqueueE) {
            ReadableStreamDefaultControllerError(controller, enqueueE);
            throw enqueueE;
          }
        }
        ReadableStreamDefaultControllerCallPullIfNeeded(controller);
      }
      function ReadableStreamDefaultControllerError(controller, e2) {
        const stream = controller._controlledReadableStream;
        if (stream._state !== "readable") {
          return;
        }
        ResetQueue(controller);
        ReadableStreamDefaultControllerClearAlgorithms(controller);
        ReadableStreamError(stream, e2);
      }
      function ReadableStreamDefaultControllerGetDesiredSize(controller) {
        const state = controller._controlledReadableStream._state;
        if (state === "errored") {
          return null;
        }
        if (state === "closed") {
          return 0;
        }
        return controller._strategyHWM - controller._queueTotalSize;
      }
      function ReadableStreamDefaultControllerHasBackpressure(controller) {
        if (ReadableStreamDefaultControllerShouldCallPull(controller)) {
          return false;
        }
        return true;
      }
      function ReadableStreamDefaultControllerCanCloseOrEnqueue(controller) {
        const state = controller._controlledReadableStream._state;
        if (!controller._closeRequested && state === "readable") {
          return true;
        }
        return false;
      }
      function SetUpReadableStreamDefaultController(stream, controller, startAlgorithm, pullAlgorithm, cancelAlgorithm, highWaterMark, sizeAlgorithm) {
        controller._controlledReadableStream = stream;
        controller._queue = void 0;
        controller._queueTotalSize = void 0;
        ResetQueue(controller);
        controller._started = false;
        controller._closeRequested = false;
        controller._pullAgain = false;
        controller._pulling = false;
        controller._strategySizeAlgorithm = sizeAlgorithm;
        controller._strategyHWM = highWaterMark;
        controller._pullAlgorithm = pullAlgorithm;
        controller._cancelAlgorithm = cancelAlgorithm;
        stream._readableStreamController = controller;
        const startResult = startAlgorithm();
        uponPromise(promiseResolvedWith(startResult), () => {
          controller._started = true;
          ReadableStreamDefaultControllerCallPullIfNeeded(controller);
          return null;
        }, (r2) => {
          ReadableStreamDefaultControllerError(controller, r2);
          return null;
        });
      }
      function SetUpReadableStreamDefaultControllerFromUnderlyingSource(stream, underlyingSource, highWaterMark, sizeAlgorithm) {
        const controller = Object.create(ReadableStreamDefaultController.prototype);
        let startAlgorithm;
        let pullAlgorithm;
        let cancelAlgorithm;
        if (underlyingSource.start !== void 0) {
          startAlgorithm = () => underlyingSource.start(controller);
        } else {
          startAlgorithm = () => void 0;
        }
        if (underlyingSource.pull !== void 0) {
          pullAlgorithm = () => underlyingSource.pull(controller);
        } else {
          pullAlgorithm = () => promiseResolvedWith(void 0);
        }
        if (underlyingSource.cancel !== void 0) {
          cancelAlgorithm = (reason) => underlyingSource.cancel(reason);
        } else {
          cancelAlgorithm = () => promiseResolvedWith(void 0);
        }
        SetUpReadableStreamDefaultController(stream, controller, startAlgorithm, pullAlgorithm, cancelAlgorithm, highWaterMark, sizeAlgorithm);
      }
      function defaultControllerBrandCheckException$1(name) {
        return new TypeError(`ReadableStreamDefaultController.prototype.${name} can only be used on a ReadableStreamDefaultController`);
      }
      function ReadableStreamTee(stream, cloneForBranch2) {
        if (IsReadableByteStreamController(stream._readableStreamController)) {
          return ReadableByteStreamTee(stream);
        }
        return ReadableStreamDefaultTee(stream);
      }
      function ReadableStreamDefaultTee(stream, cloneForBranch2) {
        const reader = AcquireReadableStreamDefaultReader(stream);
        let reading = false;
        let readAgain = false;
        let canceled1 = false;
        let canceled2 = false;
        let reason1;
        let reason2;
        let branch1;
        let branch2;
        let resolveCancelPromise;
        const cancelPromise = newPromise((resolve) => {
          resolveCancelPromise = resolve;
        });
        function pullAlgorithm() {
          if (reading) {
            readAgain = true;
            return promiseResolvedWith(void 0);
          }
          reading = true;
          const readRequest = {
            _chunkSteps: (chunk) => {
              _queueMicrotask(() => {
                readAgain = false;
                const chunk1 = chunk;
                const chunk2 = chunk;
                if (!canceled1) {
                  ReadableStreamDefaultControllerEnqueue(branch1._readableStreamController, chunk1);
                }
                if (!canceled2) {
                  ReadableStreamDefaultControllerEnqueue(branch2._readableStreamController, chunk2);
                }
                reading = false;
                if (readAgain) {
                  pullAlgorithm();
                }
              });
            },
            _closeSteps: () => {
              reading = false;
              if (!canceled1) {
                ReadableStreamDefaultControllerClose(branch1._readableStreamController);
              }
              if (!canceled2) {
                ReadableStreamDefaultControllerClose(branch2._readableStreamController);
              }
              if (!canceled1 || !canceled2) {
                resolveCancelPromise(void 0);
              }
            },
            _errorSteps: () => {
              reading = false;
            }
          };
          ReadableStreamDefaultReaderRead(reader, readRequest);
          return promiseResolvedWith(void 0);
        }
        function cancel1Algorithm(reason) {
          canceled1 = true;
          reason1 = reason;
          if (canceled2) {
            const compositeReason = CreateArrayFromList([reason1, reason2]);
            const cancelResult = ReadableStreamCancel(stream, compositeReason);
            resolveCancelPromise(cancelResult);
          }
          return cancelPromise;
        }
        function cancel2Algorithm(reason) {
          canceled2 = true;
          reason2 = reason;
          if (canceled1) {
            const compositeReason = CreateArrayFromList([reason1, reason2]);
            const cancelResult = ReadableStreamCancel(stream, compositeReason);
            resolveCancelPromise(cancelResult);
          }
          return cancelPromise;
        }
        function startAlgorithm() {
        }
        branch1 = CreateReadableStream(startAlgorithm, pullAlgorithm, cancel1Algorithm);
        branch2 = CreateReadableStream(startAlgorithm, pullAlgorithm, cancel2Algorithm);
        uponRejection(reader._closedPromise, (r2) => {
          ReadableStreamDefaultControllerError(branch1._readableStreamController, r2);
          ReadableStreamDefaultControllerError(branch2._readableStreamController, r2);
          if (!canceled1 || !canceled2) {
            resolveCancelPromise(void 0);
          }
          return null;
        });
        return [branch1, branch2];
      }
      function ReadableByteStreamTee(stream) {
        let reader = AcquireReadableStreamDefaultReader(stream);
        let reading = false;
        let readAgainForBranch1 = false;
        let readAgainForBranch2 = false;
        let canceled1 = false;
        let canceled2 = false;
        let reason1;
        let reason2;
        let branch1;
        let branch2;
        let resolveCancelPromise;
        const cancelPromise = newPromise((resolve) => {
          resolveCancelPromise = resolve;
        });
        function forwardReaderError(thisReader) {
          uponRejection(thisReader._closedPromise, (r2) => {
            if (thisReader !== reader) {
              return null;
            }
            ReadableByteStreamControllerError(branch1._readableStreamController, r2);
            ReadableByteStreamControllerError(branch2._readableStreamController, r2);
            if (!canceled1 || !canceled2) {
              resolveCancelPromise(void 0);
            }
            return null;
          });
        }
        function pullWithDefaultReader() {
          if (IsReadableStreamBYOBReader(reader)) {
            ReadableStreamReaderGenericRelease(reader);
            reader = AcquireReadableStreamDefaultReader(stream);
            forwardReaderError(reader);
          }
          const readRequest = {
            _chunkSteps: (chunk) => {
              _queueMicrotask(() => {
                readAgainForBranch1 = false;
                readAgainForBranch2 = false;
                const chunk1 = chunk;
                let chunk2 = chunk;
                if (!canceled1 && !canceled2) {
                  try {
                    chunk2 = CloneAsUint8Array(chunk);
                  } catch (cloneE) {
                    ReadableByteStreamControllerError(branch1._readableStreamController, cloneE);
                    ReadableByteStreamControllerError(branch2._readableStreamController, cloneE);
                    resolveCancelPromise(ReadableStreamCancel(stream, cloneE));
                    return;
                  }
                }
                if (!canceled1) {
                  ReadableByteStreamControllerEnqueue(branch1._readableStreamController, chunk1);
                }
                if (!canceled2) {
                  ReadableByteStreamControllerEnqueue(branch2._readableStreamController, chunk2);
                }
                reading = false;
                if (readAgainForBranch1) {
                  pull1Algorithm();
                } else if (readAgainForBranch2) {
                  pull2Algorithm();
                }
              });
            },
            _closeSteps: () => {
              reading = false;
              if (!canceled1) {
                ReadableByteStreamControllerClose(branch1._readableStreamController);
              }
              if (!canceled2) {
                ReadableByteStreamControllerClose(branch2._readableStreamController);
              }
              if (branch1._readableStreamController._pendingPullIntos.length > 0) {
                ReadableByteStreamControllerRespond(branch1._readableStreamController, 0);
              }
              if (branch2._readableStreamController._pendingPullIntos.length > 0) {
                ReadableByteStreamControllerRespond(branch2._readableStreamController, 0);
              }
              if (!canceled1 || !canceled2) {
                resolveCancelPromise(void 0);
              }
            },
            _errorSteps: () => {
              reading = false;
            }
          };
          ReadableStreamDefaultReaderRead(reader, readRequest);
        }
        function pullWithBYOBReader(view, forBranch2) {
          if (IsReadableStreamDefaultReader(reader)) {
            ReadableStreamReaderGenericRelease(reader);
            reader = AcquireReadableStreamBYOBReader(stream);
            forwardReaderError(reader);
          }
          const byobBranch = forBranch2 ? branch2 : branch1;
          const otherBranch = forBranch2 ? branch1 : branch2;
          const readIntoRequest = {
            _chunkSteps: (chunk) => {
              _queueMicrotask(() => {
                readAgainForBranch1 = false;
                readAgainForBranch2 = false;
                const byobCanceled = forBranch2 ? canceled2 : canceled1;
                const otherCanceled = forBranch2 ? canceled1 : canceled2;
                if (!otherCanceled) {
                  let clonedChunk;
                  try {
                    clonedChunk = CloneAsUint8Array(chunk);
                  } catch (cloneE) {
                    ReadableByteStreamControllerError(byobBranch._readableStreamController, cloneE);
                    ReadableByteStreamControllerError(otherBranch._readableStreamController, cloneE);
                    resolveCancelPromise(ReadableStreamCancel(stream, cloneE));
                    return;
                  }
                  if (!byobCanceled) {
                    ReadableByteStreamControllerRespondWithNewView(byobBranch._readableStreamController, chunk);
                  }
                  ReadableByteStreamControllerEnqueue(otherBranch._readableStreamController, clonedChunk);
                } else if (!byobCanceled) {
                  ReadableByteStreamControllerRespondWithNewView(byobBranch._readableStreamController, chunk);
                }
                reading = false;
                if (readAgainForBranch1) {
                  pull1Algorithm();
                } else if (readAgainForBranch2) {
                  pull2Algorithm();
                }
              });
            },
            _closeSteps: (chunk) => {
              reading = false;
              const byobCanceled = forBranch2 ? canceled2 : canceled1;
              const otherCanceled = forBranch2 ? canceled1 : canceled2;
              if (!byobCanceled) {
                ReadableByteStreamControllerClose(byobBranch._readableStreamController);
              }
              if (!otherCanceled) {
                ReadableByteStreamControllerClose(otherBranch._readableStreamController);
              }
              if (chunk !== void 0) {
                if (!byobCanceled) {
                  ReadableByteStreamControllerRespondWithNewView(byobBranch._readableStreamController, chunk);
                }
                if (!otherCanceled && otherBranch._readableStreamController._pendingPullIntos.length > 0) {
                  ReadableByteStreamControllerRespond(otherBranch._readableStreamController, 0);
                }
              }
              if (!byobCanceled || !otherCanceled) {
                resolveCancelPromise(void 0);
              }
            },
            _errorSteps: () => {
              reading = false;
            }
          };
          ReadableStreamBYOBReaderRead(reader, view, 1, readIntoRequest);
        }
        function pull1Algorithm() {
          if (reading) {
            readAgainForBranch1 = true;
            return promiseResolvedWith(void 0);
          }
          reading = true;
          const byobRequest = ReadableByteStreamControllerGetBYOBRequest(branch1._readableStreamController);
          if (byobRequest === null) {
            pullWithDefaultReader();
          } else {
            pullWithBYOBReader(byobRequest._view, false);
          }
          return promiseResolvedWith(void 0);
        }
        function pull2Algorithm() {
          if (reading) {
            readAgainForBranch2 = true;
            return promiseResolvedWith(void 0);
          }
          reading = true;
          const byobRequest = ReadableByteStreamControllerGetBYOBRequest(branch2._readableStreamController);
          if (byobRequest === null) {
            pullWithDefaultReader();
          } else {
            pullWithBYOBReader(byobRequest._view, true);
          }
          return promiseResolvedWith(void 0);
        }
        function cancel1Algorithm(reason) {
          canceled1 = true;
          reason1 = reason;
          if (canceled2) {
            const compositeReason = CreateArrayFromList([reason1, reason2]);
            const cancelResult = ReadableStreamCancel(stream, compositeReason);
            resolveCancelPromise(cancelResult);
          }
          return cancelPromise;
        }
        function cancel2Algorithm(reason) {
          canceled2 = true;
          reason2 = reason;
          if (canceled1) {
            const compositeReason = CreateArrayFromList([reason1, reason2]);
            const cancelResult = ReadableStreamCancel(stream, compositeReason);
            resolveCancelPromise(cancelResult);
          }
          return cancelPromise;
        }
        function startAlgorithm() {
          return;
        }
        branch1 = CreateReadableByteStream(startAlgorithm, pull1Algorithm, cancel1Algorithm);
        branch2 = CreateReadableByteStream(startAlgorithm, pull2Algorithm, cancel2Algorithm);
        forwardReaderError(reader);
        return [branch1, branch2];
      }
      function isReadableStreamLike(stream) {
        return typeIsObject(stream) && typeof stream.getReader !== "undefined";
      }
      function ReadableStreamFrom(source) {
        if (isReadableStreamLike(source)) {
          return ReadableStreamFromDefaultReader(source.getReader());
        }
        return ReadableStreamFromIterable(source);
      }
      function ReadableStreamFromIterable(asyncIterable) {
        let stream;
        const iteratorRecord = GetIterator(asyncIterable, "async");
        const startAlgorithm = noop2;
        function pullAlgorithm() {
          let nextResult;
          try {
            nextResult = IteratorNext(iteratorRecord);
          } catch (e2) {
            return promiseRejectedWith(e2);
          }
          const nextPromise = promiseResolvedWith(nextResult);
          return transformPromiseWith(nextPromise, (iterResult) => {
            if (!typeIsObject(iterResult)) {
              throw new TypeError("The promise returned by the iterator.next() method must fulfill with an object");
            }
            const done = IteratorComplete(iterResult);
            if (done) {
              ReadableStreamDefaultControllerClose(stream._readableStreamController);
            } else {
              const value = IteratorValue(iterResult);
              ReadableStreamDefaultControllerEnqueue(stream._readableStreamController, value);
            }
          });
        }
        function cancelAlgorithm(reason) {
          const iterator = iteratorRecord.iterator;
          let returnMethod;
          try {
            returnMethod = GetMethod(iterator, "return");
          } catch (e2) {
            return promiseRejectedWith(e2);
          }
          if (returnMethod === void 0) {
            return promiseResolvedWith(void 0);
          }
          let returnResult;
          try {
            returnResult = reflectCall(returnMethod, iterator, [reason]);
          } catch (e2) {
            return promiseRejectedWith(e2);
          }
          const returnPromise = promiseResolvedWith(returnResult);
          return transformPromiseWith(returnPromise, (iterResult) => {
            if (!typeIsObject(iterResult)) {
              throw new TypeError("The promise returned by the iterator.return() method must fulfill with an object");
            }
            return void 0;
          });
        }
        stream = CreateReadableStream(startAlgorithm, pullAlgorithm, cancelAlgorithm, 0);
        return stream;
      }
      function ReadableStreamFromDefaultReader(reader) {
        let stream;
        const startAlgorithm = noop2;
        function pullAlgorithm() {
          let readPromise;
          try {
            readPromise = reader.read();
          } catch (e2) {
            return promiseRejectedWith(e2);
          }
          return transformPromiseWith(readPromise, (readResult) => {
            if (!typeIsObject(readResult)) {
              throw new TypeError("The promise returned by the reader.read() method must fulfill with an object");
            }
            if (readResult.done) {
              ReadableStreamDefaultControllerClose(stream._readableStreamController);
            } else {
              const value = readResult.value;
              ReadableStreamDefaultControllerEnqueue(stream._readableStreamController, value);
            }
          });
        }
        function cancelAlgorithm(reason) {
          try {
            return promiseResolvedWith(reader.cancel(reason));
          } catch (e2) {
            return promiseRejectedWith(e2);
          }
        }
        stream = CreateReadableStream(startAlgorithm, pullAlgorithm, cancelAlgorithm, 0);
        return stream;
      }
      function convertUnderlyingDefaultOrByteSource(source, context) {
        assertDictionary(source, context);
        const original = source;
        const autoAllocateChunkSize = original === null || original === void 0 ? void 0 : original.autoAllocateChunkSize;
        const cancel = original === null || original === void 0 ? void 0 : original.cancel;
        const pull = original === null || original === void 0 ? void 0 : original.pull;
        const start = original === null || original === void 0 ? void 0 : original.start;
        const type = original === null || original === void 0 ? void 0 : original.type;
        return {
          autoAllocateChunkSize: autoAllocateChunkSize === void 0 ? void 0 : convertUnsignedLongLongWithEnforceRange(autoAllocateChunkSize, `${context} has member 'autoAllocateChunkSize' that`),
          cancel: cancel === void 0 ? void 0 : convertUnderlyingSourceCancelCallback(cancel, original, `${context} has member 'cancel' that`),
          pull: pull === void 0 ? void 0 : convertUnderlyingSourcePullCallback(pull, original, `${context} has member 'pull' that`),
          start: start === void 0 ? void 0 : convertUnderlyingSourceStartCallback(start, original, `${context} has member 'start' that`),
          type: type === void 0 ? void 0 : convertReadableStreamType(type, `${context} has member 'type' that`)
        };
      }
      function convertUnderlyingSourceCancelCallback(fn, original, context) {
        assertFunction(fn, context);
        return (reason) => promiseCall(fn, original, [reason]);
      }
      function convertUnderlyingSourcePullCallback(fn, original, context) {
        assertFunction(fn, context);
        return (controller) => promiseCall(fn, original, [controller]);
      }
      function convertUnderlyingSourceStartCallback(fn, original, context) {
        assertFunction(fn, context);
        return (controller) => reflectCall(fn, original, [controller]);
      }
      function convertReadableStreamType(type, context) {
        type = `${type}`;
        if (type !== "bytes") {
          throw new TypeError(`${context} '${type}' is not a valid enumeration value for ReadableStreamType`);
        }
        return type;
      }
      function convertIteratorOptions(options, context) {
        assertDictionary(options, context);
        const preventCancel = options === null || options === void 0 ? void 0 : options.preventCancel;
        return { preventCancel: Boolean(preventCancel) };
      }
      function convertPipeOptions(options, context) {
        assertDictionary(options, context);
        const preventAbort = options === null || options === void 0 ? void 0 : options.preventAbort;
        const preventCancel = options === null || options === void 0 ? void 0 : options.preventCancel;
        const preventClose = options === null || options === void 0 ? void 0 : options.preventClose;
        const signal = options === null || options === void 0 ? void 0 : options.signal;
        if (signal !== void 0) {
          assertAbortSignal(signal, `${context} has member 'signal' that`);
        }
        return {
          preventAbort: Boolean(preventAbort),
          preventCancel: Boolean(preventCancel),
          preventClose: Boolean(preventClose),
          signal
        };
      }
      function assertAbortSignal(signal, context) {
        if (!isAbortSignal2(signal)) {
          throw new TypeError(`${context} is not an AbortSignal.`);
        }
      }
      function convertReadableWritablePair(pair, context) {
        assertDictionary(pair, context);
        const readable = pair === null || pair === void 0 ? void 0 : pair.readable;
        assertRequiredField(readable, "readable", "ReadableWritablePair");
        assertReadableStream(readable, `${context} has member 'readable' that`);
        const writable = pair === null || pair === void 0 ? void 0 : pair.writable;
        assertRequiredField(writable, "writable", "ReadableWritablePair");
        assertWritableStream(writable, `${context} has member 'writable' that`);
        return { readable, writable };
      }
      class ReadableStream2 {
        constructor(rawUnderlyingSource = {}, rawStrategy = {}) {
          if (rawUnderlyingSource === void 0) {
            rawUnderlyingSource = null;
          } else {
            assertObject(rawUnderlyingSource, "First parameter");
          }
          const strategy = convertQueuingStrategy(rawStrategy, "Second parameter");
          const underlyingSource = convertUnderlyingDefaultOrByteSource(rawUnderlyingSource, "First parameter");
          InitializeReadableStream(this);
          if (underlyingSource.type === "bytes") {
            if (strategy.size !== void 0) {
              throw new RangeError("The strategy for a byte stream cannot have a size function");
            }
            const highWaterMark = ExtractHighWaterMark(strategy, 0);
            SetUpReadableByteStreamControllerFromUnderlyingSource(this, underlyingSource, highWaterMark);
          } else {
            const sizeAlgorithm = ExtractSizeAlgorithm(strategy);
            const highWaterMark = ExtractHighWaterMark(strategy, 1);
            SetUpReadableStreamDefaultControllerFromUnderlyingSource(this, underlyingSource, highWaterMark, sizeAlgorithm);
          }
        }
        /**
         * Whether or not the readable stream is locked to a {@link ReadableStreamDefaultReader | reader}.
         */
        get locked() {
          if (!IsReadableStream(this)) {
            throw streamBrandCheckException$1("locked");
          }
          return IsReadableStreamLocked(this);
        }
        /**
         * Cancels the stream, signaling a loss of interest in the stream by a consumer.
         *
         * The supplied `reason` argument will be given to the underlying source's {@link UnderlyingSource.cancel | cancel()}
         * method, which might or might not use it.
         */
        cancel(reason = void 0) {
          if (!IsReadableStream(this)) {
            return promiseRejectedWith(streamBrandCheckException$1("cancel"));
          }
          if (IsReadableStreamLocked(this)) {
            return promiseRejectedWith(new TypeError("Cannot cancel a stream that already has a reader"));
          }
          return ReadableStreamCancel(this, reason);
        }
        getReader(rawOptions = void 0) {
          if (!IsReadableStream(this)) {
            throw streamBrandCheckException$1("getReader");
          }
          const options = convertReaderOptions(rawOptions, "First parameter");
          if (options.mode === void 0) {
            return AcquireReadableStreamDefaultReader(this);
          }
          return AcquireReadableStreamBYOBReader(this);
        }
        pipeThrough(rawTransform, rawOptions = {}) {
          if (!IsReadableStream(this)) {
            throw streamBrandCheckException$1("pipeThrough");
          }
          assertRequiredArgument(rawTransform, 1, "pipeThrough");
          const transform2 = convertReadableWritablePair(rawTransform, "First parameter");
          const options = convertPipeOptions(rawOptions, "Second parameter");
          if (IsReadableStreamLocked(this)) {
            throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");
          }
          if (IsWritableStreamLocked(transform2.writable)) {
            throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");
          }
          const promise = ReadableStreamPipeTo(this, transform2.writable, options.preventClose, options.preventAbort, options.preventCancel, options.signal);
          setPromiseIsHandledToTrue(promise);
          return transform2.readable;
        }
        pipeTo(destination, rawOptions = {}) {
          if (!IsReadableStream(this)) {
            return promiseRejectedWith(streamBrandCheckException$1("pipeTo"));
          }
          if (destination === void 0) {
            return promiseRejectedWith(`Parameter 1 is required in 'pipeTo'.`);
          }
          if (!IsWritableStream(destination)) {
            return promiseRejectedWith(new TypeError(`ReadableStream.prototype.pipeTo's first argument must be a WritableStream`));
          }
          let options;
          try {
            options = convertPipeOptions(rawOptions, "Second parameter");
          } catch (e2) {
            return promiseRejectedWith(e2);
          }
          if (IsReadableStreamLocked(this)) {
            return promiseRejectedWith(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream"));
          }
          if (IsWritableStreamLocked(destination)) {
            return promiseRejectedWith(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream"));
          }
          return ReadableStreamPipeTo(this, destination, options.preventClose, options.preventAbort, options.preventCancel, options.signal);
        }
        /**
         * Tees this readable stream, returning a two-element array containing the two resulting branches as
         * new {@link ReadableStream} instances.
         *
         * Teeing a stream will lock it, preventing any other consumer from acquiring a reader.
         * To cancel the stream, cancel both of the resulting branches; a composite cancellation reason will then be
         * propagated to the stream's underlying source.
         *
         * Note that the chunks seen in each branch will be the same object. If the chunks are not immutable,
         * this could allow interference between the two branches.
         */
        tee() {
          if (!IsReadableStream(this)) {
            throw streamBrandCheckException$1("tee");
          }
          const branches = ReadableStreamTee(this);
          return CreateArrayFromList(branches);
        }
        values(rawOptions = void 0) {
          if (!IsReadableStream(this)) {
            throw streamBrandCheckException$1("values");
          }
          const options = convertIteratorOptions(rawOptions, "First parameter");
          return AcquireReadableStreamAsyncIterator(this, options.preventCancel);
        }
        [SymbolAsyncIterator](options) {
          return this.values(options);
        }
        /**
         * Creates a new ReadableStream wrapping the provided iterable or async iterable.
         *
         * This can be used to adapt various kinds of objects into a readable stream,
         * such as an array, an async generator, or a Node.js readable stream.
         */
        static from(asyncIterable) {
          return ReadableStreamFrom(asyncIterable);
        }
      }
      Object.defineProperties(ReadableStream2, {
        from: { enumerable: true }
      });
      Object.defineProperties(ReadableStream2.prototype, {
        cancel: { enumerable: true },
        getReader: { enumerable: true },
        pipeThrough: { enumerable: true },
        pipeTo: { enumerable: true },
        tee: { enumerable: true },
        values: { enumerable: true },
        locked: { enumerable: true }
      });
      setFunctionName(ReadableStream2.from, "from");
      setFunctionName(ReadableStream2.prototype.cancel, "cancel");
      setFunctionName(ReadableStream2.prototype.getReader, "getReader");
      setFunctionName(ReadableStream2.prototype.pipeThrough, "pipeThrough");
      setFunctionName(ReadableStream2.prototype.pipeTo, "pipeTo");
      setFunctionName(ReadableStream2.prototype.tee, "tee");
      setFunctionName(ReadableStream2.prototype.values, "values");
      if (typeof Symbol.toStringTag === "symbol") {
        Object.defineProperty(ReadableStream2.prototype, Symbol.toStringTag, {
          value: "ReadableStream",
          configurable: true
        });
      }
      Object.defineProperty(ReadableStream2.prototype, SymbolAsyncIterator, {
        value: ReadableStream2.prototype.values,
        writable: true,
        configurable: true
      });
      function CreateReadableStream(startAlgorithm, pullAlgorithm, cancelAlgorithm, highWaterMark = 1, sizeAlgorithm = () => 1) {
        const stream = Object.create(ReadableStream2.prototype);
        InitializeReadableStream(stream);
        const controller = Object.create(ReadableStreamDefaultController.prototype);
        SetUpReadableStreamDefaultController(stream, controller, startAlgorithm, pullAlgorithm, cancelAlgorithm, highWaterMark, sizeAlgorithm);
        return stream;
      }
      function CreateReadableByteStream(startAlgorithm, pullAlgorithm, cancelAlgorithm) {
        const stream = Object.create(ReadableStream2.prototype);
        InitializeReadableStream(stream);
        const controller = Object.create(ReadableByteStreamController.prototype);
        SetUpReadableByteStreamController(stream, controller, startAlgorithm, pullAlgorithm, cancelAlgorithm, 0, void 0);
        return stream;
      }
      function InitializeReadableStream(stream) {
        stream._state = "readable";
        stream._reader = void 0;
        stream._storedError = void 0;
        stream._disturbed = false;
      }
      function IsReadableStream(x2) {
        if (!typeIsObject(x2)) {
          return false;
        }
        if (!Object.prototype.hasOwnProperty.call(x2, "_readableStreamController")) {
          return false;
        }
        return x2 instanceof ReadableStream2;
      }
      function IsReadableStreamLocked(stream) {
        if (stream._reader === void 0) {
          return false;
        }
        return true;
      }
      function ReadableStreamCancel(stream, reason) {
        stream._disturbed = true;
        if (stream._state === "closed") {
          return promiseResolvedWith(void 0);
        }
        if (stream._state === "errored") {
          return promiseRejectedWith(stream._storedError);
        }
        ReadableStreamClose(stream);
        const reader = stream._reader;
        if (reader !== void 0 && IsReadableStreamBYOBReader(reader)) {
          const readIntoRequests = reader._readIntoRequests;
          reader._readIntoRequests = new SimpleQueue();
          readIntoRequests.forEach((readIntoRequest) => {
            readIntoRequest._closeSteps(void 0);
          });
        }
        const sourceCancelPromise = stream._readableStreamController[CancelSteps](reason);
        return transformPromiseWith(sourceCancelPromise, noop2);
      }
      function ReadableStreamClose(stream) {
        stream._state = "closed";
        const reader = stream._reader;
        if (reader === void 0) {
          return;
        }
        defaultReaderClosedPromiseResolve(reader);
        if (IsReadableStreamDefaultReader(reader)) {
          const readRequests = reader._readRequests;
          reader._readRequests = new SimpleQueue();
          readRequests.forEach((readRequest) => {
            readRequest._closeSteps();
          });
        }
      }
      function ReadableStreamError(stream, e2) {
        stream._state = "errored";
        stream._storedError = e2;
        const reader = stream._reader;
        if (reader === void 0) {
          return;
        }
        defaultReaderClosedPromiseReject(reader, e2);
        if (IsReadableStreamDefaultReader(reader)) {
          ReadableStreamDefaultReaderErrorReadRequests(reader, e2);
        } else {
          ReadableStreamBYOBReaderErrorReadIntoRequests(reader, e2);
        }
      }
      function streamBrandCheckException$1(name) {
        return new TypeError(`ReadableStream.prototype.${name} can only be used on a ReadableStream`);
      }
      function convertQueuingStrategyInit(init, context) {
        assertDictionary(init, context);
        const highWaterMark = init === null || init === void 0 ? void 0 : init.highWaterMark;
        assertRequiredField(highWaterMark, "highWaterMark", "QueuingStrategyInit");
        return {
          highWaterMark: convertUnrestrictedDouble(highWaterMark)
        };
      }
      const byteLengthSizeFunction = (chunk) => {
        return chunk.byteLength;
      };
      setFunctionName(byteLengthSizeFunction, "size");
      class ByteLengthQueuingStrategy {
        constructor(options) {
          assertRequiredArgument(options, 1, "ByteLengthQueuingStrategy");
          options = convertQueuingStrategyInit(options, "First parameter");
          this._byteLengthQueuingStrategyHighWaterMark = options.highWaterMark;
        }
        /**
         * Returns the high water mark provided to the constructor.
         */
        get highWaterMark() {
          if (!IsByteLengthQueuingStrategy(this)) {
            throw byteLengthBrandCheckException("highWaterMark");
          }
          return this._byteLengthQueuingStrategyHighWaterMark;
        }
        /**
         * Measures the size of `chunk` by returning the value of its `byteLength` property.
         */
        get size() {
          if (!IsByteLengthQueuingStrategy(this)) {
            throw byteLengthBrandCheckException("size");
          }
          return byteLengthSizeFunction;
        }
      }
      Object.defineProperties(ByteLengthQueuingStrategy.prototype, {
        highWaterMark: { enumerable: true },
        size: { enumerable: true }
      });
      if (typeof Symbol.toStringTag === "symbol") {
        Object.defineProperty(ByteLengthQueuingStrategy.prototype, Symbol.toStringTag, {
          value: "ByteLengthQueuingStrategy",
          configurable: true
        });
      }
      function byteLengthBrandCheckException(name) {
        return new TypeError(`ByteLengthQueuingStrategy.prototype.${name} can only be used on a ByteLengthQueuingStrategy`);
      }
      function IsByteLengthQueuingStrategy(x2) {
        if (!typeIsObject(x2)) {
          return false;
        }
        if (!Object.prototype.hasOwnProperty.call(x2, "_byteLengthQueuingStrategyHighWaterMark")) {
          return false;
        }
        return x2 instanceof ByteLengthQueuingStrategy;
      }
      const countSizeFunction = () => {
        return 1;
      };
      setFunctionName(countSizeFunction, "size");
      class CountQueuingStrategy {
        constructor(options) {
          assertRequiredArgument(options, 1, "CountQueuingStrategy");
          options = convertQueuingStrategyInit(options, "First parameter");
          this._countQueuingStrategyHighWaterMark = options.highWaterMark;
        }
        /**
         * Returns the high water mark provided to the constructor.
         */
        get highWaterMark() {
          if (!IsCountQueuingStrategy(this)) {
            throw countBrandCheckException("highWaterMark");
          }
          return this._countQueuingStrategyHighWaterMark;
        }
        /**
         * Measures the size of `chunk` by always returning 1.
         * This ensures that the total queue size is a count of the number of chunks in the queue.
         */
        get size() {
          if (!IsCountQueuingStrategy(this)) {
            throw countBrandCheckException("size");
          }
          return countSizeFunction;
        }
      }
      Object.defineProperties(CountQueuingStrategy.prototype, {
        highWaterMark: { enumerable: true },
        size: { enumerable: true }
      });
      if (typeof Symbol.toStringTag === "symbol") {
        Object.defineProperty(CountQueuingStrategy.prototype, Symbol.toStringTag, {
          value: "CountQueuingStrategy",
          configurable: true
        });
      }
      function countBrandCheckException(name) {
        return new TypeError(`CountQueuingStrategy.prototype.${name} can only be used on a CountQueuingStrategy`);
      }
      function IsCountQueuingStrategy(x2) {
        if (!typeIsObject(x2)) {
          return false;
        }
        if (!Object.prototype.hasOwnProperty.call(x2, "_countQueuingStrategyHighWaterMark")) {
          return false;
        }
        return x2 instanceof CountQueuingStrategy;
      }
      function convertTransformer(original, context) {
        assertDictionary(original, context);
        const cancel = original === null || original === void 0 ? void 0 : original.cancel;
        const flush = original === null || original === void 0 ? void 0 : original.flush;
        const readableType = original === null || original === void 0 ? void 0 : original.readableType;
        const start = original === null || original === void 0 ? void 0 : original.start;
        const transform2 = original === null || original === void 0 ? void 0 : original.transform;
        const writableType = original === null || original === void 0 ? void 0 : original.writableType;
        return {
          cancel: cancel === void 0 ? void 0 : convertTransformerCancelCallback(cancel, original, `${context} has member 'cancel' that`),
          flush: flush === void 0 ? void 0 : convertTransformerFlushCallback(flush, original, `${context} has member 'flush' that`),
          readableType,
          start: start === void 0 ? void 0 : convertTransformerStartCallback(start, original, `${context} has member 'start' that`),
          transform: transform2 === void 0 ? void 0 : convertTransformerTransformCallback(transform2, original, `${context} has member 'transform' that`),
          writableType
        };
      }
      function convertTransformerFlushCallback(fn, original, context) {
        assertFunction(fn, context);
        return (controller) => promiseCall(fn, original, [controller]);
      }
      function convertTransformerStartCallback(fn, original, context) {
        assertFunction(fn, context);
        return (controller) => reflectCall(fn, original, [controller]);
      }
      function convertTransformerTransformCallback(fn, original, context) {
        assertFunction(fn, context);
        return (chunk, controller) => promiseCall(fn, original, [chunk, controller]);
      }
      function convertTransformerCancelCallback(fn, original, context) {
        assertFunction(fn, context);
        return (reason) => promiseCall(fn, original, [reason]);
      }
      class TransformStream {
        constructor(rawTransformer = {}, rawWritableStrategy = {}, rawReadableStrategy = {}) {
          if (rawTransformer === void 0) {
            rawTransformer = null;
          }
          const writableStrategy = convertQueuingStrategy(rawWritableStrategy, "Second parameter");
          const readableStrategy = convertQueuingStrategy(rawReadableStrategy, "Third parameter");
          const transformer = convertTransformer(rawTransformer, "First parameter");
          if (transformer.readableType !== void 0) {
            throw new RangeError("Invalid readableType specified");
          }
          if (transformer.writableType !== void 0) {
            throw new RangeError("Invalid writableType specified");
          }
          const readableHighWaterMark = ExtractHighWaterMark(readableStrategy, 0);
          const readableSizeAlgorithm = ExtractSizeAlgorithm(readableStrategy);
          const writableHighWaterMark = ExtractHighWaterMark(writableStrategy, 1);
          const writableSizeAlgorithm = ExtractSizeAlgorithm(writableStrategy);
          let startPromise_resolve;
          const startPromise = newPromise((resolve) => {
            startPromise_resolve = resolve;
          });
          InitializeTransformStream(this, startPromise, writableHighWaterMark, writableSizeAlgorithm, readableHighWaterMark, readableSizeAlgorithm);
          SetUpTransformStreamDefaultControllerFromTransformer(this, transformer);
          if (transformer.start !== void 0) {
            startPromise_resolve(transformer.start(this._transformStreamController));
          } else {
            startPromise_resolve(void 0);
          }
        }
        /**
         * The readable side of the transform stream.
         */
        get readable() {
          if (!IsTransformStream(this)) {
            throw streamBrandCheckException("readable");
          }
          return this._readable;
        }
        /**
         * The writable side of the transform stream.
         */
        get writable() {
          if (!IsTransformStream(this)) {
            throw streamBrandCheckException("writable");
          }
          return this._writable;
        }
      }
      Object.defineProperties(TransformStream.prototype, {
        readable: { enumerable: true },
        writable: { enumerable: true }
      });
      if (typeof Symbol.toStringTag === "symbol") {
        Object.defineProperty(TransformStream.prototype, Symbol.toStringTag, {
          value: "TransformStream",
          configurable: true
        });
      }
      function InitializeTransformStream(stream, startPromise, writableHighWaterMark, writableSizeAlgorithm, readableHighWaterMark, readableSizeAlgorithm) {
        function startAlgorithm() {
          return startPromise;
        }
        function writeAlgorithm(chunk) {
          return TransformStreamDefaultSinkWriteAlgorithm(stream, chunk);
        }
        function abortAlgorithm(reason) {
          return TransformStreamDefaultSinkAbortAlgorithm(stream, reason);
        }
        function closeAlgorithm() {
          return TransformStreamDefaultSinkCloseAlgorithm(stream);
        }
        stream._writable = CreateWritableStream(startAlgorithm, writeAlgorithm, closeAlgorithm, abortAlgorithm, writableHighWaterMark, writableSizeAlgorithm);
        function pullAlgorithm() {
          return TransformStreamDefaultSourcePullAlgorithm(stream);
        }
        function cancelAlgorithm(reason) {
          return TransformStreamDefaultSourceCancelAlgorithm(stream, reason);
        }
        stream._readable = CreateReadableStream(startAlgorithm, pullAlgorithm, cancelAlgorithm, readableHighWaterMark, readableSizeAlgorithm);
        stream._backpressure = void 0;
        stream._backpressureChangePromise = void 0;
        stream._backpressureChangePromise_resolve = void 0;
        TransformStreamSetBackpressure(stream, true);
        stream._transformStreamController = void 0;
      }
      function IsTransformStream(x2) {
        if (!typeIsObject(x2)) {
          return false;
        }
        if (!Object.prototype.hasOwnProperty.call(x2, "_transformStreamController")) {
          return false;
        }
        return x2 instanceof TransformStream;
      }
      function TransformStreamError(stream, e2) {
        ReadableStreamDefaultControllerError(stream._readable._readableStreamController, e2);
        TransformStreamErrorWritableAndUnblockWrite(stream, e2);
      }
      function TransformStreamErrorWritableAndUnblockWrite(stream, e2) {
        TransformStreamDefaultControllerClearAlgorithms(stream._transformStreamController);
        WritableStreamDefaultControllerErrorIfNeeded(stream._writable._writableStreamController, e2);
        TransformStreamUnblockWrite(stream);
      }
      function TransformStreamUnblockWrite(stream) {
        if (stream._backpressure) {
          TransformStreamSetBackpressure(stream, false);
        }
      }
      function TransformStreamSetBackpressure(stream, backpressure) {
        if (stream._backpressureChangePromise !== void 0) {
          stream._backpressureChangePromise_resolve();
        }
        stream._backpressureChangePromise = newPromise((resolve) => {
          stream._backpressureChangePromise_resolve = resolve;
        });
        stream._backpressure = backpressure;
      }
      class TransformStreamDefaultController {
        constructor() {
          throw new TypeError("Illegal constructor");
        }
        /**
         * Returns the desired size to fill the readable sides internal queue. It can be negative, if the queue is over-full.
         */
        get desiredSize() {
          if (!IsTransformStreamDefaultController(this)) {
            throw defaultControllerBrandCheckException("desiredSize");
          }
          const readableController = this._controlledTransformStream._readable._readableStreamController;
          return ReadableStreamDefaultControllerGetDesiredSize(readableController);
        }
        enqueue(chunk = void 0) {
          if (!IsTransformStreamDefaultController(this)) {
            throw defaultControllerBrandCheckException("enqueue");
          }
          TransformStreamDefaultControllerEnqueue(this, chunk);
        }
        /**
         * Errors both the readable side and the writable side of the controlled transform stream, making all future
         * interactions with it fail with the given error `e`. Any chunks queued for transformation will be discarded.
         */
        error(reason = void 0) {
          if (!IsTransformStreamDefaultController(this)) {
            throw defaultControllerBrandCheckException("error");
          }
          TransformStreamDefaultControllerError(this, reason);
        }
        /**
         * Closes the readable side and errors the writable side of the controlled transform stream. This is useful when the
         * transformer only needs to consume a portion of the chunks written to the writable side.
         */
        terminate() {
          if (!IsTransformStreamDefaultController(this)) {
            throw defaultControllerBrandCheckException("terminate");
          }
          TransformStreamDefaultControllerTerminate(this);
        }
      }
      Object.defineProperties(TransformStreamDefaultController.prototype, {
        enqueue: { enumerable: true },
        error: { enumerable: true },
        terminate: { enumerable: true },
        desiredSize: { enumerable: true }
      });
      setFunctionName(TransformStreamDefaultController.prototype.enqueue, "enqueue");
      setFunctionName(TransformStreamDefaultController.prototype.error, "error");
      setFunctionName(TransformStreamDefaultController.prototype.terminate, "terminate");
      if (typeof Symbol.toStringTag === "symbol") {
        Object.defineProperty(TransformStreamDefaultController.prototype, Symbol.toStringTag, {
          value: "TransformStreamDefaultController",
          configurable: true
        });
      }
      function IsTransformStreamDefaultController(x2) {
        if (!typeIsObject(x2)) {
          return false;
        }
        if (!Object.prototype.hasOwnProperty.call(x2, "_controlledTransformStream")) {
          return false;
        }
        return x2 instanceof TransformStreamDefaultController;
      }
      function SetUpTransformStreamDefaultController(stream, controller, transformAlgorithm, flushAlgorithm, cancelAlgorithm) {
        controller._controlledTransformStream = stream;
        stream._transformStreamController = controller;
        controller._transformAlgorithm = transformAlgorithm;
        controller._flushAlgorithm = flushAlgorithm;
        controller._cancelAlgorithm = cancelAlgorithm;
        controller._finishPromise = void 0;
        controller._finishPromise_resolve = void 0;
        controller._finishPromise_reject = void 0;
      }
      function SetUpTransformStreamDefaultControllerFromTransformer(stream, transformer) {
        const controller = Object.create(TransformStreamDefaultController.prototype);
        let transformAlgorithm;
        let flushAlgorithm;
        let cancelAlgorithm;
        if (transformer.transform !== void 0) {
          transformAlgorithm = (chunk) => transformer.transform(chunk, controller);
        } else {
          transformAlgorithm = (chunk) => {
            try {
              TransformStreamDefaultControllerEnqueue(controller, chunk);
              return promiseResolvedWith(void 0);
            } catch (transformResultE) {
              return promiseRejectedWith(transformResultE);
            }
          };
        }
        if (transformer.flush !== void 0) {
          flushAlgorithm = () => transformer.flush(controller);
        } else {
          flushAlgorithm = () => promiseResolvedWith(void 0);
        }
        if (transformer.cancel !== void 0) {
          cancelAlgorithm = (reason) => transformer.cancel(reason);
        } else {
          cancelAlgorithm = () => promiseResolvedWith(void 0);
        }
        SetUpTransformStreamDefaultController(stream, controller, transformAlgorithm, flushAlgorithm, cancelAlgorithm);
      }
      function TransformStreamDefaultControllerClearAlgorithms(controller) {
        controller._transformAlgorithm = void 0;
        controller._flushAlgorithm = void 0;
        controller._cancelAlgorithm = void 0;
      }
      function TransformStreamDefaultControllerEnqueue(controller, chunk) {
        const stream = controller._controlledTransformStream;
        const readableController = stream._readable._readableStreamController;
        if (!ReadableStreamDefaultControllerCanCloseOrEnqueue(readableController)) {
          throw new TypeError("Readable side is not in a state that permits enqueue");
        }
        try {
          ReadableStreamDefaultControllerEnqueue(readableController, chunk);
        } catch (e2) {
          TransformStreamErrorWritableAndUnblockWrite(stream, e2);
          throw stream._readable._storedError;
        }
        const backpressure = ReadableStreamDefaultControllerHasBackpressure(readableController);
        if (backpressure !== stream._backpressure) {
          TransformStreamSetBackpressure(stream, true);
        }
      }
      function TransformStreamDefaultControllerError(controller, e2) {
        TransformStreamError(controller._controlledTransformStream, e2);
      }
      function TransformStreamDefaultControllerPerformTransform(controller, chunk) {
        const transformPromise = controller._transformAlgorithm(chunk);
        return transformPromiseWith(transformPromise, void 0, (r2) => {
          TransformStreamError(controller._controlledTransformStream, r2);
          throw r2;
        });
      }
      function TransformStreamDefaultControllerTerminate(controller) {
        const stream = controller._controlledTransformStream;
        const readableController = stream._readable._readableStreamController;
        ReadableStreamDefaultControllerClose(readableController);
        const error = new TypeError("TransformStream terminated");
        TransformStreamErrorWritableAndUnblockWrite(stream, error);
      }
      function TransformStreamDefaultSinkWriteAlgorithm(stream, chunk) {
        const controller = stream._transformStreamController;
        if (stream._backpressure) {
          const backpressureChangePromise = stream._backpressureChangePromise;
          return transformPromiseWith(backpressureChangePromise, () => {
            const writable = stream._writable;
            const state = writable._state;
            if (state === "erroring") {
              throw writable._storedError;
            }
            return TransformStreamDefaultControllerPerformTransform(controller, chunk);
          });
        }
        return TransformStreamDefaultControllerPerformTransform(controller, chunk);
      }
      function TransformStreamDefaultSinkAbortAlgorithm(stream, reason) {
        const controller = stream._transformStreamController;
        if (controller._finishPromise !== void 0) {
          return controller._finishPromise;
        }
        const readable = stream._readable;
        controller._finishPromise = newPromise((resolve, reject) => {
          controller._finishPromise_resolve = resolve;
          controller._finishPromise_reject = reject;
        });
        const cancelPromise = controller._cancelAlgorithm(reason);
        TransformStreamDefaultControllerClearAlgorithms(controller);
        uponPromise(cancelPromise, () => {
          if (readable._state === "errored") {
            defaultControllerFinishPromiseReject(controller, readable._storedError);
          } else {
            ReadableStreamDefaultControllerError(readable._readableStreamController, reason);
            defaultControllerFinishPromiseResolve(controller);
          }
          return null;
        }, (r2) => {
          ReadableStreamDefaultControllerError(readable._readableStreamController, r2);
          defaultControllerFinishPromiseReject(controller, r2);
          return null;
        });
        return controller._finishPromise;
      }
      function TransformStreamDefaultSinkCloseAlgorithm(stream) {
        const controller = stream._transformStreamController;
        if (controller._finishPromise !== void 0) {
          return controller._finishPromise;
        }
        const readable = stream._readable;
        controller._finishPromise = newPromise((resolve, reject) => {
          controller._finishPromise_resolve = resolve;
          controller._finishPromise_reject = reject;
        });
        const flushPromise = controller._flushAlgorithm();
        TransformStreamDefaultControllerClearAlgorithms(controller);
        uponPromise(flushPromise, () => {
          if (readable._state === "errored") {
            defaultControllerFinishPromiseReject(controller, readable._storedError);
          } else {
            ReadableStreamDefaultControllerClose(readable._readableStreamController);
            defaultControllerFinishPromiseResolve(controller);
          }
          return null;
        }, (r2) => {
          ReadableStreamDefaultControllerError(readable._readableStreamController, r2);
          defaultControllerFinishPromiseReject(controller, r2);
          return null;
        });
        return controller._finishPromise;
      }
      function TransformStreamDefaultSourcePullAlgorithm(stream) {
        TransformStreamSetBackpressure(stream, false);
        return stream._backpressureChangePromise;
      }
      function TransformStreamDefaultSourceCancelAlgorithm(stream, reason) {
        const controller = stream._transformStreamController;
        if (controller._finishPromise !== void 0) {
          return controller._finishPromise;
        }
        const writable = stream._writable;
        controller._finishPromise = newPromise((resolve, reject) => {
          controller._finishPromise_resolve = resolve;
          controller._finishPromise_reject = reject;
        });
        const cancelPromise = controller._cancelAlgorithm(reason);
        TransformStreamDefaultControllerClearAlgorithms(controller);
        uponPromise(cancelPromise, () => {
          if (writable._state === "errored") {
            defaultControllerFinishPromiseReject(controller, writable._storedError);
          } else {
            WritableStreamDefaultControllerErrorIfNeeded(writable._writableStreamController, reason);
            TransformStreamUnblockWrite(stream);
            defaultControllerFinishPromiseResolve(controller);
          }
          return null;
        }, (r2) => {
          WritableStreamDefaultControllerErrorIfNeeded(writable._writableStreamController, r2);
          TransformStreamUnblockWrite(stream);
          defaultControllerFinishPromiseReject(controller, r2);
          return null;
        });
        return controller._finishPromise;
      }
      function defaultControllerBrandCheckException(name) {
        return new TypeError(`TransformStreamDefaultController.prototype.${name} can only be used on a TransformStreamDefaultController`);
      }
      function defaultControllerFinishPromiseResolve(controller) {
        if (controller._finishPromise_resolve === void 0) {
          return;
        }
        controller._finishPromise_resolve();
        controller._finishPromise_resolve = void 0;
        controller._finishPromise_reject = void 0;
      }
      function defaultControllerFinishPromiseReject(controller, reason) {
        if (controller._finishPromise_reject === void 0) {
          return;
        }
        setPromiseIsHandledToTrue(controller._finishPromise);
        controller._finishPromise_reject(reason);
        controller._finishPromise_resolve = void 0;
        controller._finishPromise_reject = void 0;
      }
      function streamBrandCheckException(name) {
        return new TypeError(`TransformStream.prototype.${name} can only be used on a TransformStream`);
      }
      exports3.ByteLengthQueuingStrategy = ByteLengthQueuingStrategy;
      exports3.CountQueuingStrategy = CountQueuingStrategy;
      exports3.ReadableByteStreamController = ReadableByteStreamController;
      exports3.ReadableStream = ReadableStream2;
      exports3.ReadableStreamBYOBReader = ReadableStreamBYOBReader;
      exports3.ReadableStreamBYOBRequest = ReadableStreamBYOBRequest;
      exports3.ReadableStreamDefaultController = ReadableStreamDefaultController;
      exports3.ReadableStreamDefaultReader = ReadableStreamDefaultReader;
      exports3.TransformStream = TransformStream;
      exports3.TransformStreamDefaultController = TransformStreamDefaultController;
      exports3.WritableStream = WritableStream;
      exports3.WritableStreamDefaultController = WritableStreamDefaultController;
      exports3.WritableStreamDefaultWriter = WritableStreamDefaultWriter;
    }));
  }
});

// node_modules/fetch-blob/streams.cjs
var require_streams = __commonJS({
  "node_modules/fetch-blob/streams.cjs"() {
    var POOL_SIZE2 = 65536;
    if (!globalThis.ReadableStream) {
      try {
        const process2 = require("node:process");
        const { emitWarning } = process2;
        try {
          process2.emitWarning = () => {
          };
          Object.assign(globalThis, require("node:stream/web"));
          process2.emitWarning = emitWarning;
        } catch (error) {
          process2.emitWarning = emitWarning;
          throw error;
        }
      } catch (error) {
        Object.assign(globalThis, require_ponyfill_es2018());
      }
    }
    try {
      const { Blob: Blob3 } = require("buffer");
      if (Blob3 && !Blob3.prototype.stream) {
        Blob3.prototype.stream = function name(params) {
          let position = 0;
          const blob = this;
          return new ReadableStream({
            type: "bytes",
            async pull(ctrl) {
              const chunk = blob.slice(position, Math.min(blob.size, position + POOL_SIZE2));
              const buffer = await chunk.arrayBuffer();
              position += buffer.byteLength;
              ctrl.enqueue(new Uint8Array(buffer));
              if (position === blob.size) {
                ctrl.close();
              }
            }
          });
        };
      }
    } catch (error) {
    }
  }
});

// node_modules/fetch-blob/index.js
async function* toIterator(parts, clone2 = true) {
  for (const part of parts) {
    if ("stream" in part) {
      yield* (
        /** @type {AsyncIterableIterator<Uint8Array>} */
        part.stream()
      );
    } else if (ArrayBuffer.isView(part)) {
      if (clone2) {
        let position = part.byteOffset;
        const end = part.byteOffset + part.byteLength;
        while (position !== end) {
          const size = Math.min(end - position, POOL_SIZE);
          const chunk = part.buffer.slice(position, position + size);
          position += chunk.byteLength;
          yield new Uint8Array(chunk);
        }
      } else {
        yield part;
      }
    } else {
      let position = 0, b = (
        /** @type {Blob} */
        part
      );
      while (position !== b.size) {
        const chunk = b.slice(position, Math.min(b.size, position + POOL_SIZE));
        const buffer = await chunk.arrayBuffer();
        position += buffer.byteLength;
        yield new Uint8Array(buffer);
      }
    }
  }
}
var import_streams, POOL_SIZE, _Blob, Blob2, fetch_blob_default;
var init_fetch_blob = __esm({
  "node_modules/fetch-blob/index.js"() {
    import_streams = __toESM(require_streams(), 1);
    POOL_SIZE = 65536;
    _Blob = class Blob {
      /** @type {Array.<(Blob|Uint8Array)>} */
      #parts = [];
      #type = "";
      #size = 0;
      #endings = "transparent";
      /**
       * The Blob() constructor returns a new Blob object. The content
       * of the blob consists of the concatenation of the values given
       * in the parameter array.
       *
       * @param {*} blobParts
       * @param {{ type?: string, endings?: string }} [options]
       */
      constructor(blobParts = [], options = {}) {
        if (typeof blobParts !== "object" || blobParts === null) {
          throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");
        }
        if (typeof blobParts[Symbol.iterator] !== "function") {
          throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");
        }
        if (typeof options !== "object" && typeof options !== "function") {
          throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");
        }
        if (options === null) options = {};
        const encoder = new TextEncoder();
        for (const element of blobParts) {
          let part;
          if (ArrayBuffer.isView(element)) {
            part = new Uint8Array(element.buffer.slice(element.byteOffset, element.byteOffset + element.byteLength));
          } else if (element instanceof ArrayBuffer) {
            part = new Uint8Array(element.slice(0));
          } else if (element instanceof Blob) {
            part = element;
          } else {
            part = encoder.encode(`${element}`);
          }
          this.#size += ArrayBuffer.isView(part) ? part.byteLength : part.size;
          this.#parts.push(part);
        }
        this.#endings = `${options.endings === void 0 ? "transparent" : options.endings}`;
        const type = options.type === void 0 ? "" : String(options.type);
        this.#type = /^[\x20-\x7E]*$/.test(type) ? type : "";
      }
      /**
       * The Blob interface's size property returns the
       * size of the Blob in bytes.
       */
      get size() {
        return this.#size;
      }
      /**
       * The type property of a Blob object returns the MIME type of the file.
       */
      get type() {
        return this.#type;
      }
      /**
       * The text() method in the Blob interface returns a Promise
       * that resolves with a string containing the contents of
       * the blob, interpreted as UTF-8.
       *
       * @return {Promise<string>}
       */
      async text() {
        const decoder = new TextDecoder();
        let str = "";
        for await (const part of toIterator(this.#parts, false)) {
          str += decoder.decode(part, { stream: true });
        }
        str += decoder.decode();
        return str;
      }
      /**
       * The arrayBuffer() method in the Blob interface returns a
       * Promise that resolves with the contents of the blob as
       * binary data contained in an ArrayBuffer.
       *
       * @return {Promise<ArrayBuffer>}
       */
      async arrayBuffer() {
        const data = new Uint8Array(this.size);
        let offset = 0;
        for await (const chunk of toIterator(this.#parts, false)) {
          data.set(chunk, offset);
          offset += chunk.length;
        }
        return data.buffer;
      }
      stream() {
        const it = toIterator(this.#parts, true);
        return new globalThis.ReadableStream({
          // @ts-ignore
          type: "bytes",
          async pull(ctrl) {
            const chunk = await it.next();
            chunk.done ? ctrl.close() : ctrl.enqueue(chunk.value);
          },
          async cancel() {
            await it.return();
          }
        });
      }
      /**
       * The Blob interface's slice() method creates and returns a
       * new Blob object which contains data from a subset of the
       * blob on which it's called.
       *
       * @param {number} [start]
       * @param {number} [end]
       * @param {string} [type]
       */
      slice(start = 0, end = this.size, type = "") {
        const { size } = this;
        let relativeStart = start < 0 ? Math.max(size + start, 0) : Math.min(start, size);
        let relativeEnd = end < 0 ? Math.max(size + end, 0) : Math.min(end, size);
        const span = Math.max(relativeEnd - relativeStart, 0);
        const parts = this.#parts;
        const blobParts = [];
        let added = 0;
        for (const part of parts) {
          if (added >= span) {
            break;
          }
          const size2 = ArrayBuffer.isView(part) ? part.byteLength : part.size;
          if (relativeStart && size2 <= relativeStart) {
            relativeStart -= size2;
            relativeEnd -= size2;
          } else {
            let chunk;
            if (ArrayBuffer.isView(part)) {
              chunk = part.subarray(relativeStart, Math.min(size2, relativeEnd));
              added += chunk.byteLength;
            } else {
              chunk = part.slice(relativeStart, Math.min(size2, relativeEnd));
              added += chunk.size;
            }
            relativeEnd -= size2;
            blobParts.push(chunk);
            relativeStart = 0;
          }
        }
        const blob = new Blob([], { type: String(type).toLowerCase() });
        blob.#size = span;
        blob.#parts = blobParts;
        return blob;
      }
      get [Symbol.toStringTag]() {
        return "Blob";
      }
      static [Symbol.hasInstance](object) {
        return object && typeof object === "object" && typeof object.constructor === "function" && (typeof object.stream === "function" || typeof object.arrayBuffer === "function") && /^(Blob|File)$/.test(object[Symbol.toStringTag]);
      }
    };
    Object.defineProperties(_Blob.prototype, {
      size: { enumerable: true },
      type: { enumerable: true },
      slice: { enumerable: true }
    });
    Blob2 = _Blob;
    fetch_blob_default = Blob2;
  }
});

// node_modules/fetch-blob/file.js
var _File, File2, file_default;
var init_file = __esm({
  "node_modules/fetch-blob/file.js"() {
    init_fetch_blob();
    _File = class File extends fetch_blob_default {
      #lastModified = 0;
      #name = "";
      /**
       * @param {*[]} fileBits
       * @param {string} fileName
       * @param {{lastModified?: number, type?: string}} options
       */
      // @ts-ignore
      constructor(fileBits, fileName, options = {}) {
        if (arguments.length < 2) {
          throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);
        }
        super(fileBits, options);
        if (options === null) options = {};
        const lastModified = options.lastModified === void 0 ? Date.now() : Number(options.lastModified);
        if (!Number.isNaN(lastModified)) {
          this.#lastModified = lastModified;
        }
        this.#name = String(fileName);
      }
      get name() {
        return this.#name;
      }
      get lastModified() {
        return this.#lastModified;
      }
      get [Symbol.toStringTag]() {
        return "File";
      }
      static [Symbol.hasInstance](object) {
        return !!object && object instanceof fetch_blob_default && /^(File)$/.test(object[Symbol.toStringTag]);
      }
    };
    File2 = _File;
    file_default = File2;
  }
});

// node_modules/formdata-polyfill/esm.min.js
function formDataToBlob(F2, B = fetch_blob_default) {
  var b = `${r()}${r()}`.replace(/\./g, "").slice(-28).padStart(32, "-"), c = [], p = `--${b}\r
Content-Disposition: form-data; name="`;
  F2.forEach((v, n) => typeof v == "string" ? c.push(p + e(n) + `"\r
\r
${v.replace(/\r(?!\n)|(?<!\r)\n/g, "\r\n")}\r
`) : c.push(p + e(n) + `"; filename="${e(v.name, 1)}"\r
Content-Type: ${v.type || "application/octet-stream"}\r
\r
`, v, "\r\n"));
  c.push(`--${b}--`);
  return new B(c, { type: "multipart/form-data; boundary=" + b });
}
var t, i, h, r, m, f, e, x, FormData;
var init_esm_min = __esm({
  "node_modules/formdata-polyfill/esm.min.js"() {
    init_fetch_blob();
    init_file();
    ({ toStringTag: t, iterator: i, hasInstance: h } = Symbol);
    r = Math.random;
    m = "append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(",");
    f = (a, b, c) => (a += "", /^(Blob|File)$/.test(b && b[t]) ? [(c = c !== void 0 ? c + "" : b[t] == "File" ? b.name : "blob", a), b.name !== c || b[t] == "blob" ? new file_default([b], c, b) : b] : [a, b + ""]);
    e = (c, f3) => (f3 ? c : c.replace(/\r?\n|\r/g, "\r\n")).replace(/\n/g, "%0A").replace(/\r/g, "%0D").replace(/"/g, "%22");
    x = (n, a, e2) => {
      if (a.length < e2) {
        throw new TypeError(`Failed to execute '${n}' on 'FormData': ${e2} arguments required, but only ${a.length} present.`);
      }
    };
    FormData = class FormData2 {
      #d = [];
      constructor(...a) {
        if (a.length) throw new TypeError(`Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.`);
      }
      get [t]() {
        return "FormData";
      }
      [i]() {
        return this.entries();
      }
      static [h](o) {
        return o && typeof o === "object" && o[t] === "FormData" && !m.some((m2) => typeof o[m2] != "function");
      }
      append(...a) {
        x("append", arguments, 2);
        this.#d.push(f(...a));
      }
      delete(a) {
        x("delete", arguments, 1);
        a += "";
        this.#d = this.#d.filter(([b]) => b !== a);
      }
      get(a) {
        x("get", arguments, 1);
        a += "";
        for (var b = this.#d, l = b.length, c = 0; c < l; c++) if (b[c][0] === a) return b[c][1];
        return null;
      }
      getAll(a, b) {
        x("getAll", arguments, 1);
        b = [];
        a += "";
        this.#d.forEach((c) => c[0] === a && b.push(c[1]));
        return b;
      }
      has(a) {
        x("has", arguments, 1);
        a += "";
        return this.#d.some((b) => b[0] === a);
      }
      forEach(a, b) {
        x("forEach", arguments, 1);
        for (var [c, d] of this) a.call(b, d, c, this);
      }
      set(...a) {
        x("set", arguments, 2);
        var b = [], c = true;
        a = f(...a);
        this.#d.forEach((d) => {
          d[0] === a[0] ? c && (c = !b.push(a)) : b.push(d);
        });
        c && b.push(a);
        this.#d = b;
      }
      *entries() {
        yield* this.#d;
      }
      *keys() {
        for (var [a] of this) yield a;
      }
      *values() {
        for (var [, a] of this) yield a;
      }
    };
  }
});

// node_modules/node-domexception/index.js
var require_node_domexception = __commonJS({
  "node_modules/node-domexception/index.js"(exports2, module2) {
    if (!globalThis.DOMException) {
      try {
        const { MessageChannel } = require("worker_threads"), port = new MessageChannel().port1, ab = new ArrayBuffer();
        port.postMessage(ab, [ab, ab]);
      } catch (err) {
        err.constructor.name === "DOMException" && (globalThis.DOMException = err.constructor);
      }
    }
    module2.exports = globalThis.DOMException;
  }
});

// node_modules/fetch-blob/from.js
var import_node_fs, import_node_domexception, stat;
var init_from = __esm({
  "node_modules/fetch-blob/from.js"() {
    import_node_fs = require("node:fs");
    import_node_domexception = __toESM(require_node_domexception(), 1);
    init_file();
    init_fetch_blob();
    ({ stat } = import_node_fs.promises);
  }
});

// node_modules/node-fetch/src/utils/multipart-parser.js
var multipart_parser_exports = {};
__export(multipart_parser_exports, {
  toFormData: () => toFormData
});
function _fileName(headerValue) {
  const m2 = headerValue.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);
  if (!m2) {
    return;
  }
  const match = m2[2] || m2[3] || "";
  let filename = match.slice(match.lastIndexOf("\\") + 1);
  filename = filename.replace(/%22/g, '"');
  filename = filename.replace(/&#(\d{4});/g, (m3, code) => {
    return String.fromCharCode(code);
  });
  return filename;
}
async function toFormData(Body2, ct) {
  if (!/multipart/i.test(ct)) {
    throw new TypeError("Failed to fetch");
  }
  const m2 = ct.match(/boundary=(?:"([^"]+)"|([^;]+))/i);
  if (!m2) {
    throw new TypeError("no or bad content-type header, no multipart boundary");
  }
  const parser = new MultipartParser(m2[1] || m2[2]);
  let headerField;
  let headerValue;
  let entryValue;
  let entryName;
  let contentType;
  let filename;
  const entryChunks = [];
  const formData = new FormData();
  const onPartData = (ui8a) => {
    entryValue += decoder.decode(ui8a, { stream: true });
  };
  const appendToFile = (ui8a) => {
    entryChunks.push(ui8a);
  };
  const appendFileToFormData = () => {
    const file = new file_default(entryChunks, filename, { type: contentType });
    formData.append(entryName, file);
  };
  const appendEntryToFormData = () => {
    formData.append(entryName, entryValue);
  };
  const decoder = new TextDecoder("utf-8");
  decoder.decode();
  parser.onPartBegin = function() {
    parser.onPartData = onPartData;
    parser.onPartEnd = appendEntryToFormData;
    headerField = "";
    headerValue = "";
    entryValue = "";
    entryName = "";
    contentType = "";
    filename = null;
    entryChunks.length = 0;
  };
  parser.onHeaderField = function(ui8a) {
    headerField += decoder.decode(ui8a, { stream: true });
  };
  parser.onHeaderValue = function(ui8a) {
    headerValue += decoder.decode(ui8a, { stream: true });
  };
  parser.onHeaderEnd = function() {
    headerValue += decoder.decode();
    headerField = headerField.toLowerCase();
    if (headerField === "content-disposition") {
      const m3 = headerValue.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);
      if (m3) {
        entryName = m3[2] || m3[3] || "";
      }
      filename = _fileName(headerValue);
      if (filename) {
        parser.onPartData = appendToFile;
        parser.onPartEnd = appendFileToFormData;
      }
    } else if (headerField === "content-type") {
      contentType = headerValue;
    }
    headerValue = "";
    headerField = "";
  };
  for await (const chunk of Body2) {
    parser.write(chunk);
  }
  parser.end();
  return formData;
}
var s, S, f2, F, LF, CR, SPACE, HYPHEN, COLON, A, Z, lower, noop, MultipartParser;
var init_multipart_parser = __esm({
  "node_modules/node-fetch/src/utils/multipart-parser.js"() {
    init_from();
    init_esm_min();
    s = 0;
    S = {
      START_BOUNDARY: s++,
      HEADER_FIELD_START: s++,
      HEADER_FIELD: s++,
      HEADER_VALUE_START: s++,
      HEADER_VALUE: s++,
      HEADER_VALUE_ALMOST_DONE: s++,
      HEADERS_ALMOST_DONE: s++,
      PART_DATA_START: s++,
      PART_DATA: s++,
      END: s++
    };
    f2 = 1;
    F = {
      PART_BOUNDARY: f2,
      LAST_BOUNDARY: f2 *= 2
    };
    LF = 10;
    CR = 13;
    SPACE = 32;
    HYPHEN = 45;
    COLON = 58;
    A = 97;
    Z = 122;
    lower = (c) => c | 32;
    noop = () => {
    };
    MultipartParser = class {
      /**
       * @param {string} boundary
       */
      constructor(boundary) {
        this.index = 0;
        this.flags = 0;
        this.onHeaderEnd = noop;
        this.onHeaderField = noop;
        this.onHeadersEnd = noop;
        this.onHeaderValue = noop;
        this.onPartBegin = noop;
        this.onPartData = noop;
        this.onPartEnd = noop;
        this.boundaryChars = {};
        boundary = "\r\n--" + boundary;
        const ui8a = new Uint8Array(boundary.length);
        for (let i2 = 0; i2 < boundary.length; i2++) {
          ui8a[i2] = boundary.charCodeAt(i2);
          this.boundaryChars[ui8a[i2]] = true;
        }
        this.boundary = ui8a;
        this.lookbehind = new Uint8Array(this.boundary.length + 8);
        this.state = S.START_BOUNDARY;
      }
      /**
       * @param {Uint8Array} data
       */
      write(data) {
        let i2 = 0;
        const length_ = data.length;
        let previousIndex = this.index;
        let { lookbehind, boundary, boundaryChars, index, state, flags } = this;
        const boundaryLength = this.boundary.length;
        const boundaryEnd = boundaryLength - 1;
        const bufferLength = data.length;
        let c;
        let cl;
        const mark = (name) => {
          this[name + "Mark"] = i2;
        };
        const clear = (name) => {
          delete this[name + "Mark"];
        };
        const callback = (callbackSymbol, start, end, ui8a) => {
          if (start === void 0 || start !== end) {
            this[callbackSymbol](ui8a && ui8a.subarray(start, end));
          }
        };
        const dataCallback = (name, clear2) => {
          const markSymbol = name + "Mark";
          if (!(markSymbol in this)) {
            return;
          }
          if (clear2) {
            callback(name, this[markSymbol], i2, data);
            delete this[markSymbol];
          } else {
            callback(name, this[markSymbol], data.length, data);
            this[markSymbol] = 0;
          }
        };
        for (i2 = 0; i2 < length_; i2++) {
          c = data[i2];
          switch (state) {
            case S.START_BOUNDARY:
              if (index === boundary.length - 2) {
                if (c === HYPHEN) {
                  flags |= F.LAST_BOUNDARY;
                } else if (c !== CR) {
                  return;
                }
                index++;
                break;
              } else if (index - 1 === boundary.length - 2) {
                if (flags & F.LAST_BOUNDARY && c === HYPHEN) {
                  state = S.END;
                  flags = 0;
                } else if (!(flags & F.LAST_BOUNDARY) && c === LF) {
                  index = 0;
                  callback("onPartBegin");
                  state = S.HEADER_FIELD_START;
                } else {
                  return;
                }
                break;
              }
              if (c !== boundary[index + 2]) {
                index = -2;
              }
              if (c === boundary[index + 2]) {
                index++;
              }
              break;
            case S.HEADER_FIELD_START:
              state = S.HEADER_FIELD;
              mark("onHeaderField");
              index = 0;
            // falls through
            case S.HEADER_FIELD:
              if (c === CR) {
                clear("onHeaderField");
                state = S.HEADERS_ALMOST_DONE;
                break;
              }
              index++;
              if (c === HYPHEN) {
                break;
              }
              if (c === COLON) {
                if (index === 1) {
                  return;
                }
                dataCallback("onHeaderField", true);
                state = S.HEADER_VALUE_START;
                break;
              }
              cl = lower(c);
              if (cl < A || cl > Z) {
                return;
              }
              break;
            case S.HEADER_VALUE_START:
              if (c === SPACE) {
                break;
              }
              mark("onHeaderValue");
              state = S.HEADER_VALUE;
            // falls through
            case S.HEADER_VALUE:
              if (c === CR) {
                dataCallback("onHeaderValue", true);
                callback("onHeaderEnd");
                state = S.HEADER_VALUE_ALMOST_DONE;
              }
              break;
            case S.HEADER_VALUE_ALMOST_DONE:
              if (c !== LF) {
                return;
              }
              state = S.HEADER_FIELD_START;
              break;
            case S.HEADERS_ALMOST_DONE:
              if (c !== LF) {
                return;
              }
              callback("onHeadersEnd");
              state = S.PART_DATA_START;
              break;
            case S.PART_DATA_START:
              state = S.PART_DATA;
              mark("onPartData");
            // falls through
            case S.PART_DATA:
              previousIndex = index;
              if (index === 0) {
                i2 += boundaryEnd;
                while (i2 < bufferLength && !(data[i2] in boundaryChars)) {
                  i2 += boundaryLength;
                }
                i2 -= boundaryEnd;
                c = data[i2];
              }
              if (index < boundary.length) {
                if (boundary[index] === c) {
                  if (index === 0) {
                    dataCallback("onPartData", true);
                  }
                  index++;
                } else {
                  index = 0;
                }
              } else if (index === boundary.length) {
                index++;
                if (c === CR) {
                  flags |= F.PART_BOUNDARY;
                } else if (c === HYPHEN) {
                  flags |= F.LAST_BOUNDARY;
                } else {
                  index = 0;
                }
              } else if (index - 1 === boundary.length) {
                if (flags & F.PART_BOUNDARY) {
                  index = 0;
                  if (c === LF) {
                    flags &= ~F.PART_BOUNDARY;
                    callback("onPartEnd");
                    callback("onPartBegin");
                    state = S.HEADER_FIELD_START;
                    break;
                  }
                } else if (flags & F.LAST_BOUNDARY) {
                  if (c === HYPHEN) {
                    callback("onPartEnd");
                    state = S.END;
                    flags = 0;
                  } else {
                    index = 0;
                  }
                } else {
                  index = 0;
                }
              }
              if (index > 0) {
                lookbehind[index - 1] = c;
              } else if (previousIndex > 0) {
                const _lookbehind = new Uint8Array(lookbehind.buffer, lookbehind.byteOffset, lookbehind.byteLength);
                callback("onPartData", 0, previousIndex, _lookbehind);
                previousIndex = 0;
                mark("onPartData");
                i2--;
              }
              break;
            case S.END:
              break;
            default:
              throw new Error(`Unexpected state entered: ${state}`);
          }
        }
        dataCallback("onHeaderField");
        dataCallback("onHeaderValue");
        dataCallback("onPartData");
        this.index = index;
        this.state = state;
        this.flags = flags;
      }
      end() {
        if (this.state === S.HEADER_FIELD_START && this.index === 0 || this.state === S.PART_DATA && this.index === this.boundary.length) {
          this.onPartEnd();
        } else if (this.state !== S.END) {
          throw new Error("MultipartParser.end(): stream ended unexpectedly");
        }
      }
    };
  }
});

// node_modules/adm-zip/util/constants.js
var require_constants = __commonJS({
  "node_modules/adm-zip/util/constants.js"(exports2, module2) {
    module2.exports = {
      /* The local file header */
      LOCHDR: 30,
      // LOC header size
      LOCSIG: 67324752,
      // "PK\003\004"
      LOCVER: 4,
      // version needed to extract
      LOCFLG: 6,
      // general purpose bit flag
      LOCHOW: 8,
      // compression method
      LOCTIM: 10,
      // modification time (2 bytes time, 2 bytes date)
      LOCCRC: 14,
      // uncompressed file crc-32 value
      LOCSIZ: 18,
      // compressed size
      LOCLEN: 22,
      // uncompressed size
      LOCNAM: 26,
      // filename length
      LOCEXT: 28,
      // extra field length
      /* The Data descriptor */
      EXTSIG: 134695760,
      // "PK\007\008"
      EXTHDR: 16,
      // EXT header size
      EXTCRC: 4,
      // uncompressed file crc-32 value
      EXTSIZ: 8,
      // compressed size
      EXTLEN: 12,
      // uncompressed size
      /* The central directory file header */
      CENHDR: 46,
      // CEN header size
      CENSIG: 33639248,
      // "PK\001\002"
      CENVEM: 4,
      // version made by
      CENVER: 6,
      // version needed to extract
      CENFLG: 8,
      // encrypt, decrypt flags
      CENHOW: 10,
      // compression method
      CENTIM: 12,
      // modification time (2 bytes time, 2 bytes date)
      CENCRC: 16,
      // uncompressed file crc-32 value
      CENSIZ: 20,
      // compressed size
      CENLEN: 24,
      // uncompressed size
      CENNAM: 28,
      // filename length
      CENEXT: 30,
      // extra field length
      CENCOM: 32,
      // file comment length
      CENDSK: 34,
      // volume number start
      CENATT: 36,
      // internal file attributes
      CENATX: 38,
      // external file attributes (host system dependent)
      CENOFF: 42,
      // LOC header offset
      /* The entries in the end of central directory */
      ENDHDR: 22,
      // END header size
      ENDSIG: 101010256,
      // "PK\005\006"
      ENDSUB: 8,
      // number of entries on this disk
      ENDTOT: 10,
      // total number of entries
      ENDSIZ: 12,
      // central directory size in bytes
      ENDOFF: 16,
      // offset of first CEN header
      ENDCOM: 20,
      // zip file comment length
      END64HDR: 20,
      // zip64 END header size
      END64SIG: 117853008,
      // zip64 Locator signature, "PK\006\007"
      END64START: 4,
      // number of the disk with the start of the zip64
      END64OFF: 8,
      // relative offset of the zip64 end of central directory
      END64NUMDISKS: 16,
      // total number of disks
      ZIP64SIG: 101075792,
      // zip64 signature, "PK\006\006"
      ZIP64HDR: 56,
      // zip64 record minimum size
      ZIP64LEAD: 12,
      // leading bytes at the start of the record, not counted by the value stored in ZIP64SIZE
      ZIP64SIZE: 4,
      // zip64 size of the central directory record
      ZIP64VEM: 12,
      // zip64 version made by
      ZIP64VER: 14,
      // zip64 version needed to extract
      ZIP64DSK: 16,
      // zip64 number of this disk
      ZIP64DSKDIR: 20,
      // number of the disk with the start of the record directory
      ZIP64SUB: 24,
      // number of entries on this disk
      ZIP64TOT: 32,
      // total number of entries
      ZIP64SIZB: 40,
      // zip64 central directory size in bytes
      ZIP64OFF: 48,
      // offset of start of central directory with respect to the starting disk number
      ZIP64EXTRA: 56,
      // extensible data sector
      /* Compression methods */
      STORED: 0,
      // no compression
      SHRUNK: 1,
      // shrunk
      REDUCED1: 2,
      // reduced with compression factor 1
      REDUCED2: 3,
      // reduced with compression factor 2
      REDUCED3: 4,
      // reduced with compression factor 3
      REDUCED4: 5,
      // reduced with compression factor 4
      IMPLODED: 6,
      // imploded
      // 7 reserved for Tokenizing compression algorithm
      DEFLATED: 8,
      // deflated
      ENHANCED_DEFLATED: 9,
      // enhanced deflated
      PKWARE: 10,
      // PKWare DCL imploded
      // 11 reserved by PKWARE
      BZIP2: 12,
      //  compressed using BZIP2
      // 13 reserved by PKWARE
      LZMA: 14,
      // LZMA
      // 15-17 reserved by PKWARE
      IBM_TERSE: 18,
      // compressed using IBM TERSE
      IBM_LZ77: 19,
      // IBM LZ77 z
      AES_ENCRYPT: 99,
      // WinZIP AES encryption method
      /* General purpose bit flag */
      // values can obtained with expression 2**bitnr
      FLG_ENC: 1,
      // Bit 0: encrypted file
      FLG_COMP1: 2,
      // Bit 1, compression option
      FLG_COMP2: 4,
      // Bit 2, compression option
      FLG_DESC: 8,
      // Bit 3, data descriptor
      FLG_ENH: 16,
      // Bit 4, enhanced deflating
      FLG_PATCH: 32,
      // Bit 5, indicates that the file is compressed patched data.
      FLG_STR: 64,
      // Bit 6, strong encryption (patented)
      // Bits 7-10: Currently unused.
      FLG_EFS: 2048,
      // Bit 11: Language encoding flag (EFS)
      // Bit 12: Reserved by PKWARE for enhanced compression.
      // Bit 13: encrypted the Central Directory (patented).
      // Bits 14-15: Reserved by PKWARE.
      FLG_MSK: 4096,
      // mask header values
      /* Load type */
      FILE: 2,
      BUFFER: 1,
      NONE: 0,
      /* 4.5 Extensible data fields */
      EF_ID: 0,
      EF_SIZE: 2,
      /* Header IDs */
      ID_ZIP64: 1,
      ID_AVINFO: 7,
      ID_PFS: 8,
      ID_OS2: 9,
      ID_NTFS: 10,
      ID_OPENVMS: 12,
      ID_UNIX: 13,
      ID_FORK: 14,
      ID_PATCH: 15,
      ID_X509_PKCS7: 20,
      ID_X509_CERTID_F: 21,
      ID_X509_CERTID_C: 22,
      ID_STRONGENC: 23,
      ID_RECORD_MGT: 24,
      ID_X509_PKCS7_RL: 25,
      ID_IBM1: 101,
      ID_IBM2: 102,
      ID_POSZIP: 18064,
      EF_ZIP64_OR_32: 4294967295,
      EF_ZIP64_OR_16: 65535,
      EF_ZIP64_SUNCOMP: 0,
      EF_ZIP64_SCOMP: 8,
      EF_ZIP64_RHO: 16,
      EF_ZIP64_DSN: 24
    };
  }
});

// node_modules/adm-zip/util/errors.js
var require_errors = __commonJS({
  "node_modules/adm-zip/util/errors.js"(exports2) {
    var errors = {
      /* Header error messages */
      INVALID_LOC: "Invalid LOC header (bad signature)",
      INVALID_CEN: "Invalid CEN header (bad signature)",
      INVALID_END: "Invalid END header (bad signature)",
      /* Descriptor */
      DESCRIPTOR_NOT_EXIST: "No descriptor present",
      DESCRIPTOR_UNKNOWN: "Unknown descriptor format",
      DESCRIPTOR_FAULTY: "Descriptor data is malformed",
      /* ZipEntry error messages*/
      NO_DATA: "Nothing to decompress",
      BAD_CRC: "CRC32 checksum failed {0}",
      FILE_IN_THE_WAY: "There is a file in the way: {0}",
      UNKNOWN_METHOD: "Invalid/unsupported compression method",
      /* Inflater error messages */
      AVAIL_DATA: "inflate::Available inflate data did not terminate",
      INVALID_DISTANCE: "inflate::Invalid literal/length or distance code in fixed or dynamic block",
      TO_MANY_CODES: "inflate::Dynamic block code description: too many length or distance codes",
      INVALID_REPEAT_LEN: "inflate::Dynamic block code description: repeat more than specified lengths",
      INVALID_REPEAT_FIRST: "inflate::Dynamic block code description: repeat lengths with no first length",
      INCOMPLETE_CODES: "inflate::Dynamic block code description: code lengths codes incomplete",
      INVALID_DYN_DISTANCE: "inflate::Dynamic block code description: invalid distance code lengths",
      INVALID_CODES_LEN: "inflate::Dynamic block code description: invalid literal/length code lengths",
      INVALID_STORE_BLOCK: "inflate::Stored block length did not match one's complement",
      INVALID_BLOCK_TYPE: "inflate::Invalid block type (type == 3)",
      /* ADM-ZIP error messages */
      CANT_EXTRACT_FILE: "Could not extract the file",
      CANT_OVERRIDE: "Target file already exists",
      DISK_ENTRY_TOO_LARGE: "Number of disk entries is too large",
      NO_ZIP: "No zip file was loaded",
      NO_ENTRY: "Entry doesn't exist",
      DIRECTORY_CONTENT_ERROR: "A directory cannot have content",
      FILE_NOT_FOUND: 'File not found: "{0}"',
      NOT_IMPLEMENTED: "Not implemented",
      INVALID_FILENAME: "Invalid filename",
      INVALID_FORMAT: "Invalid or unsupported zip format. No END header found",
      INVALID_PASS_PARAM: "Incompatible password parameter",
      WRONG_PASSWORD: "Wrong Password",
      /* ADM-ZIP */
      COMMENT_TOO_LONG: "Comment is too long",
      // Comment can be max 65535 bytes long (NOTE: some non-US characters may take more space)
      EXTRA_FIELD_PARSE_ERROR: "Extra field parsing error"
    };
    function E(message) {
      return function(...args) {
        if (args.length) {
          message = message.replace(/\{(\d)\}/g, (_, n) => args[n] || "");
        }
        return new Error("ADM-ZIP: " + message);
      };
    }
    for (const msg of Object.keys(errors)) {
      exports2[msg] = E(errors[msg]);
    }
  }
});

// node_modules/adm-zip/util/utils.js
var require_utils = __commonJS({
  "node_modules/adm-zip/util/utils.js"(exports2, module2) {
    var fsystem = require("fs");
    var pth = require("path");
    var Constants = require_constants();
    var Errors = require_errors();
    var isWin = typeof process === "object" && "win32" === process.platform;
    var is_Obj = (obj) => typeof obj === "object" && obj !== null;
    var crcTable = new Uint32Array(256).map((t2, c) => {
      for (let k = 0; k < 8; k++) {
        if ((c & 1) !== 0) {
          c = 3988292384 ^ c >>> 1;
        } else {
          c >>>= 1;
        }
      }
      return c >>> 0;
    });
    function Utils(opts) {
      this.sep = pth.sep;
      this.fs = fsystem;
      if (is_Obj(opts)) {
        if (is_Obj(opts.fs) && typeof opts.fs.statSync === "function") {
          this.fs = opts.fs;
        }
      }
    }
    module2.exports = Utils;
    Utils.prototype.makeDir = function(folder) {
      const self2 = this;
      function mkdirSync(fpath) {
        let resolvedPath = fpath.split(self2.sep)[0];
        fpath.split(self2.sep).forEach(function(name) {
          if (!name || name.substr(-1, 1) === ":") return;
          resolvedPath += self2.sep + name;
          var stat2;
          try {
            stat2 = self2.fs.statSync(resolvedPath);
          } catch (e2) {
            self2.fs.mkdirSync(resolvedPath);
          }
          if (stat2 && stat2.isFile()) throw Errors.FILE_IN_THE_WAY(`"${resolvedPath}"`);
        });
      }
      mkdirSync(folder);
    };
    Utils.prototype.writeFileTo = function(path2, content, overwrite, attr) {
      const self2 = this;
      if (self2.fs.existsSync(path2)) {
        if (!overwrite) return false;
        var stat2 = self2.fs.statSync(path2);
        if (stat2.isDirectory()) {
          return false;
        }
      }
      var folder = pth.dirname(path2);
      if (!self2.fs.existsSync(folder)) {
        self2.makeDir(folder);
      }
      var fd;
      try {
        fd = self2.fs.openSync(path2, "w", 438);
      } catch (e2) {
        self2.fs.chmodSync(path2, 438);
        fd = self2.fs.openSync(path2, "w", 438);
      }
      if (fd) {
        try {
          self2.fs.writeSync(fd, content, 0, content.length, 0);
        } finally {
          self2.fs.closeSync(fd);
        }
      }
      self2.fs.chmodSync(path2, attr || 438);
      return true;
    };
    Utils.prototype.writeFileToAsync = function(path2, content, overwrite, attr, callback) {
      if (typeof attr === "function") {
        callback = attr;
        attr = void 0;
      }
      const self2 = this;
      self2.fs.exists(path2, function(exist) {
        if (exist && !overwrite) return callback(false);
        self2.fs.stat(path2, function(err, stat2) {
          if (exist && stat2.isDirectory()) {
            return callback(false);
          }
          var folder = pth.dirname(path2);
          self2.fs.exists(folder, function(exists) {
            if (!exists) self2.makeDir(folder);
            self2.fs.open(path2, "w", 438, function(err2, fd) {
              if (err2) {
                self2.fs.chmod(path2, 438, function() {
                  self2.fs.open(path2, "w", 438, function(err3, fd2) {
                    self2.fs.write(fd2, content, 0, content.length, 0, function() {
                      self2.fs.close(fd2, function() {
                        self2.fs.chmod(path2, attr || 438, function() {
                          callback(true);
                        });
                      });
                    });
                  });
                });
              } else if (fd) {
                self2.fs.write(fd, content, 0, content.length, 0, function() {
                  self2.fs.close(fd, function() {
                    self2.fs.chmod(path2, attr || 438, function() {
                      callback(true);
                    });
                  });
                });
              } else {
                self2.fs.chmod(path2, attr || 438, function() {
                  callback(true);
                });
              }
            });
          });
        });
      });
    };
    Utils.prototype.findFiles = function(path2) {
      const self2 = this;
      function findSync(dir, pattern, recursive) {
        if (typeof pattern === "boolean") {
          recursive = pattern;
          pattern = void 0;
        }
        let files = [];
        self2.fs.readdirSync(dir).forEach(function(file) {
          const path3 = pth.join(dir, file);
          const stat2 = self2.fs.statSync(path3);
          if (!pattern || pattern.test(path3)) {
            files.push(pth.normalize(path3) + (stat2.isDirectory() ? self2.sep : ""));
          }
          if (stat2.isDirectory() && recursive) files = files.concat(findSync(path3, pattern, recursive));
        });
        return files;
      }
      return findSync(path2, void 0, true);
    };
    Utils.prototype.findFilesAsync = function(dir, cb) {
      const self2 = this;
      let results = [];
      self2.fs.readdir(dir, function(err, list) {
        if (err) return cb(err);
        let list_length = list.length;
        if (!list_length) return cb(null, results);
        list.forEach(function(file) {
          file = pth.join(dir, file);
          self2.fs.stat(file, function(err2, stat2) {
            if (err2) return cb(err2);
            if (stat2) {
              results.push(pth.normalize(file) + (stat2.isDirectory() ? self2.sep : ""));
              if (stat2.isDirectory()) {
                self2.findFilesAsync(file, function(err3, res) {
                  if (err3) return cb(err3);
                  results = results.concat(res);
                  if (!--list_length) cb(null, results);
                });
              } else {
                if (!--list_length) cb(null, results);
              }
            }
          });
        });
      });
    };
    Utils.prototype.getAttributes = function() {
    };
    Utils.prototype.setAttributes = function() {
    };
    Utils.crc32update = function(crc, byte) {
      return crcTable[(crc ^ byte) & 255] ^ crc >>> 8;
    };
    Utils.crc32 = function(buf) {
      if (typeof buf === "string") {
        buf = Buffer.from(buf, "utf8");
      }
      let len = buf.length;
      let crc = ~0;
      for (let off = 0; off < len; ) crc = Utils.crc32update(crc, buf[off++]);
      return ~crc >>> 0;
    };
    Utils.methodToString = function(method) {
      switch (method) {
        case Constants.STORED:
          return "STORED (" + method + ")";
        case Constants.DEFLATED:
          return "DEFLATED (" + method + ")";
        default:
          return "UNSUPPORTED (" + method + ")";
      }
    };
    Utils.canonical = function(path2) {
      if (!path2) return "";
      const safeSuffix = pth.posix.normalize("/" + path2.split("\\").join("/"));
      return pth.join(".", safeSuffix);
    };
    Utils.zipnamefix = function(path2) {
      if (!path2) return "";
      const safeSuffix = pth.posix.normalize("/" + path2.split("\\").join("/"));
      return pth.posix.join(".", safeSuffix);
    };
    Utils.findLast = function(arr, callback) {
      if (!Array.isArray(arr)) throw new TypeError("arr is not array");
      const len = arr.length >>> 0;
      for (let i2 = len - 1; i2 >= 0; i2--) {
        if (callback(arr[i2], i2, arr)) {
          return arr[i2];
        }
      }
      return void 0;
    };
    Utils.sanitize = function(prefix, name) {
      prefix = pth.resolve(pth.normalize(prefix));
      var parts = name.split("/");
      for (var i2 = 0, l = parts.length; i2 < l; i2++) {
        var path2 = pth.normalize(pth.join(prefix, parts.slice(i2, l).join(pth.sep)));
        if (path2.indexOf(prefix) === 0) {
          return path2;
        }
      }
      return pth.normalize(pth.join(prefix, pth.basename(name)));
    };
    Utils.toBuffer = function toBuffer(input, encoder) {
      if (Buffer.isBuffer(input)) {
        return input;
      } else if (input instanceof Uint8Array) {
        return Buffer.from(input);
      } else {
        return typeof input === "string" ? encoder(input) : Buffer.alloc(0);
      }
    };
    Utils.readBigUInt64LE = function(buffer, index) {
      var slice = Buffer.from(buffer.slice(index, index + 8));
      slice.swap64();
      return parseInt(`0x${slice.toString("hex")}`);
    };
    Utils.fromDOS2Date = function(val) {
      return new Date((val >> 25 & 127) + 1980, Math.max((val >> 21 & 15) - 1, 0), Math.max(val >> 16 & 31, 1), val >> 11 & 31, val >> 5 & 63, (val & 31) << 1);
    };
    Utils.fromDate2DOS = function(val) {
      let date = 0;
      let time = 0;
      if (val.getFullYear() > 1979) {
        date = (val.getFullYear() - 1980 & 127) << 9 | val.getMonth() + 1 << 5 | val.getDate();
        time = val.getHours() << 11 | val.getMinutes() << 5 | val.getSeconds() >> 1;
      }
      return date << 16 | time;
    };
    Utils.isWin = isWin;
    Utils.crcTable = crcTable;
  }
});

// node_modules/adm-zip/util/fattr.js
var require_fattr = __commonJS({
  "node_modules/adm-zip/util/fattr.js"(exports2, module2) {
    var pth = require("path");
    module2.exports = function(path2, { fs: fs3 }) {
      var _path = path2 || "", _obj = newAttr(), _stat = null;
      function newAttr() {
        return {
          directory: false,
          readonly: false,
          hidden: false,
          executable: false,
          mtime: 0,
          atime: 0
        };
      }
      if (_path && fs3.existsSync(_path)) {
        _stat = fs3.statSync(_path);
        _obj.directory = _stat.isDirectory();
        _obj.mtime = _stat.mtime;
        _obj.atime = _stat.atime;
        _obj.executable = (73 & _stat.mode) !== 0;
        _obj.readonly = (128 & _stat.mode) === 0;
        _obj.hidden = pth.basename(_path)[0] === ".";
      } else {
        console.warn("Invalid path: " + _path);
      }
      return {
        get directory() {
          return _obj.directory;
        },
        get readOnly() {
          return _obj.readonly;
        },
        get hidden() {
          return _obj.hidden;
        },
        get mtime() {
          return _obj.mtime;
        },
        get atime() {
          return _obj.atime;
        },
        get executable() {
          return _obj.executable;
        },
        decodeAttributes: function() {
        },
        encodeAttributes: function() {
        },
        toJSON: function() {
          return {
            path: _path,
            isDirectory: _obj.directory,
            isReadOnly: _obj.readonly,
            isHidden: _obj.hidden,
            isExecutable: _obj.executable,
            mTime: _obj.mtime,
            aTime: _obj.atime
          };
        },
        toString: function() {
          return JSON.stringify(this.toJSON(), null, "	");
        }
      };
    };
  }
});

// node_modules/adm-zip/util/decoder.js
var require_decoder = __commonJS({
  "node_modules/adm-zip/util/decoder.js"(exports2, module2) {
    module2.exports = {
      efs: true,
      encode: (data) => Buffer.from(data, "utf8"),
      decode: (data) => data.toString("utf8")
    };
  }
});

// node_modules/adm-zip/util/index.js
var require_util = __commonJS({
  "node_modules/adm-zip/util/index.js"(exports2, module2) {
    module2.exports = require_utils();
    module2.exports.Constants = require_constants();
    module2.exports.Errors = require_errors();
    module2.exports.FileAttr = require_fattr();
    module2.exports.decoder = require_decoder();
  }
});

// node_modules/adm-zip/headers/entryHeader.js
var require_entryHeader = __commonJS({
  "node_modules/adm-zip/headers/entryHeader.js"(exports2, module2) {
    var Utils = require_util();
    var Constants = Utils.Constants;
    module2.exports = function() {
      var _verMade = 20, _version = 10, _flags = 0, _method = 0, _time = 0, _crc = 0, _compressedSize = 0, _size = 0, _fnameLen = 0, _extraLen = 0, _comLen = 0, _diskStart = 0, _inattr = 0, _attr = 0, _offset = 0;
      _verMade |= Utils.isWin ? 2560 : 768;
      _flags |= Constants.FLG_EFS;
      const _localHeader = {
        extraLen: 0
      };
      const uint32 = (val) => Math.max(0, val) >>> 0;
      const uint16 = (val) => Math.max(0, val) & 65535;
      const uint8 = (val) => Math.max(0, val) & 255;
      _time = Utils.fromDate2DOS(/* @__PURE__ */ new Date());
      return {
        get made() {
          return _verMade;
        },
        set made(val) {
          _verMade = val;
        },
        get version() {
          return _version;
        },
        set version(val) {
          _version = val;
        },
        get flags() {
          return _flags;
        },
        set flags(val) {
          _flags = val;
        },
        get flags_efs() {
          return (_flags & Constants.FLG_EFS) > 0;
        },
        set flags_efs(val) {
          if (val) {
            _flags |= Constants.FLG_EFS;
          } else {
            _flags &= ~Constants.FLG_EFS;
          }
        },
        get flags_desc() {
          return (_flags & Constants.FLG_DESC) > 0;
        },
        set flags_desc(val) {
          if (val) {
            _flags |= Constants.FLG_DESC;
          } else {
            _flags &= ~Constants.FLG_DESC;
          }
        },
        get method() {
          return _method;
        },
        set method(val) {
          switch (val) {
            case Constants.STORED:
              this.version = 10;
            case Constants.DEFLATED:
            default:
              this.version = 20;
          }
          _method = val;
        },
        get time() {
          return Utils.fromDOS2Date(this.timeval);
        },
        set time(val) {
          this.timeval = Utils.fromDate2DOS(val);
        },
        get timeval() {
          return _time;
        },
        set timeval(val) {
          _time = uint32(val);
        },
        get timeHighByte() {
          return uint8(_time >>> 8);
        },
        get crc() {
          return _crc;
        },
        set crc(val) {
          _crc = uint32(val);
        },
        get compressedSize() {
          return _compressedSize;
        },
        set compressedSize(val) {
          _compressedSize = uint32(val);
        },
        get size() {
          return _size;
        },
        set size(val) {
          _size = uint32(val);
        },
        get fileNameLength() {
          return _fnameLen;
        },
        set fileNameLength(val) {
          _fnameLen = val;
        },
        get extraLength() {
          return _extraLen;
        },
        set extraLength(val) {
          _extraLen = val;
        },
        get extraLocalLength() {
          return _localHeader.extraLen;
        },
        set extraLocalLength(val) {
          _localHeader.extraLen = val;
        },
        get commentLength() {
          return _comLen;
        },
        set commentLength(val) {
          _comLen = val;
        },
        get diskNumStart() {
          return _diskStart;
        },
        set diskNumStart(val) {
          _diskStart = uint32(val);
        },
        get inAttr() {
          return _inattr;
        },
        set inAttr(val) {
          _inattr = uint32(val);
        },
        get attr() {
          return _attr;
        },
        set attr(val) {
          _attr = uint32(val);
        },
        // get Unix file permissions
        get fileAttr() {
          return (_attr || 0) >> 16 & 4095;
        },
        get offset() {
          return _offset;
        },
        set offset(val) {
          _offset = uint32(val);
        },
        get encrypted() {
          return (_flags & Constants.FLG_ENC) === Constants.FLG_ENC;
        },
        get centralHeaderSize() {
          return Constants.CENHDR + _fnameLen + _extraLen + _comLen;
        },
        get realDataOffset() {
          return _offset + Constants.LOCHDR + _localHeader.fnameLen + _localHeader.extraLen;
        },
        get localHeader() {
          return _localHeader;
        },
        loadLocalHeaderFromBinary: function(input) {
          var data = input.slice(_offset, _offset + Constants.LOCHDR);
          if (data.readUInt32LE(0) !== Constants.LOCSIG) {
            throw Utils.Errors.INVALID_LOC();
          }
          _localHeader.version = data.readUInt16LE(Constants.LOCVER);
          _localHeader.flags = data.readUInt16LE(Constants.LOCFLG);
          _localHeader.method = data.readUInt16LE(Constants.LOCHOW);
          _localHeader.time = data.readUInt32LE(Constants.LOCTIM);
          _localHeader.crc = data.readUInt32LE(Constants.LOCCRC);
          _localHeader.compressedSize = data.readUInt32LE(Constants.LOCSIZ);
          _localHeader.size = data.readUInt32LE(Constants.LOCLEN);
          _localHeader.fnameLen = data.readUInt16LE(Constants.LOCNAM);
          _localHeader.extraLen = data.readUInt16LE(Constants.LOCEXT);
          const extraStart = _offset + Constants.LOCHDR + _localHeader.fnameLen;
          const extraEnd = extraStart + _localHeader.extraLen;
          return input.slice(extraStart, extraEnd);
        },
        loadFromBinary: function(data) {
          if (data.length !== Constants.CENHDR || data.readUInt32LE(0) !== Constants.CENSIG) {
            throw Utils.Errors.INVALID_CEN();
          }
          _verMade = data.readUInt16LE(Constants.CENVEM);
          _version = data.readUInt16LE(Constants.CENVER);
          _flags = data.readUInt16LE(Constants.CENFLG);
          _method = data.readUInt16LE(Constants.CENHOW);
          _time = data.readUInt32LE(Constants.CENTIM);
          _crc = data.readUInt32LE(Constants.CENCRC);
          _compressedSize = data.readUInt32LE(Constants.CENSIZ);
          _size = data.readUInt32LE(Constants.CENLEN);
          _fnameLen = data.readUInt16LE(Constants.CENNAM);
          _extraLen = data.readUInt16LE(Constants.CENEXT);
          _comLen = data.readUInt16LE(Constants.CENCOM);
          _diskStart = data.readUInt16LE(Constants.CENDSK);
          _inattr = data.readUInt16LE(Constants.CENATT);
          _attr = data.readUInt32LE(Constants.CENATX);
          _offset = data.readUInt32LE(Constants.CENOFF);
        },
        localHeaderToBinary: function() {
          var data = Buffer.alloc(Constants.LOCHDR);
          data.writeUInt32LE(Constants.LOCSIG, 0);
          data.writeUInt16LE(_version, Constants.LOCVER);
          data.writeUInt16LE(_flags, Constants.LOCFLG);
          data.writeUInt16LE(_method, Constants.LOCHOW);
          data.writeUInt32LE(_time, Constants.LOCTIM);
          data.writeUInt32LE(_crc, Constants.LOCCRC);
          data.writeUInt32LE(_compressedSize, Constants.LOCSIZ);
          data.writeUInt32LE(_size, Constants.LOCLEN);
          data.writeUInt16LE(_fnameLen, Constants.LOCNAM);
          data.writeUInt16LE(_localHeader.extraLen, Constants.LOCEXT);
          return data;
        },
        centralHeaderToBinary: function() {
          var data = Buffer.alloc(Constants.CENHDR + _fnameLen + _extraLen + _comLen);
          data.writeUInt32LE(Constants.CENSIG, 0);
          data.writeUInt16LE(_verMade, Constants.CENVEM);
          data.writeUInt16LE(_version, Constants.CENVER);
          data.writeUInt16LE(_flags, Constants.CENFLG);
          data.writeUInt16LE(_method, Constants.CENHOW);
          data.writeUInt32LE(_time, Constants.CENTIM);
          data.writeUInt32LE(_crc, Constants.CENCRC);
          data.writeUInt32LE(_compressedSize, Constants.CENSIZ);
          data.writeUInt32LE(_size, Constants.CENLEN);
          data.writeUInt16LE(_fnameLen, Constants.CENNAM);
          data.writeUInt16LE(_extraLen, Constants.CENEXT);
          data.writeUInt16LE(_comLen, Constants.CENCOM);
          data.writeUInt16LE(_diskStart, Constants.CENDSK);
          data.writeUInt16LE(_inattr, Constants.CENATT);
          data.writeUInt32LE(_attr, Constants.CENATX);
          data.writeUInt32LE(_offset, Constants.CENOFF);
          return data;
        },
        toJSON: function() {
          const bytes = function(nr) {
            return nr + " bytes";
          };
          return {
            made: _verMade,
            version: _version,
            flags: _flags,
            method: Utils.methodToString(_method),
            time: this.time,
            crc: "0x" + _crc.toString(16).toUpperCase(),
            compressedSize: bytes(_compressedSize),
            size: bytes(_size),
            fileNameLength: bytes(_fnameLen),
            extraLength: bytes(_extraLen),
            commentLength: bytes(_comLen),
            diskNumStart: _diskStart,
            inAttr: _inattr,
            attr: _attr,
            offset: _offset,
            centralHeaderSize: bytes(Constants.CENHDR + _fnameLen + _extraLen + _comLen)
          };
        },
        toString: function() {
          return JSON.stringify(this.toJSON(), null, "	");
        }
      };
    };
  }
});

// node_modules/adm-zip/headers/mainHeader.js
var require_mainHeader = __commonJS({
  "node_modules/adm-zip/headers/mainHeader.js"(exports2, module2) {
    var Utils = require_util();
    var Constants = Utils.Constants;
    module2.exports = function() {
      var _volumeEntries = 0, _totalEntries = 0, _size = 0, _offset = 0, _commentLength = 0;
      return {
        get diskEntries() {
          return _volumeEntries;
        },
        set diskEntries(val) {
          _volumeEntries = _totalEntries = val;
        },
        get totalEntries() {
          return _totalEntries;
        },
        set totalEntries(val) {
          _totalEntries = _volumeEntries = val;
        },
        get size() {
          return _size;
        },
        set size(val) {
          _size = val;
        },
        get offset() {
          return _offset;
        },
        set offset(val) {
          _offset = val;
        },
        get commentLength() {
          return _commentLength;
        },
        set commentLength(val) {
          _commentLength = val;
        },
        get mainHeaderSize() {
          return Constants.ENDHDR + _commentLength;
        },
        loadFromBinary: function(data) {
          if ((data.length !== Constants.ENDHDR || data.readUInt32LE(0) !== Constants.ENDSIG) && (data.length < Constants.ZIP64HDR || data.readUInt32LE(0) !== Constants.ZIP64SIG)) {
            throw Utils.Errors.INVALID_END();
          }
          if (data.readUInt32LE(0) === Constants.ENDSIG) {
            _volumeEntries = data.readUInt16LE(Constants.ENDSUB);
            _totalEntries = data.readUInt16LE(Constants.ENDTOT);
            _size = data.readUInt32LE(Constants.ENDSIZ);
            _offset = data.readUInt32LE(Constants.ENDOFF);
            _commentLength = data.readUInt16LE(Constants.ENDCOM);
          } else {
            _volumeEntries = Utils.readBigUInt64LE(data, Constants.ZIP64SUB);
            _totalEntries = Utils.readBigUInt64LE(data, Constants.ZIP64TOT);
            _size = Utils.readBigUInt64LE(data, Constants.ZIP64SIZE);
            _offset = Utils.readBigUInt64LE(data, Constants.ZIP64OFF);
            _commentLength = 0;
          }
        },
        toBinary: function() {
          var b = Buffer.alloc(Constants.ENDHDR + _commentLength);
          b.writeUInt32LE(Constants.ENDSIG, 0);
          b.writeUInt32LE(0, 4);
          b.writeUInt16LE(_volumeEntries, Constants.ENDSUB);
          b.writeUInt16LE(_totalEntries, Constants.ENDTOT);
          b.writeUInt32LE(_size, Constants.ENDSIZ);
          b.writeUInt32LE(_offset, Constants.ENDOFF);
          b.writeUInt16LE(_commentLength, Constants.ENDCOM);
          b.fill(" ", Constants.ENDHDR);
          return b;
        },
        toJSON: function() {
          const offset = function(nr, len) {
            let offs = nr.toString(16).toUpperCase();
            while (offs.length < len) offs = "0" + offs;
            return "0x" + offs;
          };
          return {
            diskEntries: _volumeEntries,
            totalEntries: _totalEntries,
            size: _size + " bytes",
            offset: offset(_offset, 4),
            commentLength: _commentLength
          };
        },
        toString: function() {
          return JSON.stringify(this.toJSON(), null, "	");
        }
      };
    };
  }
});

// node_modules/adm-zip/headers/index.js
var require_headers = __commonJS({
  "node_modules/adm-zip/headers/index.js"(exports2) {
    exports2.EntryHeader = require_entryHeader();
    exports2.MainHeader = require_mainHeader();
  }
});

// node_modules/adm-zip/methods/deflater.js
var require_deflater = __commonJS({
  "node_modules/adm-zip/methods/deflater.js"(exports2, module2) {
    module2.exports = function(inbuf) {
      var zlib2 = require("zlib");
      var opts = { chunkSize: (parseInt(inbuf.length / 1024) + 1) * 1024 };
      return {
        deflate: function() {
          return zlib2.deflateRawSync(inbuf, opts);
        },
        deflateAsync: function(callback) {
          var tmp = zlib2.createDeflateRaw(opts), parts = [], total = 0;
          tmp.on("data", function(data) {
            parts.push(data);
            total += data.length;
          });
          tmp.on("end", function() {
            var buf = Buffer.alloc(total), written = 0;
            buf.fill(0);
            for (var i2 = 0; i2 < parts.length; i2++) {
              var part = parts[i2];
              part.copy(buf, written);
              written += part.length;
            }
            callback && callback(buf);
          });
          tmp.end(inbuf);
        }
      };
    };
  }
});

// node_modules/adm-zip/methods/inflater.js
var require_inflater = __commonJS({
  "node_modules/adm-zip/methods/inflater.js"(exports2, module2) {
    var version = +(process.versions ? process.versions.node : "").split(".")[0] || 0;
    module2.exports = function(inbuf, expectedLength) {
      var zlib2 = require("zlib");
      const option = version >= 15 && expectedLength > 0 ? { maxOutputLength: expectedLength } : {};
      return {
        inflate: function() {
          return zlib2.inflateRawSync(inbuf, option);
        },
        inflateAsync: function(callback) {
          var tmp = zlib2.createInflateRaw(option), parts = [], total = 0;
          tmp.on("data", function(data) {
            parts.push(data);
            total += data.length;
          });
          tmp.on("end", function() {
            var buf = Buffer.alloc(total), written = 0;
            buf.fill(0);
            for (var i2 = 0; i2 < parts.length; i2++) {
              var part = parts[i2];
              part.copy(buf, written);
              written += part.length;
            }
            callback && callback(buf);
          });
          tmp.end(inbuf);
        }
      };
    };
  }
});

// node_modules/adm-zip/methods/zipcrypto.js
var require_zipcrypto = __commonJS({
  "node_modules/adm-zip/methods/zipcrypto.js"(exports2, module2) {
    "use strict";
    var { randomFillSync } = require("crypto");
    var Errors = require_errors();
    var crctable = new Uint32Array(256).map((t2, crc) => {
      for (let j = 0; j < 8; j++) {
        if (0 !== (crc & 1)) {
          crc = crc >>> 1 ^ 3988292384;
        } else {
          crc >>>= 1;
        }
      }
      return crc >>> 0;
    });
    var uMul = (a, b) => Math.imul(a, b) >>> 0;
    var crc32update = (pCrc32, bval) => {
      return crctable[(pCrc32 ^ bval) & 255] ^ pCrc32 >>> 8;
    };
    var genSalt = () => {
      if ("function" === typeof randomFillSync) {
        return randomFillSync(Buffer.alloc(12));
      } else {
        return genSalt.node();
      }
    };
    genSalt.node = () => {
      const salt = Buffer.alloc(12);
      const len = salt.length;
      for (let i2 = 0; i2 < len; i2++) salt[i2] = Math.random() * 256 & 255;
      return salt;
    };
    var config = {
      genSalt
    };
    function Initkeys(pw) {
      const pass = Buffer.isBuffer(pw) ? pw : Buffer.from(pw);
      this.keys = new Uint32Array([305419896, 591751049, 878082192]);
      for (let i2 = 0; i2 < pass.length; i2++) {
        this.updateKeys(pass[i2]);
      }
    }
    Initkeys.prototype.updateKeys = function(byteValue) {
      const keys = this.keys;
      keys[0] = crc32update(keys[0], byteValue);
      keys[1] += keys[0] & 255;
      keys[1] = uMul(keys[1], 134775813) + 1;
      keys[2] = crc32update(keys[2], keys[1] >>> 24);
      return byteValue;
    };
    Initkeys.prototype.next = function() {
      const k = (this.keys[2] | 2) >>> 0;
      return uMul(k, k ^ 1) >> 8 & 255;
    };
    function make_decrypter(pwd) {
      const keys = new Initkeys(pwd);
      return function(data) {
        const result = Buffer.alloc(data.length);
        let pos = 0;
        for (let c of data) {
          result[pos++] = keys.updateKeys(c ^ keys.next());
        }
        return result;
      };
    }
    function make_encrypter(pwd) {
      const keys = new Initkeys(pwd);
      return function(data, result, pos = 0) {
        if (!result) result = Buffer.alloc(data.length);
        for (let c of data) {
          const k = keys.next();
          result[pos++] = c ^ k;
          keys.updateKeys(c);
        }
        return result;
      };
    }
    function decrypt(data, header, pwd) {
      if (!data || !Buffer.isBuffer(data) || data.length < 12) {
        return Buffer.alloc(0);
      }
      const decrypter = make_decrypter(pwd);
      const salt = decrypter(data.slice(0, 12));
      const verifyByte = (header.flags & 8) === 8 ? header.timeHighByte : header.crc >>> 24;
      if (salt[11] !== verifyByte) {
        throw Errors.WRONG_PASSWORD();
      }
      return decrypter(data.slice(12));
    }
    function _salter(data) {
      if (Buffer.isBuffer(data) && data.length >= 12) {
        config.genSalt = function() {
          return data.slice(0, 12);
        };
      } else if (data === "node") {
        config.genSalt = genSalt.node;
      } else {
        config.genSalt = genSalt;
      }
    }
    function encrypt(data, header, pwd, oldlike = false) {
      if (data == null) data = Buffer.alloc(0);
      if (!Buffer.isBuffer(data)) data = Buffer.from(data.toString());
      const encrypter = make_encrypter(pwd);
      const salt = config.genSalt();
      salt[11] = header.crc >>> 24 & 255;
      if (oldlike) salt[10] = header.crc >>> 16 & 255;
      const result = Buffer.alloc(data.length + 12);
      encrypter(salt, result);
      return encrypter(data, result, 12);
    }
    module2.exports = { decrypt, encrypt, _salter };
  }
});

// node_modules/adm-zip/methods/index.js
var require_methods = __commonJS({
  "node_modules/adm-zip/methods/index.js"(exports2) {
    exports2.Deflater = require_deflater();
    exports2.Inflater = require_inflater();
    exports2.ZipCrypto = require_zipcrypto();
  }
});

// node_modules/adm-zip/zipEntry.js
var require_zipEntry = __commonJS({
  "node_modules/adm-zip/zipEntry.js"(exports2, module2) {
    var Utils = require_util();
    var Headers2 = require_headers();
    var Constants = Utils.Constants;
    var Methods = require_methods();
    module2.exports = function(options, input) {
      var _centralHeader = new Headers2.EntryHeader(), _entryName = Buffer.alloc(0), _comment = Buffer.alloc(0), _isDirectory = false, uncompressedData = null, _extra = Buffer.alloc(0), _extralocal = Buffer.alloc(0), _efs = true;
      const opts = options;
      const decoder = typeof opts.decoder === "object" ? opts.decoder : Utils.decoder;
      _efs = decoder.hasOwnProperty("efs") ? decoder.efs : false;
      function getCompressedDataFromZip() {
        if (!input || !(input instanceof Uint8Array)) {
          return Buffer.alloc(0);
        }
        _extralocal = _centralHeader.loadLocalHeaderFromBinary(input);
        return input.slice(_centralHeader.realDataOffset, _centralHeader.realDataOffset + _centralHeader.compressedSize);
      }
      function crc32OK(data) {
        if (!_centralHeader.flags_desc) {
          if (Utils.crc32(data) !== _centralHeader.localHeader.crc) {
            return false;
          }
        } else {
          const descriptor = {};
          const dataEndOffset = _centralHeader.realDataOffset + _centralHeader.compressedSize;
          if (input.readUInt32LE(dataEndOffset) == Constants.LOCSIG || input.readUInt32LE(dataEndOffset) == Constants.CENSIG) {
            throw Utils.Errors.DESCRIPTOR_NOT_EXIST();
          }
          if (input.readUInt32LE(dataEndOffset) == Constants.EXTSIG) {
            descriptor.crc = input.readUInt32LE(dataEndOffset + Constants.EXTCRC);
            descriptor.compressedSize = input.readUInt32LE(dataEndOffset + Constants.EXTSIZ);
            descriptor.size = input.readUInt32LE(dataEndOffset + Constants.EXTLEN);
          } else if (input.readUInt16LE(dataEndOffset + 12) === 19280) {
            descriptor.crc = input.readUInt32LE(dataEndOffset + Constants.EXTCRC - 4);
            descriptor.compressedSize = input.readUInt32LE(dataEndOffset + Constants.EXTSIZ - 4);
            descriptor.size = input.readUInt32LE(dataEndOffset + Constants.EXTLEN - 4);
          } else {
            throw Utils.Errors.DESCRIPTOR_UNKNOWN();
          }
          if (descriptor.compressedSize !== _centralHeader.compressedSize || descriptor.size !== _centralHeader.size || descriptor.crc !== _centralHeader.crc) {
            throw Utils.Errors.DESCRIPTOR_FAULTY();
          }
          if (Utils.crc32(data) !== descriptor.crc) {
            return false;
          }
        }
        return true;
      }
      function decompress(async, callback, pass) {
        if (typeof callback === "undefined" && typeof async === "string") {
          pass = async;
          async = void 0;
        }
        if (_isDirectory) {
          if (async && callback) {
            callback(Buffer.alloc(0), Utils.Errors.DIRECTORY_CONTENT_ERROR());
          }
          return Buffer.alloc(0);
        }
        var compressedData = getCompressedDataFromZip();
        if (compressedData.length === 0) {
          if (async && callback) callback(compressedData);
          return compressedData;
        }
        if (_centralHeader.encrypted) {
          if ("string" !== typeof pass && !Buffer.isBuffer(pass)) {
            throw Utils.Errors.INVALID_PASS_PARAM();
          }
          compressedData = Methods.ZipCrypto.decrypt(compressedData, _centralHeader, pass);
        }
        var data = Buffer.alloc(_centralHeader.size);
        switch (_centralHeader.method) {
          case Utils.Constants.STORED:
            compressedData.copy(data);
            if (!crc32OK(data)) {
              if (async && callback) callback(data, Utils.Errors.BAD_CRC());
              throw Utils.Errors.BAD_CRC();
            } else {
              if (async && callback) callback(data);
              return data;
            }
          case Utils.Constants.DEFLATED:
            var inflater = new Methods.Inflater(compressedData, _centralHeader.size);
            if (!async) {
              const result = inflater.inflate(data);
              result.copy(data, 0);
              if (!crc32OK(data)) {
                throw Utils.Errors.BAD_CRC(`"${decoder.decode(_entryName)}"`);
              }
              return data;
            } else {
              inflater.inflateAsync(function(result) {
                result.copy(result, 0);
                if (callback) {
                  if (!crc32OK(result)) {
                    callback(result, Utils.Errors.BAD_CRC());
                  } else {
                    callback(result);
                  }
                }
              });
            }
            break;
          default:
            if (async && callback) callback(Buffer.alloc(0), Utils.Errors.UNKNOWN_METHOD());
            throw Utils.Errors.UNKNOWN_METHOD();
        }
      }
      function compress(async, callback) {
        if ((!uncompressedData || !uncompressedData.length) && Buffer.isBuffer(input)) {
          if (async && callback) callback(getCompressedDataFromZip());
          return getCompressedDataFromZip();
        }
        if (uncompressedData.length && !_isDirectory) {
          var compressedData;
          switch (_centralHeader.method) {
            case Utils.Constants.STORED:
              _centralHeader.compressedSize = _centralHeader.size;
              compressedData = Buffer.alloc(uncompressedData.length);
              uncompressedData.copy(compressedData);
              if (async && callback) callback(compressedData);
              return compressedData;
            default:
            case Utils.Constants.DEFLATED:
              var deflater = new Methods.Deflater(uncompressedData);
              if (!async) {
                var deflated = deflater.deflate();
                _centralHeader.compressedSize = deflated.length;
                return deflated;
              } else {
                deflater.deflateAsync(function(data) {
                  compressedData = Buffer.alloc(data.length);
                  _centralHeader.compressedSize = data.length;
                  data.copy(compressedData);
                  callback && callback(compressedData);
                });
              }
              deflater = null;
              break;
          }
        } else if (async && callback) {
          callback(Buffer.alloc(0));
        } else {
          return Buffer.alloc(0);
        }
      }
      function readUInt64LE(buffer, offset) {
        return (buffer.readUInt32LE(offset + 4) << 4) + buffer.readUInt32LE(offset);
      }
      function parseExtra(data) {
        try {
          var offset = 0;
          var signature, size, part;
          while (offset + 4 < data.length) {
            signature = data.readUInt16LE(offset);
            offset += 2;
            size = data.readUInt16LE(offset);
            offset += 2;
            part = data.slice(offset, offset + size);
            offset += size;
            if (Constants.ID_ZIP64 === signature) {
              parseZip64ExtendedInformation(part);
            }
          }
        } catch (error) {
          throw Utils.Errors.EXTRA_FIELD_PARSE_ERROR();
        }
      }
      function parseZip64ExtendedInformation(data) {
        var size, compressedSize, offset, diskNumStart;
        if (data.length >= Constants.EF_ZIP64_SCOMP) {
          size = readUInt64LE(data, Constants.EF_ZIP64_SUNCOMP);
          if (_centralHeader.size === Constants.EF_ZIP64_OR_32) {
            _centralHeader.size = size;
          }
        }
        if (data.length >= Constants.EF_ZIP64_RHO) {
          compressedSize = readUInt64LE(data, Constants.EF_ZIP64_SCOMP);
          if (_centralHeader.compressedSize === Constants.EF_ZIP64_OR_32) {
            _centralHeader.compressedSize = compressedSize;
          }
        }
        if (data.length >= Constants.EF_ZIP64_DSN) {
          offset = readUInt64LE(data, Constants.EF_ZIP64_RHO);
          if (_centralHeader.offset === Constants.EF_ZIP64_OR_32) {
            _centralHeader.offset = offset;
          }
        }
        if (data.length >= Constants.EF_ZIP64_DSN + 4) {
          diskNumStart = data.readUInt32LE(Constants.EF_ZIP64_DSN);
          if (_centralHeader.diskNumStart === Constants.EF_ZIP64_OR_16) {
            _centralHeader.diskNumStart = diskNumStart;
          }
        }
      }
      return {
        get entryName() {
          return decoder.decode(_entryName);
        },
        get rawEntryName() {
          return _entryName;
        },
        set entryName(val) {
          _entryName = Utils.toBuffer(val, decoder.encode);
          var lastChar = _entryName[_entryName.length - 1];
          _isDirectory = lastChar === 47 || lastChar === 92;
          _centralHeader.fileNameLength = _entryName.length;
        },
        get efs() {
          if (typeof _efs === "function") {
            return _efs(this.entryName);
          } else {
            return _efs;
          }
        },
        get extra() {
          return _extra;
        },
        set extra(val) {
          _extra = val;
          _centralHeader.extraLength = val.length;
          parseExtra(val);
        },
        get comment() {
          return decoder.decode(_comment);
        },
        set comment(val) {
          _comment = Utils.toBuffer(val, decoder.encode);
          _centralHeader.commentLength = _comment.length;
          if (_comment.length > 65535) throw Utils.Errors.COMMENT_TOO_LONG();
        },
        get name() {
          var n = decoder.decode(_entryName);
          return _isDirectory ? n.substr(n.length - 1).split("/").pop() : n.split("/").pop();
        },
        get isDirectory() {
          return _isDirectory;
        },
        getCompressedData: function() {
          return compress(false, null);
        },
        getCompressedDataAsync: function(callback) {
          compress(true, callback);
        },
        setData: function(value) {
          uncompressedData = Utils.toBuffer(value, Utils.decoder.encode);
          if (!_isDirectory && uncompressedData.length) {
            _centralHeader.size = uncompressedData.length;
            _centralHeader.method = Utils.Constants.DEFLATED;
            _centralHeader.crc = Utils.crc32(value);
            _centralHeader.changed = true;
          } else {
            _centralHeader.method = Utils.Constants.STORED;
          }
        },
        getData: function(pass) {
          if (_centralHeader.changed) {
            return uncompressedData;
          } else {
            return decompress(false, null, pass);
          }
        },
        getDataAsync: function(callback, pass) {
          if (_centralHeader.changed) {
            callback(uncompressedData);
          } else {
            decompress(true, callback, pass);
          }
        },
        set attr(attr) {
          _centralHeader.attr = attr;
        },
        get attr() {
          return _centralHeader.attr;
        },
        set header(data) {
          _centralHeader.loadFromBinary(data);
        },
        get header() {
          return _centralHeader;
        },
        packCentralHeader: function() {
          _centralHeader.flags_efs = this.efs;
          _centralHeader.extraLength = _extra.length;
          var header = _centralHeader.centralHeaderToBinary();
          var addpos = Utils.Constants.CENHDR;
          _entryName.copy(header, addpos);
          addpos += _entryName.length;
          _extra.copy(header, addpos);
          addpos += _centralHeader.extraLength;
          _comment.copy(header, addpos);
          return header;
        },
        packLocalHeader: function() {
          let addpos = 0;
          _centralHeader.flags_efs = this.efs;
          _centralHeader.extraLocalLength = _extralocal.length;
          const localHeaderBuf = _centralHeader.localHeaderToBinary();
          const localHeader = Buffer.alloc(localHeaderBuf.length + _entryName.length + _centralHeader.extraLocalLength);
          localHeaderBuf.copy(localHeader, addpos);
          addpos += localHeaderBuf.length;
          _entryName.copy(localHeader, addpos);
          addpos += _entryName.length;
          _extralocal.copy(localHeader, addpos);
          addpos += _extralocal.length;
          return localHeader;
        },
        toJSON: function() {
          const bytes = function(nr) {
            return "<" + (nr && nr.length + " bytes buffer" || "null") + ">";
          };
          return {
            entryName: this.entryName,
            name: this.name,
            comment: this.comment,
            isDirectory: this.isDirectory,
            header: _centralHeader.toJSON(),
            compressedData: bytes(input),
            data: bytes(uncompressedData)
          };
        },
        toString: function() {
          return JSON.stringify(this.toJSON(), null, "	");
        }
      };
    };
  }
});

// node_modules/adm-zip/zipFile.js
var require_zipFile = __commonJS({
  "node_modules/adm-zip/zipFile.js"(exports2, module2) {
    var ZipEntry = require_zipEntry();
    var Headers2 = require_headers();
    var Utils = require_util();
    module2.exports = function(inBuffer, options) {
      var entryList = [], entryTable = {}, _comment = Buffer.alloc(0), mainHeader = new Headers2.MainHeader(), loadedEntries = false;
      var password = null;
      const temporary = /* @__PURE__ */ new Set();
      const opts = options;
      const { noSort, decoder } = opts;
      if (inBuffer) {
        readMainHeader(opts.readEntries);
      } else {
        loadedEntries = true;
      }
      function makeTemporaryFolders() {
        const foldersList = /* @__PURE__ */ new Set();
        for (const elem of Object.keys(entryTable)) {
          const elements = elem.split("/");
          elements.pop();
          if (!elements.length) continue;
          for (let i2 = 0; i2 < elements.length; i2++) {
            const sub = elements.slice(0, i2 + 1).join("/") + "/";
            foldersList.add(sub);
          }
        }
        for (const elem of foldersList) {
          if (!(elem in entryTable)) {
            const tempfolder = new ZipEntry(opts);
            tempfolder.entryName = elem;
            tempfolder.attr = 16;
            tempfolder.temporary = true;
            entryList.push(tempfolder);
            entryTable[tempfolder.entryName] = tempfolder;
            temporary.add(tempfolder);
          }
        }
      }
      function readEntries() {
        loadedEntries = true;
        entryTable = {};
        if (mainHeader.diskEntries > (inBuffer.length - mainHeader.offset) / Utils.Constants.CENHDR) {
          throw Utils.Errors.DISK_ENTRY_TOO_LARGE();
        }
        entryList = new Array(mainHeader.diskEntries);
        var index = mainHeader.offset;
        for (var i2 = 0; i2 < entryList.length; i2++) {
          var tmp = index, entry = new ZipEntry(opts, inBuffer);
          entry.header = inBuffer.slice(tmp, tmp += Utils.Constants.CENHDR);
          entry.entryName = inBuffer.slice(tmp, tmp += entry.header.fileNameLength);
          if (entry.header.extraLength) {
            entry.extra = inBuffer.slice(tmp, tmp += entry.header.extraLength);
          }
          if (entry.header.commentLength) entry.comment = inBuffer.slice(tmp, tmp + entry.header.commentLength);
          index += entry.header.centralHeaderSize;
          entryList[i2] = entry;
          entryTable[entry.entryName] = entry;
        }
        temporary.clear();
        makeTemporaryFolders();
      }
      function readMainHeader(readNow) {
        var i2 = inBuffer.length - Utils.Constants.ENDHDR, max = Math.max(0, i2 - 65535), n = max, endStart = inBuffer.length, endOffset = -1, commentEnd = 0;
        const trailingSpace = typeof opts.trailingSpace === "boolean" ? opts.trailingSpace : false;
        if (trailingSpace) max = 0;
        for (i2; i2 >= n; i2--) {
          if (inBuffer[i2] !== 80) continue;
          if (inBuffer.readUInt32LE(i2) === Utils.Constants.ENDSIG) {
            endOffset = i2;
            commentEnd = i2;
            endStart = i2 + Utils.Constants.ENDHDR;
            n = i2 - Utils.Constants.END64HDR;
            continue;
          }
          if (inBuffer.readUInt32LE(i2) === Utils.Constants.END64SIG) {
            n = max;
            continue;
          }
          if (inBuffer.readUInt32LE(i2) === Utils.Constants.ZIP64SIG) {
            endOffset = i2;
            endStart = i2 + Utils.readBigUInt64LE(inBuffer, i2 + Utils.Constants.ZIP64SIZE) + Utils.Constants.ZIP64LEAD;
            break;
          }
        }
        if (endOffset == -1) throw Utils.Errors.INVALID_FORMAT();
        mainHeader.loadFromBinary(inBuffer.slice(endOffset, endStart));
        if (mainHeader.commentLength) {
          _comment = inBuffer.slice(commentEnd + Utils.Constants.ENDHDR);
        }
        if (readNow) readEntries();
      }
      function sortEntries() {
        if (entryList.length > 1 && !noSort) {
          entryList.sort((a, b) => a.entryName.toLowerCase().localeCompare(b.entryName.toLowerCase()));
        }
      }
      return {
        /**
         * Returns an array of ZipEntry objects existent in the current opened archive
         * @return Array
         */
        get entries() {
          if (!loadedEntries) {
            readEntries();
          }
          return entryList.filter((e2) => !temporary.has(e2));
        },
        /**
         * Archive comment
         * @return {String}
         */
        get comment() {
          return decoder.decode(_comment);
        },
        set comment(val) {
          _comment = Utils.toBuffer(val, decoder.encode);
          mainHeader.commentLength = _comment.length;
        },
        getEntryCount: function() {
          if (!loadedEntries) {
            return mainHeader.diskEntries;
          }
          return entryList.length;
        },
        forEach: function(callback) {
          this.entries.forEach(callback);
        },
        /**
         * Returns a reference to the entry with the given name or null if entry is inexistent
         *
         * @param entryName
         * @return ZipEntry
         */
        getEntry: function(entryName) {
          if (!loadedEntries) {
            readEntries();
          }
          return entryTable[entryName] || null;
        },
        /**
         * Adds the given entry to the entry list
         *
         * @param entry
         */
        setEntry: function(entry) {
          if (!loadedEntries) {
            readEntries();
          }
          entryList.push(entry);
          entryTable[entry.entryName] = entry;
          mainHeader.totalEntries = entryList.length;
        },
        /**
         * Removes the file with the given name from the entry list.
         *
         * If the entry is a directory, then all nested files and directories will be removed
         * @param entryName
         * @returns {void}
         */
        deleteFile: function(entryName, withsubfolders = true) {
          if (!loadedEntries) {
            readEntries();
          }
          const entry = entryTable[entryName];
          const list = this.getEntryChildren(entry, withsubfolders).map((child) => child.entryName);
          list.forEach(this.deleteEntry);
        },
        /**
         * Removes the entry with the given name from the entry list.
         *
         * @param {string} entryName
         * @returns {void}
         */
        deleteEntry: function(entryName) {
          if (!loadedEntries) {
            readEntries();
          }
          const entry = entryTable[entryName];
          const index = entryList.indexOf(entry);
          if (index >= 0) {
            entryList.splice(index, 1);
            delete entryTable[entryName];
            mainHeader.totalEntries = entryList.length;
          }
        },
        /**
         *  Iterates and returns all nested files and directories of the given entry
         *
         * @param entry
         * @return Array
         */
        getEntryChildren: function(entry, subfolders = true) {
          if (!loadedEntries) {
            readEntries();
          }
          if (typeof entry === "object") {
            if (entry.isDirectory && subfolders) {
              const list = [];
              const name = entry.entryName;
              for (const zipEntry of entryList) {
                if (zipEntry.entryName.startsWith(name)) {
                  list.push(zipEntry);
                }
              }
              return list;
            } else {
              return [entry];
            }
          }
          return [];
        },
        /**
         *  How many child elements entry has
         *
         * @param {ZipEntry} entry
         * @return {integer}
         */
        getChildCount: function(entry) {
          if (entry && entry.isDirectory) {
            const list = this.getEntryChildren(entry);
            return list.includes(entry) ? list.length - 1 : list.length;
          }
          return 0;
        },
        /**
         * Returns the zip file
         *
         * @return Buffer
         */
        compressToBuffer: function() {
          if (!loadedEntries) {
            readEntries();
          }
          sortEntries();
          const dataBlock = [];
          const headerBlocks = [];
          let totalSize = 0;
          let dindex = 0;
          mainHeader.size = 0;
          mainHeader.offset = 0;
          let totalEntries = 0;
          for (const entry of this.entries) {
            const compressedData = entry.getCompressedData();
            entry.header.offset = dindex;
            const localHeader = entry.packLocalHeader();
            const dataLength = localHeader.length + compressedData.length;
            dindex += dataLength;
            dataBlock.push(localHeader);
            dataBlock.push(compressedData);
            const centralHeader = entry.packCentralHeader();
            headerBlocks.push(centralHeader);
            mainHeader.size += centralHeader.length;
            totalSize += dataLength + centralHeader.length;
            totalEntries++;
          }
          totalSize += mainHeader.mainHeaderSize;
          mainHeader.offset = dindex;
          mainHeader.totalEntries = totalEntries;
          dindex = 0;
          const outBuffer = Buffer.alloc(totalSize);
          for (const content of dataBlock) {
            content.copy(outBuffer, dindex);
            dindex += content.length;
          }
          for (const content of headerBlocks) {
            content.copy(outBuffer, dindex);
            dindex += content.length;
          }
          const mh = mainHeader.toBinary();
          if (_comment) {
            _comment.copy(mh, Utils.Constants.ENDHDR);
          }
          mh.copy(outBuffer, dindex);
          inBuffer = outBuffer;
          loadedEntries = false;
          return outBuffer;
        },
        toAsyncBuffer: function(onSuccess, onFail, onItemStart, onItemEnd) {
          try {
            if (!loadedEntries) {
              readEntries();
            }
            sortEntries();
            const dataBlock = [];
            const centralHeaders = [];
            let totalSize = 0;
            let dindex = 0;
            let totalEntries = 0;
            mainHeader.size = 0;
            mainHeader.offset = 0;
            const compress2Buffer = function(entryLists) {
              if (entryLists.length > 0) {
                const entry = entryLists.shift();
                const name = entry.entryName + entry.extra.toString();
                if (onItemStart) onItemStart(name);
                entry.getCompressedDataAsync(function(compressedData) {
                  if (onItemEnd) onItemEnd(name);
                  entry.header.offset = dindex;
                  const localHeader = entry.packLocalHeader();
                  const dataLength = localHeader.length + compressedData.length;
                  dindex += dataLength;
                  dataBlock.push(localHeader);
                  dataBlock.push(compressedData);
                  const centalHeader = entry.packCentralHeader();
                  centralHeaders.push(centalHeader);
                  mainHeader.size += centalHeader.length;
                  totalSize += dataLength + centalHeader.length;
                  totalEntries++;
                  compress2Buffer(entryLists);
                });
              } else {
                totalSize += mainHeader.mainHeaderSize;
                mainHeader.offset = dindex;
                mainHeader.totalEntries = totalEntries;
                dindex = 0;
                const outBuffer = Buffer.alloc(totalSize);
                dataBlock.forEach(function(content) {
                  content.copy(outBuffer, dindex);
                  dindex += content.length;
                });
                centralHeaders.forEach(function(content) {
                  content.copy(outBuffer, dindex);
                  dindex += content.length;
                });
                const mh = mainHeader.toBinary();
                if (_comment) {
                  _comment.copy(mh, Utils.Constants.ENDHDR);
                }
                mh.copy(outBuffer, dindex);
                inBuffer = outBuffer;
                loadedEntries = false;
                onSuccess(outBuffer);
              }
            };
            compress2Buffer(Array.from(this.entries));
          } catch (e2) {
            onFail(e2);
          }
        }
      };
    };
  }
});

// node_modules/adm-zip/adm-zip.js
var require_adm_zip = __commonJS({
  "node_modules/adm-zip/adm-zip.js"(exports2, module2) {
    var Utils = require_util();
    var pth = require("path");
    var ZipEntry = require_zipEntry();
    var ZipFile = require_zipFile();
    var get_Bool = (...val) => Utils.findLast(val, (c) => typeof c === "boolean");
    var get_Str = (...val) => Utils.findLast(val, (c) => typeof c === "string");
    var get_Fun = (...val) => Utils.findLast(val, (c) => typeof c === "function");
    var defaultOptions = {
      // option "noSort" : if true it disables files sorting
      noSort: false,
      // read entries during load (initial loading may be slower)
      readEntries: false,
      // default method is none
      method: Utils.Constants.NONE,
      // file system
      fs: null
    };
    module2.exports = function(input, options) {
      let inBuffer = null;
      const opts = Object.assign(/* @__PURE__ */ Object.create(null), defaultOptions);
      if (input && "object" === typeof input) {
        if (!(input instanceof Uint8Array)) {
          Object.assign(opts, input);
          input = opts.input ? opts.input : void 0;
          if (opts.input) delete opts.input;
        }
        if (Buffer.isBuffer(input)) {
          inBuffer = input;
          opts.method = Utils.Constants.BUFFER;
          input = void 0;
        }
      }
      Object.assign(opts, options);
      const filetools = new Utils(opts);
      if (typeof opts.decoder !== "object" || typeof opts.decoder.encode !== "function" || typeof opts.decoder.decode !== "function") {
        opts.decoder = Utils.decoder;
      }
      if (input && "string" === typeof input) {
        if (filetools.fs.existsSync(input)) {
          opts.method = Utils.Constants.FILE;
          opts.filename = input;
          inBuffer = filetools.fs.readFileSync(input);
        } else {
          throw Utils.Errors.INVALID_FILENAME();
        }
      }
      const _zip = new ZipFile(inBuffer, opts);
      const { canonical, sanitize, zipnamefix } = Utils;
      function getEntry(entry) {
        if (entry && _zip) {
          var item;
          if (typeof entry === "string") item = _zip.getEntry(pth.posix.normalize(entry));
          if (typeof entry === "object" && typeof entry.entryName !== "undefined" && typeof entry.header !== "undefined") item = _zip.getEntry(entry.entryName);
          if (item) {
            return item;
          }
        }
        return null;
      }
      function fixPath(zipPath) {
        const { join, normalize, sep } = pth.posix;
        return join(".", normalize(sep + zipPath.split("\\").join(sep) + sep));
      }
      function filenameFilter(filterfn) {
        if (filterfn instanceof RegExp) {
          return /* @__PURE__ */ (function(rx) {
            return function(filename) {
              return rx.test(filename);
            };
          })(filterfn);
        } else if ("function" !== typeof filterfn) {
          return () => true;
        }
        return filterfn;
      }
      const relativePath = (local, entry) => {
        let lastChar = entry.slice(-1);
        lastChar = lastChar === filetools.sep ? filetools.sep : "";
        return pth.relative(local, entry) + lastChar;
      };
      return {
        /**
         * Extracts the given entry from the archive and returns the content as a Buffer object
         * @param {ZipEntry|string} entry ZipEntry object or String with the full path of the entry
         * @param {Buffer|string} [pass] - password
         * @return Buffer or Null in case of error
         */
        readFile: function(entry, pass) {
          var item = getEntry(entry);
          return item && item.getData(pass) || null;
        },
        /**
         * Returns how many child elements has on entry (directories) on files it is always 0
         * @param {ZipEntry|string} entry ZipEntry object or String with the full path of the entry
         * @returns {integer}
         */
        childCount: function(entry) {
          const item = getEntry(entry);
          if (item) {
            return _zip.getChildCount(item);
          }
        },
        /**
         * Asynchronous readFile
         * @param {ZipEntry|string} entry ZipEntry object or String with the full path of the entry
         * @param {callback} callback
         *
         * @return Buffer or Null in case of error
         */
        readFileAsync: function(entry, callback) {
          var item = getEntry(entry);
          if (item) {
            item.getDataAsync(callback);
          } else {
            callback(null, "getEntry failed for:" + entry);
          }
        },
        /**
         * Extracts the given entry from the archive and returns the content as plain text in the given encoding
         * @param {ZipEntry|string} entry - ZipEntry object or String with the full path of the entry
         * @param {string} encoding - Optional. If no encoding is specified utf8 is used
         *
         * @return String
         */
        readAsText: function(entry, encoding) {
          var item = getEntry(entry);
          if (item) {
            var data = item.getData();
            if (data && data.length) {
              return data.toString(encoding || "utf8");
            }
          }
          return "";
        },
        /**
         * Asynchronous readAsText
         * @param {ZipEntry|string} entry ZipEntry object or String with the full path of the entry
         * @param {callback} callback
         * @param {string} [encoding] - Optional. If no encoding is specified utf8 is used
         *
         * @return String
         */
        readAsTextAsync: function(entry, callback, encoding) {
          var item = getEntry(entry);
          if (item) {
            item.getDataAsync(function(data, err) {
              if (err) {
                callback(data, err);
                return;
              }
              if (data && data.length) {
                callback(data.toString(encoding || "utf8"));
              } else {
                callback("");
              }
            });
          } else {
            callback("");
          }
        },
        /**
         * Remove the entry from the file or the entry and all it's nested directories and files if the given entry is a directory
         *
         * @param {ZipEntry|string} entry
         * @returns {void}
         */
        deleteFile: function(entry, withsubfolders = true) {
          var item = getEntry(entry);
          if (item) {
            _zip.deleteFile(item.entryName, withsubfolders);
          }
        },
        /**
         * Remove the entry from the file or directory without affecting any nested entries
         *
         * @param {ZipEntry|string} entry
         * @returns {void}
         */
        deleteEntry: function(entry) {
          var item = getEntry(entry);
          if (item) {
            _zip.deleteEntry(item.entryName);
          }
        },
        /**
         * Adds a comment to the zip. The zip must be rewritten after adding the comment.
         *
         * @param {string} comment
         */
        addZipComment: function(comment) {
          _zip.comment = comment;
        },
        /**
         * Returns the zip comment
         *
         * @return String
         */
        getZipComment: function() {
          return _zip.comment || "";
        },
        /**
         * Adds a comment to a specified zipEntry. The zip must be rewritten after adding the comment
         * The comment cannot exceed 65535 characters in length
         *
         * @param {ZipEntry} entry
         * @param {string} comment
         */
        addZipEntryComment: function(entry, comment) {
          var item = getEntry(entry);
          if (item) {
            item.comment = comment;
          }
        },
        /**
         * Returns the comment of the specified entry
         *
         * @param {ZipEntry} entry
         * @return String
         */
        getZipEntryComment: function(entry) {
          var item = getEntry(entry);
          if (item) {
            return item.comment || "";
          }
          return "";
        },
        /**
         * Updates the content of an existing entry inside the archive. The zip must be rewritten after updating the content
         *
         * @param {ZipEntry} entry
         * @param {Buffer} content
         */
        updateFile: function(entry, content) {
          var item = getEntry(entry);
          if (item) {
            item.setData(content);
          }
        },
        /**
         * Adds a file from the disk to the archive
         *
         * @param {string} localPath File to add to zip
         * @param {string} [zipPath] Optional path inside the zip
         * @param {string} [zipName] Optional name for the file
         * @param {string} [comment] Optional file comment
         */
        addLocalFile: function(localPath2, zipPath, zipName, comment) {
          if (filetools.fs.existsSync(localPath2)) {
            zipPath = zipPath ? fixPath(zipPath) : "";
            const p = pth.win32.basename(pth.win32.normalize(localPath2));
            zipPath += zipName ? zipName : p;
            const _attr = filetools.fs.statSync(localPath2);
            const data = _attr.isFile() ? filetools.fs.readFileSync(localPath2) : Buffer.alloc(0);
            if (_attr.isDirectory()) zipPath += filetools.sep;
            this.addFile(zipPath, data, comment, _attr);
          } else {
            throw Utils.Errors.FILE_NOT_FOUND(localPath2);
          }
        },
        /**
         * Callback for showing if everything was done.
         *
         * @callback doneCallback
         * @param {Error} err - Error object
         * @param {boolean} done - was request fully completed
         */
        /**
         * Adds a file from the disk to the archive
         *
         * @param {(object|string)} options - options object, if it is string it us used as localPath.
         * @param {string} options.localPath - Local path to the file.
         * @param {string} [options.comment] - Optional file comment.
         * @param {string} [options.zipPath] - Optional path inside the zip
         * @param {string} [options.zipName] - Optional name for the file
         * @param {doneCallback} callback - The callback that handles the response.
         */
        addLocalFileAsync: function(options2, callback) {
          options2 = typeof options2 === "object" ? options2 : { localPath: options2 };
          const localPath2 = pth.resolve(options2.localPath);
          const { comment } = options2;
          let { zipPath, zipName } = options2;
          const self2 = this;
          filetools.fs.stat(localPath2, function(err, stats) {
            if (err) return callback(err, false);
            zipPath = zipPath ? fixPath(zipPath) : "";
            const p = pth.win32.basename(pth.win32.normalize(localPath2));
            zipPath += zipName ? zipName : p;
            if (stats.isFile()) {
              filetools.fs.readFile(localPath2, function(err2, data) {
                if (err2) return callback(err2, false);
                self2.addFile(zipPath, data, comment, stats);
                return setImmediate(callback, void 0, true);
              });
            } else if (stats.isDirectory()) {
              zipPath += filetools.sep;
              self2.addFile(zipPath, Buffer.alloc(0), comment, stats);
              return setImmediate(callback, void 0, true);
            }
          });
        },
        /**
         * Adds a local directory and all its nested files and directories to the archive
         *
         * @param {string} localPath - local path to the folder
         * @param {string} [zipPath] - optional path inside zip
         * @param {(RegExp|function)} [filter] - optional RegExp or Function if files match will be included.
         */
        addLocalFolder: function(localPath2, zipPath, filter) {
          filter = filenameFilter(filter);
          zipPath = zipPath ? fixPath(zipPath) : "";
          localPath2 = pth.normalize(localPath2);
          if (filetools.fs.existsSync(localPath2)) {
            const items = filetools.findFiles(localPath2);
            const self2 = this;
            if (items.length) {
              for (const filepath of items) {
                const p = pth.join(zipPath, relativePath(localPath2, filepath));
                if (filter(p)) {
                  self2.addLocalFile(filepath, pth.dirname(p));
                }
              }
            }
          } else {
            throw Utils.Errors.FILE_NOT_FOUND(localPath2);
          }
        },
        /**
         * Asynchronous addLocalFolder
         * @param {string} localPath
         * @param {callback} callback
         * @param {string} [zipPath] optional path inside zip
         * @param {RegExp|function} [filter] optional RegExp or Function if files match will
         *               be included.
         */
        addLocalFolderAsync: function(localPath2, callback, zipPath, filter) {
          filter = filenameFilter(filter);
          zipPath = zipPath ? fixPath(zipPath) : "";
          localPath2 = pth.normalize(localPath2);
          var self2 = this;
          filetools.fs.open(localPath2, "r", function(err) {
            if (err && err.code === "ENOENT") {
              callback(void 0, Utils.Errors.FILE_NOT_FOUND(localPath2));
            } else if (err) {
              callback(void 0, err);
            } else {
              var items = filetools.findFiles(localPath2);
              var i2 = -1;
              var next = function() {
                i2 += 1;
                if (i2 < items.length) {
                  var filepath = items[i2];
                  var p = relativePath(localPath2, filepath).split("\\").join("/");
                  p = p.normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/[^\x20-\x7E]/g, "");
                  if (filter(p)) {
                    filetools.fs.stat(filepath, function(er0, stats) {
                      if (er0) callback(void 0, er0);
                      if (stats.isFile()) {
                        filetools.fs.readFile(filepath, function(er1, data) {
                          if (er1) {
                            callback(void 0, er1);
                          } else {
                            self2.addFile(zipPath + p, data, "", stats);
                            next();
                          }
                        });
                      } else {
                        self2.addFile(zipPath + p + "/", Buffer.alloc(0), "", stats);
                        next();
                      }
                    });
                  } else {
                    process.nextTick(() => {
                      next();
                    });
                  }
                } else {
                  callback(true, void 0);
                }
              };
              next();
            }
          });
        },
        /**
         * Adds a local directory and all its nested files and directories to the archive
         *
         * @param {object | string} options - options object, if it is string it us used as localPath.
         * @param {string} options.localPath - Local path to the folder.
         * @param {string} [options.zipPath] - optional path inside zip.
         * @param {RegExp|function} [options.filter] - optional RegExp or Function if files match will be included.
         * @param {function|string} [options.namefix] - optional function to help fix filename
         * @param {doneCallback} callback - The callback that handles the response.
         *
         */
        addLocalFolderAsync2: function(options2, callback) {
          const self2 = this;
          options2 = typeof options2 === "object" ? options2 : { localPath: options2 };
          localPath = pth.resolve(fixPath(options2.localPath));
          let { zipPath, filter, namefix } = options2;
          if (filter instanceof RegExp) {
            filter = /* @__PURE__ */ (function(rx) {
              return function(filename) {
                return rx.test(filename);
              };
            })(filter);
          } else if ("function" !== typeof filter) {
            filter = function() {
              return true;
            };
          }
          zipPath = zipPath ? fixPath(zipPath) : "";
          if (namefix == "latin1") {
            namefix = (str) => str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/[^\x20-\x7E]/g, "");
          }
          if (typeof namefix !== "function") namefix = (str) => str;
          const relPathFix = (entry) => pth.join(zipPath, namefix(relativePath(localPath, entry)));
          const fileNameFix = (entry) => pth.win32.basename(pth.win32.normalize(namefix(entry)));
          filetools.fs.open(localPath, "r", function(err) {
            if (err && err.code === "ENOENT") {
              callback(void 0, Utils.Errors.FILE_NOT_FOUND(localPath));
            } else if (err) {
              callback(void 0, err);
            } else {
              filetools.findFilesAsync(localPath, function(err2, fileEntries) {
                if (err2) return callback(err2);
                fileEntries = fileEntries.filter((dir) => filter(relPathFix(dir)));
                if (!fileEntries.length) callback(void 0, false);
                setImmediate(
                  fileEntries.reverse().reduce(function(next, entry) {
                    return function(err3, done) {
                      if (err3 || done === false) return setImmediate(next, err3, false);
                      self2.addLocalFileAsync(
                        {
                          localPath: entry,
                          zipPath: pth.dirname(relPathFix(entry)),
                          zipName: fileNameFix(entry)
                        },
                        next
                      );
                    };
                  }, callback)
                );
              });
            }
          });
        },
        /**
         * Adds a local directory and all its nested files and directories to the archive
         *
         * @param {string} localPath - path where files will be extracted
         * @param {object} props - optional properties
         * @param {string} [props.zipPath] - optional path inside zip
         * @param {RegExp|function} [props.filter] - optional RegExp or Function if files match will be included.
         * @param {function|string} [props.namefix] - optional function to help fix filename
         */
        addLocalFolderPromise: function(localPath2, props) {
          return new Promise((resolve, reject) => {
            this.addLocalFolderAsync2(Object.assign({ localPath: localPath2 }, props), (err, done) => {
              if (err) reject(err);
              if (done) resolve(this);
            });
          });
        },
        /**
         * Allows you to create a entry (file or directory) in the zip file.
         * If you want to create a directory the entryName must end in / and a null buffer should be provided.
         * Comment and attributes are optional
         *
         * @param {string} entryName
         * @param {Buffer | string} content - file content as buffer or utf8 coded string
         * @param {string} [comment] - file comment
         * @param {number | object} [attr] - number as unix file permissions, object as filesystem Stats object
         */
        addFile: function(entryName, content, comment, attr) {
          entryName = zipnamefix(entryName);
          let entry = getEntry(entryName);
          const update = entry != null;
          if (!update) {
            entry = new ZipEntry(opts);
            entry.entryName = entryName;
          }
          entry.comment = comment || "";
          const isStat = "object" === typeof attr && attr instanceof filetools.fs.Stats;
          if (isStat) {
            entry.header.time = attr.mtime;
          }
          var fileattr = entry.isDirectory ? 16 : 0;
          let unix = entry.isDirectory ? 16384 : 32768;
          if (isStat) {
            unix |= 4095 & attr.mode;
          } else if ("number" === typeof attr) {
            unix |= 4095 & attr;
          } else {
            unix |= entry.isDirectory ? 493 : 420;
          }
          fileattr = (fileattr | unix << 16) >>> 0;
          entry.attr = fileattr;
          entry.setData(content);
          if (!update) _zip.setEntry(entry);
          return entry;
        },
        /**
         * Returns an array of ZipEntry objects representing the files and folders inside the archive
         *
         * @param {string} [password]
         * @returns Array
         */
        getEntries: function(password) {
          _zip.password = password;
          return _zip ? _zip.entries : [];
        },
        /**
         * Returns a ZipEntry object representing the file or folder specified by ``name``.
         *
         * @param {string} name
         * @return ZipEntry
         */
        getEntry: function(name) {
          return getEntry(name);
        },
        getEntryCount: function() {
          return _zip.getEntryCount();
        },
        forEach: function(callback) {
          return _zip.forEach(callback);
        },
        /**
         * Extracts the given entry to the given targetPath
         * If the entry is a directory inside the archive, the entire directory and it's subdirectories will be extracted
         *
         * @param {string|ZipEntry} entry - ZipEntry object or String with the full path of the entry
         * @param {string} targetPath - Target folder where to write the file
         * @param {boolean} [maintainEntryPath=true] - If maintainEntryPath is true and the entry is inside a folder, the entry folder will be created in targetPath as well. Default is TRUE
         * @param {boolean} [overwrite=false] - If the file already exists at the target path, the file will be overwriten if this is true.
         * @param {boolean} [keepOriginalPermission=false] - The file will be set as the permission from the entry if this is true.
         * @param {string} [outFileName] - String If set will override the filename of the extracted file (Only works if the entry is a file)
         *
         * @return Boolean
         */
        extractEntryTo: function(entry, targetPath, maintainEntryPath, overwrite, keepOriginalPermission, outFileName) {
          overwrite = get_Bool(false, overwrite);
          keepOriginalPermission = get_Bool(false, keepOriginalPermission);
          maintainEntryPath = get_Bool(true, maintainEntryPath);
          outFileName = get_Str(keepOriginalPermission, outFileName);
          var item = getEntry(entry);
          if (!item) {
            throw Utils.Errors.NO_ENTRY();
          }
          var entryName = canonical(item.entryName);
          var target = sanitize(targetPath, outFileName && !item.isDirectory ? outFileName : maintainEntryPath ? entryName : pth.basename(entryName));
          if (item.isDirectory) {
            var children = _zip.getEntryChildren(item);
            children.forEach(function(child) {
              if (child.isDirectory) return;
              var content2 = child.getData();
              if (!content2) {
                throw Utils.Errors.CANT_EXTRACT_FILE();
              }
              var name = canonical(child.entryName);
              var childName = sanitize(targetPath, maintainEntryPath ? name : pth.basename(name));
              const fileAttr2 = keepOriginalPermission ? child.header.fileAttr : void 0;
              filetools.writeFileTo(childName, content2, overwrite, fileAttr2);
            });
            return true;
          }
          var content = item.getData(_zip.password);
          if (!content) throw Utils.Errors.CANT_EXTRACT_FILE();
          if (filetools.fs.existsSync(target) && !overwrite) {
            throw Utils.Errors.CANT_OVERRIDE();
          }
          const fileAttr = keepOriginalPermission ? entry.header.fileAttr : void 0;
          filetools.writeFileTo(target, content, overwrite, fileAttr);
          return true;
        },
        /**
         * Test the archive
         * @param {string} [pass]
         */
        test: function(pass) {
          if (!_zip) {
            return false;
          }
          for (var entry in _zip.entries) {
            try {
              if (entry.isDirectory) {
                continue;
              }
              var content = _zip.entries[entry].getData(pass);
              if (!content) {
                return false;
              }
            } catch (err) {
              return false;
            }
          }
          return true;
        },
        /**
         * Extracts the entire archive to the given location
         *
         * @param {string} targetPath Target location
         * @param {boolean} [overwrite=false] If the file already exists at the target path, the file will be overwriten if this is true.
         *                  Default is FALSE
         * @param {boolean} [keepOriginalPermission=false] The file will be set as the permission from the entry if this is true.
         *                  Default is FALSE
         * @param {string|Buffer} [pass] password
         */
        extractAllTo: function(targetPath, overwrite, keepOriginalPermission, pass) {
          keepOriginalPermission = get_Bool(false, keepOriginalPermission);
          pass = get_Str(keepOriginalPermission, pass);
          overwrite = get_Bool(false, overwrite);
          if (!_zip) throw Utils.Errors.NO_ZIP();
          _zip.entries.forEach(function(entry) {
            var entryName = sanitize(targetPath, canonical(entry.entryName));
            if (entry.isDirectory) {
              filetools.makeDir(entryName);
              return;
            }
            var content = entry.getData(pass);
            if (!content) {
              throw Utils.Errors.CANT_EXTRACT_FILE();
            }
            const fileAttr = keepOriginalPermission ? entry.header.fileAttr : void 0;
            filetools.writeFileTo(entryName, content, overwrite, fileAttr);
            try {
              filetools.fs.utimesSync(entryName, entry.header.time, entry.header.time);
            } catch (err) {
              throw Utils.Errors.CANT_EXTRACT_FILE();
            }
          });
        },
        /**
         * Asynchronous extractAllTo
         *
         * @param {string} targetPath Target location
         * @param {boolean} [overwrite=false] If the file already exists at the target path, the file will be overwriten if this is true.
         *                  Default is FALSE
         * @param {boolean} [keepOriginalPermission=false] The file will be set as the permission from the entry if this is true.
         *                  Default is FALSE
         * @param {function} callback The callback will be executed when all entries are extracted successfully or any error is thrown.
         */
        extractAllToAsync: function(targetPath, overwrite, keepOriginalPermission, callback) {
          callback = get_Fun(overwrite, keepOriginalPermission, callback);
          keepOriginalPermission = get_Bool(false, keepOriginalPermission);
          overwrite = get_Bool(false, overwrite);
          if (!callback) {
            return new Promise((resolve, reject) => {
              this.extractAllToAsync(targetPath, overwrite, keepOriginalPermission, function(err) {
                if (err) {
                  reject(err);
                } else {
                  resolve(this);
                }
              });
            });
          }
          if (!_zip) {
            callback(Utils.Errors.NO_ZIP());
            return;
          }
          targetPath = pth.resolve(targetPath);
          const getPath = (entry) => sanitize(targetPath, pth.normalize(canonical(entry.entryName)));
          const getError = (msg, file) => new Error(msg + ': "' + file + '"');
          const dirEntries = [];
          const fileEntries = [];
          _zip.entries.forEach((e2) => {
            if (e2.isDirectory) {
              dirEntries.push(e2);
            } else {
              fileEntries.push(e2);
            }
          });
          for (const entry of dirEntries) {
            const dirPath = getPath(entry);
            const dirAttr = keepOriginalPermission ? entry.header.fileAttr : void 0;
            try {
              filetools.makeDir(dirPath);
              if (dirAttr) filetools.fs.chmodSync(dirPath, dirAttr);
              filetools.fs.utimesSync(dirPath, entry.header.time, entry.header.time);
            } catch (er) {
              callback(getError("Unable to create folder", dirPath));
            }
          }
          fileEntries.reverse().reduce(function(next, entry) {
            return function(err) {
              if (err) {
                next(err);
              } else {
                const entryName = pth.normalize(canonical(entry.entryName));
                const filePath = sanitize(targetPath, entryName);
                entry.getDataAsync(function(content, err_1) {
                  if (err_1) {
                    next(err_1);
                  } else if (!content) {
                    next(Utils.Errors.CANT_EXTRACT_FILE());
                  } else {
                    const fileAttr = keepOriginalPermission ? entry.header.fileAttr : void 0;
                    filetools.writeFileToAsync(filePath, content, overwrite, fileAttr, function(succ) {
                      if (!succ) {
                        next(getError("Unable to write file", filePath));
                      }
                      filetools.fs.utimes(filePath, entry.header.time, entry.header.time, function(err_2) {
                        if (err_2) {
                          next(getError("Unable to set times", filePath));
                        } else {
                          next();
                        }
                      });
                    });
                  }
                });
              }
            };
          }, callback)();
        },
        /**
         * Writes the newly created zip file to disk at the specified location or if a zip was opened and no ``targetFileName`` is provided, it will overwrite the opened zip
         *
         * @param {string} targetFileName
         * @param {function} callback
         */
        writeZip: function(targetFileName, callback) {
          if (arguments.length === 1) {
            if (typeof targetFileName === "function") {
              callback = targetFileName;
              targetFileName = "";
            }
          }
          if (!targetFileName && opts.filename) {
            targetFileName = opts.filename;
          }
          if (!targetFileName) return;
          var zipData = _zip.compressToBuffer();
          if (zipData) {
            var ok = filetools.writeFileTo(targetFileName, zipData, true);
            if (typeof callback === "function") callback(!ok ? new Error("failed") : null, "");
          }
        },
        /**
                 *
                 * @param {string} targetFileName
                 * @param {object} [props]
                 * @param {boolean} [props.overwrite=true] If the file already exists at the target path, the file will be overwriten if this is true.
                 * @param {boolean} [props.perm] The file will be set as the permission from the entry if this is true.
        
                 * @returns {Promise<void>}
                 */
        writeZipPromise: function(targetFileName, props) {
          const { overwrite, perm } = Object.assign({ overwrite: true }, props);
          return new Promise((resolve, reject) => {
            if (!targetFileName && opts.filename) targetFileName = opts.filename;
            if (!targetFileName) reject("ADM-ZIP: ZIP File Name Missing");
            this.toBufferPromise().then((zipData) => {
              const ret = (done) => done ? resolve(done) : reject("ADM-ZIP: Wasn't able to write zip file");
              filetools.writeFileToAsync(targetFileName, zipData, overwrite, perm, ret);
            }, reject);
          });
        },
        /**
         * @returns {Promise<Buffer>} A promise to the Buffer.
         */
        toBufferPromise: function() {
          return new Promise((resolve, reject) => {
            _zip.toAsyncBuffer(resolve, reject);
          });
        },
        /**
         * Returns the content of the entire zip file as a Buffer object
         *
         * @prop {function} [onSuccess]
         * @prop {function} [onFail]
         * @prop {function} [onItemStart]
         * @prop {function} [onItemEnd]
         * @returns {Buffer}
         */
        toBuffer: function(onSuccess, onFail, onItemStart, onItemEnd) {
          if (typeof onSuccess === "function") {
            _zip.toAsyncBuffer(onSuccess, onFail, onItemStart, onItemEnd);
            return null;
          }
          return _zip.compressToBuffer();
        }
      };
    };
  }
});

// node_modules/@protobufjs/aspromise/index.js
var require_aspromise = __commonJS({
  "node_modules/@protobufjs/aspromise/index.js"(exports2, module2) {
    "use strict";
    module2.exports = asPromise;
    function asPromise(fn, ctx) {
      var params = new Array(arguments.length - 1), offset = 0, index = 2, pending = true;
      while (index < arguments.length)
        params[offset++] = arguments[index++];
      return new Promise(function executor(resolve, reject) {
        params[offset] = function callback(err) {
          if (pending) {
            pending = false;
            if (err)
              reject(err);
            else {
              var params2 = new Array(arguments.length - 1), offset2 = 0;
              while (offset2 < params2.length)
                params2[offset2++] = arguments[offset2];
              resolve.apply(null, params2);
            }
          }
        };
        try {
          fn.apply(ctx || null, params);
        } catch (err) {
          if (pending) {
            pending = false;
            reject(err);
          }
        }
      });
    }
  }
});

// node_modules/@protobufjs/base64/index.js
var require_base64 = __commonJS({
  "node_modules/@protobufjs/base64/index.js"(exports2) {
    "use strict";
    var base64 = exports2;
    base64.length = function length(string) {
      var p = string.length;
      if (!p)
        return 0;
      var n = 0;
      while (--p % 4 > 1 && string.charAt(p) === "=")
        ++n;
      return Math.ceil(string.length * 3) / 4 - n;
    };
    var b64 = new Array(64);
    var s64 = new Array(123);
    for (i2 = 0; i2 < 64; )
      s64[b64[i2] = i2 < 26 ? i2 + 65 : i2 < 52 ? i2 + 71 : i2 < 62 ? i2 - 4 : i2 - 59 | 43] = i2++;
    var i2;
    base64.encode = function encode(buffer, start, end) {
      var parts = null, chunk = [];
      var i3 = 0, j = 0, t2;
      while (start < end) {
        var b = buffer[start++];
        switch (j) {
          case 0:
            chunk[i3++] = b64[b >> 2];
            t2 = (b & 3) << 4;
            j = 1;
            break;
          case 1:
            chunk[i3++] = b64[t2 | b >> 4];
            t2 = (b & 15) << 2;
            j = 2;
            break;
          case 2:
            chunk[i3++] = b64[t2 | b >> 6];
            chunk[i3++] = b64[b & 63];
            j = 0;
            break;
        }
        if (i3 > 8191) {
          (parts || (parts = [])).push(String.fromCharCode.apply(String, chunk));
          i3 = 0;
        }
      }
      if (j) {
        chunk[i3++] = b64[t2];
        chunk[i3++] = 61;
        if (j === 1)
          chunk[i3++] = 61;
      }
      if (parts) {
        if (i3)
          parts.push(String.fromCharCode.apply(String, chunk.slice(0, i3)));
        return parts.join("");
      }
      return String.fromCharCode.apply(String, chunk.slice(0, i3));
    };
    var invalidEncoding = "invalid encoding";
    base64.decode = function decode(string, buffer, offset) {
      var start = offset;
      var j = 0, t2;
      for (var i3 = 0; i3 < string.length; ) {
        var c = string.charCodeAt(i3++);
        if (c === 61 && j > 1)
          break;
        if ((c = s64[c]) === void 0)
          throw Error(invalidEncoding);
        switch (j) {
          case 0:
            t2 = c;
            j = 1;
            break;
          case 1:
            buffer[offset++] = t2 << 2 | (c & 48) >> 4;
            t2 = c;
            j = 2;
            break;
          case 2:
            buffer[offset++] = (t2 & 15) << 4 | (c & 60) >> 2;
            t2 = c;
            j = 3;
            break;
          case 3:
            buffer[offset++] = (t2 & 3) << 6 | c;
            j = 0;
            break;
        }
      }
      if (j === 1)
        throw Error(invalidEncoding);
      return offset - start;
    };
    base64.test = function test(string) {
      return /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(string);
    };
  }
});

// node_modules/@protobufjs/eventemitter/index.js
var require_eventemitter = __commonJS({
  "node_modules/@protobufjs/eventemitter/index.js"(exports2, module2) {
    "use strict";
    module2.exports = EventEmitter;
    function EventEmitter() {
      this._listeners = {};
    }
    EventEmitter.prototype.on = function on(evt, fn, ctx) {
      (this._listeners[evt] || (this._listeners[evt] = [])).push({
        fn,
        ctx: ctx || this
      });
      return this;
    };
    EventEmitter.prototype.off = function off(evt, fn) {
      if (evt === void 0)
        this._listeners = {};
      else {
        if (fn === void 0)
          this._listeners[evt] = [];
        else {
          var listeners = this._listeners[evt];
          for (var i2 = 0; i2 < listeners.length; )
            if (listeners[i2].fn === fn)
              listeners.splice(i2, 1);
            else
              ++i2;
        }
      }
      return this;
    };
    EventEmitter.prototype.emit = function emit(evt) {
      var listeners = this._listeners[evt];
      if (listeners) {
        var args = [], i2 = 1;
        for (; i2 < arguments.length; )
          args.push(arguments[i2++]);
        for (i2 = 0; i2 < listeners.length; )
          listeners[i2].fn.apply(listeners[i2++].ctx, args);
      }
      return this;
    };
  }
});

// node_modules/@protobufjs/float/index.js
var require_float = __commonJS({
  "node_modules/@protobufjs/float/index.js"(exports2, module2) {
    "use strict";
    module2.exports = factory(factory);
    function factory(exports3) {
      if (typeof Float32Array !== "undefined") (function() {
        var f32 = new Float32Array([-0]), f8b = new Uint8Array(f32.buffer), le = f8b[3] === 128;
        function writeFloat_f32_cpy(val, buf, pos) {
          f32[0] = val;
          buf[pos] = f8b[0];
          buf[pos + 1] = f8b[1];
          buf[pos + 2] = f8b[2];
          buf[pos + 3] = f8b[3];
        }
        function writeFloat_f32_rev(val, buf, pos) {
          f32[0] = val;
          buf[pos] = f8b[3];
          buf[pos + 1] = f8b[2];
          buf[pos + 2] = f8b[1];
          buf[pos + 3] = f8b[0];
        }
        exports3.writeFloatLE = le ? writeFloat_f32_cpy : writeFloat_f32_rev;
        exports3.writeFloatBE = le ? writeFloat_f32_rev : writeFloat_f32_cpy;
        function readFloat_f32_cpy(buf, pos) {
          f8b[0] = buf[pos];
          f8b[1] = buf[pos + 1];
          f8b[2] = buf[pos + 2];
          f8b[3] = buf[pos + 3];
          return f32[0];
        }
        function readFloat_f32_rev(buf, pos) {
          f8b[3] = buf[pos];
          f8b[2] = buf[pos + 1];
          f8b[1] = buf[pos + 2];
          f8b[0] = buf[pos + 3];
          return f32[0];
        }
        exports3.readFloatLE = le ? readFloat_f32_cpy : readFloat_f32_rev;
        exports3.readFloatBE = le ? readFloat_f32_rev : readFloat_f32_cpy;
      })();
      else (function() {
        function writeFloat_ieee754(writeUint, val, buf, pos) {
          var sign = val < 0 ? 1 : 0;
          if (sign)
            val = -val;
          if (val === 0)
            writeUint(1 / val > 0 ? (
              /* positive */
              0
            ) : (
              /* negative 0 */
              2147483648
            ), buf, pos);
          else if (isNaN(val))
            writeUint(2143289344, buf, pos);
          else if (val > 34028234663852886e22)
            writeUint((sign << 31 | 2139095040) >>> 0, buf, pos);
          else if (val < 11754943508222875e-54)
            writeUint((sign << 31 | Math.round(val / 1401298464324817e-60)) >>> 0, buf, pos);
          else {
            var exponent = Math.floor(Math.log(val) / Math.LN2), mantissa = Math.round(val * Math.pow(2, -exponent) * 8388608) & 8388607;
            writeUint((sign << 31 | exponent + 127 << 23 | mantissa) >>> 0, buf, pos);
          }
        }
        exports3.writeFloatLE = writeFloat_ieee754.bind(null, writeUintLE);
        exports3.writeFloatBE = writeFloat_ieee754.bind(null, writeUintBE);
        function readFloat_ieee754(readUint, buf, pos) {
          var uint = readUint(buf, pos), sign = (uint >> 31) * 2 + 1, exponent = uint >>> 23 & 255, mantissa = uint & 8388607;
          return exponent === 255 ? mantissa ? NaN : sign * Infinity : exponent === 0 ? sign * 1401298464324817e-60 * mantissa : sign * Math.pow(2, exponent - 150) * (mantissa + 8388608);
        }
        exports3.readFloatLE = readFloat_ieee754.bind(null, readUintLE);
        exports3.readFloatBE = readFloat_ieee754.bind(null, readUintBE);
      })();
      if (typeof Float64Array !== "undefined") (function() {
        var f64 = new Float64Array([-0]), f8b = new Uint8Array(f64.buffer), le = f8b[7] === 128;
        function writeDouble_f64_cpy(val, buf, pos) {
          f64[0] = val;
          buf[pos] = f8b[0];
          buf[pos + 1] = f8b[1];
          buf[pos + 2] = f8b[2];
          buf[pos + 3] = f8b[3];
          buf[pos + 4] = f8b[4];
          buf[pos + 5] = f8b[5];
          buf[pos + 6] = f8b[6];
          buf[pos + 7] = f8b[7];
        }
        function writeDouble_f64_rev(val, buf, pos) {
          f64[0] = val;
          buf[pos] = f8b[7];
          buf[pos + 1] = f8b[6];
          buf[pos + 2] = f8b[5];
          buf[pos + 3] = f8b[4];
          buf[pos + 4] = f8b[3];
          buf[pos + 5] = f8b[2];
          buf[pos + 6] = f8b[1];
          buf[pos + 7] = f8b[0];
        }
        exports3.writeDoubleLE = le ? writeDouble_f64_cpy : writeDouble_f64_rev;
        exports3.writeDoubleBE = le ? writeDouble_f64_rev : writeDouble_f64_cpy;
        function readDouble_f64_cpy(buf, pos) {
          f8b[0] = buf[pos];
          f8b[1] = buf[pos + 1];
          f8b[2] = buf[pos + 2];
          f8b[3] = buf[pos + 3];
          f8b[4] = buf[pos + 4];
          f8b[5] = buf[pos + 5];
          f8b[6] = buf[pos + 6];
          f8b[7] = buf[pos + 7];
          return f64[0];
        }
        function readDouble_f64_rev(buf, pos) {
          f8b[7] = buf[pos];
          f8b[6] = buf[pos + 1];
          f8b[5] = buf[pos + 2];
          f8b[4] = buf[pos + 3];
          f8b[3] = buf[pos + 4];
          f8b[2] = buf[pos + 5];
          f8b[1] = buf[pos + 6];
          f8b[0] = buf[pos + 7];
          return f64[0];
        }
        exports3.readDoubleLE = le ? readDouble_f64_cpy : readDouble_f64_rev;
        exports3.readDoubleBE = le ? readDouble_f64_rev : readDouble_f64_cpy;
      })();
      else (function() {
        function writeDouble_ieee754(writeUint, off0, off1, val, buf, pos) {
          var sign = val < 0 ? 1 : 0;
          if (sign)
            val = -val;
          if (val === 0) {
            writeUint(0, buf, pos + off0);
            writeUint(1 / val > 0 ? (
              /* positive */
              0
            ) : (
              /* negative 0 */
              2147483648
            ), buf, pos + off1);
          } else if (isNaN(val)) {
            writeUint(0, buf, pos + off0);
            writeUint(2146959360, buf, pos + off1);
          } else if (val > 17976931348623157e292) {
            writeUint(0, buf, pos + off0);
            writeUint((sign << 31 | 2146435072) >>> 0, buf, pos + off1);
          } else {
            var mantissa;
            if (val < 22250738585072014e-324) {
              mantissa = val / 5e-324;
              writeUint(mantissa >>> 0, buf, pos + off0);
              writeUint((sign << 31 | mantissa / 4294967296) >>> 0, buf, pos + off1);
            } else {
              var exponent = Math.floor(Math.log(val) / Math.LN2);
              if (exponent === 1024)
                exponent = 1023;
              mantissa = val * Math.pow(2, -exponent);
              writeUint(mantissa * 4503599627370496 >>> 0, buf, pos + off0);
              writeUint((sign << 31 | exponent + 1023 << 20 | mantissa * 1048576 & 1048575) >>> 0, buf, pos + off1);
            }
          }
        }
        exports3.writeDoubleLE = writeDouble_ieee754.bind(null, writeUintLE, 0, 4);
        exports3.writeDoubleBE = writeDouble_ieee754.bind(null, writeUintBE, 4, 0);
        function readDouble_ieee754(readUint, off0, off1, buf, pos) {
          var lo = readUint(buf, pos + off0), hi = readUint(buf, pos + off1);
          var sign = (hi >> 31) * 2 + 1, exponent = hi >>> 20 & 2047, mantissa = 4294967296 * (hi & 1048575) + lo;
          return exponent === 2047 ? mantissa ? NaN : sign * Infinity : exponent === 0 ? sign * 5e-324 * mantissa : sign * Math.pow(2, exponent - 1075) * (mantissa + 4503599627370496);
        }
        exports3.readDoubleLE = readDouble_ieee754.bind(null, readUintLE, 0, 4);
        exports3.readDoubleBE = readDouble_ieee754.bind(null, readUintBE, 4, 0);
      })();
      return exports3;
    }
    function writeUintLE(val, buf, pos) {
      buf[pos] = val & 255;
      buf[pos + 1] = val >>> 8 & 255;
      buf[pos + 2] = val >>> 16 & 255;
      buf[pos + 3] = val >>> 24;
    }
    function writeUintBE(val, buf, pos) {
      buf[pos] = val >>> 24;
      buf[pos + 1] = val >>> 16 & 255;
      buf[pos + 2] = val >>> 8 & 255;
      buf[pos + 3] = val & 255;
    }
    function readUintLE(buf, pos) {
      return (buf[pos] | buf[pos + 1] << 8 | buf[pos + 2] << 16 | buf[pos + 3] << 24) >>> 0;
    }
    function readUintBE(buf, pos) {
      return (buf[pos] << 24 | buf[pos + 1] << 16 | buf[pos + 2] << 8 | buf[pos + 3]) >>> 0;
    }
  }
});

// node_modules/@protobufjs/inquire/index.js
var require_inquire = __commonJS({
  "node_modules/@protobufjs/inquire/index.js"(exports, module) {
    "use strict";
    module.exports = inquire;
    function inquire(moduleName) {
      try {
        var mod = eval("quire".replace(/^/, "re"))(moduleName);
        if (mod && (mod.length || Object.keys(mod).length))
          return mod;
      } catch (e2) {
      }
      return null;
    }
  }
});

// node_modules/@protobufjs/utf8/index.js
var require_utf8 = __commonJS({
  "node_modules/@protobufjs/utf8/index.js"(exports2) {
    "use strict";
    var utf8 = exports2;
    utf8.length = function utf8_length(string) {
      var len = 0, c = 0;
      for (var i2 = 0; i2 < string.length; ++i2) {
        c = string.charCodeAt(i2);
        if (c < 128)
          len += 1;
        else if (c < 2048)
          len += 2;
        else if ((c & 64512) === 55296 && (string.charCodeAt(i2 + 1) & 64512) === 56320) {
          ++i2;
          len += 4;
        } else
          len += 3;
      }
      return len;
    };
    utf8.read = function utf8_read(buffer, start, end) {
      var len = end - start;
      if (len < 1)
        return "";
      var parts = null, chunk = [], i2 = 0, t2;
      while (start < end) {
        t2 = buffer[start++];
        if (t2 < 128)
          chunk[i2++] = t2;
        else if (t2 > 191 && t2 < 224)
          chunk[i2++] = (t2 & 31) << 6 | buffer[start++] & 63;
        else if (t2 > 239 && t2 < 365) {
          t2 = ((t2 & 7) << 18 | (buffer[start++] & 63) << 12 | (buffer[start++] & 63) << 6 | buffer[start++] & 63) - 65536;
          chunk[i2++] = 55296 + (t2 >> 10);
          chunk[i2++] = 56320 + (t2 & 1023);
        } else
          chunk[i2++] = (t2 & 15) << 12 | (buffer[start++] & 63) << 6 | buffer[start++] & 63;
        if (i2 > 8191) {
          (parts || (parts = [])).push(String.fromCharCode.apply(String, chunk));
          i2 = 0;
        }
      }
      if (parts) {
        if (i2)
          parts.push(String.fromCharCode.apply(String, chunk.slice(0, i2)));
        return parts.join("");
      }
      return String.fromCharCode.apply(String, chunk.slice(0, i2));
    };
    utf8.write = function utf8_write(string, buffer, offset) {
      var start = offset, c1, c2;
      for (var i2 = 0; i2 < string.length; ++i2) {
        c1 = string.charCodeAt(i2);
        if (c1 < 128) {
          buffer[offset++] = c1;
        } else if (c1 < 2048) {
          buffer[offset++] = c1 >> 6 | 192;
          buffer[offset++] = c1 & 63 | 128;
        } else if ((c1 & 64512) === 55296 && ((c2 = string.charCodeAt(i2 + 1)) & 64512) === 56320) {
          c1 = 65536 + ((c1 & 1023) << 10) + (c2 & 1023);
          ++i2;
          buffer[offset++] = c1 >> 18 | 240;
          buffer[offset++] = c1 >> 12 & 63 | 128;
          buffer[offset++] = c1 >> 6 & 63 | 128;
          buffer[offset++] = c1 & 63 | 128;
        } else {
          buffer[offset++] = c1 >> 12 | 224;
          buffer[offset++] = c1 >> 6 & 63 | 128;
          buffer[offset++] = c1 & 63 | 128;
        }
      }
      return offset - start;
    };
  }
});

// node_modules/@protobufjs/pool/index.js
var require_pool = __commonJS({
  "node_modules/@protobufjs/pool/index.js"(exports2, module2) {
    "use strict";
    module2.exports = pool;
    function pool(alloc, slice, size) {
      var SIZE = size || 8192;
      var MAX = SIZE >>> 1;
      var slab = null;
      var offset = SIZE;
      return function pool_alloc(size2) {
        if (size2 < 1 || size2 > MAX)
          return alloc(size2);
        if (offset + size2 > SIZE) {
          slab = alloc(SIZE);
          offset = 0;
        }
        var buf = slice.call(slab, offset, offset += size2);
        if (offset & 7)
          offset = (offset | 7) + 1;
        return buf;
      };
    }
  }
});

// node_modules/protobufjs/src/util/longbits.js
var require_longbits = __commonJS({
  "node_modules/protobufjs/src/util/longbits.js"(exports2, module2) {
    "use strict";
    module2.exports = LongBits;
    var util = require_minimal();
    function LongBits(lo, hi) {
      this.lo = lo >>> 0;
      this.hi = hi >>> 0;
    }
    var zero = LongBits.zero = new LongBits(0, 0);
    zero.toNumber = function() {
      return 0;
    };
    zero.zzEncode = zero.zzDecode = function() {
      return this;
    };
    zero.length = function() {
      return 1;
    };
    var zeroHash = LongBits.zeroHash = "\0\0\0\0\0\0\0\0";
    LongBits.fromNumber = function fromNumber(value) {
      if (value === 0)
        return zero;
      var sign = value < 0;
      if (sign)
        value = -value;
      var lo = value >>> 0, hi = (value - lo) / 4294967296 >>> 0;
      if (sign) {
        hi = ~hi >>> 0;
        lo = ~lo >>> 0;
        if (++lo > 4294967295) {
          lo = 0;
          if (++hi > 4294967295)
            hi = 0;
        }
      }
      return new LongBits(lo, hi);
    };
    LongBits.from = function from(value) {
      if (typeof value === "number")
        return LongBits.fromNumber(value);
      if (util.isString(value)) {
        if (util.Long)
          value = util.Long.fromString(value);
        else
          return LongBits.fromNumber(parseInt(value, 10));
      }
      return value.low || value.high ? new LongBits(value.low >>> 0, value.high >>> 0) : zero;
    };
    LongBits.prototype.toNumber = function toNumber(unsigned) {
      if (!unsigned && this.hi >>> 31) {
        var lo = ~this.lo + 1 >>> 0, hi = ~this.hi >>> 0;
        if (!lo)
          hi = hi + 1 >>> 0;
        return -(lo + hi * 4294967296);
      }
      return this.lo + this.hi * 4294967296;
    };
    LongBits.prototype.toLong = function toLong(unsigned) {
      return util.Long ? new util.Long(this.lo | 0, this.hi | 0, Boolean(unsigned)) : { low: this.lo | 0, high: this.hi | 0, unsigned: Boolean(unsigned) };
    };
    var charCodeAt = String.prototype.charCodeAt;
    LongBits.fromHash = function fromHash(hash) {
      if (hash === zeroHash)
        return zero;
      return new LongBits(
        (charCodeAt.call(hash, 0) | charCodeAt.call(hash, 1) << 8 | charCodeAt.call(hash, 2) << 16 | charCodeAt.call(hash, 3) << 24) >>> 0,
        (charCodeAt.call(hash, 4) | charCodeAt.call(hash, 5) << 8 | charCodeAt.call(hash, 6) << 16 | charCodeAt.call(hash, 7) << 24) >>> 0
      );
    };
    LongBits.prototype.toHash = function toHash() {
      return String.fromCharCode(
        this.lo & 255,
        this.lo >>> 8 & 255,
        this.lo >>> 16 & 255,
        this.lo >>> 24,
        this.hi & 255,
        this.hi >>> 8 & 255,
        this.hi >>> 16 & 255,
        this.hi >>> 24
      );
    };
    LongBits.prototype.zzEncode = function zzEncode() {
      var mask = this.hi >> 31;
      this.hi = ((this.hi << 1 | this.lo >>> 31) ^ mask) >>> 0;
      this.lo = (this.lo << 1 ^ mask) >>> 0;
      return this;
    };
    LongBits.prototype.zzDecode = function zzDecode() {
      var mask = -(this.lo & 1);
      this.lo = ((this.lo >>> 1 | this.hi << 31) ^ mask) >>> 0;
      this.hi = (this.hi >>> 1 ^ mask) >>> 0;
      return this;
    };
    LongBits.prototype.length = function length() {
      var part0 = this.lo, part1 = (this.lo >>> 28 | this.hi << 4) >>> 0, part2 = this.hi >>> 24;
      return part2 === 0 ? part1 === 0 ? part0 < 16384 ? part0 < 128 ? 1 : 2 : part0 < 2097152 ? 3 : 4 : part1 < 16384 ? part1 < 128 ? 5 : 6 : part1 < 2097152 ? 7 : 8 : part2 < 128 ? 9 : 10;
    };
  }
});

// node_modules/protobufjs/src/util/minimal.js
var require_minimal = __commonJS({
  "node_modules/protobufjs/src/util/minimal.js"(exports2) {
    "use strict";
    var util = exports2;
    util.asPromise = require_aspromise();
    util.base64 = require_base64();
    util.EventEmitter = require_eventemitter();
    util.float = require_float();
    util.inquire = require_inquire();
    util.utf8 = require_utf8();
    util.pool = require_pool();
    util.LongBits = require_longbits();
    util.isNode = Boolean(typeof global !== "undefined" && global && global.process && global.process.versions && global.process.versions.node);
    util.global = util.isNode && global || typeof window !== "undefined" && window || typeof self !== "undefined" && self || exports2;
    util.emptyArray = Object.freeze ? Object.freeze([]) : (
      /* istanbul ignore next */
      []
    );
    util.emptyObject = Object.freeze ? Object.freeze({}) : (
      /* istanbul ignore next */
      {}
    );
    util.isInteger = Number.isInteger || /* istanbul ignore next */
    function isInteger(value) {
      return typeof value === "number" && isFinite(value) && Math.floor(value) === value;
    };
    util.isString = function isString(value) {
      return typeof value === "string" || value instanceof String;
    };
    util.isObject = function isObject(value) {
      return value && typeof value === "object";
    };
    util.isset = /**
     * Checks if a property on a message is considered to be present.
     * @param {Object} obj Plain object or message instance
     * @param {string} prop Property name
     * @returns {boolean} `true` if considered to be present, otherwise `false`
     */
    util.isSet = function isSet(obj, prop) {
      var value = obj[prop];
      if (value != null && obj.hasOwnProperty(prop))
        return typeof value !== "object" || (Array.isArray(value) ? value.length : Object.keys(value).length) > 0;
      return false;
    };
    util.Buffer = (function() {
      try {
        var Buffer4 = util.inquire("buffer").Buffer;
        return Buffer4.prototype.utf8Write ? Buffer4 : (
          /* istanbul ignore next */
          null
        );
      } catch (e2) {
        return null;
      }
    })();
    util._Buffer_from = null;
    util._Buffer_allocUnsafe = null;
    util.newBuffer = function newBuffer(sizeOrArray) {
      return typeof sizeOrArray === "number" ? util.Buffer ? util._Buffer_allocUnsafe(sizeOrArray) : new util.Array(sizeOrArray) : util.Buffer ? util._Buffer_from(sizeOrArray) : typeof Uint8Array === "undefined" ? sizeOrArray : new Uint8Array(sizeOrArray);
    };
    util.Array = typeof Uint8Array !== "undefined" ? Uint8Array : Array;
    util.Long = /* istanbul ignore next */
    util.global.dcodeIO && /* istanbul ignore next */
    util.global.dcodeIO.Long || /* istanbul ignore next */
    util.global.Long || util.inquire("long");
    util.key2Re = /^true|false|0|1$/;
    util.key32Re = /^-?(?:0|[1-9][0-9]*)$/;
    util.key64Re = /^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;
    util.longToHash = function longToHash(value) {
      return value ? util.LongBits.from(value).toHash() : util.LongBits.zeroHash;
    };
    util.longFromHash = function longFromHash(hash, unsigned) {
      var bits = util.LongBits.fromHash(hash);
      if (util.Long)
        return util.Long.fromBits(bits.lo, bits.hi, unsigned);
      return bits.toNumber(Boolean(unsigned));
    };
    function merge(dst, src, ifNotSet) {
      for (var keys = Object.keys(src), i2 = 0; i2 < keys.length; ++i2)
        if (dst[keys[i2]] === void 0 || !ifNotSet)
          dst[keys[i2]] = src[keys[i2]];
      return dst;
    }
    util.merge = merge;
    util.lcFirst = function lcFirst(str) {
      return str.charAt(0).toLowerCase() + str.substring(1);
    };
    function newError(name) {
      function CustomError(message, properties) {
        if (!(this instanceof CustomError))
          return new CustomError(message, properties);
        Object.defineProperty(this, "message", { get: function() {
          return message;
        } });
        if (Error.captureStackTrace)
          Error.captureStackTrace(this, CustomError);
        else
          Object.defineProperty(this, "stack", { value: new Error().stack || "" });
        if (properties)
          merge(this, properties);
      }
      CustomError.prototype = Object.create(Error.prototype, {
        constructor: {
          value: CustomError,
          writable: true,
          enumerable: false,
          configurable: true
        },
        name: {
          get: function get() {
            return name;
          },
          set: void 0,
          enumerable: false,
          // configurable: false would accurately preserve the behavior of
          // the original, but I'm guessing that was not intentional.
          // For an actual error subclass, this property would
          // be configurable.
          configurable: true
        },
        toString: {
          value: function value() {
            return this.name + ": " + this.message;
          },
          writable: true,
          enumerable: false,
          configurable: true
        }
      });
      return CustomError;
    }
    util.newError = newError;
    util.ProtocolError = newError("ProtocolError");
    util.oneOfGetter = function getOneOf(fieldNames) {
      var fieldMap = {};
      for (var i2 = 0; i2 < fieldNames.length; ++i2)
        fieldMap[fieldNames[i2]] = 1;
      return function() {
        for (var keys = Object.keys(this), i3 = keys.length - 1; i3 > -1; --i3)
          if (fieldMap[keys[i3]] === 1 && this[keys[i3]] !== void 0 && this[keys[i3]] !== null)
            return keys[i3];
      };
    };
    util.oneOfSetter = function setOneOf(fieldNames) {
      return function(name) {
        for (var i2 = 0; i2 < fieldNames.length; ++i2)
          if (fieldNames[i2] !== name)
            delete this[fieldNames[i2]];
      };
    };
    util.toJSONOptions = {
      longs: String,
      enums: String,
      bytes: String,
      json: true
    };
    util._configure = function() {
      var Buffer4 = util.Buffer;
      if (!Buffer4) {
        util._Buffer_from = util._Buffer_allocUnsafe = null;
        return;
      }
      util._Buffer_from = Buffer4.from !== Uint8Array.from && Buffer4.from || /* istanbul ignore next */
      function Buffer_from(value, encoding) {
        return new Buffer4(value, encoding);
      };
      util._Buffer_allocUnsafe = Buffer4.allocUnsafe || /* istanbul ignore next */
      function Buffer_allocUnsafe(size) {
        return new Buffer4(size);
      };
    };
  }
});

// node_modules/protobufjs/src/writer.js
var require_writer = __commonJS({
  "node_modules/protobufjs/src/writer.js"(exports2, module2) {
    "use strict";
    module2.exports = Writer;
    var util = require_minimal();
    var BufferWriter;
    var LongBits = util.LongBits;
    var base64 = util.base64;
    var utf8 = util.utf8;
    function Op(fn, len, val) {
      this.fn = fn;
      this.len = len;
      this.next = void 0;
      this.val = val;
    }
    function noop2() {
    }
    function State(writer) {
      this.head = writer.head;
      this.tail = writer.tail;
      this.len = writer.len;
      this.next = writer.states;
    }
    function Writer() {
      this.len = 0;
      this.head = new Op(noop2, 0, 0);
      this.tail = this.head;
      this.states = null;
    }
    var create = function create2() {
      return util.Buffer ? function create_buffer_setup() {
        return (Writer.create = function create_buffer() {
          return new BufferWriter();
        })();
      } : function create_array() {
        return new Writer();
      };
    };
    Writer.create = create();
    Writer.alloc = function alloc(size) {
      return new util.Array(size);
    };
    if (util.Array !== Array)
      Writer.alloc = util.pool(Writer.alloc, util.Array.prototype.subarray);
    Writer.prototype._push = function push(fn, len, val) {
      this.tail = this.tail.next = new Op(fn, len, val);
      this.len += len;
      return this;
    };
    function writeByte(val, buf, pos) {
      buf[pos] = val & 255;
    }
    function writeVarint32(val, buf, pos) {
      while (val > 127) {
        buf[pos++] = val & 127 | 128;
        val >>>= 7;
      }
      buf[pos] = val;
    }
    function VarintOp(len, val) {
      this.len = len;
      this.next = void 0;
      this.val = val;
    }
    VarintOp.prototype = Object.create(Op.prototype);
    VarintOp.prototype.fn = writeVarint32;
    Writer.prototype.uint32 = function write_uint32(value) {
      this.len += (this.tail = this.tail.next = new VarintOp(
        (value = value >>> 0) < 128 ? 1 : value < 16384 ? 2 : value < 2097152 ? 3 : value < 268435456 ? 4 : 5,
        value
      )).len;
      return this;
    };
    Writer.prototype.int32 = function write_int32(value) {
      return value < 0 ? this._push(writeVarint64, 10, LongBits.fromNumber(value)) : this.uint32(value);
    };
    Writer.prototype.sint32 = function write_sint32(value) {
      return this.uint32((value << 1 ^ value >> 31) >>> 0);
    };
    function writeVarint64(val, buf, pos) {
      while (val.hi) {
        buf[pos++] = val.lo & 127 | 128;
        val.lo = (val.lo >>> 7 | val.hi << 25) >>> 0;
        val.hi >>>= 7;
      }
      while (val.lo > 127) {
        buf[pos++] = val.lo & 127 | 128;
        val.lo = val.lo >>> 7;
      }
      buf[pos++] = val.lo;
    }
    Writer.prototype.uint64 = function write_uint64(value) {
      var bits = LongBits.from(value);
      return this._push(writeVarint64, bits.length(), bits);
    };
    Writer.prototype.int64 = Writer.prototype.uint64;
    Writer.prototype.sint64 = function write_sint64(value) {
      var bits = LongBits.from(value).zzEncode();
      return this._push(writeVarint64, bits.length(), bits);
    };
    Writer.prototype.bool = function write_bool(value) {
      return this._push(writeByte, 1, value ? 1 : 0);
    };
    function writeFixed32(val, buf, pos) {
      buf[pos] = val & 255;
      buf[pos + 1] = val >>> 8 & 255;
      buf[pos + 2] = val >>> 16 & 255;
      buf[pos + 3] = val >>> 24;
    }
    Writer.prototype.fixed32 = function write_fixed32(value) {
      return this._push(writeFixed32, 4, value >>> 0);
    };
    Writer.prototype.sfixed32 = Writer.prototype.fixed32;
    Writer.prototype.fixed64 = function write_fixed64(value) {
      var bits = LongBits.from(value);
      return this._push(writeFixed32, 4, bits.lo)._push(writeFixed32, 4, bits.hi);
    };
    Writer.prototype.sfixed64 = Writer.prototype.fixed64;
    Writer.prototype.float = function write_float(value) {
      return this._push(util.float.writeFloatLE, 4, value);
    };
    Writer.prototype.double = function write_double(value) {
      return this._push(util.float.writeDoubleLE, 8, value);
    };
    var writeBytes = util.Array.prototype.set ? function writeBytes_set(val, buf, pos) {
      buf.set(val, pos);
    } : function writeBytes_for(val, buf, pos) {
      for (var i2 = 0; i2 < val.length; ++i2)
        buf[pos + i2] = val[i2];
    };
    Writer.prototype.bytes = function write_bytes(value) {
      var len = value.length >>> 0;
      if (!len)
        return this._push(writeByte, 1, 0);
      if (util.isString(value)) {
        var buf = Writer.alloc(len = base64.length(value));
        base64.decode(value, buf, 0);
        value = buf;
      }
      return this.uint32(len)._push(writeBytes, len, value);
    };
    Writer.prototype.string = function write_string(value) {
      var len = utf8.length(value);
      return len ? this.uint32(len)._push(utf8.write, len, value) : this._push(writeByte, 1, 0);
    };
    Writer.prototype.fork = function fork() {
      this.states = new State(this);
      this.head = this.tail = new Op(noop2, 0, 0);
      this.len = 0;
      return this;
    };
    Writer.prototype.reset = function reset() {
      if (this.states) {
        this.head = this.states.head;
        this.tail = this.states.tail;
        this.len = this.states.len;
        this.states = this.states.next;
      } else {
        this.head = this.tail = new Op(noop2, 0, 0);
        this.len = 0;
      }
      return this;
    };
    Writer.prototype.ldelim = function ldelim() {
      var head = this.head, tail = this.tail, len = this.len;
      this.reset().uint32(len);
      if (len) {
        this.tail.next = head.next;
        this.tail = tail;
        this.len += len;
      }
      return this;
    };
    Writer.prototype.finish = function finish() {
      var head = this.head.next, buf = this.constructor.alloc(this.len), pos = 0;
      while (head) {
        head.fn(head.val, buf, pos);
        pos += head.len;
        head = head.next;
      }
      return buf;
    };
    Writer._configure = function(BufferWriter_) {
      BufferWriter = BufferWriter_;
      Writer.create = create();
      BufferWriter._configure();
    };
  }
});

// node_modules/protobufjs/src/writer_buffer.js
var require_writer_buffer = __commonJS({
  "node_modules/protobufjs/src/writer_buffer.js"(exports2, module2) {
    "use strict";
    module2.exports = BufferWriter;
    var Writer = require_writer();
    (BufferWriter.prototype = Object.create(Writer.prototype)).constructor = BufferWriter;
    var util = require_minimal();
    function BufferWriter() {
      Writer.call(this);
    }
    BufferWriter._configure = function() {
      BufferWriter.alloc = util._Buffer_allocUnsafe;
      BufferWriter.writeBytesBuffer = util.Buffer && util.Buffer.prototype instanceof Uint8Array && util.Buffer.prototype.set.name === "set" ? function writeBytesBuffer_set(val, buf, pos) {
        buf.set(val, pos);
      } : function writeBytesBuffer_copy(val, buf, pos) {
        if (val.copy)
          val.copy(buf, pos, 0, val.length);
        else for (var i2 = 0; i2 < val.length; )
          buf[pos++] = val[i2++];
      };
    };
    BufferWriter.prototype.bytes = function write_bytes_buffer(value) {
      if (util.isString(value))
        value = util._Buffer_from(value, "base64");
      var len = value.length >>> 0;
      this.uint32(len);
      if (len)
        this._push(BufferWriter.writeBytesBuffer, len, value);
      return this;
    };
    function writeStringBuffer(val, buf, pos) {
      if (val.length < 40)
        util.utf8.write(val, buf, pos);
      else if (buf.utf8Write)
        buf.utf8Write(val, pos);
      else
        buf.write(val, pos);
    }
    BufferWriter.prototype.string = function write_string_buffer(value) {
      var len = util.Buffer.byteLength(value);
      this.uint32(len);
      if (len)
        this._push(writeStringBuffer, len, value);
      return this;
    };
    BufferWriter._configure();
  }
});

// node_modules/protobufjs/src/reader.js
var require_reader = __commonJS({
  "node_modules/protobufjs/src/reader.js"(exports2, module2) {
    "use strict";
    module2.exports = Reader;
    var util = require_minimal();
    var BufferReader;
    var LongBits = util.LongBits;
    var utf8 = util.utf8;
    function indexOutOfRange(reader, writeLength) {
      return RangeError("index out of range: " + reader.pos + " + " + (writeLength || 1) + " > " + reader.len);
    }
    function Reader(buffer) {
      this.buf = buffer;
      this.pos = 0;
      this.len = buffer.length;
    }
    var create_array = typeof Uint8Array !== "undefined" ? function create_typed_array(buffer) {
      if (buffer instanceof Uint8Array || Array.isArray(buffer))
        return new Reader(buffer);
      throw Error("illegal buffer");
    } : function create_array2(buffer) {
      if (Array.isArray(buffer))
        return new Reader(buffer);
      throw Error("illegal buffer");
    };
    var create = function create2() {
      return util.Buffer ? function create_buffer_setup(buffer) {
        return (Reader.create = function create_buffer(buffer2) {
          return util.Buffer.isBuffer(buffer2) ? new BufferReader(buffer2) : create_array(buffer2);
        })(buffer);
      } : create_array;
    };
    Reader.create = create();
    Reader.prototype._slice = util.Array.prototype.subarray || /* istanbul ignore next */
    util.Array.prototype.slice;
    Reader.prototype.uint32 = /* @__PURE__ */ (function read_uint32_setup() {
      var value = 4294967295;
      return function read_uint32() {
        value = (this.buf[this.pos] & 127) >>> 0;
        if (this.buf[this.pos++] < 128) return value;
        value = (value | (this.buf[this.pos] & 127) << 7) >>> 0;
        if (this.buf[this.pos++] < 128) return value;
        value = (value | (this.buf[this.pos] & 127) << 14) >>> 0;
        if (this.buf[this.pos++] < 128) return value;
        value = (value | (this.buf[this.pos] & 127) << 21) >>> 0;
        if (this.buf[this.pos++] < 128) return value;
        value = (value | (this.buf[this.pos] & 15) << 28) >>> 0;
        if (this.buf[this.pos++] < 128) return value;
        if ((this.pos += 5) > this.len) {
          this.pos = this.len;
          throw indexOutOfRange(this, 10);
        }
        return value;
      };
    })();
    Reader.prototype.int32 = function read_int32() {
      return this.uint32() | 0;
    };
    Reader.prototype.sint32 = function read_sint32() {
      var value = this.uint32();
      return value >>> 1 ^ -(value & 1) | 0;
    };
    function readLongVarint() {
      var bits = new LongBits(0, 0);
      var i2 = 0;
      if (this.len - this.pos > 4) {
        for (; i2 < 4; ++i2) {
          bits.lo = (bits.lo | (this.buf[this.pos] & 127) << i2 * 7) >>> 0;
          if (this.buf[this.pos++] < 128)
            return bits;
        }
        bits.lo = (bits.lo | (this.buf[this.pos] & 127) << 28) >>> 0;
        bits.hi = (bits.hi | (this.buf[this.pos] & 127) >> 4) >>> 0;
        if (this.buf[this.pos++] < 128)
          return bits;
        i2 = 0;
      } else {
        for (; i2 < 3; ++i2) {
          if (this.pos >= this.len)
            throw indexOutOfRange(this);
          bits.lo = (bits.lo | (this.buf[this.pos] & 127) << i2 * 7) >>> 0;
          if (this.buf[this.pos++] < 128)
            return bits;
        }
        bits.lo = (bits.lo | (this.buf[this.pos++] & 127) << i2 * 7) >>> 0;
        return bits;
      }
      if (this.len - this.pos > 4) {
        for (; i2 < 5; ++i2) {
          bits.hi = (bits.hi | (this.buf[this.pos] & 127) << i2 * 7 + 3) >>> 0;
          if (this.buf[this.pos++] < 128)
            return bits;
        }
      } else {
        for (; i2 < 5; ++i2) {
          if (this.pos >= this.len)
            throw indexOutOfRange(this);
          bits.hi = (bits.hi | (this.buf[this.pos] & 127) << i2 * 7 + 3) >>> 0;
          if (this.buf[this.pos++] < 128)
            return bits;
        }
      }
      throw Error("invalid varint encoding");
    }
    Reader.prototype.bool = function read_bool() {
      return this.uint32() !== 0;
    };
    function readFixed32_end(buf, end) {
      return (buf[end - 4] | buf[end - 3] << 8 | buf[end - 2] << 16 | buf[end - 1] << 24) >>> 0;
    }
    Reader.prototype.fixed32 = function read_fixed32() {
      if (this.pos + 4 > this.len)
        throw indexOutOfRange(this, 4);
      return readFixed32_end(this.buf, this.pos += 4);
    };
    Reader.prototype.sfixed32 = function read_sfixed32() {
      if (this.pos + 4 > this.len)
        throw indexOutOfRange(this, 4);
      return readFixed32_end(this.buf, this.pos += 4) | 0;
    };
    function readFixed64() {
      if (this.pos + 8 > this.len)
        throw indexOutOfRange(this, 8);
      return new LongBits(readFixed32_end(this.buf, this.pos += 4), readFixed32_end(this.buf, this.pos += 4));
    }
    Reader.prototype.float = function read_float() {
      if (this.pos + 4 > this.len)
        throw indexOutOfRange(this, 4);
      var value = util.float.readFloatLE(this.buf, this.pos);
      this.pos += 4;
      return value;
    };
    Reader.prototype.double = function read_double() {
      if (this.pos + 8 > this.len)
        throw indexOutOfRange(this, 4);
      var value = util.float.readDoubleLE(this.buf, this.pos);
      this.pos += 8;
      return value;
    };
    Reader.prototype.bytes = function read_bytes() {
      var length = this.uint32(), start = this.pos, end = this.pos + length;
      if (end > this.len)
        throw indexOutOfRange(this, length);
      this.pos += length;
      if (Array.isArray(this.buf))
        return this.buf.slice(start, end);
      if (start === end) {
        var nativeBuffer = util.Buffer;
        return nativeBuffer ? nativeBuffer.alloc(0) : new this.buf.constructor(0);
      }
      return this._slice.call(this.buf, start, end);
    };
    Reader.prototype.string = function read_string() {
      var bytes = this.bytes();
      return utf8.read(bytes, 0, bytes.length);
    };
    Reader.prototype.skip = function skip(length) {
      if (typeof length === "number") {
        if (this.pos + length > this.len)
          throw indexOutOfRange(this, length);
        this.pos += length;
      } else {
        do {
          if (this.pos >= this.len)
            throw indexOutOfRange(this);
        } while (this.buf[this.pos++] & 128);
      }
      return this;
    };
    Reader.prototype.skipType = function(wireType) {
      switch (wireType) {
        case 0:
          this.skip();
          break;
        case 1:
          this.skip(8);
          break;
        case 2:
          this.skip(this.uint32());
          break;
        case 3:
          while ((wireType = this.uint32() & 7) !== 4) {
            this.skipType(wireType);
          }
          break;
        case 5:
          this.skip(4);
          break;
        /* istanbul ignore next */
        default:
          throw Error("invalid wire type " + wireType + " at offset " + this.pos);
      }
      return this;
    };
    Reader._configure = function(BufferReader_) {
      BufferReader = BufferReader_;
      Reader.create = create();
      BufferReader._configure();
      var fn = util.Long ? "toLong" : (
        /* istanbul ignore next */
        "toNumber"
      );
      util.merge(Reader.prototype, {
        int64: function read_int64() {
          return readLongVarint.call(this)[fn](false);
        },
        uint64: function read_uint64() {
          return readLongVarint.call(this)[fn](true);
        },
        sint64: function read_sint64() {
          return readLongVarint.call(this).zzDecode()[fn](false);
        },
        fixed64: function read_fixed64() {
          return readFixed64.call(this)[fn](true);
        },
        sfixed64: function read_sfixed64() {
          return readFixed64.call(this)[fn](false);
        }
      });
    };
  }
});

// node_modules/protobufjs/src/reader_buffer.js
var require_reader_buffer = __commonJS({
  "node_modules/protobufjs/src/reader_buffer.js"(exports2, module2) {
    "use strict";
    module2.exports = BufferReader;
    var Reader = require_reader();
    (BufferReader.prototype = Object.create(Reader.prototype)).constructor = BufferReader;
    var util = require_minimal();
    function BufferReader(buffer) {
      Reader.call(this, buffer);
    }
    BufferReader._configure = function() {
      if (util.Buffer)
        BufferReader.prototype._slice = util.Buffer.prototype.slice;
    };
    BufferReader.prototype.string = function read_string_buffer() {
      var len = this.uint32();
      return this.buf.utf8Slice ? this.buf.utf8Slice(this.pos, this.pos = Math.min(this.pos + len, this.len)) : this.buf.toString("utf-8", this.pos, this.pos = Math.min(this.pos + len, this.len));
    };
    BufferReader._configure();
  }
});

// node_modules/protobufjs/src/rpc/service.js
var require_service = __commonJS({
  "node_modules/protobufjs/src/rpc/service.js"(exports2, module2) {
    "use strict";
    module2.exports = Service;
    var util = require_minimal();
    (Service.prototype = Object.create(util.EventEmitter.prototype)).constructor = Service;
    function Service(rpcImpl, requestDelimited, responseDelimited) {
      if (typeof rpcImpl !== "function")
        throw TypeError("rpcImpl must be a function");
      util.EventEmitter.call(this);
      this.rpcImpl = rpcImpl;
      this.requestDelimited = Boolean(requestDelimited);
      this.responseDelimited = Boolean(responseDelimited);
    }
    Service.prototype.rpcCall = function rpcCall(method, requestCtor, responseCtor, request, callback) {
      if (!request)
        throw TypeError("request must be specified");
      var self2 = this;
      if (!callback)
        return util.asPromise(rpcCall, self2, method, requestCtor, responseCtor, request);
      if (!self2.rpcImpl) {
        setTimeout(function() {
          callback(Error("already ended"));
        }, 0);
        return void 0;
      }
      try {
        return self2.rpcImpl(
          method,
          requestCtor[self2.requestDelimited ? "encodeDelimited" : "encode"](request).finish(),
          function rpcCallback(err, response) {
            if (err) {
              self2.emit("error", err, method);
              return callback(err);
            }
            if (response === null) {
              self2.end(
                /* endedByRPC */
                true
              );
              return void 0;
            }
            if (!(response instanceof responseCtor)) {
              try {
                response = responseCtor[self2.responseDelimited ? "decodeDelimited" : "decode"](response);
              } catch (err2) {
                self2.emit("error", err2, method);
                return callback(err2);
              }
            }
            self2.emit("data", response, method);
            return callback(null, response);
          }
        );
      } catch (err) {
        self2.emit("error", err, method);
        setTimeout(function() {
          callback(err);
        }, 0);
        return void 0;
      }
    };
    Service.prototype.end = function end(endedByRPC) {
      if (this.rpcImpl) {
        if (!endedByRPC)
          this.rpcImpl(null, null, null);
        this.rpcImpl = null;
        this.emit("end").off();
      }
      return this;
    };
  }
});

// node_modules/protobufjs/src/rpc.js
var require_rpc = __commonJS({
  "node_modules/protobufjs/src/rpc.js"(exports2) {
    "use strict";
    var rpc = exports2;
    rpc.Service = require_service();
  }
});

// node_modules/protobufjs/src/roots.js
var require_roots = __commonJS({
  "node_modules/protobufjs/src/roots.js"(exports2, module2) {
    "use strict";
    module2.exports = {};
  }
});

// node_modules/protobufjs/src/index-minimal.js
var require_index_minimal = __commonJS({
  "node_modules/protobufjs/src/index-minimal.js"(exports2) {
    "use strict";
    var protobuf = exports2;
    protobuf.build = "minimal";
    protobuf.Writer = require_writer();
    protobuf.BufferWriter = require_writer_buffer();
    protobuf.Reader = require_reader();
    protobuf.BufferReader = require_reader_buffer();
    protobuf.util = require_minimal();
    protobuf.rpc = require_rpc();
    protobuf.roots = require_roots();
    protobuf.configure = configure;
    function configure() {
      protobuf.util._configure();
      protobuf.Writer._configure(protobuf.BufferWriter);
      protobuf.Reader._configure(protobuf.BufferReader);
    }
    configure();
  }
});

// node_modules/protobufjs/minimal.js
var require_minimal2 = __commonJS({
  "node_modules/protobufjs/minimal.js"(exports2, module2) {
    "use strict";
    module2.exports = require_index_minimal();
  }
});

// node_modules/gtfs-rt-bindings/gtfs-realtime.pbf.js
var require_gtfs_realtime_pbf = __commonJS({
  "node_modules/gtfs-rt-bindings/gtfs-realtime.pbf.js"(exports2, module2) {
    "use strict";
    var $protobuf = require_minimal2();
    var $Reader = $protobuf.Reader;
    var $Writer = $protobuf.Writer;
    var $util = $protobuf.util;
    var $root = $protobuf.roots["default"] || ($protobuf.roots["default"] = {});
    $root.transit_realtime = (function() {
      var transit_realtime2 = {};
      transit_realtime2.FeedMessage = (function() {
        function FeedMessage(properties) {
          this.entity = [];
          if (properties) {
            for (var keys = Object.keys(properties), i2 = 0; i2 < keys.length; ++i2)
              if (properties[keys[i2]] != null)
                this[keys[i2]] = properties[keys[i2]];
          }
        }
        FeedMessage.prototype.header = null;
        FeedMessage.prototype.entity = $util.emptyArray;
        FeedMessage.create = function create(properties) {
          return new FeedMessage(properties);
        };
        FeedMessage.encode = function encode(message, writer) {
          if (!writer)
            writer = $Writer.create();
          $root.transit_realtime.FeedHeader.encode(message.header, writer.uint32(
            /* id 1, wireType 2 =*/
            10
          ).fork()).ldelim();
          if (message.entity != null && message.entity.length)
            for (var i2 = 0; i2 < message.entity.length; ++i2)
              $root.transit_realtime.FeedEntity.encode(message.entity[i2], writer.uint32(
                /* id 2, wireType 2 =*/
                18
              ).fork()).ldelim();
          return writer;
        };
        FeedMessage.encodeDelimited = function encodeDelimited(message, writer) {
          return this.encode(message, writer).ldelim();
        };
        FeedMessage.decode = function decode(reader, length, error) {
          if (!(reader instanceof $Reader))
            reader = $Reader.create(reader);
          var end = length === void 0 ? reader.len : reader.pos + length, message = new $root.transit_realtime.FeedMessage();
          while (reader.pos < end) {
            var tag = reader.uint32();
            if (tag === error)
              break;
            switch (tag >>> 3) {
              case 1: {
                message.header = $root.transit_realtime.FeedHeader.decode(reader, reader.uint32());
                break;
              }
              case 2: {
                if (!(message.entity && message.entity.length))
                  message.entity = [];
                message.entity.push($root.transit_realtime.FeedEntity.decode(reader, reader.uint32()));
                break;
              }
              default:
                reader.skipType(tag & 7);
                break;
            }
          }
          if (!message.hasOwnProperty("header"))
            throw $util.ProtocolError("missing required 'header'", { instance: message });
          return message;
        };
        FeedMessage.decodeDelimited = function decodeDelimited(reader) {
          if (!(reader instanceof $Reader))
            reader = new $Reader(reader);
          return this.decode(reader, reader.uint32());
        };
        FeedMessage.verify = function verify(message) {
          if (typeof message !== "object" || message === null)
            return "object expected";
          {
            var error = $root.transit_realtime.FeedHeader.verify(message.header);
            if (error)
              return "header." + error;
          }
          if (message.entity != null && message.hasOwnProperty("entity")) {
            if (!Array.isArray(message.entity))
              return "entity: array expected";
            for (var i2 = 0; i2 < message.entity.length; ++i2) {
              var error = $root.transit_realtime.FeedEntity.verify(message.entity[i2]);
              if (error)
                return "entity." + error;
            }
          }
          return null;
        };
        FeedMessage.fromObject = function fromObject(object) {
          if (object instanceof $root.transit_realtime.FeedMessage)
            return object;
          var message = new $root.transit_realtime.FeedMessage();
          if (object.header != null) {
            if (typeof object.header !== "object")
              throw TypeError(".transit_realtime.FeedMessage.header: object expected");
            message.header = $root.transit_realtime.FeedHeader.fromObject(object.header);
          }
          if (object.entity) {
            if (!Array.isArray(object.entity))
              throw TypeError(".transit_realtime.FeedMessage.entity: array expected");
            message.entity = [];
            for (var i2 = 0; i2 < object.entity.length; ++i2) {
              if (typeof object.entity[i2] !== "object")
                throw TypeError(".transit_realtime.FeedMessage.entity: object expected");
              message.entity[i2] = $root.transit_realtime.FeedEntity.fromObject(object.entity[i2]);
            }
          }
          return message;
        };
        FeedMessage.toObject = function toObject(message, options) {
          if (!options)
            options = {};
          var object = {};
          if (options.arrays || options.defaults)
            object.entity = [];
          if (options.defaults)
            object.header = null;
          if (message.header != null && message.hasOwnProperty("header"))
            object.header = $root.transit_realtime.FeedHeader.toObject(message.header, options);
          if (message.entity && message.entity.length) {
            object.entity = [];
            for (var j = 0; j < message.entity.length; ++j)
              object.entity[j] = $root.transit_realtime.FeedEntity.toObject(message.entity[j], options);
          }
          return object;
        };
        FeedMessage.prototype.toJSON = function toJSON() {
          return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
        };
        FeedMessage.getTypeUrl = function getTypeUrl(typeUrlPrefix) {
          if (typeUrlPrefix === void 0) {
            typeUrlPrefix = "type.googleapis.com";
          }
          return typeUrlPrefix + "/transit_realtime.FeedMessage";
        };
        return FeedMessage;
      })();
      transit_realtime2.FeedHeader = (function() {
        function FeedHeader(properties) {
          if (properties) {
            for (var keys = Object.keys(properties), i2 = 0; i2 < keys.length; ++i2)
              if (properties[keys[i2]] != null)
                this[keys[i2]] = properties[keys[i2]];
          }
        }
        FeedHeader.prototype.gtfs_realtime_version = "";
        FeedHeader.prototype.incrementality = 0;
        FeedHeader.prototype.timestamp = $util.Long ? $util.Long.fromBits(0, 0, true) : 0;
        FeedHeader.prototype.feed_version = "";
        FeedHeader.create = function create(properties) {
          return new FeedHeader(properties);
        };
        FeedHeader.encode = function encode(message, writer) {
          if (!writer)
            writer = $Writer.create();
          writer.uint32(
            /* id 1, wireType 2 =*/
            10
          ).string(message.gtfs_realtime_version);
          if (message.incrementality != null && Object.hasOwnProperty.call(message, "incrementality"))
            writer.uint32(
              /* id 2, wireType 0 =*/
              16
            ).int32(message.incrementality);
          if (message.timestamp != null && Object.hasOwnProperty.call(message, "timestamp"))
            writer.uint32(
              /* id 3, wireType 0 =*/
              24
            ).uint64(message.timestamp);
          if (message.feed_version != null && Object.hasOwnProperty.call(message, "feed_version"))
            writer.uint32(
              /* id 4, wireType 2 =*/
              34
            ).string(message.feed_version);
          return writer;
        };
        FeedHeader.encodeDelimited = function encodeDelimited(message, writer) {
          return this.encode(message, writer).ldelim();
        };
        FeedHeader.decode = function decode(reader, length, error) {
          if (!(reader instanceof $Reader))
            reader = $Reader.create(reader);
          var end = length === void 0 ? reader.len : reader.pos + length, message = new $root.transit_realtime.FeedHeader();
          while (reader.pos < end) {
            var tag = reader.uint32();
            if (tag === error)
              break;
            switch (tag >>> 3) {
              case 1: {
                message.gtfs_realtime_version = reader.string();
                break;
              }
              case 2: {
                message.incrementality = reader.int32();
                break;
              }
              case 3: {
                message.timestamp = reader.uint64();
                break;
              }
              case 4: {
                message.feed_version = reader.string();
                break;
              }
              default:
                reader.skipType(tag & 7);
                break;
            }
          }
          if (!message.hasOwnProperty("gtfs_realtime_version"))
            throw $util.ProtocolError("missing required 'gtfs_realtime_version'", { instance: message });
          return message;
        };
        FeedHeader.decodeDelimited = function decodeDelimited(reader) {
          if (!(reader instanceof $Reader))
            reader = new $Reader(reader);
          return this.decode(reader, reader.uint32());
        };
        FeedHeader.verify = function verify(message) {
          if (typeof message !== "object" || message === null)
            return "object expected";
          if (!$util.isString(message.gtfs_realtime_version))
            return "gtfs_realtime_version: string expected";
          if (message.incrementality != null && message.hasOwnProperty("incrementality"))
            switch (message.incrementality) {
              default:
                return "incrementality: enum value expected";
              case 0:
              case 1:
                break;
            }
          if (message.timestamp != null && message.hasOwnProperty("timestamp")) {
            if (!$util.isInteger(message.timestamp) && !(message.timestamp && $util.isInteger(message.timestamp.low) && $util.isInteger(message.timestamp.high)))
              return "timestamp: integer|Long expected";
          }
          if (message.feed_version != null && message.hasOwnProperty("feed_version")) {
            if (!$util.isString(message.feed_version))
              return "feed_version: string expected";
          }
          return null;
        };
        FeedHeader.fromObject = function fromObject(object) {
          if (object instanceof $root.transit_realtime.FeedHeader)
            return object;
          var message = new $root.transit_realtime.FeedHeader();
          if (object.gtfs_realtime_version != null)
            message.gtfs_realtime_version = String(object.gtfs_realtime_version);
          switch (object.incrementality) {
            default:
              if (typeof object.incrementality === "number") {
                message.incrementality = object.incrementality;
                break;
              }
              break;
            case "FULL_DATASET":
            case 0:
              message.incrementality = 0;
              break;
            case "DIFFERENTIAL":
            case 1:
              message.incrementality = 1;
              break;
          }
          if (object.timestamp != null) {
            if ($util.Long)
              (message.timestamp = $util.Long.fromValue(object.timestamp)).unsigned = true;
            else if (typeof object.timestamp === "string")
              message.timestamp = parseInt(object.timestamp, 10);
            else if (typeof object.timestamp === "number")
              message.timestamp = object.timestamp;
            else if (typeof object.timestamp === "object")
              message.timestamp = new $util.LongBits(object.timestamp.low >>> 0, object.timestamp.high >>> 0).toNumber(true);
          }
          if (object.feed_version != null)
            message.feed_version = String(object.feed_version);
          return message;
        };
        FeedHeader.toObject = function toObject(message, options) {
          if (!options)
            options = {};
          var object = {};
          if (options.defaults) {
            object.gtfs_realtime_version = "";
            object.incrementality = options.enums === String ? "FULL_DATASET" : 0;
            if ($util.Long) {
              var long = new $util.Long(0, 0, true);
              object.timestamp = options.longs === String ? long.toString() : options.longs === Number ? long.toNumber() : long;
            } else
              object.timestamp = options.longs === String ? "0" : 0;
            object.feed_version = "";
          }
          if (message.gtfs_realtime_version != null && message.hasOwnProperty("gtfs_realtime_version"))
            object.gtfs_realtime_version = message.gtfs_realtime_version;
          if (message.incrementality != null && message.hasOwnProperty("incrementality"))
            object.incrementality = options.enums === String ? $root.transit_realtime.FeedHeader.Incrementality[message.incrementality] === void 0 ? message.incrementality : $root.transit_realtime.FeedHeader.Incrementality[message.incrementality] : message.incrementality;
          if (message.timestamp != null && message.hasOwnProperty("timestamp"))
            if (typeof message.timestamp === "number")
              object.timestamp = options.longs === String ? String(message.timestamp) : message.timestamp;
            else
              object.timestamp = options.longs === String ? $util.Long.prototype.toString.call(message.timestamp) : options.longs === Number ? new $util.LongBits(message.timestamp.low >>> 0, message.timestamp.high >>> 0).toNumber(true) : message.timestamp;
          if (message.feed_version != null && message.hasOwnProperty("feed_version"))
            object.feed_version = message.feed_version;
          return object;
        };
        FeedHeader.prototype.toJSON = function toJSON() {
          return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
        };
        FeedHeader.getTypeUrl = function getTypeUrl(typeUrlPrefix) {
          if (typeUrlPrefix === void 0) {
            typeUrlPrefix = "type.googleapis.com";
          }
          return typeUrlPrefix + "/transit_realtime.FeedHeader";
        };
        FeedHeader.Incrementality = (function() {
          var valuesById = {}, values = Object.create(valuesById);
          values[valuesById[0] = "FULL_DATASET"] = 0;
          values[valuesById[1] = "DIFFERENTIAL"] = 1;
          return values;
        })();
        return FeedHeader;
      })();
      transit_realtime2.FeedEntity = (function() {
        function FeedEntity(properties) {
          if (properties) {
            for (var keys = Object.keys(properties), i2 = 0; i2 < keys.length; ++i2)
              if (properties[keys[i2]] != null)
                this[keys[i2]] = properties[keys[i2]];
          }
        }
        FeedEntity.prototype.id = "";
        FeedEntity.prototype.is_deleted = false;
        FeedEntity.prototype.trip_update = null;
        FeedEntity.prototype.vehicle = null;
        FeedEntity.prototype.alert = null;
        FeedEntity.prototype.shape = null;
        FeedEntity.prototype.stop = null;
        FeedEntity.prototype.trip_modifications = null;
        FeedEntity.create = function create(properties) {
          return new FeedEntity(properties);
        };
        FeedEntity.encode = function encode(message, writer) {
          if (!writer)
            writer = $Writer.create();
          writer.uint32(
            /* id 1, wireType 2 =*/
            10
          ).string(message.id);
          if (message.is_deleted != null && Object.hasOwnProperty.call(message, "is_deleted"))
            writer.uint32(
              /* id 2, wireType 0 =*/
              16
            ).bool(message.is_deleted);
          if (message.trip_update != null && Object.hasOwnProperty.call(message, "trip_update"))
            $root.transit_realtime.TripUpdate.encode(message.trip_update, writer.uint32(
              /* id 3, wireType 2 =*/
              26
            ).fork()).ldelim();
          if (message.vehicle != null && Object.hasOwnProperty.call(message, "vehicle"))
            $root.transit_realtime.VehiclePosition.encode(message.vehicle, writer.uint32(
              /* id 4, wireType 2 =*/
              34
            ).fork()).ldelim();
          if (message.alert != null && Object.hasOwnProperty.call(message, "alert"))
            $root.transit_realtime.Alert.encode(message.alert, writer.uint32(
              /* id 5, wireType 2 =*/
              42
            ).fork()).ldelim();
          if (message.shape != null && Object.hasOwnProperty.call(message, "shape"))
            $root.transit_realtime.Shape.encode(message.shape, writer.uint32(
              /* id 6, wireType 2 =*/
              50
            ).fork()).ldelim();
          if (message.stop != null && Object.hasOwnProperty.call(message, "stop"))
            $root.transit_realtime.Stop.encode(message.stop, writer.uint32(
              /* id 7, wireType 2 =*/
              58
            ).fork()).ldelim();
          if (message.trip_modifications != null && Object.hasOwnProperty.call(message, "trip_modifications"))
            $root.transit_realtime.TripModifications.encode(message.trip_modifications, writer.uint32(
              /* id 8, wireType 2 =*/
              66
            ).fork()).ldelim();
          return writer;
        };
        FeedEntity.encodeDelimited = function encodeDelimited(message, writer) {
          return this.encode(message, writer).ldelim();
        };
        FeedEntity.decode = function decode(reader, length, error) {
          if (!(reader instanceof $Reader))
            reader = $Reader.create(reader);
          var end = length === void 0 ? reader.len : reader.pos + length, message = new $root.transit_realtime.FeedEntity();
          while (reader.pos < end) {
            var tag = reader.uint32();
            if (tag === error)
              break;
            switch (tag >>> 3) {
              case 1: {
                message.id = reader.string();
                break;
              }
              case 2: {
                message.is_deleted = reader.bool();
                break;
              }
              case 3: {
                message.trip_update = $root.transit_realtime.TripUpdate.decode(reader, reader.uint32());
                break;
              }
              case 4: {
                message.vehicle = $root.transit_realtime.VehiclePosition.decode(reader, reader.uint32());
                break;
              }
              case 5: {
                message.alert = $root.transit_realtime.Alert.decode(reader, reader.uint32());
                break;
              }
              case 6: {
                message.shape = $root.transit_realtime.Shape.decode(reader, reader.uint32());
                break;
              }
              case 7: {
                message.stop = $root.transit_realtime.Stop.decode(reader, reader.uint32());
                break;
              }
              case 8: {
                message.trip_modifications = $root.transit_realtime.TripModifications.decode(reader, reader.uint32());
                break;
              }
              default:
                reader.skipType(tag & 7);
                break;
            }
          }
          if (!message.hasOwnProperty("id"))
            throw $util.ProtocolError("missing required 'id'", { instance: message });
          return message;
        };
        FeedEntity.decodeDelimited = function decodeDelimited(reader) {
          if (!(reader instanceof $Reader))
            reader = new $Reader(reader);
          return this.decode(reader, reader.uint32());
        };
        FeedEntity.verify = function verify(message) {
          if (typeof message !== "object" || message === null)
            return "object expected";
          if (!$util.isString(message.id))
            return "id: string expected";
          if (message.is_deleted != null && message.hasOwnProperty("is_deleted")) {
            if (typeof message.is_deleted !== "boolean")
              return "is_deleted: boolean expected";
          }
          if (message.trip_update != null && message.hasOwnProperty("trip_update")) {
            var error = $root.transit_realtime.TripUpdate.verify(message.trip_update);
            if (error)
              return "trip_update." + error;
          }
          if (message.vehicle != null && message.hasOwnProperty("vehicle")) {
            var error = $root.transit_realtime.VehiclePosition.verify(message.vehicle);
            if (error)
              return "vehicle." + error;
          }
          if (message.alert != null && message.hasOwnProperty("alert")) {
            var error = $root.transit_realtime.Alert.verify(message.alert);
            if (error)
              return "alert." + error;
          }
          if (message.shape != null && message.hasOwnProperty("shape")) {
            var error = $root.transit_realtime.Shape.verify(message.shape);
            if (error)
              return "shape." + error;
          }
          if (message.stop != null && message.hasOwnProperty("stop")) {
            var error = $root.transit_realtime.Stop.verify(message.stop);
            if (error)
              return "stop." + error;
          }
          if (message.trip_modifications != null && message.hasOwnProperty("trip_modifications")) {
            var error = $root.transit_realtime.TripModifications.verify(message.trip_modifications);
            if (error)
              return "trip_modifications." + error;
          }
          return null;
        };
        FeedEntity.fromObject = function fromObject(object) {
          if (object instanceof $root.transit_realtime.FeedEntity)
            return object;
          var message = new $root.transit_realtime.FeedEntity();
          if (object.id != null)
            message.id = String(object.id);
          if (object.is_deleted != null)
            message.is_deleted = Boolean(object.is_deleted);
          if (object.trip_update != null) {
            if (typeof object.trip_update !== "object")
              throw TypeError(".transit_realtime.FeedEntity.trip_update: object expected");
            message.trip_update = $root.transit_realtime.TripUpdate.fromObject(object.trip_update);
          }
          if (object.vehicle != null) {
            if (typeof object.vehicle !== "object")
              throw TypeError(".transit_realtime.FeedEntity.vehicle: object expected");
            message.vehicle = $root.transit_realtime.VehiclePosition.fromObject(object.vehicle);
          }
          if (object.alert != null) {
            if (typeof object.alert !== "object")
              throw TypeError(".transit_realtime.FeedEntity.alert: object expected");
            message.alert = $root.transit_realtime.Alert.fromObject(object.alert);
          }
          if (object.shape != null) {
            if (typeof object.shape !== "object")
              throw TypeError(".transit_realtime.FeedEntity.shape: object expected");
            message.shape = $root.transit_realtime.Shape.fromObject(object.shape);
          }
          if (object.stop != null) {
            if (typeof object.stop !== "object")
              throw TypeError(".transit_realtime.FeedEntity.stop: object expected");
            message.stop = $root.transit_realtime.Stop.fromObject(object.stop);
          }
          if (object.trip_modifications != null) {
            if (typeof object.trip_modifications !== "object")
              throw TypeError(".transit_realtime.FeedEntity.trip_modifications: object expected");
            message.trip_modifications = $root.transit_realtime.TripModifications.fromObject(object.trip_modifications);
          }
          return message;
        };
        FeedEntity.toObject = function toObject(message, options) {
          if (!options)
            options = {};
          var object = {};
          if (options.defaults) {
            object.id = "";
            object.is_deleted = false;
            object.trip_update = null;
            object.vehicle = null;
            object.alert = null;
            object.shape = null;
            object.stop = null;
            object.trip_modifications = null;
          }
          if (message.id != null && message.hasOwnProperty("id"))
            object.id = message.id;
          if (message.is_deleted != null && message.hasOwnProperty("is_deleted"))
            object.is_deleted = message.is_deleted;
          if (message.trip_update != null && message.hasOwnProperty("trip_update"))
            object.trip_update = $root.transit_realtime.TripUpdate.toObject(message.trip_update, options);
          if (message.vehicle != null && message.hasOwnProperty("vehicle"))
            object.vehicle = $root.transit_realtime.VehiclePosition.toObject(message.vehicle, options);
          if (message.alert != null && message.hasOwnProperty("alert"))
            object.alert = $root.transit_realtime.Alert.toObject(message.alert, options);
          if (message.shape != null && message.hasOwnProperty("shape"))
            object.shape = $root.transit_realtime.Shape.toObject(message.shape, options);
          if (message.stop != null && message.hasOwnProperty("stop"))
            object.stop = $root.transit_realtime.Stop.toObject(message.stop, options);
          if (message.trip_modifications != null && message.hasOwnProperty("trip_modifications"))
            object.trip_modifications = $root.transit_realtime.TripModifications.toObject(message.trip_modifications, options);
          return object;
        };
        FeedEntity.prototype.toJSON = function toJSON() {
          return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
        };
        FeedEntity.getTypeUrl = function getTypeUrl(typeUrlPrefix) {
          if (typeUrlPrefix === void 0) {
            typeUrlPrefix = "type.googleapis.com";
          }
          return typeUrlPrefix + "/transit_realtime.FeedEntity";
        };
        return FeedEntity;
      })();
      transit_realtime2.TripUpdate = (function() {
        function TripUpdate(properties) {
          this.stop_time_update = [];
          if (properties) {
            for (var keys = Object.keys(properties), i2 = 0; i2 < keys.length; ++i2)
              if (properties[keys[i2]] != null)
                this[keys[i2]] = properties[keys[i2]];
          }
        }
        TripUpdate.prototype.trip = null;
        TripUpdate.prototype.vehicle = null;
        TripUpdate.prototype.stop_time_update = $util.emptyArray;
        TripUpdate.prototype.timestamp = $util.Long ? $util.Long.fromBits(0, 0, true) : 0;
        TripUpdate.prototype.delay = 0;
        TripUpdate.prototype.trip_properties = null;
        TripUpdate.create = function create(properties) {
          return new TripUpdate(properties);
        };
        TripUpdate.encode = function encode(message, writer) {
          if (!writer)
            writer = $Writer.create();
          $root.transit_realtime.TripDescriptor.encode(message.trip, writer.uint32(
            /* id 1, wireType 2 =*/
            10
          ).fork()).ldelim();
          if (message.stop_time_update != null && message.stop_time_update.length)
            for (var i2 = 0; i2 < message.stop_time_update.length; ++i2)
              $root.transit_realtime.TripUpdate.StopTimeUpdate.encode(message.stop_time_update[i2], writer.uint32(
                /* id 2, wireType 2 =*/
                18
              ).fork()).ldelim();
          if (message.vehicle != null && Object.hasOwnProperty.call(message, "vehicle"))
            $root.transit_realtime.VehicleDescriptor.encode(message.vehicle, writer.uint32(
              /* id 3, wireType 2 =*/
              26
            ).fork()).ldelim();
          if (message.timestamp != null && Object.hasOwnProperty.call(message, "timestamp"))
            writer.uint32(
              /* id 4, wireType 0 =*/
              32
            ).uint64(message.timestamp);
          if (message.delay != null && Object.hasOwnProperty.call(message, "delay"))
            writer.uint32(
              /* id 5, wireType 0 =*/
              40
            ).int32(message.delay);
          if (message.trip_properties != null && Object.hasOwnProperty.call(message, "trip_properties"))
            $root.transit_realtime.TripUpdate.TripProperties.encode(message.trip_properties, writer.uint32(
              /* id 6, wireType 2 =*/
              50
            ).fork()).ldelim();
          return writer;
        };
        TripUpdate.encodeDelimited = function encodeDelimited(message, writer) {
          return this.encode(message, writer).ldelim();
        };
        TripUpdate.decode = function decode(reader, length, error) {
          if (!(reader instanceof $Reader))
            reader = $Reader.create(reader);
          var end = length === void 0 ? reader.len : reader.pos + length, message = new $root.transit_realtime.TripUpdate();
          while (reader.pos < end) {
            var tag = reader.uint32();
            if (tag === error)
              break;
            switch (tag >>> 3) {
              case 1: {
                message.trip = $root.transit_realtime.TripDescriptor.decode(reader, reader.uint32());
                break;
              }
              case 3: {
                message.vehicle = $root.transit_realtime.VehicleDescriptor.decode(reader, reader.uint32());
                break;
              }
              case 2: {
                if (!(message.stop_time_update && message.stop_time_update.length))
                  message.stop_time_update = [];
                message.stop_time_update.push($root.transit_realtime.TripUpdate.StopTimeUpdate.decode(reader, reader.uint32()));
                break;
              }
              case 4: {
                message.timestamp = reader.uint64();
                break;
              }
              case 5: {
                message.delay = reader.int32();
                break;
              }
              case 6: {
                message.trip_properties = $root.transit_realtime.TripUpdate.TripProperties.decode(reader, reader.uint32());
                break;
              }
              default:
                reader.skipType(tag & 7);
                break;
            }
          }
          if (!message.hasOwnProperty("trip"))
            throw $util.ProtocolError("missing required 'trip'", { instance: message });
          return message;
        };
        TripUpdate.decodeDelimited = function decodeDelimited(reader) {
          if (!(reader instanceof $Reader))
            reader = new $Reader(reader);
          return this.decode(reader, reader.uint32());
        };
        TripUpdate.verify = function verify(message) {
          if (typeof message !== "object" || message === null)
            return "object expected";
          {
            var error = $root.transit_realtime.TripDescriptor.verify(message.trip);
            if (error)
              return "trip." + error;
          }
          if (message.vehicle != null && message.hasOwnProperty("vehicle")) {
            var error = $root.transit_realtime.VehicleDescriptor.verify(message.vehicle);
            if (error)
              return "vehicle." + error;
          }
          if (message.stop_time_update != null && message.hasOwnProperty("stop_time_update")) {
            if (!Array.isArray(message.stop_time_update))
              return "stop_time_update: array expected";
            for (var i2 = 0; i2 < message.stop_time_update.length; ++i2) {
              var error = $root.transit_realtime.TripUpdate.StopTimeUpdate.verify(message.stop_time_update[i2]);
              if (error)
                return "stop_time_update." + error;
            }
          }
          if (message.timestamp != null && message.hasOwnProperty("timestamp")) {
            if (!$util.isInteger(message.timestamp) && !(message.timestamp && $util.isInteger(message.timestamp.low) && $util.isInteger(message.timestamp.high)))
              return "timestamp: integer|Long expected";
          }
          if (message.delay != null && message.hasOwnProperty("delay")) {
            if (!$util.isInteger(message.delay))
              return "delay: integer expected";
          }
          if (message.trip_properties != null && message.hasOwnProperty("trip_properties")) {
            var error = $root.transit_realtime.TripUpdate.TripProperties.verify(message.trip_properties);
            if (error)
              return "trip_properties." + error;
          }
          return null;
        };
        TripUpdate.fromObject = function fromObject(object) {
          if (object instanceof $root.transit_realtime.TripUpdate)
            return object;
          var message = new $root.transit_realtime.TripUpdate();
          if (object.trip != null) {
            if (typeof object.trip !== "object")
              throw TypeError(".transit_realtime.TripUpdate.trip: object expected");
            message.trip = $root.transit_realtime.TripDescriptor.fromObject(object.trip);
          }
          if (object.vehicle != null) {
            if (typeof object.vehicle !== "object")
              throw TypeError(".transit_realtime.TripUpdate.vehicle: object expected");
            message.vehicle = $root.transit_realtime.VehicleDescriptor.fromObject(object.vehicle);
          }
          if (object.stop_time_update) {
            if (!Array.isArray(object.stop_time_update))
              throw TypeError(".transit_realtime.TripUpdate.stop_time_update: array expected");
            message.stop_time_update = [];
            for (var i2 = 0; i2 < object.stop_time_update.length; ++i2) {
              if (typeof object.stop_time_update[i2] !== "object")
                throw TypeError(".transit_realtime.TripUpdate.stop_time_update: object expected");
              message.stop_time_update[i2] = $root.transit_realtime.TripUpdate.StopTimeUpdate.fromObject(object.stop_time_update[i2]);
            }
          }
          if (object.timestamp != null) {
            if ($util.Long)
              (message.timestamp = $util.Long.fromValue(object.timestamp)).unsigned = true;
            else if (typeof object.timestamp === "string")
              message.timestamp = parseInt(object.timestamp, 10);
            else if (typeof object.timestamp === "number")
              message.timestamp = object.timestamp;
            else if (typeof object.timestamp === "object")
              message.timestamp = new $util.LongBits(object.timestamp.low >>> 0, object.timestamp.high >>> 0).toNumber(true);
          }
          if (object.delay != null)
            message.delay = object.delay | 0;
          if (object.trip_properties != null) {
            if (typeof object.trip_properties !== "object")
              throw TypeError(".transit_realtime.TripUpdate.trip_properties: object expected");
            message.trip_properties = $root.transit_realtime.TripUpdate.TripProperties.fromObject(object.trip_properties);
          }
          return message;
        };
        TripUpdate.toObject = function toObject(message, options) {
          if (!options)
            options = {};
          var object = {};
          if (options.arrays || options.defaults)
            object.stop_time_update = [];
          if (options.defaults) {
            object.trip = null;
            object.vehicle = null;
            if ($util.Long) {
              var long = new $util.Long(0, 0, true);
              object.timestamp = options.longs === String ? long.toString() : options.longs === Number ? long.toNumber() : long;
            } else
              object.timestamp = options.longs === String ? "0" : 0;
            object.delay = 0;
            object.trip_properties = null;
          }
          if (message.trip != null && message.hasOwnProperty("trip"))
            object.trip = $root.transit_realtime.TripDescriptor.toObject(message.trip, options);
          if (message.stop_time_update && message.stop_time_update.length) {
            object.stop_time_update = [];
            for (var j = 0; j < message.stop_time_update.length; ++j)
              object.stop_time_update[j] = $root.transit_realtime.TripUpdate.StopTimeUpdate.toObject(message.stop_time_update[j], options);
          }
          if (message.vehicle != null && message.hasOwnProperty("vehicle"))
            object.vehicle = $root.transit_realtime.VehicleDescriptor.toObject(message.vehicle, options);
          if (message.timestamp != null && message.hasOwnProperty("timestamp"))
            if (typeof message.timestamp === "number")
              object.timestamp = options.longs === String ? String(message.timestamp) : message.timestamp;
            else
              object.timestamp = options.longs === String ? $util.Long.prototype.toString.call(message.timestamp) : options.longs === Number ? new $util.LongBits(message.timestamp.low >>> 0, message.timestamp.high >>> 0).toNumber(true) : message.timestamp;
          if (message.delay != null && message.hasOwnProperty("delay"))
            object.delay = message.delay;
          if (message.trip_properties != null && message.hasOwnProperty("trip_properties"))
            object.trip_properties = $root.transit_realtime.TripUpdate.TripProperties.toObject(message.trip_properties, options);
          return object;
        };
        TripUpdate.prototype.toJSON = function toJSON() {
          return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
        };
        TripUpdate.getTypeUrl = function getTypeUrl(typeUrlPrefix) {
          if (typeUrlPrefix === void 0) {
            typeUrlPrefix = "type.googleapis.com";
          }
          return typeUrlPrefix + "/transit_realtime.TripUpdate";
        };
        TripUpdate.StopTimeEvent = (function() {
          function StopTimeEvent(properties) {
            if (properties) {
              for (var keys = Object.keys(properties), i2 = 0; i2 < keys.length; ++i2)
                if (properties[keys[i2]] != null)
                  this[keys[i2]] = properties[keys[i2]];
            }
          }
          StopTimeEvent.prototype.delay = 0;
          StopTimeEvent.prototype.time = $util.Long ? $util.Long.fromBits(0, 0, false) : 0;
          StopTimeEvent.prototype.uncertainty = 0;
          StopTimeEvent.prototype.scheduled_time = $util.Long ? $util.Long.fromBits(0, 0, false) : 0;
          StopTimeEvent.create = function create(properties) {
            return new StopTimeEvent(properties);
          };
          StopTimeEvent.encode = function encode(message, writer) {
            if (!writer)
              writer = $Writer.create();
            if (message.delay != null && Object.hasOwnProperty.call(message, "delay"))
              writer.uint32(
                /* id 1, wireType 0 =*/
                8
              ).int32(message.delay);
            if (message.time != null && Object.hasOwnProperty.call(message, "time"))
              writer.uint32(
                /* id 2, wireType 0 =*/
                16
              ).int64(message.time);
            if (message.uncertainty != null && Object.hasOwnProperty.call(message, "uncertainty"))
              writer.uint32(
                /* id 3, wireType 0 =*/
                24
              ).int32(message.uncertainty);
            if (message.scheduled_time != null && Object.hasOwnProperty.call(message, "scheduled_time"))
              writer.uint32(
                /* id 4, wireType 0 =*/
                32
              ).int64(message.scheduled_time);
            return writer;
          };
          StopTimeEvent.encodeDelimited = function encodeDelimited(message, writer) {
            return this.encode(message, writer).ldelim();
          };
          StopTimeEvent.decode = function decode(reader, length, error) {
            if (!(reader instanceof $Reader))
              reader = $Reader.create(reader);
            var end = length === void 0 ? reader.len : reader.pos + length, message = new $root.transit_realtime.TripUpdate.StopTimeEvent();
            while (reader.pos < end) {
              var tag = reader.uint32();
              if (tag === error)
                break;
              switch (tag >>> 3) {
                case 1: {
                  message.delay = reader.int32();
                  break;
                }
                case 2: {
                  message.time = reader.int64();
                  break;
                }
                case 3: {
                  message.uncertainty = reader.int32();
                  break;
                }
                case 4: {
                  message.scheduled_time = reader.int64();
                  break;
                }
                default:
                  reader.skipType(tag & 7);
                  break;
              }
            }
            return message;
          };
          StopTimeEvent.decodeDelimited = function decodeDelimited(reader) {
            if (!(reader instanceof $Reader))
              reader = new $Reader(reader);
            return this.decode(reader, reader.uint32());
          };
          StopTimeEvent.verify = function verify(message) {
            if (typeof message !== "object" || message === null)
              return "object expected";
            if (message.delay != null && message.hasOwnProperty("delay")) {
              if (!$util.isInteger(message.delay))
                return "delay: integer expected";
            }
            if (message.time != null && message.hasOwnProperty("time")) {
              if (!$util.isInteger(message.time) && !(message.time && $util.isInteger(message.time.low) && $util.isInteger(message.time.high)))
                return "time: integer|Long expected";
            }
            if (message.uncertainty != null && message.hasOwnProperty("uncertainty")) {
              if (!$util.isInteger(message.uncertainty))
                return "uncertainty: integer expected";
            }
            if (message.scheduled_time != null && message.hasOwnProperty("scheduled_time")) {
              if (!$util.isInteger(message.scheduled_time) && !(message.scheduled_time && $util.isInteger(message.scheduled_time.low) && $util.isInteger(message.scheduled_time.high)))
                return "scheduled_time: integer|Long expected";
            }
            return null;
          };
          StopTimeEvent.fromObject = function fromObject(object) {
            if (object instanceof $root.transit_realtime.TripUpdate.StopTimeEvent)
              return object;
            var message = new $root.transit_realtime.TripUpdate.StopTimeEvent();
            if (object.delay != null)
              message.delay = object.delay | 0;
            if (object.time != null) {
              if ($util.Long)
                (message.time = $util.Long.fromValue(object.time)).unsigned = false;
              else if (typeof object.time === "string")
                message.time = parseInt(object.time, 10);
              else if (typeof object.time === "number")
                message.time = object.time;
              else if (typeof object.time === "object")
                message.time = new $util.LongBits(object.time.low >>> 0, object.time.high >>> 0).toNumber();
            }
            if (object.uncertainty != null)
              message.uncertainty = object.uncertainty | 0;
            if (object.scheduled_time != null) {
              if ($util.Long)
                (message.scheduled_time = $util.Long.fromValue(object.scheduled_time)).unsigned = false;
              else if (typeof object.scheduled_time === "string")
                message.scheduled_time = parseInt(object.scheduled_time, 10);
              else if (typeof object.scheduled_time === "number")
                message.scheduled_time = object.scheduled_time;
              else if (typeof object.scheduled_time === "object")
                message.scheduled_time = new $util.LongBits(object.scheduled_time.low >>> 0, object.scheduled_time.high >>> 0).toNumber();
            }
            return message;
          };
          StopTimeEvent.toObject = function toObject(message, options) {
            if (!options)
              options = {};
            var object = {};
            if (options.defaults) {
              object.delay = 0;
              if ($util.Long) {
                var long = new $util.Long(0, 0, false);
                object.time = options.longs === String ? long.toString() : options.longs === Number ? long.toNumber() : long;
              } else
                object.time = options.longs === String ? "0" : 0;
              object.uncertainty = 0;
              if ($util.Long) {
                var long = new $util.Long(0, 0, false);
                object.scheduled_time = options.longs === String ? long.toString() : options.longs === Number ? long.toNumber() : long;
              } else
                object.scheduled_time = options.longs === String ? "0" : 0;
            }
            if (message.delay != null && message.hasOwnProperty("delay"))
              object.delay = message.delay;
            if (message.time != null && message.hasOwnProperty("time"))
              if (typeof message.time === "number")
                object.time = options.longs === String ? String(message.time) : message.time;
              else
                object.time = options.longs === String ? $util.Long.prototype.toString.call(message.time) : options.longs === Number ? new $util.LongBits(message.time.low >>> 0, message.time.high >>> 0).toNumber() : message.time;
            if (message.uncertainty != null && message.hasOwnProperty("uncertainty"))
              object.uncertainty = message.uncertainty;
            if (message.scheduled_time != null && message.hasOwnProperty("scheduled_time"))
              if (typeof message.scheduled_time === "number")
                object.scheduled_time = options.longs === String ? String(message.scheduled_time) : message.scheduled_time;
              else
                object.scheduled_time = options.longs === String ? $util.Long.prototype.toString.call(message.scheduled_time) : options.longs === Number ? new $util.LongBits(message.scheduled_time.low >>> 0, message.scheduled_time.high >>> 0).toNumber() : message.scheduled_time;
            return object;
          };
          StopTimeEvent.prototype.toJSON = function toJSON() {
            return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
          };
          StopTimeEvent.getTypeUrl = function getTypeUrl(typeUrlPrefix) {
            if (typeUrlPrefix === void 0) {
              typeUrlPrefix = "type.googleapis.com";
            }
            return typeUrlPrefix + "/transit_realtime.TripUpdate.StopTimeEvent";
          };
          return StopTimeEvent;
        })();
        TripUpdate.StopTimeUpdate = (function() {
          function StopTimeUpdate(properties) {
            if (properties) {
              for (var keys = Object.keys(properties), i2 = 0; i2 < keys.length; ++i2)
                if (properties[keys[i2]] != null)
                  this[keys[i2]] = properties[keys[i2]];
            }
          }
          StopTimeUpdate.prototype.stop_sequence = 0;
          StopTimeUpdate.prototype.stop_id = "";
          StopTimeUpdate.prototype.arrival = null;
          StopTimeUpdate.prototype.departure = null;
          StopTimeUpdate.prototype.departure_occupancy_status = 0;
          StopTimeUpdate.prototype.schedule_relationship = 0;
          StopTimeUpdate.prototype.stop_time_properties = null;
          StopTimeUpdate.create = function create(properties) {
            return new StopTimeUpdate(properties);
          };
          StopTimeUpdate.encode = function encode(message, writer) {
            if (!writer)
              writer = $Writer.create();
            if (message.stop_sequence != null && Object.hasOwnProperty.call(message, "stop_sequence"))
              writer.uint32(
                /* id 1, wireType 0 =*/
                8
              ).uint32(message.stop_sequence);
            if (message.arrival != null && Object.hasOwnProperty.call(message, "arrival"))
              $root.transit_realtime.TripUpdate.StopTimeEvent.encode(message.arrival, writer.uint32(
                /* id 2, wireType 2 =*/
                18
              ).fork()).ldelim();
            if (message.departure != null && Object.hasOwnProperty.call(message, "departure"))
              $root.transit_realtime.TripUpdate.StopTimeEvent.encode(message.departure, writer.uint32(
                /* id 3, wireType 2 =*/
                26
              ).fork()).ldelim();
            if (message.stop_id != null && Object.hasOwnProperty.call(message, "stop_id"))
              writer.uint32(
                /* id 4, wireType 2 =*/
                34
              ).string(message.stop_id);
            if (message.schedule_relationship != null && Object.hasOwnProperty.call(message, "schedule_relationship"))
              writer.uint32(
                /* id 5, wireType 0 =*/
                40
              ).int32(message.schedule_relationship);
            if (message.stop_time_properties != null && Object.hasOwnProperty.call(message, "stop_time_properties"))
              $root.transit_realtime.TripUpdate.StopTimeUpdate.StopTimeProperties.encode(message.stop_time_properties, writer.uint32(
                /* id 6, wireType 2 =*/
                50
              ).fork()).ldelim();
            if (message.departure_occupancy_status != null && Object.hasOwnProperty.call(message, "departure_occupancy_status"))
              writer.uint32(
                /* id 7, wireType 0 =*/
                56
              ).int32(message.departure_occupancy_status);
            return writer;
          };
          StopTimeUpdate.encodeDelimited = function encodeDelimited(message, writer) {
            return this.encode(message, writer).ldelim();
          };
          StopTimeUpdate.decode = function decode(reader, length, error) {
            if (!(reader instanceof $Reader))
              reader = $Reader.create(reader);
            var end = length === void 0 ? reader.len : reader.pos + length, message = new $root.transit_realtime.TripUpdate.StopTimeUpdate();
            while (reader.pos < end) {
              var tag = reader.uint32();
              if (tag === error)
                break;
              switch (tag >>> 3) {
                case 1: {
                  message.stop_sequence = reader.uint32();
                  break;
                }
                case 4: {
                  message.stop_id = reader.string();
                  break;
                }
                case 2: {
                  message.arrival = $root.transit_realtime.TripUpdate.StopTimeEvent.decode(reader, reader.uint32());
                  break;
                }
                case 3: {
                  message.departure = $root.transit_realtime.TripUpdate.StopTimeEvent.decode(reader, reader.uint32());
                  break;
                }
                case 7: {
                  message.departure_occupancy_status = reader.int32();
                  break;
                }
                case 5: {
                  message.schedule_relationship = reader.int32();
                  break;
                }
                case 6: {
                  message.stop_time_properties = $root.transit_realtime.TripUpdate.StopTimeUpdate.StopTimeProperties.decode(reader, reader.uint32());
                  break;
                }
                default:
                  reader.skipType(tag & 7);
                  break;
              }
            }
            return message;
          };
          StopTimeUpdate.decodeDelimited = function decodeDelimited(reader) {
            if (!(reader instanceof $Reader))
              reader = new $Reader(reader);
            return this.decode(reader, reader.uint32());
          };
          StopTimeUpdate.verify = function verify(message) {
            if (typeof message !== "object" || message === null)
              return "object expected";
            if (message.stop_sequence != null && message.hasOwnProperty("stop_sequence")) {
              if (!$util.isInteger(message.stop_sequence))
                return "stop_sequence: integer expected";
            }
            if (message.stop_id != null && message.hasOwnProperty("stop_id")) {
              if (!$util.isString(message.stop_id))
                return "stop_id: string expected";
            }
            if (message.arrival != null && message.hasOwnProperty("arrival")) {
              var error = $root.transit_realtime.TripUpdate.StopTimeEvent.verify(message.arrival);
              if (error)
                return "arrival." + error;
            }
            if (message.departure != null && message.hasOwnProperty("departure")) {
              var error = $root.transit_realtime.TripUpdate.StopTimeEvent.verify(message.departure);
              if (error)
                return "departure." + error;
            }
            if (message.departure_occupancy_status != null && message.hasOwnProperty("departure_occupancy_status"))
              switch (message.departure_occupancy_status) {
                default:
                  return "departure_occupancy_status: enum value expected";
                case 0:
                case 1:
                case 2:
                case 3:
                case 4:
                case 5:
                case 6:
                case 7:
                case 8:
                  break;
              }
            if (message.schedule_relationship != null && message.hasOwnProperty("schedule_relationship"))
              switch (message.schedule_relationship) {
                default:
                  return "schedule_relationship: enum value expected";
                case 0:
                case 1:
                case 2:
                case 3:
                  break;
              }
            if (message.stop_time_properties != null && message.hasOwnProperty("stop_time_properties")) {
              var error = $root.transit_realtime.TripUpdate.StopTimeUpdate.StopTimeProperties.verify(message.stop_time_properties);
              if (error)
                return "stop_time_properties." + error;
            }
            return null;
          };
          StopTimeUpdate.fromObject = function fromObject(object) {
            if (object instanceof $root.transit_realtime.TripUpdate.StopTimeUpdate)
              return object;
            var message = new $root.transit_realtime.TripUpdate.StopTimeUpdate();
            if (object.stop_sequence != null)
              message.stop_sequence = object.stop_sequence >>> 0;
            if (object.stop_id != null)
              message.stop_id = String(object.stop_id);
            if (object.arrival != null) {
              if (typeof object.arrival !== "object")
                throw TypeError(".transit_realtime.TripUpdate.StopTimeUpdate.arrival: object expected");
              message.arrival = $root.transit_realtime.TripUpdate.StopTimeEvent.fromObject(object.arrival);
            }
            if (object.departure != null) {
              if (typeof object.departure !== "object")
                throw TypeError(".transit_realtime.TripUpdate.StopTimeUpdate.departure: object expected");
              message.departure = $root.transit_realtime.TripUpdate.StopTimeEvent.fromObject(object.departure);
            }
            switch (object.departure_occupancy_status) {
              default:
                if (typeof object.departure_occupancy_status === "number") {
                  message.departure_occupancy_status = object.departure_occupancy_status;
                  break;
                }
                break;
              case "EMPTY":
              case 0:
                message.departure_occupancy_status = 0;
                break;
              case "MANY_SEATS_AVAILABLE":
              case 1:
                message.departure_occupancy_status = 1;
                break;
              case "FEW_SEATS_AVAILABLE":
              case 2:
                message.departure_occupancy_status = 2;
                break;
              case "STANDING_ROOM_ONLY":
              case 3:
                message.departure_occupancy_status = 3;
                break;
              case "CRUSHED_STANDING_ROOM_ONLY":
              case 4:
                message.departure_occupancy_status = 4;
                break;
              case "FULL":
              case 5:
                message.departure_occupancy_status = 5;
                break;
              case "NOT_ACCEPTING_PASSENGERS":
              case 6:
                message.departure_occupancy_status = 6;
                break;
              case "NO_DATA_AVAILABLE":
              case 7:
                message.departure_occupancy_status = 7;
                break;
              case "NOT_BOARDABLE":
              case 8:
                message.departure_occupancy_status = 8;
                break;
            }
            switch (object.schedule_relationship) {
              default:
                if (typeof object.schedule_relationship === "number") {
                  message.schedule_relationship = object.schedule_relationship;
                  break;
                }
                break;
              case "SCHEDULED":
              case 0:
                message.schedule_relationship = 0;
                break;
              case "SKIPPED":
              case 1:
                message.schedule_relationship = 1;
                break;
              case "NO_DATA":
              case 2:
                message.schedule_relationship = 2;
                break;
              case "UNSCHEDULED":
              case 3:
                message.schedule_relationship = 3;
                break;
            }
            if (object.stop_time_properties != null) {
              if (typeof object.stop_time_properties !== "object")
                throw TypeError(".transit_realtime.TripUpdate.StopTimeUpdate.stop_time_properties: object expected");
              message.stop_time_properties = $root.transit_realtime.TripUpdate.StopTimeUpdate.StopTimeProperties.fromObject(object.stop_time_properties);
            }
            return message;
          };
          StopTimeUpdate.toObject = function toObject(message, options) {
            if (!options)
              options = {};
            var object = {};
            if (options.defaults) {
              object.stop_sequence = 0;
              object.arrival = null;
              object.departure = null;
              object.stop_id = "";
              object.schedule_relationship = options.enums === String ? "SCHEDULED" : 0;
              object.stop_time_properties = null;
              object.departure_occupancy_status = options.enums === String ? "EMPTY" : 0;
            }
            if (message.stop_sequence != null && message.hasOwnProperty("stop_sequence"))
              object.stop_sequence = message.stop_sequence;
            if (message.arrival != null && message.hasOwnProperty("arrival"))
              object.arrival = $root.transit_realtime.TripUpdate.StopTimeEvent.toObject(message.arrival, options);
            if (message.departure != null && message.hasOwnProperty("departure"))
              object.departure = $root.transit_realtime.TripUpdate.StopTimeEvent.toObject(message.departure, options);
            if (message.stop_id != null && message.hasOwnProperty("stop_id"))
              object.stop_id = message.stop_id;
            if (message.schedule_relationship != null && message.hasOwnProperty("schedule_relationship"))
              object.schedule_relationship = options.enums === String ? $root.transit_realtime.TripUpdate.StopTimeUpdate.ScheduleRelationship[message.schedule_relationship] === void 0 ? message.schedule_relationship : $root.transit_realtime.TripUpdate.StopTimeUpdate.ScheduleRelationship[message.schedule_relationship] : message.schedule_relationship;
            if (message.stop_time_properties != null && message.hasOwnProperty("stop_time_properties"))
              object.stop_time_properties = $root.transit_realtime.TripUpdate.StopTimeUpdate.StopTimeProperties.toObject(message.stop_time_properties, options);
            if (message.departure_occupancy_status != null && message.hasOwnProperty("departure_occupancy_status"))
              object.departure_occupancy_status = options.enums === String ? $root.transit_realtime.VehiclePosition.OccupancyStatus[message.departure_occupancy_status] === void 0 ? message.departure_occupancy_status : $root.transit_realtime.VehiclePosition.OccupancyStatus[message.departure_occupancy_status] : message.departure_occupancy_status;
            return object;
          };
          StopTimeUpdate.prototype.toJSON = function toJSON() {
            return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
          };
          StopTimeUpdate.getTypeUrl = function getTypeUrl(typeUrlPrefix) {
            if (typeUrlPrefix === void 0) {
              typeUrlPrefix = "type.googleapis.com";
            }
            return typeUrlPrefix + "/transit_realtime.TripUpdate.StopTimeUpdate";
          };
          StopTimeUpdate.ScheduleRelationship = (function() {
            var valuesById = {}, values = Object.create(valuesById);
            values[valuesById[0] = "SCHEDULED"] = 0;
            values[valuesById[1] = "SKIPPED"] = 1;
            values[valuesById[2] = "NO_DATA"] = 2;
            values[valuesById[3] = "UNSCHEDULED"] = 3;
            return values;
          })();
          StopTimeUpdate.StopTimeProperties = (function() {
            function StopTimeProperties(properties) {
              if (properties) {
                for (var keys = Object.keys(properties), i2 = 0; i2 < keys.length; ++i2)
                  if (properties[keys[i2]] != null)
                    this[keys[i2]] = properties[keys[i2]];
              }
            }
            StopTimeProperties.prototype.assigned_stop_id = "";
            StopTimeProperties.prototype.stop_headsign = "";
            StopTimeProperties.prototype.pickup_type = 0;
            StopTimeProperties.prototype.drop_off_type = 0;
            StopTimeProperties.create = function create(properties) {
              return new StopTimeProperties(properties);
            };
            StopTimeProperties.encode = function encode(message, writer) {
              if (!writer)
                writer = $Writer.create();
              if (message.assigned_stop_id != null && Object.hasOwnProperty.call(message, "assigned_stop_id"))
                writer.uint32(
                  /* id 1, wireType 2 =*/
                  10
                ).string(message.assigned_stop_id);
              if (message.stop_headsign != null && Object.hasOwnProperty.call(message, "stop_headsign"))
                writer.uint32(
                  /* id 2, wireType 2 =*/
                  18
                ).string(message.stop_headsign);
              if (message.pickup_type != null && Object.hasOwnProperty.call(message, "pickup_type"))
                writer.uint32(
                  /* id 3, wireType 0 =*/
                  24
                ).int32(message.pickup_type);
              if (message.drop_off_type != null && Object.hasOwnProperty.call(message, "drop_off_type"))
                writer.uint32(
                  /* id 4, wireType 0 =*/
                  32
                ).int32(message.drop_off_type);
              return writer;
            };
            StopTimeProperties.encodeDelimited = function encodeDelimited(message, writer) {
              return this.encode(message, writer).ldelim();
            };
            StopTimeProperties.decode = function decode(reader, length, error) {
              if (!(reader instanceof $Reader))
                reader = $Reader.create(reader);
              var end = length === void 0 ? reader.len : reader.pos + length, message = new $root.transit_realtime.TripUpdate.StopTimeUpdate.StopTimeProperties();
              while (reader.pos < end) {
                var tag = reader.uint32();
                if (tag === error)
                  break;
                switch (tag >>> 3) {
                  case 1: {
                    message.assigned_stop_id = reader.string();
                    break;
                  }
                  case 2: {
                    message.stop_headsign = reader.string();
                    break;
                  }
                  case 3: {
                    message.pickup_type = reader.int32();
                    break;
                  }
                  case 4: {
                    message.drop_off_type = reader.int32();
                    break;
                  }
                  default:
                    reader.skipType(tag & 7);
                    break;
                }
              }
              return message;
            };
            StopTimeProperties.decodeDelimited = function decodeDelimited(reader) {
              if (!(reader instanceof $Reader))
                reader = new $Reader(reader);
              return this.decode(reader, reader.uint32());
            };
            StopTimeProperties.verify = function verify(message) {
              if (typeof message !== "object" || message === null)
                return "object expected";
              if (message.assigned_stop_id != null && message.hasOwnProperty("assigned_stop_id")) {
                if (!$util.isString(message.assigned_stop_id))
                  return "assigned_stop_id: string expected";
              }
              if (message.stop_headsign != null && message.hasOwnProperty("stop_headsign")) {
                if (!$util.isString(message.stop_headsign))
                  return "stop_headsign: string expected";
              }
              if (message.pickup_type != null && message.hasOwnProperty("pickup_type"))
                switch (message.pickup_type) {
                  default:
                    return "pickup_type: enum value expected";
                  case 0:
                  case 1:
                  case 2:
                  case 3:
                    break;
                }
              if (message.drop_off_type != null && message.hasOwnProperty("drop_off_type"))
                switch (message.drop_off_type) {
                  default:
                    return "drop_off_type: enum value expected";
                  case 0:
                  case 1:
                  case 2:
                  case 3:
                    break;
                }
              return null;
            };
            StopTimeProperties.fromObject = function fromObject(object) {
              if (object instanceof $root.transit_realtime.TripUpdate.StopTimeUpdate.StopTimeProperties)
                return object;
              var message = new $root.transit_realtime.TripUpdate.StopTimeUpdate.StopTimeProperties();
              if (object.assigned_stop_id != null)
                message.assigned_stop_id = String(object.assigned_stop_id);
              if (object.stop_headsign != null)
                message.stop_headsign = String(object.stop_headsign);
              switch (object.pickup_type) {
                default:
                  if (typeof object.pickup_type === "number") {
                    message.pickup_type = object.pickup_type;
                    break;
                  }
                  break;
                case "REGULAR":
                case 0:
                  message.pickup_type = 0;
                  break;
                case "NONE":
                case 1:
                  message.pickup_type = 1;
                  break;
                case "PHONE_AGENCY":
                case 2:
                  message.pickup_type = 2;
                  break;
                case "COORDINATE_WITH_DRIVER":
                case 3:
                  message.pickup_type = 3;
                  break;
              }
              switch (object.drop_off_type) {
                default:
                  if (typeof object.drop_off_type === "number") {
                    message.drop_off_type = object.drop_off_type;
                    break;
                  }
                  break;
                case "REGULAR":
                case 0:
                  message.drop_off_type = 0;
                  break;
                case "NONE":
                case 1:
                  message.drop_off_type = 1;
                  break;
                case "PHONE_AGENCY":
                case 2:
                  message.drop_off_type = 2;
                  break;
                case "COORDINATE_WITH_DRIVER":
                case 3:
                  message.drop_off_type = 3;
                  break;
              }
              return message;
            };
            StopTimeProperties.toObject = function toObject(message, options) {
              if (!options)
                options = {};
              var object = {};
              if (options.defaults) {
                object.assigned_stop_id = "";
                object.stop_headsign = "";
                object.pickup_type = options.enums === String ? "REGULAR" : 0;
                object.drop_off_type = options.enums === String ? "REGULAR" : 0;
              }
              if (message.assigned_stop_id != null && message.hasOwnProperty("assigned_stop_id"))
                object.assigned_stop_id = message.assigned_stop_id;
              if (message.stop_headsign != null && message.hasOwnProperty("stop_headsign"))
                object.stop_headsign = message.stop_headsign;
              if (message.pickup_type != null && message.hasOwnProperty("pickup_type"))
                object.pickup_type = options.enums === String ? $root.transit_realtime.TripUpdate.StopTimeUpdate.StopTimeProperties.DropOffPickupType[message.pickup_type] === void 0 ? message.pickup_type : $root.transit_realtime.TripUpdate.StopTimeUpdate.StopTimeProperties.DropOffPickupType[message.pickup_type] : message.pickup_type;
              if (message.drop_off_type != null && message.hasOwnProperty("drop_off_type"))
                object.drop_off_type = options.enums === String ? $root.transit_realtime.TripUpdate.StopTimeUpdate.StopTimeProperties.DropOffPickupType[message.drop_off_type] === void 0 ? message.drop_off_type : $root.transit_realtime.TripUpdate.StopTimeUpdate.StopTimeProperties.DropOffPickupType[message.drop_off_type] : message.drop_off_type;
              return object;
            };
            StopTimeProperties.prototype.toJSON = function toJSON() {
              return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
            };
            StopTimeProperties.getTypeUrl = function getTypeUrl(typeUrlPrefix) {
              if (typeUrlPrefix === void 0) {
                typeUrlPrefix = "type.googleapis.com";
              }
              return typeUrlPrefix + "/transit_realtime.TripUpdate.StopTimeUpdate.StopTimeProperties";
            };
            StopTimeProperties.DropOffPickupType = (function() {
              var valuesById = {}, values = Object.create(valuesById);
              values[valuesById[0] = "REGULAR"] = 0;
              values[valuesById[1] = "NONE"] = 1;
              values[valuesById[2] = "PHONE_AGENCY"] = 2;
              values[valuesById[3] = "COORDINATE_WITH_DRIVER"] = 3;
              return values;
            })();
            return StopTimeProperties;
          })();
          return StopTimeUpdate;
        })();
        TripUpdate.TripProperties = (function() {
          function TripProperties(properties) {
            if (properties) {
              for (var keys = Object.keys(properties), i2 = 0; i2 < keys.length; ++i2)
                if (properties[keys[i2]] != null)
                  this[keys[i2]] = properties[keys[i2]];
            }
          }
          TripProperties.prototype.trip_id = "";
          TripProperties.prototype.start_date = "";
          TripProperties.prototype.start_time = "";
          TripProperties.prototype.shape_id = "";
          TripProperties.prototype.trip_headsign = "";
          TripProperties.prototype.trip_short_name = "";
          TripProperties.create = function create(properties) {
            return new TripProperties(properties);
          };
          TripProperties.encode = function encode(message, writer) {
            if (!writer)
              writer = $Writer.create();
            if (message.trip_id != null && Object.hasOwnProperty.call(message, "trip_id"))
              writer.uint32(
                /* id 1, wireType 2 =*/
                10
              ).string(message.trip_id);
            if (message.start_date != null && Object.hasOwnProperty.call(message, "start_date"))
              writer.uint32(
                /* id 2, wireType 2 =*/
                18
              ).string(message.start_date);
            if (message.start_time != null && Object.hasOwnProperty.call(message, "start_time"))
              writer.uint32(
                /* id 3, wireType 2 =*/
                26
              ).string(message.start_time);
            if (message.shape_id != null && Object.hasOwnProperty.call(message, "shape_id"))
              writer.uint32(
                /* id 4, wireType 2 =*/
                34
              ).string(message.shape_id);
            if (message.trip_headsign != null && Object.hasOwnProperty.call(message, "trip_headsign"))
              writer.uint32(
                /* id 5, wireType 2 =*/
                42
              ).string(message.trip_headsign);
            if (message.trip_short_name != null && Object.hasOwnProperty.call(message, "trip_short_name"))
              writer.uint32(
                /* id 6, wireType 2 =*/
                50
              ).string(message.trip_short_name);
            return writer;
          };
          TripProperties.encodeDelimited = function encodeDelimited(message, writer) {
            return this.encode(message, writer).ldelim();
          };
          TripProperties.decode = function decode(reader, length, error) {
            if (!(reader instanceof $Reader))
              reader = $Reader.create(reader);
            var end = length === void 0 ? reader.len : reader.pos + length, message = new $root.transit_realtime.TripUpdate.TripProperties();
            while (reader.pos < end) {
              var tag = reader.uint32();
              if (tag === error)
                break;
              switch (tag >>> 3) {
                case 1: {
                  message.trip_id = reader.string();
                  break;
                }
                case 2: {
                  message.start_date = reader.string();
                  break;
                }
                case 3: {
                  message.start_time = reader.string();
                  break;
                }
                case 4: {
                  message.shape_id = reader.string();
                  break;
                }
                case 5: {
                  message.trip_headsign = reader.string();
                  break;
                }
                case 6: {
                  message.trip_short_name = reader.string();
                  break;
                }
                default:
                  reader.skipType(tag & 7);
                  break;
              }
            }
            return message;
          };
          TripProperties.decodeDelimited = function decodeDelimited(reader) {
            if (!(reader instanceof $Reader))
              reader = new $Reader(reader);
            return this.decode(reader, reader.uint32());
          };
          TripProperties.verify = function verify(message) {
            if (typeof message !== "object" || message === null)
              return "object expected";
            if (message.trip_id != null && message.hasOwnProperty("trip_id")) {
              if (!$util.isString(message.trip_id))
                return "trip_id: string expected";
            }
            if (message.start_date != null && message.hasOwnProperty("start_date")) {
              if (!$util.isString(message.start_date))
                return "start_date: string expected";
            }
            if (message.start_time != null && message.hasOwnProperty("start_time")) {
              if (!$util.isString(message.start_time))
                return "start_time: string expected";
            }
            if (message.shape_id != null && message.hasOwnProperty("shape_id")) {
              if (!$util.isString(message.shape_id))
                return "shape_id: string expected";
            }
            if (message.trip_headsign != null && message.hasOwnProperty("trip_headsign")) {
              if (!$util.isString(message.trip_headsign))
                return "trip_headsign: string expected";
            }
            if (message.trip_short_name != null && message.hasOwnProperty("trip_short_name")) {
              if (!$util.isString(message.trip_short_name))
                return "trip_short_name: string expected";
            }
            return null;
          };
          TripProperties.fromObject = function fromObject(object) {
            if (object instanceof $root.transit_realtime.TripUpdate.TripProperties)
              return object;
            var message = new $root.transit_realtime.TripUpdate.TripProperties();
            if (object.trip_id != null)
              message.trip_id = String(object.trip_id);
            if (object.start_date != null)
              message.start_date = String(object.start_date);
            if (object.start_time != null)
              message.start_time = String(object.start_time);
            if (object.shape_id != null)
              message.shape_id = String(object.shape_id);
            if (object.trip_headsign != null)
              message.trip_headsign = String(object.trip_headsign);
            if (object.trip_short_name != null)
              message.trip_short_name = String(object.trip_short_name);
            return message;
          };
          TripProperties.toObject = function toObject(message, options) {
            if (!options)
              options = {};
            var object = {};
            if (options.defaults) {
              object.trip_id = "";
              object.start_date = "";
              object.start_time = "";
              object.shape_id = "";
              object.trip_headsign = "";
              object.trip_short_name = "";
            }
            if (message.trip_id != null && message.hasOwnProperty("trip_id"))
              object.trip_id = message.trip_id;
            if (message.start_date != null && message.hasOwnProperty("start_date"))
              object.start_date = message.start_date;
            if (message.start_time != null && message.hasOwnProperty("start_time"))
              object.start_time = message.start_time;
            if (message.shape_id != null && message.hasOwnProperty("shape_id"))
              object.shape_id = message.shape_id;
            if (message.trip_headsign != null && message.hasOwnProperty("trip_headsign"))
              object.trip_headsign = message.trip_headsign;
            if (message.trip_short_name != null && message.hasOwnProperty("trip_short_name"))
              object.trip_short_name = message.trip_short_name;
            return object;
          };
          TripProperties.prototype.toJSON = function toJSON() {
            return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
          };
          TripProperties.getTypeUrl = function getTypeUrl(typeUrlPrefix) {
            if (typeUrlPrefix === void 0) {
              typeUrlPrefix = "type.googleapis.com";
            }
            return typeUrlPrefix + "/transit_realtime.TripUpdate.TripProperties";
          };
          return TripProperties;
        })();
        return TripUpdate;
      })();
      transit_realtime2.VehiclePosition = (function() {
        function VehiclePosition(properties) {
          this.multi_carriage_details = [];
          if (properties) {
            for (var keys = Object.keys(properties), i2 = 0; i2 < keys.length; ++i2)
              if (properties[keys[i2]] != null)
                this[keys[i2]] = properties[keys[i2]];
          }
        }
        VehiclePosition.prototype.trip = null;
        VehiclePosition.prototype.vehicle = null;
        VehiclePosition.prototype.position = null;
        VehiclePosition.prototype.current_stop_sequence = 0;
        VehiclePosition.prototype.stop_id = "";
        VehiclePosition.prototype.current_status = 2;
        VehiclePosition.prototype.timestamp = $util.Long ? $util.Long.fromBits(0, 0, true) : 0;
        VehiclePosition.prototype.congestion_level = 0;
        VehiclePosition.prototype.occupancy_status = 0;
        VehiclePosition.prototype.occupancy_percentage = 0;
        VehiclePosition.prototype.multi_carriage_details = $util.emptyArray;
        VehiclePosition.create = function create(properties) {
          return new VehiclePosition(properties);
        };
        VehiclePosition.encode = function encode(message, writer) {
          if (!writer)
            writer = $Writer.create();
          if (message.trip != null && Object.hasOwnProperty.call(message, "trip"))
            $root.transit_realtime.TripDescriptor.encode(message.trip, writer.uint32(
              /* id 1, wireType 2 =*/
              10
            ).fork()).ldelim();
          if (message.position != null && Object.hasOwnProperty.call(message, "position"))
            $root.transit_realtime.Position.encode(message.position, writer.uint32(
              /* id 2, wireType 2 =*/
              18
            ).fork()).ldelim();
          if (message.current_stop_sequence != null && Object.hasOwnProperty.call(message, "current_stop_sequence"))
            writer.uint32(
              /* id 3, wireType 0 =*/
              24
            ).uint32(message.current_stop_sequence);
          if (message.current_status != null && Object.hasOwnProperty.call(message, "current_status"))
            writer.uint32(
              /* id 4, wireType 0 =*/
              32
            ).int32(message.current_status);
          if (message.timestamp != null && Object.hasOwnProperty.call(message, "timestamp"))
            writer.uint32(
              /* id 5, wireType 0 =*/
              40
            ).uint64(message.timestamp);
          if (message.congestion_level != null && Object.hasOwnProperty.call(message, "congestion_level"))
            writer.uint32(
              /* id 6, wireType 0 =*/
              48
            ).int32(message.congestion_level);
          if (message.stop_id != null && Object.hasOwnProperty.call(message, "stop_id"))
            writer.uint32(
              /* id 7, wireType 2 =*/
              58
            ).string(message.stop_id);
          if (message.vehicle != null && Object.hasOwnProperty.call(message, "vehicle"))
            $root.transit_realtime.VehicleDescriptor.encode(message.vehicle, writer.uint32(
              /* id 8, wireType 2 =*/
              66
            ).fork()).ldelim();
          if (message.occupancy_status != null && Object.hasOwnProperty.call(message, "occupancy_status"))
            writer.uint32(
              /* id 9, wireType 0 =*/
              72
            ).int32(message.occupancy_status);
          if (message.occupancy_percentage != null && Object.hasOwnProperty.call(message, "occupancy_percentage"))
            writer.uint32(
              /* id 10, wireType 0 =*/
              80
            ).uint32(message.occupancy_percentage);
          if (message.multi_carriage_details != null && message.multi_carriage_details.length)
            for (var i2 = 0; i2 < message.multi_carriage_details.length; ++i2)
              $root.transit_realtime.VehiclePosition.CarriageDetails.encode(message.multi_carriage_details[i2], writer.uint32(
                /* id 11, wireType 2 =*/
                90
              ).fork()).ldelim();
          return writer;
        };
        VehiclePosition.encodeDelimited = function encodeDelimited(message, writer) {
          return this.encode(message, writer).ldelim();
        };
        VehiclePosition.decode = function decode(reader, length, error) {
          if (!(reader instanceof $Reader))
            reader = $Reader.create(reader);
          var end = length === void 0 ? reader.len : reader.pos + length, message = new $root.transit_realtime.VehiclePosition();
          while (reader.pos < end) {
            var tag = reader.uint32();
            if (tag === error)
              break;
            switch (tag >>> 3) {
              case 1: {
                message.trip = $root.transit_realtime.TripDescriptor.decode(reader, reader.uint32());
                break;
              }
              case 8: {
                message.vehicle = $root.transit_realtime.VehicleDescriptor.decode(reader, reader.uint32());
                break;
              }
              case 2: {
                message.position = $root.transit_realtime.Position.decode(reader, reader.uint32());
                break;
              }
              case 3: {
                message.current_stop_sequence = reader.uint32();
                break;
              }
              case 7: {
                message.stop_id = reader.string();
                break;
              }
              case 4: {
                message.current_status = reader.int32();
                break;
              }
              case 5: {
                message.timestamp = reader.uint64();
                break;
              }
              case 6: {
                message.congestion_level = reader.int32();
                break;
              }
              case 9: {
                message.occupancy_status = reader.int32();
                break;
              }
              case 10: {
                message.occupancy_percentage = reader.uint32();
                break;
              }
              case 11: {
                if (!(message.multi_carriage_details && message.multi_carriage_details.length))
                  message.multi_carriage_details = [];
                message.multi_carriage_details.push($root.transit_realtime.VehiclePosition.CarriageDetails.decode(reader, reader.uint32()));
                break;
              }
              default:
                reader.skipType(tag & 7);
                break;
            }
          }
          return message;
        };
        VehiclePosition.decodeDelimited = function decodeDelimited(reader) {
          if (!(reader instanceof $Reader))
            reader = new $Reader(reader);
          return this.decode(reader, reader.uint32());
        };
        VehiclePosition.verify = function verify(message) {
          if (typeof message !== "object" || message === null)
            return "object expected";
          if (message.trip != null && message.hasOwnProperty("trip")) {
            var error = $root.transit_realtime.TripDescriptor.verify(message.trip);
            if (error)
              return "trip." + error;
          }
          if (message.vehicle != null && message.hasOwnProperty("vehicle")) {
            var error = $root.transit_realtime.VehicleDescriptor.verify(message.vehicle);
            if (error)
              return "vehicle." + error;
          }
          if (message.position != null && message.hasOwnProperty("position")) {
            var error = $root.transit_realtime.Position.verify(message.position);
            if (error)
              return "position." + error;
          }
          if (message.current_stop_sequence != null && message.hasOwnProperty("current_stop_sequence")) {
            if (!$util.isInteger(message.current_stop_sequence))
              return "current_stop_sequence: integer expected";
          }
          if (message.stop_id != null && message.hasOwnProperty("stop_id")) {
            if (!$util.isString(message.stop_id))
              return "stop_id: string expected";
          }
          if (message.current_status != null && message.hasOwnProperty("current_status"))
            switch (message.current_status) {
              default:
                return "current_status: enum value expected";
              case 0:
              case 1:
              case 2:
                break;
            }
          if (message.timestamp != null && message.hasOwnProperty("timestamp")) {
            if (!$util.isInteger(message.timestamp) && !(message.timestamp && $util.isInteger(message.timestamp.low) && $util.isInteger(message.timestamp.high)))
              return "timestamp: integer|Long expected";
          }
          if (message.congestion_level != null && message.hasOwnProperty("congestion_level"))
            switch (message.congestion_level) {
              default:
                return "congestion_level: enum value expected";
              case 0:
              case 1:
              case 2:
              case 3:
              case 4:
                break;
            }
          if (message.occupancy_status != null && message.hasOwnProperty("occupancy_status"))
            switch (message.occupancy_status) {
              default:
                return "occupancy_status: enum value expected";
              case 0:
              case 1:
              case 2:
              case 3:
              case 4:
              case 5:
              case 6:
              case 7:
              case 8:
                break;
            }
          if (message.occupancy_percentage != null && message.hasOwnProperty("occupancy_percentage")) {
            if (!$util.isInteger(message.occupancy_percentage))
              return "occupancy_percentage: integer expected";
          }
          if (message.multi_carriage_details != null && message.hasOwnProperty("multi_carriage_details")) {
            if (!Array.isArray(message.multi_carriage_details))
              return "multi_carriage_details: array expected";
            for (var i2 = 0; i2 < message.multi_carriage_details.length; ++i2) {
              var error = $root.transit_realtime.VehiclePosition.CarriageDetails.verify(message.multi_carriage_details[i2]);
              if (error)
                return "multi_carriage_details." + error;
            }
          }
          return null;
        };
        VehiclePosition.fromObject = function fromObject(object) {
          if (object instanceof $root.transit_realtime.VehiclePosition)
            return object;
          var message = new $root.transit_realtime.VehiclePosition();
          if (object.trip != null) {
            if (typeof object.trip !== "object")
              throw TypeError(".transit_realtime.VehiclePosition.trip: object expected");
            message.trip = $root.transit_realtime.TripDescriptor.fromObject(object.trip);
          }
          if (object.vehicle != null) {
            if (typeof object.vehicle !== "object")
              throw TypeError(".transit_realtime.VehiclePosition.vehicle: object expected");
            message.vehicle = $root.transit_realtime.VehicleDescriptor.fromObject(object.vehicle);
          }
          if (object.position != null) {
            if (typeof object.position !== "object")
              throw TypeError(".transit_realtime.VehiclePosition.position: object expected");
            message.position = $root.transit_realtime.Position.fromObject(object.position);
          }
          if (object.current_stop_sequence != null)
            message.current_stop_sequence = object.current_stop_sequence >>> 0;
          if (object.stop_id != null)
            message.stop_id = String(object.stop_id);
          switch (object.current_status) {
            case "INCOMING_AT":
            case 0:
              message.current_status = 0;
              break;
            case "STOPPED_AT":
            case 1:
              message.current_status = 1;
              break;
            default:
              if (typeof object.current_status === "number") {
                message.current_status = object.current_status;
                break;
              }
              break;
            case "IN_TRANSIT_TO":
            case 2:
              message.current_status = 2;
              break;
          }
          if (object.timestamp != null) {
            if ($util.Long)
              (message.timestamp = $util.Long.fromValue(object.timestamp)).unsigned = true;
            else if (typeof object.timestamp === "string")
              message.timestamp = parseInt(object.timestamp, 10);
            else if (typeof object.timestamp === "number")
              message.timestamp = object.timestamp;
            else if (typeof object.timestamp === "object")
              message.timestamp = new $util.LongBits(object.timestamp.low >>> 0, object.timestamp.high >>> 0).toNumber(true);
          }
          switch (object.congestion_level) {
            default:
              if (typeof object.congestion_level === "number") {
                message.congestion_level = object.congestion_level;
                break;
              }
              break;
            case "UNKNOWN_CONGESTION_LEVEL":
            case 0:
              message.congestion_level = 0;
              break;
            case "RUNNING_SMOOTHLY":
            case 1:
              message.congestion_level = 1;
              break;
            case "STOP_AND_GO":
            case 2:
              message.congestion_level = 2;
              break;
            case "CONGESTION":
            case 3:
              message.congestion_level = 3;
              break;
            case "SEVERE_CONGESTION":
            case 4:
              message.congestion_level = 4;
              break;
          }
          switch (object.occupancy_status) {
            default:
              if (typeof object.occupancy_status === "number") {
                message.occupancy_status = object.occupancy_status;
                break;
              }
              break;
            case "EMPTY":
            case 0:
              message.occupancy_status = 0;
              break;
            case "MANY_SEATS_AVAILABLE":
            case 1:
              message.occupancy_status = 1;
              break;
            case "FEW_SEATS_AVAILABLE":
            case 2:
              message.occupancy_status = 2;
              break;
            case "STANDING_ROOM_ONLY":
            case 3:
              message.occupancy_status = 3;
              break;
            case "CRUSHED_STANDING_ROOM_ONLY":
            case 4:
              message.occupancy_status = 4;
              break;
            case "FULL":
            case 5:
              message.occupancy_status = 5;
              break;
            case "NOT_ACCEPTING_PASSENGERS":
            case 6:
              message.occupancy_status = 6;
              break;
            case "NO_DATA_AVAILABLE":
            case 7:
              message.occupancy_status = 7;
              break;
            case "NOT_BOARDABLE":
            case 8:
              message.occupancy_status = 8;
              break;
          }
          if (object.occupancy_percentage != null)
            message.occupancy_percentage = object.occupancy_percentage >>> 0;
          if (object.multi_carriage_details) {
            if (!Array.isArray(object.multi_carriage_details))
              throw TypeError(".transit_realtime.VehiclePosition.multi_carriage_details: array expected");
            message.multi_carriage_details = [];
            for (var i2 = 0; i2 < object.multi_carriage_details.length; ++i2) {
              if (typeof object.multi_carriage_details[i2] !== "object")
                throw TypeError(".transit_realtime.VehiclePosition.multi_carriage_details: object expected");
              message.multi_carriage_details[i2] = $root.transit_realtime.VehiclePosition.CarriageDetails.fromObject(object.multi_carriage_details[i2]);
            }
          }
          return message;
        };
        VehiclePosition.toObject = function toObject(message, options) {
          if (!options)
            options = {};
          var object = {};
          if (options.arrays || options.defaults)
            object.multi_carriage_details = [];
          if (options.defaults) {
            object.trip = null;
            object.position = null;
            object.current_stop_sequence = 0;
            object.current_status = options.enums === String ? "IN_TRANSIT_TO" : 2;
            if ($util.Long) {
              var long = new $util.Long(0, 0, true);
              object.timestamp = options.longs === String ? long.toString() : options.longs === Number ? long.toNumber() : long;
            } else
              object.timestamp = options.longs === String ? "0" : 0;
            object.congestion_level = options.enums === String ? "UNKNOWN_CONGESTION_LEVEL" : 0;
            object.stop_id = "";
            object.vehicle = null;
            object.occupancy_status = options.enums === String ? "EMPTY" : 0;
            object.occupancy_percentage = 0;
          }
          if (message.trip != null && message.hasOwnProperty("trip"))
            object.trip = $root.transit_realtime.TripDescriptor.toObject(message.trip, options);
          if (message.position != null && message.hasOwnProperty("position"))
            object.position = $root.transit_realtime.Position.toObject(message.position, options);
          if (message.current_stop_sequence != null && message.hasOwnProperty("current_stop_sequence"))
            object.current_stop_sequence = message.current_stop_sequence;
          if (message.current_status != null && message.hasOwnProperty("current_status"))
            object.current_status = options.enums === String ? $root.transit_realtime.VehiclePosition.VehicleStopStatus[message.current_status] === void 0 ? message.current_status : $root.transit_realtime.VehiclePosition.VehicleStopStatus[message.current_status] : message.current_status;
          if (message.timestamp != null && message.hasOwnProperty("timestamp"))
            if (typeof message.timestamp === "number")
              object.timestamp = options.longs === String ? String(message.timestamp) : message.timestamp;
            else
              object.timestamp = options.longs === String ? $util.Long.prototype.toString.call(message.timestamp) : options.longs === Number ? new $util.LongBits(message.timestamp.low >>> 0, message.timestamp.high >>> 0).toNumber(true) : message.timestamp;
          if (message.congestion_level != null && message.hasOwnProperty("congestion_level"))
            object.congestion_level = options.enums === String ? $root.transit_realtime.VehiclePosition.CongestionLevel[message.congestion_level] === void 0 ? message.congestion_level : $root.transit_realtime.VehiclePosition.CongestionLevel[message.congestion_level] : message.congestion_level;
          if (message.stop_id != null && message.hasOwnProperty("stop_id"))
            object.stop_id = message.stop_id;
          if (message.vehicle != null && message.hasOwnProperty("vehicle"))
            object.vehicle = $root.transit_realtime.VehicleDescriptor.toObject(message.vehicle, options);
          if (message.occupancy_status != null && message.hasOwnProperty("occupancy_status"))
            object.occupancy_status = options.enums === String ? $root.transit_realtime.VehiclePosition.OccupancyStatus[message.occupancy_status] === void 0 ? message.occupancy_status : $root.transit_realtime.VehiclePosition.OccupancyStatus[message.occupancy_status] : message.occupancy_status;
          if (message.occupancy_percentage != null && message.hasOwnProperty("occupancy_percentage"))
            object.occupancy_percentage = message.occupancy_percentage;
          if (message.multi_carriage_details && message.multi_carriage_details.length) {
            object.multi_carriage_details = [];
            for (var j = 0; j < message.multi_carriage_details.length; ++j)
              object.multi_carriage_details[j] = $root.transit_realtime.VehiclePosition.CarriageDetails.toObject(message.multi_carriage_details[j], options);
          }
          return object;
        };
        VehiclePosition.prototype.toJSON = function toJSON() {
          return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
        };
        VehiclePosition.getTypeUrl = function getTypeUrl(typeUrlPrefix) {
          if (typeUrlPrefix === void 0) {
            typeUrlPrefix = "type.googleapis.com";
          }
          return typeUrlPrefix + "/transit_realtime.VehiclePosition";
        };
        VehiclePosition.VehicleStopStatus = (function() {
          var valuesById = {}, values = Object.create(valuesById);
          values[valuesById[0] = "INCOMING_AT"] = 0;
          values[valuesById[1] = "STOPPED_AT"] = 1;
          values[valuesById[2] = "IN_TRANSIT_TO"] = 2;
          return values;
        })();
        VehiclePosition.CongestionLevel = (function() {
          var valuesById = {}, values = Object.create(valuesById);
          values[valuesById[0] = "UNKNOWN_CONGESTION_LEVEL"] = 0;
          values[valuesById[1] = "RUNNING_SMOOTHLY"] = 1;
          values[valuesById[2] = "STOP_AND_GO"] = 2;
          values[valuesById[3] = "CONGESTION"] = 3;
          values[valuesById[4] = "SEVERE_CONGESTION"] = 4;
          return values;
        })();
        VehiclePosition.OccupancyStatus = (function() {
          var valuesById = {}, values = Object.create(valuesById);
          values[valuesById[0] = "EMPTY"] = 0;
          values[valuesById[1] = "MANY_SEATS_AVAILABLE"] = 1;
          values[valuesById[2] = "FEW_SEATS_AVAILABLE"] = 2;
          values[valuesById[3] = "STANDING_ROOM_ONLY"] = 3;
          values[valuesById[4] = "CRUSHED_STANDING_ROOM_ONLY"] = 4;
          values[valuesById[5] = "FULL"] = 5;
          values[valuesById[6] = "NOT_ACCEPTING_PASSENGERS"] = 6;
          values[valuesById[7] = "NO_DATA_AVAILABLE"] = 7;
          values[valuesById[8] = "NOT_BOARDABLE"] = 8;
          return values;
        })();
        VehiclePosition.CarriageDetails = (function() {
          function CarriageDetails(properties) {
            if (properties) {
              for (var keys = Object.keys(properties), i2 = 0; i2 < keys.length; ++i2)
                if (properties[keys[i2]] != null)
                  this[keys[i2]] = properties[keys[i2]];
            }
          }
          CarriageDetails.prototype.id = "";
          CarriageDetails.prototype.label = "";
          CarriageDetails.prototype.occupancy_status = 7;
          CarriageDetails.prototype.occupancy_percentage = -1;
          CarriageDetails.prototype.carriage_sequence = 0;
          CarriageDetails.create = function create(properties) {
            return new CarriageDetails(properties);
          };
          CarriageDetails.encode = function encode(message, writer) {
            if (!writer)
              writer = $Writer.create();
            if (message.id != null && Object.hasOwnProperty.call(message, "id"))
              writer.uint32(
                /* id 1, wireType 2 =*/
                10
              ).string(message.id);
            if (message.label != null && Object.hasOwnProperty.call(message, "label"))
              writer.uint32(
                /* id 2, wireType 2 =*/
                18
              ).string(message.label);
            if (message.occupancy_status != null && Object.hasOwnProperty.call(message, "occupancy_status"))
              writer.uint32(
                /* id 3, wireType 0 =*/
                24
              ).int32(message.occupancy_status);
            if (message.occupancy_percentage != null && Object.hasOwnProperty.call(message, "occupancy_percentage"))
              writer.uint32(
                /* id 4, wireType 0 =*/
                32
              ).int32(message.occupancy_percentage);
            if (message.carriage_sequence != null && Object.hasOwnProperty.call(message, "carriage_sequence"))
              writer.uint32(
                /* id 5, wireType 0 =*/
                40
              ).uint32(message.carriage_sequence);
            return writer;
          };
          CarriageDetails.encodeDelimited = function encodeDelimited(message, writer) {
            return this.encode(message, writer).ldelim();
          };
          CarriageDetails.decode = function decode(reader, length, error) {
            if (!(reader instanceof $Reader))
              reader = $Reader.create(reader);
            var end = length === void 0 ? reader.len : reader.pos + length, message = new $root.transit_realtime.VehiclePosition.CarriageDetails();
            while (reader.pos < end) {
              var tag = reader.uint32();
              if (tag === error)
                break;
              switch (tag >>> 3) {
                case 1: {
                  message.id = reader.string();
                  break;
                }
                case 2: {
                  message.label = reader.string();
                  break;
                }
                case 3: {
                  message.occupancy_status = reader.int32();
                  break;
                }
                case 4: {
                  message.occupancy_percentage = reader.int32();
                  break;
                }
                case 5: {
                  message.carriage_sequence = reader.uint32();
                  break;
                }
                default:
                  reader.skipType(tag & 7);
                  break;
              }
            }
            return message;
          };
          CarriageDetails.decodeDelimited = function decodeDelimited(reader) {
            if (!(reader instanceof $Reader))
              reader = new $Reader(reader);
            return this.decode(reader, reader.uint32());
          };
          CarriageDetails.verify = function verify(message) {
            if (typeof message !== "object" || message === null)
              return "object expected";
            if (message.id != null && message.hasOwnProperty("id")) {
              if (!$util.isString(message.id))
                return "id: string expected";
            }
            if (message.label != null && message.hasOwnProperty("label")) {
              if (!$util.isString(message.label))
                return "label: string expected";
            }
            if (message.occupancy_status != null && message.hasOwnProperty("occupancy_status"))
              switch (message.occupancy_status) {
                default:
                  return "occupancy_status: enum value expected";
                case 0:
                case 1:
                case 2:
                case 3:
                case 4:
                case 5:
                case 6:
                case 7:
                case 8:
                  break;
              }
            if (message.occupancy_percentage != null && message.hasOwnProperty("occupancy_percentage")) {
              if (!$util.isInteger(message.occupancy_percentage))
                return "occupancy_percentage: integer expected";
            }
            if (message.carriage_sequence != null && message.hasOwnProperty("carriage_sequence")) {
              if (!$util.isInteger(message.carriage_sequence))
                return "carriage_sequence: integer expected";
            }
            return null;
          };
          CarriageDetails.fromObject = function fromObject(object) {
            if (object instanceof $root.transit_realtime.VehiclePosition.CarriageDetails)
              return object;
            var message = new $root.transit_realtime.VehiclePosition.CarriageDetails();
            if (object.id != null)
              message.id = String(object.id);
            if (object.label != null)
              message.label = String(object.label);
            switch (object.occupancy_status) {
              case "EMPTY":
              case 0:
                message.occupancy_status = 0;
                break;
              case "MANY_SEATS_AVAILABLE":
              case 1:
                message.occupancy_status = 1;
                break;
              case "FEW_SEATS_AVAILABLE":
              case 2:
                message.occupancy_status = 2;
                break;
              case "STANDING_ROOM_ONLY":
              case 3:
                message.occupancy_status = 3;
                break;
              case "CRUSHED_STANDING_ROOM_ONLY":
              case 4:
                message.occupancy_status = 4;
                break;
              case "FULL":
              case 5:
                message.occupancy_status = 5;
                break;
              case "NOT_ACCEPTING_PASSENGERS":
              case 6:
                message.occupancy_status = 6;
                break;
              default:
                if (typeof object.occupancy_status === "number") {
                  message.occupancy_status = object.occupancy_status;
                  break;
                }
                break;
              case "NO_DATA_AVAILABLE":
              case 7:
                message.occupancy_status = 7;
                break;
              case "NOT_BOARDABLE":
              case 8:
                message.occupancy_status = 8;
                break;
            }
            if (object.occupancy_percentage != null)
              message.occupancy_percentage = object.occupancy_percentage | 0;
            if (object.carriage_sequence != null)
              message.carriage_sequence = object.carriage_sequence >>> 0;
            return message;
          };
          CarriageDetails.toObject = function toObject(message, options) {
            if (!options)
              options = {};
            var object = {};
            if (options.defaults) {
              object.id = "";
              object.label = "";
              object.occupancy_status = options.enums === String ? "NO_DATA_AVAILABLE" : 7;
              object.occupancy_percentage = -1;
              object.carriage_sequence = 0;
            }
            if (message.id != null && message.hasOwnProperty("id"))
              object.id = message.id;
            if (message.label != null && message.hasOwnProperty("label"))
              object.label = message.label;
            if (message.occupancy_status != null && message.hasOwnProperty("occupancy_status"))
              object.occupancy_status = options.enums === String ? $root.transit_realtime.VehiclePosition.OccupancyStatus[message.occupancy_status] === void 0 ? message.occupancy_status : $root.transit_realtime.VehiclePosition.OccupancyStatus[message.occupancy_status] : message.occupancy_status;
            if (message.occupancy_percentage != null && message.hasOwnProperty("occupancy_percentage"))
              object.occupancy_percentage = message.occupancy_percentage;
            if (message.carriage_sequence != null && message.hasOwnProperty("carriage_sequence"))
              object.carriage_sequence = message.carriage_sequence;
            return object;
          };
          CarriageDetails.prototype.toJSON = function toJSON() {
            return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
          };
          CarriageDetails.getTypeUrl = function getTypeUrl(typeUrlPrefix) {
            if (typeUrlPrefix === void 0) {
              typeUrlPrefix = "type.googleapis.com";
            }
            return typeUrlPrefix + "/transit_realtime.VehiclePosition.CarriageDetails";
          };
          return CarriageDetails;
        })();
        return VehiclePosition;
      })();
      transit_realtime2.Alert = (function() {
        function Alert(properties) {
          this.active_period = [];
          this.informed_entity = [];
          if (properties) {
            for (var keys = Object.keys(properties), i2 = 0; i2 < keys.length; ++i2)
              if (properties[keys[i2]] != null)
                this[keys[i2]] = properties[keys[i2]];
          }
        }
        Alert.prototype.active_period = $util.emptyArray;
        Alert.prototype.informed_entity = $util.emptyArray;
        Alert.prototype.cause = 1;
        Alert.prototype.effect = 8;
        Alert.prototype.url = null;
        Alert.prototype.header_text = null;
        Alert.prototype.description_text = null;
        Alert.prototype.tts_header_text = null;
        Alert.prototype.tts_description_text = null;
        Alert.prototype.severity_level = 1;
        Alert.prototype.image = null;
        Alert.prototype.image_alternative_text = null;
        Alert.prototype.cause_detail = null;
        Alert.prototype.effect_detail = null;
        Alert.create = function create(properties) {
          return new Alert(properties);
        };
        Alert.encode = function encode(message, writer) {
          if (!writer)
            writer = $Writer.create();
          if (message.active_period != null && message.active_period.length)
            for (var i2 = 0; i2 < message.active_period.length; ++i2)
              $root.transit_realtime.TimeRange.encode(message.active_period[i2], writer.uint32(
                /* id 1, wireType 2 =*/
                10
              ).fork()).ldelim();
          if (message.informed_entity != null && message.informed_entity.length)
            for (var i2 = 0; i2 < message.informed_entity.length; ++i2)
              $root.transit_realtime.EntitySelector.encode(message.informed_entity[i2], writer.uint32(
                /* id 5, wireType 2 =*/
                42
              ).fork()).ldelim();
          if (message.cause != null && Object.hasOwnProperty.call(message, "cause"))
            writer.uint32(
              /* id 6, wireType 0 =*/
              48
            ).int32(message.cause);
          if (message.effect != null && Object.hasOwnProperty.call(message, "effect"))
            writer.uint32(
              /* id 7, wireType 0 =*/
              56
            ).int32(message.effect);
          if (message.url != null && Object.hasOwnProperty.call(message, "url"))
            $root.transit_realtime.TranslatedString.encode(message.url, writer.uint32(
              /* id 8, wireType 2 =*/
              66
            ).fork()).ldelim();
          if (message.header_text != null && Object.hasOwnProperty.call(message, "header_text"))
            $root.transit_realtime.TranslatedString.encode(message.header_text, writer.uint32(
              /* id 10, wireType 2 =*/
              82
            ).fork()).ldelim();
          if (message.description_text != null && Object.hasOwnProperty.call(message, "description_text"))
            $root.transit_realtime.TranslatedString.encode(message.description_text, writer.uint32(
              /* id 11, wireType 2 =*/
              90
            ).fork()).ldelim();
          if (message.tts_header_text != null && Object.hasOwnProperty.call(message, "tts_header_text"))
            $root.transit_realtime.TranslatedString.encode(message.tts_header_text, writer.uint32(
              /* id 12, wireType 2 =*/
              98
            ).fork()).ldelim();
          if (message.tts_description_text != null && Object.hasOwnProperty.call(message, "tts_description_text"))
            $root.transit_realtime.TranslatedString.encode(message.tts_description_text, writer.uint32(
              /* id 13, wireType 2 =*/
              106
            ).fork()).ldelim();
          if (message.severity_level != null && Object.hasOwnProperty.call(message, "severity_level"))
            writer.uint32(
              /* id 14, wireType 0 =*/
              112
            ).int32(message.severity_level);
          if (message.image != null && Object.hasOwnProperty.call(message, "image"))
            $root.transit_realtime.TranslatedImage.encode(message.image, writer.uint32(
              /* id 15, wireType 2 =*/
              122
            ).fork()).ldelim();
          if (message.image_alternative_text != null && Object.hasOwnProperty.call(message, "image_alternative_text"))
            $root.transit_realtime.TranslatedString.encode(message.image_alternative_text, writer.uint32(
              /* id 16, wireType 2 =*/
              130
            ).fork()).ldelim();
          if (message.cause_detail != null && Object.hasOwnProperty.call(message, "cause_detail"))
            $root.transit_realtime.TranslatedString.encode(message.cause_detail, writer.uint32(
              /* id 17, wireType 2 =*/
              138
            ).fork()).ldelim();
          if (message.effect_detail != null && Object.hasOwnProperty.call(message, "effect_detail"))
            $root.transit_realtime.TranslatedString.encode(message.effect_detail, writer.uint32(
              /* id 18, wireType 2 =*/
              146
            ).fork()).ldelim();
          return writer;
        };
        Alert.encodeDelimited = function encodeDelimited(message, writer) {
          return this.encode(message, writer).ldelim();
        };
        Alert.decode = function decode(reader, length, error) {
          if (!(reader instanceof $Reader))
            reader = $Reader.create(reader);
          var end = length === void 0 ? reader.len : reader.pos + length, message = new $root.transit_realtime.Alert();
          while (reader.pos < end) {
            var tag = reader.uint32();
            if (tag === error)
              break;
            switch (tag >>> 3) {
              case 1: {
                if (!(message.active_period && message.active_period.length))
                  message.active_period = [];
                message.active_period.push($root.transit_realtime.TimeRange.decode(reader, reader.uint32()));
                break;
              }
              case 5: {
                if (!(message.informed_entity && message.informed_entity.length))
                  message.informed_entity = [];
                message.informed_entity.push($root.transit_realtime.EntitySelector.decode(reader, reader.uint32()));
                break;
              }
              case 6: {
                message.cause = reader.int32();
                break;
              }
              case 7: {
                message.effect = reader.int32();
                break;
              }
              case 8: {
                message.url = $root.transit_realtime.TranslatedString.decode(reader, reader.uint32());
                break;
              }
              case 10: {
                message.header_text = $root.transit_realtime.TranslatedString.decode(reader, reader.uint32());
                break;
              }
              case 11: {
                message.description_text = $root.transit_realtime.TranslatedString.decode(reader, reader.uint32());
                break;
              }
              case 12: {
                message.tts_header_text = $root.transit_realtime.TranslatedString.decode(reader, reader.uint32());
                break;
              }
              case 13: {
                message.tts_description_text = $root.transit_realtime.TranslatedString.decode(reader, reader.uint32());
                break;
              }
              case 14: {
                message.severity_level = reader.int32();
                break;
              }
              case 15: {
                message.image = $root.transit_realtime.TranslatedImage.decode(reader, reader.uint32());
                break;
              }
              case 16: {
                message.image_alternative_text = $root.transit_realtime.TranslatedString.decode(reader, reader.uint32());
                break;
              }
              case 17: {
                message.cause_detail = $root.transit_realtime.TranslatedString.decode(reader, reader.uint32());
                break;
              }
              case 18: {
                message.effect_detail = $root.transit_realtime.TranslatedString.decode(reader, reader.uint32());
                break;
              }
              default:
                reader.skipType(tag & 7);
                break;
            }
          }
          return message;
        };
        Alert.decodeDelimited = function decodeDelimited(reader) {
          if (!(reader instanceof $Reader))
            reader = new $Reader(reader);
          return this.decode(reader, reader.uint32());
        };
        Alert.verify = function verify(message) {
          if (typeof message !== "object" || message === null)
            return "object expected";
          if (message.active_period != null && message.hasOwnProperty("active_period")) {
            if (!Array.isArray(message.active_period))
              return "active_period: array expected";
            for (var i2 = 0; i2 < message.active_period.length; ++i2) {
              var error = $root.transit_realtime.TimeRange.verify(message.active_period[i2]);
              if (error)
                return "active_period." + error;
            }
          }
          if (message.informed_entity != null && message.hasOwnProperty("informed_entity")) {
            if (!Array.isArray(message.informed_entity))
              return "informed_entity: array expected";
            for (var i2 = 0; i2 < message.informed_entity.length; ++i2) {
              var error = $root.transit_realtime.EntitySelector.verify(message.informed_entity[i2]);
              if (error)
                return "informed_entity." + error;
            }
          }
          if (message.cause != null && message.hasOwnProperty("cause"))
            switch (message.cause) {
              default:
                return "cause: enum value expected";
              case 1:
              case 2:
              case 3:
              case 4:
              case 5:
              case 6:
              case 7:
              case 8:
              case 9:
              case 10:
              case 11:
              case 12:
                break;
            }
          if (message.effect != null && message.hasOwnProperty("effect"))
            switch (message.effect) {
              default:
                return "effect: enum value expected";
              case 1:
              case 2:
              case 3:
              case 4:
              case 5:
              case 6:
              case 7:
              case 8:
              case 9:
              case 10:
              case 11:
                break;
            }
          if (message.url != null && message.hasOwnProperty("url")) {
            var error = $root.transit_realtime.TranslatedString.verify(message.url);
            if (error)
              return "url." + error;
          }
          if (message.header_text != null && message.hasOwnProperty("header_text")) {
            var error = $root.transit_realtime.TranslatedString.verify(message.header_text);
            if (error)
              return "header_text." + error;
          }
          if (message.description_text != null && message.hasOwnProperty("description_text")) {
            var error = $root.transit_realtime.TranslatedString.verify(message.description_text);
            if (error)
              return "description_text." + error;
          }
          if (message.tts_header_text != null && message.hasOwnProperty("tts_header_text")) {
            var error = $root.transit_realtime.TranslatedString.verify(message.tts_header_text);
            if (error)
              return "tts_header_text." + error;
          }
          if (message.tts_description_text != null && message.hasOwnProperty("tts_description_text")) {
            var error = $root.transit_realtime.TranslatedString.verify(message.tts_description_text);
            if (error)
              return "tts_description_text." + error;
          }
          if (message.severity_level != null && message.hasOwnProperty("severity_level"))
            switch (message.severity_level) {
              default:
                return "severity_level: enum value expected";
              case 1:
              case 2:
              case 3:
              case 4:
                break;
            }
          if (message.image != null && message.hasOwnProperty("image")) {
            var error = $root.transit_realtime.TranslatedImage.verify(message.image);
            if (error)
              return "image." + error;
          }
          if (message.image_alternative_text != null && message.hasOwnProperty("image_alternative_text")) {
            var error = $root.transit_realtime.TranslatedString.verify(message.image_alternative_text);
            if (error)
              return "image_alternative_text." + error;
          }
          if (message.cause_detail != null && message.hasOwnProperty("cause_detail")) {
            var error = $root.transit_realtime.TranslatedString.verify(message.cause_detail);
            if (error)
              return "cause_detail." + error;
          }
          if (message.effect_detail != null && message.hasOwnProperty("effect_detail")) {
            var error = $root.transit_realtime.TranslatedString.verify(message.effect_detail);
            if (error)
              return "effect_detail." + error;
          }
          return null;
        };
        Alert.fromObject = function fromObject(object) {
          if (object instanceof $root.transit_realtime.Alert)
            return object;
          var message = new $root.transit_realtime.Alert();
          if (object.active_period) {
            if (!Array.isArray(object.active_period))
              throw TypeError(".transit_realtime.Alert.active_period: array expected");
            message.active_period = [];
            for (var i2 = 0; i2 < object.active_period.length; ++i2) {
              if (typeof object.active_period[i2] !== "object")
                throw TypeError(".transit_realtime.Alert.active_period: object expected");
              message.active_period[i2] = $root.transit_realtime.TimeRange.fromObject(object.active_period[i2]);
            }
          }
          if (object.informed_entity) {
            if (!Array.isArray(object.informed_entity))
              throw TypeError(".transit_realtime.Alert.informed_entity: array expected");
            message.informed_entity = [];
            for (var i2 = 0; i2 < object.informed_entity.length; ++i2) {
              if (typeof object.informed_entity[i2] !== "object")
                throw TypeError(".transit_realtime.Alert.informed_entity: object expected");
              message.informed_entity[i2] = $root.transit_realtime.EntitySelector.fromObject(object.informed_entity[i2]);
            }
          }
          switch (object.cause) {
            default:
              if (typeof object.cause === "number") {
                message.cause = object.cause;
                break;
              }
              break;
            case "UNKNOWN_CAUSE":
            case 1:
              message.cause = 1;
              break;
            case "OTHER_CAUSE":
            case 2:
              message.cause = 2;
              break;
            case "TECHNICAL_PROBLEM":
            case 3:
              message.cause = 3;
              break;
            case "STRIKE":
            case 4:
              message.cause = 4;
              break;
            case "DEMONSTRATION":
            case 5:
              message.cause = 5;
              break;
            case "ACCIDENT":
            case 6:
              message.cause = 6;
              break;
            case "HOLIDAY":
            case 7:
              message.cause = 7;
              break;
            case "WEATHER":
            case 8:
              message.cause = 8;
              break;
            case "MAINTENANCE":
            case 9:
              message.cause = 9;
              break;
            case "CONSTRUCTION":
            case 10:
              message.cause = 10;
              break;
            case "POLICE_ACTIVITY":
            case 11:
              message.cause = 11;
              break;
            case "MEDICAL_EMERGENCY":
            case 12:
              message.cause = 12;
              break;
          }
          switch (object.effect) {
            case "NO_SERVICE":
            case 1:
              message.effect = 1;
              break;
            case "REDUCED_SERVICE":
            case 2:
              message.effect = 2;
              break;
            case "SIGNIFICANT_DELAYS":
            case 3:
              message.effect = 3;
              break;
            case "DETOUR":
            case 4:
              message.effect = 4;
              break;
            case "ADDITIONAL_SERVICE":
            case 5:
              message.effect = 5;
              break;
            case "MODIFIED_SERVICE":
            case 6:
              message.effect = 6;
              break;
            case "OTHER_EFFECT":
            case 7:
              message.effect = 7;
              break;
            default:
              if (typeof object.effect === "number") {
                message.effect = object.effect;
                break;
              }
              break;
            case "UNKNOWN_EFFECT":
            case 8:
              message.effect = 8;
              break;
            case "STOP_MOVED":
            case 9:
              message.effect = 9;
              break;
            case "NO_EFFECT":
            case 10:
              message.effect = 10;
              break;
            case "ACCESSIBILITY_ISSUE":
            case 11:
              message.effect = 11;
              break;
          }
          if (object.url != null) {
            if (typeof object.url !== "object")
              throw TypeError(".transit_realtime.Alert.url: object expected");
            message.url = $root.transit_realtime.TranslatedString.fromObject(object.url);
          }
          if (object.header_text != null) {
            if (typeof object.header_text !== "object")
              throw TypeError(".transit_realtime.Alert.header_text: object expected");
            message.header_text = $root.transit_realtime.TranslatedString.fromObject(object.header_text);
          }
          if (object.description_text != null) {
            if (typeof object.description_text !== "object")
              throw TypeError(".transit_realtime.Alert.description_text: object expected");
            message.description_text = $root.transit_realtime.TranslatedString.fromObject(object.description_text);
          }
          if (object.tts_header_text != null) {
            if (typeof object.tts_header_text !== "object")
              throw TypeError(".transit_realtime.Alert.tts_header_text: object expected");
            message.tts_header_text = $root.transit_realtime.TranslatedString.fromObject(object.tts_header_text);
          }
          if (object.tts_description_text != null) {
            if (typeof object.tts_description_text !== "object")
              throw TypeError(".transit_realtime.Alert.tts_description_text: object expected");
            message.tts_description_text = $root.transit_realtime.TranslatedString.fromObject(object.tts_description_text);
          }
          switch (object.severity_level) {
            default:
              if (typeof object.severity_level === "number") {
                message.severity_level = object.severity_level;
                break;
              }
              break;
            case "UNKNOWN_SEVERITY":
            case 1:
              message.severity_level = 1;
              break;
            case "INFO":
            case 2:
              message.severity_level = 2;
              break;
            case "WARNING":
            case 3:
              message.severity_level = 3;
              break;
            case "SEVERE":
            case 4:
              message.severity_level = 4;
              break;
          }
          if (object.image != null) {
            if (typeof object.image !== "object")
              throw TypeError(".transit_realtime.Alert.image: object expected");
            message.image = $root.transit_realtime.TranslatedImage.fromObject(object.image);
          }
          if (object.image_alternative_text != null) {
            if (typeof object.image_alternative_text !== "object")
              throw TypeError(".transit_realtime.Alert.image_alternative_text: object expected");
            message.image_alternative_text = $root.transit_realtime.TranslatedString.fromObject(object.image_alternative_text);
          }
          if (object.cause_detail != null) {
            if (typeof object.cause_detail !== "object")
              throw TypeError(".transit_realtime.Alert.cause_detail: object expected");
            message.cause_detail = $root.transit_realtime.TranslatedString.fromObject(object.cause_detail);
          }
          if (object.effect_detail != null) {
            if (typeof object.effect_detail !== "object")
              throw TypeError(".transit_realtime.Alert.effect_detail: object expected");
            message.effect_detail = $root.transit_realtime.TranslatedString.fromObject(object.effect_detail);
          }
          return message;
        };
        Alert.toObject = function toObject(message, options) {
          if (!options)
            options = {};
          var object = {};
          if (options.arrays || options.defaults) {
            object.active_period = [];
            object.informed_entity = [];
          }
          if (options.defaults) {
            object.cause = options.enums === String ? "UNKNOWN_CAUSE" : 1;
            object.effect = options.enums === String ? "UNKNOWN_EFFECT" : 8;
            object.url = null;
            object.header_text = null;
            object.description_text = null;
            object.tts_header_text = null;
            object.tts_description_text = null;
            object.severity_level = options.enums === String ? "UNKNOWN_SEVERITY" : 1;
            object.image = null;
            object.image_alternative_text = null;
            object.cause_detail = null;
            object.effect_detail = null;
          }
          if (message.active_period && message.active_period.length) {
            object.active_period = [];
            for (var j = 0; j < message.active_period.length; ++j)
              object.active_period[j] = $root.transit_realtime.TimeRange.toObject(message.active_period[j], options);
          }
          if (message.informed_entity && message.informed_entity.length) {
            object.informed_entity = [];
            for (var j = 0; j < message.informed_entity.length; ++j)
              object.informed_entity[j] = $root.transit_realtime.EntitySelector.toObject(message.informed_entity[j], options);
          }
          if (message.cause != null && message.hasOwnProperty("cause"))
            object.cause = options.enums === String ? $root.transit_realtime.Alert.Cause[message.cause] === void 0 ? message.cause : $root.transit_realtime.Alert.Cause[message.cause] : message.cause;
          if (message.effect != null && message.hasOwnProperty("effect"))
            object.effect = options.enums === String ? $root.transit_realtime.Alert.Effect[message.effect] === void 0 ? message.effect : $root.transit_realtime.Alert.Effect[message.effect] : message.effect;
          if (message.url != null && message.hasOwnProperty("url"))
            object.url = $root.transit_realtime.TranslatedString.toObject(message.url, options);
          if (message.header_text != null && message.hasOwnProperty("header_text"))
            object.header_text = $root.transit_realtime.TranslatedString.toObject(message.header_text, options);
          if (message.description_text != null && message.hasOwnProperty("description_text"))
            object.description_text = $root.transit_realtime.TranslatedString.toObject(message.description_text, options);
          if (message.tts_header_text != null && message.hasOwnProperty("tts_header_text"))
            object.tts_header_text = $root.transit_realtime.TranslatedString.toObject(message.tts_header_text, options);
          if (message.tts_description_text != null && message.hasOwnProperty("tts_description_text"))
            object.tts_description_text = $root.transit_realtime.TranslatedString.toObject(message.tts_description_text, options);
          if (message.severity_level != null && message.hasOwnProperty("severity_level"))
            object.severity_level = options.enums === String ? $root.transit_realtime.Alert.SeverityLevel[message.severity_level] === void 0 ? message.severity_level : $root.transit_realtime.Alert.SeverityLevel[message.severity_level] : message.severity_level;
          if (message.image != null && message.hasOwnProperty("image"))
            object.image = $root.transit_realtime.TranslatedImage.toObject(message.image, options);
          if (message.image_alternative_text != null && message.hasOwnProperty("image_alternative_text"))
            object.image_alternative_text = $root.transit_realtime.TranslatedString.toObject(message.image_alternative_text, options);
          if (message.cause_detail != null && message.hasOwnProperty("cause_detail"))
            object.cause_detail = $root.transit_realtime.TranslatedString.toObject(message.cause_detail, options);
          if (message.effect_detail != null && message.hasOwnProperty("effect_detail"))
            object.effect_detail = $root.transit_realtime.TranslatedString.toObject(message.effect_detail, options);
          return object;
        };
        Alert.prototype.toJSON = function toJSON() {
          return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
        };
        Alert.getTypeUrl = function getTypeUrl(typeUrlPrefix) {
          if (typeUrlPrefix === void 0) {
            typeUrlPrefix = "type.googleapis.com";
          }
          return typeUrlPrefix + "/transit_realtime.Alert";
        };
        Alert.Cause = (function() {
          var valuesById = {}, values = Object.create(valuesById);
          values[valuesById[1] = "UNKNOWN_CAUSE"] = 1;
          values[valuesById[2] = "OTHER_CAUSE"] = 2;
          values[valuesById[3] = "TECHNICAL_PROBLEM"] = 3;
          values[valuesById[4] = "STRIKE"] = 4;
          values[valuesById[5] = "DEMONSTRATION"] = 5;
          values[valuesById[6] = "ACCIDENT"] = 6;
          values[valuesById[7] = "HOLIDAY"] = 7;
          values[valuesById[8] = "WEATHER"] = 8;
          values[valuesById[9] = "MAINTENANCE"] = 9;
          values[valuesById[10] = "CONSTRUCTION"] = 10;
          values[valuesById[11] = "POLICE_ACTIVITY"] = 11;
          values[valuesById[12] = "MEDICAL_EMERGENCY"] = 12;
          return values;
        })();
        Alert.Effect = (function() {
          var valuesById = {}, values = Object.create(valuesById);
          values[valuesById[1] = "NO_SERVICE"] = 1;
          values[valuesById[2] = "REDUCED_SERVICE"] = 2;
          values[valuesById[3] = "SIGNIFICANT_DELAYS"] = 3;
          values[valuesById[4] = "DETOUR"] = 4;
          values[valuesById[5] = "ADDITIONAL_SERVICE"] = 5;
          values[valuesById[6] = "MODIFIED_SERVICE"] = 6;
          values[valuesById[7] = "OTHER_EFFECT"] = 7;
          values[valuesById[8] = "UNKNOWN_EFFECT"] = 8;
          values[valuesById[9] = "STOP_MOVED"] = 9;
          values[valuesById[10] = "NO_EFFECT"] = 10;
          values[valuesById[11] = "ACCESSIBILITY_ISSUE"] = 11;
          return values;
        })();
        Alert.SeverityLevel = (function() {
          var valuesById = {}, values = Object.create(valuesById);
          values[valuesById[1] = "UNKNOWN_SEVERITY"] = 1;
          values[valuesById[2] = "INFO"] = 2;
          values[valuesById[3] = "WARNING"] = 3;
          values[valuesById[4] = "SEVERE"] = 4;
          return values;
        })();
        return Alert;
      })();
      transit_realtime2.TimeRange = (function() {
        function TimeRange(properties) {
          if (properties) {
            for (var keys = Object.keys(properties), i2 = 0; i2 < keys.length; ++i2)
              if (properties[keys[i2]] != null)
                this[keys[i2]] = properties[keys[i2]];
          }
        }
        TimeRange.prototype.start = $util.Long ? $util.Long.fromBits(0, 0, true) : 0;
        TimeRange.prototype.end = $util.Long ? $util.Long.fromBits(0, 0, true) : 0;
        TimeRange.create = function create(properties) {
          return new TimeRange(properties);
        };
        TimeRange.encode = function encode(message, writer) {
          if (!writer)
            writer = $Writer.create();
          if (message.start != null && Object.hasOwnProperty.call(message, "start"))
            writer.uint32(
              /* id 1, wireType 0 =*/
              8
            ).uint64(message.start);
          if (message.end != null && Object.hasOwnProperty.call(message, "end"))
            writer.uint32(
              /* id 2, wireType 0 =*/
              16
            ).uint64(message.end);
          return writer;
        };
        TimeRange.encodeDelimited = function encodeDelimited(message, writer) {
          return this.encode(message, writer).ldelim();
        };
        TimeRange.decode = function decode(reader, length, error) {
          if (!(reader instanceof $Reader))
            reader = $Reader.create(reader);
          var end = length === void 0 ? reader.len : reader.pos + length, message = new $root.transit_realtime.TimeRange();
          while (reader.pos < end) {
            var tag = reader.uint32();
            if (tag === error)
              break;
            switch (tag >>> 3) {
              case 1: {
                message.start = reader.uint64();
                break;
              }
              case 2: {
                message.end = reader.uint64();
                break;
              }
              default:
                reader.skipType(tag & 7);
                break;
            }
          }
          return message;
        };
        TimeRange.decodeDelimited = function decodeDelimited(reader) {
          if (!(reader instanceof $Reader))
            reader = new $Reader(reader);
          return this.decode(reader, reader.uint32());
        };
        TimeRange.verify = function verify(message) {
          if (typeof message !== "object" || message === null)
            return "object expected";
          if (message.start != null && message.hasOwnProperty("start")) {
            if (!$util.isInteger(message.start) && !(message.start && $util.isInteger(message.start.low) && $util.isInteger(message.start.high)))
              return "start: integer|Long expected";
          }
          if (message.end != null && message.hasOwnProperty("end")) {
            if (!$util.isInteger(message.end) && !(message.end && $util.isInteger(message.end.low) && $util.isInteger(message.end.high)))
              return "end: integer|Long expected";
          }
          return null;
        };
        TimeRange.fromObject = function fromObject(object) {
          if (object instanceof $root.transit_realtime.TimeRange)
            return object;
          var message = new $root.transit_realtime.TimeRange();
          if (object.start != null) {
            if ($util.Long)
              (message.start = $util.Long.fromValue(object.start)).unsigned = true;
            else if (typeof object.start === "string")
              message.start = parseInt(object.start, 10);
            else if (typeof object.start === "number")
              message.start = object.start;
            else if (typeof object.start === "object")
              message.start = new $util.LongBits(object.start.low >>> 0, object.start.high >>> 0).toNumber(true);
          }
          if (object.end != null) {
            if ($util.Long)
              (message.end = $util.Long.fromValue(object.end)).unsigned = true;
            else if (typeof object.end === "string")
              message.end = parseInt(object.end, 10);
            else if (typeof object.end === "number")
              message.end = object.end;
            else if (typeof object.end === "object")
              message.end = new $util.LongBits(object.end.low >>> 0, object.end.high >>> 0).toNumber(true);
          }
          return message;
        };
        TimeRange.toObject = function toObject(message, options) {
          if (!options)
            options = {};
          var object = {};
          if (options.defaults) {
            if ($util.Long) {
              var long = new $util.Long(0, 0, true);
              object.start = options.longs === String ? long.toString() : options.longs === Number ? long.toNumber() : long;
            } else
              object.start = options.longs === String ? "0" : 0;
            if ($util.Long) {
              var long = new $util.Long(0, 0, true);
              object.end = options.longs === String ? long.toString() : options.longs === Number ? long.toNumber() : long;
            } else
              object.end = options.longs === String ? "0" : 0;
          }
          if (message.start != null && message.hasOwnProperty("start"))
            if (typeof message.start === "number")
              object.start = options.longs === String ? String(message.start) : message.start;
            else
              object.start = options.longs === String ? $util.Long.prototype.toString.call(message.start) : options.longs === Number ? new $util.LongBits(message.start.low >>> 0, message.start.high >>> 0).toNumber(true) : message.start;
          if (message.end != null && message.hasOwnProperty("end"))
            if (typeof message.end === "number")
              object.end = options.longs === String ? String(message.end) : message.end;
            else
              object.end = options.longs === String ? $util.Long.prototype.toString.call(message.end) : options.longs === Number ? new $util.LongBits(message.end.low >>> 0, message.end.high >>> 0).toNumber(true) : message.end;
          return object;
        };
        TimeRange.prototype.toJSON = function toJSON() {
          return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
        };
        TimeRange.getTypeUrl = function getTypeUrl(typeUrlPrefix) {
          if (typeUrlPrefix === void 0) {
            typeUrlPrefix = "type.googleapis.com";
          }
          return typeUrlPrefix + "/transit_realtime.TimeRange";
        };
        return TimeRange;
      })();
      transit_realtime2.Position = (function() {
        function Position(properties) {
          if (properties) {
            for (var keys = Object.keys(properties), i2 = 0; i2 < keys.length; ++i2)
              if (properties[keys[i2]] != null)
                this[keys[i2]] = properties[keys[i2]];
          }
        }
        Position.prototype.latitude = 0;
        Position.prototype.longitude = 0;
        Position.prototype.bearing = 0;
        Position.prototype.odometer = 0;
        Position.prototype.speed = 0;
        Position.create = function create(properties) {
          return new Position(properties);
        };
        Position.encode = function encode(message, writer) {
          if (!writer)
            writer = $Writer.create();
          writer.uint32(
            /* id 1, wireType 5 =*/
            13
          ).float(message.latitude);
          writer.uint32(
            /* id 2, wireType 5 =*/
            21
          ).float(message.longitude);
          if (message.bearing != null && Object.hasOwnProperty.call(message, "bearing"))
            writer.uint32(
              /* id 3, wireType 5 =*/
              29
            ).float(message.bearing);
          if (message.odometer != null && Object.hasOwnProperty.call(message, "odometer"))
            writer.uint32(
              /* id 4, wireType 1 =*/
              33
            ).double(message.odometer);
          if (message.speed != null && Object.hasOwnProperty.call(message, "speed"))
            writer.uint32(
              /* id 5, wireType 5 =*/
              45
            ).float(message.speed);
          return writer;
        };
        Position.encodeDelimited = function encodeDelimited(message, writer) {
          return this.encode(message, writer).ldelim();
        };
        Position.decode = function decode(reader, length, error) {
          if (!(reader instanceof $Reader))
            reader = $Reader.create(reader);
          var end = length === void 0 ? reader.len : reader.pos + length, message = new $root.transit_realtime.Position();
          while (reader.pos < end) {
            var tag = reader.uint32();
            if (tag === error)
              break;
            switch (tag >>> 3) {
              case 1: {
                message.latitude = reader.float();
                break;
              }
              case 2: {
                message.longitude = reader.float();
                break;
              }
              case 3: {
                message.bearing = reader.float();
                break;
              }
              case 4: {
                message.odometer = reader.double();
                break;
              }
              case 5: {
                message.speed = reader.float();
                break;
              }
              default:
                reader.skipType(tag & 7);
                break;
            }
          }
          if (!message.hasOwnProperty("latitude"))
            throw $util.ProtocolError("missing required 'latitude'", { instance: message });
          if (!message.hasOwnProperty("longitude"))
            throw $util.ProtocolError("missing required 'longitude'", { instance: message });
          return message;
        };
        Position.decodeDelimited = function decodeDelimited(reader) {
          if (!(reader instanceof $Reader))
            reader = new $Reader(reader);
          return this.decode(reader, reader.uint32());
        };
        Position.verify = function verify(message) {
          if (typeof message !== "object" || message === null)
            return "object expected";
          if (typeof message.latitude !== "number")
            return "latitude: number expected";
          if (typeof message.longitude !== "number")
            return "longitude: number expected";
          if (message.bearing != null && message.hasOwnProperty("bearing")) {
            if (typeof message.bearing !== "number")
              return "bearing: number expected";
          }
          if (message.odometer != null && message.hasOwnProperty("odometer")) {
            if (typeof message.odometer !== "number")
              return "odometer: number expected";
          }
          if (message.speed != null && message.hasOwnProperty("speed")) {
            if (typeof message.speed !== "number")
              return "speed: number expected";
          }
          return null;
        };
        Position.fromObject = function fromObject(object) {
          if (object instanceof $root.transit_realtime.Position)
            return object;
          var message = new $root.transit_realtime.Position();
          if (object.latitude != null)
            message.latitude = Number(object.latitude);
          if (object.longitude != null)
            message.longitude = Number(object.longitude);
          if (object.bearing != null)
            message.bearing = Number(object.bearing);
          if (object.odometer != null)
            message.odometer = Number(object.odometer);
          if (object.speed != null)
            message.speed = Number(object.speed);
          return message;
        };
        Position.toObject = function toObject(message, options) {
          if (!options)
            options = {};
          var object = {};
          if (options.defaults) {
            object.latitude = 0;
            object.longitude = 0;
            object.bearing = 0;
            object.odometer = 0;
            object.speed = 0;
          }
          if (message.latitude != null && message.hasOwnProperty("latitude"))
            object.latitude = options.json && !isFinite(message.latitude) ? String(message.latitude) : message.latitude;
          if (message.longitude != null && message.hasOwnProperty("longitude"))
            object.longitude = options.json && !isFinite(message.longitude) ? String(message.longitude) : message.longitude;
          if (message.bearing != null && message.hasOwnProperty("bearing"))
            object.bearing = options.json && !isFinite(message.bearing) ? String(message.bearing) : message.bearing;
          if (message.odometer != null && message.hasOwnProperty("odometer"))
            object.odometer = options.json && !isFinite(message.odometer) ? String(message.odometer) : message.odometer;
          if (message.speed != null && message.hasOwnProperty("speed"))
            object.speed = options.json && !isFinite(message.speed) ? String(message.speed) : message.speed;
          return object;
        };
        Position.prototype.toJSON = function toJSON() {
          return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
        };
        Position.getTypeUrl = function getTypeUrl(typeUrlPrefix) {
          if (typeUrlPrefix === void 0) {
            typeUrlPrefix = "type.googleapis.com";
          }
          return typeUrlPrefix + "/transit_realtime.Position";
        };
        return Position;
      })();
      transit_realtime2.TripDescriptor = (function() {
        function TripDescriptor(properties) {
          if (properties) {
            for (var keys = Object.keys(properties), i2 = 0; i2 < keys.length; ++i2)
              if (properties[keys[i2]] != null)
                this[keys[i2]] = properties[keys[i2]];
          }
        }
        TripDescriptor.prototype.trip_id = "";
        TripDescriptor.prototype.route_id = "";
        TripDescriptor.prototype.direction_id = 0;
        TripDescriptor.prototype.start_time = "";
        TripDescriptor.prototype.start_date = "";
        TripDescriptor.prototype.schedule_relationship = 0;
        TripDescriptor.prototype.modified_trip = null;
        TripDescriptor.create = function create(properties) {
          return new TripDescriptor(properties);
        };
        TripDescriptor.encode = function encode(message, writer) {
          if (!writer)
            writer = $Writer.create();
          if (message.trip_id != null && Object.hasOwnProperty.call(message, "trip_id"))
            writer.uint32(
              /* id 1, wireType 2 =*/
              10
            ).string(message.trip_id);
          if (message.start_time != null && Object.hasOwnProperty.call(message, "start_time"))
            writer.uint32(
              /* id 2, wireType 2 =*/
              18
            ).string(message.start_time);
          if (message.start_date != null && Object.hasOwnProperty.call(message, "start_date"))
            writer.uint32(
              /* id 3, wireType 2 =*/
              26
            ).string(message.start_date);
          if (message.schedule_relationship != null && Object.hasOwnProperty.call(message, "schedule_relationship"))
            writer.uint32(
              /* id 4, wireType 0 =*/
              32
            ).int32(message.schedule_relationship);
          if (message.route_id != null && Object.hasOwnProperty.call(message, "route_id"))
            writer.uint32(
              /* id 5, wireType 2 =*/
              42
            ).string(message.route_id);
          if (message.direction_id != null && Object.hasOwnProperty.call(message, "direction_id"))
            writer.uint32(
              /* id 6, wireType 0 =*/
              48
            ).uint32(message.direction_id);
          if (message.modified_trip != null && Object.hasOwnProperty.call(message, "modified_trip"))
            $root.transit_realtime.TripDescriptor.ModifiedTripSelector.encode(message.modified_trip, writer.uint32(
              /* id 7, wireType 2 =*/
              58
            ).fork()).ldelim();
          return writer;
        };
        TripDescriptor.encodeDelimited = function encodeDelimited(message, writer) {
          return this.encode(message, writer).ldelim();
        };
        TripDescriptor.decode = function decode(reader, length, error) {
          if (!(reader instanceof $Reader))
            reader = $Reader.create(reader);
          var end = length === void 0 ? reader.len : reader.pos + length, message = new $root.transit_realtime.TripDescriptor();
          while (reader.pos < end) {
            var tag = reader.uint32();
            if (tag === error)
              break;
            switch (tag >>> 3) {
              case 1: {
                message.trip_id = reader.string();
                break;
              }
              case 5: {
                message.route_id = reader.string();
                break;
              }
              case 6: {
                message.direction_id = reader.uint32();
                break;
              }
              case 2: {
                message.start_time = reader.string();
                break;
              }
              case 3: {
                message.start_date = reader.string();
                break;
              }
              case 4: {
                message.schedule_relationship = reader.int32();
                break;
              }
              case 7: {
                message.modified_trip = $root.transit_realtime.TripDescriptor.ModifiedTripSelector.decode(reader, reader.uint32());
                break;
              }
              default:
                reader.skipType(tag & 7);
                break;
            }
          }
          return message;
        };
        TripDescriptor.decodeDelimited = function decodeDelimited(reader) {
          if (!(reader instanceof $Reader))
            reader = new $Reader(reader);
          return this.decode(reader, reader.uint32());
        };
        TripDescriptor.verify = function verify(message) {
          if (typeof message !== "object" || message === null)
            return "object expected";
          if (message.trip_id != null && message.hasOwnProperty("trip_id")) {
            if (!$util.isString(message.trip_id))
              return "trip_id: string expected";
          }
          if (message.route_id != null && message.hasOwnProperty("route_id")) {
            if (!$util.isString(message.route_id))
              return "route_id: string expected";
          }
          if (message.direction_id != null && message.hasOwnProperty("direction_id")) {
            if (!$util.isInteger(message.direction_id))
              return "direction_id: integer expected";
          }
          if (message.start_time != null && message.hasOwnProperty("start_time")) {
            if (!$util.isString(message.start_time))
              return "start_time: string expected";
          }
          if (message.start_date != null && message.hasOwnProperty("start_date")) {
            if (!$util.isString(message.start_date))
              return "start_date: string expected";
          }
          if (message.schedule_relationship != null && message.hasOwnProperty("schedule_relationship"))
            switch (message.schedule_relationship) {
              default:
                return "schedule_relationship: enum value expected";
              case 0:
              case 1:
              case 2:
              case 3:
              case 5:
              case 6:
              case 7:
              case 8:
                break;
            }
          if (message.modified_trip != null && message.hasOwnProperty("modified_trip")) {
            var error = $root.transit_realtime.TripDescriptor.ModifiedTripSelector.verify(message.modified_trip);
            if (error)
              return "modified_trip." + error;
          }
          return null;
        };
        TripDescriptor.fromObject = function fromObject(object) {
          if (object instanceof $root.transit_realtime.TripDescriptor)
            return object;
          var message = new $root.transit_realtime.TripDescriptor();
          if (object.trip_id != null)
            message.trip_id = String(object.trip_id);
          if (object.route_id != null)
            message.route_id = String(object.route_id);
          if (object.direction_id != null)
            message.direction_id = object.direction_id >>> 0;
          if (object.start_time != null)
            message.start_time = String(object.start_time);
          if (object.start_date != null)
            message.start_date = String(object.start_date);
          switch (object.schedule_relationship) {
            default:
              if (typeof object.schedule_relationship === "number") {
                message.schedule_relationship = object.schedule_relationship;
                break;
              }
              break;
            case "SCHEDULED":
            case 0:
              message.schedule_relationship = 0;
              break;
            case "ADDED":
            case 1:
              message.schedule_relationship = 1;
              break;
            case "UNSCHEDULED":
            case 2:
              message.schedule_relationship = 2;
              break;
            case "CANCELED":
            case 3:
              message.schedule_relationship = 3;
              break;
            case "REPLACEMENT":
            case 5:
              message.schedule_relationship = 5;
              break;
            case "DUPLICATED":
            case 6:
              message.schedule_relationship = 6;
              break;
            case "DELETED":
            case 7:
              message.schedule_relationship = 7;
              break;
            case "NEW":
            case 8:
              message.schedule_relationship = 8;
              break;
          }
          if (object.modified_trip != null) {
            if (typeof object.modified_trip !== "object")
              throw TypeError(".transit_realtime.TripDescriptor.modified_trip: object expected");
            message.modified_trip = $root.transit_realtime.TripDescriptor.ModifiedTripSelector.fromObject(object.modified_trip);
          }
          return message;
        };
        TripDescriptor.toObject = function toObject(message, options) {
          if (!options)
            options = {};
          var object = {};
          if (options.defaults) {
            object.trip_id = "";
            object.start_time = "";
            object.start_date = "";
            object.schedule_relationship = options.enums === String ? "SCHEDULED" : 0;
            object.route_id = "";
            object.direction_id = 0;
            object.modified_trip = null;
          }
          if (message.trip_id != null && message.hasOwnProperty("trip_id"))
            object.trip_id = message.trip_id;
          if (message.start_time != null && message.hasOwnProperty("start_time"))
            object.start_time = message.start_time;
          if (message.start_date != null && message.hasOwnProperty("start_date"))
            object.start_date = message.start_date;
          if (message.schedule_relationship != null && message.hasOwnProperty("schedule_relationship"))
            object.schedule_relationship = options.enums === String ? $root.transit_realtime.TripDescriptor.ScheduleRelationship[message.schedule_relationship] === void 0 ? message.schedule_relationship : $root.transit_realtime.TripDescriptor.ScheduleRelationship[message.schedule_relationship] : message.schedule_relationship;
          if (message.route_id != null && message.hasOwnProperty("route_id"))
            object.route_id = message.route_id;
          if (message.direction_id != null && message.hasOwnProperty("direction_id"))
            object.direction_id = message.direction_id;
          if (message.modified_trip != null && message.hasOwnProperty("modified_trip"))
            object.modified_trip = $root.transit_realtime.TripDescriptor.ModifiedTripSelector.toObject(message.modified_trip, options);
          return object;
        };
        TripDescriptor.prototype.toJSON = function toJSON() {
          return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
        };
        TripDescriptor.getTypeUrl = function getTypeUrl(typeUrlPrefix) {
          if (typeUrlPrefix === void 0) {
            typeUrlPrefix = "type.googleapis.com";
          }
          return typeUrlPrefix + "/transit_realtime.TripDescriptor";
        };
        TripDescriptor.ScheduleRelationship = (function() {
          var valuesById = {}, values = Object.create(valuesById);
          values[valuesById[0] = "SCHEDULED"] = 0;
          values[valuesById[1] = "ADDED"] = 1;
          values[valuesById[2] = "UNSCHEDULED"] = 2;
          values[valuesById[3] = "CANCELED"] = 3;
          values[valuesById[5] = "REPLACEMENT"] = 5;
          values[valuesById[6] = "DUPLICATED"] = 6;
          values[valuesById[7] = "DELETED"] = 7;
          values[valuesById[8] = "NEW"] = 8;
          return values;
        })();
        TripDescriptor.ModifiedTripSelector = (function() {
          function ModifiedTripSelector(properties) {
            if (properties) {
              for (var keys = Object.keys(properties), i2 = 0; i2 < keys.length; ++i2)
                if (properties[keys[i2]] != null)
                  this[keys[i2]] = properties[keys[i2]];
            }
          }
          ModifiedTripSelector.prototype.modifications_id = "";
          ModifiedTripSelector.prototype.affected_trip_id = "";
          ModifiedTripSelector.prototype.start_time = "";
          ModifiedTripSelector.prototype.start_date = "";
          ModifiedTripSelector.create = function create(properties) {
            return new ModifiedTripSelector(properties);
          };
          ModifiedTripSelector.encode = function encode(message, writer) {
            if (!writer)
              writer = $Writer.create();
            if (message.modifications_id != null && Object.hasOwnProperty.call(message, "modifications_id"))
              writer.uint32(
                /* id 1, wireType 2 =*/
                10
              ).string(message.modifications_id);
            if (message.affected_trip_id != null && Object.hasOwnProperty.call(message, "affected_trip_id"))
              writer.uint32(
                /* id 2, wireType 2 =*/
                18
              ).string(message.affected_trip_id);
            if (message.start_time != null && Object.hasOwnProperty.call(message, "start_time"))
              writer.uint32(
                /* id 3, wireType 2 =*/
                26
              ).string(message.start_time);
            if (message.start_date != null && Object.hasOwnProperty.call(message, "start_date"))
              writer.uint32(
                /* id 4, wireType 2 =*/
                34
              ).string(message.start_date);
            return writer;
          };
          ModifiedTripSelector.encodeDelimited = function encodeDelimited(message, writer) {
            return this.encode(message, writer).ldelim();
          };
          ModifiedTripSelector.decode = function decode(reader, length, error) {
            if (!(reader instanceof $Reader))
              reader = $Reader.create(reader);
            var end = length === void 0 ? reader.len : reader.pos + length, message = new $root.transit_realtime.TripDescriptor.ModifiedTripSelector();
            while (reader.pos < end) {
              var tag = reader.uint32();
              if (tag === error)
                break;
              switch (tag >>> 3) {
                case 1: {
                  message.modifications_id = reader.string();
                  break;
                }
                case 2: {
                  message.affected_trip_id = reader.string();
                  break;
                }
                case 3: {
                  message.start_time = reader.string();
                  break;
                }
                case 4: {
                  message.start_date = reader.string();
                  break;
                }
                default:
                  reader.skipType(tag & 7);
                  break;
              }
            }
            return message;
          };
          ModifiedTripSelector.decodeDelimited = function decodeDelimited(reader) {
            if (!(reader instanceof $Reader))
              reader = new $Reader(reader);
            return this.decode(reader, reader.uint32());
          };
          ModifiedTripSelector.verify = function verify(message) {
            if (typeof message !== "object" || message === null)
              return "object expected";
            if (message.modifications_id != null && message.hasOwnProperty("modifications_id")) {
              if (!$util.isString(message.modifications_id))
                return "modifications_id: string expected";
            }
            if (message.affected_trip_id != null && message.hasOwnProperty("affected_trip_id")) {
              if (!$util.isString(message.affected_trip_id))
                return "affected_trip_id: string expected";
            }
            if (message.start_time != null && message.hasOwnProperty("start_time")) {
              if (!$util.isString(message.start_time))
                return "start_time: string expected";
            }
            if (message.start_date != null && message.hasOwnProperty("start_date")) {
              if (!$util.isString(message.start_date))
                return "start_date: string expected";
            }
            return null;
          };
          ModifiedTripSelector.fromObject = function fromObject(object) {
            if (object instanceof $root.transit_realtime.TripDescriptor.ModifiedTripSelector)
              return object;
            var message = new $root.transit_realtime.TripDescriptor.ModifiedTripSelector();
            if (object.modifications_id != null)
              message.modifications_id = String(object.modifications_id);
            if (object.affected_trip_id != null)
              message.affected_trip_id = String(object.affected_trip_id);
            if (object.start_time != null)
              message.start_time = String(object.start_time);
            if (object.start_date != null)
              message.start_date = String(object.start_date);
            return message;
          };
          ModifiedTripSelector.toObject = function toObject(message, options) {
            if (!options)
              options = {};
            var object = {};
            if (options.defaults) {
              object.modifications_id = "";
              object.affected_trip_id = "";
              object.start_time = "";
              object.start_date = "";
            }
            if (message.modifications_id != null && message.hasOwnProperty("modifications_id"))
              object.modifications_id = message.modifications_id;
            if (message.affected_trip_id != null && message.hasOwnProperty("affected_trip_id"))
              object.affected_trip_id = message.affected_trip_id;
            if (message.start_time != null && message.hasOwnProperty("start_time"))
              object.start_time = message.start_time;
            if (message.start_date != null && message.hasOwnProperty("start_date"))
              object.start_date = message.start_date;
            return object;
          };
          ModifiedTripSelector.prototype.toJSON = function toJSON() {
            return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
          };
          ModifiedTripSelector.getTypeUrl = function getTypeUrl(typeUrlPrefix) {
            if (typeUrlPrefix === void 0) {
              typeUrlPrefix = "type.googleapis.com";
            }
            return typeUrlPrefix + "/transit_realtime.TripDescriptor.ModifiedTripSelector";
          };
          return ModifiedTripSelector;
        })();
        return TripDescriptor;
      })();
      transit_realtime2.VehicleDescriptor = (function() {
        function VehicleDescriptor(properties) {
          if (properties) {
            for (var keys = Object.keys(properties), i2 = 0; i2 < keys.length; ++i2)
              if (properties[keys[i2]] != null)
                this[keys[i2]] = properties[keys[i2]];
          }
        }
        VehicleDescriptor.prototype.id = "";
        VehicleDescriptor.prototype.label = "";
        VehicleDescriptor.prototype.license_plate = "";
        VehicleDescriptor.prototype.wheelchair_accessible = 0;
        VehicleDescriptor.create = function create(properties) {
          return new VehicleDescriptor(properties);
        };
        VehicleDescriptor.encode = function encode(message, writer) {
          if (!writer)
            writer = $Writer.create();
          if (message.id != null && Object.hasOwnProperty.call(message, "id"))
            writer.uint32(
              /* id 1, wireType 2 =*/
              10
            ).string(message.id);
          if (message.label != null && Object.hasOwnProperty.call(message, "label"))
            writer.uint32(
              /* id 2, wireType 2 =*/
              18
            ).string(message.label);
          if (message.license_plate != null && Object.hasOwnProperty.call(message, "license_plate"))
            writer.uint32(
              /* id 3, wireType 2 =*/
              26
            ).string(message.license_plate);
          if (message.wheelchair_accessible != null && Object.hasOwnProperty.call(message, "wheelchair_accessible"))
            writer.uint32(
              /* id 4, wireType 0 =*/
              32
            ).int32(message.wheelchair_accessible);
          return writer;
        };
        VehicleDescriptor.encodeDelimited = function encodeDelimited(message, writer) {
          return this.encode(message, writer).ldelim();
        };
        VehicleDescriptor.decode = function decode(reader, length, error) {
          if (!(reader instanceof $Reader))
            reader = $Reader.create(reader);
          var end = length === void 0 ? reader.len : reader.pos + length, message = new $root.transit_realtime.VehicleDescriptor();
          while (reader.pos < end) {
            var tag = reader.uint32();
            if (tag === error)
              break;
            switch (tag >>> 3) {
              case 1: {
                message.id = reader.string();
                break;
              }
              case 2: {
                message.label = reader.string();
                break;
              }
              case 3: {
                message.license_plate = reader.string();
                break;
              }
              case 4: {
                message.wheelchair_accessible = reader.int32();
                break;
              }
              default:
                reader.skipType(tag & 7);
                break;
            }
          }
          return message;
        };
        VehicleDescriptor.decodeDelimited = function decodeDelimited(reader) {
          if (!(reader instanceof $Reader))
            reader = new $Reader(reader);
          return this.decode(reader, reader.uint32());
        };
        VehicleDescriptor.verify = function verify(message) {
          if (typeof message !== "object" || message === null)
            return "object expected";
          if (message.id != null && message.hasOwnProperty("id")) {
            if (!$util.isString(message.id))
              return "id: string expected";
          }
          if (message.label != null && message.hasOwnProperty("label")) {
            if (!$util.isString(message.label))
              return "label: string expected";
          }
          if (message.license_plate != null && message.hasOwnProperty("license_plate")) {
            if (!$util.isString(message.license_plate))
              return "license_plate: string expected";
          }
          if (message.wheelchair_accessible != null && message.hasOwnProperty("wheelchair_accessible"))
            switch (message.wheelchair_accessible) {
              default:
                return "wheelchair_accessible: enum value expected";
              case 0:
              case 1:
              case 2:
              case 3:
                break;
            }
          return null;
        };
        VehicleDescriptor.fromObject = function fromObject(object) {
          if (object instanceof $root.transit_realtime.VehicleDescriptor)
            return object;
          var message = new $root.transit_realtime.VehicleDescriptor();
          if (object.id != null)
            message.id = String(object.id);
          if (object.label != null)
            message.label = String(object.label);
          if (object.license_plate != null)
            message.license_plate = String(object.license_plate);
          switch (object.wheelchair_accessible) {
            default:
              if (typeof object.wheelchair_accessible === "number") {
                message.wheelchair_accessible = object.wheelchair_accessible;
                break;
              }
              break;
            case "NO_VALUE":
            case 0:
              message.wheelchair_accessible = 0;
              break;
            case "UNKNOWN":
            case 1:
              message.wheelchair_accessible = 1;
              break;
            case "WHEELCHAIR_ACCESSIBLE":
            case 2:
              message.wheelchair_accessible = 2;
              break;
            case "WHEELCHAIR_INACCESSIBLE":
            case 3:
              message.wheelchair_accessible = 3;
              break;
          }
          return message;
        };
        VehicleDescriptor.toObject = function toObject(message, options) {
          if (!options)
            options = {};
          var object = {};
          if (options.defaults) {
            object.id = "";
            object.label = "";
            object.license_plate = "";
            object.wheelchair_accessible = options.enums === String ? "NO_VALUE" : 0;
          }
          if (message.id != null && message.hasOwnProperty("id"))
            object.id = message.id;
          if (message.label != null && message.hasOwnProperty("label"))
            object.label = message.label;
          if (message.license_plate != null && message.hasOwnProperty("license_plate"))
            object.license_plate = message.license_plate;
          if (message.wheelchair_accessible != null && message.hasOwnProperty("wheelchair_accessible"))
            object.wheelchair_accessible = options.enums === String ? $root.transit_realtime.VehicleDescriptor.WheelchairAccessible[message.wheelchair_accessible] === void 0 ? message.wheelchair_accessible : $root.transit_realtime.VehicleDescriptor.WheelchairAccessible[message.wheelchair_accessible] : message.wheelchair_accessible;
          return object;
        };
        VehicleDescriptor.prototype.toJSON = function toJSON() {
          return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
        };
        VehicleDescriptor.getTypeUrl = function getTypeUrl(typeUrlPrefix) {
          if (typeUrlPrefix === void 0) {
            typeUrlPrefix = "type.googleapis.com";
          }
          return typeUrlPrefix + "/transit_realtime.VehicleDescriptor";
        };
        VehicleDescriptor.WheelchairAccessible = (function() {
          var valuesById = {}, values = Object.create(valuesById);
          values[valuesById[0] = "NO_VALUE"] = 0;
          values[valuesById[1] = "UNKNOWN"] = 1;
          values[valuesById[2] = "WHEELCHAIR_ACCESSIBLE"] = 2;
          values[valuesById[3] = "WHEELCHAIR_INACCESSIBLE"] = 3;
          return values;
        })();
        return VehicleDescriptor;
      })();
      transit_realtime2.EntitySelector = (function() {
        function EntitySelector(properties) {
          if (properties) {
            for (var keys = Object.keys(properties), i2 = 0; i2 < keys.length; ++i2)
              if (properties[keys[i2]] != null)
                this[keys[i2]] = properties[keys[i2]];
          }
        }
        EntitySelector.prototype.agency_id = "";
        EntitySelector.prototype.route_id = "";
        EntitySelector.prototype.route_type = 0;
        EntitySelector.prototype.trip = null;
        EntitySelector.prototype.stop_id = "";
        EntitySelector.prototype.direction_id = 0;
        EntitySelector.create = function create(properties) {
          return new EntitySelector(properties);
        };
        EntitySelector.encode = function encode(message, writer) {
          if (!writer)
            writer = $Writer.create();
          if (message.agency_id != null && Object.hasOwnProperty.call(message, "agency_id"))
            writer.uint32(
              /* id 1, wireType 2 =*/
              10
            ).string(message.agency_id);
          if (message.route_id != null && Object.hasOwnProperty.call(message, "route_id"))
            writer.uint32(
              /* id 2, wireType 2 =*/
              18
            ).string(message.route_id);
          if (message.route_type != null && Object.hasOwnProperty.call(message, "route_type"))
            writer.uint32(
              /* id 3, wireType 0 =*/
              24
            ).int32(message.route_type);
          if (message.trip != null && Object.hasOwnProperty.call(message, "trip"))
            $root.transit_realtime.TripDescriptor.encode(message.trip, writer.uint32(
              /* id 4, wireType 2 =*/
              34
            ).fork()).ldelim();
          if (message.stop_id != null && Object.hasOwnProperty.call(message, "stop_id"))
            writer.uint32(
              /* id 5, wireType 2 =*/
              42
            ).string(message.stop_id);
          if (message.direction_id != null && Object.hasOwnProperty.call(message, "direction_id"))
            writer.uint32(
              /* id 6, wireType 0 =*/
              48
            ).uint32(message.direction_id);
          return writer;
        };
        EntitySelector.encodeDelimited = function encodeDelimited(message, writer) {
          return this.encode(message, writer).ldelim();
        };
        EntitySelector.decode = function decode(reader, length, error) {
          if (!(reader instanceof $Reader))
            reader = $Reader.create(reader);
          var end = length === void 0 ? reader.len : reader.pos + length, message = new $root.transit_realtime.EntitySelector();
          while (reader.pos < end) {
            var tag = reader.uint32();
            if (tag === error)
              break;
            switch (tag >>> 3) {
              case 1: {
                message.agency_id = reader.string();
                break;
              }
              case 2: {
                message.route_id = reader.string();
                break;
              }
              case 3: {
                message.route_type = reader.int32();
                break;
              }
              case 4: {
                message.trip = $root.transit_realtime.TripDescriptor.decode(reader, reader.uint32());
                break;
              }
              case 5: {
                message.stop_id = reader.string();
                break;
              }
              case 6: {
                message.direction_id = reader.uint32();
                break;
              }
              default:
                reader.skipType(tag & 7);
                break;
            }
          }
          return message;
        };
        EntitySelector.decodeDelimited = function decodeDelimited(reader) {
          if (!(reader instanceof $Reader))
            reader = new $Reader(reader);
          return this.decode(reader, reader.uint32());
        };
        EntitySelector.verify = function verify(message) {
          if (typeof message !== "object" || message === null)
            return "object expected";
          if (message.agency_id != null && message.hasOwnProperty("agency_id")) {
            if (!$util.isString(message.agency_id))
              return "agency_id: string expected";
          }
          if (message.route_id != null && message.hasOwnProperty("route_id")) {
            if (!$util.isString(message.route_id))
              return "route_id: string expected";
          }
          if (message.route_type != null && message.hasOwnProperty("route_type")) {
            if (!$util.isInteger(message.route_type))
              return "route_type: integer expected";
          }
          if (message.trip != null && message.hasOwnProperty("trip")) {
            var error = $root.transit_realtime.TripDescriptor.verify(message.trip);
            if (error)
              return "trip." + error;
          }
          if (message.stop_id != null && message.hasOwnProperty("stop_id")) {
            if (!$util.isString(message.stop_id))
              return "stop_id: string expected";
          }
          if (message.direction_id != null && message.hasOwnProperty("direction_id")) {
            if (!$util.isInteger(message.direction_id))
              return "direction_id: integer expected";
          }
          return null;
        };
        EntitySelector.fromObject = function fromObject(object) {
          if (object instanceof $root.transit_realtime.EntitySelector)
            return object;
          var message = new $root.transit_realtime.EntitySelector();
          if (object.agency_id != null)
            message.agency_id = String(object.agency_id);
          if (object.route_id != null)
            message.route_id = String(object.route_id);
          if (object.route_type != null)
            message.route_type = object.route_type | 0;
          if (object.trip != null) {
            if (typeof object.trip !== "object")
              throw TypeError(".transit_realtime.EntitySelector.trip: object expected");
            message.trip = $root.transit_realtime.TripDescriptor.fromObject(object.trip);
          }
          if (object.stop_id != null)
            message.stop_id = String(object.stop_id);
          if (object.direction_id != null)
            message.direction_id = object.direction_id >>> 0;
          return message;
        };
        EntitySelector.toObject = function toObject(message, options) {
          if (!options)
            options = {};
          var object = {};
          if (options.defaults) {
            object.agency_id = "";
            object.route_id = "";
            object.route_type = 0;
            object.trip = null;
            object.stop_id = "";
            object.direction_id = 0;
          }
          if (message.agency_id != null && message.hasOwnProperty("agency_id"))
            object.agency_id = message.agency_id;
          if (message.route_id != null && message.hasOwnProperty("route_id"))
            object.route_id = message.route_id;
          if (message.route_type != null && message.hasOwnProperty("route_type"))
            object.route_type = message.route_type;
          if (message.trip != null && message.hasOwnProperty("trip"))
            object.trip = $root.transit_realtime.TripDescriptor.toObject(message.trip, options);
          if (message.stop_id != null && message.hasOwnProperty("stop_id"))
            object.stop_id = message.stop_id;
          if (message.direction_id != null && message.hasOwnProperty("direction_id"))
            object.direction_id = message.direction_id;
          return object;
        };
        EntitySelector.prototype.toJSON = function toJSON() {
          return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
        };
        EntitySelector.getTypeUrl = function getTypeUrl(typeUrlPrefix) {
          if (typeUrlPrefix === void 0) {
            typeUrlPrefix = "type.googleapis.com";
          }
          return typeUrlPrefix + "/transit_realtime.EntitySelector";
        };
        return EntitySelector;
      })();
      transit_realtime2.TranslatedString = (function() {
        function TranslatedString(properties) {
          this.translation = [];
          if (properties) {
            for (var keys = Object.keys(properties), i2 = 0; i2 < keys.length; ++i2)
              if (properties[keys[i2]] != null)
                this[keys[i2]] = properties[keys[i2]];
          }
        }
        TranslatedString.prototype.translation = $util.emptyArray;
        TranslatedString.create = function create(properties) {
          return new TranslatedString(properties);
        };
        TranslatedString.encode = function encode(message, writer) {
          if (!writer)
            writer = $Writer.create();
          if (message.translation != null && message.translation.length)
            for (var i2 = 0; i2 < message.translation.length; ++i2)
              $root.transit_realtime.TranslatedString.Translation.encode(message.translation[i2], writer.uint32(
                /* id 1, wireType 2 =*/
                10
              ).fork()).ldelim();
          return writer;
        };
        TranslatedString.encodeDelimited = function encodeDelimited(message, writer) {
          return this.encode(message, writer).ldelim();
        };
        TranslatedString.decode = function decode(reader, length, error) {
          if (!(reader instanceof $Reader))
            reader = $Reader.create(reader);
          var end = length === void 0 ? reader.len : reader.pos + length, message = new $root.transit_realtime.TranslatedString();
          while (reader.pos < end) {
            var tag = reader.uint32();
            if (tag === error)
              break;
            switch (tag >>> 3) {
              case 1: {
                if (!(message.translation && message.translation.length))
                  message.translation = [];
                message.translation.push($root.transit_realtime.TranslatedString.Translation.decode(reader, reader.uint32()));
                break;
              }
              default:
                reader.skipType(tag & 7);
                break;
            }
          }
          return message;
        };
        TranslatedString.decodeDelimited = function decodeDelimited(reader) {
          if (!(reader instanceof $Reader))
            reader = new $Reader(reader);
          return this.decode(reader, reader.uint32());
        };
        TranslatedString.verify = function verify(message) {
          if (typeof message !== "object" || message === null)
            return "object expected";
          if (message.translation != null && message.hasOwnProperty("translation")) {
            if (!Array.isArray(message.translation))
              return "translation: array expected";
            for (var i2 = 0; i2 < message.translation.length; ++i2) {
              var error = $root.transit_realtime.TranslatedString.Translation.verify(message.translation[i2]);
              if (error)
                return "translation." + error;
            }
          }
          return null;
        };
        TranslatedString.fromObject = function fromObject(object) {
          if (object instanceof $root.transit_realtime.TranslatedString)
            return object;
          var message = new $root.transit_realtime.TranslatedString();
          if (object.translation) {
            if (!Array.isArray(object.translation))
              throw TypeError(".transit_realtime.TranslatedString.translation: array expected");
            message.translation = [];
            for (var i2 = 0; i2 < object.translation.length; ++i2) {
              if (typeof object.translation[i2] !== "object")
                throw TypeError(".transit_realtime.TranslatedString.translation: object expected");
              message.translation[i2] = $root.transit_realtime.TranslatedString.Translation.fromObject(object.translation[i2]);
            }
          }
          return message;
        };
        TranslatedString.toObject = function toObject(message, options) {
          if (!options)
            options = {};
          var object = {};
          if (options.arrays || options.defaults)
            object.translation = [];
          if (message.translation && message.translation.length) {
            object.translation = [];
            for (var j = 0; j < message.translation.length; ++j)
              object.translation[j] = $root.transit_realtime.TranslatedString.Translation.toObject(message.translation[j], options);
          }
          return object;
        };
        TranslatedString.prototype.toJSON = function toJSON() {
          return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
        };
        TranslatedString.getTypeUrl = function getTypeUrl(typeUrlPrefix) {
          if (typeUrlPrefix === void 0) {
            typeUrlPrefix = "type.googleapis.com";
          }
          return typeUrlPrefix + "/transit_realtime.TranslatedString";
        };
        TranslatedString.Translation = (function() {
          function Translation(properties) {
            if (properties) {
              for (var keys = Object.keys(properties), i2 = 0; i2 < keys.length; ++i2)
                if (properties[keys[i2]] != null)
                  this[keys[i2]] = properties[keys[i2]];
            }
          }
          Translation.prototype.text = "";
          Translation.prototype.language = "";
          Translation.create = function create(properties) {
            return new Translation(properties);
          };
          Translation.encode = function encode(message, writer) {
            if (!writer)
              writer = $Writer.create();
            writer.uint32(
              /* id 1, wireType 2 =*/
              10
            ).string(message.text);
            if (message.language != null && Object.hasOwnProperty.call(message, "language"))
              writer.uint32(
                /* id 2, wireType 2 =*/
                18
              ).string(message.language);
            return writer;
          };
          Translation.encodeDelimited = function encodeDelimited(message, writer) {
            return this.encode(message, writer).ldelim();
          };
          Translation.decode = function decode(reader, length, error) {
            if (!(reader instanceof $Reader))
              reader = $Reader.create(reader);
            var end = length === void 0 ? reader.len : reader.pos + length, message = new $root.transit_realtime.TranslatedString.Translation();
            while (reader.pos < end) {
              var tag = reader.uint32();
              if (tag === error)
                break;
              switch (tag >>> 3) {
                case 1: {
                  message.text = reader.string();
                  break;
                }
                case 2: {
                  message.language = reader.string();
                  break;
                }
                default:
                  reader.skipType(tag & 7);
                  break;
              }
            }
            if (!message.hasOwnProperty("text"))
              throw $util.ProtocolError("missing required 'text'", { instance: message });
            return message;
          };
          Translation.decodeDelimited = function decodeDelimited(reader) {
            if (!(reader instanceof $Reader))
              reader = new $Reader(reader);
            return this.decode(reader, reader.uint32());
          };
          Translation.verify = function verify(message) {
            if (typeof message !== "object" || message === null)
              return "object expected";
            if (!$util.isString(message.text))
              return "text: string expected";
            if (message.language != null && message.hasOwnProperty("language")) {
              if (!$util.isString(message.language))
                return "language: string expected";
            }
            return null;
          };
          Translation.fromObject = function fromObject(object) {
            if (object instanceof $root.transit_realtime.TranslatedString.Translation)
              return object;
            var message = new $root.transit_realtime.TranslatedString.Translation();
            if (object.text != null)
              message.text = String(object.text);
            if (object.language != null)
              message.language = String(object.language);
            return message;
          };
          Translation.toObject = function toObject(message, options) {
            if (!options)
              options = {};
            var object = {};
            if (options.defaults) {
              object.text = "";
              object.language = "";
            }
            if (message.text != null && message.hasOwnProperty("text"))
              object.text = message.text;
            if (message.language != null && message.hasOwnProperty("language"))
              object.language = message.language;
            return object;
          };
          Translation.prototype.toJSON = function toJSON() {
            return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
          };
          Translation.getTypeUrl = function getTypeUrl(typeUrlPrefix) {
            if (typeUrlPrefix === void 0) {
              typeUrlPrefix = "type.googleapis.com";
            }
            return typeUrlPrefix + "/transit_realtime.TranslatedString.Translation";
          };
          return Translation;
        })();
        return TranslatedString;
      })();
      transit_realtime2.TranslatedImage = (function() {
        function TranslatedImage(properties) {
          this.localized_image = [];
          if (properties) {
            for (var keys = Object.keys(properties), i2 = 0; i2 < keys.length; ++i2)
              if (properties[keys[i2]] != null)
                this[keys[i2]] = properties[keys[i2]];
          }
        }
        TranslatedImage.prototype.localized_image = $util.emptyArray;
        TranslatedImage.create = function create(properties) {
          return new TranslatedImage(properties);
        };
        TranslatedImage.encode = function encode(message, writer) {
          if (!writer)
            writer = $Writer.create();
          if (message.localized_image != null && message.localized_image.length)
            for (var i2 = 0; i2 < message.localized_image.length; ++i2)
              $root.transit_realtime.TranslatedImage.LocalizedImage.encode(message.localized_image[i2], writer.uint32(
                /* id 1, wireType 2 =*/
                10
              ).fork()).ldelim();
          return writer;
        };
        TranslatedImage.encodeDelimited = function encodeDelimited(message, writer) {
          return this.encode(message, writer).ldelim();
        };
        TranslatedImage.decode = function decode(reader, length, error) {
          if (!(reader instanceof $Reader))
            reader = $Reader.create(reader);
          var end = length === void 0 ? reader.len : reader.pos + length, message = new $root.transit_realtime.TranslatedImage();
          while (reader.pos < end) {
            var tag = reader.uint32();
            if (tag === error)
              break;
            switch (tag >>> 3) {
              case 1: {
                if (!(message.localized_image && message.localized_image.length))
                  message.localized_image = [];
                message.localized_image.push($root.transit_realtime.TranslatedImage.LocalizedImage.decode(reader, reader.uint32()));
                break;
              }
              default:
                reader.skipType(tag & 7);
                break;
            }
          }
          return message;
        };
        TranslatedImage.decodeDelimited = function decodeDelimited(reader) {
          if (!(reader instanceof $Reader))
            reader = new $Reader(reader);
          return this.decode(reader, reader.uint32());
        };
        TranslatedImage.verify = function verify(message) {
          if (typeof message !== "object" || message === null)
            return "object expected";
          if (message.localized_image != null && message.hasOwnProperty("localized_image")) {
            if (!Array.isArray(message.localized_image))
              return "localized_image: array expected";
            for (var i2 = 0; i2 < message.localized_image.length; ++i2) {
              var error = $root.transit_realtime.TranslatedImage.LocalizedImage.verify(message.localized_image[i2]);
              if (error)
                return "localized_image." + error;
            }
          }
          return null;
        };
        TranslatedImage.fromObject = function fromObject(object) {
          if (object instanceof $root.transit_realtime.TranslatedImage)
            return object;
          var message = new $root.transit_realtime.TranslatedImage();
          if (object.localized_image) {
            if (!Array.isArray(object.localized_image))
              throw TypeError(".transit_realtime.TranslatedImage.localized_image: array expected");
            message.localized_image = [];
            for (var i2 = 0; i2 < object.localized_image.length; ++i2) {
              if (typeof object.localized_image[i2] !== "object")
                throw TypeError(".transit_realtime.TranslatedImage.localized_image: object expected");
              message.localized_image[i2] = $root.transit_realtime.TranslatedImage.LocalizedImage.fromObject(object.localized_image[i2]);
            }
          }
          return message;
        };
        TranslatedImage.toObject = function toObject(message, options) {
          if (!options)
            options = {};
          var object = {};
          if (options.arrays || options.defaults)
            object.localized_image = [];
          if (message.localized_image && message.localized_image.length) {
            object.localized_image = [];
            for (var j = 0; j < message.localized_image.length; ++j)
              object.localized_image[j] = $root.transit_realtime.TranslatedImage.LocalizedImage.toObject(message.localized_image[j], options);
          }
          return object;
        };
        TranslatedImage.prototype.toJSON = function toJSON() {
          return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
        };
        TranslatedImage.getTypeUrl = function getTypeUrl(typeUrlPrefix) {
          if (typeUrlPrefix === void 0) {
            typeUrlPrefix = "type.googleapis.com";
          }
          return typeUrlPrefix + "/transit_realtime.TranslatedImage";
        };
        TranslatedImage.LocalizedImage = (function() {
          function LocalizedImage(properties) {
            if (properties) {
              for (var keys = Object.keys(properties), i2 = 0; i2 < keys.length; ++i2)
                if (properties[keys[i2]] != null)
                  this[keys[i2]] = properties[keys[i2]];
            }
          }
          LocalizedImage.prototype.url = "";
          LocalizedImage.prototype.media_type = "";
          LocalizedImage.prototype.language = "";
          LocalizedImage.create = function create(properties) {
            return new LocalizedImage(properties);
          };
          LocalizedImage.encode = function encode(message, writer) {
            if (!writer)
              writer = $Writer.create();
            writer.uint32(
              /* id 1, wireType 2 =*/
              10
            ).string(message.url);
            writer.uint32(
              /* id 2, wireType 2 =*/
              18
            ).string(message.media_type);
            if (message.language != null && Object.hasOwnProperty.call(message, "language"))
              writer.uint32(
                /* id 3, wireType 2 =*/
                26
              ).string(message.language);
            return writer;
          };
          LocalizedImage.encodeDelimited = function encodeDelimited(message, writer) {
            return this.encode(message, writer).ldelim();
          };
          LocalizedImage.decode = function decode(reader, length, error) {
            if (!(reader instanceof $Reader))
              reader = $Reader.create(reader);
            var end = length === void 0 ? reader.len : reader.pos + length, message = new $root.transit_realtime.TranslatedImage.LocalizedImage();
            while (reader.pos < end) {
              var tag = reader.uint32();
              if (tag === error)
                break;
              switch (tag >>> 3) {
                case 1: {
                  message.url = reader.string();
                  break;
                }
                case 2: {
                  message.media_type = reader.string();
                  break;
                }
                case 3: {
                  message.language = reader.string();
                  break;
                }
                default:
                  reader.skipType(tag & 7);
                  break;
              }
            }
            if (!message.hasOwnProperty("url"))
              throw $util.ProtocolError("missing required 'url'", { instance: message });
            if (!message.hasOwnProperty("media_type"))
              throw $util.ProtocolError("missing required 'media_type'", { instance: message });
            return message;
          };
          LocalizedImage.decodeDelimited = function decodeDelimited(reader) {
            if (!(reader instanceof $Reader))
              reader = new $Reader(reader);
            return this.decode(reader, reader.uint32());
          };
          LocalizedImage.verify = function verify(message) {
            if (typeof message !== "object" || message === null)
              return "object expected";
            if (!$util.isString(message.url))
              return "url: string expected";
            if (!$util.isString(message.media_type))
              return "media_type: string expected";
            if (message.language != null && message.hasOwnProperty("language")) {
              if (!$util.isString(message.language))
                return "language: string expected";
            }
            return null;
          };
          LocalizedImage.fromObject = function fromObject(object) {
            if (object instanceof $root.transit_realtime.TranslatedImage.LocalizedImage)
              return object;
            var message = new $root.transit_realtime.TranslatedImage.LocalizedImage();
            if (object.url != null)
              message.url = String(object.url);
            if (object.media_type != null)
              message.media_type = String(object.media_type);
            if (object.language != null)
              message.language = String(object.language);
            return message;
          };
          LocalizedImage.toObject = function toObject(message, options) {
            if (!options)
              options = {};
            var object = {};
            if (options.defaults) {
              object.url = "";
              object.media_type = "";
              object.language = "";
            }
            if (message.url != null && message.hasOwnProperty("url"))
              object.url = message.url;
            if (message.media_type != null && message.hasOwnProperty("media_type"))
              object.media_type = message.media_type;
            if (message.language != null && message.hasOwnProperty("language"))
              object.language = message.language;
            return object;
          };
          LocalizedImage.prototype.toJSON = function toJSON() {
            return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
          };
          LocalizedImage.getTypeUrl = function getTypeUrl(typeUrlPrefix) {
            if (typeUrlPrefix === void 0) {
              typeUrlPrefix = "type.googleapis.com";
            }
            return typeUrlPrefix + "/transit_realtime.TranslatedImage.LocalizedImage";
          };
          return LocalizedImage;
        })();
        return TranslatedImage;
      })();
      transit_realtime2.Shape = (function() {
        function Shape(properties) {
          if (properties) {
            for (var keys = Object.keys(properties), i2 = 0; i2 < keys.length; ++i2)
              if (properties[keys[i2]] != null)
                this[keys[i2]] = properties[keys[i2]];
          }
        }
        Shape.prototype.shape_id = "";
        Shape.prototype.encoded_polyline = "";
        Shape.create = function create(properties) {
          return new Shape(properties);
        };
        Shape.encode = function encode(message, writer) {
          if (!writer)
            writer = $Writer.create();
          if (message.shape_id != null && Object.hasOwnProperty.call(message, "shape_id"))
            writer.uint32(
              /* id 1, wireType 2 =*/
              10
            ).string(message.shape_id);
          if (message.encoded_polyline != null && Object.hasOwnProperty.call(message, "encoded_polyline"))
            writer.uint32(
              /* id 2, wireType 2 =*/
              18
            ).string(message.encoded_polyline);
          return writer;
        };
        Shape.encodeDelimited = function encodeDelimited(message, writer) {
          return this.encode(message, writer).ldelim();
        };
        Shape.decode = function decode(reader, length, error) {
          if (!(reader instanceof $Reader))
            reader = $Reader.create(reader);
          var end = length === void 0 ? reader.len : reader.pos + length, message = new $root.transit_realtime.Shape();
          while (reader.pos < end) {
            var tag = reader.uint32();
            if (tag === error)
              break;
            switch (tag >>> 3) {
              case 1: {
                message.shape_id = reader.string();
                break;
              }
              case 2: {
                message.encoded_polyline = reader.string();
                break;
              }
              default:
                reader.skipType(tag & 7);
                break;
            }
          }
          return message;
        };
        Shape.decodeDelimited = function decodeDelimited(reader) {
          if (!(reader instanceof $Reader))
            reader = new $Reader(reader);
          return this.decode(reader, reader.uint32());
        };
        Shape.verify = function verify(message) {
          if (typeof message !== "object" || message === null)
            return "object expected";
          if (message.shape_id != null && message.hasOwnProperty("shape_id")) {
            if (!$util.isString(message.shape_id))
              return "shape_id: string expected";
          }
          if (message.encoded_polyline != null && message.hasOwnProperty("encoded_polyline")) {
            if (!$util.isString(message.encoded_polyline))
              return "encoded_polyline: string expected";
          }
          return null;
        };
        Shape.fromObject = function fromObject(object) {
          if (object instanceof $root.transit_realtime.Shape)
            return object;
          var message = new $root.transit_realtime.Shape();
          if (object.shape_id != null)
            message.shape_id = String(object.shape_id);
          if (object.encoded_polyline != null)
            message.encoded_polyline = String(object.encoded_polyline);
          return message;
        };
        Shape.toObject = function toObject(message, options) {
          if (!options)
            options = {};
          var object = {};
          if (options.defaults) {
            object.shape_id = "";
            object.encoded_polyline = "";
          }
          if (message.shape_id != null && message.hasOwnProperty("shape_id"))
            object.shape_id = message.shape_id;
          if (message.encoded_polyline != null && message.hasOwnProperty("encoded_polyline"))
            object.encoded_polyline = message.encoded_polyline;
          return object;
        };
        Shape.prototype.toJSON = function toJSON() {
          return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
        };
        Shape.getTypeUrl = function getTypeUrl(typeUrlPrefix) {
          if (typeUrlPrefix === void 0) {
            typeUrlPrefix = "type.googleapis.com";
          }
          return typeUrlPrefix + "/transit_realtime.Shape";
        };
        return Shape;
      })();
      transit_realtime2.Stop = (function() {
        function Stop(properties) {
          if (properties) {
            for (var keys = Object.keys(properties), i2 = 0; i2 < keys.length; ++i2)
              if (properties[keys[i2]] != null)
                this[keys[i2]] = properties[keys[i2]];
          }
        }
        Stop.prototype.stop_id = "";
        Stop.prototype.stop_code = null;
        Stop.prototype.stop_name = null;
        Stop.prototype.tts_stop_name = null;
        Stop.prototype.stop_desc = null;
        Stop.prototype.stop_lat = 0;
        Stop.prototype.stop_lon = 0;
        Stop.prototype.zone_id = "";
        Stop.prototype.stop_url = null;
        Stop.prototype.parent_station = "";
        Stop.prototype.stop_timezone = "";
        Stop.prototype.wheelchair_boarding = 0;
        Stop.prototype.level_id = "";
        Stop.prototype.platform_code = null;
        Stop.create = function create(properties) {
          return new Stop(properties);
        };
        Stop.encode = function encode(message, writer) {
          if (!writer)
            writer = $Writer.create();
          if (message.stop_id != null && Object.hasOwnProperty.call(message, "stop_id"))
            writer.uint32(
              /* id 1, wireType 2 =*/
              10
            ).string(message.stop_id);
          if (message.stop_code != null && Object.hasOwnProperty.call(message, "stop_code"))
            $root.transit_realtime.TranslatedString.encode(message.stop_code, writer.uint32(
              /* id 2, wireType 2 =*/
              18
            ).fork()).ldelim();
          if (message.stop_name != null && Object.hasOwnProperty.call(message, "stop_name"))
            $root.transit_realtime.TranslatedString.encode(message.stop_name, writer.uint32(
              /* id 3, wireType 2 =*/
              26
            ).fork()).ldelim();
          if (message.tts_stop_name != null && Object.hasOwnProperty.call(message, "tts_stop_name"))
            $root.transit_realtime.TranslatedString.encode(message.tts_stop_name, writer.uint32(
              /* id 4, wireType 2 =*/
              34
            ).fork()).ldelim();
          if (message.stop_desc != null && Object.hasOwnProperty.call(message, "stop_desc"))
            $root.transit_realtime.TranslatedString.encode(message.stop_desc, writer.uint32(
              /* id 5, wireType 2 =*/
              42
            ).fork()).ldelim();
          if (message.stop_lat != null && Object.hasOwnProperty.call(message, "stop_lat"))
            writer.uint32(
              /* id 6, wireType 5 =*/
              53
            ).float(message.stop_lat);
          if (message.stop_lon != null && Object.hasOwnProperty.call(message, "stop_lon"))
            writer.uint32(
              /* id 7, wireType 5 =*/
              61
            ).float(message.stop_lon);
          if (message.zone_id != null && Object.hasOwnProperty.call(message, "zone_id"))
            writer.uint32(
              /* id 8, wireType 2 =*/
              66
            ).string(message.zone_id);
          if (message.stop_url != null && Object.hasOwnProperty.call(message, "stop_url"))
            $root.transit_realtime.TranslatedString.encode(message.stop_url, writer.uint32(
              /* id 9, wireType 2 =*/
              74
            ).fork()).ldelim();
          if (message.parent_station != null && Object.hasOwnProperty.call(message, "parent_station"))
            writer.uint32(
              /* id 11, wireType 2 =*/
              90
            ).string(message.parent_station);
          if (message.stop_timezone != null && Object.hasOwnProperty.call(message, "stop_timezone"))
            writer.uint32(
              /* id 12, wireType 2 =*/
              98
            ).string(message.stop_timezone);
          if (message.wheelchair_boarding != null && Object.hasOwnProperty.call(message, "wheelchair_boarding"))
            writer.uint32(
              /* id 13, wireType 0 =*/
              104
            ).int32(message.wheelchair_boarding);
          if (message.level_id != null && Object.hasOwnProperty.call(message, "level_id"))
            writer.uint32(
              /* id 14, wireType 2 =*/
              114
            ).string(message.level_id);
          if (message.platform_code != null && Object.hasOwnProperty.call(message, "platform_code"))
            $root.transit_realtime.TranslatedString.encode(message.platform_code, writer.uint32(
              /* id 15, wireType 2 =*/
              122
            ).fork()).ldelim();
          return writer;
        };
        Stop.encodeDelimited = function encodeDelimited(message, writer) {
          return this.encode(message, writer).ldelim();
        };
        Stop.decode = function decode(reader, length, error) {
          if (!(reader instanceof $Reader))
            reader = $Reader.create(reader);
          var end = length === void 0 ? reader.len : reader.pos + length, message = new $root.transit_realtime.Stop();
          while (reader.pos < end) {
            var tag = reader.uint32();
            if (tag === error)
              break;
            switch (tag >>> 3) {
              case 1: {
                message.stop_id = reader.string();
                break;
              }
              case 2: {
                message.stop_code = $root.transit_realtime.TranslatedString.decode(reader, reader.uint32());
                break;
              }
              case 3: {
                message.stop_name = $root.transit_realtime.TranslatedString.decode(reader, reader.uint32());
                break;
              }
              case 4: {
                message.tts_stop_name = $root.transit_realtime.TranslatedString.decode(reader, reader.uint32());
                break;
              }
              case 5: {
                message.stop_desc = $root.transit_realtime.TranslatedString.decode(reader, reader.uint32());
                break;
              }
              case 6: {
                message.stop_lat = reader.float();
                break;
              }
              case 7: {
                message.stop_lon = reader.float();
                break;
              }
              case 8: {
                message.zone_id = reader.string();
                break;
              }
              case 9: {
                message.stop_url = $root.transit_realtime.TranslatedString.decode(reader, reader.uint32());
                break;
              }
              case 11: {
                message.parent_station = reader.string();
                break;
              }
              case 12: {
                message.stop_timezone = reader.string();
                break;
              }
              case 13: {
                message.wheelchair_boarding = reader.int32();
                break;
              }
              case 14: {
                message.level_id = reader.string();
                break;
              }
              case 15: {
                message.platform_code = $root.transit_realtime.TranslatedString.decode(reader, reader.uint32());
                break;
              }
              default:
                reader.skipType(tag & 7);
                break;
            }
          }
          return message;
        };
        Stop.decodeDelimited = function decodeDelimited(reader) {
          if (!(reader instanceof $Reader))
            reader = new $Reader(reader);
          return this.decode(reader, reader.uint32());
        };
        Stop.verify = function verify(message) {
          if (typeof message !== "object" || message === null)
            return "object expected";
          if (message.stop_id != null && message.hasOwnProperty("stop_id")) {
            if (!$util.isString(message.stop_id))
              return "stop_id: string expected";
          }
          if (message.stop_code != null && message.hasOwnProperty("stop_code")) {
            var error = $root.transit_realtime.TranslatedString.verify(message.stop_code);
            if (error)
              return "stop_code." + error;
          }
          if (message.stop_name != null && message.hasOwnProperty("stop_name")) {
            var error = $root.transit_realtime.TranslatedString.verify(message.stop_name);
            if (error)
              return "stop_name." + error;
          }
          if (message.tts_stop_name != null && message.hasOwnProperty("tts_stop_name")) {
            var error = $root.transit_realtime.TranslatedString.verify(message.tts_stop_name);
            if (error)
              return "tts_stop_name." + error;
          }
          if (message.stop_desc != null && message.hasOwnProperty("stop_desc")) {
            var error = $root.transit_realtime.TranslatedString.verify(message.stop_desc);
            if (error)
              return "stop_desc." + error;
          }
          if (message.stop_lat != null && message.hasOwnProperty("stop_lat")) {
            if (typeof message.stop_lat !== "number")
              return "stop_lat: number expected";
          }
          if (message.stop_lon != null && message.hasOwnProperty("stop_lon")) {
            if (typeof message.stop_lon !== "number")
              return "stop_lon: number expected";
          }
          if (message.zone_id != null && message.hasOwnProperty("zone_id")) {
            if (!$util.isString(message.zone_id))
              return "zone_id: string expected";
          }
          if (message.stop_url != null && message.hasOwnProperty("stop_url")) {
            var error = $root.transit_realtime.TranslatedString.verify(message.stop_url);
            if (error)
              return "stop_url." + error;
          }
          if (message.parent_station != null && message.hasOwnProperty("parent_station")) {
            if (!$util.isString(message.parent_station))
              return "parent_station: string expected";
          }
          if (message.stop_timezone != null && message.hasOwnProperty("stop_timezone")) {
            if (!$util.isString(message.stop_timezone))
              return "stop_timezone: string expected";
          }
          if (message.wheelchair_boarding != null && message.hasOwnProperty("wheelchair_boarding"))
            switch (message.wheelchair_boarding) {
              default:
                return "wheelchair_boarding: enum value expected";
              case 0:
              case 1:
              case 2:
                break;
            }
          if (message.level_id != null && message.hasOwnProperty("level_id")) {
            if (!$util.isString(message.level_id))
              return "level_id: string expected";
          }
          if (message.platform_code != null && message.hasOwnProperty("platform_code")) {
            var error = $root.transit_realtime.TranslatedString.verify(message.platform_code);
            if (error)
              return "platform_code." + error;
          }
          return null;
        };
        Stop.fromObject = function fromObject(object) {
          if (object instanceof $root.transit_realtime.Stop)
            return object;
          var message = new $root.transit_realtime.Stop();
          if (object.stop_id != null)
            message.stop_id = String(object.stop_id);
          if (object.stop_code != null) {
            if (typeof object.stop_code !== "object")
              throw TypeError(".transit_realtime.Stop.stop_code: object expected");
            message.stop_code = $root.transit_realtime.TranslatedString.fromObject(object.stop_code);
          }
          if (object.stop_name != null) {
            if (typeof object.stop_name !== "object")
              throw TypeError(".transit_realtime.Stop.stop_name: object expected");
            message.stop_name = $root.transit_realtime.TranslatedString.fromObject(object.stop_name);
          }
          if (object.tts_stop_name != null) {
            if (typeof object.tts_stop_name !== "object")
              throw TypeError(".transit_realtime.Stop.tts_stop_name: object expected");
            message.tts_stop_name = $root.transit_realtime.TranslatedString.fromObject(object.tts_stop_name);
          }
          if (object.stop_desc != null) {
            if (typeof object.stop_desc !== "object")
              throw TypeError(".transit_realtime.Stop.stop_desc: object expected");
            message.stop_desc = $root.transit_realtime.TranslatedString.fromObject(object.stop_desc);
          }
          if (object.stop_lat != null)
            message.stop_lat = Number(object.stop_lat);
          if (object.stop_lon != null)
            message.stop_lon = Number(object.stop_lon);
          if (object.zone_id != null)
            message.zone_id = String(object.zone_id);
          if (object.stop_url != null) {
            if (typeof object.stop_url !== "object")
              throw TypeError(".transit_realtime.Stop.stop_url: object expected");
            message.stop_url = $root.transit_realtime.TranslatedString.fromObject(object.stop_url);
          }
          if (object.parent_station != null)
            message.parent_station = String(object.parent_station);
          if (object.stop_timezone != null)
            message.stop_timezone = String(object.stop_timezone);
          switch (object.wheelchair_boarding) {
            default:
              if (typeof object.wheelchair_boarding === "number") {
                message.wheelchair_boarding = object.wheelchair_boarding;
                break;
              }
              break;
            case "UNKNOWN":
            case 0:
              message.wheelchair_boarding = 0;
              break;
            case "AVAILABLE":
            case 1:
              message.wheelchair_boarding = 1;
              break;
            case "NOT_AVAILABLE":
            case 2:
              message.wheelchair_boarding = 2;
              break;
          }
          if (object.level_id != null)
            message.level_id = String(object.level_id);
          if (object.platform_code != null) {
            if (typeof object.platform_code !== "object")
              throw TypeError(".transit_realtime.Stop.platform_code: object expected");
            message.platform_code = $root.transit_realtime.TranslatedString.fromObject(object.platform_code);
          }
          return message;
        };
        Stop.toObject = function toObject(message, options) {
          if (!options)
            options = {};
          var object = {};
          if (options.defaults) {
            object.stop_id = "";
            object.stop_code = null;
            object.stop_name = null;
            object.tts_stop_name = null;
            object.stop_desc = null;
            object.stop_lat = 0;
            object.stop_lon = 0;
            object.zone_id = "";
            object.stop_url = null;
            object.parent_station = "";
            object.stop_timezone = "";
            object.wheelchair_boarding = options.enums === String ? "UNKNOWN" : 0;
            object.level_id = "";
            object.platform_code = null;
          }
          if (message.stop_id != null && message.hasOwnProperty("stop_id"))
            object.stop_id = message.stop_id;
          if (message.stop_code != null && message.hasOwnProperty("stop_code"))
            object.stop_code = $root.transit_realtime.TranslatedString.toObject(message.stop_code, options);
          if (message.stop_name != null && message.hasOwnProperty("stop_name"))
            object.stop_name = $root.transit_realtime.TranslatedString.toObject(message.stop_name, options);
          if (message.tts_stop_name != null && message.hasOwnProperty("tts_stop_name"))
            object.tts_stop_name = $root.transit_realtime.TranslatedString.toObject(message.tts_stop_name, options);
          if (message.stop_desc != null && message.hasOwnProperty("stop_desc"))
            object.stop_desc = $root.transit_realtime.TranslatedString.toObject(message.stop_desc, options);
          if (message.stop_lat != null && message.hasOwnProperty("stop_lat"))
            object.stop_lat = options.json && !isFinite(message.stop_lat) ? String(message.stop_lat) : message.stop_lat;
          if (message.stop_lon != null && message.hasOwnProperty("stop_lon"))
            object.stop_lon = options.json && !isFinite(message.stop_lon) ? String(message.stop_lon) : message.stop_lon;
          if (message.zone_id != null && message.hasOwnProperty("zone_id"))
            object.zone_id = message.zone_id;
          if (message.stop_url != null && message.hasOwnProperty("stop_url"))
            object.stop_url = $root.transit_realtime.TranslatedString.toObject(message.stop_url, options);
          if (message.parent_station != null && message.hasOwnProperty("parent_station"))
            object.parent_station = message.parent_station;
          if (message.stop_timezone != null && message.hasOwnProperty("stop_timezone"))
            object.stop_timezone = message.stop_timezone;
          if (message.wheelchair_boarding != null && message.hasOwnProperty("wheelchair_boarding"))
            object.wheelchair_boarding = options.enums === String ? $root.transit_realtime.Stop.WheelchairBoarding[message.wheelchair_boarding] === void 0 ? message.wheelchair_boarding : $root.transit_realtime.Stop.WheelchairBoarding[message.wheelchair_boarding] : message.wheelchair_boarding;
          if (message.level_id != null && message.hasOwnProperty("level_id"))
            object.level_id = message.level_id;
          if (message.platform_code != null && message.hasOwnProperty("platform_code"))
            object.platform_code = $root.transit_realtime.TranslatedString.toObject(message.platform_code, options);
          return object;
        };
        Stop.prototype.toJSON = function toJSON() {
          return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
        };
        Stop.getTypeUrl = function getTypeUrl(typeUrlPrefix) {
          if (typeUrlPrefix === void 0) {
            typeUrlPrefix = "type.googleapis.com";
          }
          return typeUrlPrefix + "/transit_realtime.Stop";
        };
        Stop.WheelchairBoarding = (function() {
          var valuesById = {}, values = Object.create(valuesById);
          values[valuesById[0] = "UNKNOWN"] = 0;
          values[valuesById[1] = "AVAILABLE"] = 1;
          values[valuesById[2] = "NOT_AVAILABLE"] = 2;
          return values;
        })();
        return Stop;
      })();
      transit_realtime2.TripModifications = (function() {
        function TripModifications(properties) {
          this.selected_trips = [];
          this.start_times = [];
          this.service_dates = [];
          this.modifications = [];
          if (properties) {
            for (var keys = Object.keys(properties), i2 = 0; i2 < keys.length; ++i2)
              if (properties[keys[i2]] != null)
                this[keys[i2]] = properties[keys[i2]];
          }
        }
        TripModifications.prototype.selected_trips = $util.emptyArray;
        TripModifications.prototype.start_times = $util.emptyArray;
        TripModifications.prototype.service_dates = $util.emptyArray;
        TripModifications.prototype.modifications = $util.emptyArray;
        TripModifications.create = function create(properties) {
          return new TripModifications(properties);
        };
        TripModifications.encode = function encode(message, writer) {
          if (!writer)
            writer = $Writer.create();
          if (message.selected_trips != null && message.selected_trips.length)
            for (var i2 = 0; i2 < message.selected_trips.length; ++i2)
              $root.transit_realtime.TripModifications.SelectedTrips.encode(message.selected_trips[i2], writer.uint32(
                /* id 1, wireType 2 =*/
                10
              ).fork()).ldelim();
          if (message.start_times != null && message.start_times.length)
            for (var i2 = 0; i2 < message.start_times.length; ++i2)
              writer.uint32(
                /* id 2, wireType 2 =*/
                18
              ).string(message.start_times[i2]);
          if (message.service_dates != null && message.service_dates.length)
            for (var i2 = 0; i2 < message.service_dates.length; ++i2)
              writer.uint32(
                /* id 3, wireType 2 =*/
                26
              ).string(message.service_dates[i2]);
          if (message.modifications != null && message.modifications.length)
            for (var i2 = 0; i2 < message.modifications.length; ++i2)
              $root.transit_realtime.TripModifications.Modification.encode(message.modifications[i2], writer.uint32(
                /* id 4, wireType 2 =*/
                34
              ).fork()).ldelim();
          return writer;
        };
        TripModifications.encodeDelimited = function encodeDelimited(message, writer) {
          return this.encode(message, writer).ldelim();
        };
        TripModifications.decode = function decode(reader, length, error) {
          if (!(reader instanceof $Reader))
            reader = $Reader.create(reader);
          var end = length === void 0 ? reader.len : reader.pos + length, message = new $root.transit_realtime.TripModifications();
          while (reader.pos < end) {
            var tag = reader.uint32();
            if (tag === error)
              break;
            switch (tag >>> 3) {
              case 1: {
                if (!(message.selected_trips && message.selected_trips.length))
                  message.selected_trips = [];
                message.selected_trips.push($root.transit_realtime.TripModifications.SelectedTrips.decode(reader, reader.uint32()));
                break;
              }
              case 2: {
                if (!(message.start_times && message.start_times.length))
                  message.start_times = [];
                message.start_times.push(reader.string());
                break;
              }
              case 3: {
                if (!(message.service_dates && message.service_dates.length))
                  message.service_dates = [];
                message.service_dates.push(reader.string());
                break;
              }
              case 4: {
                if (!(message.modifications && message.modifications.length))
                  message.modifications = [];
                message.modifications.push($root.transit_realtime.TripModifications.Modification.decode(reader, reader.uint32()));
                break;
              }
              default:
                reader.skipType(tag & 7);
                break;
            }
          }
          return message;
        };
        TripModifications.decodeDelimited = function decodeDelimited(reader) {
          if (!(reader instanceof $Reader))
            reader = new $Reader(reader);
          return this.decode(reader, reader.uint32());
        };
        TripModifications.verify = function verify(message) {
          if (typeof message !== "object" || message === null)
            return "object expected";
          if (message.selected_trips != null && message.hasOwnProperty("selected_trips")) {
            if (!Array.isArray(message.selected_trips))
              return "selected_trips: array expected";
            for (var i2 = 0; i2 < message.selected_trips.length; ++i2) {
              var error = $root.transit_realtime.TripModifications.SelectedTrips.verify(message.selected_trips[i2]);
              if (error)
                return "selected_trips." + error;
            }
          }
          if (message.start_times != null && message.hasOwnProperty("start_times")) {
            if (!Array.isArray(message.start_times))
              return "start_times: array expected";
            for (var i2 = 0; i2 < message.start_times.length; ++i2)
              if (!$util.isString(message.start_times[i2]))
                return "start_times: string[] expected";
          }
          if (message.service_dates != null && message.hasOwnProperty("service_dates")) {
            if (!Array.isArray(message.service_dates))
              return "service_dates: array expected";
            for (var i2 = 0; i2 < message.service_dates.length; ++i2)
              if (!$util.isString(message.service_dates[i2]))
                return "service_dates: string[] expected";
          }
          if (message.modifications != null && message.hasOwnProperty("modifications")) {
            if (!Array.isArray(message.modifications))
              return "modifications: array expected";
            for (var i2 = 0; i2 < message.modifications.length; ++i2) {
              var error = $root.transit_realtime.TripModifications.Modification.verify(message.modifications[i2]);
              if (error)
                return "modifications." + error;
            }
          }
          return null;
        };
        TripModifications.fromObject = function fromObject(object) {
          if (object instanceof $root.transit_realtime.TripModifications)
            return object;
          var message = new $root.transit_realtime.TripModifications();
          if (object.selected_trips) {
            if (!Array.isArray(object.selected_trips))
              throw TypeError(".transit_realtime.TripModifications.selected_trips: array expected");
            message.selected_trips = [];
            for (var i2 = 0; i2 < object.selected_trips.length; ++i2) {
              if (typeof object.selected_trips[i2] !== "object")
                throw TypeError(".transit_realtime.TripModifications.selected_trips: object expected");
              message.selected_trips[i2] = $root.transit_realtime.TripModifications.SelectedTrips.fromObject(object.selected_trips[i2]);
            }
          }
          if (object.start_times) {
            if (!Array.isArray(object.start_times))
              throw TypeError(".transit_realtime.TripModifications.start_times: array expected");
            message.start_times = [];
            for (var i2 = 0; i2 < object.start_times.length; ++i2)
              message.start_times[i2] = String(object.start_times[i2]);
          }
          if (object.service_dates) {
            if (!Array.isArray(object.service_dates))
              throw TypeError(".transit_realtime.TripModifications.service_dates: array expected");
            message.service_dates = [];
            for (var i2 = 0; i2 < object.service_dates.length; ++i2)
              message.service_dates[i2] = String(object.service_dates[i2]);
          }
          if (object.modifications) {
            if (!Array.isArray(object.modifications))
              throw TypeError(".transit_realtime.TripModifications.modifications: array expected");
            message.modifications = [];
            for (var i2 = 0; i2 < object.modifications.length; ++i2) {
              if (typeof object.modifications[i2] !== "object")
                throw TypeError(".transit_realtime.TripModifications.modifications: object expected");
              message.modifications[i2] = $root.transit_realtime.TripModifications.Modification.fromObject(object.modifications[i2]);
            }
          }
          return message;
        };
        TripModifications.toObject = function toObject(message, options) {
          if (!options)
            options = {};
          var object = {};
          if (options.arrays || options.defaults) {
            object.selected_trips = [];
            object.start_times = [];
            object.service_dates = [];
            object.modifications = [];
          }
          if (message.selected_trips && message.selected_trips.length) {
            object.selected_trips = [];
            for (var j = 0; j < message.selected_trips.length; ++j)
              object.selected_trips[j] = $root.transit_realtime.TripModifications.SelectedTrips.toObject(message.selected_trips[j], options);
          }
          if (message.start_times && message.start_times.length) {
            object.start_times = [];
            for (var j = 0; j < message.start_times.length; ++j)
              object.start_times[j] = message.start_times[j];
          }
          if (message.service_dates && message.service_dates.length) {
            object.service_dates = [];
            for (var j = 0; j < message.service_dates.length; ++j)
              object.service_dates[j] = message.service_dates[j];
          }
          if (message.modifications && message.modifications.length) {
            object.modifications = [];
            for (var j = 0; j < message.modifications.length; ++j)
              object.modifications[j] = $root.transit_realtime.TripModifications.Modification.toObject(message.modifications[j], options);
          }
          return object;
        };
        TripModifications.prototype.toJSON = function toJSON() {
          return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
        };
        TripModifications.getTypeUrl = function getTypeUrl(typeUrlPrefix) {
          if (typeUrlPrefix === void 0) {
            typeUrlPrefix = "type.googleapis.com";
          }
          return typeUrlPrefix + "/transit_realtime.TripModifications";
        };
        TripModifications.Modification = (function() {
          function Modification(properties) {
            this.replacement_stops = [];
            if (properties) {
              for (var keys = Object.keys(properties), i2 = 0; i2 < keys.length; ++i2)
                if (properties[keys[i2]] != null)
                  this[keys[i2]] = properties[keys[i2]];
            }
          }
          Modification.prototype.start_stop_selector = null;
          Modification.prototype.end_stop_selector = null;
          Modification.prototype.propagated_modification_delay = 0;
          Modification.prototype.replacement_stops = $util.emptyArray;
          Modification.prototype.service_alert_id = "";
          Modification.prototype.last_modified_time = $util.Long ? $util.Long.fromBits(0, 0, true) : 0;
          Modification.create = function create(properties) {
            return new Modification(properties);
          };
          Modification.encode = function encode(message, writer) {
            if (!writer)
              writer = $Writer.create();
            if (message.start_stop_selector != null && Object.hasOwnProperty.call(message, "start_stop_selector"))
              $root.transit_realtime.StopSelector.encode(message.start_stop_selector, writer.uint32(
                /* id 1, wireType 2 =*/
                10
              ).fork()).ldelim();
            if (message.end_stop_selector != null && Object.hasOwnProperty.call(message, "end_stop_selector"))
              $root.transit_realtime.StopSelector.encode(message.end_stop_selector, writer.uint32(
                /* id 2, wireType 2 =*/
                18
              ).fork()).ldelim();
            if (message.propagated_modification_delay != null && Object.hasOwnProperty.call(message, "propagated_modification_delay"))
              writer.uint32(
                /* id 3, wireType 0 =*/
                24
              ).int32(message.propagated_modification_delay);
            if (message.replacement_stops != null && message.replacement_stops.length)
              for (var i2 = 0; i2 < message.replacement_stops.length; ++i2)
                $root.transit_realtime.ReplacementStop.encode(message.replacement_stops[i2], writer.uint32(
                  /* id 4, wireType 2 =*/
                  34
                ).fork()).ldelim();
            if (message.service_alert_id != null && Object.hasOwnProperty.call(message, "service_alert_id"))
              writer.uint32(
                /* id 5, wireType 2 =*/
                42
              ).string(message.service_alert_id);
            if (message.last_modified_time != null && Object.hasOwnProperty.call(message, "last_modified_time"))
              writer.uint32(
                /* id 6, wireType 0 =*/
                48
              ).uint64(message.last_modified_time);
            return writer;
          };
          Modification.encodeDelimited = function encodeDelimited(message, writer) {
            return this.encode(message, writer).ldelim();
          };
          Modification.decode = function decode(reader, length, error) {
            if (!(reader instanceof $Reader))
              reader = $Reader.create(reader);
            var end = length === void 0 ? reader.len : reader.pos + length, message = new $root.transit_realtime.TripModifications.Modification();
            while (reader.pos < end) {
              var tag = reader.uint32();
              if (tag === error)
                break;
              switch (tag >>> 3) {
                case 1: {
                  message.start_stop_selector = $root.transit_realtime.StopSelector.decode(reader, reader.uint32());
                  break;
                }
                case 2: {
                  message.end_stop_selector = $root.transit_realtime.StopSelector.decode(reader, reader.uint32());
                  break;
                }
                case 3: {
                  message.propagated_modification_delay = reader.int32();
                  break;
                }
                case 4: {
                  if (!(message.replacement_stops && message.replacement_stops.length))
                    message.replacement_stops = [];
                  message.replacement_stops.push($root.transit_realtime.ReplacementStop.decode(reader, reader.uint32()));
                  break;
                }
                case 5: {
                  message.service_alert_id = reader.string();
                  break;
                }
                case 6: {
                  message.last_modified_time = reader.uint64();
                  break;
                }
                default:
                  reader.skipType(tag & 7);
                  break;
              }
            }
            return message;
          };
          Modification.decodeDelimited = function decodeDelimited(reader) {
            if (!(reader instanceof $Reader))
              reader = new $Reader(reader);
            return this.decode(reader, reader.uint32());
          };
          Modification.verify = function verify(message) {
            if (typeof message !== "object" || message === null)
              return "object expected";
            if (message.start_stop_selector != null && message.hasOwnProperty("start_stop_selector")) {
              var error = $root.transit_realtime.StopSelector.verify(message.start_stop_selector);
              if (error)
                return "start_stop_selector." + error;
            }
            if (message.end_stop_selector != null && message.hasOwnProperty("end_stop_selector")) {
              var error = $root.transit_realtime.StopSelector.verify(message.end_stop_selector);
              if (error)
                return "end_stop_selector." + error;
            }
            if (message.propagated_modification_delay != null && message.hasOwnProperty("propagated_modification_delay")) {
              if (!$util.isInteger(message.propagated_modification_delay))
                return "propagated_modification_delay: integer expected";
            }
            if (message.replacement_stops != null && message.hasOwnProperty("replacement_stops")) {
              if (!Array.isArray(message.replacement_stops))
                return "replacement_stops: array expected";
              for (var i2 = 0; i2 < message.replacement_stops.length; ++i2) {
                var error = $root.transit_realtime.ReplacementStop.verify(message.replacement_stops[i2]);
                if (error)
                  return "replacement_stops." + error;
              }
            }
            if (message.service_alert_id != null && message.hasOwnProperty("service_alert_id")) {
              if (!$util.isString(message.service_alert_id))
                return "service_alert_id: string expected";
            }
            if (message.last_modified_time != null && message.hasOwnProperty("last_modified_time")) {
              if (!$util.isInteger(message.last_modified_time) && !(message.last_modified_time && $util.isInteger(message.last_modified_time.low) && $util.isInteger(message.last_modified_time.high)))
                return "last_modified_time: integer|Long expected";
            }
            return null;
          };
          Modification.fromObject = function fromObject(object) {
            if (object instanceof $root.transit_realtime.TripModifications.Modification)
              return object;
            var message = new $root.transit_realtime.TripModifications.Modification();
            if (object.start_stop_selector != null) {
              if (typeof object.start_stop_selector !== "object")
                throw TypeError(".transit_realtime.TripModifications.Modification.start_stop_selector: object expected");
              message.start_stop_selector = $root.transit_realtime.StopSelector.fromObject(object.start_stop_selector);
            }
            if (object.end_stop_selector != null) {
              if (typeof object.end_stop_selector !== "object")
                throw TypeError(".transit_realtime.TripModifications.Modification.end_stop_selector: object expected");
              message.end_stop_selector = $root.transit_realtime.StopSelector.fromObject(object.end_stop_selector);
            }
            if (object.propagated_modification_delay != null)
              message.propagated_modification_delay = object.propagated_modification_delay | 0;
            if (object.replacement_stops) {
              if (!Array.isArray(object.replacement_stops))
                throw TypeError(".transit_realtime.TripModifications.Modification.replacement_stops: array expected");
              message.replacement_stops = [];
              for (var i2 = 0; i2 < object.replacement_stops.length; ++i2) {
                if (typeof object.replacement_stops[i2] !== "object")
                  throw TypeError(".transit_realtime.TripModifications.Modification.replacement_stops: object expected");
                message.replacement_stops[i2] = $root.transit_realtime.ReplacementStop.fromObject(object.replacement_stops[i2]);
              }
            }
            if (object.service_alert_id != null)
              message.service_alert_id = String(object.service_alert_id);
            if (object.last_modified_time != null) {
              if ($util.Long)
                (message.last_modified_time = $util.Long.fromValue(object.last_modified_time)).unsigned = true;
              else if (typeof object.last_modified_time === "string")
                message.last_modified_time = parseInt(object.last_modified_time, 10);
              else if (typeof object.last_modified_time === "number")
                message.last_modified_time = object.last_modified_time;
              else if (typeof object.last_modified_time === "object")
                message.last_modified_time = new $util.LongBits(object.last_modified_time.low >>> 0, object.last_modified_time.high >>> 0).toNumber(true);
            }
            return message;
          };
          Modification.toObject = function toObject(message, options) {
            if (!options)
              options = {};
            var object = {};
            if (options.arrays || options.defaults)
              object.replacement_stops = [];
            if (options.defaults) {
              object.start_stop_selector = null;
              object.end_stop_selector = null;
              object.propagated_modification_delay = 0;
              object.service_alert_id = "";
              if ($util.Long) {
                var long = new $util.Long(0, 0, true);
                object.last_modified_time = options.longs === String ? long.toString() : options.longs === Number ? long.toNumber() : long;
              } else
                object.last_modified_time = options.longs === String ? "0" : 0;
            }
            if (message.start_stop_selector != null && message.hasOwnProperty("start_stop_selector"))
              object.start_stop_selector = $root.transit_realtime.StopSelector.toObject(message.start_stop_selector, options);
            if (message.end_stop_selector != null && message.hasOwnProperty("end_stop_selector"))
              object.end_stop_selector = $root.transit_realtime.StopSelector.toObject(message.end_stop_selector, options);
            if (message.propagated_modification_delay != null && message.hasOwnProperty("propagated_modification_delay"))
              object.propagated_modification_delay = message.propagated_modification_delay;
            if (message.replacement_stops && message.replacement_stops.length) {
              object.replacement_stops = [];
              for (var j = 0; j < message.replacement_stops.length; ++j)
                object.replacement_stops[j] = $root.transit_realtime.ReplacementStop.toObject(message.replacement_stops[j], options);
            }
            if (message.service_alert_id != null && message.hasOwnProperty("service_alert_id"))
              object.service_alert_id = message.service_alert_id;
            if (message.last_modified_time != null && message.hasOwnProperty("last_modified_time"))
              if (typeof message.last_modified_time === "number")
                object.last_modified_time = options.longs === String ? String(message.last_modified_time) : message.last_modified_time;
              else
                object.last_modified_time = options.longs === String ? $util.Long.prototype.toString.call(message.last_modified_time) : options.longs === Number ? new $util.LongBits(message.last_modified_time.low >>> 0, message.last_modified_time.high >>> 0).toNumber(true) : message.last_modified_time;
            return object;
          };
          Modification.prototype.toJSON = function toJSON() {
            return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
          };
          Modification.getTypeUrl = function getTypeUrl(typeUrlPrefix) {
            if (typeUrlPrefix === void 0) {
              typeUrlPrefix = "type.googleapis.com";
            }
            return typeUrlPrefix + "/transit_realtime.TripModifications.Modification";
          };
          return Modification;
        })();
        TripModifications.SelectedTrips = (function() {
          function SelectedTrips(properties) {
            this.trip_ids = [];
            if (properties) {
              for (var keys = Object.keys(properties), i2 = 0; i2 < keys.length; ++i2)
                if (properties[keys[i2]] != null)
                  this[keys[i2]] = properties[keys[i2]];
            }
          }
          SelectedTrips.prototype.trip_ids = $util.emptyArray;
          SelectedTrips.prototype.shape_id = "";
          SelectedTrips.create = function create(properties) {
            return new SelectedTrips(properties);
          };
          SelectedTrips.encode = function encode(message, writer) {
            if (!writer)
              writer = $Writer.create();
            if (message.trip_ids != null && message.trip_ids.length)
              for (var i2 = 0; i2 < message.trip_ids.length; ++i2)
                writer.uint32(
                  /* id 1, wireType 2 =*/
                  10
                ).string(message.trip_ids[i2]);
            if (message.shape_id != null && Object.hasOwnProperty.call(message, "shape_id"))
              writer.uint32(
                /* id 2, wireType 2 =*/
                18
              ).string(message.shape_id);
            return writer;
          };
          SelectedTrips.encodeDelimited = function encodeDelimited(message, writer) {
            return this.encode(message, writer).ldelim();
          };
          SelectedTrips.decode = function decode(reader, length, error) {
            if (!(reader instanceof $Reader))
              reader = $Reader.create(reader);
            var end = length === void 0 ? reader.len : reader.pos + length, message = new $root.transit_realtime.TripModifications.SelectedTrips();
            while (reader.pos < end) {
              var tag = reader.uint32();
              if (tag === error)
                break;
              switch (tag >>> 3) {
                case 1: {
                  if (!(message.trip_ids && message.trip_ids.length))
                    message.trip_ids = [];
                  message.trip_ids.push(reader.string());
                  break;
                }
                case 2: {
                  message.shape_id = reader.string();
                  break;
                }
                default:
                  reader.skipType(tag & 7);
                  break;
              }
            }
            return message;
          };
          SelectedTrips.decodeDelimited = function decodeDelimited(reader) {
            if (!(reader instanceof $Reader))
              reader = new $Reader(reader);
            return this.decode(reader, reader.uint32());
          };
          SelectedTrips.verify = function verify(message) {
            if (typeof message !== "object" || message === null)
              return "object expected";
            if (message.trip_ids != null && message.hasOwnProperty("trip_ids")) {
              if (!Array.isArray(message.trip_ids))
                return "trip_ids: array expected";
              for (var i2 = 0; i2 < message.trip_ids.length; ++i2)
                if (!$util.isString(message.trip_ids[i2]))
                  return "trip_ids: string[] expected";
            }
            if (message.shape_id != null && message.hasOwnProperty("shape_id")) {
              if (!$util.isString(message.shape_id))
                return "shape_id: string expected";
            }
            return null;
          };
          SelectedTrips.fromObject = function fromObject(object) {
            if (object instanceof $root.transit_realtime.TripModifications.SelectedTrips)
              return object;
            var message = new $root.transit_realtime.TripModifications.SelectedTrips();
            if (object.trip_ids) {
              if (!Array.isArray(object.trip_ids))
                throw TypeError(".transit_realtime.TripModifications.SelectedTrips.trip_ids: array expected");
              message.trip_ids = [];
              for (var i2 = 0; i2 < object.trip_ids.length; ++i2)
                message.trip_ids[i2] = String(object.trip_ids[i2]);
            }
            if (object.shape_id != null)
              message.shape_id = String(object.shape_id);
            return message;
          };
          SelectedTrips.toObject = function toObject(message, options) {
            if (!options)
              options = {};
            var object = {};
            if (options.arrays || options.defaults)
              object.trip_ids = [];
            if (options.defaults)
              object.shape_id = "";
            if (message.trip_ids && message.trip_ids.length) {
              object.trip_ids = [];
              for (var j = 0; j < message.trip_ids.length; ++j)
                object.trip_ids[j] = message.trip_ids[j];
            }
            if (message.shape_id != null && message.hasOwnProperty("shape_id"))
              object.shape_id = message.shape_id;
            return object;
          };
          SelectedTrips.prototype.toJSON = function toJSON() {
            return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
          };
          SelectedTrips.getTypeUrl = function getTypeUrl(typeUrlPrefix) {
            if (typeUrlPrefix === void 0) {
              typeUrlPrefix = "type.googleapis.com";
            }
            return typeUrlPrefix + "/transit_realtime.TripModifications.SelectedTrips";
          };
          return SelectedTrips;
        })();
        return TripModifications;
      })();
      transit_realtime2.StopSelector = (function() {
        function StopSelector(properties) {
          if (properties) {
            for (var keys = Object.keys(properties), i2 = 0; i2 < keys.length; ++i2)
              if (properties[keys[i2]] != null)
                this[keys[i2]] = properties[keys[i2]];
          }
        }
        StopSelector.prototype.stop_sequence = 0;
        StopSelector.prototype.stop_id = "";
        StopSelector.create = function create(properties) {
          return new StopSelector(properties);
        };
        StopSelector.encode = function encode(message, writer) {
          if (!writer)
            writer = $Writer.create();
          if (message.stop_sequence != null && Object.hasOwnProperty.call(message, "stop_sequence"))
            writer.uint32(
              /* id 1, wireType 0 =*/
              8
            ).uint32(message.stop_sequence);
          if (message.stop_id != null && Object.hasOwnProperty.call(message, "stop_id"))
            writer.uint32(
              /* id 2, wireType 2 =*/
              18
            ).string(message.stop_id);
          return writer;
        };
        StopSelector.encodeDelimited = function encodeDelimited(message, writer) {
          return this.encode(message, writer).ldelim();
        };
        StopSelector.decode = function decode(reader, length, error) {
          if (!(reader instanceof $Reader))
            reader = $Reader.create(reader);
          var end = length === void 0 ? reader.len : reader.pos + length, message = new $root.transit_realtime.StopSelector();
          while (reader.pos < end) {
            var tag = reader.uint32();
            if (tag === error)
              break;
            switch (tag >>> 3) {
              case 1: {
                message.stop_sequence = reader.uint32();
                break;
              }
              case 2: {
                message.stop_id = reader.string();
                break;
              }
              default:
                reader.skipType(tag & 7);
                break;
            }
          }
          return message;
        };
        StopSelector.decodeDelimited = function decodeDelimited(reader) {
          if (!(reader instanceof $Reader))
            reader = new $Reader(reader);
          return this.decode(reader, reader.uint32());
        };
        StopSelector.verify = function verify(message) {
          if (typeof message !== "object" || message === null)
            return "object expected";
          if (message.stop_sequence != null && message.hasOwnProperty("stop_sequence")) {
            if (!$util.isInteger(message.stop_sequence))
              return "stop_sequence: integer expected";
          }
          if (message.stop_id != null && message.hasOwnProperty("stop_id")) {
            if (!$util.isString(message.stop_id))
              return "stop_id: string expected";
          }
          return null;
        };
        StopSelector.fromObject = function fromObject(object) {
          if (object instanceof $root.transit_realtime.StopSelector)
            return object;
          var message = new $root.transit_realtime.StopSelector();
          if (object.stop_sequence != null)
            message.stop_sequence = object.stop_sequence >>> 0;
          if (object.stop_id != null)
            message.stop_id = String(object.stop_id);
          return message;
        };
        StopSelector.toObject = function toObject(message, options) {
          if (!options)
            options = {};
          var object = {};
          if (options.defaults) {
            object.stop_sequence = 0;
            object.stop_id = "";
          }
          if (message.stop_sequence != null && message.hasOwnProperty("stop_sequence"))
            object.stop_sequence = message.stop_sequence;
          if (message.stop_id != null && message.hasOwnProperty("stop_id"))
            object.stop_id = message.stop_id;
          return object;
        };
        StopSelector.prototype.toJSON = function toJSON() {
          return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
        };
        StopSelector.getTypeUrl = function getTypeUrl(typeUrlPrefix) {
          if (typeUrlPrefix === void 0) {
            typeUrlPrefix = "type.googleapis.com";
          }
          return typeUrlPrefix + "/transit_realtime.StopSelector";
        };
        return StopSelector;
      })();
      transit_realtime2.ReplacementStop = (function() {
        function ReplacementStop(properties) {
          if (properties) {
            for (var keys = Object.keys(properties), i2 = 0; i2 < keys.length; ++i2)
              if (properties[keys[i2]] != null)
                this[keys[i2]] = properties[keys[i2]];
          }
        }
        ReplacementStop.prototype.travel_time_to_stop = 0;
        ReplacementStop.prototype.stop_id = "";
        ReplacementStop.create = function create(properties) {
          return new ReplacementStop(properties);
        };
        ReplacementStop.encode = function encode(message, writer) {
          if (!writer)
            writer = $Writer.create();
          if (message.travel_time_to_stop != null && Object.hasOwnProperty.call(message, "travel_time_to_stop"))
            writer.uint32(
              /* id 1, wireType 0 =*/
              8
            ).int32(message.travel_time_to_stop);
          if (message.stop_id != null && Object.hasOwnProperty.call(message, "stop_id"))
            writer.uint32(
              /* id 2, wireType 2 =*/
              18
            ).string(message.stop_id);
          return writer;
        };
        ReplacementStop.encodeDelimited = function encodeDelimited(message, writer) {
          return this.encode(message, writer).ldelim();
        };
        ReplacementStop.decode = function decode(reader, length, error) {
          if (!(reader instanceof $Reader))
            reader = $Reader.create(reader);
          var end = length === void 0 ? reader.len : reader.pos + length, message = new $root.transit_realtime.ReplacementStop();
          while (reader.pos < end) {
            var tag = reader.uint32();
            if (tag === error)
              break;
            switch (tag >>> 3) {
              case 1: {
                message.travel_time_to_stop = reader.int32();
                break;
              }
              case 2: {
                message.stop_id = reader.string();
                break;
              }
              default:
                reader.skipType(tag & 7);
                break;
            }
          }
          return message;
        };
        ReplacementStop.decodeDelimited = function decodeDelimited(reader) {
          if (!(reader instanceof $Reader))
            reader = new $Reader(reader);
          return this.decode(reader, reader.uint32());
        };
        ReplacementStop.verify = function verify(message) {
          if (typeof message !== "object" || message === null)
            return "object expected";
          if (message.travel_time_to_stop != null && message.hasOwnProperty("travel_time_to_stop")) {
            if (!$util.isInteger(message.travel_time_to_stop))
              return "travel_time_to_stop: integer expected";
          }
          if (message.stop_id != null && message.hasOwnProperty("stop_id")) {
            if (!$util.isString(message.stop_id))
              return "stop_id: string expected";
          }
          return null;
        };
        ReplacementStop.fromObject = function fromObject(object) {
          if (object instanceof $root.transit_realtime.ReplacementStop)
            return object;
          var message = new $root.transit_realtime.ReplacementStop();
          if (object.travel_time_to_stop != null)
            message.travel_time_to_stop = object.travel_time_to_stop | 0;
          if (object.stop_id != null)
            message.stop_id = String(object.stop_id);
          return message;
        };
        ReplacementStop.toObject = function toObject(message, options) {
          if (!options)
            options = {};
          var object = {};
          if (options.defaults) {
            object.travel_time_to_stop = 0;
            object.stop_id = "";
          }
          if (message.travel_time_to_stop != null && message.hasOwnProperty("travel_time_to_stop"))
            object.travel_time_to_stop = message.travel_time_to_stop;
          if (message.stop_id != null && message.hasOwnProperty("stop_id"))
            object.stop_id = message.stop_id;
          return object;
        };
        ReplacementStop.prototype.toJSON = function toJSON() {
          return this.constructor.toObject(this, $protobuf.util.toJSONOptions);
        };
        ReplacementStop.getTypeUrl = function getTypeUrl(typeUrlPrefix) {
          if (typeUrlPrefix === void 0) {
            typeUrlPrefix = "type.googleapis.com";
          }
          return typeUrlPrefix + "/transit_realtime.ReplacementStop";
        };
        return ReplacementStop;
      })();
      return transit_realtime2;
    })();
    module2.exports = $root;
  }
});

// node_modules/gtfs-rt-bindings/index.js
var require_gtfs_rt_bindings = __commonJS({
  "node_modules/gtfs-rt-bindings/index.js"(exports2, module2) {
    "use strict";
    var { transit_realtime: transit_realtime2 } = require_gtfs_realtime_pbf();
    module2.exports = transit_realtime2;
  }
});

// node_modules/dayjs/dayjs.min.js
var require_dayjs_min = __commonJS({
  "node_modules/dayjs/dayjs.min.js"(exports2, module2) {
    !(function(t2, e2) {
      "object" == typeof exports2 && "undefined" != typeof module2 ? module2.exports = e2() : "function" == typeof define && define.amd ? define(e2) : (t2 = "undefined" != typeof globalThis ? globalThis : t2 || self).dayjs = e2();
    })(exports2, (function() {
      "use strict";
      var t2 = 1e3, e2 = 6e4, n = 36e5, r2 = "millisecond", i2 = "second", s2 = "minute", u = "hour", a = "day", o = "week", c = "month", f3 = "quarter", h2 = "year", d = "date", l = "Invalid Date", $ = /^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/, y = /\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g, M = { name: "en", weekdays: "Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"), months: "January_February_March_April_May_June_July_August_September_October_November_December".split("_"), ordinal: function(t3) {
        var e3 = ["th", "st", "nd", "rd"], n2 = t3 % 100;
        return "[" + t3 + (e3[(n2 - 20) % 10] || e3[n2] || e3[0]) + "]";
      } }, m2 = function(t3, e3, n2) {
        var r3 = String(t3);
        return !r3 || r3.length >= e3 ? t3 : "" + Array(e3 + 1 - r3.length).join(n2) + t3;
      }, v = { s: m2, z: function(t3) {
        var e3 = -t3.utcOffset(), n2 = Math.abs(e3), r3 = Math.floor(n2 / 60), i3 = n2 % 60;
        return (e3 <= 0 ? "+" : "-") + m2(r3, 2, "0") + ":" + m2(i3, 2, "0");
      }, m: function t3(e3, n2) {
        if (e3.date() < n2.date()) return -t3(n2, e3);
        var r3 = 12 * (n2.year() - e3.year()) + (n2.month() - e3.month()), i3 = e3.clone().add(r3, c), s3 = n2 - i3 < 0, u2 = e3.clone().add(r3 + (s3 ? -1 : 1), c);
        return +(-(r3 + (n2 - i3) / (s3 ? i3 - u2 : u2 - i3)) || 0);
      }, a: function(t3) {
        return t3 < 0 ? Math.ceil(t3) || 0 : Math.floor(t3);
      }, p: function(t3) {
        return { M: c, y: h2, w: o, d: a, D: d, h: u, m: s2, s: i2, ms: r2, Q: f3 }[t3] || String(t3 || "").toLowerCase().replace(/s$/, "");
      }, u: function(t3) {
        return void 0 === t3;
      } }, g = "en", D = {};
      D[g] = M;
      var p = "$isDayjsObject", S2 = function(t3) {
        return t3 instanceof _ || !(!t3 || !t3[p]);
      }, w = function t3(e3, n2, r3) {
        var i3;
        if (!e3) return g;
        if ("string" == typeof e3) {
          var s3 = e3.toLowerCase();
          D[s3] && (i3 = s3), n2 && (D[s3] = n2, i3 = s3);
          var u2 = e3.split("-");
          if (!i3 && u2.length > 1) return t3(u2[0]);
        } else {
          var a2 = e3.name;
          D[a2] = e3, i3 = a2;
        }
        return !r3 && i3 && (g = i3), i3 || !r3 && g;
      }, O = function(t3, e3) {
        if (S2(t3)) return t3.clone();
        var n2 = "object" == typeof e3 ? e3 : {};
        return n2.date = t3, n2.args = arguments, new _(n2);
      }, b = v;
      b.l = w, b.i = S2, b.w = function(t3, e3) {
        return O(t3, { locale: e3.$L, utc: e3.$u, x: e3.$x, $offset: e3.$offset });
      };
      var _ = (function() {
        function M2(t3) {
          this.$L = w(t3.locale, null, true), this.parse(t3), this.$x = this.$x || t3.x || {}, this[p] = true;
        }
        var m3 = M2.prototype;
        return m3.parse = function(t3) {
          this.$d = (function(t4) {
            var e3 = t4.date, n2 = t4.utc;
            if (null === e3) return /* @__PURE__ */ new Date(NaN);
            if (b.u(e3)) return /* @__PURE__ */ new Date();
            if (e3 instanceof Date) return new Date(e3);
            if ("string" == typeof e3 && !/Z$/i.test(e3)) {
              var r3 = e3.match($);
              if (r3) {
                var i3 = r3[2] - 1 || 0, s3 = (r3[7] || "0").substring(0, 3);
                return n2 ? new Date(Date.UTC(r3[1], i3, r3[3] || 1, r3[4] || 0, r3[5] || 0, r3[6] || 0, s3)) : new Date(r3[1], i3, r3[3] || 1, r3[4] || 0, r3[5] || 0, r3[6] || 0, s3);
              }
            }
            return new Date(e3);
          })(t3), this.init();
        }, m3.init = function() {
          var t3 = this.$d;
          this.$y = t3.getFullYear(), this.$M = t3.getMonth(), this.$D = t3.getDate(), this.$W = t3.getDay(), this.$H = t3.getHours(), this.$m = t3.getMinutes(), this.$s = t3.getSeconds(), this.$ms = t3.getMilliseconds();
        }, m3.$utils = function() {
          return b;
        }, m3.isValid = function() {
          return !(this.$d.toString() === l);
        }, m3.isSame = function(t3, e3) {
          var n2 = O(t3);
          return this.startOf(e3) <= n2 && n2 <= this.endOf(e3);
        }, m3.isAfter = function(t3, e3) {
          return O(t3) < this.startOf(e3);
        }, m3.isBefore = function(t3, e3) {
          return this.endOf(e3) < O(t3);
        }, m3.$g = function(t3, e3, n2) {
          return b.u(t3) ? this[e3] : this.set(n2, t3);
        }, m3.unix = function() {
          return Math.floor(this.valueOf() / 1e3);
        }, m3.valueOf = function() {
          return this.$d.getTime();
        }, m3.startOf = function(t3, e3) {
          var n2 = this, r3 = !!b.u(e3) || e3, f4 = b.p(t3), l2 = function(t4, e4) {
            var i3 = b.w(n2.$u ? Date.UTC(n2.$y, e4, t4) : new Date(n2.$y, e4, t4), n2);
            return r3 ? i3 : i3.endOf(a);
          }, $2 = function(t4, e4) {
            return b.w(n2.toDate()[t4].apply(n2.toDate("s"), (r3 ? [0, 0, 0, 0] : [23, 59, 59, 999]).slice(e4)), n2);
          }, y2 = this.$W, M3 = this.$M, m4 = this.$D, v2 = "set" + (this.$u ? "UTC" : "");
          switch (f4) {
            case h2:
              return r3 ? l2(1, 0) : l2(31, 11);
            case c:
              return r3 ? l2(1, M3) : l2(0, M3 + 1);
            case o:
              var g2 = this.$locale().weekStart || 0, D2 = (y2 < g2 ? y2 + 7 : y2) - g2;
              return l2(r3 ? m4 - D2 : m4 + (6 - D2), M3);
            case a:
            case d:
              return $2(v2 + "Hours", 0);
            case u:
              return $2(v2 + "Minutes", 1);
            case s2:
              return $2(v2 + "Seconds", 2);
            case i2:
              return $2(v2 + "Milliseconds", 3);
            default:
              return this.clone();
          }
        }, m3.endOf = function(t3) {
          return this.startOf(t3, false);
        }, m3.$set = function(t3, e3) {
          var n2, o2 = b.p(t3), f4 = "set" + (this.$u ? "UTC" : ""), l2 = (n2 = {}, n2[a] = f4 + "Date", n2[d] = f4 + "Date", n2[c] = f4 + "Month", n2[h2] = f4 + "FullYear", n2[u] = f4 + "Hours", n2[s2] = f4 + "Minutes", n2[i2] = f4 + "Seconds", n2[r2] = f4 + "Milliseconds", n2)[o2], $2 = o2 === a ? this.$D + (e3 - this.$W) : e3;
          if (o2 === c || o2 === h2) {
            var y2 = this.clone().set(d, 1);
            y2.$d[l2]($2), y2.init(), this.$d = y2.set(d, Math.min(this.$D, y2.daysInMonth())).$d;
          } else l2 && this.$d[l2]($2);
          return this.init(), this;
        }, m3.set = function(t3, e3) {
          return this.clone().$set(t3, e3);
        }, m3.get = function(t3) {
          return this[b.p(t3)]();
        }, m3.add = function(r3, f4) {
          var d2, l2 = this;
          r3 = Number(r3);
          var $2 = b.p(f4), y2 = function(t3) {
            var e3 = O(l2);
            return b.w(e3.date(e3.date() + Math.round(t3 * r3)), l2);
          };
          if ($2 === c) return this.set(c, this.$M + r3);
          if ($2 === h2) return this.set(h2, this.$y + r3);
          if ($2 === a) return y2(1);
          if ($2 === o) return y2(7);
          var M3 = (d2 = {}, d2[s2] = e2, d2[u] = n, d2[i2] = t2, d2)[$2] || 1, m4 = this.$d.getTime() + r3 * M3;
          return b.w(m4, this);
        }, m3.subtract = function(t3, e3) {
          return this.add(-1 * t3, e3);
        }, m3.format = function(t3) {
          var e3 = this, n2 = this.$locale();
          if (!this.isValid()) return n2.invalidDate || l;
          var r3 = t3 || "YYYY-MM-DDTHH:mm:ssZ", i3 = b.z(this), s3 = this.$H, u2 = this.$m, a2 = this.$M, o2 = n2.weekdays, c2 = n2.months, f4 = n2.meridiem, h3 = function(t4, n3, i4, s4) {
            return t4 && (t4[n3] || t4(e3, r3)) || i4[n3].slice(0, s4);
          }, d2 = function(t4) {
            return b.s(s3 % 12 || 12, t4, "0");
          }, $2 = f4 || function(t4, e4, n3) {
            var r4 = t4 < 12 ? "AM" : "PM";
            return n3 ? r4.toLowerCase() : r4;
          };
          return r3.replace(y, (function(t4, r4) {
            return r4 || (function(t5) {
              switch (t5) {
                case "YY":
                  return String(e3.$y).slice(-2);
                case "YYYY":
                  return b.s(e3.$y, 4, "0");
                case "M":
                  return a2 + 1;
                case "MM":
                  return b.s(a2 + 1, 2, "0");
                case "MMM":
                  return h3(n2.monthsShort, a2, c2, 3);
                case "MMMM":
                  return h3(c2, a2);
                case "D":
                  return e3.$D;
                case "DD":
                  return b.s(e3.$D, 2, "0");
                case "d":
                  return String(e3.$W);
                case "dd":
                  return h3(n2.weekdaysMin, e3.$W, o2, 2);
                case "ddd":
                  return h3(n2.weekdaysShort, e3.$W, o2, 3);
                case "dddd":
                  return o2[e3.$W];
                case "H":
                  return String(s3);
                case "HH":
                  return b.s(s3, 2, "0");
                case "h":
                  return d2(1);
                case "hh":
                  return d2(2);
                case "a":
                  return $2(s3, u2, true);
                case "A":
                  return $2(s3, u2, false);
                case "m":
                  return String(u2);
                case "mm":
                  return b.s(u2, 2, "0");
                case "s":
                  return String(e3.$s);
                case "ss":
                  return b.s(e3.$s, 2, "0");
                case "SSS":
                  return b.s(e3.$ms, 3, "0");
                case "Z":
                  return i3;
              }
              return null;
            })(t4) || i3.replace(":", "");
          }));
        }, m3.utcOffset = function() {
          return 15 * -Math.round(this.$d.getTimezoneOffset() / 15);
        }, m3.diff = function(r3, d2, l2) {
          var $2, y2 = this, M3 = b.p(d2), m4 = O(r3), v2 = (m4.utcOffset() - this.utcOffset()) * e2, g2 = this - m4, D2 = function() {
            return b.m(y2, m4);
          };
          switch (M3) {
            case h2:
              $2 = D2() / 12;
              break;
            case c:
              $2 = D2();
              break;
            case f3:
              $2 = D2() / 3;
              break;
            case o:
              $2 = (g2 - v2) / 6048e5;
              break;
            case a:
              $2 = (g2 - v2) / 864e5;
              break;
            case u:
              $2 = g2 / n;
              break;
            case s2:
              $2 = g2 / e2;
              break;
            case i2:
              $2 = g2 / t2;
              break;
            default:
              $2 = g2;
          }
          return l2 ? $2 : b.a($2);
        }, m3.daysInMonth = function() {
          return this.endOf(c).$D;
        }, m3.$locale = function() {
          return D[this.$L];
        }, m3.locale = function(t3, e3) {
          if (!t3) return this.$L;
          var n2 = this.clone(), r3 = w(t3, e3, true);
          return r3 && (n2.$L = r3), n2;
        }, m3.clone = function() {
          return b.w(this.$d, this);
        }, m3.toDate = function() {
          return new Date(this.valueOf());
        }, m3.toJSON = function() {
          return this.isValid() ? this.toISOString() : null;
        }, m3.toISOString = function() {
          return this.$d.toISOString();
        }, m3.toString = function() {
          return this.$d.toUTCString();
        }, M2;
      })(), k = _.prototype;
      return O.prototype = k, [["$ms", r2], ["$s", i2], ["$m", s2], ["$H", u], ["$W", a], ["$M", c], ["$y", h2], ["$D", d]].forEach((function(t3) {
        k[t3[1]] = function(e3) {
          return this.$g(e3, t3[0], t3[1]);
        };
      })), O.extend = function(t3, e3) {
        return t3.$i || (t3(e3, _, O), t3.$i = true), O;
      }, O.locale = w, O.isDayjs = S2, O.unix = function(t3) {
        return O(1e3 * t3);
      }, O.en = D[g], O.Ls = D, O.p = {}, O;
    }));
  }
});

// node_modules/dayjs/plugin/relativeTime.js
var require_relativeTime = __commonJS({
  "node_modules/dayjs/plugin/relativeTime.js"(exports2, module2) {
    !(function(r2, e2) {
      "object" == typeof exports2 && "undefined" != typeof module2 ? module2.exports = e2() : "function" == typeof define && define.amd ? define(e2) : (r2 = "undefined" != typeof globalThis ? globalThis : r2 || self).dayjs_plugin_relativeTime = e2();
    })(exports2, (function() {
      "use strict";
      return function(r2, e2, t2) {
        r2 = r2 || {};
        var n = e2.prototype, o = { future: "in %s", past: "%s ago", s: "a few seconds", m: "a minute", mm: "%d minutes", h: "an hour", hh: "%d hours", d: "a day", dd: "%d days", M: "a month", MM: "%d months", y: "a year", yy: "%d years" };
        function i2(r3, e3, t3, o2) {
          return n.fromToBase(r3, e3, t3, o2);
        }
        t2.en.relativeTime = o, n.fromToBase = function(e3, n2, i3, d2, u) {
          for (var f3, a, s2, l = i3.$locale().relativeTime || o, h2 = r2.thresholds || [{ l: "s", r: 44, d: "second" }, { l: "m", r: 89 }, { l: "mm", r: 44, d: "minute" }, { l: "h", r: 89 }, { l: "hh", r: 21, d: "hour" }, { l: "d", r: 35 }, { l: "dd", r: 25, d: "day" }, { l: "M", r: 45 }, { l: "MM", r: 10, d: "month" }, { l: "y", r: 17 }, { l: "yy", d: "year" }], m2 = h2.length, c = 0; c < m2; c += 1) {
            var y = h2[c];
            y.d && (f3 = d2 ? t2(e3).diff(i3, y.d, true) : i3.diff(e3, y.d, true));
            var p = (r2.rounding || Math.round)(Math.abs(f3));
            if (s2 = f3 > 0, p <= y.r || !y.r) {
              p <= 1 && c > 0 && (y = h2[c - 1]);
              var v = l[y.l];
              u && (p = u("" + p)), a = "string" == typeof v ? v.replace("%d", p) : v(p, n2, y.l, s2);
              break;
            }
          }
          if (n2) return a;
          var M = s2 ? l.future : l.past;
          return "function" == typeof M ? M(a) : M.replace("%s", a);
        }, n.to = function(r3, e3) {
          return i2(r3, e3, this, true);
        }, n.from = function(r3, e3) {
          return i2(r3, e3, this);
        };
        var d = function(r3) {
          return r3.$u ? t2.utc() : t2();
        };
        n.toNow = function(r3) {
          return this.to(d(this), r3);
        }, n.fromNow = function(r3) {
          return this.from(d(this), r3);
        };
      };
    }));
  }
});

// node_modules/dayjs/plugin/customParseFormat.js
var require_customParseFormat = __commonJS({
  "node_modules/dayjs/plugin/customParseFormat.js"(exports2, module2) {
    !(function(e2, t2) {
      "object" == typeof exports2 && "undefined" != typeof module2 ? module2.exports = t2() : "function" == typeof define && define.amd ? define(t2) : (e2 = "undefined" != typeof globalThis ? globalThis : e2 || self).dayjs_plugin_customParseFormat = t2();
    })(exports2, (function() {
      "use strict";
      var e2 = { LTS: "h:mm:ss A", LT: "h:mm A", L: "MM/DD/YYYY", LL: "MMMM D, YYYY", LLL: "MMMM D, YYYY h:mm A", LLLL: "dddd, MMMM D, YYYY h:mm A" }, t2 = /(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g, n = /\d/, r2 = /\d\d/, i2 = /\d\d?/, o = /\d*[^-_:/,()\s\d]+/, s2 = {}, a = function(e3) {
        return (e3 = +e3) + (e3 > 68 ? 1900 : 2e3);
      };
      var f3 = function(e3) {
        return function(t3) {
          this[e3] = +t3;
        };
      }, h2 = [/[+-]\d\d:?(\d\d)?|Z/, function(e3) {
        (this.zone || (this.zone = {})).offset = (function(e4) {
          if (!e4) return 0;
          if ("Z" === e4) return 0;
          var t3 = e4.match(/([+-]|\d\d)/g), n2 = 60 * t3[1] + (+t3[2] || 0);
          return 0 === n2 ? 0 : "+" === t3[0] ? -n2 : n2;
        })(e3);
      }], u = function(e3) {
        var t3 = s2[e3];
        return t3 && (t3.indexOf ? t3 : t3.s.concat(t3.f));
      }, d = function(e3, t3) {
        var n2, r3 = s2.meridiem;
        if (r3) {
          for (var i3 = 1; i3 <= 24; i3 += 1) if (e3.indexOf(r3(i3, 0, t3)) > -1) {
            n2 = i3 > 12;
            break;
          }
        } else n2 = e3 === (t3 ? "pm" : "PM");
        return n2;
      }, c = { A: [o, function(e3) {
        this.afternoon = d(e3, false);
      }], a: [o, function(e3) {
        this.afternoon = d(e3, true);
      }], Q: [n, function(e3) {
        this.month = 3 * (e3 - 1) + 1;
      }], S: [n, function(e3) {
        this.milliseconds = 100 * +e3;
      }], SS: [r2, function(e3) {
        this.milliseconds = 10 * +e3;
      }], SSS: [/\d{3}/, function(e3) {
        this.milliseconds = +e3;
      }], s: [i2, f3("seconds")], ss: [i2, f3("seconds")], m: [i2, f3("minutes")], mm: [i2, f3("minutes")], H: [i2, f3("hours")], h: [i2, f3("hours")], HH: [i2, f3("hours")], hh: [i2, f3("hours")], D: [i2, f3("day")], DD: [r2, f3("day")], Do: [o, function(e3) {
        var t3 = s2.ordinal, n2 = e3.match(/\d+/);
        if (this.day = n2[0], t3) for (var r3 = 1; r3 <= 31; r3 += 1) t3(r3).replace(/\[|\]/g, "") === e3 && (this.day = r3);
      }], w: [i2, f3("week")], ww: [r2, f3("week")], M: [i2, f3("month")], MM: [r2, f3("month")], MMM: [o, function(e3) {
        var t3 = u("months"), n2 = (u("monthsShort") || t3.map((function(e4) {
          return e4.slice(0, 3);
        }))).indexOf(e3) + 1;
        if (n2 < 1) throw new Error();
        this.month = n2 % 12 || n2;
      }], MMMM: [o, function(e3) {
        var t3 = u("months").indexOf(e3) + 1;
        if (t3 < 1) throw new Error();
        this.month = t3 % 12 || t3;
      }], Y: [/[+-]?\d+/, f3("year")], YY: [r2, function(e3) {
        this.year = a(e3);
      }], YYYY: [/\d{4}/, f3("year")], Z: h2, ZZ: h2 };
      function l(n2) {
        var r3, i3;
        r3 = n2, i3 = s2 && s2.formats;
        for (var o2 = (n2 = r3.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g, (function(t3, n3, r4) {
          var o3 = r4 && r4.toUpperCase();
          return n3 || i3[r4] || e2[r4] || i3[o3].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g, (function(e3, t4, n4) {
            return t4 || n4.slice(1);
          }));
        }))).match(t2), a2 = o2.length, f4 = 0; f4 < a2; f4 += 1) {
          var h3 = o2[f4], u2 = c[h3], d2 = u2 && u2[0], l2 = u2 && u2[1];
          o2[f4] = l2 ? { regex: d2, parser: l2 } : h3.replace(/^\[|\]$/g, "");
        }
        return function(e3) {
          for (var t3 = {}, n3 = 0, r4 = 0; n3 < a2; n3 += 1) {
            var i4 = o2[n3];
            if ("string" == typeof i4) r4 += i4.length;
            else {
              var s3 = i4.regex, f5 = i4.parser, h4 = e3.slice(r4), u3 = s3.exec(h4)[0];
              f5.call(t3, u3), e3 = e3.replace(u3, "");
            }
          }
          return (function(e4) {
            var t4 = e4.afternoon;
            if (void 0 !== t4) {
              var n4 = e4.hours;
              t4 ? n4 < 12 && (e4.hours += 12) : 12 === n4 && (e4.hours = 0), delete e4.afternoon;
            }
          })(t3), t3;
        };
      }
      return function(e3, t3, n2) {
        n2.p.customParseFormat = true, e3 && e3.parseTwoDigitYear && (a = e3.parseTwoDigitYear);
        var r3 = t3.prototype, i3 = r3.parse;
        r3.parse = function(e4) {
          var t4 = e4.date, r4 = e4.utc, o2 = e4.args;
          this.$u = r4;
          var a2 = o2[1];
          if ("string" == typeof a2) {
            var f4 = true === o2[2], h3 = true === o2[3], u2 = f4 || h3, d2 = o2[2];
            h3 && (d2 = o2[2]), s2 = this.$locale(), !f4 && d2 && (s2 = n2.Ls[d2]), this.$d = (function(e5, t5, n3, r5) {
              try {
                if (["x", "X"].indexOf(t5) > -1) return new Date(("X" === t5 ? 1e3 : 1) * e5);
                var i4 = l(t5)(e5), o3 = i4.year, s3 = i4.month, a3 = i4.day, f5 = i4.hours, h4 = i4.minutes, u3 = i4.seconds, d3 = i4.milliseconds, c3 = i4.zone, m3 = i4.week, M2 = /* @__PURE__ */ new Date(), Y = a3 || (o3 || s3 ? 1 : M2.getDate()), p = o3 || M2.getFullYear(), v = 0;
                o3 && !s3 || (v = s3 > 0 ? s3 - 1 : M2.getMonth());
                var D, w = f5 || 0, g = h4 || 0, y = u3 || 0, L = d3 || 0;
                return c3 ? new Date(Date.UTC(p, v, Y, w, g, y, L + 60 * c3.offset * 1e3)) : n3 ? new Date(Date.UTC(p, v, Y, w, g, y, L)) : (D = new Date(p, v, Y, w, g, y, L), m3 && (D = r5(D).week(m3).toDate()), D);
              } catch (e6) {
                return /* @__PURE__ */ new Date("");
              }
            })(t4, a2, r4, n2), this.init(), d2 && true !== d2 && (this.$L = this.locale(d2).$L), u2 && t4 != this.format(a2) && (this.$d = /* @__PURE__ */ new Date("")), s2 = {};
          } else if (a2 instanceof Array) for (var c2 = a2.length, m2 = 1; m2 <= c2; m2 += 1) {
            o2[1] = a2[m2 - 1];
            var M = n2.apply(this, o2);
            if (M.isValid()) {
              this.$d = M.$d, this.$L = M.$L, this.init();
              break;
            }
            m2 === c2 && (this.$d = /* @__PURE__ */ new Date(""));
          }
          else i3.call(this, e4);
        };
      };
    }));
  }
});

// node_modules/dayjs/plugin/utc.js
var require_utc = __commonJS({
  "node_modules/dayjs/plugin/utc.js"(exports2, module2) {
    !(function(t2, i2) {
      "object" == typeof exports2 && "undefined" != typeof module2 ? module2.exports = i2() : "function" == typeof define && define.amd ? define(i2) : (t2 = "undefined" != typeof globalThis ? globalThis : t2 || self).dayjs_plugin_utc = i2();
    })(exports2, (function() {
      "use strict";
      var t2 = "minute", i2 = /[+-]\d\d(?::?\d\d)?/g, e2 = /([+-]|\d\d)/g;
      return function(s2, f3, n) {
        var u = f3.prototype;
        n.utc = function(t3) {
          var i3 = { date: t3, utc: true, args: arguments };
          return new f3(i3);
        }, u.utc = function(i3) {
          var e3 = n(this.toDate(), { locale: this.$L, utc: true });
          return i3 ? e3.add(this.utcOffset(), t2) : e3;
        }, u.local = function() {
          return n(this.toDate(), { locale: this.$L, utc: false });
        };
        var o = u.parse;
        u.parse = function(t3) {
          t3.utc && (this.$u = true), this.$utils().u(t3.$offset) || (this.$offset = t3.$offset), o.call(this, t3);
        };
        var r2 = u.init;
        u.init = function() {
          if (this.$u) {
            var t3 = this.$d;
            this.$y = t3.getUTCFullYear(), this.$M = t3.getUTCMonth(), this.$D = t3.getUTCDate(), this.$W = t3.getUTCDay(), this.$H = t3.getUTCHours(), this.$m = t3.getUTCMinutes(), this.$s = t3.getUTCSeconds(), this.$ms = t3.getUTCMilliseconds();
          } else r2.call(this);
        };
        var a = u.utcOffset;
        u.utcOffset = function(s3, f4) {
          var n2 = this.$utils().u;
          if (n2(s3)) return this.$u ? 0 : n2(this.$offset) ? a.call(this) : this.$offset;
          if ("string" == typeof s3 && (s3 = (function(t3) {
            void 0 === t3 && (t3 = "");
            var s4 = t3.match(i2);
            if (!s4) return null;
            var f5 = ("" + s4[0]).match(e2) || ["-", 0, 0], n3 = f5[0], u3 = 60 * +f5[1] + +f5[2];
            return 0 === u3 ? 0 : "+" === n3 ? u3 : -u3;
          })(s3), null === s3)) return this;
          var u2 = Math.abs(s3) <= 16 ? 60 * s3 : s3, o2 = this;
          if (f4) return o2.$offset = u2, o2.$u = 0 === s3, o2;
          if (0 !== s3) {
            var r3 = this.$u ? this.toDate().getTimezoneOffset() : -1 * this.utcOffset();
            (o2 = this.local().add(u2 + r3, t2)).$offset = u2, o2.$x.$localOffset = r3;
          } else o2 = this.utc();
          return o2;
        };
        var h2 = u.format;
        u.format = function(t3) {
          var i3 = t3 || (this.$u ? "YYYY-MM-DDTHH:mm:ss[Z]" : "");
          return h2.call(this, i3);
        }, u.valueOf = function() {
          var t3 = this.$utils().u(this.$offset) ? 0 : this.$offset + (this.$x.$localOffset || this.$d.getTimezoneOffset());
          return this.$d.valueOf() - 6e4 * t3;
        }, u.isUTC = function() {
          return !!this.$u;
        }, u.toISOString = function() {
          return this.toDate().toISOString();
        }, u.toString = function() {
          return this.toDate().toUTCString();
        };
        var l = u.toDate;
        u.toDate = function(t3) {
          return "s" === t3 && this.$offset ? n(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate() : l.call(this);
        };
        var c = u.diff;
        u.diff = function(t3, i3, e3) {
          if (t3 && this.$u === t3.$u) return c.call(this, t3, i3, e3);
          var s3 = this.local(), f4 = n(t3).local();
          return c.call(s3, f4, i3, e3);
        };
      };
    }));
  }
});

// node_modules/dayjs/plugin/timezone.js
var require_timezone = __commonJS({
  "node_modules/dayjs/plugin/timezone.js"(exports2, module2) {
    !(function(t2, e2) {
      "object" == typeof exports2 && "undefined" != typeof module2 ? module2.exports = e2() : "function" == typeof define && define.amd ? define(e2) : (t2 = "undefined" != typeof globalThis ? globalThis : t2 || self).dayjs_plugin_timezone = e2();
    })(exports2, (function() {
      "use strict";
      var t2 = { year: 0, month: 1, day: 2, hour: 3, minute: 4, second: 5 }, e2 = {};
      return function(n, i2, o) {
        var r2, a = function(t3, n2, i3) {
          void 0 === i3 && (i3 = {});
          var o2 = new Date(t3), r3 = (function(t4, n3) {
            void 0 === n3 && (n3 = {});
            var i4 = n3.timeZoneName || "short", o3 = t4 + "|" + i4, r4 = e2[o3];
            return r4 || (r4 = new Intl.DateTimeFormat("en-US", { hour12: false, timeZone: t4, year: "numeric", month: "2-digit", day: "2-digit", hour: "2-digit", minute: "2-digit", second: "2-digit", timeZoneName: i4 }), e2[o3] = r4), r4;
          })(n2, i3);
          return r3.formatToParts(o2);
        }, u = function(e3, n2) {
          for (var i3 = a(e3, n2), r3 = [], u2 = 0; u2 < i3.length; u2 += 1) {
            var f4 = i3[u2], s3 = f4.type, m2 = f4.value, c = t2[s3];
            c >= 0 && (r3[c] = parseInt(m2, 10));
          }
          var d = r3[3], l = 24 === d ? 0 : d, h2 = r3[0] + "-" + r3[1] + "-" + r3[2] + " " + l + ":" + r3[4] + ":" + r3[5] + ":000", v = +e3;
          return (o.utc(h2).valueOf() - (v -= v % 1e3)) / 6e4;
        }, f3 = i2.prototype;
        f3.tz = function(t3, e3) {
          void 0 === t3 && (t3 = r2);
          var n2, i3 = this.utcOffset(), a2 = this.toDate(), u2 = a2.toLocaleString("en-US", { timeZone: t3 }), f4 = Math.round((a2 - new Date(u2)) / 1e3 / 60), s3 = 15 * -Math.round(a2.getTimezoneOffset() / 15) - f4;
          if (!Number(s3)) n2 = this.utcOffset(0, e3);
          else if (n2 = o(u2, { locale: this.$L }).$set("millisecond", this.$ms).utcOffset(s3, true), e3) {
            var m2 = n2.utcOffset();
            n2 = n2.add(i3 - m2, "minute");
          }
          return n2.$x.$timezone = t3, n2;
        }, f3.offsetName = function(t3) {
          var e3 = this.$x.$timezone || o.tz.guess(), n2 = a(this.valueOf(), e3, { timeZoneName: t3 }).find((function(t4) {
            return "timezonename" === t4.type.toLowerCase();
          }));
          return n2 && n2.value;
        };
        var s2 = f3.startOf;
        f3.startOf = function(t3, e3) {
          if (!this.$x || !this.$x.$timezone) return s2.call(this, t3, e3);
          var n2 = o(this.format("YYYY-MM-DD HH:mm:ss:SSS"), { locale: this.$L });
          return s2.call(n2, t3, e3).tz(this.$x.$timezone, true);
        }, o.tz = function(t3, e3, n2) {
          var i3 = n2 && e3, a2 = n2 || e3 || r2, f4 = u(+o(), a2);
          if ("string" != typeof t3) return o(t3).tz(a2);
          var s3 = (function(t4, e4, n3) {
            var i4 = t4 - 60 * e4 * 1e3, o2 = u(i4, n3);
            if (e4 === o2) return [i4, e4];
            var r3 = u(i4 -= 60 * (o2 - e4) * 1e3, n3);
            return o2 === r3 ? [i4, o2] : [t4 - 60 * Math.min(o2, r3) * 1e3, Math.max(o2, r3)];
          })(o.utc(t3, i3).valueOf(), f4, a2), m2 = s3[0], c = s3[1], d = o(m2).utcOffset(c);
          return d.$x.$timezone = a2, d;
        }, o.tz.guess = function() {
          return Intl.DateTimeFormat().resolvedOptions().timeZone;
        }, o.tz.setDefault = function(t3) {
          r2 = t3;
        };
      };
    }));
  }
});

// src/route-lookup.tsx
var route_lookup_exports = {};
__export(route_lookup_exports, {
  default: () => RouteLookup
});
module.exports = __toCommonJS(route_lookup_exports);
var import_react = require("react");
var import_api5 = require("@raycast/api");

// src/lib/gtfsStatic.ts
var import_promises = __toESM(require("fs/promises"));
var import_path = __toESM(require("path"));
var import_os = __toESM(require("os"));

// node_modules/node-fetch/src/index.js
var import_node_http2 = __toESM(require("node:http"), 1);
var import_node_https = __toESM(require("node:https"), 1);
var import_node_zlib = __toESM(require("node:zlib"), 1);
var import_node_stream2 = __toESM(require("node:stream"), 1);
var import_node_buffer2 = require("node:buffer");

// node_modules/data-uri-to-buffer/dist/index.js
function dataUriToBuffer(uri) {
  if (!/^data:/i.test(uri)) {
    throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');
  }
  uri = uri.replace(/\r?\n/g, "");
  const firstComma = uri.indexOf(",");
  if (firstComma === -1 || firstComma <= 4) {
    throw new TypeError("malformed data: URI");
  }
  const meta = uri.substring(5, firstComma).split(";");
  let charset = "";
  let base64 = false;
  const type = meta[0] || "text/plain";
  let typeFull = type;
  for (let i2 = 1; i2 < meta.length; i2++) {
    if (meta[i2] === "base64") {
      base64 = true;
    } else if (meta[i2]) {
      typeFull += `;${meta[i2]}`;
      if (meta[i2].indexOf("charset=") === 0) {
        charset = meta[i2].substring(8);
      }
    }
  }
  if (!meta[0] && !charset.length) {
    typeFull += ";charset=US-ASCII";
    charset = "US-ASCII";
  }
  const encoding = base64 ? "base64" : "ascii";
  const data = unescape(uri.substring(firstComma + 1));
  const buffer = Buffer.from(data, encoding);
  buffer.type = type;
  buffer.typeFull = typeFull;
  buffer.charset = charset;
  return buffer;
}
var dist_default = dataUriToBuffer;

// node_modules/node-fetch/src/body.js
var import_node_stream = __toESM(require("node:stream"), 1);
var import_node_util = require("node:util");
var import_node_buffer = require("node:buffer");
init_fetch_blob();
init_esm_min();

// node_modules/node-fetch/src/errors/base.js
var FetchBaseError = class extends Error {
  constructor(message, type) {
    super(message);
    Error.captureStackTrace(this, this.constructor);
    this.type = type;
  }
  get name() {
    return this.constructor.name;
  }
  get [Symbol.toStringTag]() {
    return this.constructor.name;
  }
};

// node_modules/node-fetch/src/errors/fetch-error.js
var FetchError = class extends FetchBaseError {
  /**
   * @param  {string} message -      Error message for human
   * @param  {string} [type] -        Error type for machine
   * @param  {SystemError} [systemError] - For Node.js system error
   */
  constructor(message, type, systemError) {
    super(message, type);
    if (systemError) {
      this.code = this.errno = systemError.code;
      this.erroredSysCall = systemError.syscall;
    }
  }
};

// node_modules/node-fetch/src/utils/is.js
var NAME = Symbol.toStringTag;
var isURLSearchParameters = (object) => {
  return typeof object === "object" && typeof object.append === "function" && typeof object.delete === "function" && typeof object.get === "function" && typeof object.getAll === "function" && typeof object.has === "function" && typeof object.set === "function" && typeof object.sort === "function" && object[NAME] === "URLSearchParams";
};
var isBlob = (object) => {
  return object && typeof object === "object" && typeof object.arrayBuffer === "function" && typeof object.type === "string" && typeof object.stream === "function" && typeof object.constructor === "function" && /^(Blob|File)$/.test(object[NAME]);
};
var isAbortSignal = (object) => {
  return typeof object === "object" && (object[NAME] === "AbortSignal" || object[NAME] === "EventTarget");
};
var isDomainOrSubdomain = (destination, original) => {
  const orig = new URL(original).hostname;
  const dest = new URL(destination).hostname;
  return orig === dest || orig.endsWith(`.${dest}`);
};
var isSameProtocol = (destination, original) => {
  const orig = new URL(original).protocol;
  const dest = new URL(destination).protocol;
  return orig === dest;
};

// node_modules/node-fetch/src/body.js
var pipeline = (0, import_node_util.promisify)(import_node_stream.default.pipeline);
var INTERNALS = Symbol("Body internals");
var Body = class {
  constructor(body, {
    size = 0
  } = {}) {
    let boundary = null;
    if (body === null) {
      body = null;
    } else if (isURLSearchParameters(body)) {
      body = import_node_buffer.Buffer.from(body.toString());
    } else if (isBlob(body)) {
    } else if (import_node_buffer.Buffer.isBuffer(body)) {
    } else if (import_node_util.types.isAnyArrayBuffer(body)) {
      body = import_node_buffer.Buffer.from(body);
    } else if (ArrayBuffer.isView(body)) {
      body = import_node_buffer.Buffer.from(body.buffer, body.byteOffset, body.byteLength);
    } else if (body instanceof import_node_stream.default) {
    } else if (body instanceof FormData) {
      body = formDataToBlob(body);
      boundary = body.type.split("=")[1];
    } else {
      body = import_node_buffer.Buffer.from(String(body));
    }
    let stream = body;
    if (import_node_buffer.Buffer.isBuffer(body)) {
      stream = import_node_stream.default.Readable.from(body);
    } else if (isBlob(body)) {
      stream = import_node_stream.default.Readable.from(body.stream());
    }
    this[INTERNALS] = {
      body,
      stream,
      boundary,
      disturbed: false,
      error: null
    };
    this.size = size;
    if (body instanceof import_node_stream.default) {
      body.on("error", (error_) => {
        const error = error_ instanceof FetchBaseError ? error_ : new FetchError(`Invalid response body while trying to fetch ${this.url}: ${error_.message}`, "system", error_);
        this[INTERNALS].error = error;
      });
    }
  }
  get body() {
    return this[INTERNALS].stream;
  }
  get bodyUsed() {
    return this[INTERNALS].disturbed;
  }
  /**
   * Decode response as ArrayBuffer
   *
   * @return  Promise
   */
  async arrayBuffer() {
    const { buffer, byteOffset, byteLength } = await consumeBody(this);
    return buffer.slice(byteOffset, byteOffset + byteLength);
  }
  async formData() {
    const ct = this.headers.get("content-type");
    if (ct.startsWith("application/x-www-form-urlencoded")) {
      const formData = new FormData();
      const parameters = new URLSearchParams(await this.text());
      for (const [name, value] of parameters) {
        formData.append(name, value);
      }
      return formData;
    }
    const { toFormData: toFormData2 } = await Promise.resolve().then(() => (init_multipart_parser(), multipart_parser_exports));
    return toFormData2(this.body, ct);
  }
  /**
   * Return raw response as Blob
   *
   * @return Promise
   */
  async blob() {
    const ct = this.headers && this.headers.get("content-type") || this[INTERNALS].body && this[INTERNALS].body.type || "";
    const buf = await this.arrayBuffer();
    return new fetch_blob_default([buf], {
      type: ct
    });
  }
  /**
   * Decode response as json
   *
   * @return  Promise
   */
  async json() {
    const text = await this.text();
    return JSON.parse(text);
  }
  /**
   * Decode response as text
   *
   * @return  Promise
   */
  async text() {
    const buffer = await consumeBody(this);
    return new TextDecoder().decode(buffer);
  }
  /**
   * Decode response as buffer (non-spec api)
   *
   * @return  Promise
   */
  buffer() {
    return consumeBody(this);
  }
};
Body.prototype.buffer = (0, import_node_util.deprecate)(Body.prototype.buffer, "Please use 'response.arrayBuffer()' instead of 'response.buffer()'", "node-fetch#buffer");
Object.defineProperties(Body.prototype, {
  body: { enumerable: true },
  bodyUsed: { enumerable: true },
  arrayBuffer: { enumerable: true },
  blob: { enumerable: true },
  json: { enumerable: true },
  text: { enumerable: true },
  data: { get: (0, import_node_util.deprecate)(
    () => {
    },
    "data doesn't exist, use json(), text(), arrayBuffer(), or body instead",
    "https://github.com/node-fetch/node-fetch/issues/1000 (response)"
  ) }
});
async function consumeBody(data) {
  if (data[INTERNALS].disturbed) {
    throw new TypeError(`body used already for: ${data.url}`);
  }
  data[INTERNALS].disturbed = true;
  if (data[INTERNALS].error) {
    throw data[INTERNALS].error;
  }
  const { body } = data;
  if (body === null) {
    return import_node_buffer.Buffer.alloc(0);
  }
  if (!(body instanceof import_node_stream.default)) {
    return import_node_buffer.Buffer.alloc(0);
  }
  const accum = [];
  let accumBytes = 0;
  try {
    for await (const chunk of body) {
      if (data.size > 0 && accumBytes + chunk.length > data.size) {
        const error = new FetchError(`content size at ${data.url} over limit: ${data.size}`, "max-size");
        body.destroy(error);
        throw error;
      }
      accumBytes += chunk.length;
      accum.push(chunk);
    }
  } catch (error) {
    const error_ = error instanceof FetchBaseError ? error : new FetchError(`Invalid response body while trying to fetch ${data.url}: ${error.message}`, "system", error);
    throw error_;
  }
  if (body.readableEnded === true || body._readableState.ended === true) {
    try {
      if (accum.every((c) => typeof c === "string")) {
        return import_node_buffer.Buffer.from(accum.join(""));
      }
      return import_node_buffer.Buffer.concat(accum, accumBytes);
    } catch (error) {
      throw new FetchError(`Could not create Buffer from response body for ${data.url}: ${error.message}`, "system", error);
    }
  } else {
    throw new FetchError(`Premature close of server response while trying to fetch ${data.url}`);
  }
}
var clone = (instance, highWaterMark) => {
  let p1;
  let p2;
  let { body } = instance[INTERNALS];
  if (instance.bodyUsed) {
    throw new Error("cannot clone body after it is used");
  }
  if (body instanceof import_node_stream.default && typeof body.getBoundary !== "function") {
    p1 = new import_node_stream.PassThrough({ highWaterMark });
    p2 = new import_node_stream.PassThrough({ highWaterMark });
    body.pipe(p1);
    body.pipe(p2);
    instance[INTERNALS].stream = p1;
    body = p2;
  }
  return body;
};
var getNonSpecFormDataBoundary = (0, import_node_util.deprecate)(
  (body) => body.getBoundary(),
  "form-data doesn't follow the spec and requires special treatment. Use alternative package",
  "https://github.com/node-fetch/node-fetch/issues/1167"
);
var extractContentType = (body, request) => {
  if (body === null) {
    return null;
  }
  if (typeof body === "string") {
    return "text/plain;charset=UTF-8";
  }
  if (isURLSearchParameters(body)) {
    return "application/x-www-form-urlencoded;charset=UTF-8";
  }
  if (isBlob(body)) {
    return body.type || null;
  }
  if (import_node_buffer.Buffer.isBuffer(body) || import_node_util.types.isAnyArrayBuffer(body) || ArrayBuffer.isView(body)) {
    return null;
  }
  if (body instanceof FormData) {
    return `multipart/form-data; boundary=${request[INTERNALS].boundary}`;
  }
  if (body && typeof body.getBoundary === "function") {
    return `multipart/form-data;boundary=${getNonSpecFormDataBoundary(body)}`;
  }
  if (body instanceof import_node_stream.default) {
    return null;
  }
  return "text/plain;charset=UTF-8";
};
var getTotalBytes = (request) => {
  const { body } = request[INTERNALS];
  if (body === null) {
    return 0;
  }
  if (isBlob(body)) {
    return body.size;
  }
  if (import_node_buffer.Buffer.isBuffer(body)) {
    return body.length;
  }
  if (body && typeof body.getLengthSync === "function") {
    return body.hasKnownLength && body.hasKnownLength() ? body.getLengthSync() : null;
  }
  return null;
};
var writeToStream = async (dest, { body }) => {
  if (body === null) {
    dest.end();
  } else {
    await pipeline(body, dest);
  }
};

// node_modules/node-fetch/src/headers.js
var import_node_util2 = require("node:util");
var import_node_http = __toESM(require("node:http"), 1);
var validateHeaderName = typeof import_node_http.default.validateHeaderName === "function" ? import_node_http.default.validateHeaderName : (name) => {
  if (!/^[\^`\-\w!#$%&'*+.|~]+$/.test(name)) {
    const error = new TypeError(`Header name must be a valid HTTP token [${name}]`);
    Object.defineProperty(error, "code", { value: "ERR_INVALID_HTTP_TOKEN" });
    throw error;
  }
};
var validateHeaderValue = typeof import_node_http.default.validateHeaderValue === "function" ? import_node_http.default.validateHeaderValue : (name, value) => {
  if (/[^\t\u0020-\u007E\u0080-\u00FF]/.test(value)) {
    const error = new TypeError(`Invalid character in header content ["${name}"]`);
    Object.defineProperty(error, "code", { value: "ERR_INVALID_CHAR" });
    throw error;
  }
};
var Headers = class _Headers extends URLSearchParams {
  /**
   * Headers class
   *
   * @constructor
   * @param {HeadersInit} [init] - Response headers
   */
  constructor(init) {
    let result = [];
    if (init instanceof _Headers) {
      const raw = init.raw();
      for (const [name, values] of Object.entries(raw)) {
        result.push(...values.map((value) => [name, value]));
      }
    } else if (init == null) {
    } else if (typeof init === "object" && !import_node_util2.types.isBoxedPrimitive(init)) {
      const method = init[Symbol.iterator];
      if (method == null) {
        result.push(...Object.entries(init));
      } else {
        if (typeof method !== "function") {
          throw new TypeError("Header pairs must be iterable");
        }
        result = [...init].map((pair) => {
          if (typeof pair !== "object" || import_node_util2.types.isBoxedPrimitive(pair)) {
            throw new TypeError("Each header pair must be an iterable object");
          }
          return [...pair];
        }).map((pair) => {
          if (pair.length !== 2) {
            throw new TypeError("Each header pair must be a name/value tuple");
          }
          return [...pair];
        });
      }
    } else {
      throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");
    }
    result = result.length > 0 ? result.map(([name, value]) => {
      validateHeaderName(name);
      validateHeaderValue(name, String(value));
      return [String(name).toLowerCase(), String(value)];
    }) : void 0;
    super(result);
    return new Proxy(this, {
      get(target, p, receiver) {
        switch (p) {
          case "append":
          case "set":
            return (name, value) => {
              validateHeaderName(name);
              validateHeaderValue(name, String(value));
              return URLSearchParams.prototype[p].call(
                target,
                String(name).toLowerCase(),
                String(value)
              );
            };
          case "delete":
          case "has":
          case "getAll":
            return (name) => {
              validateHeaderName(name);
              return URLSearchParams.prototype[p].call(
                target,
                String(name).toLowerCase()
              );
            };
          case "keys":
            return () => {
              target.sort();
              return new Set(URLSearchParams.prototype.keys.call(target)).keys();
            };
          default:
            return Reflect.get(target, p, receiver);
        }
      }
    });
  }
  get [Symbol.toStringTag]() {
    return this.constructor.name;
  }
  toString() {
    return Object.prototype.toString.call(this);
  }
  get(name) {
    const values = this.getAll(name);
    if (values.length === 0) {
      return null;
    }
    let value = values.join(", ");
    if (/^content-encoding$/i.test(name)) {
      value = value.toLowerCase();
    }
    return value;
  }
  forEach(callback, thisArg = void 0) {
    for (const name of this.keys()) {
      Reflect.apply(callback, thisArg, [this.get(name), name, this]);
    }
  }
  *values() {
    for (const name of this.keys()) {
      yield this.get(name);
    }
  }
  /**
   * @type {() => IterableIterator<[string, string]>}
   */
  *entries() {
    for (const name of this.keys()) {
      yield [name, this.get(name)];
    }
  }
  [Symbol.iterator]() {
    return this.entries();
  }
  /**
   * Node-fetch non-spec method
   * returning all headers and their values as array
   * @returns {Record<string, string[]>}
   */
  raw() {
    return [...this.keys()].reduce((result, key) => {
      result[key] = this.getAll(key);
      return result;
    }, {});
  }
  /**
   * For better console.log(headers) and also to convert Headers into Node.js Request compatible format
   */
  [Symbol.for("nodejs.util.inspect.custom")]() {
    return [...this.keys()].reduce((result, key) => {
      const values = this.getAll(key);
      if (key === "host") {
        result[key] = values[0];
      } else {
        result[key] = values.length > 1 ? values : values[0];
      }
      return result;
    }, {});
  }
};
Object.defineProperties(
  Headers.prototype,
  ["get", "entries", "forEach", "values"].reduce((result, property) => {
    result[property] = { enumerable: true };
    return result;
  }, {})
);
function fromRawHeaders(headers = []) {
  return new Headers(
    headers.reduce((result, value, index, array) => {
      if (index % 2 === 0) {
        result.push(array.slice(index, index + 2));
      }
      return result;
    }, []).filter(([name, value]) => {
      try {
        validateHeaderName(name);
        validateHeaderValue(name, String(value));
        return true;
      } catch {
        return false;
      }
    })
  );
}

// node_modules/node-fetch/src/utils/is-redirect.js
var redirectStatus = /* @__PURE__ */ new Set([301, 302, 303, 307, 308]);
var isRedirect = (code) => {
  return redirectStatus.has(code);
};

// node_modules/node-fetch/src/response.js
var INTERNALS2 = Symbol("Response internals");
var Response = class _Response extends Body {
  constructor(body = null, options = {}) {
    super(body, options);
    const status = options.status != null ? options.status : 200;
    const headers = new Headers(options.headers);
    if (body !== null && !headers.has("Content-Type")) {
      const contentType = extractContentType(body, this);
      if (contentType) {
        headers.append("Content-Type", contentType);
      }
    }
    this[INTERNALS2] = {
      type: "default",
      url: options.url,
      status,
      statusText: options.statusText || "",
      headers,
      counter: options.counter,
      highWaterMark: options.highWaterMark
    };
  }
  get type() {
    return this[INTERNALS2].type;
  }
  get url() {
    return this[INTERNALS2].url || "";
  }
  get status() {
    return this[INTERNALS2].status;
  }
  /**
   * Convenience property representing if the request ended normally
   */
  get ok() {
    return this[INTERNALS2].status >= 200 && this[INTERNALS2].status < 300;
  }
  get redirected() {
    return this[INTERNALS2].counter > 0;
  }
  get statusText() {
    return this[INTERNALS2].statusText;
  }
  get headers() {
    return this[INTERNALS2].headers;
  }
  get highWaterMark() {
    return this[INTERNALS2].highWaterMark;
  }
  /**
   * Clone this response
   *
   * @return  Response
   */
  clone() {
    return new _Response(clone(this, this.highWaterMark), {
      type: this.type,
      url: this.url,
      status: this.status,
      statusText: this.statusText,
      headers: this.headers,
      ok: this.ok,
      redirected: this.redirected,
      size: this.size,
      highWaterMark: this.highWaterMark
    });
  }
  /**
   * @param {string} url    The URL that the new response is to originate from.
   * @param {number} status An optional status code for the response (e.g., 302.)
   * @returns {Response}    A Response object.
   */
  static redirect(url, status = 302) {
    if (!isRedirect(status)) {
      throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');
    }
    return new _Response(null, {
      headers: {
        location: new URL(url).toString()
      },
      status
    });
  }
  static error() {
    const response = new _Response(null, { status: 0, statusText: "" });
    response[INTERNALS2].type = "error";
    return response;
  }
  static json(data = void 0, init = {}) {
    const body = JSON.stringify(data);
    if (body === void 0) {
      throw new TypeError("data is not JSON serializable");
    }
    const headers = new Headers(init && init.headers);
    if (!headers.has("content-type")) {
      headers.set("content-type", "application/json");
    }
    return new _Response(body, {
      ...init,
      headers
    });
  }
  get [Symbol.toStringTag]() {
    return "Response";
  }
};
Object.defineProperties(Response.prototype, {
  type: { enumerable: true },
  url: { enumerable: true },
  status: { enumerable: true },
  ok: { enumerable: true },
  redirected: { enumerable: true },
  statusText: { enumerable: true },
  headers: { enumerable: true },
  clone: { enumerable: true }
});

// node_modules/node-fetch/src/request.js
var import_node_url = require("node:url");
var import_node_util3 = require("node:util");

// node_modules/node-fetch/src/utils/get-search.js
var getSearch = (parsedURL) => {
  if (parsedURL.search) {
    return parsedURL.search;
  }
  const lastOffset = parsedURL.href.length - 1;
  const hash = parsedURL.hash || (parsedURL.href[lastOffset] === "#" ? "#" : "");
  return parsedURL.href[lastOffset - hash.length] === "?" ? "?" : "";
};

// node_modules/node-fetch/src/utils/referrer.js
var import_node_net = require("node:net");
function stripURLForUseAsAReferrer(url, originOnly = false) {
  if (url == null) {
    return "no-referrer";
  }
  url = new URL(url);
  if (/^(about|blob|data):$/.test(url.protocol)) {
    return "no-referrer";
  }
  url.username = "";
  url.password = "";
  url.hash = "";
  if (originOnly) {
    url.pathname = "";
    url.search = "";
  }
  return url;
}
var ReferrerPolicy = /* @__PURE__ */ new Set([
  "",
  "no-referrer",
  "no-referrer-when-downgrade",
  "same-origin",
  "origin",
  "strict-origin",
  "origin-when-cross-origin",
  "strict-origin-when-cross-origin",
  "unsafe-url"
]);
var DEFAULT_REFERRER_POLICY = "strict-origin-when-cross-origin";
function validateReferrerPolicy(referrerPolicy) {
  if (!ReferrerPolicy.has(referrerPolicy)) {
    throw new TypeError(`Invalid referrerPolicy: ${referrerPolicy}`);
  }
  return referrerPolicy;
}
function isOriginPotentiallyTrustworthy(url) {
  if (/^(http|ws)s:$/.test(url.protocol)) {
    return true;
  }
  const hostIp = url.host.replace(/(^\[)|(]$)/g, "");
  const hostIPVersion = (0, import_node_net.isIP)(hostIp);
  if (hostIPVersion === 4 && /^127\./.test(hostIp)) {
    return true;
  }
  if (hostIPVersion === 6 && /^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(hostIp)) {
    return true;
  }
  if (url.host === "localhost" || url.host.endsWith(".localhost")) {
    return false;
  }
  if (url.protocol === "file:") {
    return true;
  }
  return false;
}
function isUrlPotentiallyTrustworthy(url) {
  if (/^about:(blank|srcdoc)$/.test(url)) {
    return true;
  }
  if (url.protocol === "data:") {
    return true;
  }
  if (/^(blob|filesystem):$/.test(url.protocol)) {
    return true;
  }
  return isOriginPotentiallyTrustworthy(url);
}
function determineRequestsReferrer(request, { referrerURLCallback, referrerOriginCallback } = {}) {
  if (request.referrer === "no-referrer" || request.referrerPolicy === "") {
    return null;
  }
  const policy = request.referrerPolicy;
  if (request.referrer === "about:client") {
    return "no-referrer";
  }
  const referrerSource = request.referrer;
  let referrerURL = stripURLForUseAsAReferrer(referrerSource);
  let referrerOrigin = stripURLForUseAsAReferrer(referrerSource, true);
  if (referrerURL.toString().length > 4096) {
    referrerURL = referrerOrigin;
  }
  if (referrerURLCallback) {
    referrerURL = referrerURLCallback(referrerURL);
  }
  if (referrerOriginCallback) {
    referrerOrigin = referrerOriginCallback(referrerOrigin);
  }
  const currentURL = new URL(request.url);
  switch (policy) {
    case "no-referrer":
      return "no-referrer";
    case "origin":
      return referrerOrigin;
    case "unsafe-url":
      return referrerURL;
    case "strict-origin":
      if (isUrlPotentiallyTrustworthy(referrerURL) && !isUrlPotentiallyTrustworthy(currentURL)) {
        return "no-referrer";
      }
      return referrerOrigin.toString();
    case "strict-origin-when-cross-origin":
      if (referrerURL.origin === currentURL.origin) {
        return referrerURL;
      }
      if (isUrlPotentiallyTrustworthy(referrerURL) && !isUrlPotentiallyTrustworthy(currentURL)) {
        return "no-referrer";
      }
      return referrerOrigin;
    case "same-origin":
      if (referrerURL.origin === currentURL.origin) {
        return referrerURL;
      }
      return "no-referrer";
    case "origin-when-cross-origin":
      if (referrerURL.origin === currentURL.origin) {
        return referrerURL;
      }
      return referrerOrigin;
    case "no-referrer-when-downgrade":
      if (isUrlPotentiallyTrustworthy(referrerURL) && !isUrlPotentiallyTrustworthy(currentURL)) {
        return "no-referrer";
      }
      return referrerURL;
    default:
      throw new TypeError(`Invalid referrerPolicy: ${policy}`);
  }
}
function parseReferrerPolicyFromHeader(headers) {
  const policyTokens = (headers.get("referrer-policy") || "").split(/[,\s]+/);
  let policy = "";
  for (const token of policyTokens) {
    if (token && ReferrerPolicy.has(token)) {
      policy = token;
    }
  }
  return policy;
}

// node_modules/node-fetch/src/request.js
var INTERNALS3 = Symbol("Request internals");
var isRequest = (object) => {
  return typeof object === "object" && typeof object[INTERNALS3] === "object";
};
var doBadDataWarn = (0, import_node_util3.deprecate)(
  () => {
  },
  ".data is not a valid RequestInit property, use .body instead",
  "https://github.com/node-fetch/node-fetch/issues/1000 (request)"
);
var Request = class _Request extends Body {
  constructor(input, init = {}) {
    let parsedURL;
    if (isRequest(input)) {
      parsedURL = new URL(input.url);
    } else {
      parsedURL = new URL(input);
      input = {};
    }
    if (parsedURL.username !== "" || parsedURL.password !== "") {
      throw new TypeError(`${parsedURL} is an url with embedded credentials.`);
    }
    let method = init.method || input.method || "GET";
    if (/^(delete|get|head|options|post|put)$/i.test(method)) {
      method = method.toUpperCase();
    }
    if (!isRequest(init) && "data" in init) {
      doBadDataWarn();
    }
    if ((init.body != null || isRequest(input) && input.body !== null) && (method === "GET" || method === "HEAD")) {
      throw new TypeError("Request with GET/HEAD method cannot have body");
    }
    const inputBody = init.body ? init.body : isRequest(input) && input.body !== null ? clone(input) : null;
    super(inputBody, {
      size: init.size || input.size || 0
    });
    const headers = new Headers(init.headers || input.headers || {});
    if (inputBody !== null && !headers.has("Content-Type")) {
      const contentType = extractContentType(inputBody, this);
      if (contentType) {
        headers.set("Content-Type", contentType);
      }
    }
    let signal = isRequest(input) ? input.signal : null;
    if ("signal" in init) {
      signal = init.signal;
    }
    if (signal != null && !isAbortSignal(signal)) {
      throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");
    }
    let referrer = init.referrer == null ? input.referrer : init.referrer;
    if (referrer === "") {
      referrer = "no-referrer";
    } else if (referrer) {
      const parsedReferrer = new URL(referrer);
      referrer = /^about:(\/\/)?client$/.test(parsedReferrer) ? "client" : parsedReferrer;
    } else {
      referrer = void 0;
    }
    this[INTERNALS3] = {
      method,
      redirect: init.redirect || input.redirect || "follow",
      headers,
      parsedURL,
      signal,
      referrer
    };
    this.follow = init.follow === void 0 ? input.follow === void 0 ? 20 : input.follow : init.follow;
    this.compress = init.compress === void 0 ? input.compress === void 0 ? true : input.compress : init.compress;
    this.counter = init.counter || input.counter || 0;
    this.agent = init.agent || input.agent;
    this.highWaterMark = init.highWaterMark || input.highWaterMark || 16384;
    this.insecureHTTPParser = init.insecureHTTPParser || input.insecureHTTPParser || false;
    this.referrerPolicy = init.referrerPolicy || input.referrerPolicy || "";
  }
  /** @returns {string} */
  get method() {
    return this[INTERNALS3].method;
  }
  /** @returns {string} */
  get url() {
    return (0, import_node_url.format)(this[INTERNALS3].parsedURL);
  }
  /** @returns {Headers} */
  get headers() {
    return this[INTERNALS3].headers;
  }
  get redirect() {
    return this[INTERNALS3].redirect;
  }
  /** @returns {AbortSignal} */
  get signal() {
    return this[INTERNALS3].signal;
  }
  // https://fetch.spec.whatwg.org/#dom-request-referrer
  get referrer() {
    if (this[INTERNALS3].referrer === "no-referrer") {
      return "";
    }
    if (this[INTERNALS3].referrer === "client") {
      return "about:client";
    }
    if (this[INTERNALS3].referrer) {
      return this[INTERNALS3].referrer.toString();
    }
    return void 0;
  }
  get referrerPolicy() {
    return this[INTERNALS3].referrerPolicy;
  }
  set referrerPolicy(referrerPolicy) {
    this[INTERNALS3].referrerPolicy = validateReferrerPolicy(referrerPolicy);
  }
  /**
   * Clone this request
   *
   * @return  Request
   */
  clone() {
    return new _Request(this);
  }
  get [Symbol.toStringTag]() {
    return "Request";
  }
};
Object.defineProperties(Request.prototype, {
  method: { enumerable: true },
  url: { enumerable: true },
  headers: { enumerable: true },
  redirect: { enumerable: true },
  clone: { enumerable: true },
  signal: { enumerable: true },
  referrer: { enumerable: true },
  referrerPolicy: { enumerable: true }
});
var getNodeRequestOptions = (request) => {
  const { parsedURL } = request[INTERNALS3];
  const headers = new Headers(request[INTERNALS3].headers);
  if (!headers.has("Accept")) {
    headers.set("Accept", "*/*");
  }
  let contentLengthValue = null;
  if (request.body === null && /^(post|put)$/i.test(request.method)) {
    contentLengthValue = "0";
  }
  if (request.body !== null) {
    const totalBytes = getTotalBytes(request);
    if (typeof totalBytes === "number" && !Number.isNaN(totalBytes)) {
      contentLengthValue = String(totalBytes);
    }
  }
  if (contentLengthValue) {
    headers.set("Content-Length", contentLengthValue);
  }
  if (request.referrerPolicy === "") {
    request.referrerPolicy = DEFAULT_REFERRER_POLICY;
  }
  if (request.referrer && request.referrer !== "no-referrer") {
    request[INTERNALS3].referrer = determineRequestsReferrer(request);
  } else {
    request[INTERNALS3].referrer = "no-referrer";
  }
  if (request[INTERNALS3].referrer instanceof URL) {
    headers.set("Referer", request.referrer);
  }
  if (!headers.has("User-Agent")) {
    headers.set("User-Agent", "node-fetch");
  }
  if (request.compress && !headers.has("Accept-Encoding")) {
    headers.set("Accept-Encoding", "gzip, deflate, br");
  }
  let { agent } = request;
  if (typeof agent === "function") {
    agent = agent(parsedURL);
  }
  const search = getSearch(parsedURL);
  const options = {
    // Overwrite search to retain trailing ? (issue #776)
    path: parsedURL.pathname + search,
    // The following options are not expressed in the URL
    method: request.method,
    headers: headers[Symbol.for("nodejs.util.inspect.custom")](),
    insecureHTTPParser: request.insecureHTTPParser,
    agent
  };
  return {
    /** @type {URL} */
    parsedURL,
    options
  };
};

// node_modules/node-fetch/src/errors/abort-error.js
var AbortError = class extends FetchBaseError {
  constructor(message, type = "aborted") {
    super(message, type);
  }
};

// node_modules/node-fetch/src/index.js
init_esm_min();
init_from();
var supportedSchemas = /* @__PURE__ */ new Set(["data:", "http:", "https:"]);
async function fetch(url, options_) {
  return new Promise((resolve, reject) => {
    const request = new Request(url, options_);
    const { parsedURL, options } = getNodeRequestOptions(request);
    if (!supportedSchemas.has(parsedURL.protocol)) {
      throw new TypeError(`node-fetch cannot load ${url}. URL scheme "${parsedURL.protocol.replace(/:$/, "")}" is not supported.`);
    }
    if (parsedURL.protocol === "data:") {
      const data = dist_default(request.url);
      const response2 = new Response(data, { headers: { "Content-Type": data.typeFull } });
      resolve(response2);
      return;
    }
    const send = (parsedURL.protocol === "https:" ? import_node_https.default : import_node_http2.default).request;
    const { signal } = request;
    let response = null;
    const abort = () => {
      const error = new AbortError("The operation was aborted.");
      reject(error);
      if (request.body && request.body instanceof import_node_stream2.default.Readable) {
        request.body.destroy(error);
      }
      if (!response || !response.body) {
        return;
      }
      response.body.emit("error", error);
    };
    if (signal && signal.aborted) {
      abort();
      return;
    }
    const abortAndFinalize = () => {
      abort();
      finalize();
    };
    const request_ = send(parsedURL.toString(), options);
    if (signal) {
      signal.addEventListener("abort", abortAndFinalize);
    }
    const finalize = () => {
      request_.abort();
      if (signal) {
        signal.removeEventListener("abort", abortAndFinalize);
      }
    };
    request_.on("error", (error) => {
      reject(new FetchError(`request to ${request.url} failed, reason: ${error.message}`, "system", error));
      finalize();
    });
    fixResponseChunkedTransferBadEnding(request_, (error) => {
      if (response && response.body) {
        response.body.destroy(error);
      }
    });
    if (process.version < "v14") {
      request_.on("socket", (s2) => {
        let endedWithEventsCount;
        s2.prependListener("end", () => {
          endedWithEventsCount = s2._eventsCount;
        });
        s2.prependListener("close", (hadError) => {
          if (response && endedWithEventsCount < s2._eventsCount && !hadError) {
            const error = new Error("Premature close");
            error.code = "ERR_STREAM_PREMATURE_CLOSE";
            response.body.emit("error", error);
          }
        });
      });
    }
    request_.on("response", (response_) => {
      request_.setTimeout(0);
      const headers = fromRawHeaders(response_.rawHeaders);
      if (isRedirect(response_.statusCode)) {
        const location = headers.get("Location");
        let locationURL = null;
        try {
          locationURL = location === null ? null : new URL(location, request.url);
        } catch {
          if (request.redirect !== "manual") {
            reject(new FetchError(`uri requested responds with an invalid redirect URL: ${location}`, "invalid-redirect"));
            finalize();
            return;
          }
        }
        switch (request.redirect) {
          case "error":
            reject(new FetchError(`uri requested responds with a redirect, redirect mode is set to error: ${request.url}`, "no-redirect"));
            finalize();
            return;
          case "manual":
            break;
          case "follow": {
            if (locationURL === null) {
              break;
            }
            if (request.counter >= request.follow) {
              reject(new FetchError(`maximum redirect reached at: ${request.url}`, "max-redirect"));
              finalize();
              return;
            }
            const requestOptions = {
              headers: new Headers(request.headers),
              follow: request.follow,
              counter: request.counter + 1,
              agent: request.agent,
              compress: request.compress,
              method: request.method,
              body: clone(request),
              signal: request.signal,
              size: request.size,
              referrer: request.referrer,
              referrerPolicy: request.referrerPolicy
            };
            if (!isDomainOrSubdomain(request.url, locationURL) || !isSameProtocol(request.url, locationURL)) {
              for (const name of ["authorization", "www-authenticate", "cookie", "cookie2"]) {
                requestOptions.headers.delete(name);
              }
            }
            if (response_.statusCode !== 303 && request.body && options_.body instanceof import_node_stream2.default.Readable) {
              reject(new FetchError("Cannot follow redirect with body being a readable stream", "unsupported-redirect"));
              finalize();
              return;
            }
            if (response_.statusCode === 303 || (response_.statusCode === 301 || response_.statusCode === 302) && request.method === "POST") {
              requestOptions.method = "GET";
              requestOptions.body = void 0;
              requestOptions.headers.delete("content-length");
            }
            const responseReferrerPolicy = parseReferrerPolicyFromHeader(headers);
            if (responseReferrerPolicy) {
              requestOptions.referrerPolicy = responseReferrerPolicy;
            }
            resolve(fetch(new Request(locationURL, requestOptions)));
            finalize();
            return;
          }
          default:
            return reject(new TypeError(`Redirect option '${request.redirect}' is not a valid value of RequestRedirect`));
        }
      }
      if (signal) {
        response_.once("end", () => {
          signal.removeEventListener("abort", abortAndFinalize);
        });
      }
      let body = (0, import_node_stream2.pipeline)(response_, new import_node_stream2.PassThrough(), (error) => {
        if (error) {
          reject(error);
        }
      });
      if (process.version < "v12.10") {
        response_.on("aborted", abortAndFinalize);
      }
      const responseOptions = {
        url: request.url,
        status: response_.statusCode,
        statusText: response_.statusMessage,
        headers,
        size: request.size,
        counter: request.counter,
        highWaterMark: request.highWaterMark
      };
      const codings = headers.get("Content-Encoding");
      if (!request.compress || request.method === "HEAD" || codings === null || response_.statusCode === 204 || response_.statusCode === 304) {
        response = new Response(body, responseOptions);
        resolve(response);
        return;
      }
      const zlibOptions = {
        flush: import_node_zlib.default.Z_SYNC_FLUSH,
        finishFlush: import_node_zlib.default.Z_SYNC_FLUSH
      };
      if (codings === "gzip" || codings === "x-gzip") {
        body = (0, import_node_stream2.pipeline)(body, import_node_zlib.default.createGunzip(zlibOptions), (error) => {
          if (error) {
            reject(error);
          }
        });
        response = new Response(body, responseOptions);
        resolve(response);
        return;
      }
      if (codings === "deflate" || codings === "x-deflate") {
        const raw = (0, import_node_stream2.pipeline)(response_, new import_node_stream2.PassThrough(), (error) => {
          if (error) {
            reject(error);
          }
        });
        raw.once("data", (chunk) => {
          if ((chunk[0] & 15) === 8) {
            body = (0, import_node_stream2.pipeline)(body, import_node_zlib.default.createInflate(), (error) => {
              if (error) {
                reject(error);
              }
            });
          } else {
            body = (0, import_node_stream2.pipeline)(body, import_node_zlib.default.createInflateRaw(), (error) => {
              if (error) {
                reject(error);
              }
            });
          }
          response = new Response(body, responseOptions);
          resolve(response);
        });
        raw.once("end", () => {
          if (!response) {
            response = new Response(body, responseOptions);
            resolve(response);
          }
        });
        return;
      }
      if (codings === "br") {
        body = (0, import_node_stream2.pipeline)(body, import_node_zlib.default.createBrotliDecompress(), (error) => {
          if (error) {
            reject(error);
          }
        });
        response = new Response(body, responseOptions);
        resolve(response);
        return;
      }
      response = new Response(body, responseOptions);
      resolve(response);
    });
    writeToStream(request_, request).catch(reject);
  });
}
function fixResponseChunkedTransferBadEnding(request, errorCallback) {
  const LAST_CHUNK = import_node_buffer2.Buffer.from("0\r\n\r\n");
  let isChunkedTransfer = false;
  let properLastChunkReceived = false;
  let previousChunk;
  request.on("response", (response) => {
    const { headers } = response;
    isChunkedTransfer = headers["transfer-encoding"] === "chunked" && !headers["content-length"];
  });
  request.on("socket", (socket) => {
    const onSocketClose = () => {
      if (isChunkedTransfer && !properLastChunkReceived) {
        const error = new Error("Premature close");
        error.code = "ERR_STREAM_PREMATURE_CLOSE";
        errorCallback(error);
      }
    };
    const onData = (buf) => {
      properLastChunkReceived = import_node_buffer2.Buffer.compare(buf.slice(-5), LAST_CHUNK) === 0;
      if (!properLastChunkReceived && previousChunk) {
        properLastChunkReceived = import_node_buffer2.Buffer.compare(previousChunk.slice(-3), LAST_CHUNK.slice(0, 3)) === 0 && import_node_buffer2.Buffer.compare(buf.slice(-2), LAST_CHUNK.slice(3)) === 0;
      }
      previousChunk = buf;
    };
    socket.prependListener("close", onSocketClose);
    socket.on("data", onData);
    request.on("close", () => {
      socket.removeListener("close", onSocketClose);
      socket.removeListener("data", onData);
    });
  });
}

// src/lib/gtfsStatic.ts
var import_adm_zip = __toESM(require_adm_zip());

// node_modules/csv-parse/lib/api/CsvError.js
var CsvError = class _CsvError extends Error {
  constructor(code, message, options, ...contexts) {
    if (Array.isArray(message)) message = message.join(" ").trim();
    super(message);
    if (Error.captureStackTrace !== void 0) {
      Error.captureStackTrace(this, _CsvError);
    }
    this.code = code;
    for (const context of contexts) {
      for (const key in context) {
        const value = context[key];
        this[key] = Buffer.isBuffer(value) ? value.toString(options.encoding) : value == null ? value : JSON.parse(JSON.stringify(value));
      }
    }
  }
};

// node_modules/csv-parse/lib/utils/is_object.js
var is_object = function(obj) {
  return typeof obj === "object" && obj !== null && !Array.isArray(obj);
};

// node_modules/csv-parse/lib/api/normalize_columns_array.js
var normalize_columns_array = function(columns) {
  const normalizedColumns = [];
  for (let i2 = 0, l = columns.length; i2 < l; i2++) {
    const column = columns[i2];
    if (column === void 0 || column === null || column === false) {
      normalizedColumns[i2] = { disabled: true };
    } else if (typeof column === "string") {
      normalizedColumns[i2] = { name: column };
    } else if (is_object(column)) {
      if (typeof column.name !== "string") {
        throw new CsvError("CSV_OPTION_COLUMNS_MISSING_NAME", [
          "Option columns missing name:",
          `property "name" is required at position ${i2}`,
          "when column is an object literal"
        ]);
      }
      normalizedColumns[i2] = column;
    } else {
      throw new CsvError("CSV_INVALID_COLUMN_DEFINITION", [
        "Invalid column definition:",
        "expect a string or a literal object,",
        `got ${JSON.stringify(column)} at position ${i2}`
      ]);
    }
  }
  return normalizedColumns;
};

// node_modules/csv-parse/lib/utils/ResizeableBuffer.js
var ResizeableBuffer = class {
  constructor(size = 100) {
    this.size = size;
    this.length = 0;
    this.buf = Buffer.allocUnsafe(size);
  }
  prepend(val) {
    if (Buffer.isBuffer(val)) {
      const length = this.length + val.length;
      if (length >= this.size) {
        this.resize();
        if (length >= this.size) {
          throw Error("INVALID_BUFFER_STATE");
        }
      }
      const buf = this.buf;
      this.buf = Buffer.allocUnsafe(this.size);
      val.copy(this.buf, 0);
      buf.copy(this.buf, val.length);
      this.length += val.length;
    } else {
      const length = this.length++;
      if (length === this.size) {
        this.resize();
      }
      const buf = this.clone();
      this.buf[0] = val;
      buf.copy(this.buf, 1, 0, length);
    }
  }
  append(val) {
    const length = this.length++;
    if (length === this.size) {
      this.resize();
    }
    this.buf[length] = val;
  }
  clone() {
    return Buffer.from(this.buf.slice(0, this.length));
  }
  resize() {
    const length = this.length;
    this.size = this.size * 2;
    const buf = Buffer.allocUnsafe(this.size);
    this.buf.copy(buf, 0, 0, length);
    this.buf = buf;
  }
  toString(encoding) {
    if (encoding) {
      return this.buf.slice(0, this.length).toString(encoding);
    } else {
      return Uint8Array.prototype.slice.call(this.buf.slice(0, this.length));
    }
  }
  toJSON() {
    return this.toString("utf8");
  }
  reset() {
    this.length = 0;
  }
};
var ResizeableBuffer_default = ResizeableBuffer;

// node_modules/csv-parse/lib/api/init_state.js
var np = 12;
var cr = 13;
var nl = 10;
var space = 32;
var tab = 9;
var init_state = function(options) {
  return {
    bomSkipped: false,
    bufBytesStart: 0,
    castField: options.cast_function,
    commenting: false,
    // Current error encountered by a record
    error: void 0,
    enabled: options.from_line === 1,
    escaping: false,
    escapeIsQuote: Buffer.isBuffer(options.escape) && Buffer.isBuffer(options.quote) && Buffer.compare(options.escape, options.quote) === 0,
    // columns can be `false`, `true`, `Array`
    expectedRecordLength: Array.isArray(options.columns) ? options.columns.length : void 0,
    field: new ResizeableBuffer_default(20),
    firstLineToHeaders: options.cast_first_line_to_header,
    needMoreDataSize: Math.max(
      // Skip if the remaining buffer smaller than comment
      options.comment !== null ? options.comment.length : 0,
      ...options.delimiter.map((delimiter) => delimiter.length),
      // Skip if the remaining buffer can be escape sequence
      options.quote !== null ? options.quote.length : 0
    ),
    previousBuf: void 0,
    quoting: false,
    stop: false,
    rawBuffer: new ResizeableBuffer_default(100),
    record: [],
    recordHasError: false,
    record_length: 0,
    recordDelimiterMaxLength: options.record_delimiter.length === 0 ? 0 : Math.max(...options.record_delimiter.map((v) => v.length)),
    trimChars: [
      Buffer.from(" ", options.encoding)[0],
      Buffer.from("	", options.encoding)[0]
    ],
    wasQuoting: false,
    wasRowDelimiter: false,
    timchars: [
      Buffer.from(Buffer.from([cr], "utf8").toString(), options.encoding),
      Buffer.from(Buffer.from([nl], "utf8").toString(), options.encoding),
      Buffer.from(Buffer.from([np], "utf8").toString(), options.encoding),
      Buffer.from(Buffer.from([space], "utf8").toString(), options.encoding),
      Buffer.from(Buffer.from([tab], "utf8").toString(), options.encoding)
    ]
  };
};

// node_modules/csv-parse/lib/utils/underscore.js
var underscore = function(str) {
  return str.replace(/([A-Z])/g, function(_, match) {
    return "_" + match.toLowerCase();
  });
};

// node_modules/csv-parse/lib/api/normalize_options.js
var normalize_options = function(opts) {
  const options = {};
  for (const opt in opts) {
    options[underscore(opt)] = opts[opt];
  }
  if (options.encoding === void 0 || options.encoding === true) {
    options.encoding = "utf8";
  } else if (options.encoding === null || options.encoding === false) {
    options.encoding = null;
  } else if (typeof options.encoding !== "string" && options.encoding !== null) {
    throw new CsvError(
      "CSV_INVALID_OPTION_ENCODING",
      [
        "Invalid option encoding:",
        "encoding must be a string or null to return a buffer,",
        `got ${JSON.stringify(options.encoding)}`
      ],
      options
    );
  }
  if (options.bom === void 0 || options.bom === null || options.bom === false) {
    options.bom = false;
  } else if (options.bom !== true) {
    throw new CsvError(
      "CSV_INVALID_OPTION_BOM",
      [
        "Invalid option bom:",
        "bom must be true,",
        `got ${JSON.stringify(options.bom)}`
      ],
      options
    );
  }
  options.cast_function = null;
  if (options.cast === void 0 || options.cast === null || options.cast === false || options.cast === "") {
    options.cast = void 0;
  } else if (typeof options.cast === "function") {
    options.cast_function = options.cast;
    options.cast = true;
  } else if (options.cast !== true) {
    throw new CsvError(
      "CSV_INVALID_OPTION_CAST",
      [
        "Invalid option cast:",
        "cast must be true or a function,",
        `got ${JSON.stringify(options.cast)}`
      ],
      options
    );
  }
  if (options.cast_date === void 0 || options.cast_date === null || options.cast_date === false || options.cast_date === "") {
    options.cast_date = false;
  } else if (options.cast_date === true) {
    options.cast_date = function(value) {
      const date = Date.parse(value);
      return !isNaN(date) ? new Date(date) : value;
    };
  } else if (typeof options.cast_date !== "function") {
    throw new CsvError(
      "CSV_INVALID_OPTION_CAST_DATE",
      [
        "Invalid option cast_date:",
        "cast_date must be true or a function,",
        `got ${JSON.stringify(options.cast_date)}`
      ],
      options
    );
  }
  options.cast_first_line_to_header = null;
  if (options.columns === true) {
    options.cast_first_line_to_header = void 0;
  } else if (typeof options.columns === "function") {
    options.cast_first_line_to_header = options.columns;
    options.columns = true;
  } else if (Array.isArray(options.columns)) {
    options.columns = normalize_columns_array(options.columns);
  } else if (options.columns === void 0 || options.columns === null || options.columns === false) {
    options.columns = false;
  } else {
    throw new CsvError(
      "CSV_INVALID_OPTION_COLUMNS",
      [
        "Invalid option columns:",
        "expect an array, a function or true,",
        `got ${JSON.stringify(options.columns)}`
      ],
      options
    );
  }
  if (options.group_columns_by_name === void 0 || options.group_columns_by_name === null || options.group_columns_by_name === false) {
    options.group_columns_by_name = false;
  } else if (options.group_columns_by_name !== true) {
    throw new CsvError(
      "CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME",
      [
        "Invalid option group_columns_by_name:",
        "expect an boolean,",
        `got ${JSON.stringify(options.group_columns_by_name)}`
      ],
      options
    );
  } else if (options.columns === false) {
    throw new CsvError(
      "CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME",
      [
        "Invalid option group_columns_by_name:",
        "the `columns` mode must be activated."
      ],
      options
    );
  }
  if (options.comment === void 0 || options.comment === null || options.comment === false || options.comment === "") {
    options.comment = null;
  } else {
    if (typeof options.comment === "string") {
      options.comment = Buffer.from(options.comment, options.encoding);
    }
    if (!Buffer.isBuffer(options.comment)) {
      throw new CsvError(
        "CSV_INVALID_OPTION_COMMENT",
        [
          "Invalid option comment:",
          "comment must be a buffer or a string,",
          `got ${JSON.stringify(options.comment)}`
        ],
        options
      );
    }
  }
  if (options.comment_no_infix === void 0 || options.comment_no_infix === null || options.comment_no_infix === false) {
    options.comment_no_infix = false;
  } else if (options.comment_no_infix !== true) {
    throw new CsvError(
      "CSV_INVALID_OPTION_COMMENT",
      [
        "Invalid option comment_no_infix:",
        "value must be a boolean,",
        `got ${JSON.stringify(options.comment_no_infix)}`
      ],
      options
    );
  }
  const delimiter_json = JSON.stringify(options.delimiter);
  if (!Array.isArray(options.delimiter))
    options.delimiter = [options.delimiter];
  if (options.delimiter.length === 0) {
    throw new CsvError(
      "CSV_INVALID_OPTION_DELIMITER",
      [
        "Invalid option delimiter:",
        "delimiter must be a non empty string or buffer or array of string|buffer,",
        `got ${delimiter_json}`
      ],
      options
    );
  }
  options.delimiter = options.delimiter.map(function(delimiter) {
    if (delimiter === void 0 || delimiter === null || delimiter === false) {
      return Buffer.from(",", options.encoding);
    }
    if (typeof delimiter === "string") {
      delimiter = Buffer.from(delimiter, options.encoding);
    }
    if (!Buffer.isBuffer(delimiter) || delimiter.length === 0) {
      throw new CsvError(
        "CSV_INVALID_OPTION_DELIMITER",
        [
          "Invalid option delimiter:",
          "delimiter must be a non empty string or buffer or array of string|buffer,",
          `got ${delimiter_json}`
        ],
        options
      );
    }
    return delimiter;
  });
  if (options.escape === void 0 || options.escape === true) {
    options.escape = Buffer.from('"', options.encoding);
  } else if (typeof options.escape === "string") {
    options.escape = Buffer.from(options.escape, options.encoding);
  } else if (options.escape === null || options.escape === false) {
    options.escape = null;
  }
  if (options.escape !== null) {
    if (!Buffer.isBuffer(options.escape)) {
      throw new Error(
        `Invalid Option: escape must be a buffer, a string or a boolean, got ${JSON.stringify(options.escape)}`
      );
    }
  }
  if (options.from === void 0 || options.from === null) {
    options.from = 1;
  } else {
    if (typeof options.from === "string" && /\d+/.test(options.from)) {
      options.from = parseInt(options.from);
    }
    if (Number.isInteger(options.from)) {
      if (options.from < 0) {
        throw new Error(
          `Invalid Option: from must be a positive integer, got ${JSON.stringify(opts.from)}`
        );
      }
    } else {
      throw new Error(
        `Invalid Option: from must be an integer, got ${JSON.stringify(options.from)}`
      );
    }
  }
  if (options.from_line === void 0 || options.from_line === null) {
    options.from_line = 1;
  } else {
    if (typeof options.from_line === "string" && /\d+/.test(options.from_line)) {
      options.from_line = parseInt(options.from_line);
    }
    if (Number.isInteger(options.from_line)) {
      if (options.from_line <= 0) {
        throw new Error(
          `Invalid Option: from_line must be a positive integer greater than 0, got ${JSON.stringify(opts.from_line)}`
        );
      }
    } else {
      throw new Error(
        `Invalid Option: from_line must be an integer, got ${JSON.stringify(opts.from_line)}`
      );
    }
  }
  if (options.ignore_last_delimiters === void 0 || options.ignore_last_delimiters === null) {
    options.ignore_last_delimiters = false;
  } else if (typeof options.ignore_last_delimiters === "number") {
    options.ignore_last_delimiters = Math.floor(options.ignore_last_delimiters);
    if (options.ignore_last_delimiters === 0) {
      options.ignore_last_delimiters = false;
    }
  } else if (typeof options.ignore_last_delimiters !== "boolean") {
    throw new CsvError(
      "CSV_INVALID_OPTION_IGNORE_LAST_DELIMITERS",
      [
        "Invalid option `ignore_last_delimiters`:",
        "the value must be a boolean value or an integer,",
        `got ${JSON.stringify(options.ignore_last_delimiters)}`
      ],
      options
    );
  }
  if (options.ignore_last_delimiters === true && options.columns === false) {
    throw new CsvError(
      "CSV_IGNORE_LAST_DELIMITERS_REQUIRES_COLUMNS",
      [
        "The option `ignore_last_delimiters`",
        "requires the activation of the `columns` option"
      ],
      options
    );
  }
  if (options.info === void 0 || options.info === null || options.info === false) {
    options.info = false;
  } else if (options.info !== true) {
    throw new Error(
      `Invalid Option: info must be true, got ${JSON.stringify(options.info)}`
    );
  }
  if (options.max_record_size === void 0 || options.max_record_size === null || options.max_record_size === false) {
    options.max_record_size = 0;
  } else if (Number.isInteger(options.max_record_size) && options.max_record_size >= 0) {
  } else if (typeof options.max_record_size === "string" && /\d+/.test(options.max_record_size)) {
    options.max_record_size = parseInt(options.max_record_size);
  } else {
    throw new Error(
      `Invalid Option: max_record_size must be a positive integer, got ${JSON.stringify(options.max_record_size)}`
    );
  }
  if (options.objname === void 0 || options.objname === null || options.objname === false) {
    options.objname = void 0;
  } else if (Buffer.isBuffer(options.objname)) {
    if (options.objname.length === 0) {
      throw new Error(`Invalid Option: objname must be a non empty buffer`);
    }
    if (options.encoding === null) {
    } else {
      options.objname = options.objname.toString(options.encoding);
    }
  } else if (typeof options.objname === "string") {
    if (options.objname.length === 0) {
      throw new Error(`Invalid Option: objname must be a non empty string`);
    }
  } else if (typeof options.objname === "number") {
  } else {
    throw new Error(
      `Invalid Option: objname must be a string or a buffer, got ${options.objname}`
    );
  }
  if (options.objname !== void 0) {
    if (typeof options.objname === "number") {
      if (options.columns !== false) {
        throw Error(
          "Invalid Option: objname index cannot be combined with columns or be defined as a field"
        );
      }
    } else {
      if (options.columns === false) {
        throw Error(
          "Invalid Option: objname field must be combined with columns or be defined as an index"
        );
      }
    }
  }
  if (options.on_record === void 0 || options.on_record === null) {
    options.on_record = void 0;
  } else if (typeof options.on_record !== "function") {
    throw new CsvError(
      "CSV_INVALID_OPTION_ON_RECORD",
      [
        "Invalid option `on_record`:",
        "expect a function,",
        `got ${JSON.stringify(options.on_record)}`
      ],
      options
    );
  }
  if (options.on_skip !== void 0 && options.on_skip !== null && typeof options.on_skip !== "function") {
    throw new Error(
      `Invalid Option: on_skip must be a function, got ${JSON.stringify(options.on_skip)}`
    );
  }
  if (options.quote === null || options.quote === false || options.quote === "") {
    options.quote = null;
  } else {
    if (options.quote === void 0 || options.quote === true) {
      options.quote = Buffer.from('"', options.encoding);
    } else if (typeof options.quote === "string") {
      options.quote = Buffer.from(options.quote, options.encoding);
    }
    if (!Buffer.isBuffer(options.quote)) {
      throw new Error(
        `Invalid Option: quote must be a buffer or a string, got ${JSON.stringify(options.quote)}`
      );
    }
  }
  if (options.raw === void 0 || options.raw === null || options.raw === false) {
    options.raw = false;
  } else if (options.raw !== true) {
    throw new Error(
      `Invalid Option: raw must be true, got ${JSON.stringify(options.raw)}`
    );
  }
  if (options.record_delimiter === void 0) {
    options.record_delimiter = [];
  } else if (typeof options.record_delimiter === "string" || Buffer.isBuffer(options.record_delimiter)) {
    if (options.record_delimiter.length === 0) {
      throw new CsvError(
        "CSV_INVALID_OPTION_RECORD_DELIMITER",
        [
          "Invalid option `record_delimiter`:",
          "value must be a non empty string or buffer,",
          `got ${JSON.stringify(options.record_delimiter)}`
        ],
        options
      );
    }
    options.record_delimiter = [options.record_delimiter];
  } else if (!Array.isArray(options.record_delimiter)) {
    throw new CsvError(
      "CSV_INVALID_OPTION_RECORD_DELIMITER",
      [
        "Invalid option `record_delimiter`:",
        "value must be a string, a buffer or array of string|buffer,",
        `got ${JSON.stringify(options.record_delimiter)}`
      ],
      options
    );
  }
  options.record_delimiter = options.record_delimiter.map(function(rd, i2) {
    if (typeof rd !== "string" && !Buffer.isBuffer(rd)) {
      throw new CsvError(
        "CSV_INVALID_OPTION_RECORD_DELIMITER",
        [
          "Invalid option `record_delimiter`:",
          "value must be a string, a buffer or array of string|buffer",
          `at index ${i2},`,
          `got ${JSON.stringify(rd)}`
        ],
        options
      );
    } else if (rd.length === 0) {
      throw new CsvError(
        "CSV_INVALID_OPTION_RECORD_DELIMITER",
        [
          "Invalid option `record_delimiter`:",
          "value must be a non empty string or buffer",
          `at index ${i2},`,
          `got ${JSON.stringify(rd)}`
        ],
        options
      );
    }
    if (typeof rd === "string") {
      rd = Buffer.from(rd, options.encoding);
    }
    return rd;
  });
  if (typeof options.relax_column_count === "boolean") {
  } else if (options.relax_column_count === void 0 || options.relax_column_count === null) {
    options.relax_column_count = false;
  } else {
    throw new Error(
      `Invalid Option: relax_column_count must be a boolean, got ${JSON.stringify(options.relax_column_count)}`
    );
  }
  if (typeof options.relax_column_count_less === "boolean") {
  } else if (options.relax_column_count_less === void 0 || options.relax_column_count_less === null) {
    options.relax_column_count_less = false;
  } else {
    throw new Error(
      `Invalid Option: relax_column_count_less must be a boolean, got ${JSON.stringify(options.relax_column_count_less)}`
    );
  }
  if (typeof options.relax_column_count_more === "boolean") {
  } else if (options.relax_column_count_more === void 0 || options.relax_column_count_more === null) {
    options.relax_column_count_more = false;
  } else {
    throw new Error(
      `Invalid Option: relax_column_count_more must be a boolean, got ${JSON.stringify(options.relax_column_count_more)}`
    );
  }
  if (typeof options.relax_quotes === "boolean") {
  } else if (options.relax_quotes === void 0 || options.relax_quotes === null) {
    options.relax_quotes = false;
  } else {
    throw new Error(
      `Invalid Option: relax_quotes must be a boolean, got ${JSON.stringify(options.relax_quotes)}`
    );
  }
  if (typeof options.skip_empty_lines === "boolean") {
  } else if (options.skip_empty_lines === void 0 || options.skip_empty_lines === null) {
    options.skip_empty_lines = false;
  } else {
    throw new Error(
      `Invalid Option: skip_empty_lines must be a boolean, got ${JSON.stringify(options.skip_empty_lines)}`
    );
  }
  if (typeof options.skip_records_with_empty_values === "boolean") {
  } else if (options.skip_records_with_empty_values === void 0 || options.skip_records_with_empty_values === null) {
    options.skip_records_with_empty_values = false;
  } else {
    throw new Error(
      `Invalid Option: skip_records_with_empty_values must be a boolean, got ${JSON.stringify(options.skip_records_with_empty_values)}`
    );
  }
  if (typeof options.skip_records_with_error === "boolean") {
  } else if (options.skip_records_with_error === void 0 || options.skip_records_with_error === null) {
    options.skip_records_with_error = false;
  } else {
    throw new Error(
      `Invalid Option: skip_records_with_error must be a boolean, got ${JSON.stringify(options.skip_records_with_error)}`
    );
  }
  if (options.rtrim === void 0 || options.rtrim === null || options.rtrim === false) {
    options.rtrim = false;
  } else if (options.rtrim !== true) {
    throw new Error(
      `Invalid Option: rtrim must be a boolean, got ${JSON.stringify(options.rtrim)}`
    );
  }
  if (options.ltrim === void 0 || options.ltrim === null || options.ltrim === false) {
    options.ltrim = false;
  } else if (options.ltrim !== true) {
    throw new Error(
      `Invalid Option: ltrim must be a boolean, got ${JSON.stringify(options.ltrim)}`
    );
  }
  if (options.trim === void 0 || options.trim === null || options.trim === false) {
    options.trim = false;
  } else if (options.trim !== true) {
    throw new Error(
      `Invalid Option: trim must be a boolean, got ${JSON.stringify(options.trim)}`
    );
  }
  if (options.trim === true && opts.ltrim !== false) {
    options.ltrim = true;
  } else if (options.ltrim !== true) {
    options.ltrim = false;
  }
  if (options.trim === true && opts.rtrim !== false) {
    options.rtrim = true;
  } else if (options.rtrim !== true) {
    options.rtrim = false;
  }
  if (options.to === void 0 || options.to === null) {
    options.to = -1;
  } else {
    if (typeof options.to === "string" && /\d+/.test(options.to)) {
      options.to = parseInt(options.to);
    }
    if (Number.isInteger(options.to)) {
      if (options.to <= 0) {
        throw new Error(
          `Invalid Option: to must be a positive integer greater than 0, got ${JSON.stringify(opts.to)}`
        );
      }
    } else {
      throw new Error(
        `Invalid Option: to must be an integer, got ${JSON.stringify(opts.to)}`
      );
    }
  }
  if (options.to_line === void 0 || options.to_line === null) {
    options.to_line = -1;
  } else {
    if (typeof options.to_line === "string" && /\d+/.test(options.to_line)) {
      options.to_line = parseInt(options.to_line);
    }
    if (Number.isInteger(options.to_line)) {
      if (options.to_line <= 0) {
        throw new Error(
          `Invalid Option: to_line must be a positive integer greater than 0, got ${JSON.stringify(opts.to_line)}`
        );
      }
    } else {
      throw new Error(
        `Invalid Option: to_line must be an integer, got ${JSON.stringify(opts.to_line)}`
      );
    }
  }
  return options;
};

// node_modules/csv-parse/lib/api/index.js
var isRecordEmpty = function(record) {
  return record.every(
    (field) => field == null || field.toString && field.toString().trim() === ""
  );
};
var cr2 = 13;
var nl2 = 10;
var boms = {
  // Note, the following are equals:
  // Buffer.from("\ufeff")
  // Buffer.from([239, 187, 191])
  // Buffer.from('EFBBBF', 'hex')
  utf8: Buffer.from([239, 187, 191]),
  // Note, the following are equals:
  // Buffer.from "\ufeff", 'utf16le
  // Buffer.from([255, 254])
  utf16le: Buffer.from([255, 254])
};
var transform = function(original_options = {}) {
  const info = {
    bytes: 0,
    comment_lines: 0,
    empty_lines: 0,
    invalid_field_length: 0,
    lines: 1,
    records: 0
  };
  const options = normalize_options(original_options);
  return {
    info,
    original_options,
    options,
    state: init_state(options),
    __needMoreData: function(i2, bufLen, end) {
      if (end) return false;
      const { encoding, escape, quote } = this.options;
      const { quoting, needMoreDataSize, recordDelimiterMaxLength } = this.state;
      const numOfCharLeft = bufLen - i2 - 1;
      const requiredLength = Math.max(
        needMoreDataSize,
        // Skip if the remaining buffer smaller than record delimiter
        // If "record_delimiter" is yet to be discovered:
        // 1. It is equals to `[]` and "recordDelimiterMaxLength" equals `0`
        // 2. We set the length to windows line ending in the current encoding
        // Note, that encoding is known from user or bom discovery at that point
        // recordDelimiterMaxLength,
        recordDelimiterMaxLength === 0 ? Buffer.from("\r\n", encoding).length : recordDelimiterMaxLength,
        // Skip if remaining buffer can be an escaped quote
        quoting ? (escape === null ? 0 : escape.length) + quote.length : 0,
        // Skip if remaining buffer can be record delimiter following the closing quote
        quoting ? quote.length + recordDelimiterMaxLength : 0
      );
      return numOfCharLeft < requiredLength;
    },
    // Central parser implementation
    parse: function(nextBuf, end, push, close) {
      const {
        bom,
        comment_no_infix,
        encoding,
        from_line,
        ltrim,
        max_record_size,
        raw,
        relax_quotes,
        rtrim,
        skip_empty_lines,
        to,
        to_line
      } = this.options;
      let { comment, escape, quote, record_delimiter } = this.options;
      const { bomSkipped, previousBuf, rawBuffer, escapeIsQuote } = this.state;
      let buf;
      if (previousBuf === void 0) {
        if (nextBuf === void 0) {
          close();
          return;
        } else {
          buf = nextBuf;
        }
      } else if (previousBuf !== void 0 && nextBuf === void 0) {
        buf = previousBuf;
      } else {
        buf = Buffer.concat([previousBuf, nextBuf]);
      }
      if (bomSkipped === false) {
        if (bom === false) {
          this.state.bomSkipped = true;
        } else if (buf.length < 3) {
          if (end === false) {
            this.state.previousBuf = buf;
            return;
          }
        } else {
          for (const encoding2 in boms) {
            if (boms[encoding2].compare(buf, 0, boms[encoding2].length) === 0) {
              const bomLength = boms[encoding2].length;
              this.state.bufBytesStart += bomLength;
              buf = buf.slice(bomLength);
              this.options = normalize_options({
                ...this.original_options,
                encoding: encoding2
              });
              ({ comment, escape, quote } = this.options);
              break;
            }
          }
          this.state.bomSkipped = true;
        }
      }
      const bufLen = buf.length;
      let pos;
      for (pos = 0; pos < bufLen; pos++) {
        if (this.__needMoreData(pos, bufLen, end)) {
          break;
        }
        if (this.state.wasRowDelimiter === true) {
          this.info.lines++;
          this.state.wasRowDelimiter = false;
        }
        if (to_line !== -1 && this.info.lines > to_line) {
          this.state.stop = true;
          close();
          return;
        }
        if (this.state.quoting === false && record_delimiter.length === 0) {
          const record_delimiterCount = this.__autoDiscoverRecordDelimiter(
            buf,
            pos
          );
          if (record_delimiterCount) {
            record_delimiter = this.options.record_delimiter;
          }
        }
        const chr = buf[pos];
        if (raw === true) {
          rawBuffer.append(chr);
        }
        if ((chr === cr2 || chr === nl2) && this.state.wasRowDelimiter === false) {
          this.state.wasRowDelimiter = true;
        }
        if (this.state.escaping === true) {
          this.state.escaping = false;
        } else {
          if (escape !== null && this.state.quoting === true && this.__isEscape(buf, pos, chr) && pos + escape.length < bufLen) {
            if (escapeIsQuote) {
              if (this.__isQuote(buf, pos + escape.length)) {
                this.state.escaping = true;
                pos += escape.length - 1;
                continue;
              }
            } else {
              this.state.escaping = true;
              pos += escape.length - 1;
              continue;
            }
          }
          if (this.state.commenting === false && this.__isQuote(buf, pos)) {
            if (this.state.quoting === true) {
              const nextChr = buf[pos + quote.length];
              const isNextChrTrimable = rtrim && this.__isCharTrimable(buf, pos + quote.length);
              const isNextChrComment = comment !== null && this.__compareBytes(comment, buf, pos + quote.length, nextChr);
              const isNextChrDelimiter = this.__isDelimiter(
                buf,
                pos + quote.length,
                nextChr
              );
              const isNextChrRecordDelimiter = record_delimiter.length === 0 ? this.__autoDiscoverRecordDelimiter(buf, pos + quote.length) : this.__isRecordDelimiter(nextChr, buf, pos + quote.length);
              if (escape !== null && this.__isEscape(buf, pos, chr) && this.__isQuote(buf, pos + escape.length)) {
                pos += escape.length - 1;
              } else if (!nextChr || isNextChrDelimiter || isNextChrRecordDelimiter || isNextChrComment || isNextChrTrimable) {
                this.state.quoting = false;
                this.state.wasQuoting = true;
                pos += quote.length - 1;
                continue;
              } else if (relax_quotes === false) {
                const err = this.__error(
                  new CsvError(
                    "CSV_INVALID_CLOSING_QUOTE",
                    [
                      "Invalid Closing Quote:",
                      `got "${String.fromCharCode(nextChr)}"`,
                      `at line ${this.info.lines}`,
                      "instead of delimiter, record delimiter, trimable character",
                      "(if activated) or comment"
                    ],
                    this.options,
                    this.__infoField()
                  )
                );
                if (err !== void 0) return err;
              } else {
                this.state.quoting = false;
                this.state.wasQuoting = true;
                this.state.field.prepend(quote);
                pos += quote.length - 1;
              }
            } else {
              if (this.state.field.length !== 0) {
                if (relax_quotes === false) {
                  const info2 = this.__infoField();
                  const bom2 = Object.keys(boms).map(
                    (b) => boms[b].equals(this.state.field.toString()) ? b : false
                  ).filter(Boolean)[0];
                  const err = this.__error(
                    new CsvError(
                      "INVALID_OPENING_QUOTE",
                      [
                        "Invalid Opening Quote:",
                        `a quote is found on field ${JSON.stringify(info2.column)} at line ${info2.lines}, value is ${JSON.stringify(this.state.field.toString(encoding))}`,
                        bom2 ? `(${bom2} bom)` : void 0
                      ],
                      this.options,
                      info2,
                      {
                        field: this.state.field
                      }
                    )
                  );
                  if (err !== void 0) return err;
                }
              } else {
                this.state.quoting = true;
                pos += quote.length - 1;
                continue;
              }
            }
          }
          if (this.state.quoting === false) {
            const recordDelimiterLength = this.__isRecordDelimiter(
              chr,
              buf,
              pos
            );
            if (recordDelimiterLength !== 0) {
              const skipCommentLine = this.state.commenting && this.state.wasQuoting === false && this.state.record.length === 0 && this.state.field.length === 0;
              if (skipCommentLine) {
                this.info.comment_lines++;
              } else {
                if (this.state.enabled === false && this.info.lines + (this.state.wasRowDelimiter === true ? 1 : 0) >= from_line) {
                  this.state.enabled = true;
                  this.__resetField();
                  this.__resetRecord();
                  pos += recordDelimiterLength - 1;
                  continue;
                }
                if (skip_empty_lines === true && this.state.wasQuoting === false && this.state.record.length === 0 && this.state.field.length === 0) {
                  this.info.empty_lines++;
                  pos += recordDelimiterLength - 1;
                  continue;
                }
                this.info.bytes = this.state.bufBytesStart + pos;
                const errField = this.__onField();
                if (errField !== void 0) return errField;
                this.info.bytes = this.state.bufBytesStart + pos + recordDelimiterLength;
                const errRecord = this.__onRecord(push);
                if (errRecord !== void 0) return errRecord;
                if (to !== -1 && this.info.records >= to) {
                  this.state.stop = true;
                  close();
                  return;
                }
              }
              this.state.commenting = false;
              pos += recordDelimiterLength - 1;
              continue;
            }
            if (this.state.commenting) {
              continue;
            }
            if (comment !== null && (comment_no_infix === false || this.state.record.length === 0 && this.state.field.length === 0)) {
              const commentCount = this.__compareBytes(comment, buf, pos, chr);
              if (commentCount !== 0) {
                this.state.commenting = true;
                continue;
              }
            }
            const delimiterLength = this.__isDelimiter(buf, pos, chr);
            if (delimiterLength !== 0) {
              this.info.bytes = this.state.bufBytesStart + pos;
              const errField = this.__onField();
              if (errField !== void 0) return errField;
              pos += delimiterLength - 1;
              continue;
            }
          }
        }
        if (this.state.commenting === false) {
          if (max_record_size !== 0 && this.state.record_length + this.state.field.length > max_record_size) {
            return this.__error(
              new CsvError(
                "CSV_MAX_RECORD_SIZE",
                [
                  "Max Record Size:",
                  "record exceed the maximum number of tolerated bytes",
                  `of ${max_record_size}`,
                  `at line ${this.info.lines}`
                ],
                this.options,
                this.__infoField()
              )
            );
          }
        }
        const lappend = ltrim === false || this.state.quoting === true || this.state.field.length !== 0 || !this.__isCharTrimable(buf, pos);
        const rappend = rtrim === false || this.state.wasQuoting === false;
        if (lappend === true && rappend === true) {
          this.state.field.append(chr);
        } else if (rtrim === true && !this.__isCharTrimable(buf, pos)) {
          return this.__error(
            new CsvError(
              "CSV_NON_TRIMABLE_CHAR_AFTER_CLOSING_QUOTE",
              [
                "Invalid Closing Quote:",
                "found non trimable byte after quote",
                `at line ${this.info.lines}`
              ],
              this.options,
              this.__infoField()
            )
          );
        } else {
          if (lappend === false) {
            pos += this.__isCharTrimable(buf, pos) - 1;
          }
          continue;
        }
      }
      if (end === true) {
        if (this.state.quoting === true) {
          const err = this.__error(
            new CsvError(
              "CSV_QUOTE_NOT_CLOSED",
              [
                "Quote Not Closed:",
                `the parsing is finished with an opening quote at line ${this.info.lines}`
              ],
              this.options,
              this.__infoField()
            )
          );
          if (err !== void 0) return err;
        } else {
          if (this.state.wasQuoting === true || this.state.record.length !== 0 || this.state.field.length !== 0) {
            this.info.bytes = this.state.bufBytesStart + pos;
            const errField = this.__onField();
            if (errField !== void 0) return errField;
            const errRecord = this.__onRecord(push);
            if (errRecord !== void 0) return errRecord;
          } else if (this.state.wasRowDelimiter === true) {
            this.info.empty_lines++;
          } else if (this.state.commenting === true) {
            this.info.comment_lines++;
          }
        }
      } else {
        this.state.bufBytesStart += pos;
        this.state.previousBuf = buf.slice(pos);
      }
      if (this.state.wasRowDelimiter === true) {
        this.info.lines++;
        this.state.wasRowDelimiter = false;
      }
    },
    __onRecord: function(push) {
      const {
        columns,
        group_columns_by_name,
        encoding,
        info: info2,
        from,
        relax_column_count,
        relax_column_count_less,
        relax_column_count_more,
        raw,
        skip_records_with_empty_values
      } = this.options;
      const { enabled, record } = this.state;
      if (enabled === false) {
        return this.__resetRecord();
      }
      const recordLength = record.length;
      if (columns === true) {
        if (skip_records_with_empty_values === true && isRecordEmpty(record)) {
          this.__resetRecord();
          return;
        }
        return this.__firstLineToColumns(record);
      }
      if (columns === false && this.info.records === 0) {
        this.state.expectedRecordLength = recordLength;
      }
      if (recordLength !== this.state.expectedRecordLength) {
        const err = columns === false ? new CsvError(
          "CSV_RECORD_INCONSISTENT_FIELDS_LENGTH",
          [
            "Invalid Record Length:",
            `expect ${this.state.expectedRecordLength},`,
            `got ${recordLength} on line ${this.info.lines}`
          ],
          this.options,
          this.__infoField(),
          {
            record
          }
        ) : new CsvError(
          "CSV_RECORD_INCONSISTENT_COLUMNS",
          [
            "Invalid Record Length:",
            `columns length is ${columns.length},`,
            // rename columns
            `got ${recordLength} on line ${this.info.lines}`
          ],
          this.options,
          this.__infoField(),
          {
            record
          }
        );
        if (relax_column_count === true || relax_column_count_less === true && recordLength < this.state.expectedRecordLength || relax_column_count_more === true && recordLength > this.state.expectedRecordLength) {
          this.info.invalid_field_length++;
          this.state.error = err;
        } else {
          const finalErr = this.__error(err);
          if (finalErr) return finalErr;
        }
      }
      if (skip_records_with_empty_values === true && isRecordEmpty(record)) {
        this.__resetRecord();
        return;
      }
      if (this.state.recordHasError === true) {
        this.__resetRecord();
        this.state.recordHasError = false;
        return;
      }
      this.info.records++;
      if (from === 1 || this.info.records >= from) {
        const { objname } = this.options;
        if (columns !== false) {
          const obj = {};
          for (let i2 = 0, l = record.length; i2 < l; i2++) {
            if (columns[i2] === void 0 || columns[i2].disabled) continue;
            if (group_columns_by_name === true && obj[columns[i2].name] !== void 0) {
              if (Array.isArray(obj[columns[i2].name])) {
                obj[columns[i2].name] = obj[columns[i2].name].concat(record[i2]);
              } else {
                obj[columns[i2].name] = [obj[columns[i2].name], record[i2]];
              }
            } else {
              obj[columns[i2].name] = record[i2];
            }
          }
          if (raw === true || info2 === true) {
            const extRecord = Object.assign(
              { record: obj },
              raw === true ? { raw: this.state.rawBuffer.toString(encoding) } : {},
              info2 === true ? { info: this.__infoRecord() } : {}
            );
            const err = this.__push(
              objname === void 0 ? extRecord : [obj[objname], extRecord],
              push
            );
            if (err) {
              return err;
            }
          } else {
            const err = this.__push(
              objname === void 0 ? obj : [obj[objname], obj],
              push
            );
            if (err) {
              return err;
            }
          }
        } else {
          if (raw === true || info2 === true) {
            const extRecord = Object.assign(
              { record },
              raw === true ? { raw: this.state.rawBuffer.toString(encoding) } : {},
              info2 === true ? { info: this.__infoRecord() } : {}
            );
            const err = this.__push(
              objname === void 0 ? extRecord : [record[objname], extRecord],
              push
            );
            if (err) {
              return err;
            }
          } else {
            const err = this.__push(
              objname === void 0 ? record : [record[objname], record],
              push
            );
            if (err) {
              return err;
            }
          }
        }
      }
      this.__resetRecord();
    },
    __firstLineToColumns: function(record) {
      const { firstLineToHeaders } = this.state;
      try {
        const headers = firstLineToHeaders === void 0 ? record : firstLineToHeaders.call(null, record);
        if (!Array.isArray(headers)) {
          return this.__error(
            new CsvError(
              "CSV_INVALID_COLUMN_MAPPING",
              [
                "Invalid Column Mapping:",
                "expect an array from column function,",
                `got ${JSON.stringify(headers)}`
              ],
              this.options,
              this.__infoField(),
              {
                headers
              }
            )
          );
        }
        const normalizedHeaders = normalize_columns_array(headers);
        this.state.expectedRecordLength = normalizedHeaders.length;
        this.options.columns = normalizedHeaders;
        this.__resetRecord();
        return;
      } catch (err) {
        return err;
      }
    },
    __resetRecord: function() {
      if (this.options.raw === true) {
        this.state.rawBuffer.reset();
      }
      this.state.error = void 0;
      this.state.record = [];
      this.state.record_length = 0;
    },
    __onField: function() {
      const { cast, encoding, rtrim, max_record_size } = this.options;
      const { enabled, wasQuoting } = this.state;
      if (enabled === false) {
        return this.__resetField();
      }
      let field = this.state.field.toString(encoding);
      if (rtrim === true && wasQuoting === false) {
        field = field.trimRight();
      }
      if (cast === true) {
        const [err, f3] = this.__cast(field);
        if (err !== void 0) return err;
        field = f3;
      }
      this.state.record.push(field);
      if (max_record_size !== 0 && typeof field === "string") {
        this.state.record_length += field.length;
      }
      this.__resetField();
    },
    __resetField: function() {
      this.state.field.reset();
      this.state.wasQuoting = false;
    },
    __push: function(record, push) {
      const { on_record } = this.options;
      if (on_record !== void 0) {
        const info2 = this.__infoRecord();
        try {
          record = on_record.call(null, record, info2);
        } catch (err) {
          return err;
        }
        if (record === void 0 || record === null) {
          return;
        }
      }
      push(record);
    },
    // Return a tuple with the error and the casted value
    __cast: function(field) {
      const { columns, relax_column_count } = this.options;
      const isColumns = Array.isArray(columns);
      if (isColumns === true && relax_column_count && this.options.columns.length <= this.state.record.length) {
        return [void 0, void 0];
      }
      if (this.state.castField !== null) {
        try {
          const info2 = this.__infoField();
          return [void 0, this.state.castField.call(null, field, info2)];
        } catch (err) {
          return [err];
        }
      }
      if (this.__isFloat(field)) {
        return [void 0, parseFloat(field)];
      } else if (this.options.cast_date !== false) {
        const info2 = this.__infoField();
        return [void 0, this.options.cast_date.call(null, field, info2)];
      }
      return [void 0, field];
    },
    // Helper to test if a character is a space or a line delimiter
    __isCharTrimable: function(buf, pos) {
      const isTrim = (buf2, pos2) => {
        const { timchars } = this.state;
        loop1: for (let i2 = 0; i2 < timchars.length; i2++) {
          const timchar = timchars[i2];
          for (let j = 0; j < timchar.length; j++) {
            if (timchar[j] !== buf2[pos2 + j]) continue loop1;
          }
          return timchar.length;
        }
        return 0;
      };
      return isTrim(buf, pos);
    },
    // Keep it in case we implement the `cast_int` option
    // __isInt(value){
    //   // return Number.isInteger(parseInt(value))
    //   // return !isNaN( parseInt( obj ) );
    //   return /^(\-|\+)?[1-9][0-9]*$/.test(value)
    // }
    __isFloat: function(value) {
      return value - parseFloat(value) + 1 >= 0;
    },
    __compareBytes: function(sourceBuf, targetBuf, targetPos, firstByte) {
      if (sourceBuf[0] !== firstByte) return 0;
      const sourceLength = sourceBuf.length;
      for (let i2 = 1; i2 < sourceLength; i2++) {
        if (sourceBuf[i2] !== targetBuf[targetPos + i2]) return 0;
      }
      return sourceLength;
    },
    __isDelimiter: function(buf, pos, chr) {
      const { delimiter, ignore_last_delimiters } = this.options;
      if (ignore_last_delimiters === true && this.state.record.length === this.options.columns.length - 1) {
        return 0;
      } else if (ignore_last_delimiters !== false && typeof ignore_last_delimiters === "number" && this.state.record.length === ignore_last_delimiters - 1) {
        return 0;
      }
      loop1: for (let i2 = 0; i2 < delimiter.length; i2++) {
        const del = delimiter[i2];
        if (del[0] === chr) {
          for (let j = 1; j < del.length; j++) {
            if (del[j] !== buf[pos + j]) continue loop1;
          }
          return del.length;
        }
      }
      return 0;
    },
    __isRecordDelimiter: function(chr, buf, pos) {
      const { record_delimiter } = this.options;
      const recordDelimiterLength = record_delimiter.length;
      loop1: for (let i2 = 0; i2 < recordDelimiterLength; i2++) {
        const rd = record_delimiter[i2];
        const rdLength = rd.length;
        if (rd[0] !== chr) {
          continue;
        }
        for (let j = 1; j < rdLength; j++) {
          if (rd[j] !== buf[pos + j]) {
            continue loop1;
          }
        }
        return rd.length;
      }
      return 0;
    },
    __isEscape: function(buf, pos, chr) {
      const { escape } = this.options;
      if (escape === null) return false;
      const l = escape.length;
      if (escape[0] === chr) {
        for (let i2 = 0; i2 < l; i2++) {
          if (escape[i2] !== buf[pos + i2]) {
            return false;
          }
        }
        return true;
      }
      return false;
    },
    __isQuote: function(buf, pos) {
      const { quote } = this.options;
      if (quote === null) return false;
      const l = quote.length;
      for (let i2 = 0; i2 < l; i2++) {
        if (quote[i2] !== buf[pos + i2]) {
          return false;
        }
      }
      return true;
    },
    __autoDiscoverRecordDelimiter: function(buf, pos) {
      const { encoding } = this.options;
      const rds = [
        // Important, the windows line ending must be before mac os 9
        Buffer.from("\r\n", encoding),
        Buffer.from("\n", encoding),
        Buffer.from("\r", encoding)
      ];
      loop: for (let i2 = 0; i2 < rds.length; i2++) {
        const l = rds[i2].length;
        for (let j = 0; j < l; j++) {
          if (rds[i2][j] !== buf[pos + j]) {
            continue loop;
          }
        }
        this.options.record_delimiter.push(rds[i2]);
        this.state.recordDelimiterMaxLength = rds[i2].length;
        return rds[i2].length;
      }
      return 0;
    },
    __error: function(msg) {
      const { encoding, raw, skip_records_with_error } = this.options;
      const err = typeof msg === "string" ? new Error(msg) : msg;
      if (skip_records_with_error) {
        this.state.recordHasError = true;
        if (this.options.on_skip !== void 0) {
          this.options.on_skip(
            err,
            raw ? this.state.rawBuffer.toString(encoding) : void 0
          );
        }
        return void 0;
      } else {
        return err;
      }
    },
    __infoDataSet: function() {
      return {
        ...this.info,
        columns: this.options.columns
      };
    },
    __infoRecord: function() {
      const { columns, raw, encoding } = this.options;
      return {
        ...this.__infoDataSet(),
        error: this.state.error,
        header: columns === true,
        index: this.state.record.length,
        raw: raw ? this.state.rawBuffer.toString(encoding) : void 0
      };
    },
    __infoField: function() {
      const { columns } = this.options;
      const isColumns = Array.isArray(columns);
      return {
        ...this.__infoRecord(),
        column: isColumns === true ? columns.length > this.state.record.length ? columns[this.state.record.length].name : null : this.state.record.length,
        quoting: this.state.wasQuoting
      };
    }
  };
};

// node_modules/csv-parse/lib/sync.js
var parse = function(data, opts = {}) {
  if (typeof data === "string") {
    data = Buffer.from(data);
  }
  const records = opts && opts.objname ? {} : [];
  const parser = transform(opts);
  const push = (record) => {
    if (parser.options.objname === void 0) records.push(record);
    else {
      records[record[0]] = record[1];
    }
  };
  const close = () => {
  };
  const err1 = parser.parse(data, false, push, close);
  if (err1 !== void 0) throw err1;
  const err2 = parser.parse(void 0, true, push, close);
  if (err2 !== void 0) throw err2;
  return records;
};

// src/lib/gtfsStatic.ts
var import_api2 = require("@raycast/api");
var CACHE_DIR = import_path.default.join(import_api2.environment.supportPath, "gtfs-cache");
var CACHE_TTL = 12 * 60 * 60 * 1e3;
var GTFS_FEED_URL = "https://catabus.com/wp-content/uploads/google_transit.zip";
async function ensureCacheDir() {
  try {
    await import_promises.default.mkdir(CACHE_DIR, { recursive: true });
  } catch (error) {
    console.error("Failed to create cache directory:", error);
  }
}
async function getCachedData() {
  try {
    const cacheFile = import_path.default.join(CACHE_DIR, "static-gtfs.json");
    const cacheExists = await import_promises.default.access(cacheFile).then(() => true).catch(() => false);
    if (!cacheExists) {
      return null;
    }
    const cacheContent = await import_promises.default.readFile(cacheFile, "utf-8");
    const cache = JSON.parse(cacheContent);
    if (Date.now() - cache.timestamp > cache.ttl) {
      console.log("GTFS cache expired");
      return null;
    }
    const data = cache.data;
    return {
      stops: new Map(Object.entries(data.stops)),
      routes: new Map(Object.entries(data.routes)),
      trips: new Map(Object.entries(data.trips)),
      stopTimes: data.stopTimes,
      calendarDates: data.calendarDates,
      lastUpdated: new Date(data.lastUpdated)
    };
  } catch (error) {
    console.error("Failed to read cache:", error);
    return null;
  }
}
async function saveToCache(data) {
  try {
    await ensureCacheDir();
    const serializable = {
      stops: Object.fromEntries(data.stops),
      routes: Object.fromEntries(data.routes),
      trips: Object.fromEntries(data.trips),
      stopTimes: data.stopTimes,
      calendarDates: data.calendarDates,
      lastUpdated: data.lastUpdated
    };
    const cache = {
      data: serializable,
      timestamp: Date.now(),
      ttl: CACHE_TTL
    };
    const cacheFile = import_path.default.join(CACHE_DIR, "static-gtfs.json");
    await import_promises.default.writeFile(cacheFile, JSON.stringify(cache));
    console.log("GTFS data cached successfully");
  } catch (error) {
    console.error("Failed to save cache:", error);
  }
}
async function downloadAndExtractGTFS() {
  const tempDir = import_path.default.join(import_os.default.tmpdir(), `gtfs-${Date.now()}`);
  await import_promises.default.mkdir(tempDir, { recursive: true });
  try {
    console.log("Downloading GTFS feed from:", GTFS_FEED_URL);
    const response = await fetch(GTFS_FEED_URL, {
      signal: AbortSignal.timeout(3e4)
      // 30 second timeout
    });
    if (!response.ok) {
      throw new Error(`Failed to download GTFS feed: ${response.statusText}`);
    }
    const buffer = await response.arrayBuffer();
    const zipBuffer = Buffer.from(buffer);
    const zip = new import_adm_zip.default(zipBuffer);
    zip.extractAllTo(tempDir, true);
    console.log("GTFS feed extracted to:", tempDir);
    return tempDir;
  } catch (error) {
    await import_promises.default.rm(tempDir, { recursive: true, force: true }).catch(() => {
    });
    throw error;
  }
}
async function parseCSVFile(filePath, required = false) {
  try {
    const content = await import_promises.default.readFile(filePath, "utf-8");
    return parse(content, {
      columns: true,
      skip_empty_lines: true,
      trim: true,
      cast: (value, context) => {
        if (context.header) return value;
        if (value === "") return void 0;
        const num = Number(value);
        if (!isNaN(num) && value.match(/^-?\d+(\.\d+)?$/)) {
          return num;
        }
        return value;
      }
    });
  } catch (error) {
    if (required || error.code !== "ENOENT") {
      console.error(`Failed to parse ${filePath}:`, error);
    }
    return [];
  }
}
async function loadStaticGTFS(forceRefresh = false) {
  if (!forceRefresh) {
    const cached = await getCachedData();
    if (cached) {
      console.log("Using cached GTFS data");
      return cached;
    }
  }
  console.log("Loading fresh GTFS data");
  let extractDir = null;
  try {
    extractDir = await downloadAndExtractGTFS();
    const [stops, routes, trips, stopTimes, calendarDates] = await Promise.all([
      parseCSVFile(import_path.default.join(extractDir, "stops.txt"), true),
      parseCSVFile(import_path.default.join(extractDir, "routes.txt"), true),
      parseCSVFile(import_path.default.join(extractDir, "trips.txt"), true),
      parseCSVFile(import_path.default.join(extractDir, "stop_times.txt"), true),
      parseCSVFile(import_path.default.join(extractDir, "calendar_dates.txt"), false)
    ]);
    console.log(`Loaded: ${stops.length} stops, ${routes.length} routes, ${trips.length} trips`);
    const stopsMap = /* @__PURE__ */ new Map();
    stops.forEach((stop) => {
      stopsMap.set(stop.stop_id, stop);
    });
    const routesMap = /* @__PURE__ */ new Map();
    routes.forEach((route) => {
      routesMap.set(route.route_id, route);
    });
    const tripsMap = /* @__PURE__ */ new Map();
    trips.forEach((trip) => {
      tripsMap.set(trip.trip_id, trip);
    });
    const data = {
      stops: stopsMap,
      routes: routesMap,
      trips: tripsMap,
      stopTimes,
      calendarDates,
      lastUpdated: /* @__PURE__ */ new Date()
    };
    await saveToCache(data);
    return data;
  } finally {
    if (extractDir) {
      await import_promises.default.rm(extractDir, { recursive: true, force: true }).catch(() => {
      });
    }
  }
}

// src/lib/realtime.ts
var import_gtfs_rt_bindings = __toESM(require_gtfs_rt_bindings());
var import_api4 = require("@raycast/api");

// src/lib/utils.ts
var import_dayjs = __toESM(require_dayjs_min());
var import_relativeTime = __toESM(require_relativeTime());
var import_customParseFormat = __toESM(require_customParseFormat());
var import_utc = __toESM(require_utc());
var import_timezone = __toESM(require_timezone());
var import_api3 = require("@raycast/api");
import_dayjs.default.extend(import_relativeTime.default);
import_dayjs.default.extend(import_customParseFormat.default);
import_dayjs.default.extend(import_utc.default);
import_dayjs.default.extend(import_timezone.default);
function formatRelativeTime(time) {
  return (0, import_dayjs.default)(time).fromNow();
}
function formatDelay(delaySeconds) {
  if (delaySeconds === void 0 || delaySeconds === 0) {
    return "on time";
  }
  const delayMinutes = Math.abs(Math.round(delaySeconds / 60));
  const delayText = delayMinutes === 1 ? "1 min" : `${delayMinutes} min`;
  if (delaySeconds > 0) {
    return `${delayText} late`;
  } else {
    return `${delayText} early`;
  }
}
function getDelayColor(delaySeconds) {
  if (delaySeconds === void 0) {
    return import_api3.Color.SecondaryText;
  }
  const delayMinutes = delaySeconds / 60;
  if (delayMinutes <= -1) {
    return import_api3.Color.Blue;
  } else if (delayMinutes <= 2) {
    return import_api3.Color.Green;
  } else if (delayMinutes <= 5) {
    return import_api3.Color.Yellow;
  } else {
    return import_api3.Color.Red;
  }
}
function isDataStale(timestamp, thresholdSeconds = 60) {
  if (!timestamp) return true;
  const now = Math.floor(Date.now() / 1e3);
  return now - timestamp > thresholdSeconds;
}
function formatOccupancy(occupancyStatus) {
  switch (occupancyStatus) {
    case 0:
      return "Empty";
    case 1:
      return "Many seats";
    case 2:
      return "Few seats";
    case 3:
      return "Standing room";
    case 4:
      return "Crushed standing";
    case 5:
      return "Full";
    case 6:
      return "Not accepting";
    default:
      return "Unknown";
  }
}
function getOccupancyIcon(occupancyStatus) {
  switch (occupancyStatus) {
    case 0:
    case 1:
      return "\u{1F7E2}";
    // Empty or many seats
    case 2:
    case 3:
      return "\u{1F7E1}";
    // Few seats or standing room
    case 4:
    case 5:
    case 6:
      return "\u{1F534}";
    // Crushed, full, or not accepting
    default:
      return "\u26AA";
  }
}
var ROUTE_COLORS = {
  "AC": "#228B22",
  // Forest Green
  "NE": "#66CDAA",
  // Medium Aquamarine
  "UP": "#40E0D0",
  // Turquoise
  "CC": "#0000CD",
  // Medium Blue
  "NV": "#696969",
  // Dim Gray
  "V": "#FF8C00",
  // Dark Orange
  "H": "#9370DB",
  // Medium Purple
  "R": "#FF69B4",
  // Hot Pink
  "VE": "#FFA07A",
  // Light Salmon
  "HU": "#DA70D6",
  // Orchid
  "RC": "#FF1493",
  // Deep Pink
  "W": "#FFFF00",
  // Bright Yellow
  "N": "#1E90FF",
  // Dodger Blue
  "RP": "#FF4500",
  // Orange Red
  "WE": "#800080",
  // Purple
  "BL": "#0000FF",
  // Blue
  "RL": "#FF0000",
  // Red
  "WL": "#FFFFFF",
  // White (with black border)
  // Gameday routes use same colors as regular
  "BL Gameday": "#0000FF",
  "RL Gameday": "#FF0000",
  "WL Gameday": "#FFFFFF",
  "H Gameday": "#9370DB",
  // Default for unknown routes
  "DEFAULT": "#808080"
  // Gray
};
function getRouteColor(routeShortName) {
  return ROUTE_COLORS[routeShortName] || ROUTE_COLORS["DEFAULT"];
}

// src/lib/realtime.ts
var VEHICLE_POSITIONS_URL = "https://catabus.com/gtfsrt/VehiclePosition.pb";
var TRIP_UPDATES_URL = "https://catabus.com/gtfsrt/TripUpdate.pb";
var SERVICE_ALERTS_URL = "https://catabus.com/gtfsrt/ServiceAlerts.pb";
var FETCH_TIMEOUT = 8e3;
var STALENESS_THRESHOLD = 60;
async function fetchGTFSRealtimeFeed(url) {
  const controller = new AbortController();
  const timeout = setTimeout(() => controller.abort(), FETCH_TIMEOUT);
  try {
    const response = await fetch(url, {
      signal: controller.signal,
      headers: {
        "Accept": "application/x-protobuf"
      }
    });
    if (!response.ok) {
      if (response.status === 404) {
        console.log(`Real-time feed unavailable (404): ${url}`);
      } else {
        console.error(`HTTP ${response.status}: ${response.statusText}`);
      }
      return null;
    }
    const buffer = await response.arrayBuffer();
    const feed = import_gtfs_rt_bindings.transit_realtime.FeedMessage.decode(new Uint8Array(buffer));
    return feed;
  } catch (error) {
    if (error.name === "AbortError") {
      console.error(`Timeout fetching ${url}`);
    } else {
      console.error(`Error fetching ${url}:`, error.message);
    }
    return null;
  } finally {
    clearTimeout(timeout);
  }
}
function parseVehiclePositions(feed) {
  const vehicles = [];
  for (const entity of feed.entity) {
    if (!entity.vehicle) continue;
    const vehicle = entity.vehicle;
    const position = vehicle.position;
    const trip = vehicle.trip;
    vehicles.push({
      vehicleId: vehicle.vehicle?.id || entity.id,
      routeId: trip?.routeId || void 0,
      tripId: trip?.tripId || void 0,
      latitude: position?.latitude || void 0,
      longitude: position?.longitude || void 0,
      bearing: position?.bearing || void 0,
      speed: position?.speed || void 0,
      stopId: vehicle.stopId || void 0,
      currentStatus: vehicle.currentStatus || void 0,
      timestamp: vehicle.timestamp?.low || void 0,
      congestionLevel: vehicle.congestionLevel || void 0,
      occupancyStatus: vehicle.occupancyStatus || void 0
    });
  }
  return vehicles;
}
function parseTripUpdates(feed) {
  const updates = [];
  for (const entity of feed.entity) {
    if (!entity.tripUpdate) continue;
    const update = entity.tripUpdate;
    const trip = update.trip;
    const stopTimeUpdates = [];
    for (const stu of update.stopTimeUpdate || []) {
      stopTimeUpdates.push({
        stopSequence: stu.stopSequence || void 0,
        stopId: stu.stopId || void 0,
        arrival: stu.arrival ? {
          delay: stu.arrival.delay || void 0,
          time: stu.arrival.time?.low || void 0,
          uncertainty: stu.arrival.uncertainty || void 0
        } : void 0,
        departure: stu.departure ? {
          delay: stu.departure.delay || void 0,
          time: stu.departure.time?.low || void 0,
          uncertainty: stu.departure.uncertainty || void 0
        } : void 0,
        scheduleRelationship: stu.scheduleRelationship || void 0
      });
    }
    updates.push({
      tripId: trip?.tripId || "",
      routeId: trip?.routeId || void 0,
      vehicleId: update.vehicle?.id || void 0,
      startDate: trip?.startDate || void 0,
      startTime: trip?.startTime || void 0,
      scheduleRelationship: trip?.scheduleRelationship || void 0,
      stopTimeUpdates,
      timestamp: update.timestamp?.low || void 0,
      delay: update.delay || void 0
    });
  }
  return updates;
}
function parseServiceAlerts(feed) {
  const alerts = [];
  for (const entity of feed.entity) {
    if (!entity.alert) continue;
    const alert = entity.alert;
    const activePeriods = (alert.activePeriod || []).map((period) => ({
      start: period.start?.low || void 0,
      end: period.end?.low || void 0
    }));
    const informedEntities = (alert.informedEntity || []).map((entity2) => ({
      agencyId: entity2.agencyId || void 0,
      routeId: entity2.routeId || void 0,
      routeType: entity2.routeType || void 0,
      tripId: entity2.trip?.tripId || void 0,
      stopId: entity2.stopId || void 0
    }));
    alerts.push({
      id: entity.id,
      activePeriods,
      informedEntities,
      cause: alert.cause || void 0,
      effect: alert.effect || void 0,
      url: alert.url || void 0,
      headerText: alert.headerText || void 0,
      descriptionText: alert.descriptionText || void 0,
      ttsHeaderText: alert.ttsHeaderText || void 0,
      ttsDescriptionText: alert.ttsDescriptionText || void 0,
      severityLevel: alert.severityLevel || void 0
    });
  }
  return alerts;
}
async function fetchRealtimeData() {
  const [vehicleFeed, tripFeed, alertFeed] = await Promise.all([
    fetchGTFSRealtimeFeed(VEHICLE_POSITIONS_URL),
    fetchGTFSRealtimeFeed(TRIP_UPDATES_URL),
    fetchGTFSRealtimeFeed(SERVICE_ALERTS_URL)
  ]);
  const vehicles = vehicleFeed ? parseVehiclePositions(vehicleFeed) : [];
  const tripUpdates = tripFeed ? parseTripUpdates(tripFeed) : [];
  const alerts = alertFeed ? parseServiceAlerts(alertFeed) : [];
  const timestamps = [
    vehicleFeed?.header.timestamp?.low,
    tripFeed?.header.timestamp?.low,
    alertFeed?.header.timestamp?.low
  ].filter((t2) => t2 !== void 0);
  const timestamp = timestamps.length > 0 ? Math.max(...timestamps) : 0;
  const isStale = isDataStale(timestamp, STALENESS_THRESHOLD);
  if (isStale && timestamp > 0 && (vehicles.length > 0 || tripUpdates.length > 0)) {
    await (0, import_api4.showToast)({
      style: import_api4.Toast.Style.Failure,
      title: "Stale Data",
      message: "Bus data may be outdated (>60s old)"
    });
  }
  return {
    vehicles,
    tripUpdates,
    alerts,
    timestamp,
    isStale
  };
}
function getTripUpdatesForRoute(routeId, tripUpdates) {
  return tripUpdates.filter((update) => update.routeId === routeId);
}
function getVehiclesForRoute(routeId, vehicles) {
  return vehicles.filter((vehicle) => vehicle.routeId === routeId);
}
function hasActiveAlerts(routeId, alerts) {
  const now = Math.floor(Date.now() / 1e3);
  return alerts.some((alert) => {
    const affectsRoute = alert.informedEntities.some((entity) => entity.routeId === routeId);
    if (!affectsRoute) return false;
    return alert.activePeriods.some((period) => {
      const start = period.start || 0;
      const end = period.end || Number.MAX_SAFE_INTEGER;
      return now >= start && now <= end;
    });
  });
}

// src/route-lookup.tsx
var import_jsx_runtime = require("react/jsx-runtime");
function RouteLookup() {
  const [isLoading, setIsLoading] = (0, import_react.useState)(true);
  const [routes, setRoutes] = (0, import_react.useState)([]);
  const [selectedRouteId, setSelectedRouteId] = (0, import_react.useState)("");
  const [vehicles, setVehicles] = (0, import_react.useState)([]);
  const [hasAlerts, setHasAlerts] = (0, import_react.useState)(false);
  const [lastUpdate, setLastUpdate] = (0, import_react.useState)(/* @__PURE__ */ new Date());
  const [searchText, setSearchText] = (0, import_react.useState)("");
  (0, import_react.useEffect)(() => {
    loadRoutes();
  }, []);
  (0, import_react.useEffect)(() => {
    if (selectedRouteId) {
      loadVehicles();
      const interval = setInterval(loadVehicles, 15e3);
      return () => clearInterval(interval);
    }
  }, [selectedRouteId]);
  const loadRoutes = async () => {
    try {
      const gtfsData = await loadStaticGTFS();
      const allRoutes = Array.from(gtfsData.routes.values());
      allRoutes.sort((a, b) => {
        const aNum = parseInt(a.route_short_name);
        const bNum = parseInt(b.route_short_name);
        if (!isNaN(aNum) && !isNaN(bNum)) {
          return aNum - bNum;
        }
        return a.route_short_name.localeCompare(b.route_short_name);
      });
      setRoutes(allRoutes);
      if (allRoutes.length > 0 && !selectedRouteId) {
        setSelectedRouteId(allRoutes[0].route_id);
      }
    } catch (error) {
      console.error("Error loading routes:", error);
      (0, import_api5.showToast)({
        style: import_api5.Toast.Style.Failure,
        title: "Failed to Load Routes",
        message: error instanceof Error ? error.message : "Unknown error"
      });
    } finally {
      setIsLoading(false);
    }
  };
  const loadVehicles = async () => {
    if (!selectedRouteId) return;
    try {
      const gtfsData = await loadStaticGTFS();
      const routeInfo = gtfsData.routes.get(selectedRouteId);
      if (!routeInfo) {
        return;
      }
      const realtimeData = await fetchRealtimeData();
      const routeVehicles = getVehiclesForRoute(selectedRouteId, realtimeData.vehicles);
      const tripUpdates = getTripUpdatesForRoute(selectedRouteId, realtimeData.tripUpdates);
      const alertsExist = hasActiveAlerts(selectedRouteId, realtimeData.alerts);
      setHasAlerts(alertsExist);
      const vehicleDetails = [];
      for (const vehicle of routeVehicles) {
        const tripUpdate = tripUpdates.find((tu) => tu.tripId === vehicle.tripId);
        const trip = vehicle.tripId ? gtfsData.trips.get(vehicle.tripId) : null;
        const currentStop = vehicle.stopId ? gtfsData.stops.get(vehicle.stopId) : null;
        let delay;
        if (tripUpdate && tripUpdate.delay !== void 0) {
          delay = tripUpdate.delay;
        } else if (tripUpdate && tripUpdate.stopTimeUpdates.length > 0) {
          const delays = tripUpdate.stopTimeUpdates.map((stu) => stu.arrival?.delay || stu.departure?.delay).filter((d) => d !== void 0);
          if (delays.length > 0) {
            delay = Math.round(delays.reduce((a, b) => a + b, 0) / delays.length);
          }
        }
        vehicleDetails.push({
          route: routeInfo,
          vehicleId: vehicle.vehicleId,
          tripId: vehicle.tripId || "",
          currentStopId: vehicle.stopId,
          currentStopName: currentStop?.stop_name,
          latitude: vehicle.latitude,
          longitude: vehicle.longitude,
          bearing: vehicle.bearing,
          speed: vehicle.speed,
          delay,
          lastUpdated: vehicle.timestamp ? new Date(vehicle.timestamp * 1e3) : /* @__PURE__ */ new Date(),
          occupancyStatus: formatOccupancy(vehicle.occupancyStatus),
          occupancyIcon: getOccupancyIcon(vehicle.occupancyStatus),
          delayColor: getDelayColor(delay),
          routeColor: getRouteColor(routeInfo.route_short_name)
        });
      }
      vehicleDetails.sort((a, b) => a.vehicleId.localeCompare(b.vehicleId));
      setVehicles(vehicleDetails);
      setLastUpdate(/* @__PURE__ */ new Date());
    } catch (error) {
      console.error("Error loading vehicles:", error);
    }
  };
  const filteredRoutes = routes.filter((route) => {
    const search = searchText.toLowerCase();
    return route.route_short_name.toLowerCase().includes(search) || route.route_long_name.toLowerCase().includes(search);
  });
  const selectedRoute = routes.find((r2) => r2.route_id === selectedRouteId);
  return /* @__PURE__ */ (0, import_jsx_runtime.jsxs)(
    import_api5.List,
    {
      isLoading,
      searchText,
      onSearchTextChange: setSearchText,
      searchBarPlaceholder: "Search routes...",
      navigationTitle: selectedRoute ? `${selectedRoute.route_short_name} - ${selectedRoute.route_long_name}` : "Route Lookup",
      children: [
        /* @__PURE__ */ (0, import_jsx_runtime.jsx)(
          import_api5.List.Dropdown,
          {
            tooltip: "Select a route",
            value: selectedRouteId,
            onChange: setSelectedRouteId,
            children: filteredRoutes.map((route) => /* @__PURE__ */ (0, import_jsx_runtime.jsx)(
              import_api5.List.Dropdown.Item,
              {
                value: route.route_id,
                title: `${route.route_short_name} - ${route.route_long_name}`,
                icon: {
                  source: import_api5.Icon.Circle,
                  tintColor: route.route_short_name === "WL" || route.route_short_name === "WL Gameday" ? import_api5.Color.PrimaryText : { light: getRouteColor(route.route_short_name), dark: getRouteColor(route.route_short_name) }
                }
              },
              route.route_id
            ))
          }
        ),
        selectedRoute && /* @__PURE__ */ (0, import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment, { children: [
          /* @__PURE__ */ (0, import_jsx_runtime.jsx)(
            import_api5.List.Section,
            {
              title: `Active Vehicles (${vehicles.length})`,
              subtitle: hasAlerts ? "\u26A0\uFE0F Service Alerts Active" : `Updated ${formatRelativeTime(lastUpdate)}`,
              children: vehicles.length === 0 ? /* @__PURE__ */ (0, import_jsx_runtime.jsx)(
                import_api5.List.Item,
                {
                  title: "No Active Vehicles",
                  subtitle: "Real-time data unavailable - check CATA schedule for service times",
                  icon: { source: import_api5.Icon.Clock, tintColor: import_api5.Color.SecondaryText },
                  actions: /* @__PURE__ */ (0, import_jsx_runtime.jsxs)(import_api5.ActionPanel, { children: [
                    /* @__PURE__ */ (0, import_jsx_runtime.jsx)(
                      import_api5.Action.OpenInBrowser,
                      {
                        title: "View Schedule",
                        url: "https://catabus.com/Schedules"
                      }
                    ),
                    /* @__PURE__ */ (0, import_jsx_runtime.jsx)(
                      import_api5.Action,
                      {
                        title: "Refresh",
                        icon: import_api5.Icon.ArrowClockwise,
                        onAction: loadVehicles,
                        shortcut: { modifiers: ["cmd"], key: "r" }
                      }
                    )
                  ] })
                }
              ) : vehicles.map((vehicle) => /* @__PURE__ */ (0, import_jsx_runtime.jsx)(
                import_api5.List.Item,
                {
                  title: `Vehicle ${vehicle.vehicleId}`,
                  subtitle: vehicle.currentStopName || "In transit",
                  icon: { source: import_api5.Icon.Car, tintColor: vehicle.delayColor },
                  accessories: [
                    {
                      text: vehicle.occupancyIcon + " " + vehicle.occupancyStatus,
                      tooltip: "Occupancy"
                    },
                    {
                      text: formatDelay(vehicle.delay),
                      icon: { source: import_api5.Icon.Clock, tintColor: vehicle.delayColor },
                      tooltip: "Delay Status"
                    },
                    vehicle.speed !== void 0 ? {
                      text: `${Math.round(vehicle.speed * 2.237)} mph`,
                      icon: import_api5.Icon.Gauge,
                      tooltip: "Current Speed"
                    } : null
                  ].filter(Boolean),
                  actions: /* @__PURE__ */ (0, import_jsx_runtime.jsxs)(import_api5.ActionPanel, { children: [
                    /* @__PURE__ */ (0, import_jsx_runtime.jsx)(
                      import_api5.Action.CopyToClipboard,
                      {
                        title: "Copy Vehicle ID",
                        content: vehicle.vehicleId
                      }
                    ),
                    vehicle.tripId && /* @__PURE__ */ (0, import_jsx_runtime.jsx)(
                      import_api5.Action.CopyToClipboard,
                      {
                        title: "Copy Trip ID",
                        content: vehicle.tripId
                      }
                    ),
                    vehicle.latitude && vehicle.longitude && /* @__PURE__ */ (0, import_jsx_runtime.jsx)(
                      import_api5.Action.OpenInBrowser,
                      {
                        title: "View on Map",
                        url: `https://www.google.com/maps/search/?api=1&query=${vehicle.latitude},${vehicle.longitude}`
                      }
                    ),
                    /* @__PURE__ */ (0, import_jsx_runtime.jsx)(
                      import_api5.Action,
                      {
                        title: "Refresh",
                        icon: import_api5.Icon.ArrowClockwise,
                        onAction: loadVehicles,
                        shortcut: { modifiers: ["cmd"], key: "r" }
                      }
                    )
                  ] })
                },
                vehicle.vehicleId
              ))
            }
          ),
          /* @__PURE__ */ (0, import_jsx_runtime.jsx)(import_api5.List.Section, { title: "Route Information", children: /* @__PURE__ */ (0, import_jsx_runtime.jsx)(
            import_api5.List.Item,
            {
              title: "Route Details",
              subtitle: `${selectedRoute.route_short_name} - ${selectedRoute.route_long_name}`,
              icon: {
                source: import_api5.Icon.Info,
                tintColor: selectedRoute.route_short_name === "WL" || selectedRoute.route_short_name === "WL Gameday" ? import_api5.Color.PrimaryText : { light: getRouteColor(selectedRoute.route_short_name), dark: getRouteColor(selectedRoute.route_short_name) }
              },
              accessories: [
                {
                  text: selectedRoute.route_type === 3 ? "Bus" : "Transit",
                  icon: import_api5.Icon.Tag
                }
              ],
              actions: /* @__PURE__ */ (0, import_jsx_runtime.jsxs)(import_api5.ActionPanel, { children: [
                /* @__PURE__ */ (0, import_jsx_runtime.jsx)(
                  import_api5.Action.OpenInBrowser,
                  {
                    title: "View Route Map",
                    url: `https://catabus.com/Routes/${selectedRoute.route_short_name}`
                  }
                ),
                /* @__PURE__ */ (0, import_jsx_runtime.jsx)(
                  import_api5.Action.OpenInBrowser,
                  {
                    title: "View Schedule",
                    url: "https://catabus.com/Schedules"
                  }
                )
              ] })
            }
          ) })
        ] })
      ]
    }
  );
}
/*! Bundled license information:

web-streams-polyfill/dist/ponyfill.es2018.js:
  (**
   * @license
   * web-streams-polyfill v3.3.3
   * Copyright 2024 Mattias Buelens, Diwank Singh Tomer and other contributors.
   * This code is released under the MIT license.
   * SPDX-License-Identifier: MIT
   *)

fetch-blob/index.js:
  (*! fetch-blob. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

formdata-polyfill/esm.min.js:
  (*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

node-domexception/index.js:
  (*! node-domexception. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)
*/
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vLi4vLi4vRGV2ZWxvcGVyL1JheWNhc3QgRXh0ZW5zaW9ucy9jYXRhYnVzLXN0YXR1cy9ub2RlX21vZHVsZXMvd2ViLXN0cmVhbXMtcG9seWZpbGwvc3JjL3V0aWxzLnRzIiwgIi4uLy4uLy4uLy4uL0RldmVsb3Blci9SYXljYXN0IEV4dGVuc2lvbnMvY2F0YWJ1cy1zdGF0dXMvbm9kZV9tb2R1bGVzL3dlYi1zdHJlYW1zLXBvbHlmaWxsL3NyYy9saWIvaGVscGVycy9taXNjZWxsYW5lb3VzLnRzIiwgIi4uLy4uLy4uLy4uL0RldmVsb3Blci9SYXljYXN0IEV4dGVuc2lvbnMvY2F0YWJ1cy1zdGF0dXMvbm9kZV9tb2R1bGVzL3dlYi1zdHJlYW1zLXBvbHlmaWxsL3NyYy9saWIvaGVscGVycy93ZWJpZGwudHMiLCAiLi4vLi4vLi4vLi4vRGV2ZWxvcGVyL1JheWNhc3QgRXh0ZW5zaW9ucy9jYXRhYnVzLXN0YXR1cy9ub2RlX21vZHVsZXMvd2ViLXN0cmVhbXMtcG9seWZpbGwvc3JjL2xpYi9zaW1wbGUtcXVldWUudHMiLCAiLi4vLi4vLi4vLi4vRGV2ZWxvcGVyL1JheWNhc3QgRXh0ZW5zaW9ucy9jYXRhYnVzLXN0YXR1cy9ub2RlX21vZHVsZXMvd2ViLXN0cmVhbXMtcG9seWZpbGwvc3JjL2xpYi9hYnN0cmFjdC1vcHMvaW50ZXJuYWwtbWV0aG9kcy50cyIsICIuLi8uLi8uLi8uLi9EZXZlbG9wZXIvUmF5Y2FzdCBFeHRlbnNpb25zL2NhdGFidXMtc3RhdHVzL25vZGVfbW9kdWxlcy93ZWItc3RyZWFtcy1wb2x5ZmlsbC9zcmMvbGliL3JlYWRhYmxlLXN0cmVhbS9nZW5lcmljLXJlYWRlci50cyIsICIuLi8uLi8uLi8uLi9EZXZlbG9wZXIvUmF5Y2FzdCBFeHRlbnNpb25zL2NhdGFidXMtc3RhdHVzL25vZGVfbW9kdWxlcy93ZWItc3RyZWFtcy1wb2x5ZmlsbC9zcmMvc3R1Yi9udW1iZXItaXNmaW5pdGUudHMiLCAiLi4vLi4vLi4vLi4vRGV2ZWxvcGVyL1JheWNhc3QgRXh0ZW5zaW9ucy9jYXRhYnVzLXN0YXR1cy9ub2RlX21vZHVsZXMvd2ViLXN0cmVhbXMtcG9seWZpbGwvc3JjL3N0dWIvbWF0aC10cnVuYy50cyIsICIuLi8uLi8uLi8uLi9EZXZlbG9wZXIvUmF5Y2FzdCBFeHRlbnNpb25zL2NhdGFidXMtc3RhdHVzL25vZGVfbW9kdWxlcy93ZWItc3RyZWFtcy1wb2x5ZmlsbC9zcmMvbGliL3ZhbGlkYXRvcnMvYmFzaWMudHMiLCAiLi4vLi4vLi4vLi4vRGV2ZWxvcGVyL1JheWNhc3QgRXh0ZW5zaW9ucy9jYXRhYnVzLXN0YXR1cy9ub2RlX21vZHVsZXMvd2ViLXN0cmVhbXMtcG9seWZpbGwvc3JjL2xpYi92YWxpZGF0b3JzL3JlYWRhYmxlLXN0cmVhbS50cyIsICIuLi8uLi8uLi8uLi9EZXZlbG9wZXIvUmF5Y2FzdCBFeHRlbnNpb25zL2NhdGFidXMtc3RhdHVzL25vZGVfbW9kdWxlcy93ZWItc3RyZWFtcy1wb2x5ZmlsbC9zcmMvbGliL3JlYWRhYmxlLXN0cmVhbS9kZWZhdWx0LXJlYWRlci50cyIsICIuLi8uLi8uLi8uLi9EZXZlbG9wZXIvUmF5Y2FzdCBFeHRlbnNpb25zL2NhdGFidXMtc3RhdHVzL25vZGVfbW9kdWxlcy93ZWItc3RyZWFtcy1wb2x5ZmlsbC9zcmMvdGFyZ2V0L2VzMjAxOC9zdHViL2FzeW5jLWl0ZXJhdG9yLXByb3RvdHlwZS50cyIsICIuLi8uLi8uLi8uLi9EZXZlbG9wZXIvUmF5Y2FzdCBFeHRlbnNpb25zL2NhdGFidXMtc3RhdHVzL25vZGVfbW9kdWxlcy93ZWItc3RyZWFtcy1wb2x5ZmlsbC9zcmMvbGliL3JlYWRhYmxlLXN0cmVhbS9hc3luYy1pdGVyYXRvci50cyIsICIuLi8uLi8uLi8uLi9EZXZlbG9wZXIvUmF5Y2FzdCBFeHRlbnNpb25zL2NhdGFidXMtc3RhdHVzL25vZGVfbW9kdWxlcy93ZWItc3RyZWFtcy1wb2x5ZmlsbC9zcmMvc3R1Yi9udW1iZXItaXNuYW4udHMiLCAiLi4vLi4vLi4vLi4vRGV2ZWxvcGVyL1JheWNhc3QgRXh0ZW5zaW9ucy9jYXRhYnVzLXN0YXR1cy9ub2RlX21vZHVsZXMvd2ViLXN0cmVhbXMtcG9seWZpbGwvc3JjL2xpYi9hYnN0cmFjdC1vcHMvZWNtYXNjcmlwdC50cyIsICIuLi8uLi8uLi8uLi9EZXZlbG9wZXIvUmF5Y2FzdCBFeHRlbnNpb25zL2NhdGFidXMtc3RhdHVzL25vZGVfbW9kdWxlcy93ZWItc3RyZWFtcy1wb2x5ZmlsbC9zcmMvbGliL2Fic3RyYWN0LW9wcy9taXNjZWxsYW5lb3VzLnRzIiwgIi4uLy4uLy4uLy4uL0RldmVsb3Blci9SYXljYXN0IEV4dGVuc2lvbnMvY2F0YWJ1cy1zdGF0dXMvbm9kZV9tb2R1bGVzL3dlYi1zdHJlYW1zLXBvbHlmaWxsL3NyYy9saWIvYWJzdHJhY3Qtb3BzL3F1ZXVlLXdpdGgtc2l6ZXMudHMiLCAiLi4vLi4vLi4vLi4vRGV2ZWxvcGVyL1JheWNhc3QgRXh0ZW5zaW9ucy9jYXRhYnVzLXN0YXR1cy9ub2RlX21vZHVsZXMvd2ViLXN0cmVhbXMtcG9seWZpbGwvc3JjL2xpYi9oZWxwZXJzL2FycmF5LWJ1ZmZlci12aWV3LnRzIiwgIi4uLy4uLy4uLy4uL0RldmVsb3Blci9SYXljYXN0IEV4dGVuc2lvbnMvY2F0YWJ1cy1zdGF0dXMvbm9kZV9tb2R1bGVzL3dlYi1zdHJlYW1zLXBvbHlmaWxsL3NyYy9saWIvcmVhZGFibGUtc3RyZWFtL2J5dGUtc3RyZWFtLWNvbnRyb2xsZXIudHMiLCAiLi4vLi4vLi4vLi4vRGV2ZWxvcGVyL1JheWNhc3QgRXh0ZW5zaW9ucy9jYXRhYnVzLXN0YXR1cy9ub2RlX21vZHVsZXMvd2ViLXN0cmVhbXMtcG9seWZpbGwvc3JjL2xpYi92YWxpZGF0b3JzL3JlYWRlci1vcHRpb25zLnRzIiwgIi4uLy4uLy4uLy4uL0RldmVsb3Blci9SYXljYXN0IEV4dGVuc2lvbnMvY2F0YWJ1cy1zdGF0dXMvbm9kZV9tb2R1bGVzL3dlYi1zdHJlYW1zLXBvbHlmaWxsL3NyYy9saWIvcmVhZGFibGUtc3RyZWFtL2J5b2ItcmVhZGVyLnRzIiwgIi4uLy4uLy4uLy4uL0RldmVsb3Blci9SYXljYXN0IEV4dGVuc2lvbnMvY2F0YWJ1cy1zdGF0dXMvbm9kZV9tb2R1bGVzL3dlYi1zdHJlYW1zLXBvbHlmaWxsL3NyYy9saWIvYWJzdHJhY3Qtb3BzL3F1ZXVpbmctc3RyYXRlZ3kudHMiLCAiLi4vLi4vLi4vLi4vRGV2ZWxvcGVyL1JheWNhc3QgRXh0ZW5zaW9ucy9jYXRhYnVzLXN0YXR1cy9ub2RlX21vZHVsZXMvd2ViLXN0cmVhbXMtcG9seWZpbGwvc3JjL2xpYi92YWxpZGF0b3JzL3F1ZXVpbmctc3RyYXRlZ3kudHMiLCAiLi4vLi4vLi4vLi4vRGV2ZWxvcGVyL1JheWNhc3QgRXh0ZW5zaW9ucy9jYXRhYnVzLXN0YXR1cy9ub2RlX21vZHVsZXMvd2ViLXN0cmVhbXMtcG9seWZpbGwvc3JjL2xpYi92YWxpZGF0b3JzL3VuZGVybHlpbmctc2luay50cyIsICIuLi8uLi8uLi8uLi9EZXZlbG9wZXIvUmF5Y2FzdCBFeHRlbnNpb25zL2NhdGFidXMtc3RhdHVzL25vZGVfbW9kdWxlcy93ZWItc3RyZWFtcy1wb2x5ZmlsbC9zcmMvbGliL3ZhbGlkYXRvcnMvd3JpdGFibGUtc3RyZWFtLnRzIiwgIi4uLy4uLy4uLy4uL0RldmVsb3Blci9SYXljYXN0IEV4dGVuc2lvbnMvY2F0YWJ1cy1zdGF0dXMvbm9kZV9tb2R1bGVzL3dlYi1zdHJlYW1zLXBvbHlmaWxsL3NyYy9saWIvYWJvcnQtc2lnbmFsLnRzIiwgIi4uLy4uLy4uLy4uL0RldmVsb3Blci9SYXljYXN0IEV4dGVuc2lvbnMvY2F0YWJ1cy1zdGF0dXMvbm9kZV9tb2R1bGVzL3dlYi1zdHJlYW1zLXBvbHlmaWxsL3NyYy9saWIvd3JpdGFibGUtc3RyZWFtLnRzIiwgIi4uLy4uLy4uLy4uL0RldmVsb3Blci9SYXljYXN0IEV4dGVuc2lvbnMvY2F0YWJ1cy1zdGF0dXMvbm9kZV9tb2R1bGVzL3dlYi1zdHJlYW1zLXBvbHlmaWxsL3NyYy9nbG9iYWxzLnRzIiwgIi4uLy4uLy4uLy4uL0RldmVsb3Blci9SYXljYXN0IEV4dGVuc2lvbnMvY2F0YWJ1cy1zdGF0dXMvbm9kZV9tb2R1bGVzL3dlYi1zdHJlYW1zLXBvbHlmaWxsL3NyYy9zdHViL2RvbS1leGNlcHRpb24udHMiLCAiLi4vLi4vLi4vLi4vRGV2ZWxvcGVyL1JheWNhc3QgRXh0ZW5zaW9ucy9jYXRhYnVzLXN0YXR1cy9ub2RlX21vZHVsZXMvd2ViLXN0cmVhbXMtcG9seWZpbGwvc3JjL2xpYi9yZWFkYWJsZS1zdHJlYW0vcGlwZS50cyIsICIuLi8uLi8uLi8uLi9EZXZlbG9wZXIvUmF5Y2FzdCBFeHRlbnNpb25zL2NhdGFidXMtc3RhdHVzL25vZGVfbW9kdWxlcy93ZWItc3RyZWFtcy1wb2x5ZmlsbC9zcmMvbGliL3JlYWRhYmxlLXN0cmVhbS9kZWZhdWx0LWNvbnRyb2xsZXIudHMiLCAiLi4vLi4vLi4vLi4vRGV2ZWxvcGVyL1JheWNhc3QgRXh0ZW5zaW9ucy9jYXRhYnVzLXN0YXR1cy9ub2RlX21vZHVsZXMvd2ViLXN0cmVhbXMtcG9seWZpbGwvc3JjL2xpYi9yZWFkYWJsZS1zdHJlYW0vdGVlLnRzIiwgIi4uLy4uLy4uLy4uL0RldmVsb3Blci9SYXljYXN0IEV4dGVuc2lvbnMvY2F0YWJ1cy1zdGF0dXMvbm9kZV9tb2R1bGVzL3dlYi1zdHJlYW1zLXBvbHlmaWxsL3NyYy9saWIvcmVhZGFibGUtc3RyZWFtL3JlYWRhYmxlLXN0cmVhbS1saWtlLnRzIiwgIi4uLy4uLy4uLy4uL0RldmVsb3Blci9SYXljYXN0IEV4dGVuc2lvbnMvY2F0YWJ1cy1zdGF0dXMvbm9kZV9tb2R1bGVzL3dlYi1zdHJlYW1zLXBvbHlmaWxsL3NyYy9saWIvcmVhZGFibGUtc3RyZWFtL2Zyb20udHMiLCAiLi4vLi4vLi4vLi4vRGV2ZWxvcGVyL1JheWNhc3QgRXh0ZW5zaW9ucy9jYXRhYnVzLXN0YXR1cy9ub2RlX21vZHVsZXMvd2ViLXN0cmVhbXMtcG9seWZpbGwvc3JjL2xpYi92YWxpZGF0b3JzL3VuZGVybHlpbmctc291cmNlLnRzIiwgIi4uLy4uLy4uLy4uL0RldmVsb3Blci9SYXljYXN0IEV4dGVuc2lvbnMvY2F0YWJ1cy1zdGF0dXMvbm9kZV9tb2R1bGVzL3dlYi1zdHJlYW1zLXBvbHlmaWxsL3NyYy9saWIvdmFsaWRhdG9ycy9pdGVyYXRvci1vcHRpb25zLnRzIiwgIi4uLy4uLy4uLy4uL0RldmVsb3Blci9SYXljYXN0IEV4dGVuc2lvbnMvY2F0YWJ1cy1zdGF0dXMvbm9kZV9tb2R1bGVzL3dlYi1zdHJlYW1zLXBvbHlmaWxsL3NyYy9saWIvdmFsaWRhdG9ycy9waXBlLW9wdGlvbnMudHMiLCAiLi4vLi4vLi4vLi4vRGV2ZWxvcGVyL1JheWNhc3QgRXh0ZW5zaW9ucy9jYXRhYnVzLXN0YXR1cy9ub2RlX21vZHVsZXMvd2ViLXN0cmVhbXMtcG9seWZpbGwvc3JjL2xpYi92YWxpZGF0b3JzL3JlYWRhYmxlLXdyaXRhYmxlLXBhaXIudHMiLCAiLi4vLi4vLi4vLi4vRGV2ZWxvcGVyL1JheWNhc3QgRXh0ZW5zaW9ucy9jYXRhYnVzLXN0YXR1cy9ub2RlX21vZHVsZXMvd2ViLXN0cmVhbXMtcG9seWZpbGwvc3JjL2xpYi9yZWFkYWJsZS1zdHJlYW0udHMiLCAiLi4vLi4vLi4vLi4vRGV2ZWxvcGVyL1JheWNhc3QgRXh0ZW5zaW9ucy9jYXRhYnVzLXN0YXR1cy9ub2RlX21vZHVsZXMvd2ViLXN0cmVhbXMtcG9seWZpbGwvc3JjL2xpYi92YWxpZGF0b3JzL3F1ZXVpbmctc3RyYXRlZ3ktaW5pdC50cyIsICIuLi8uLi8uLi8uLi9EZXZlbG9wZXIvUmF5Y2FzdCBFeHRlbnNpb25zL2NhdGFidXMtc3RhdHVzL25vZGVfbW9kdWxlcy93ZWItc3RyZWFtcy1wb2x5ZmlsbC9zcmMvbGliL2J5dGUtbGVuZ3RoLXF1ZXVpbmctc3RyYXRlZ3kudHMiLCAiLi4vLi4vLi4vLi4vRGV2ZWxvcGVyL1JheWNhc3QgRXh0ZW5zaW9ucy9jYXRhYnVzLXN0YXR1cy9ub2RlX21vZHVsZXMvd2ViLXN0cmVhbXMtcG9seWZpbGwvc3JjL2xpYi9jb3VudC1xdWV1aW5nLXN0cmF0ZWd5LnRzIiwgIi4uLy4uLy4uLy4uL0RldmVsb3Blci9SYXljYXN0IEV4dGVuc2lvbnMvY2F0YWJ1cy1zdGF0dXMvbm9kZV9tb2R1bGVzL3dlYi1zdHJlYW1zLXBvbHlmaWxsL3NyYy9saWIvdmFsaWRhdG9ycy90cmFuc2Zvcm1lci50cyIsICIuLi8uLi8uLi8uLi9EZXZlbG9wZXIvUmF5Y2FzdCBFeHRlbnNpb25zL2NhdGFidXMtc3RhdHVzL25vZGVfbW9kdWxlcy93ZWItc3RyZWFtcy1wb2x5ZmlsbC9zcmMvbGliL3RyYW5zZm9ybS1zdHJlYW0udHMiLCAiLi4vLi4vLi4vLi4vRGV2ZWxvcGVyL1JheWNhc3QgRXh0ZW5zaW9ucy9jYXRhYnVzLXN0YXR1cy9ub2RlX21vZHVsZXMvZmV0Y2gtYmxvYi9zdHJlYW1zLmNqcyIsICIuLi8uLi8uLi8uLi9EZXZlbG9wZXIvUmF5Y2FzdCBFeHRlbnNpb25zL2NhdGFidXMtc3RhdHVzL25vZGVfbW9kdWxlcy9mZXRjaC1ibG9iL2luZGV4LmpzIiwgIi4uLy4uLy4uLy4uL0RldmVsb3Blci9SYXljYXN0IEV4dGVuc2lvbnMvY2F0YWJ1cy1zdGF0dXMvbm9kZV9tb2R1bGVzL2ZldGNoLWJsb2IvZmlsZS5qcyIsICIuLi8uLi8uLi8uLi9EZXZlbG9wZXIvUmF5Y2FzdCBFeHRlbnNpb25zL2NhdGFidXMtc3RhdHVzL25vZGVfbW9kdWxlcy9mb3JtZGF0YS1wb2x5ZmlsbC9lc20ubWluLmpzIiwgIi4uLy4uLy4uLy4uL0RldmVsb3Blci9SYXljYXN0IEV4dGVuc2lvbnMvY2F0YWJ1cy1zdGF0dXMvbm9kZV9tb2R1bGVzL25vZGUtZG9tZXhjZXB0aW9uL2luZGV4LmpzIiwgIi4uLy4uLy4uLy4uL0RldmVsb3Blci9SYXljYXN0IEV4dGVuc2lvbnMvY2F0YWJ1cy1zdGF0dXMvbm9kZV9tb2R1bGVzL2ZldGNoLWJsb2IvZnJvbS5qcyIsICIuLi8uLi8uLi8uLi9EZXZlbG9wZXIvUmF5Y2FzdCBFeHRlbnNpb25zL2NhdGFidXMtc3RhdHVzL25vZGVfbW9kdWxlcy9ub2RlLWZldGNoL3NyYy91dGlscy9tdWx0aXBhcnQtcGFyc2VyLmpzIiwgIi4uLy4uLy4uLy4uL0RldmVsb3Blci9SYXljYXN0IEV4dGVuc2lvbnMvY2F0YWJ1cy1zdGF0dXMvbm9kZV9tb2R1bGVzL2FkbS16aXAvdXRpbC9jb25zdGFudHMuanMiLCAiLi4vLi4vLi4vLi4vRGV2ZWxvcGVyL1JheWNhc3QgRXh0ZW5zaW9ucy9jYXRhYnVzLXN0YXR1cy9ub2RlX21vZHVsZXMvYWRtLXppcC91dGlsL2Vycm9ycy5qcyIsICIuLi8uLi8uLi8uLi9EZXZlbG9wZXIvUmF5Y2FzdCBFeHRlbnNpb25zL2NhdGFidXMtc3RhdHVzL25vZGVfbW9kdWxlcy9hZG0temlwL3V0aWwvdXRpbHMuanMiLCAiLi4vLi4vLi4vLi4vRGV2ZWxvcGVyL1JheWNhc3QgRXh0ZW5zaW9ucy9jYXRhYnVzLXN0YXR1cy9ub2RlX21vZHVsZXMvYWRtLXppcC91dGlsL2ZhdHRyLmpzIiwgIi4uLy4uLy4uLy4uL0RldmVsb3Blci9SYXljYXN0IEV4dGVuc2lvbnMvY2F0YWJ1cy1zdGF0dXMvbm9kZV9tb2R1bGVzL2FkbS16aXAvdXRpbC9kZWNvZGVyLmpzIiwgIi4uLy4uLy4uLy4uL0RldmVsb3Blci9SYXljYXN0IEV4dGVuc2lvbnMvY2F0YWJ1cy1zdGF0dXMvbm9kZV9tb2R1bGVzL2FkbS16aXAvdXRpbC9pbmRleC5qcyIsICIuLi8uLi8uLi8uLi9EZXZlbG9wZXIvUmF5Y2FzdCBFeHRlbnNpb25zL2NhdGFidXMtc3RhdHVzL25vZGVfbW9kdWxlcy9hZG0temlwL2hlYWRlcnMvZW50cnlIZWFkZXIuanMiLCAiLi4vLi4vLi4vLi4vRGV2ZWxvcGVyL1JheWNhc3QgRXh0ZW5zaW9ucy9jYXRhYnVzLXN0YXR1cy9ub2RlX21vZHVsZXMvYWRtLXppcC9oZWFkZXJzL21haW5IZWFkZXIuanMiLCAiLi4vLi4vLi4vLi4vRGV2ZWxvcGVyL1JheWNhc3QgRXh0ZW5zaW9ucy9jYXRhYnVzLXN0YXR1cy9ub2RlX21vZHVsZXMvYWRtLXppcC9oZWFkZXJzL2luZGV4LmpzIiwgIi4uLy4uLy4uLy4uL0RldmVsb3Blci9SYXljYXN0IEV4dGVuc2lvbnMvY2F0YWJ1cy1zdGF0dXMvbm9kZV9tb2R1bGVzL2FkbS16aXAvbWV0aG9kcy9kZWZsYXRlci5qcyIsICIuLi8uLi8uLi8uLi9EZXZlbG9wZXIvUmF5Y2FzdCBFeHRlbnNpb25zL2NhdGFidXMtc3RhdHVzL25vZGVfbW9kdWxlcy9hZG0temlwL21ldGhvZHMvaW5mbGF0ZXIuanMiLCAiLi4vLi4vLi4vLi4vRGV2ZWxvcGVyL1JheWNhc3QgRXh0ZW5zaW9ucy9jYXRhYnVzLXN0YXR1cy9ub2RlX21vZHVsZXMvYWRtLXppcC9tZXRob2RzL3ppcGNyeXB0by5qcyIsICIuLi8uLi8uLi8uLi9EZXZlbG9wZXIvUmF5Y2FzdCBFeHRlbnNpb25zL2NhdGFidXMtc3RhdHVzL25vZGVfbW9kdWxlcy9hZG0temlwL21ldGhvZHMvaW5kZXguanMiLCAiLi4vLi4vLi4vLi4vRGV2ZWxvcGVyL1JheWNhc3QgRXh0ZW5zaW9ucy9jYXRhYnVzLXN0YXR1cy9ub2RlX21vZHVsZXMvYWRtLXppcC96aXBFbnRyeS5qcyIsICIuLi8uLi8uLi8uLi9EZXZlbG9wZXIvUmF5Y2FzdCBFeHRlbnNpb25zL2NhdGFidXMtc3RhdHVzL25vZGVfbW9kdWxlcy9hZG0temlwL3ppcEZpbGUuanMiLCAiLi4vLi4vLi4vLi4vRGV2ZWxvcGVyL1JheWNhc3QgRXh0ZW5zaW9ucy9jYXRhYnVzLXN0YXR1cy9ub2RlX21vZHVsZXMvYWRtLXppcC9hZG0temlwLmpzIiwgIi4uLy4uLy4uLy4uL0RldmVsb3Blci9SYXljYXN0IEV4dGVuc2lvbnMvY2F0YWJ1cy1zdGF0dXMvbm9kZV9tb2R1bGVzL0Bwcm90b2J1ZmpzL2FzcHJvbWlzZS9pbmRleC5qcyIsICIuLi8uLi8uLi8uLi9EZXZlbG9wZXIvUmF5Y2FzdCBFeHRlbnNpb25zL2NhdGFidXMtc3RhdHVzL25vZGVfbW9kdWxlcy9AcHJvdG9idWZqcy9iYXNlNjQvaW5kZXguanMiLCAiLi4vLi4vLi4vLi4vRGV2ZWxvcGVyL1JheWNhc3QgRXh0ZW5zaW9ucy9jYXRhYnVzLXN0YXR1cy9ub2RlX21vZHVsZXMvQHByb3RvYnVmanMvZXZlbnRlbWl0dGVyL2luZGV4LmpzIiwgIi4uLy4uLy4uLy4uL0RldmVsb3Blci9SYXljYXN0IEV4dGVuc2lvbnMvY2F0YWJ1cy1zdGF0dXMvbm9kZV9tb2R1bGVzL0Bwcm90b2J1ZmpzL2Zsb2F0L2luZGV4LmpzIiwgIi4uLy4uLy4uLy4uL0RldmVsb3Blci9SYXljYXN0IEV4dGVuc2lvbnMvY2F0YWJ1cy1zdGF0dXMvbm9kZV9tb2R1bGVzL0Bwcm90b2J1ZmpzL2lucXVpcmUvaW5kZXguanMiLCAiLi4vLi4vLi4vLi4vRGV2ZWxvcGVyL1JheWNhc3QgRXh0ZW5zaW9ucy9jYXRhYnVzLXN0YXR1cy9ub2RlX21vZHVsZXMvQHByb3RvYnVmanMvdXRmOC9pbmRleC5qcyIsICIuLi8uLi8uLi8uLi9EZXZlbG9wZXIvUmF5Y2FzdCBFeHRlbnNpb25zL2NhdGFidXMtc3RhdHVzL25vZGVfbW9kdWxlcy9AcHJvdG9idWZqcy9wb29sL2luZGV4LmpzIiwgIi4uLy4uLy4uLy4uL0RldmVsb3Blci9SYXljYXN0IEV4dGVuc2lvbnMvY2F0YWJ1cy1zdGF0dXMvbm9kZV9tb2R1bGVzL3Byb3RvYnVmanMvc3JjL3V0aWwvbG9uZ2JpdHMuanMiLCAiLi4vLi4vLi4vLi4vRGV2ZWxvcGVyL1JheWNhc3QgRXh0ZW5zaW9ucy9jYXRhYnVzLXN0YXR1cy9ub2RlX21vZHVsZXMvcHJvdG9idWZqcy9zcmMvdXRpbC9taW5pbWFsLmpzIiwgIi4uLy4uLy4uLy4uL0RldmVsb3Blci9SYXljYXN0IEV4dGVuc2lvbnMvY2F0YWJ1cy1zdGF0dXMvbm9kZV9tb2R1bGVzL3Byb3RvYnVmanMvc3JjL3dyaXRlci5qcyIsICIuLi8uLi8uLi8uLi9EZXZlbG9wZXIvUmF5Y2FzdCBFeHRlbnNpb25zL2NhdGFidXMtc3RhdHVzL25vZGVfbW9kdWxlcy9wcm90b2J1ZmpzL3NyYy93cml0ZXJfYnVmZmVyLmpzIiwgIi4uLy4uLy4uLy4uL0RldmVsb3Blci9SYXljYXN0IEV4dGVuc2lvbnMvY2F0YWJ1cy1zdGF0dXMvbm9kZV9tb2R1bGVzL3Byb3RvYnVmanMvc3JjL3JlYWRlci5qcyIsICIuLi8uLi8uLi8uLi9EZXZlbG9wZXIvUmF5Y2FzdCBFeHRlbnNpb25zL2NhdGFidXMtc3RhdHVzL25vZGVfbW9kdWxlcy9wcm90b2J1ZmpzL3NyYy9yZWFkZXJfYnVmZmVyLmpzIiwgIi4uLy4uLy4uLy4uL0RldmVsb3Blci9SYXljYXN0IEV4dGVuc2lvbnMvY2F0YWJ1cy1zdGF0dXMvbm9kZV9tb2R1bGVzL3Byb3RvYnVmanMvc3JjL3JwYy9zZXJ2aWNlLmpzIiwgIi4uLy4uLy4uLy4uL0RldmVsb3Blci9SYXljYXN0IEV4dGVuc2lvbnMvY2F0YWJ1cy1zdGF0dXMvbm9kZV9tb2R1bGVzL3Byb3RvYnVmanMvc3JjL3JwYy5qcyIsICIuLi8uLi8uLi8uLi9EZXZlbG9wZXIvUmF5Y2FzdCBFeHRlbnNpb25zL2NhdGFidXMtc3RhdHVzL25vZGVfbW9kdWxlcy9wcm90b2J1ZmpzL3NyYy9yb290cy5qcyIsICIuLi8uLi8uLi8uLi9EZXZlbG9wZXIvUmF5Y2FzdCBFeHRlbnNpb25zL2NhdGFidXMtc3RhdHVzL25vZGVfbW9kdWxlcy9wcm90b2J1ZmpzL3NyYy9pbmRleC1taW5pbWFsLmpzIiwgIi4uLy4uLy4uLy4uL0RldmVsb3Blci9SYXljYXN0IEV4dGVuc2lvbnMvY2F0YWJ1cy1zdGF0dXMvbm9kZV9tb2R1bGVzL3Byb3RvYnVmanMvbWluaW1hbC5qcyIsICIuLi8uLi8uLi8uLi9EZXZlbG9wZXIvUmF5Y2FzdCBFeHRlbnNpb25zL2NhdGFidXMtc3RhdHVzL25vZGVfbW9kdWxlcy9ndGZzLXJ0LWJpbmRpbmdzL2d0ZnMtcmVhbHRpbWUucGJmLmpzIiwgIi4uLy4uLy4uLy4uL0RldmVsb3Blci9SYXljYXN0IEV4dGVuc2lvbnMvY2F0YWJ1cy1zdGF0dXMvbm9kZV9tb2R1bGVzL2d0ZnMtcnQtYmluZGluZ3MvaW5kZXguanMiLCAiLi4vLi4vLi4vLi4vRGV2ZWxvcGVyL1JheWNhc3QgRXh0ZW5zaW9ucy9jYXRhYnVzLXN0YXR1cy9ub2RlX21vZHVsZXMvZGF5anMvZGF5anMubWluLmpzIiwgIi4uLy4uLy4uLy4uL0RldmVsb3Blci9SYXljYXN0IEV4dGVuc2lvbnMvY2F0YWJ1cy1zdGF0dXMvbm9kZV9tb2R1bGVzL2RheWpzL3BsdWdpbi9yZWxhdGl2ZVRpbWUuanMiLCAiLi4vLi4vLi4vLi4vRGV2ZWxvcGVyL1JheWNhc3QgRXh0ZW5zaW9ucy9jYXRhYnVzLXN0YXR1cy9ub2RlX21vZHVsZXMvZGF5anMvcGx1Z2luL2N1c3RvbVBhcnNlRm9ybWF0LmpzIiwgIi4uLy4uLy4uLy4uL0RldmVsb3Blci9SYXljYXN0IEV4dGVuc2lvbnMvY2F0YWJ1cy1zdGF0dXMvbm9kZV9tb2R1bGVzL2RheWpzL3BsdWdpbi91dGMuanMiLCAiLi4vLi4vLi4vLi4vRGV2ZWxvcGVyL1JheWNhc3QgRXh0ZW5zaW9ucy9jYXRhYnVzLXN0YXR1cy9ub2RlX21vZHVsZXMvZGF5anMvcGx1Z2luL3RpbWV6b25lLmpzIiwgIi4uLy4uLy4uLy4uL0RldmVsb3Blci9SYXljYXN0IEV4dGVuc2lvbnMvY2F0YWJ1cy1zdGF0dXMvc3JjL3JvdXRlLWxvb2t1cC50c3giLCAiLi4vLi4vLi4vLi4vRGV2ZWxvcGVyL1JheWNhc3QgRXh0ZW5zaW9ucy9jYXRhYnVzLXN0YXR1cy9zcmMvbGliL2d0ZnNTdGF0aWMudHMiLCAiLi4vLi4vLi4vLi4vRGV2ZWxvcGVyL1JheWNhc3QgRXh0ZW5zaW9ucy9jYXRhYnVzLXN0YXR1cy9ub2RlX21vZHVsZXMvbm9kZS1mZXRjaC9zcmMvaW5kZXguanMiLCAiLi4vLi4vLi4vLi4vRGV2ZWxvcGVyL1JheWNhc3QgRXh0ZW5zaW9ucy9jYXRhYnVzLXN0YXR1cy9ub2RlX21vZHVsZXMvZGF0YS11cmktdG8tYnVmZmVyL3NyYy9pbmRleC50cyIsICIuLi8uLi8uLi8uLi9EZXZlbG9wZXIvUmF5Y2FzdCBFeHRlbnNpb25zL2NhdGFidXMtc3RhdHVzL25vZGVfbW9kdWxlcy9ub2RlLWZldGNoL3NyYy9ib2R5LmpzIiwgIi4uLy4uLy4uLy4uL0RldmVsb3Blci9SYXljYXN0IEV4dGVuc2lvbnMvY2F0YWJ1cy1zdGF0dXMvbm9kZV9tb2R1bGVzL25vZGUtZmV0Y2gvc3JjL2Vycm9ycy9iYXNlLmpzIiwgIi4uLy4uLy4uLy4uL0RldmVsb3Blci9SYXljYXN0IEV4dGVuc2lvbnMvY2F0YWJ1cy1zdGF0dXMvbm9kZV9tb2R1bGVzL25vZGUtZmV0Y2gvc3JjL2Vycm9ycy9mZXRjaC1lcnJvci5qcyIsICIuLi8uLi8uLi8uLi9EZXZlbG9wZXIvUmF5Y2FzdCBFeHRlbnNpb25zL2NhdGFidXMtc3RhdHVzL25vZGVfbW9kdWxlcy9ub2RlLWZldGNoL3NyYy91dGlscy9pcy5qcyIsICIuLi8uLi8uLi8uLi9EZXZlbG9wZXIvUmF5Y2FzdCBFeHRlbnNpb25zL2NhdGFidXMtc3RhdHVzL25vZGVfbW9kdWxlcy9ub2RlLWZldGNoL3NyYy9oZWFkZXJzLmpzIiwgIi4uLy4uLy4uLy4uL0RldmVsb3Blci9SYXljYXN0IEV4dGVuc2lvbnMvY2F0YWJ1cy1zdGF0dXMvbm9kZV9tb2R1bGVzL25vZGUtZmV0Y2gvc3JjL3V0aWxzL2lzLXJlZGlyZWN0LmpzIiwgIi4uLy4uLy4uLy4uL0RldmVsb3Blci9SYXljYXN0IEV4dGVuc2lvbnMvY2F0YWJ1cy1zdGF0dXMvbm9kZV9tb2R1bGVzL25vZGUtZmV0Y2gvc3JjL3Jlc3BvbnNlLmpzIiwgIi4uLy4uLy4uLy4uL0RldmVsb3Blci9SYXljYXN0IEV4dGVuc2lvbnMvY2F0YWJ1cy1zdGF0dXMvbm9kZV9tb2R1bGVzL25vZGUtZmV0Y2gvc3JjL3JlcXVlc3QuanMiLCAiLi4vLi4vLi4vLi4vRGV2ZWxvcGVyL1JheWNhc3QgRXh0ZW5zaW9ucy9jYXRhYnVzLXN0YXR1cy9ub2RlX21vZHVsZXMvbm9kZS1mZXRjaC9zcmMvdXRpbHMvZ2V0LXNlYXJjaC5qcyIsICIuLi8uLi8uLi8uLi9EZXZlbG9wZXIvUmF5Y2FzdCBFeHRlbnNpb25zL2NhdGFidXMtc3RhdHVzL25vZGVfbW9kdWxlcy9ub2RlLWZldGNoL3NyYy91dGlscy9yZWZlcnJlci5qcyIsICIuLi8uLi8uLi8uLi9EZXZlbG9wZXIvUmF5Y2FzdCBFeHRlbnNpb25zL2NhdGFidXMtc3RhdHVzL25vZGVfbW9kdWxlcy9ub2RlLWZldGNoL3NyYy9lcnJvcnMvYWJvcnQtZXJyb3IuanMiLCAiLi4vLi4vLi4vLi4vRGV2ZWxvcGVyL1JheWNhc3QgRXh0ZW5zaW9ucy9jYXRhYnVzLXN0YXR1cy9ub2RlX21vZHVsZXMvY3N2LXBhcnNlL2xpYi9hcGkvQ3N2RXJyb3IuanMiLCAiLi4vLi4vLi4vLi4vRGV2ZWxvcGVyL1JheWNhc3QgRXh0ZW5zaW9ucy9jYXRhYnVzLXN0YXR1cy9ub2RlX21vZHVsZXMvY3N2LXBhcnNlL2xpYi91dGlscy9pc19vYmplY3QuanMiLCAiLi4vLi4vLi4vLi4vRGV2ZWxvcGVyL1JheWNhc3QgRXh0ZW5zaW9ucy9jYXRhYnVzLXN0YXR1cy9ub2RlX21vZHVsZXMvY3N2LXBhcnNlL2xpYi9hcGkvbm9ybWFsaXplX2NvbHVtbnNfYXJyYXkuanMiLCAiLi4vLi4vLi4vLi4vRGV2ZWxvcGVyL1JheWNhc3QgRXh0ZW5zaW9ucy9jYXRhYnVzLXN0YXR1cy9ub2RlX21vZHVsZXMvY3N2LXBhcnNlL2xpYi91dGlscy9SZXNpemVhYmxlQnVmZmVyLmpzIiwgIi4uLy4uLy4uLy4uL0RldmVsb3Blci9SYXljYXN0IEV4dGVuc2lvbnMvY2F0YWJ1cy1zdGF0dXMvbm9kZV9tb2R1bGVzL2Nzdi1wYXJzZS9saWIvYXBpL2luaXRfc3RhdGUuanMiLCAiLi4vLi4vLi4vLi4vRGV2ZWxvcGVyL1JheWNhc3QgRXh0ZW5zaW9ucy9jYXRhYnVzLXN0YXR1cy9ub2RlX21vZHVsZXMvY3N2LXBhcnNlL2xpYi91dGlscy91bmRlcnNjb3JlLmpzIiwgIi4uLy4uLy4uLy4uL0RldmVsb3Blci9SYXljYXN0IEV4dGVuc2lvbnMvY2F0YWJ1cy1zdGF0dXMvbm9kZV9tb2R1bGVzL2Nzdi1wYXJzZS9saWIvYXBpL25vcm1hbGl6ZV9vcHRpb25zLmpzIiwgIi4uLy4uLy4uLy4uL0RldmVsb3Blci9SYXljYXN0IEV4dGVuc2lvbnMvY2F0YWJ1cy1zdGF0dXMvbm9kZV9tb2R1bGVzL2Nzdi1wYXJzZS9saWIvYXBpL2luZGV4LmpzIiwgIi4uLy4uLy4uLy4uL0RldmVsb3Blci9SYXljYXN0IEV4dGVuc2lvbnMvY2F0YWJ1cy1zdGF0dXMvbm9kZV9tb2R1bGVzL2Nzdi1wYXJzZS9saWIvc3luYy5qcyIsICIuLi8uLi8uLi8uLi9EZXZlbG9wZXIvUmF5Y2FzdCBFeHRlbnNpb25zL2NhdGFidXMtc3RhdHVzL3NyYy9saWIvcmVhbHRpbWUudHMiLCAiLi4vLi4vLi4vLi4vRGV2ZWxvcGVyL1JheWNhc3QgRXh0ZW5zaW9ucy9jYXRhYnVzLXN0YXR1cy9zcmMvbGliL3V0aWxzLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJleHBvcnQgZnVuY3Rpb24gbm9vcCgpOiB1bmRlZmluZWQge1xuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuIiwgImltcG9ydCB7IG5vb3AgfSBmcm9tICcuLi8uLi91dGlscyc7XG5pbXBvcnQgeyBBc3NlcnRpb25FcnJvciB9IGZyb20gJy4uLy4uL3N0dWIvYXNzZXJ0JztcblxuZXhwb3J0IGZ1bmN0aW9uIHR5cGVJc09iamVjdCh4OiBhbnkpOiB4IGlzIG9iamVjdCB7XG4gIHJldHVybiAodHlwZW9mIHggPT09ICdvYmplY3QnICYmIHggIT09IG51bGwpIHx8IHR5cGVvZiB4ID09PSAnZnVuY3Rpb24nO1xufVxuXG5leHBvcnQgY29uc3QgcmV0aHJvd0Fzc2VydGlvbkVycm9yUmVqZWN0aW9uOiAoZTogYW55KSA9PiB2b2lkID1cbiAgREVCVUcgPyBlID0+IHtcbiAgICAvLyBVc2VkIHRocm91Z2hvdXQgdGhlIHJlZmVyZW5jZSBpbXBsZW1lbnRhdGlvbiwgYXMgYC5jYXRjaChyZXRocm93QXNzZXJ0aW9uRXJyb3JSZWplY3Rpb24pYCwgdG8gZW5zdXJlIGFueSBlcnJvcnNcbiAgICAvLyBnZXQgc2hvd24uIFRoZXJlIGFyZSBwbGFjZXMgaW4gdGhlIHNwZWMgd2hlcmUgd2UgZG8gcHJvbWlzZSB0cmFuc2Zvcm1hdGlvbnMgYW5kIHB1cnBvc2VmdWxseSBpZ25vcmUgb3IgZG9uJ3RcbiAgICAvLyBleHBlY3QgYW55IGVycm9ycywgYnV0IGFzc2VydGlvbiBlcnJvcnMgYXJlIGFsd2F5cyBwcm9ibGVtYXRpYy5cbiAgICBpZiAoZSAmJiBlIGluc3RhbmNlb2YgQXNzZXJ0aW9uRXJyb3IpIHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aHJvdyBlO1xuICAgICAgfSwgMCk7XG4gICAgfVxuICB9IDogbm9vcDtcblxuZXhwb3J0IGZ1bmN0aW9uIHNldEZ1bmN0aW9uTmFtZShmbjogRnVuY3Rpb24sIG5hbWU6IHN0cmluZyk6IHZvaWQge1xuICB0cnkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmbiwgJ25hbWUnLCB7XG4gICAgICB2YWx1ZTogbmFtZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICB9IGNhdGNoIHtcbiAgICAvLyBUaGlzIHByb3BlcnR5IGlzIG5vbi1jb25maWd1cmFibGUgaW4gb2xkZXIgYnJvd3NlcnMsIHNvIGlnbm9yZSBpZiB0aGlzIHRocm93cy5cbiAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9GdW5jdGlvbi9uYW1lI2Jyb3dzZXJfY29tcGF0aWJpbGl0eVxuICB9XG59XG4iLCAiaW1wb3J0IHsgcmV0aHJvd0Fzc2VydGlvbkVycm9yUmVqZWN0aW9uIH0gZnJvbSAnLi9taXNjZWxsYW5lb3VzJztcbmltcG9ydCBhc3NlcnQgZnJvbSAnLi4vLi4vc3R1Yi9hc3NlcnQnO1xuXG5jb25zdCBvcmlnaW5hbFByb21pc2UgPSBQcm9taXNlO1xuY29uc3Qgb3JpZ2luYWxQcm9taXNlVGhlbiA9IFByb21pc2UucHJvdG90eXBlLnRoZW47XG5jb25zdCBvcmlnaW5hbFByb21pc2VSZWplY3QgPSBQcm9taXNlLnJlamVjdC5iaW5kKG9yaWdpbmFsUHJvbWlzZSk7XG5cbi8vIGh0dHBzOi8vd2ViaWRsLnNwZWMud2hhdHdnLm9yZy8jYS1uZXctcHJvbWlzZVxuZXhwb3J0IGZ1bmN0aW9uIG5ld1Byb21pc2U8VD4oZXhlY3V0b3I6IChcbiAgcmVzb2x2ZTogKHZhbHVlOiBUIHwgUHJvbWlzZUxpa2U8VD4pID0+IHZvaWQsXG4gIHJlamVjdDogKHJlYXNvbj86IGFueSkgPT4gdm9pZFxuKSA9PiB2b2lkKTogUHJvbWlzZTxUPiB7XG4gIHJldHVybiBuZXcgb3JpZ2luYWxQcm9taXNlKGV4ZWN1dG9yKTtcbn1cblxuLy8gaHR0cHM6Ly93ZWJpZGwuc3BlYy53aGF0d2cub3JnLyNhLXByb21pc2UtcmVzb2x2ZWQtd2l0aFxuZXhwb3J0IGZ1bmN0aW9uIHByb21pc2VSZXNvbHZlZFdpdGg8VD4odmFsdWU6IFQgfCBQcm9taXNlTGlrZTxUPik6IFByb21pc2U8VD4ge1xuICByZXR1cm4gbmV3UHJvbWlzZShyZXNvbHZlID0+IHJlc29sdmUodmFsdWUpKTtcbn1cblxuLy8gaHR0cHM6Ly93ZWJpZGwuc3BlYy53aGF0d2cub3JnLyNhLXByb21pc2UtcmVqZWN0ZWQtd2l0aFxuZXhwb3J0IGZ1bmN0aW9uIHByb21pc2VSZWplY3RlZFdpdGg8VCA9IG5ldmVyPihyZWFzb246IGFueSk6IFByb21pc2U8VD4ge1xuICByZXR1cm4gb3JpZ2luYWxQcm9taXNlUmVqZWN0KHJlYXNvbik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBQZXJmb3JtUHJvbWlzZVRoZW48VCwgVFJlc3VsdDEgPSBULCBUUmVzdWx0MiA9IG5ldmVyPihcbiAgcHJvbWlzZTogUHJvbWlzZTxUPixcbiAgb25GdWxmaWxsZWQ/OiAodmFsdWU6IFQpID0+IFRSZXN1bHQxIHwgUHJvbWlzZUxpa2U8VFJlc3VsdDE+LFxuICBvblJlamVjdGVkPzogKHJlYXNvbjogYW55KSA9PiBUUmVzdWx0MiB8IFByb21pc2VMaWtlPFRSZXN1bHQyPik6IFByb21pc2U8VFJlc3VsdDEgfCBUUmVzdWx0Mj4ge1xuICAvLyBUaGVyZSBkb2Vzbid0IGFwcGVhciB0byBiZSBhbnkgd2F5IHRvIGNvcnJlY3RseSBlbXVsYXRlIHRoZSBiZWhhdmlvdXIgZnJvbSBKYXZhU2NyaXB0LCBzbyB0aGlzIGlzIGp1c3QgYW5cbiAgLy8gYXBwcm94aW1hdGlvbi5cbiAgcmV0dXJuIG9yaWdpbmFsUHJvbWlzZVRoZW4uY2FsbChwcm9taXNlLCBvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCkgYXMgUHJvbWlzZTxUUmVzdWx0MSB8IFRSZXN1bHQyPjtcbn1cblxuLy8gQmx1ZWJpcmQgbG9ncyBhIHdhcm5pbmcgd2hlbiBhIHByb21pc2UgaXMgY3JlYXRlZCB3aXRoaW4gYSBmdWxmaWxsbWVudCBoYW5kbGVyLCBidXQgdGhlbiBpc24ndCByZXR1cm5lZFxuLy8gZnJvbSB0aGF0IGhhbmRsZXIuIFRvIHByZXZlbnQgdGhpcywgcmV0dXJuIG51bGwgaW5zdGVhZCBvZiB2b2lkIGZyb20gYWxsIGhhbmRsZXJzLlxuLy8gaHR0cDovL2JsdWViaXJkanMuY29tL2RvY3Mvd2FybmluZy1leHBsYW5hdGlvbnMuaHRtbCN3YXJuaW5nLWEtcHJvbWlzZS13YXMtY3JlYXRlZC1pbi1hLWhhbmRsZXItYnV0LXdhcy1ub3QtcmV0dXJuZWQtZnJvbS1pdFxuZXhwb3J0IGZ1bmN0aW9uIHVwb25Qcm9taXNlPFQ+KFxuICBwcm9taXNlOiBQcm9taXNlPFQ+LFxuICBvbkZ1bGZpbGxlZD86ICh2YWx1ZTogVCkgPT4gbnVsbCB8IFByb21pc2VMaWtlPG51bGw+LFxuICBvblJlamVjdGVkPzogKHJlYXNvbjogYW55KSA9PiBudWxsIHwgUHJvbWlzZUxpa2U8bnVsbD4pOiB2b2lkIHtcbiAgUGVyZm9ybVByb21pc2VUaGVuKFxuICAgIFBlcmZvcm1Qcm9taXNlVGhlbihwcm9taXNlLCBvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCksXG4gICAgdW5kZWZpbmVkLFxuICAgIHJldGhyb3dBc3NlcnRpb25FcnJvclJlamVjdGlvblxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBvbkZ1bGZpbGxtZW50PFQ+KHByb21pc2U6IFByb21pc2U8VD4sIG9uRnVsZmlsbGVkOiAodmFsdWU6IFQpID0+IG51bGwgfCBQcm9taXNlTGlrZTxudWxsPik6IHZvaWQge1xuICB1cG9uUHJvbWlzZShwcm9taXNlLCBvbkZ1bGZpbGxlZCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cG9uUmVqZWN0aW9uKHByb21pc2U6IFByb21pc2U8dW5rbm93bj4sIG9uUmVqZWN0ZWQ6IChyZWFzb246IGFueSkgPT4gbnVsbCB8IFByb21pc2VMaWtlPG51bGw+KTogdm9pZCB7XG4gIHVwb25Qcm9taXNlKHByb21pc2UsIHVuZGVmaW5lZCwgb25SZWplY3RlZCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm1Qcm9taXNlV2l0aDxULCBUUmVzdWx0MSA9IFQsIFRSZXN1bHQyID0gbmV2ZXI+KFxuICBwcm9taXNlOiBQcm9taXNlPFQ+LFxuICBmdWxmaWxsbWVudEhhbmRsZXI/OiAodmFsdWU6IFQpID0+IFRSZXN1bHQxIHwgUHJvbWlzZUxpa2U8VFJlc3VsdDE+LFxuICByZWplY3Rpb25IYW5kbGVyPzogKHJlYXNvbjogYW55KSA9PiBUUmVzdWx0MiB8IFByb21pc2VMaWtlPFRSZXN1bHQyPik6IFByb21pc2U8VFJlc3VsdDEgfCBUUmVzdWx0Mj4ge1xuICByZXR1cm4gUGVyZm9ybVByb21pc2VUaGVuKHByb21pc2UsIGZ1bGZpbGxtZW50SGFuZGxlciwgcmVqZWN0aW9uSGFuZGxlcik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRQcm9taXNlSXNIYW5kbGVkVG9UcnVlKHByb21pc2U6IFByb21pc2U8dW5rbm93bj4pOiB2b2lkIHtcbiAgUGVyZm9ybVByb21pc2VUaGVuKHByb21pc2UsIHVuZGVmaW5lZCwgcmV0aHJvd0Fzc2VydGlvbkVycm9yUmVqZWN0aW9uKTtcbn1cblxubGV0IF9xdWV1ZU1pY3JvdGFzazogKGNhbGxiYWNrOiAoKSA9PiB2b2lkKSA9PiB2b2lkID0gY2FsbGJhY2sgPT4ge1xuICBpZiAodHlwZW9mIHF1ZXVlTWljcm90YXNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgX3F1ZXVlTWljcm90YXNrID0gcXVldWVNaWNyb3Rhc2s7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgcmVzb2x2ZWRQcm9taXNlID0gcHJvbWlzZVJlc29sdmVkV2l0aCh1bmRlZmluZWQpO1xuICAgIF9xdWV1ZU1pY3JvdGFzayA9IGNiID0+IFBlcmZvcm1Qcm9taXNlVGhlbihyZXNvbHZlZFByb21pc2UsIGNiKTtcbiAgfVxuICByZXR1cm4gX3F1ZXVlTWljcm90YXNrKGNhbGxiYWNrKTtcbn07XG5cbmV4cG9ydCB7IF9xdWV1ZU1pY3JvdGFzayBhcyBxdWV1ZU1pY3JvdGFzayB9O1xuXG5leHBvcnQgZnVuY3Rpb24gcmVmbGVjdENhbGw8VCwgQSBleHRlbmRzIGFueVtdLCBSPihGOiAodGhpczogVCwgLi4uZm5BcmdzOiBBKSA9PiBSLCBWOiBULCBhcmdzOiBBKTogUiB7XG4gIGlmICh0eXBlb2YgRiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IGlzIG5vdCBhIGZ1bmN0aW9uJyk7XG4gIH1cbiAgcmV0dXJuIEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseS5jYWxsKEYsIFYsIGFyZ3MpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcHJvbWlzZUNhbGw8VCwgQSBleHRlbmRzIGFueVtdLCBSPihGOiAodGhpczogVCwgLi4uZm5BcmdzOiBBKSA9PiBSIHwgUHJvbWlzZUxpa2U8Uj4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWOiBULFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJnczogQSk6IFByb21pc2U8Uj4ge1xuICBhc3NlcnQodHlwZW9mIEYgPT09ICdmdW5jdGlvbicpO1xuICBhc3NlcnQoViAhPT0gdW5kZWZpbmVkKTtcbiAgYXNzZXJ0KEFycmF5LmlzQXJyYXkoYXJncykpO1xuICB0cnkge1xuICAgIHJldHVybiBwcm9taXNlUmVzb2x2ZWRXaXRoKHJlZmxlY3RDYWxsKEYsIFYsIGFyZ3MpKTtcbiAgfSBjYXRjaCAodmFsdWUpIHtcbiAgICByZXR1cm4gcHJvbWlzZVJlamVjdGVkV2l0aCh2YWx1ZSk7XG4gIH1cbn1cbiIsICJpbXBvcnQgYXNzZXJ0IGZyb20gJy4uL3N0dWIvYXNzZXJ0JztcblxuLy8gT3JpZ2luYWwgZnJvbSBDaHJvbWl1bVxuLy8gaHR0cHM6Ly9jaHJvbWl1bS5nb29nbGVzb3VyY2UuY29tL2Nocm9taXVtL3NyYy8rLzBhZWU0NDM0YTRkYmE0MmE0MmFiYWVhOWJmYmMwY2QxOTZhNjNiYzEvdGhpcmRfcGFydHkvYmxpbmsvcmVuZGVyZXIvY29yZS9zdHJlYW1zL1NpbXBsZVF1ZXVlLmpzXG5cbmNvbnN0IFFVRVVFX01BWF9BUlJBWV9TSVpFID0gMTYzODQ7XG5cbmludGVyZmFjZSBOb2RlPFQ+IHtcbiAgX2VsZW1lbnRzOiBUW107XG4gIF9uZXh0OiBOb2RlPFQ+IHwgdW5kZWZpbmVkO1xufVxuXG4vKipcbiAqIFNpbXBsZSBxdWV1ZSBzdHJ1Y3R1cmUuXG4gKlxuICogQXZvaWRzIHNjYWxhYmlsaXR5IGlzc3VlcyB3aXRoIHVzaW5nIGEgcGFja2VkIGFycmF5IGRpcmVjdGx5IGJ5IHVzaW5nXG4gKiBtdWx0aXBsZSBhcnJheXMgaW4gYSBsaW5rZWQgbGlzdCBhbmQga2VlcGluZyB0aGUgYXJyYXkgc2l6ZSBib3VuZGVkLlxuICovXG5leHBvcnQgY2xhc3MgU2ltcGxlUXVldWU8VD4ge1xuICBwcml2YXRlIF9mcm9udDogTm9kZTxUPjtcbiAgcHJpdmF0ZSBfYmFjazogTm9kZTxUPjtcbiAgcHJpdmF0ZSBfY3Vyc29yID0gMDtcbiAgcHJpdmF0ZSBfc2l6ZSA9IDA7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgLy8gX2Zyb250IGFuZCBfYmFjayBhcmUgYWx3YXlzIGRlZmluZWQuXG4gICAgdGhpcy5fZnJvbnQgPSB7XG4gICAgICBfZWxlbWVudHM6IFtdLFxuICAgICAgX25leHQ6IHVuZGVmaW5lZFxuICAgIH07XG4gICAgdGhpcy5fYmFjayA9IHRoaXMuX2Zyb250O1xuICAgIC8vIFRoZSBjdXJzb3IgaXMgdXNlZCB0byBhdm9pZCBjYWxsaW5nIEFycmF5LnNoaWZ0KCkuXG4gICAgLy8gSXQgY29udGFpbnMgdGhlIGluZGV4IG9mIHRoZSBmcm9udCBlbGVtZW50IG9mIHRoZSBhcnJheSBpbnNpZGUgdGhlXG4gICAgLy8gZnJvbnQtbW9zdCBub2RlLiBJdCBpcyBhbHdheXMgaW4gdGhlIHJhbmdlIFswLCBRVUVVRV9NQVhfQVJSQVlfU0laRSkuXG4gICAgdGhpcy5fY3Vyc29yID0gMDtcbiAgICAvLyBXaGVuIHRoZXJlIGlzIG9ubHkgb25lIG5vZGUsIHNpemUgPT09IGVsZW1lbnRzLmxlbmd0aCAtIGN1cnNvci5cbiAgICB0aGlzLl9zaXplID0gMDtcbiAgfVxuXG4gIGdldCBsZW5ndGgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fc2l6ZTtcbiAgfVxuXG4gIC8vIEZvciBleGNlcHRpb24gc2FmZXR5LCB0aGlzIG1ldGhvZCBpcyBzdHJ1Y3R1cmVkIGluIG9yZGVyOlxuICAvLyAxLiBSZWFkIHN0YXRlXG4gIC8vIDIuIENhbGN1bGF0ZSByZXF1aXJlZCBzdGF0ZSBtdXRhdGlvbnNcbiAgLy8gMy4gUGVyZm9ybSBzdGF0ZSBtdXRhdGlvbnNcbiAgcHVzaChlbGVtZW50OiBUKTogdm9pZCB7XG4gICAgY29uc3Qgb2xkQmFjayA9IHRoaXMuX2JhY2s7XG4gICAgbGV0IG5ld0JhY2sgPSBvbGRCYWNrO1xuICAgIGFzc2VydChvbGRCYWNrLl9uZXh0ID09PSB1bmRlZmluZWQpO1xuICAgIGlmIChvbGRCYWNrLl9lbGVtZW50cy5sZW5ndGggPT09IFFVRVVFX01BWF9BUlJBWV9TSVpFIC0gMSkge1xuICAgICAgbmV3QmFjayA9IHtcbiAgICAgICAgX2VsZW1lbnRzOiBbXSxcbiAgICAgICAgX25leHQ6IHVuZGVmaW5lZFxuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBwdXNoKCkgaXMgdGhlIG11dGF0aW9uIG1vc3QgbGlrZWx5IHRvIHRocm93IGFuIGV4Y2VwdGlvbiwgc28gaXRcbiAgICAvLyBnb2VzIGZpcnN0LlxuICAgIG9sZEJhY2suX2VsZW1lbnRzLnB1c2goZWxlbWVudCk7XG4gICAgaWYgKG5ld0JhY2sgIT09IG9sZEJhY2spIHtcbiAgICAgIHRoaXMuX2JhY2sgPSBuZXdCYWNrO1xuICAgICAgb2xkQmFjay5fbmV4dCA9IG5ld0JhY2s7XG4gICAgfVxuICAgICsrdGhpcy5fc2l6ZTtcbiAgfVxuXG4gIC8vIExpa2UgcHVzaCgpLCBzaGlmdCgpIGZvbGxvd3MgdGhlIHJlYWQgLT4gY2FsY3VsYXRlIC0+IG11dGF0ZSBwYXR0ZXJuIGZvclxuICAvLyBleGNlcHRpb24gc2FmZXR5LlxuICBzaGlmdCgpOiBUIHtcbiAgICBhc3NlcnQodGhpcy5fc2l6ZSA+IDApOyAvLyBtdXN0IG5vdCBiZSBjYWxsZWQgb24gYW4gZW1wdHkgcXVldWVcblxuICAgIGNvbnN0IG9sZEZyb250ID0gdGhpcy5fZnJvbnQ7XG4gICAgbGV0IG5ld0Zyb250ID0gb2xkRnJvbnQ7XG4gICAgY29uc3Qgb2xkQ3Vyc29yID0gdGhpcy5fY3Vyc29yO1xuICAgIGxldCBuZXdDdXJzb3IgPSBvbGRDdXJzb3IgKyAxO1xuXG4gICAgY29uc3QgZWxlbWVudHMgPSBvbGRGcm9udC5fZWxlbWVudHM7XG4gICAgY29uc3QgZWxlbWVudCA9IGVsZW1lbnRzW29sZEN1cnNvcl07XG5cbiAgICBpZiAobmV3Q3Vyc29yID09PSBRVUVVRV9NQVhfQVJSQVlfU0laRSkge1xuICAgICAgYXNzZXJ0KGVsZW1lbnRzLmxlbmd0aCA9PT0gUVVFVUVfTUFYX0FSUkFZX1NJWkUpO1xuICAgICAgYXNzZXJ0KG9sZEZyb250Ll9uZXh0ICE9PSB1bmRlZmluZWQpO1xuICAgICAgbmV3RnJvbnQgPSBvbGRGcm9udC5fbmV4dCE7XG4gICAgICBuZXdDdXJzb3IgPSAwO1xuICAgIH1cblxuICAgIC8vIE5vIG11dGF0aW9ucyBiZWZvcmUgdGhpcyBwb2ludC5cbiAgICAtLXRoaXMuX3NpemU7XG4gICAgdGhpcy5fY3Vyc29yID0gbmV3Q3Vyc29yO1xuICAgIGlmIChvbGRGcm9udCAhPT0gbmV3RnJvbnQpIHtcbiAgICAgIHRoaXMuX2Zyb250ID0gbmV3RnJvbnQ7XG4gICAgfVxuXG4gICAgLy8gUGVybWl0IHNoaWZ0ZWQgZWxlbWVudCB0byBiZSBnYXJiYWdlIGNvbGxlY3RlZC5cbiAgICBlbGVtZW50c1tvbGRDdXJzb3JdID0gdW5kZWZpbmVkITtcblxuICAgIHJldHVybiBlbGVtZW50O1xuICB9XG5cbiAgLy8gVGhlIHRyaWNreSB0aGluZyBhYm91dCBmb3JFYWNoKCkgaXMgdGhhdCBpdCBjYW4gYmUgY2FsbGVkXG4gIC8vIHJlLWVudHJhbnRseS4gVGhlIHF1ZXVlIG1heSBiZSBtdXRhdGVkIGluc2lkZSB0aGUgY2FsbGJhY2suIEl0IGlzIGVhc3kgdG9cbiAgLy8gc2VlIHRoYXQgcHVzaCgpIHdpdGhpbiB0aGUgY2FsbGJhY2sgaGFzIG5vIG5lZ2F0aXZlIGVmZmVjdHMgc2luY2UgdGhlIGVuZFxuICAvLyBvZiB0aGUgcXVldWUgaXMgY2hlY2tlZCBmb3Igb24gZXZlcnkgaXRlcmF0aW9uLiBJZiBzaGlmdCgpIGlzIGNhbGxlZFxuICAvLyByZXBlYXRlZGx5IHdpdGhpbiB0aGUgY2FsbGJhY2sgdGhlbiB0aGUgbmV4dCBpdGVyYXRpb24gbWF5IHJldHVybiBhblxuICAvLyBlbGVtZW50IHRoYXQgaGFzIGJlZW4gcmVtb3ZlZC4gSW4gdGhpcyBjYXNlIHRoZSBjYWxsYmFjayB3aWxsIGJlIGNhbGxlZFxuICAvLyB3aXRoIHVuZGVmaW5lZCB2YWx1ZXMgdW50aWwgd2UgZWl0aGVyIFwiY2F0Y2ggdXBcIiB3aXRoIGVsZW1lbnRzIHRoYXQgc3RpbGxcbiAgLy8gZXhpc3Qgb3IgcmVhY2ggdGhlIGJhY2sgb2YgdGhlIHF1ZXVlLlxuICBmb3JFYWNoKGNhbGxiYWNrOiAoZWxlbWVudDogVCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIGxldCBpID0gdGhpcy5fY3Vyc29yO1xuICAgIGxldCBub2RlID0gdGhpcy5fZnJvbnQ7XG4gICAgbGV0IGVsZW1lbnRzID0gbm9kZS5fZWxlbWVudHM7XG4gICAgd2hpbGUgKGkgIT09IGVsZW1lbnRzLmxlbmd0aCB8fCBub2RlLl9uZXh0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmIChpID09PSBlbGVtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgYXNzZXJ0KG5vZGUuX25leHQgIT09IHVuZGVmaW5lZCk7XG4gICAgICAgIGFzc2VydChpID09PSBRVUVVRV9NQVhfQVJSQVlfU0laRSk7XG4gICAgICAgIG5vZGUgPSBub2RlLl9uZXh0ITtcbiAgICAgICAgZWxlbWVudHMgPSBub2RlLl9lbGVtZW50cztcbiAgICAgICAgaSA9IDA7XG4gICAgICAgIGlmIChlbGVtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY2FsbGJhY2soZWxlbWVudHNbaV0pO1xuICAgICAgKytpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFJldHVybiB0aGUgZWxlbWVudCB0aGF0IHdvdWxkIGJlIHJldHVybmVkIGlmIHNoaWZ0KCkgd2FzIGNhbGxlZCBub3csXG4gIC8vIHdpdGhvdXQgbW9kaWZ5aW5nIHRoZSBxdWV1ZS5cbiAgcGVlaygpOiBUIHtcbiAgICBhc3NlcnQodGhpcy5fc2l6ZSA+IDApOyAvLyBtdXN0IG5vdCBiZSBjYWxsZWQgb24gYW4gZW1wdHkgcXVldWVcblxuICAgIGNvbnN0IGZyb250ID0gdGhpcy5fZnJvbnQ7XG4gICAgY29uc3QgY3Vyc29yID0gdGhpcy5fY3Vyc29yO1xuICAgIHJldHVybiBmcm9udC5fZWxlbWVudHNbY3Vyc29yXTtcbiAgfVxufVxuIiwgImV4cG9ydCBjb25zdCBBYm9ydFN0ZXBzID0gU3ltYm9sKCdbW0Fib3J0U3RlcHNdXScpO1xuZXhwb3J0IGNvbnN0IEVycm9yU3RlcHMgPSBTeW1ib2woJ1tbRXJyb3JTdGVwc11dJyk7XG5leHBvcnQgY29uc3QgQ2FuY2VsU3RlcHMgPSBTeW1ib2woJ1tbQ2FuY2VsU3RlcHNdXScpO1xuZXhwb3J0IGNvbnN0IFB1bGxTdGVwcyA9IFN5bWJvbCgnW1tQdWxsU3RlcHNdXScpO1xuZXhwb3J0IGNvbnN0IFJlbGVhc2VTdGVwcyA9IFN5bWJvbCgnW1tSZWxlYXNlU3RlcHNdXScpO1xuIiwgImltcG9ydCBhc3NlcnQgZnJvbSAnLi4vLi4vc3R1Yi9hc3NlcnQnO1xuaW1wb3J0IHsgUmVhZGFibGVTdHJlYW0sIFJlYWRhYmxlU3RyZWFtQ2FuY2VsLCB0eXBlIFJlYWRhYmxlU3RyZWFtUmVhZGVyIH0gZnJvbSAnLi4vcmVhZGFibGUtc3RyZWFtJztcbmltcG9ydCB7IG5ld1Byb21pc2UsIHNldFByb21pc2VJc0hhbmRsZWRUb1RydWUgfSBmcm9tICcuLi9oZWxwZXJzL3dlYmlkbCc7XG5pbXBvcnQgeyBSZWxlYXNlU3RlcHMgfSBmcm9tICcuLi9hYnN0cmFjdC1vcHMvaW50ZXJuYWwtbWV0aG9kcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBSZWFkYWJsZVN0cmVhbVJlYWRlckdlbmVyaWNJbml0aWFsaXplPFI+KHJlYWRlcjogUmVhZGFibGVTdHJlYW1SZWFkZXI8Uj4sIHN0cmVhbTogUmVhZGFibGVTdHJlYW08Uj4pIHtcbiAgcmVhZGVyLl9vd25lclJlYWRhYmxlU3RyZWFtID0gc3RyZWFtO1xuICBzdHJlYW0uX3JlYWRlciA9IHJlYWRlcjtcblxuICBpZiAoc3RyZWFtLl9zdGF0ZSA9PT0gJ3JlYWRhYmxlJykge1xuICAgIGRlZmF1bHRSZWFkZXJDbG9zZWRQcm9taXNlSW5pdGlhbGl6ZShyZWFkZXIpO1xuICB9IGVsc2UgaWYgKHN0cmVhbS5fc3RhdGUgPT09ICdjbG9zZWQnKSB7XG4gICAgZGVmYXVsdFJlYWRlckNsb3NlZFByb21pc2VJbml0aWFsaXplQXNSZXNvbHZlZChyZWFkZXIpO1xuICB9IGVsc2Uge1xuICAgIGFzc2VydChzdHJlYW0uX3N0YXRlID09PSAnZXJyb3JlZCcpO1xuXG4gICAgZGVmYXVsdFJlYWRlckNsb3NlZFByb21pc2VJbml0aWFsaXplQXNSZWplY3RlZChyZWFkZXIsIHN0cmVhbS5fc3RvcmVkRXJyb3IpO1xuICB9XG59XG5cbi8vIEEgY2xpZW50IG9mIFJlYWRhYmxlU3RyZWFtRGVmYXVsdFJlYWRlciBhbmQgUmVhZGFibGVTdHJlYW1CWU9CUmVhZGVyIG1heSB1c2UgdGhlc2UgZnVuY3Rpb25zIGRpcmVjdGx5IHRvIGJ5cGFzcyBzdGF0ZVxuLy8gY2hlY2suXG5cbmV4cG9ydCBmdW5jdGlvbiBSZWFkYWJsZVN0cmVhbVJlYWRlckdlbmVyaWNDYW5jZWwocmVhZGVyOiBSZWFkYWJsZVN0cmVhbVJlYWRlcjxhbnk+LCByZWFzb246IGFueSk6IFByb21pc2U8dW5kZWZpbmVkPiB7XG4gIGNvbnN0IHN0cmVhbSA9IHJlYWRlci5fb3duZXJSZWFkYWJsZVN0cmVhbTtcbiAgYXNzZXJ0KHN0cmVhbSAhPT0gdW5kZWZpbmVkKTtcbiAgcmV0dXJuIFJlYWRhYmxlU3RyZWFtQ2FuY2VsKHN0cmVhbSwgcmVhc29uKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFJlYWRhYmxlU3RyZWFtUmVhZGVyR2VuZXJpY1JlbGVhc2UocmVhZGVyOiBSZWFkYWJsZVN0cmVhbVJlYWRlcjxhbnk+KSB7XG4gIGNvbnN0IHN0cmVhbSA9IHJlYWRlci5fb3duZXJSZWFkYWJsZVN0cmVhbTtcbiAgYXNzZXJ0KHN0cmVhbSAhPT0gdW5kZWZpbmVkKTtcbiAgYXNzZXJ0KHN0cmVhbS5fcmVhZGVyID09PSByZWFkZXIpO1xuXG4gIGlmIChzdHJlYW0uX3N0YXRlID09PSAncmVhZGFibGUnKSB7XG4gICAgZGVmYXVsdFJlYWRlckNsb3NlZFByb21pc2VSZWplY3QoXG4gICAgICByZWFkZXIsXG4gICAgICBuZXcgVHlwZUVycm9yKGBSZWFkZXIgd2FzIHJlbGVhc2VkIGFuZCBjYW4gbm8gbG9uZ2VyIGJlIHVzZWQgdG8gbW9uaXRvciB0aGUgc3RyZWFtJ3MgY2xvc2VkbmVzc2ApKTtcbiAgfSBlbHNlIHtcbiAgICBkZWZhdWx0UmVhZGVyQ2xvc2VkUHJvbWlzZVJlc2V0VG9SZWplY3RlZChcbiAgICAgIHJlYWRlcixcbiAgICAgIG5ldyBUeXBlRXJyb3IoYFJlYWRlciB3YXMgcmVsZWFzZWQgYW5kIGNhbiBubyBsb25nZXIgYmUgdXNlZCB0byBtb25pdG9yIHRoZSBzdHJlYW0ncyBjbG9zZWRuZXNzYCkpO1xuICB9XG5cbiAgc3RyZWFtLl9yZWFkYWJsZVN0cmVhbUNvbnRyb2xsZXJbUmVsZWFzZVN0ZXBzXSgpO1xuXG4gIHN0cmVhbS5fcmVhZGVyID0gdW5kZWZpbmVkO1xuICByZWFkZXIuX293bmVyUmVhZGFibGVTdHJlYW0gPSB1bmRlZmluZWQhO1xufVxuXG4vLyBIZWxwZXIgZnVuY3Rpb25zIGZvciB0aGUgcmVhZGVycy5cblxuZXhwb3J0IGZ1bmN0aW9uIHJlYWRlckxvY2tFeGNlcHRpb24obmFtZTogc3RyaW5nKTogVHlwZUVycm9yIHtcbiAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCAnICsgbmFtZSArICcgYSBzdHJlYW0gdXNpbmcgYSByZWxlYXNlZCByZWFkZXInKTtcbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9ucyBmb3IgdGhlIFJlYWRhYmxlU3RyZWFtRGVmYXVsdFJlYWRlci5cblxuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRSZWFkZXJDbG9zZWRQcm9taXNlSW5pdGlhbGl6ZShyZWFkZXI6IFJlYWRhYmxlU3RyZWFtUmVhZGVyPGFueT4pIHtcbiAgcmVhZGVyLl9jbG9zZWRQcm9taXNlID0gbmV3UHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgcmVhZGVyLl9jbG9zZWRQcm9taXNlX3Jlc29sdmUgPSByZXNvbHZlO1xuICAgIHJlYWRlci5fY2xvc2VkUHJvbWlzZV9yZWplY3QgPSByZWplY3Q7XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVmYXVsdFJlYWRlckNsb3NlZFByb21pc2VJbml0aWFsaXplQXNSZWplY3RlZChyZWFkZXI6IFJlYWRhYmxlU3RyZWFtUmVhZGVyPGFueT4sIHJlYXNvbjogYW55KSB7XG4gIGRlZmF1bHRSZWFkZXJDbG9zZWRQcm9taXNlSW5pdGlhbGl6ZShyZWFkZXIpO1xuICBkZWZhdWx0UmVhZGVyQ2xvc2VkUHJvbWlzZVJlamVjdChyZWFkZXIsIHJlYXNvbik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0UmVhZGVyQ2xvc2VkUHJvbWlzZUluaXRpYWxpemVBc1Jlc29sdmVkKHJlYWRlcjogUmVhZGFibGVTdHJlYW1SZWFkZXI8YW55Pikge1xuICBkZWZhdWx0UmVhZGVyQ2xvc2VkUHJvbWlzZUluaXRpYWxpemUocmVhZGVyKTtcbiAgZGVmYXVsdFJlYWRlckNsb3NlZFByb21pc2VSZXNvbHZlKHJlYWRlcik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0UmVhZGVyQ2xvc2VkUHJvbWlzZVJlamVjdChyZWFkZXI6IFJlYWRhYmxlU3RyZWFtUmVhZGVyPGFueT4sIHJlYXNvbjogYW55KSB7XG4gIGlmIChyZWFkZXIuX2Nsb3NlZFByb21pc2VfcmVqZWN0ID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBzZXRQcm9taXNlSXNIYW5kbGVkVG9UcnVlKHJlYWRlci5fY2xvc2VkUHJvbWlzZSk7XG4gIHJlYWRlci5fY2xvc2VkUHJvbWlzZV9yZWplY3QocmVhc29uKTtcbiAgcmVhZGVyLl9jbG9zZWRQcm9taXNlX3Jlc29sdmUgPSB1bmRlZmluZWQ7XG4gIHJlYWRlci5fY2xvc2VkUHJvbWlzZV9yZWplY3QgPSB1bmRlZmluZWQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0UmVhZGVyQ2xvc2VkUHJvbWlzZVJlc2V0VG9SZWplY3RlZChyZWFkZXI6IFJlYWRhYmxlU3RyZWFtUmVhZGVyPGFueT4sIHJlYXNvbjogYW55KSB7XG4gIGFzc2VydChyZWFkZXIuX2Nsb3NlZFByb21pc2VfcmVzb2x2ZSA9PT0gdW5kZWZpbmVkKTtcbiAgYXNzZXJ0KHJlYWRlci5fY2xvc2VkUHJvbWlzZV9yZWplY3QgPT09IHVuZGVmaW5lZCk7XG5cbiAgZGVmYXVsdFJlYWRlckNsb3NlZFByb21pc2VJbml0aWFsaXplQXNSZWplY3RlZChyZWFkZXIsIHJlYXNvbik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0UmVhZGVyQ2xvc2VkUHJvbWlzZVJlc29sdmUocmVhZGVyOiBSZWFkYWJsZVN0cmVhbVJlYWRlcjxhbnk+KSB7XG4gIGlmIChyZWFkZXIuX2Nsb3NlZFByb21pc2VfcmVzb2x2ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgcmVhZGVyLl9jbG9zZWRQcm9taXNlX3Jlc29sdmUodW5kZWZpbmVkKTtcbiAgcmVhZGVyLl9jbG9zZWRQcm9taXNlX3Jlc29sdmUgPSB1bmRlZmluZWQ7XG4gIHJlYWRlci5fY2xvc2VkUHJvbWlzZV9yZWplY3QgPSB1bmRlZmluZWQ7XG59XG4iLCAiLy8vIDxyZWZlcmVuY2UgbGliPVwiZXMyMDE1LmNvcmVcIiAvPlxuXG4vLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9OdW1iZXIvaXNGaW5pdGUjUG9seWZpbGxcbmNvbnN0IE51bWJlcklzRmluaXRlOiB0eXBlb2YgTnVtYmVyLmlzRmluaXRlID0gTnVtYmVyLmlzRmluaXRlIHx8IGZ1bmN0aW9uICh4KSB7XG4gIHJldHVybiB0eXBlb2YgeCA9PT0gJ251bWJlcicgJiYgaXNGaW5pdGUoeCk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBOdW1iZXJJc0Zpbml0ZTtcbiIsICIvLy8gPHJlZmVyZW5jZSBsaWI9XCJlczIwMTUuY29yZVwiIC8+XG5cbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL01hdGgvdHJ1bmMjUG9seWZpbGxcbmNvbnN0IE1hdGhUcnVuYzogdHlwZW9mIE1hdGgudHJ1bmMgPSBNYXRoLnRydW5jIHx8IGZ1bmN0aW9uICh2KSB7XG4gIHJldHVybiB2IDwgMCA/IE1hdGguY2VpbCh2KSA6IE1hdGguZmxvb3Iodik7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBNYXRoVHJ1bmM7XG4iLCAiaW1wb3J0IE51bWJlcklzRmluaXRlIGZyb20gJy4uLy4uL3N0dWIvbnVtYmVyLWlzZmluaXRlJztcbmltcG9ydCBNYXRoVHJ1bmMgZnJvbSAnLi4vLi4vc3R1Yi9tYXRoLXRydW5jJztcblxuLy8gaHR0cHM6Ly9oZXljYW0uZ2l0aHViLmlvL3dlYmlkbC8jaWRsLWRpY3Rpb25hcmllc1xuZXhwb3J0IGZ1bmN0aW9uIGlzRGljdGlvbmFyeSh4OiBhbnkpOiB4IGlzIG9iamVjdCB8IG51bGwge1xuICByZXR1cm4gdHlwZW9mIHggPT09ICdvYmplY3QnIHx8IHR5cGVvZiB4ID09PSAnZnVuY3Rpb24nO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0RGljdGlvbmFyeShvYmo6IHVua25vd24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0OiBzdHJpbmcpOiBhc3NlcnRzIG9iaiBpcyBvYmplY3QgfCBudWxsIHwgdW5kZWZpbmVkIHtcbiAgaWYgKG9iaiAhPT0gdW5kZWZpbmVkICYmICFpc0RpY3Rpb25hcnkob2JqKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYCR7Y29udGV4dH0gaXMgbm90IGFuIG9iamVjdC5gKTtcbiAgfVxufVxuXG5leHBvcnQgdHlwZSBBbnlGdW5jdGlvbiA9ICguLi5hcmdzOiBhbnlbXSkgPT4gYW55O1xuXG4vLyBodHRwczovL2hleWNhbS5naXRodWIuaW8vd2ViaWRsLyNpZGwtY2FsbGJhY2stZnVuY3Rpb25zXG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0RnVuY3Rpb24oeDogdW5rbm93biwgY29udGV4dDogc3RyaW5nKTogYXNzZXJ0cyB4IGlzIEFueUZ1bmN0aW9uIHtcbiAgaWYgKHR5cGVvZiB4ICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgJHtjb250ZXh0fSBpcyBub3QgYSBmdW5jdGlvbi5gKTtcbiAgfVxufVxuXG4vLyBodHRwczovL2hleWNhbS5naXRodWIuaW8vd2ViaWRsLyNpZGwtb2JqZWN0XG5leHBvcnQgZnVuY3Rpb24gaXNPYmplY3QoeDogYW55KTogeCBpcyBvYmplY3Qge1xuICByZXR1cm4gKHR5cGVvZiB4ID09PSAnb2JqZWN0JyAmJiB4ICE9PSBudWxsKSB8fCB0eXBlb2YgeCA9PT0gJ2Z1bmN0aW9uJztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydE9iamVjdCh4OiB1bmtub3duLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0OiBzdHJpbmcpOiBhc3NlcnRzIHggaXMgb2JqZWN0IHtcbiAgaWYgKCFpc09iamVjdCh4KSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYCR7Y29udGV4dH0gaXMgbm90IGFuIG9iamVjdC5gKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0UmVxdWlyZWRBcmd1bWVudDxUPih4OiBUIHwgdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IG51bWJlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQ6IHN0cmluZyk6IGFzc2VydHMgeCBpcyBUIHtcbiAgaWYgKHggPT09IHVuZGVmaW5lZCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYFBhcmFtZXRlciAke3Bvc2l0aW9ufSBpcyByZXF1aXJlZCBpbiAnJHtjb250ZXh0fScuYCk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydFJlcXVpcmVkRmllbGQ8VD4oeDogVCB8IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkOiBzdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0OiBzdHJpbmcpOiBhc3NlcnRzIHggaXMgVCB7XG4gIGlmICh4ID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGAke2ZpZWxkfSBpcyByZXF1aXJlZCBpbiAnJHtjb250ZXh0fScuYCk7XG4gIH1cbn1cblxuLy8gaHR0cHM6Ly9oZXljYW0uZ2l0aHViLmlvL3dlYmlkbC8jaWRsLXVucmVzdHJpY3RlZC1kb3VibGVcbmV4cG9ydCBmdW5jdGlvbiBjb252ZXJ0VW5yZXN0cmljdGVkRG91YmxlKHZhbHVlOiB1bmtub3duKTogbnVtYmVyIHtcbiAgcmV0dXJuIE51bWJlcih2YWx1ZSk7XG59XG5cbmZ1bmN0aW9uIGNlbnNvck5lZ2F0aXZlWmVybyh4OiBudW1iZXIpOiBudW1iZXIge1xuICByZXR1cm4geCA9PT0gMCA/IDAgOiB4O1xufVxuXG5mdW5jdGlvbiBpbnRlZ2VyUGFydCh4OiBudW1iZXIpOiBudW1iZXIge1xuICByZXR1cm4gY2Vuc29yTmVnYXRpdmVaZXJvKE1hdGhUcnVuYyh4KSk7XG59XG5cbi8vIGh0dHBzOi8vaGV5Y2FtLmdpdGh1Yi5pby93ZWJpZGwvI2lkbC11bnNpZ25lZC1sb25nLWxvbmdcbmV4cG9ydCBmdW5jdGlvbiBjb252ZXJ0VW5zaWduZWRMb25nTG9uZ1dpdGhFbmZvcmNlUmFuZ2UodmFsdWU6IHVua25vd24sIGNvbnRleHQ6IHN0cmluZyk6IG51bWJlciB7XG4gIGNvbnN0IGxvd2VyQm91bmQgPSAwO1xuICBjb25zdCB1cHBlckJvdW5kID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7XG5cbiAgbGV0IHggPSBOdW1iZXIodmFsdWUpO1xuICB4ID0gY2Vuc29yTmVnYXRpdmVaZXJvKHgpO1xuXG4gIGlmICghTnVtYmVySXNGaW5pdGUoeCkpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGAke2NvbnRleHR9IGlzIG5vdCBhIGZpbml0ZSBudW1iZXJgKTtcbiAgfVxuXG4gIHggPSBpbnRlZ2VyUGFydCh4KTtcblxuICBpZiAoeCA8IGxvd2VyQm91bmQgfHwgeCA+IHVwcGVyQm91bmQpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGAke2NvbnRleHR9IGlzIG91dHNpZGUgdGhlIGFjY2VwdGVkIHJhbmdlIG9mICR7bG93ZXJCb3VuZH0gdG8gJHt1cHBlckJvdW5kfSwgaW5jbHVzaXZlYCk7XG4gIH1cblxuICBpZiAoIU51bWJlcklzRmluaXRlKHgpIHx8IHggPT09IDApIHtcbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIC8vIFRPRE8gVXNlIEJpZ0ludCBpZiBzdXBwb3J0ZWQ/XG4gIC8vIGxldCB4QmlnSW50ID0gQmlnSW50KGludGVnZXJQYXJ0KHgpKTtcbiAgLy8geEJpZ0ludCA9IEJpZ0ludC5hc1VpbnROKDY0LCB4QmlnSW50KTtcbiAgLy8gcmV0dXJuIE51bWJlcih4QmlnSW50KTtcblxuICByZXR1cm4geDtcbn1cbiIsICJpbXBvcnQgeyBJc1JlYWRhYmxlU3RyZWFtLCBSZWFkYWJsZVN0cmVhbSB9IGZyb20gJy4uL3JlYWRhYmxlLXN0cmVhbSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRSZWFkYWJsZVN0cmVhbSh4OiB1bmtub3duLCBjb250ZXh0OiBzdHJpbmcpOiBhc3NlcnRzIHggaXMgUmVhZGFibGVTdHJlYW0ge1xuICBpZiAoIUlzUmVhZGFibGVTdHJlYW0oeCkpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGAke2NvbnRleHR9IGlzIG5vdCBhIFJlYWRhYmxlU3RyZWFtLmApO1xuICB9XG59XG4iLCAiaW1wb3J0IGFzc2VydCBmcm9tICcuLi8uLi9zdHViL2Fzc2VydCc7XG5pbXBvcnQgeyBTaW1wbGVRdWV1ZSB9IGZyb20gJy4uL3NpbXBsZS1xdWV1ZSc7XG5pbXBvcnQge1xuICBSZWFkYWJsZVN0cmVhbVJlYWRlckdlbmVyaWNDYW5jZWwsXG4gIFJlYWRhYmxlU3RyZWFtUmVhZGVyR2VuZXJpY0luaXRpYWxpemUsXG4gIFJlYWRhYmxlU3RyZWFtUmVhZGVyR2VuZXJpY1JlbGVhc2UsXG4gIHJlYWRlckxvY2tFeGNlcHRpb25cbn0gZnJvbSAnLi9nZW5lcmljLXJlYWRlcic7XG5pbXBvcnQgeyBJc1JlYWRhYmxlU3RyZWFtTG9ja2VkLCBSZWFkYWJsZVN0cmVhbSB9IGZyb20gJy4uL3JlYWRhYmxlLXN0cmVhbSc7XG5pbXBvcnQgeyBzZXRGdW5jdGlvbk5hbWUsIHR5cGVJc09iamVjdCB9IGZyb20gJy4uL2hlbHBlcnMvbWlzY2VsbGFuZW91cyc7XG5pbXBvcnQgeyBQdWxsU3RlcHMgfSBmcm9tICcuLi9hYnN0cmFjdC1vcHMvaW50ZXJuYWwtbWV0aG9kcyc7XG5pbXBvcnQgeyBuZXdQcm9taXNlLCBwcm9taXNlUmVqZWN0ZWRXaXRoIH0gZnJvbSAnLi4vaGVscGVycy93ZWJpZGwnO1xuaW1wb3J0IHsgYXNzZXJ0UmVxdWlyZWRBcmd1bWVudCB9IGZyb20gJy4uL3ZhbGlkYXRvcnMvYmFzaWMnO1xuaW1wb3J0IHsgYXNzZXJ0UmVhZGFibGVTdHJlYW0gfSBmcm9tICcuLi92YWxpZGF0b3JzL3JlYWRhYmxlLXN0cmVhbSc7XG5cbi8qKlxuICogQSByZXN1bHQgcmV0dXJuZWQgYnkge0BsaW5rIFJlYWRhYmxlU3RyZWFtRGVmYXVsdFJlYWRlci5yZWFkfS5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCB0eXBlIFJlYWRhYmxlU3RyZWFtRGVmYXVsdFJlYWRSZXN1bHQ8VD4gPSB7XG4gIGRvbmU6IGZhbHNlO1xuICB2YWx1ZTogVDtcbn0gfCB7XG4gIGRvbmU6IHRydWU7XG4gIHZhbHVlPzogdW5kZWZpbmVkO1xufVxuXG4vLyBBYnN0cmFjdCBvcGVyYXRpb25zIGZvciB0aGUgUmVhZGFibGVTdHJlYW0uXG5cbmV4cG9ydCBmdW5jdGlvbiBBY3F1aXJlUmVhZGFibGVTdHJlYW1EZWZhdWx0UmVhZGVyPFI+KHN0cmVhbTogUmVhZGFibGVTdHJlYW0pOiBSZWFkYWJsZVN0cmVhbURlZmF1bHRSZWFkZXI8Uj4ge1xuICByZXR1cm4gbmV3IFJlYWRhYmxlU3RyZWFtRGVmYXVsdFJlYWRlcihzdHJlYW0pO1xufVxuXG4vLyBSZWFkYWJsZVN0cmVhbSBBUEkgZXhwb3NlZCBmb3IgY29udHJvbGxlcnMuXG5cbmV4cG9ydCBmdW5jdGlvbiBSZWFkYWJsZVN0cmVhbUFkZFJlYWRSZXF1ZXN0PFI+KHN0cmVhbTogUmVhZGFibGVTdHJlYW08Uj4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkUmVxdWVzdDogUmVhZFJlcXVlc3Q8Uj4pOiB2b2lkIHtcbiAgYXNzZXJ0KElzUmVhZGFibGVTdHJlYW1EZWZhdWx0UmVhZGVyKHN0cmVhbS5fcmVhZGVyKSk7XG4gIGFzc2VydChzdHJlYW0uX3N0YXRlID09PSAncmVhZGFibGUnKTtcblxuICAoc3RyZWFtLl9yZWFkZXIhIGFzIFJlYWRhYmxlU3RyZWFtRGVmYXVsdFJlYWRlcjxSPikuX3JlYWRSZXF1ZXN0cy5wdXNoKHJlYWRSZXF1ZXN0KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFJlYWRhYmxlU3RyZWFtRnVsZmlsbFJlYWRSZXF1ZXN0PFI+KHN0cmVhbTogUmVhZGFibGVTdHJlYW08Uj4sIGNodW5rOiBSIHwgdW5kZWZpbmVkLCBkb25lOiBib29sZWFuKSB7XG4gIGNvbnN0IHJlYWRlciA9IHN0cmVhbS5fcmVhZGVyIGFzIFJlYWRhYmxlU3RyZWFtRGVmYXVsdFJlYWRlcjxSPjtcblxuICBhc3NlcnQocmVhZGVyLl9yZWFkUmVxdWVzdHMubGVuZ3RoID4gMCk7XG5cbiAgY29uc3QgcmVhZFJlcXVlc3QgPSByZWFkZXIuX3JlYWRSZXF1ZXN0cy5zaGlmdCgpITtcbiAgaWYgKGRvbmUpIHtcbiAgICByZWFkUmVxdWVzdC5fY2xvc2VTdGVwcygpO1xuICB9IGVsc2Uge1xuICAgIHJlYWRSZXF1ZXN0Ll9jaHVua1N0ZXBzKGNodW5rISk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFJlYWRhYmxlU3RyZWFtR2V0TnVtUmVhZFJlcXVlc3RzPFI+KHN0cmVhbTogUmVhZGFibGVTdHJlYW08Uj4pOiBudW1iZXIge1xuICByZXR1cm4gKHN0cmVhbS5fcmVhZGVyIGFzIFJlYWRhYmxlU3RyZWFtRGVmYXVsdFJlYWRlcjxSPikuX3JlYWRSZXF1ZXN0cy5sZW5ndGg7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBSZWFkYWJsZVN0cmVhbUhhc0RlZmF1bHRSZWFkZXIoc3RyZWFtOiBSZWFkYWJsZVN0cmVhbSk6IGJvb2xlYW4ge1xuICBjb25zdCByZWFkZXIgPSBzdHJlYW0uX3JlYWRlcjtcblxuICBpZiAocmVhZGVyID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAoIUlzUmVhZGFibGVTdHJlYW1EZWZhdWx0UmVhZGVyKHJlYWRlcikpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuLy8gUmVhZGVyc1xuXG5leHBvcnQgaW50ZXJmYWNlIFJlYWRSZXF1ZXN0PFI+IHtcbiAgX2NodW5rU3RlcHMoY2h1bms6IFIpOiB2b2lkO1xuXG4gIF9jbG9zZVN0ZXBzKCk6IHZvaWQ7XG5cbiAgX2Vycm9yU3RlcHMoZTogYW55KTogdm9pZDtcbn1cblxuLyoqXG4gKiBBIGRlZmF1bHQgcmVhZGVyIHZlbmRlZCBieSBhIHtAbGluayBSZWFkYWJsZVN0cmVhbX0uXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgUmVhZGFibGVTdHJlYW1EZWZhdWx0UmVhZGVyPFIgPSBhbnk+IHtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfb3duZXJSZWFkYWJsZVN0cmVhbSE6IFJlYWRhYmxlU3RyZWFtPFI+O1xuICAvKiogQGludGVybmFsICovXG4gIF9jbG9zZWRQcm9taXNlITogUHJvbWlzZTx1bmRlZmluZWQ+O1xuICAvKiogQGludGVybmFsICovXG4gIF9jbG9zZWRQcm9taXNlX3Jlc29sdmU/OiAodmFsdWU/OiB1bmRlZmluZWQpID0+IHZvaWQ7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX2Nsb3NlZFByb21pc2VfcmVqZWN0PzogKHJlYXNvbjogYW55KSA9PiB2b2lkO1xuICAvKiogQGludGVybmFsICovXG4gIF9yZWFkUmVxdWVzdHM6IFNpbXBsZVF1ZXVlPFJlYWRSZXF1ZXN0PFI+PjtcblxuICBjb25zdHJ1Y3RvcihzdHJlYW06IFJlYWRhYmxlU3RyZWFtPFI+KSB7XG4gICAgYXNzZXJ0UmVxdWlyZWRBcmd1bWVudChzdHJlYW0sIDEsICdSZWFkYWJsZVN0cmVhbURlZmF1bHRSZWFkZXInKTtcbiAgICBhc3NlcnRSZWFkYWJsZVN0cmVhbShzdHJlYW0sICdGaXJzdCBwYXJhbWV0ZXInKTtcblxuICAgIGlmIChJc1JlYWRhYmxlU3RyZWFtTG9ja2VkKHN0cmVhbSkpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoaXMgc3RyZWFtIGhhcyBhbHJlYWR5IGJlZW4gbG9ja2VkIGZvciBleGNsdXNpdmUgcmVhZGluZyBieSBhbm90aGVyIHJlYWRlcicpO1xuICAgIH1cblxuICAgIFJlYWRhYmxlU3RyZWFtUmVhZGVyR2VuZXJpY0luaXRpYWxpemUodGhpcywgc3RyZWFtKTtcblxuICAgIHRoaXMuX3JlYWRSZXF1ZXN0cyA9IG5ldyBTaW1wbGVRdWV1ZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBwcm9taXNlIHRoYXQgd2lsbCBiZSBmdWxmaWxsZWQgd2hlbiB0aGUgc3RyZWFtIGJlY29tZXMgY2xvc2VkLFxuICAgKiBvciByZWplY3RlZCBpZiB0aGUgc3RyZWFtIGV2ZXIgZXJyb3JzIG9yIHRoZSByZWFkZXIncyBsb2NrIGlzIHJlbGVhc2VkIGJlZm9yZSB0aGUgc3RyZWFtIGZpbmlzaGVzIGNsb3NpbmcuXG4gICAqL1xuICBnZXQgY2xvc2VkKCk6IFByb21pc2U8dW5kZWZpbmVkPiB7XG4gICAgaWYgKCFJc1JlYWRhYmxlU3RyZWFtRGVmYXVsdFJlYWRlcih0aGlzKSkge1xuICAgICAgcmV0dXJuIHByb21pc2VSZWplY3RlZFdpdGgoZGVmYXVsdFJlYWRlckJyYW5kQ2hlY2tFeGNlcHRpb24oJ2Nsb3NlZCcpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fY2xvc2VkUHJvbWlzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJZiB0aGUgcmVhZGVyIGlzIGFjdGl2ZSwgYmVoYXZlcyB0aGUgc2FtZSBhcyB7QGxpbmsgUmVhZGFibGVTdHJlYW0uY2FuY2VsIHwgc3RyZWFtLmNhbmNlbChyZWFzb24pfS5cbiAgICovXG4gIGNhbmNlbChyZWFzb246IGFueSA9IHVuZGVmaW5lZCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICghSXNSZWFkYWJsZVN0cmVhbURlZmF1bHRSZWFkZXIodGhpcykpIHtcbiAgICAgIHJldHVybiBwcm9taXNlUmVqZWN0ZWRXaXRoKGRlZmF1bHRSZWFkZXJCcmFuZENoZWNrRXhjZXB0aW9uKCdjYW5jZWwnKSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX293bmVyUmVhZGFibGVTdHJlYW0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHByb21pc2VSZWplY3RlZFdpdGgocmVhZGVyTG9ja0V4Y2VwdGlvbignY2FuY2VsJykpO1xuICAgIH1cblxuICAgIHJldHVybiBSZWFkYWJsZVN0cmVhbVJlYWRlckdlbmVyaWNDYW5jZWwodGhpcywgcmVhc29uKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IGFsbG93cyBhY2Nlc3MgdG8gdGhlIG5leHQgY2h1bmsgZnJvbSB0aGUgc3RyZWFtJ3MgaW50ZXJuYWwgcXVldWUsIGlmIGF2YWlsYWJsZS5cbiAgICpcbiAgICogSWYgcmVhZGluZyBhIGNodW5rIGNhdXNlcyB0aGUgcXVldWUgdG8gYmVjb21lIGVtcHR5LCBtb3JlIGRhdGEgd2lsbCBiZSBwdWxsZWQgZnJvbSB0aGUgdW5kZXJseWluZyBzb3VyY2UuXG4gICAqL1xuICByZWFkKCk6IFByb21pc2U8UmVhZGFibGVTdHJlYW1EZWZhdWx0UmVhZFJlc3VsdDxSPj4ge1xuICAgIGlmICghSXNSZWFkYWJsZVN0cmVhbURlZmF1bHRSZWFkZXIodGhpcykpIHtcbiAgICAgIHJldHVybiBwcm9taXNlUmVqZWN0ZWRXaXRoKGRlZmF1bHRSZWFkZXJCcmFuZENoZWNrRXhjZXB0aW9uKCdyZWFkJykpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9vd25lclJlYWRhYmxlU3RyZWFtID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBwcm9taXNlUmVqZWN0ZWRXaXRoKHJlYWRlckxvY2tFeGNlcHRpb24oJ3JlYWQgZnJvbScpKTtcbiAgICB9XG5cbiAgICBsZXQgcmVzb2x2ZVByb21pc2UhOiAocmVzdWx0OiBSZWFkYWJsZVN0cmVhbURlZmF1bHRSZWFkUmVzdWx0PFI+KSA9PiB2b2lkO1xuICAgIGxldCByZWplY3RQcm9taXNlITogKHJlYXNvbjogYW55KSA9PiB2b2lkO1xuICAgIGNvbnN0IHByb21pc2UgPSBuZXdQcm9taXNlPFJlYWRhYmxlU3RyZWFtRGVmYXVsdFJlYWRSZXN1bHQ8Uj4+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHJlc29sdmVQcm9taXNlID0gcmVzb2x2ZTtcbiAgICAgIHJlamVjdFByb21pc2UgPSByZWplY3Q7XG4gICAgfSk7XG4gICAgY29uc3QgcmVhZFJlcXVlc3Q6IFJlYWRSZXF1ZXN0PFI+ID0ge1xuICAgICAgX2NodW5rU3RlcHM6IGNodW5rID0+IHJlc29sdmVQcm9taXNlKHsgdmFsdWU6IGNodW5rLCBkb25lOiBmYWxzZSB9KSxcbiAgICAgIF9jbG9zZVN0ZXBzOiAoKSA9PiByZXNvbHZlUHJvbWlzZSh7IHZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWUgfSksXG4gICAgICBfZXJyb3JTdGVwczogZSA9PiByZWplY3RQcm9taXNlKGUpXG4gICAgfTtcbiAgICBSZWFkYWJsZVN0cmVhbURlZmF1bHRSZWFkZXJSZWFkKHRoaXMsIHJlYWRSZXF1ZXN0KTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWxlYXNlcyB0aGUgcmVhZGVyJ3MgbG9jayBvbiB0aGUgY29ycmVzcG9uZGluZyBzdHJlYW0uIEFmdGVyIHRoZSBsb2NrIGlzIHJlbGVhc2VkLCB0aGUgcmVhZGVyIGlzIG5vIGxvbmdlciBhY3RpdmUuXG4gICAqIElmIHRoZSBhc3NvY2lhdGVkIHN0cmVhbSBpcyBlcnJvcmVkIHdoZW4gdGhlIGxvY2sgaXMgcmVsZWFzZWQsIHRoZSByZWFkZXIgd2lsbCBhcHBlYXIgZXJyb3JlZCBpbiB0aGUgc2FtZSB3YXlcbiAgICogZnJvbSBub3cgb247IG90aGVyd2lzZSwgdGhlIHJlYWRlciB3aWxsIGFwcGVhciBjbG9zZWQuXG4gICAqXG4gICAqIEEgcmVhZGVyJ3MgbG9jayBjYW5ub3QgYmUgcmVsZWFzZWQgd2hpbGUgaXQgc3RpbGwgaGFzIGEgcGVuZGluZyByZWFkIHJlcXVlc3QsIGkuZS4sIGlmIGEgcHJvbWlzZSByZXR1cm5lZCBieVxuICAgKiB0aGUgcmVhZGVyJ3Mge0BsaW5rIFJlYWRhYmxlU3RyZWFtRGVmYXVsdFJlYWRlci5yZWFkIHwgcmVhZCgpfSBtZXRob2QgaGFzIG5vdCB5ZXQgYmVlbiBzZXR0bGVkLiBBdHRlbXB0aW5nIHRvXG4gICAqIGRvIHNvIHdpbGwgdGhyb3cgYSBgVHlwZUVycm9yYCBhbmQgbGVhdmUgdGhlIHJlYWRlciBsb2NrZWQgdG8gdGhlIHN0cmVhbS5cbiAgICovXG4gIHJlbGVhc2VMb2NrKCk6IHZvaWQge1xuICAgIGlmICghSXNSZWFkYWJsZVN0cmVhbURlZmF1bHRSZWFkZXIodGhpcykpIHtcbiAgICAgIHRocm93IGRlZmF1bHRSZWFkZXJCcmFuZENoZWNrRXhjZXB0aW9uKCdyZWxlYXNlTG9jaycpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9vd25lclJlYWRhYmxlU3RyZWFtID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBSZWFkYWJsZVN0cmVhbURlZmF1bHRSZWFkZXJSZWxlYXNlKHRoaXMpO1xuICB9XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFJlYWRhYmxlU3RyZWFtRGVmYXVsdFJlYWRlci5wcm90b3R5cGUsIHtcbiAgY2FuY2VsOiB7IGVudW1lcmFibGU6IHRydWUgfSxcbiAgcmVhZDogeyBlbnVtZXJhYmxlOiB0cnVlIH0sXG4gIHJlbGVhc2VMb2NrOiB7IGVudW1lcmFibGU6IHRydWUgfSxcbiAgY2xvc2VkOiB7IGVudW1lcmFibGU6IHRydWUgfVxufSk7XG5zZXRGdW5jdGlvbk5hbWUoUmVhZGFibGVTdHJlYW1EZWZhdWx0UmVhZGVyLnByb3RvdHlwZS5jYW5jZWwsICdjYW5jZWwnKTtcbnNldEZ1bmN0aW9uTmFtZShSZWFkYWJsZVN0cmVhbURlZmF1bHRSZWFkZXIucHJvdG90eXBlLnJlYWQsICdyZWFkJyk7XG5zZXRGdW5jdGlvbk5hbWUoUmVhZGFibGVTdHJlYW1EZWZhdWx0UmVhZGVyLnByb3RvdHlwZS5yZWxlYXNlTG9jaywgJ3JlbGVhc2VMb2NrJyk7XG5pZiAodHlwZW9mIFN5bWJvbC50b1N0cmluZ1RhZyA9PT0gJ3N5bWJvbCcpIHtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlYWRhYmxlU3RyZWFtRGVmYXVsdFJlYWRlci5wcm90b3R5cGUsIFN5bWJvbC50b1N0cmluZ1RhZywge1xuICAgIHZhbHVlOiAnUmVhZGFibGVTdHJlYW1EZWZhdWx0UmVhZGVyJyxcbiAgICBjb25maWd1cmFibGU6IHRydWVcbiAgfSk7XG59XG5cbi8vIEFic3RyYWN0IG9wZXJhdGlvbnMgZm9yIHRoZSByZWFkZXJzLlxuXG5leHBvcnQgZnVuY3Rpb24gSXNSZWFkYWJsZVN0cmVhbURlZmF1bHRSZWFkZXI8UiA9IGFueT4oeDogYW55KTogeCBpcyBSZWFkYWJsZVN0cmVhbURlZmF1bHRSZWFkZXI8Uj4ge1xuICBpZiAoIXR5cGVJc09iamVjdCh4KSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHgsICdfcmVhZFJlcXVlc3RzJykpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZXR1cm4geCBpbnN0YW5jZW9mIFJlYWRhYmxlU3RyZWFtRGVmYXVsdFJlYWRlcjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFJlYWRhYmxlU3RyZWFtRGVmYXVsdFJlYWRlclJlYWQ8Uj4ocmVhZGVyOiBSZWFkYWJsZVN0cmVhbURlZmF1bHRSZWFkZXI8Uj4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkUmVxdWVzdDogUmVhZFJlcXVlc3Q8Uj4pOiB2b2lkIHtcbiAgY29uc3Qgc3RyZWFtID0gcmVhZGVyLl9vd25lclJlYWRhYmxlU3RyZWFtO1xuXG4gIGFzc2VydChzdHJlYW0gIT09IHVuZGVmaW5lZCk7XG5cbiAgc3RyZWFtLl9kaXN0dXJiZWQgPSB0cnVlO1xuXG4gIGlmIChzdHJlYW0uX3N0YXRlID09PSAnY2xvc2VkJykge1xuICAgIHJlYWRSZXF1ZXN0Ll9jbG9zZVN0ZXBzKCk7XG4gIH0gZWxzZSBpZiAoc3RyZWFtLl9zdGF0ZSA9PT0gJ2Vycm9yZWQnKSB7XG4gICAgcmVhZFJlcXVlc3QuX2Vycm9yU3RlcHMoc3RyZWFtLl9zdG9yZWRFcnJvcik7XG4gIH0gZWxzZSB7XG4gICAgYXNzZXJ0KHN0cmVhbS5fc3RhdGUgPT09ICdyZWFkYWJsZScpO1xuICAgIHN0cmVhbS5fcmVhZGFibGVTdHJlYW1Db250cm9sbGVyW1B1bGxTdGVwc10ocmVhZFJlcXVlc3QgYXMgUmVhZFJlcXVlc3Q8YW55Pik7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFJlYWRhYmxlU3RyZWFtRGVmYXVsdFJlYWRlclJlbGVhc2UocmVhZGVyOiBSZWFkYWJsZVN0cmVhbURlZmF1bHRSZWFkZXIpIHtcbiAgUmVhZGFibGVTdHJlYW1SZWFkZXJHZW5lcmljUmVsZWFzZShyZWFkZXIpO1xuICBjb25zdCBlID0gbmV3IFR5cGVFcnJvcignUmVhZGVyIHdhcyByZWxlYXNlZCcpO1xuICBSZWFkYWJsZVN0cmVhbURlZmF1bHRSZWFkZXJFcnJvclJlYWRSZXF1ZXN0cyhyZWFkZXIsIGUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gUmVhZGFibGVTdHJlYW1EZWZhdWx0UmVhZGVyRXJyb3JSZWFkUmVxdWVzdHMocmVhZGVyOiBSZWFkYWJsZVN0cmVhbURlZmF1bHRSZWFkZXIsIGU6IGFueSkge1xuICBjb25zdCByZWFkUmVxdWVzdHMgPSByZWFkZXIuX3JlYWRSZXF1ZXN0cztcbiAgcmVhZGVyLl9yZWFkUmVxdWVzdHMgPSBuZXcgU2ltcGxlUXVldWUoKTtcbiAgcmVhZFJlcXVlc3RzLmZvckVhY2gocmVhZFJlcXVlc3QgPT4ge1xuICAgIHJlYWRSZXF1ZXN0Ll9lcnJvclN0ZXBzKGUpO1xuICB9KTtcbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9ucyBmb3IgdGhlIFJlYWRhYmxlU3RyZWFtRGVmYXVsdFJlYWRlci5cblxuZnVuY3Rpb24gZGVmYXVsdFJlYWRlckJyYW5kQ2hlY2tFeGNlcHRpb24obmFtZTogc3RyaW5nKTogVHlwZUVycm9yIHtcbiAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoXG4gICAgYFJlYWRhYmxlU3RyZWFtRGVmYXVsdFJlYWRlci5wcm90b3R5cGUuJHtuYW1lfSBjYW4gb25seSBiZSB1c2VkIG9uIGEgUmVhZGFibGVTdHJlYW1EZWZhdWx0UmVhZGVyYCk7XG59XG4iLCAiLy8vIDxyZWZlcmVuY2UgbGliPVwiZXMyMDE4LmFzeW5jaXRlcmFibGVcIiAvPlxuXG4vKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZW1wdHktZnVuY3Rpb24gKi9cbmV4cG9ydCBjb25zdCBBc3luY0l0ZXJhdG9yUHJvdG90eXBlOiBBc3luY0l0ZXJhYmxlPGFueT4gPVxuICBPYmplY3QuZ2V0UHJvdG90eXBlT2YoT2JqZWN0LmdldFByb3RvdHlwZU9mKGFzeW5jIGZ1bmN0aW9uKiAoKTogQXN5bmNJdGVyYWJsZUl0ZXJhdG9yPGFueT4ge30pLnByb3RvdHlwZSk7XG4iLCAiLy8vIDxyZWZlcmVuY2UgbGliPVwiZXMyMDE4LmFzeW5jaXRlcmFibGVcIiAvPlxuXG5pbXBvcnQgeyBSZWFkYWJsZVN0cmVhbSB9IGZyb20gJy4uL3JlYWRhYmxlLXN0cmVhbSc7XG5pbXBvcnQge1xuICBBY3F1aXJlUmVhZGFibGVTdHJlYW1EZWZhdWx0UmVhZGVyLFxuICBSZWFkYWJsZVN0cmVhbURlZmF1bHRSZWFkZXIsXG4gIFJlYWRhYmxlU3RyZWFtRGVmYXVsdFJlYWRlclJlYWQsXG4gIHR5cGUgUmVhZGFibGVTdHJlYW1EZWZhdWx0UmVhZFJlc3VsdCxcbiAgdHlwZSBSZWFkUmVxdWVzdFxufSBmcm9tICcuL2RlZmF1bHQtcmVhZGVyJztcbmltcG9ydCB7IFJlYWRhYmxlU3RyZWFtUmVhZGVyR2VuZXJpY0NhbmNlbCwgUmVhZGFibGVTdHJlYW1SZWFkZXJHZW5lcmljUmVsZWFzZSB9IGZyb20gJy4vZ2VuZXJpYy1yZWFkZXInO1xuaW1wb3J0IGFzc2VydCBmcm9tICcuLi8uLi9zdHViL2Fzc2VydCc7XG5pbXBvcnQgeyBBc3luY0l0ZXJhdG9yUHJvdG90eXBlIH0gZnJvbSAnQEB0YXJnZXQvc3R1Yi9hc3luYy1pdGVyYXRvci1wcm90b3R5cGUnO1xuaW1wb3J0IHsgdHlwZUlzT2JqZWN0IH0gZnJvbSAnLi4vaGVscGVycy9taXNjZWxsYW5lb3VzJztcbmltcG9ydCB7XG4gIG5ld1Byb21pc2UsXG4gIHByb21pc2VSZWplY3RlZFdpdGgsXG4gIHByb21pc2VSZXNvbHZlZFdpdGgsXG4gIHF1ZXVlTWljcm90YXNrLFxuICB0cmFuc2Zvcm1Qcm9taXNlV2l0aFxufSBmcm9tICcuLi9oZWxwZXJzL3dlYmlkbCc7XG5cbi8qKlxuICogQW4gYXN5bmMgaXRlcmF0b3IgcmV0dXJuZWQgYnkge0BsaW5rIFJlYWRhYmxlU3RyZWFtLnZhbHVlc30uXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgaW50ZXJmYWNlIFJlYWRhYmxlU3RyZWFtQXN5bmNJdGVyYXRvcjxSPiBleHRlbmRzIEFzeW5jSXRlcmFibGVJdGVyYXRvcjxSPiB7XG4gIG5leHQoKTogUHJvbWlzZTxJdGVyYXRvclJlc3VsdDxSLCB1bmRlZmluZWQ+PjtcblxuICByZXR1cm4odmFsdWU/OiBhbnkpOiBQcm9taXNlPEl0ZXJhdG9yUmVzdWx0PGFueT4+O1xufVxuXG5leHBvcnQgY2xhc3MgUmVhZGFibGVTdHJlYW1Bc3luY0l0ZXJhdG9ySW1wbDxSPiB7XG4gIHByaXZhdGUgcmVhZG9ubHkgX3JlYWRlcjogUmVhZGFibGVTdHJlYW1EZWZhdWx0UmVhZGVyPFI+O1xuICBwcml2YXRlIHJlYWRvbmx5IF9wcmV2ZW50Q2FuY2VsOiBib29sZWFuO1xuICBwcml2YXRlIF9vbmdvaW5nUHJvbWlzZTogUHJvbWlzZTxSZWFkYWJsZVN0cmVhbURlZmF1bHRSZWFkUmVzdWx0PFI+PiB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBfaXNGaW5pc2hlZCA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKHJlYWRlcjogUmVhZGFibGVTdHJlYW1EZWZhdWx0UmVhZGVyPFI+LCBwcmV2ZW50Q2FuY2VsOiBib29sZWFuKSB7XG4gICAgdGhpcy5fcmVhZGVyID0gcmVhZGVyO1xuICAgIHRoaXMuX3ByZXZlbnRDYW5jZWwgPSBwcmV2ZW50Q2FuY2VsO1xuICB9XG5cbiAgbmV4dCgpOiBQcm9taXNlPFJlYWRhYmxlU3RyZWFtRGVmYXVsdFJlYWRSZXN1bHQ8Uj4+IHtcbiAgICBjb25zdCBuZXh0U3RlcHMgPSAoKSA9PiB0aGlzLl9uZXh0U3RlcHMoKTtcbiAgICB0aGlzLl9vbmdvaW5nUHJvbWlzZSA9IHRoaXMuX29uZ29pbmdQcm9taXNlID9cbiAgICAgIHRyYW5zZm9ybVByb21pc2VXaXRoKHRoaXMuX29uZ29pbmdQcm9taXNlLCBuZXh0U3RlcHMsIG5leHRTdGVwcykgOlxuICAgICAgbmV4dFN0ZXBzKCk7XG4gICAgcmV0dXJuIHRoaXMuX29uZ29pbmdQcm9taXNlO1xuICB9XG5cbiAgcmV0dXJuKHZhbHVlOiBhbnkpOiBQcm9taXNlPFJlYWRhYmxlU3RyZWFtRGVmYXVsdFJlYWRSZXN1bHQ8YW55Pj4ge1xuICAgIGNvbnN0IHJldHVyblN0ZXBzID0gKCkgPT4gdGhpcy5fcmV0dXJuU3RlcHModmFsdWUpO1xuICAgIHJldHVybiB0aGlzLl9vbmdvaW5nUHJvbWlzZSA/XG4gICAgICB0cmFuc2Zvcm1Qcm9taXNlV2l0aCh0aGlzLl9vbmdvaW5nUHJvbWlzZSwgcmV0dXJuU3RlcHMsIHJldHVyblN0ZXBzKSA6XG4gICAgICByZXR1cm5TdGVwcygpO1xuICB9XG5cbiAgcHJpdmF0ZSBfbmV4dFN0ZXBzKCk6IFByb21pc2U8UmVhZGFibGVTdHJlYW1EZWZhdWx0UmVhZFJlc3VsdDxSPj4ge1xuICAgIGlmICh0aGlzLl9pc0ZpbmlzaGVkKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHsgdmFsdWU6IHVuZGVmaW5lZCwgZG9uZTogdHJ1ZSB9KTtcbiAgICB9XG5cbiAgICBjb25zdCByZWFkZXIgPSB0aGlzLl9yZWFkZXI7XG4gICAgYXNzZXJ0KHJlYWRlci5fb3duZXJSZWFkYWJsZVN0cmVhbSAhPT0gdW5kZWZpbmVkKTtcblxuICAgIGxldCByZXNvbHZlUHJvbWlzZSE6IChyZXN1bHQ6IFJlYWRhYmxlU3RyZWFtRGVmYXVsdFJlYWRSZXN1bHQ8Uj4pID0+IHZvaWQ7XG4gICAgbGV0IHJlamVjdFByb21pc2UhOiAocmVhc29uOiBhbnkpID0+IHZvaWQ7XG4gICAgY29uc3QgcHJvbWlzZSA9IG5ld1Byb21pc2U8UmVhZGFibGVTdHJlYW1EZWZhdWx0UmVhZFJlc3VsdDxSPj4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgcmVzb2x2ZVByb21pc2UgPSByZXNvbHZlO1xuICAgICAgcmVqZWN0UHJvbWlzZSA9IHJlamVjdDtcbiAgICB9KTtcbiAgICBjb25zdCByZWFkUmVxdWVzdDogUmVhZFJlcXVlc3Q8Uj4gPSB7XG4gICAgICBfY2h1bmtTdGVwczogY2h1bmsgPT4ge1xuICAgICAgICB0aGlzLl9vbmdvaW5nUHJvbWlzZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgLy8gVGhpcyBuZWVkcyB0byBiZSBkZWxheWVkIGJ5IG9uZSBtaWNyb3Rhc2ssIG90aGVyd2lzZSB3ZSBzdG9wIHB1bGxpbmcgdG9vIGVhcmx5IHdoaWNoIGJyZWFrcyBhIHRlc3QuXG4gICAgICAgIC8vIEZJWE1FIElzIHRoaXMgYSBidWcgaW4gdGhlIHNwZWNpZmljYXRpb24sIG9yIGluIHRoZSB0ZXN0P1xuICAgICAgICBxdWV1ZU1pY3JvdGFzaygoKSA9PiByZXNvbHZlUHJvbWlzZSh7IHZhbHVlOiBjaHVuaywgZG9uZTogZmFsc2UgfSkpO1xuICAgICAgfSxcbiAgICAgIF9jbG9zZVN0ZXBzOiAoKSA9PiB7XG4gICAgICAgIHRoaXMuX29uZ29pbmdQcm9taXNlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9pc0ZpbmlzaGVkID0gdHJ1ZTtcbiAgICAgICAgUmVhZGFibGVTdHJlYW1SZWFkZXJHZW5lcmljUmVsZWFzZShyZWFkZXIpO1xuICAgICAgICByZXNvbHZlUHJvbWlzZSh7IHZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWUgfSk7XG4gICAgICB9LFxuICAgICAgX2Vycm9yU3RlcHM6IHJlYXNvbiA9PiB7XG4gICAgICAgIHRoaXMuX29uZ29pbmdQcm9taXNlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9pc0ZpbmlzaGVkID0gdHJ1ZTtcbiAgICAgICAgUmVhZGFibGVTdHJlYW1SZWFkZXJHZW5lcmljUmVsZWFzZShyZWFkZXIpO1xuICAgICAgICByZWplY3RQcm9taXNlKHJlYXNvbik7XG4gICAgICB9XG4gICAgfTtcbiAgICBSZWFkYWJsZVN0cmVhbURlZmF1bHRSZWFkZXJSZWFkKHJlYWRlciwgcmVhZFJlcXVlc3QpO1xuICAgIHJldHVybiBwcm9taXNlO1xuICB9XG5cbiAgcHJpdmF0ZSBfcmV0dXJuU3RlcHModmFsdWU6IGFueSk6IFByb21pc2U8UmVhZGFibGVTdHJlYW1EZWZhdWx0UmVhZFJlc3VsdDxhbnk+PiB7XG4gICAgaWYgKHRoaXMuX2lzRmluaXNoZWQpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoeyB2YWx1ZSwgZG9uZTogdHJ1ZSB9KTtcbiAgICB9XG4gICAgdGhpcy5faXNGaW5pc2hlZCA9IHRydWU7XG5cbiAgICBjb25zdCByZWFkZXIgPSB0aGlzLl9yZWFkZXI7XG4gICAgYXNzZXJ0KHJlYWRlci5fb3duZXJSZWFkYWJsZVN0cmVhbSAhPT0gdW5kZWZpbmVkKTtcbiAgICBhc3NlcnQocmVhZGVyLl9yZWFkUmVxdWVzdHMubGVuZ3RoID09PSAwKTtcblxuICAgIGlmICghdGhpcy5fcHJldmVudENhbmNlbCkge1xuICAgICAgY29uc3QgcmVzdWx0ID0gUmVhZGFibGVTdHJlYW1SZWFkZXJHZW5lcmljQ2FuY2VsKHJlYWRlciwgdmFsdWUpO1xuICAgICAgUmVhZGFibGVTdHJlYW1SZWFkZXJHZW5lcmljUmVsZWFzZShyZWFkZXIpO1xuICAgICAgcmV0dXJuIHRyYW5zZm9ybVByb21pc2VXaXRoKHJlc3VsdCwgKCkgPT4gKHsgdmFsdWUsIGRvbmU6IHRydWUgfSkpO1xuICAgIH1cblxuICAgIFJlYWRhYmxlU3RyZWFtUmVhZGVyR2VuZXJpY1JlbGVhc2UocmVhZGVyKTtcbiAgICByZXR1cm4gcHJvbWlzZVJlc29sdmVkV2l0aCh7IHZhbHVlLCBkb25lOiB0cnVlIH0pO1xuICB9XG59XG5cbmludGVyZmFjZSBSZWFkYWJsZVN0cmVhbUFzeW5jSXRlcmF0b3JJbnN0YW5jZTxSPiBleHRlbmRzIFJlYWRhYmxlU3RyZWFtQXN5bmNJdGVyYXRvcjxSPiB7XG4gIC8qKiBAaW50ZXJhbCAqL1xuICBfYXN5bmNJdGVyYXRvckltcGw6IFJlYWRhYmxlU3RyZWFtQXN5bmNJdGVyYXRvckltcGw8Uj47XG5cbiAgbmV4dCgpOiBQcm9taXNlPEl0ZXJhdG9yUmVzdWx0PFIsIHVuZGVmaW5lZD4+O1xuXG4gIHJldHVybih2YWx1ZT86IGFueSk6IFByb21pc2U8SXRlcmF0b3JSZXN1bHQ8YW55Pj47XG59XG5cbmNvbnN0IFJlYWRhYmxlU3RyZWFtQXN5bmNJdGVyYXRvclByb3RvdHlwZTogUmVhZGFibGVTdHJlYW1Bc3luY0l0ZXJhdG9ySW5zdGFuY2U8YW55PiA9IHtcbiAgbmV4dCh0aGlzOiBSZWFkYWJsZVN0cmVhbUFzeW5jSXRlcmF0b3JJbnN0YW5jZTxhbnk+KTogUHJvbWlzZTxSZWFkYWJsZVN0cmVhbURlZmF1bHRSZWFkUmVzdWx0PGFueT4+IHtcbiAgICBpZiAoIUlzUmVhZGFibGVTdHJlYW1Bc3luY0l0ZXJhdG9yKHRoaXMpKSB7XG4gICAgICByZXR1cm4gcHJvbWlzZVJlamVjdGVkV2l0aChzdHJlYW1Bc3luY0l0ZXJhdG9yQnJhbmRDaGVja0V4Y2VwdGlvbignbmV4dCcpKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2FzeW5jSXRlcmF0b3JJbXBsLm5leHQoKTtcbiAgfSxcblxuICByZXR1cm4odGhpczogUmVhZGFibGVTdHJlYW1Bc3luY0l0ZXJhdG9ySW5zdGFuY2U8YW55PiwgdmFsdWU6IGFueSk6IFByb21pc2U8UmVhZGFibGVTdHJlYW1EZWZhdWx0UmVhZFJlc3VsdDxhbnk+PiB7XG4gICAgaWYgKCFJc1JlYWRhYmxlU3RyZWFtQXN5bmNJdGVyYXRvcih0aGlzKSkge1xuICAgICAgcmV0dXJuIHByb21pc2VSZWplY3RlZFdpdGgoc3RyZWFtQXN5bmNJdGVyYXRvckJyYW5kQ2hlY2tFeGNlcHRpb24oJ3JldHVybicpKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2FzeW5jSXRlcmF0b3JJbXBsLnJldHVybih2YWx1ZSk7XG4gIH1cbn0gYXMgYW55O1xuT2JqZWN0LnNldFByb3RvdHlwZU9mKFJlYWRhYmxlU3RyZWFtQXN5bmNJdGVyYXRvclByb3RvdHlwZSwgQXN5bmNJdGVyYXRvclByb3RvdHlwZSk7XG5cbi8vIEFic3RyYWN0IG9wZXJhdGlvbnMgZm9yIHRoZSBSZWFkYWJsZVN0cmVhbS5cblxuZXhwb3J0IGZ1bmN0aW9uIEFjcXVpcmVSZWFkYWJsZVN0cmVhbUFzeW5jSXRlcmF0b3I8Uj4oc3RyZWFtOiBSZWFkYWJsZVN0cmVhbTxSPixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZlbnRDYW5jZWw6IGJvb2xlYW4pOiBSZWFkYWJsZVN0cmVhbUFzeW5jSXRlcmF0b3I8Uj4ge1xuICBjb25zdCByZWFkZXIgPSBBY3F1aXJlUmVhZGFibGVTdHJlYW1EZWZhdWx0UmVhZGVyPFI+KHN0cmVhbSk7XG4gIGNvbnN0IGltcGwgPSBuZXcgUmVhZGFibGVTdHJlYW1Bc3luY0l0ZXJhdG9ySW1wbChyZWFkZXIsIHByZXZlbnRDYW5jZWwpO1xuICBjb25zdCBpdGVyYXRvcjogUmVhZGFibGVTdHJlYW1Bc3luY0l0ZXJhdG9ySW5zdGFuY2U8Uj4gPSBPYmplY3QuY3JlYXRlKFJlYWRhYmxlU3RyZWFtQXN5bmNJdGVyYXRvclByb3RvdHlwZSk7XG4gIGl0ZXJhdG9yLl9hc3luY0l0ZXJhdG9ySW1wbCA9IGltcGw7XG4gIHJldHVybiBpdGVyYXRvcjtcbn1cblxuZnVuY3Rpb24gSXNSZWFkYWJsZVN0cmVhbUFzeW5jSXRlcmF0b3I8UiA9IGFueT4oeDogYW55KTogeCBpcyBSZWFkYWJsZVN0cmVhbUFzeW5jSXRlcmF0b3I8Uj4ge1xuICBpZiAoIXR5cGVJc09iamVjdCh4KSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHgsICdfYXN5bmNJdGVyYXRvckltcGwnKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgLy8gbm9pbnNwZWN0aW9uIFN1c3BpY2lvdXNUeXBlT2ZHdWFyZFxuICAgIHJldHVybiAoeCBhcyBSZWFkYWJsZVN0cmVhbUFzeW5jSXRlcmF0b3JJbnN0YW5jZTxhbnk+KS5fYXN5bmNJdGVyYXRvckltcGwgaW5zdGFuY2VvZlxuICAgICAgUmVhZGFibGVTdHJlYW1Bc3luY0l0ZXJhdG9ySW1wbDtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbi8vIEhlbHBlciBmdW5jdGlvbnMgZm9yIHRoZSBSZWFkYWJsZVN0cmVhbS5cblxuZnVuY3Rpb24gc3RyZWFtQXN5bmNJdGVyYXRvckJyYW5kQ2hlY2tFeGNlcHRpb24obmFtZTogc3RyaW5nKTogVHlwZUVycm9yIHtcbiAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoYFJlYWRhYmxlU3RyZWFtQXN5bmNJdGVyYXRvci4ke25hbWV9IGNhbiBvbmx5IGJlIHVzZWQgb24gYSBSZWFkYWJsZVN0ZWFtQXN5bmNJdGVyYXRvcmApO1xufVxuIiwgIi8vLyA8cmVmZXJlbmNlIGxpYj1cImVzMjAxNS5jb3JlXCIgLz5cblxuLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvTnVtYmVyL2lzTmFOI1BvbHlmaWxsXG5jb25zdCBOdW1iZXJJc05hTjogdHlwZW9mIE51bWJlci5pc05hTiA9IE51bWJlci5pc05hTiB8fCBmdW5jdGlvbiAoeCkge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VsZi1jb21wYXJlXG4gIHJldHVybiB4ICE9PSB4O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgTnVtYmVySXNOYU47XG4iLCAiaW1wb3J0IHsgcmVmbGVjdENhbGwgfSBmcm9tICdsaWIvaGVscGVycy93ZWJpZGwnO1xuaW1wb3J0IHsgdHlwZUlzT2JqZWN0IH0gZnJvbSAnLi4vaGVscGVycy9taXNjZWxsYW5lb3VzJztcbmltcG9ydCBhc3NlcnQgZnJvbSAnLi4vLi4vc3R1Yi9hc3NlcnQnO1xuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBBcnJheUJ1ZmZlciB7XG4gICAgcmVhZG9ubHkgZGV0YWNoZWQ6IGJvb2xlYW47XG5cbiAgICB0cmFuc2ZlcigpOiBBcnJheUJ1ZmZlcjtcbiAgfVxuXG4gIGZ1bmN0aW9uIHN0cnVjdHVyZWRDbG9uZTxUPih2YWx1ZTogVCwgb3B0aW9uczogeyB0cmFuc2ZlcjogQXJyYXlCdWZmZXJbXSB9KTogVDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIENyZWF0ZUFycmF5RnJvbUxpc3Q8VCBleHRlbmRzIGFueVtdPihlbGVtZW50czogVCk6IFQge1xuICAvLyBXZSB1c2UgYXJyYXlzIHRvIHJlcHJlc2VudCBsaXN0cywgc28gdGhpcyBpcyBiYXNpY2FsbHkgYSBuby1vcC5cbiAgLy8gRG8gYSBzbGljZSB0aG91Z2gganVzdCBpbiBjYXNlIHdlIGhhcHBlbiB0byBkZXBlbmQgb24gdGhlIHVuaXF1ZS1uZXNzLlxuICByZXR1cm4gZWxlbWVudHMuc2xpY2UoKSBhcyBUO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gQ29weURhdGFCbG9ja0J5dGVzKGRlc3Q6IEFycmF5QnVmZmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0T2Zmc2V0OiBudW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYzogQXJyYXlCdWZmZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyY09mZnNldDogbnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuOiBudW1iZXIpIHtcbiAgbmV3IFVpbnQ4QXJyYXkoZGVzdCkuc2V0KG5ldyBVaW50OEFycmF5KHNyYywgc3JjT2Zmc2V0LCBuKSwgZGVzdE9mZnNldCk7XG59XG5cbmV4cG9ydCBsZXQgVHJhbnNmZXJBcnJheUJ1ZmZlciA9IChPOiBBcnJheUJ1ZmZlcik6IEFycmF5QnVmZmVyID0+IHtcbiAgaWYgKHR5cGVvZiBPLnRyYW5zZmVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgVHJhbnNmZXJBcnJheUJ1ZmZlciA9IGJ1ZmZlciA9PiBidWZmZXIudHJhbnNmZXIoKTtcbiAgfSBlbHNlIGlmICh0eXBlb2Ygc3RydWN0dXJlZENsb25lID09PSAnZnVuY3Rpb24nKSB7XG4gICAgVHJhbnNmZXJBcnJheUJ1ZmZlciA9IGJ1ZmZlciA9PiBzdHJ1Y3R1cmVkQ2xvbmUoYnVmZmVyLCB7IHRyYW5zZmVyOiBbYnVmZmVyXSB9KTtcbiAgfSBlbHNlIHtcbiAgICAvLyBOb3QgaW1wbGVtZW50ZWQgY29ycmVjdGx5XG4gICAgVHJhbnNmZXJBcnJheUJ1ZmZlciA9IGJ1ZmZlciA9PiBidWZmZXI7XG4gIH1cbiAgcmV0dXJuIFRyYW5zZmVyQXJyYXlCdWZmZXIoTyk7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gQ2FuVHJhbnNmZXJBcnJheUJ1ZmZlcihPOiBBcnJheUJ1ZmZlcik6IGJvb2xlYW4ge1xuICByZXR1cm4gIUlzRGV0YWNoZWRCdWZmZXIoTyk7XG59XG5cbmV4cG9ydCBsZXQgSXNEZXRhY2hlZEJ1ZmZlciA9IChPOiBBcnJheUJ1ZmZlcik6IGJvb2xlYW4gPT4ge1xuICBpZiAodHlwZW9mIE8uZGV0YWNoZWQgPT09ICdib29sZWFuJykge1xuICAgIElzRGV0YWNoZWRCdWZmZXIgPSBidWZmZXIgPT4gYnVmZmVyLmRldGFjaGVkO1xuICB9IGVsc2Uge1xuICAgIC8vIE5vdCBpbXBsZW1lbnRlZCBjb3JyZWN0bHlcbiAgICBJc0RldGFjaGVkQnVmZmVyID0gYnVmZmVyID0+IGJ1ZmZlci5ieXRlTGVuZ3RoID09PSAwO1xuICB9XG4gIHJldHVybiBJc0RldGFjaGVkQnVmZmVyKE8pO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIEFycmF5QnVmZmVyU2xpY2UoYnVmZmVyOiBBcnJheUJ1ZmZlciwgYmVnaW46IG51bWJlciwgZW5kOiBudW1iZXIpOiBBcnJheUJ1ZmZlciB7XG4gIC8vIEFycmF5QnVmZmVyLnByb3RvdHlwZS5zbGljZSBpcyBub3QgYXZhaWxhYmxlIG9uIElFMTBcbiAgLy8gaHR0cHM6Ly93d3cuY2FuaXVzZS5jb20vbWRuLWphdmFzY3JpcHRfYnVpbHRpbnNfYXJyYXlidWZmZXJfc2xpY2VcbiAgaWYgKGJ1ZmZlci5zbGljZSkge1xuICAgIHJldHVybiBidWZmZXIuc2xpY2UoYmVnaW4sIGVuZCk7XG4gIH1cbiAgY29uc3QgbGVuZ3RoID0gZW5kIC0gYmVnaW47XG4gIGNvbnN0IHNsaWNlID0gbmV3IEFycmF5QnVmZmVyKGxlbmd0aCk7XG4gIENvcHlEYXRhQmxvY2tCeXRlcyhzbGljZSwgMCwgYnVmZmVyLCBiZWdpbiwgbGVuZ3RoKTtcbiAgcmV0dXJuIHNsaWNlO1xufVxuXG5leHBvcnQgdHlwZSBNZXRob2ROYW1lPFQ+ID0ge1xuICBbUCBpbiBrZXlvZiBUXTogVFtQXSBleHRlbmRzIEZ1bmN0aW9uIHwgdW5kZWZpbmVkID8gUCA6IG5ldmVyO1xufVtrZXlvZiBUXTtcblxuZXhwb3J0IGZ1bmN0aW9uIEdldE1ldGhvZDxULCBLIGV4dGVuZHMgTWV0aG9kTmFtZTxUPj4ocmVjZWl2ZXI6IFQsIHByb3A6IEspOiBUW0tdIHwgdW5kZWZpbmVkIHtcbiAgY29uc3QgZnVuYyA9IHJlY2VpdmVyW3Byb3BdO1xuICBpZiAoZnVuYyA9PT0gdW5kZWZpbmVkIHx8IGZ1bmMgPT09IG51bGwpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIGlmICh0eXBlb2YgZnVuYyAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYCR7U3RyaW5nKHByb3ApfSBpcyBub3QgYSBmdW5jdGlvbmApO1xuICB9XG4gIHJldHVybiBmdW5jO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN5bmNJdGVyYXRvclJlY29yZDxUPiB7XG4gIGl0ZXJhdG9yOiBJdGVyYXRvcjxUPixcbiAgbmV4dE1ldGhvZDogSXRlcmF0b3I8VD5bJ25leHQnXSxcbiAgZG9uZTogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBc3luY0l0ZXJhdG9yUmVjb3JkPFQ+IHtcbiAgaXRlcmF0b3I6IEFzeW5jSXRlcmF0b3I8VD4sXG4gIG5leHRNZXRob2Q6IEFzeW5jSXRlcmF0b3I8VD5bJ25leHQnXSxcbiAgZG9uZTogYm9vbGVhbjtcbn1cblxuZXhwb3J0IHR5cGUgU3luY09yQXN5bmNJdGVyYXRvclJlY29yZDxUPiA9IFN5bmNJdGVyYXRvclJlY29yZDxUPiB8IEFzeW5jSXRlcmF0b3JSZWNvcmQ8VD47XG5cbmV4cG9ydCBmdW5jdGlvbiBDcmVhdGVBc3luY0Zyb21TeW5jSXRlcmF0b3I8VD4oc3luY0l0ZXJhdG9yUmVjb3JkOiBTeW5jSXRlcmF0b3JSZWNvcmQ8VD4pOiBBc3luY0l0ZXJhdG9yUmVjb3JkPFQ+IHtcbiAgLy8gSW5zdGVhZCBvZiByZS1pbXBsZW1lbnRpbmcgQ3JlYXRlQXN5bmNGcm9tU3luY0l0ZXJhdG9yIGFuZCAlQXN5bmNGcm9tU3luY0l0ZXJhdG9yUHJvdG90eXBlJSxcbiAgLy8gd2UgdXNlIHlpZWxkKiBpbnNpZGUgYW4gYXN5bmMgZ2VuZXJhdG9yIGZ1bmN0aW9uIHRvIGFjaGlldmUgdGhlIHNhbWUgcmVzdWx0LlxuXG4gIC8vIFdyYXAgdGhlIHN5bmMgaXRlcmF0b3IgaW5zaWRlIGEgc3luYyBpdGVyYWJsZSwgc28gd2UgY2FuIHVzZSBpdCB3aXRoIHlpZWxkKi5cbiAgY29uc3Qgc3luY0l0ZXJhYmxlID0ge1xuICAgIFtTeW1ib2wuaXRlcmF0b3JdOiAoKSA9PiBzeW5jSXRlcmF0b3JSZWNvcmQuaXRlcmF0b3JcbiAgfTtcbiAgLy8gQ3JlYXRlIGFuIGFzeW5jIGdlbmVyYXRvciBmdW5jdGlvbiBhbmQgaW1tZWRpYXRlbHkgaW52b2tlIGl0LlxuICBjb25zdCBhc3luY0l0ZXJhdG9yID0gKGFzeW5jIGZ1bmN0aW9uKiAoKSB7XG4gICAgcmV0dXJuIHlpZWxkKiBzeW5jSXRlcmFibGU7XG4gIH0oKSk7XG4gIC8vIFJldHVybiBhcyBhbiBhc3luYyBpdGVyYXRvciByZWNvcmQuXG4gIGNvbnN0IG5leHRNZXRob2QgPSBhc3luY0l0ZXJhdG9yLm5leHQ7XG4gIHJldHVybiB7IGl0ZXJhdG9yOiBhc3luY0l0ZXJhdG9yLCBuZXh0TWV0aG9kLCBkb25lOiBmYWxzZSB9O1xufVxuXG4vLyBBbGlnbnMgd2l0aCBjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmFzeW5jLWl0ZXJhdG9yLmpzXG5leHBvcnQgY29uc3QgU3ltYm9sQXN5bmNJdGVyYXRvcjogKHR5cGVvZiBTeW1ib2wpWydhc3luY0l0ZXJhdG9yJ10gPVxuICBTeW1ib2wuYXN5bmNJdGVyYXRvciA/P1xuICBTeW1ib2wuZm9yPy4oJ1N5bWJvbC5hc3luY0l0ZXJhdG9yJykgPz9cbiAgJ0BAYXN5bmNJdGVyYXRvcic7XG5cbmV4cG9ydCB0eXBlIFN5bmNPckFzeW5jSXRlcmFibGU8VD4gPSBJdGVyYWJsZTxUPiB8IEFzeW5jSXRlcmFibGU8VD47XG5leHBvcnQgdHlwZSBTeW5jT3JBc3luY0l0ZXJhdG9yTWV0aG9kPFQ+ID0gKCkgPT4gKEl0ZXJhdG9yPFQ+IHwgQXN5bmNJdGVyYXRvcjxUPik7XG5cbmZ1bmN0aW9uIEdldEl0ZXJhdG9yPFQ+KFxuICBvYmo6IFN5bmNPckFzeW5jSXRlcmFibGU8VD4sXG4gIGhpbnQ6ICdhc3luYycsXG4gIG1ldGhvZD86IFN5bmNPckFzeW5jSXRlcmF0b3JNZXRob2Q8VD5cbik6IEFzeW5jSXRlcmF0b3JSZWNvcmQ8VD47XG5mdW5jdGlvbiBHZXRJdGVyYXRvcjxUPihcbiAgb2JqOiBJdGVyYWJsZTxUPixcbiAgaGludDogJ3N5bmMnLFxuICBtZXRob2Q/OiBTeW5jT3JBc3luY0l0ZXJhdG9yTWV0aG9kPFQ+XG4pOiBTeW5jSXRlcmF0b3JSZWNvcmQ8VD47XG5mdW5jdGlvbiBHZXRJdGVyYXRvcjxUPihcbiAgb2JqOiBTeW5jT3JBc3luY0l0ZXJhYmxlPFQ+LFxuICBoaW50ID0gJ3N5bmMnLFxuICBtZXRob2Q/OiBTeW5jT3JBc3luY0l0ZXJhdG9yTWV0aG9kPFQ+XG4pOiBTeW5jT3JBc3luY0l0ZXJhdG9yUmVjb3JkPFQ+IHtcbiAgYXNzZXJ0KGhpbnQgPT09ICdzeW5jJyB8fCBoaW50ID09PSAnYXN5bmMnKTtcbiAgaWYgKG1ldGhvZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgaWYgKGhpbnQgPT09ICdhc3luYycpIHtcbiAgICAgIG1ldGhvZCA9IEdldE1ldGhvZChvYmogYXMgQXN5bmNJdGVyYWJsZTxUPiwgU3ltYm9sQXN5bmNJdGVyYXRvcik7XG4gICAgICBpZiAobWV0aG9kID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uc3Qgc3luY01ldGhvZCA9IEdldE1ldGhvZChvYmogYXMgSXRlcmFibGU8VD4sIFN5bWJvbC5pdGVyYXRvcik7XG4gICAgICAgIGNvbnN0IHN5bmNJdGVyYXRvclJlY29yZCA9IEdldEl0ZXJhdG9yKG9iaiBhcyBJdGVyYWJsZTxUPiwgJ3N5bmMnLCBzeW5jTWV0aG9kKTtcbiAgICAgICAgcmV0dXJuIENyZWF0ZUFzeW5jRnJvbVN5bmNJdGVyYXRvcihzeW5jSXRlcmF0b3JSZWNvcmQpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBtZXRob2QgPSBHZXRNZXRob2Qob2JqIGFzIEl0ZXJhYmxlPFQ+LCBTeW1ib2wuaXRlcmF0b3IpO1xuICAgIH1cbiAgfVxuICBpZiAobWV0aG9kID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgb2JqZWN0IGlzIG5vdCBpdGVyYWJsZScpO1xuICB9XG4gIGNvbnN0IGl0ZXJhdG9yID0gcmVmbGVjdENhbGwobWV0aG9kLCBvYmosIFtdKTtcbiAgaWYgKCF0eXBlSXNPYmplY3QoaXRlcmF0b3IpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIGl0ZXJhdG9yIG1ldGhvZCBtdXN0IHJldHVybiBhbiBvYmplY3QnKTtcbiAgfVxuICBjb25zdCBuZXh0TWV0aG9kID0gaXRlcmF0b3IubmV4dDtcbiAgcmV0dXJuIHsgaXRlcmF0b3IsIG5leHRNZXRob2QsIGRvbmU6IGZhbHNlIH0gYXMgU3luY09yQXN5bmNJdGVyYXRvclJlY29yZDxUPjtcbn1cblxuZXhwb3J0IHsgR2V0SXRlcmF0b3IgfTtcblxuZXhwb3J0IGZ1bmN0aW9uIEl0ZXJhdG9yTmV4dDxUPihpdGVyYXRvclJlY29yZDogQXN5bmNJdGVyYXRvclJlY29yZDxUPik6IFByb21pc2U8SXRlcmF0b3JSZXN1bHQ8VD4+IHtcbiAgY29uc3QgcmVzdWx0ID0gcmVmbGVjdENhbGwoaXRlcmF0b3JSZWNvcmQubmV4dE1ldGhvZCwgaXRlcmF0b3JSZWNvcmQuaXRlcmF0b3IsIFtdKTtcbiAgaWYgKCF0eXBlSXNPYmplY3QocmVzdWx0KSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBpdGVyYXRvci5uZXh0KCkgbWV0aG9kIG11c3QgcmV0dXJuIGFuIG9iamVjdCcpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBJdGVyYXRvckNvbXBsZXRlPFRSZXR1cm4+KFxuICBpdGVyUmVzdWx0OiBJdGVyYXRvclJlc3VsdDx1bmtub3duLCBUUmV0dXJuPlxuKTogaXRlclJlc3VsdCBpcyBJdGVyYXRvclJldHVyblJlc3VsdDxUUmV0dXJuPiB7XG4gIGFzc2VydCh0eXBlSXNPYmplY3QoaXRlclJlc3VsdCkpO1xuICByZXR1cm4gQm9vbGVhbihpdGVyUmVzdWx0LmRvbmUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gSXRlcmF0b3JWYWx1ZTxUPihpdGVyUmVzdWx0OiBJdGVyYXRvcllpZWxkUmVzdWx0PFQ+KTogVCB7XG4gIGFzc2VydCh0eXBlSXNPYmplY3QoaXRlclJlc3VsdCkpO1xuICByZXR1cm4gaXRlclJlc3VsdC52YWx1ZTtcbn1cbiIsICJpbXBvcnQgTnVtYmVySXNOYU4gZnJvbSAnLi4vLi4vc3R1Yi9udW1iZXItaXNuYW4nO1xuaW1wb3J0IHsgQXJyYXlCdWZmZXJTbGljZSB9IGZyb20gJy4vZWNtYXNjcmlwdCc7XG5pbXBvcnQgdHlwZSB7IE5vblNoYXJlZCB9IGZyb20gJy4uL2hlbHBlcnMvYXJyYXktYnVmZmVyLXZpZXcnO1xuXG5leHBvcnQgZnVuY3Rpb24gSXNOb25OZWdhdGl2ZU51bWJlcih2OiBudW1iZXIpOiBib29sZWFuIHtcbiAgaWYgKHR5cGVvZiB2ICE9PSAnbnVtYmVyJykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlmIChOdW1iZXJJc05hTih2KSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlmICh2IDwgMCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gQ2xvbmVBc1VpbnQ4QXJyYXkoTzogTm9uU2hhcmVkPEFycmF5QnVmZmVyVmlldz4pOiBOb25TaGFyZWQ8VWludDhBcnJheT4ge1xuICBjb25zdCBidWZmZXIgPSBBcnJheUJ1ZmZlclNsaWNlKE8uYnVmZmVyLCBPLmJ5dGVPZmZzZXQsIE8uYnl0ZU9mZnNldCArIE8uYnl0ZUxlbmd0aCk7XG4gIHJldHVybiBuZXcgVWludDhBcnJheShidWZmZXIpIGFzIE5vblNoYXJlZDxVaW50OEFycmF5Pjtcbn1cbiIsICJpbXBvcnQgYXNzZXJ0IGZyb20gJy4uLy4uL3N0dWIvYXNzZXJ0JztcbmltcG9ydCB7IFNpbXBsZVF1ZXVlIH0gZnJvbSAnLi4vc2ltcGxlLXF1ZXVlJztcbmltcG9ydCB7IElzTm9uTmVnYXRpdmVOdW1iZXIgfSBmcm9tICcuL21pc2NlbGxhbmVvdXMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFF1ZXVlQ29udGFpbmVyPFQ+IHtcbiAgX3F1ZXVlOiBTaW1wbGVRdWV1ZTxUPjtcbiAgX3F1ZXVlVG90YWxTaXplOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUXVldWVQYWlyPFQ+IHtcbiAgdmFsdWU6IFQ7XG4gIHNpemU6IG51bWJlcjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIERlcXVldWVWYWx1ZTxUPihjb250YWluZXI6IFF1ZXVlQ29udGFpbmVyPFF1ZXVlUGFpcjxUPj4pOiBUIHtcbiAgYXNzZXJ0KCdfcXVldWUnIGluIGNvbnRhaW5lciAmJiAnX3F1ZXVlVG90YWxTaXplJyBpbiBjb250YWluZXIpO1xuICBhc3NlcnQoY29udGFpbmVyLl9xdWV1ZS5sZW5ndGggPiAwKTtcblxuICBjb25zdCBwYWlyID0gY29udGFpbmVyLl9xdWV1ZS5zaGlmdCgpITtcbiAgY29udGFpbmVyLl9xdWV1ZVRvdGFsU2l6ZSAtPSBwYWlyLnNpemU7XG4gIGlmIChjb250YWluZXIuX3F1ZXVlVG90YWxTaXplIDwgMCkge1xuICAgIGNvbnRhaW5lci5fcXVldWVUb3RhbFNpemUgPSAwO1xuICB9XG5cbiAgcmV0dXJuIHBhaXIudmFsdWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBFbnF1ZXVlVmFsdWVXaXRoU2l6ZTxUPihjb250YWluZXI6IFF1ZXVlQ29udGFpbmVyPFF1ZXVlUGFpcjxUPj4sIHZhbHVlOiBULCBzaXplOiBudW1iZXIpIHtcbiAgYXNzZXJ0KCdfcXVldWUnIGluIGNvbnRhaW5lciAmJiAnX3F1ZXVlVG90YWxTaXplJyBpbiBjb250YWluZXIpO1xuXG4gIGlmICghSXNOb25OZWdhdGl2ZU51bWJlcihzaXplKSB8fCBzaXplID09PSBJbmZpbml0eSkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdTaXplIG11c3QgYmUgYSBmaW5pdGUsIG5vbi1OYU4sIG5vbi1uZWdhdGl2ZSBudW1iZXIuJyk7XG4gIH1cblxuICBjb250YWluZXIuX3F1ZXVlLnB1c2goeyB2YWx1ZSwgc2l6ZSB9KTtcbiAgY29udGFpbmVyLl9xdWV1ZVRvdGFsU2l6ZSArPSBzaXplO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gUGVla1F1ZXVlVmFsdWU8VD4oY29udGFpbmVyOiBRdWV1ZUNvbnRhaW5lcjxRdWV1ZVBhaXI8VD4+KTogVCB7XG4gIGFzc2VydCgnX3F1ZXVlJyBpbiBjb250YWluZXIgJiYgJ19xdWV1ZVRvdGFsU2l6ZScgaW4gY29udGFpbmVyKTtcbiAgYXNzZXJ0KGNvbnRhaW5lci5fcXVldWUubGVuZ3RoID4gMCk7XG5cbiAgY29uc3QgcGFpciA9IGNvbnRhaW5lci5fcXVldWUucGVlaygpO1xuICByZXR1cm4gcGFpci52YWx1ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFJlc2V0UXVldWU8VD4oY29udGFpbmVyOiBRdWV1ZUNvbnRhaW5lcjxUPikge1xuICBhc3NlcnQoJ19xdWV1ZScgaW4gY29udGFpbmVyICYmICdfcXVldWVUb3RhbFNpemUnIGluIGNvbnRhaW5lcik7XG5cbiAgY29udGFpbmVyLl9xdWV1ZSA9IG5ldyBTaW1wbGVRdWV1ZTxUPigpO1xuICBjb250YWluZXIuX3F1ZXVlVG90YWxTaXplID0gMDtcbn1cbiIsICJleHBvcnQgdHlwZSBUeXBlZEFycmF5ID1cbiAgfCBJbnQ4QXJyYXlcbiAgfCBVaW50OEFycmF5XG4gIHwgVWludDhDbGFtcGVkQXJyYXlcbiAgfCBJbnQxNkFycmF5XG4gIHwgVWludDE2QXJyYXlcbiAgfCBJbnQzMkFycmF5XG4gIHwgVWludDMyQXJyYXlcbiAgfCBGbG9hdDMyQXJyYXlcbiAgfCBGbG9hdDY0QXJyYXk7XG5cbmV4cG9ydCB0eXBlIE5vblNoYXJlZDxUIGV4dGVuZHMgQXJyYXlCdWZmZXJWaWV3PiA9IFQgJiB7XG4gIGJ1ZmZlcjogQXJyYXlCdWZmZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXJyYXlCdWZmZXJWaWV3Q29uc3RydWN0b3I8VCBleHRlbmRzIEFycmF5QnVmZmVyVmlldyA9IEFycmF5QnVmZmVyVmlldz4ge1xuICBuZXcoYnVmZmVyOiBBcnJheUJ1ZmZlciwgYnl0ZU9mZnNldDogbnVtYmVyLCBsZW5ndGg/OiBudW1iZXIpOiBUO1xuXG4gIHJlYWRvbmx5IHByb3RvdHlwZTogVDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUeXBlZEFycmF5Q29uc3RydWN0b3I8VCBleHRlbmRzIFR5cGVkQXJyYXkgPSBUeXBlZEFycmF5PiBleHRlbmRzIEFycmF5QnVmZmVyVmlld0NvbnN0cnVjdG9yPFQ+IHtcbiAgcmVhZG9ubHkgQllURVNfUEVSX0VMRU1FTlQ6IG51bWJlcjtcbn1cblxuZXhwb3J0IHR5cGUgRGF0YVZpZXdDb25zdHJ1Y3RvciA9IEFycmF5QnVmZmVyVmlld0NvbnN0cnVjdG9yPERhdGFWaWV3PjtcblxuZnVuY3Rpb24gaXNEYXRhVmlld0NvbnN0cnVjdG9yKGN0b3I6IEZ1bmN0aW9uKTogY3RvciBpcyBEYXRhVmlld0NvbnN0cnVjdG9yIHtcbiAgcmV0dXJuIGN0b3IgPT09IERhdGFWaWV3O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNEYXRhVmlldyh2aWV3OiBBcnJheUJ1ZmZlclZpZXcpOiB2aWV3IGlzIERhdGFWaWV3IHtcbiAgcmV0dXJuIGlzRGF0YVZpZXdDb25zdHJ1Y3Rvcih2aWV3LmNvbnN0cnVjdG9yKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFycmF5QnVmZmVyVmlld0VsZW1lbnRTaXplPFQgZXh0ZW5kcyBBcnJheUJ1ZmZlclZpZXc+KGN0b3I6IEFycmF5QnVmZmVyVmlld0NvbnN0cnVjdG9yPFQ+KTogbnVtYmVyIHtcbiAgaWYgKGlzRGF0YVZpZXdDb25zdHJ1Y3RvcihjdG9yKSkge1xuICAgIHJldHVybiAxO1xuICB9XG4gIHJldHVybiAoY3RvciBhcyB1bmtub3duIGFzIFR5cGVkQXJyYXlDb25zdHJ1Y3RvcikuQllURVNfUEVSX0VMRU1FTlQ7XG59XG4iLCAiaW1wb3J0IGFzc2VydCBmcm9tICcuLi8uLi9zdHViL2Fzc2VydCc7XG5pbXBvcnQgeyBTaW1wbGVRdWV1ZSB9IGZyb20gJy4uL3NpbXBsZS1xdWV1ZSc7XG5pbXBvcnQgeyBSZXNldFF1ZXVlIH0gZnJvbSAnLi4vYWJzdHJhY3Qtb3BzL3F1ZXVlLXdpdGgtc2l6ZXMnO1xuaW1wb3J0IHtcbiAgSXNSZWFkYWJsZVN0cmVhbURlZmF1bHRSZWFkZXIsXG4gIFJlYWRhYmxlU3RyZWFtQWRkUmVhZFJlcXVlc3QsXG4gIFJlYWRhYmxlU3RyZWFtRnVsZmlsbFJlYWRSZXF1ZXN0LFxuICBSZWFkYWJsZVN0cmVhbUdldE51bVJlYWRSZXF1ZXN0cyxcbiAgUmVhZGFibGVTdHJlYW1IYXNEZWZhdWx0UmVhZGVyLFxuICB0eXBlIFJlYWRSZXF1ZXN0XG59IGZyb20gJy4vZGVmYXVsdC1yZWFkZXInO1xuaW1wb3J0IHtcbiAgUmVhZGFibGVTdHJlYW1BZGRSZWFkSW50b1JlcXVlc3QsXG4gIFJlYWRhYmxlU3RyZWFtRnVsZmlsbFJlYWRJbnRvUmVxdWVzdCxcbiAgUmVhZGFibGVTdHJlYW1HZXROdW1SZWFkSW50b1JlcXVlc3RzLFxuICBSZWFkYWJsZVN0cmVhbUhhc0JZT0JSZWFkZXIsXG4gIHR5cGUgUmVhZEludG9SZXF1ZXN0XG59IGZyb20gJy4vYnlvYi1yZWFkZXInO1xuaW1wb3J0IE51bWJlcklzSW50ZWdlciBmcm9tICcuLi8uLi9zdHViL251bWJlci1pc2ludGVnZXInO1xuaW1wb3J0IHtcbiAgSXNSZWFkYWJsZVN0cmVhbUxvY2tlZCxcbiAgdHlwZSBSZWFkYWJsZUJ5dGVTdHJlYW0sXG4gIFJlYWRhYmxlU3RyZWFtQ2xvc2UsXG4gIFJlYWRhYmxlU3RyZWFtRXJyb3Jcbn0gZnJvbSAnLi4vcmVhZGFibGUtc3RyZWFtJztcbmltcG9ydCB0eXBlIHsgVmFsaWRhdGVkVW5kZXJseWluZ0J5dGVTb3VyY2UgfSBmcm9tICcuL3VuZGVybHlpbmctc291cmNlJztcbmltcG9ydCB7IHNldEZ1bmN0aW9uTmFtZSwgdHlwZUlzT2JqZWN0IH0gZnJvbSAnLi4vaGVscGVycy9taXNjZWxsYW5lb3VzJztcbmltcG9ydCB7XG4gIEFycmF5QnVmZmVyU2xpY2UsXG4gIENhblRyYW5zZmVyQXJyYXlCdWZmZXIsXG4gIENvcHlEYXRhQmxvY2tCeXRlcyxcbiAgSXNEZXRhY2hlZEJ1ZmZlcixcbiAgVHJhbnNmZXJBcnJheUJ1ZmZlclxufSBmcm9tICcuLi9hYnN0cmFjdC1vcHMvZWNtYXNjcmlwdCc7XG5pbXBvcnQgeyBDYW5jZWxTdGVwcywgUHVsbFN0ZXBzLCBSZWxlYXNlU3RlcHMgfSBmcm9tICcuLi9hYnN0cmFjdC1vcHMvaW50ZXJuYWwtbWV0aG9kcyc7XG5pbXBvcnQgeyBwcm9taXNlUmVzb2x2ZWRXaXRoLCB1cG9uUHJvbWlzZSB9IGZyb20gJy4uL2hlbHBlcnMvd2ViaWRsJztcbmltcG9ydCB7IGFzc2VydFJlcXVpcmVkQXJndW1lbnQsIGNvbnZlcnRVbnNpZ25lZExvbmdMb25nV2l0aEVuZm9yY2VSYW5nZSB9IGZyb20gJy4uL3ZhbGlkYXRvcnMvYmFzaWMnO1xuaW1wb3J0IHtcbiAgdHlwZSBBcnJheUJ1ZmZlclZpZXdDb25zdHJ1Y3RvcixcbiAgYXJyYXlCdWZmZXJWaWV3RWxlbWVudFNpemUsXG4gIHR5cGUgTm9uU2hhcmVkLFxuICB0eXBlIFR5cGVkQXJyYXlDb25zdHJ1Y3RvclxufSBmcm9tICcuLi9oZWxwZXJzL2FycmF5LWJ1ZmZlci12aWV3JztcblxuLyoqXG4gKiBBIHB1bGwtaW50byByZXF1ZXN0IGluIGEge0BsaW5rIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJ9LlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIFJlYWRhYmxlU3RyZWFtQllPQlJlcXVlc3Qge1xuICAvKiogQGludGVybmFsICovXG4gIF9hc3NvY2lhdGVkUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlciE6IFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXI7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX3ZpZXchOiBOb25TaGFyZWQ8QXJyYXlCdWZmZXJWaWV3PiB8IG51bGw7XG5cbiAgcHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbGxlZ2FsIGNvbnN0cnVjdG9yJyk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgdmlldyBmb3Igd3JpdGluZyBpbiB0bywgb3IgYG51bGxgIGlmIHRoZSBCWU9CIHJlcXVlc3QgaGFzIGFscmVhZHkgYmVlbiByZXNwb25kZWQgdG8uXG4gICAqL1xuICBnZXQgdmlldygpOiBBcnJheUJ1ZmZlclZpZXcgfCBudWxsIHtcbiAgICBpZiAoIUlzUmVhZGFibGVTdHJlYW1CWU9CUmVxdWVzdCh0aGlzKSkge1xuICAgICAgdGhyb3cgYnlvYlJlcXVlc3RCcmFuZENoZWNrRXhjZXB0aW9uKCd2aWV3Jyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX3ZpZXc7XG4gIH1cblxuICAvKipcbiAgICogSW5kaWNhdGVzIHRvIHRoZSBhc3NvY2lhdGVkIHJlYWRhYmxlIGJ5dGUgc3RyZWFtIHRoYXQgYGJ5dGVzV3JpdHRlbmAgYnl0ZXMgd2VyZSB3cml0dGVuIGludG9cbiAgICoge0BsaW5rIFJlYWRhYmxlU3RyZWFtQllPQlJlcXVlc3QudmlldyB8IHZpZXd9LCBjYXVzaW5nIHRoZSByZXN1bHQgYmUgc3VyZmFjZWQgdG8gdGhlIGNvbnN1bWVyLlxuICAgKlxuICAgKiBBZnRlciB0aGlzIG1ldGhvZCBpcyBjYWxsZWQsIHtAbGluayBSZWFkYWJsZVN0cmVhbUJZT0JSZXF1ZXN0LnZpZXcgfCB2aWV3fSB3aWxsIGJlIHRyYW5zZmVycmVkIGFuZCBubyBsb25nZXJcbiAgICogbW9kaWZpYWJsZS5cbiAgICovXG4gIHJlc3BvbmQoYnl0ZXNXcml0dGVuOiBudW1iZXIpOiB2b2lkO1xuICByZXNwb25kKGJ5dGVzV3JpdHRlbjogbnVtYmVyIHwgdW5kZWZpbmVkKTogdm9pZCB7XG4gICAgaWYgKCFJc1JlYWRhYmxlU3RyZWFtQllPQlJlcXVlc3QodGhpcykpIHtcbiAgICAgIHRocm93IGJ5b2JSZXF1ZXN0QnJhbmRDaGVja0V4Y2VwdGlvbigncmVzcG9uZCcpO1xuICAgIH1cbiAgICBhc3NlcnRSZXF1aXJlZEFyZ3VtZW50KGJ5dGVzV3JpdHRlbiwgMSwgJ3Jlc3BvbmQnKTtcbiAgICBieXRlc1dyaXR0ZW4gPSBjb252ZXJ0VW5zaWduZWRMb25nTG9uZ1dpdGhFbmZvcmNlUmFuZ2UoYnl0ZXNXcml0dGVuLCAnRmlyc3QgcGFyYW1ldGVyJyk7XG5cbiAgICBpZiAodGhpcy5fYXNzb2NpYXRlZFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhpcyBCWU9CIHJlcXVlc3QgaGFzIGJlZW4gaW52YWxpZGF0ZWQnKTtcbiAgICB9XG5cbiAgICBpZiAoSXNEZXRhY2hlZEJ1ZmZlcih0aGlzLl92aWV3IS5idWZmZXIpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBUaGUgQllPQiByZXF1ZXN0J3MgYnVmZmVyIGhhcyBiZWVuIGRldGFjaGVkIGFuZCBzbyBjYW5ub3QgYmUgdXNlZCBhcyBhIHJlc3BvbnNlYCk7XG4gICAgfVxuXG4gICAgYXNzZXJ0KHRoaXMuX3ZpZXchLmJ5dGVMZW5ndGggPiAwKTtcbiAgICBhc3NlcnQodGhpcy5fdmlldyEuYnVmZmVyLmJ5dGVMZW5ndGggPiAwKTtcblxuICAgIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJSZXNwb25kKHRoaXMuX2Fzc29jaWF0ZWRSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyLCBieXRlc1dyaXR0ZW4pO1xuICB9XG5cbiAgLyoqXG4gICAqIEluZGljYXRlcyB0byB0aGUgYXNzb2NpYXRlZCByZWFkYWJsZSBieXRlIHN0cmVhbSB0aGF0IGluc3RlYWQgb2Ygd3JpdGluZyBpbnRvXG4gICAqIHtAbGluayBSZWFkYWJsZVN0cmVhbUJZT0JSZXF1ZXN0LnZpZXcgfCB2aWV3fSwgdGhlIHVuZGVybHlpbmcgYnl0ZSBzb3VyY2UgaXMgcHJvdmlkaW5nIGEgbmV3IGBBcnJheUJ1ZmZlclZpZXdgLFxuICAgKiB3aGljaCB3aWxsIGJlIGdpdmVuIHRvIHRoZSBjb25zdW1lciBvZiB0aGUgcmVhZGFibGUgYnl0ZSBzdHJlYW0uXG4gICAqXG4gICAqIEFmdGVyIHRoaXMgbWV0aG9kIGlzIGNhbGxlZCwgYHZpZXdgIHdpbGwgYmUgdHJhbnNmZXJyZWQgYW5kIG5vIGxvbmdlciBtb2RpZmlhYmxlLlxuICAgKi9cbiAgcmVzcG9uZFdpdGhOZXdWaWV3KHZpZXc6IEFycmF5QnVmZmVyVmlldyk6IHZvaWQ7XG4gIHJlc3BvbmRXaXRoTmV3Vmlldyh2aWV3OiBOb25TaGFyZWQ8QXJyYXlCdWZmZXJWaWV3Pik6IHZvaWQge1xuICAgIGlmICghSXNSZWFkYWJsZVN0cmVhbUJZT0JSZXF1ZXN0KHRoaXMpKSB7XG4gICAgICB0aHJvdyBieW9iUmVxdWVzdEJyYW5kQ2hlY2tFeGNlcHRpb24oJ3Jlc3BvbmRXaXRoTmV3VmlldycpO1xuICAgIH1cbiAgICBhc3NlcnRSZXF1aXJlZEFyZ3VtZW50KHZpZXcsIDEsICdyZXNwb25kV2l0aE5ld1ZpZXcnKTtcblxuICAgIGlmICghQXJyYXlCdWZmZXIuaXNWaWV3KHZpZXcpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdZb3UgY2FuIG9ubHkgcmVzcG9uZCB3aXRoIGFycmF5IGJ1ZmZlciB2aWV3cycpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9hc3NvY2lhdGVkUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGlzIEJZT0IgcmVxdWVzdCBoYXMgYmVlbiBpbnZhbGlkYXRlZCcpO1xuICAgIH1cblxuICAgIGlmIChJc0RldGFjaGVkQnVmZmVyKHZpZXcuYnVmZmVyKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIGdpdmVuIHZpZXdcXCdzIGJ1ZmZlciBoYXMgYmVlbiBkZXRhY2hlZCBhbmQgc28gY2Fubm90IGJlIHVzZWQgYXMgYSByZXNwb25zZScpO1xuICAgIH1cblxuICAgIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJSZXNwb25kV2l0aE5ld1ZpZXcodGhpcy5fYXNzb2NpYXRlZFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXIsIHZpZXcpO1xuICB9XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFJlYWRhYmxlU3RyZWFtQllPQlJlcXVlc3QucHJvdG90eXBlLCB7XG4gIHJlc3BvbmQ6IHsgZW51bWVyYWJsZTogdHJ1ZSB9LFxuICByZXNwb25kV2l0aE5ld1ZpZXc6IHsgZW51bWVyYWJsZTogdHJ1ZSB9LFxuICB2aWV3OiB7IGVudW1lcmFibGU6IHRydWUgfVxufSk7XG5zZXRGdW5jdGlvbk5hbWUoUmVhZGFibGVTdHJlYW1CWU9CUmVxdWVzdC5wcm90b3R5cGUucmVzcG9uZCwgJ3Jlc3BvbmQnKTtcbnNldEZ1bmN0aW9uTmFtZShSZWFkYWJsZVN0cmVhbUJZT0JSZXF1ZXN0LnByb3RvdHlwZS5yZXNwb25kV2l0aE5ld1ZpZXcsICdyZXNwb25kV2l0aE5ld1ZpZXcnKTtcbmlmICh0eXBlb2YgU3ltYm9sLnRvU3RyaW5nVGFnID09PSAnc3ltYm9sJykge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVhZGFibGVTdHJlYW1CWU9CUmVxdWVzdC5wcm90b3R5cGUsIFN5bWJvbC50b1N0cmluZ1RhZywge1xuICAgIHZhbHVlOiAnUmVhZGFibGVTdHJlYW1CWU9CUmVxdWVzdCcsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlXG4gIH0pO1xufVxuXG5pbnRlcmZhY2UgQnl0ZVF1ZXVlRWxlbWVudCB7XG4gIGJ1ZmZlcjogQXJyYXlCdWZmZXI7XG4gIGJ5dGVPZmZzZXQ6IG51bWJlcjtcbiAgYnl0ZUxlbmd0aDogbnVtYmVyO1xufVxuXG50eXBlIFB1bGxJbnRvRGVzY3JpcHRvcjxUIGV4dGVuZHMgTm9uU2hhcmVkPEFycmF5QnVmZmVyVmlldz4gPSBOb25TaGFyZWQ8QXJyYXlCdWZmZXJWaWV3Pj4gPVxuICBEZWZhdWx0UHVsbEludG9EZXNjcmlwdG9yXG4gIHwgQllPQlB1bGxJbnRvRGVzY3JpcHRvcjxUPjtcblxuaW50ZXJmYWNlIERlZmF1bHRQdWxsSW50b0Rlc2NyaXB0b3Ige1xuICBidWZmZXI6IEFycmF5QnVmZmVyO1xuICBidWZmZXJCeXRlTGVuZ3RoOiBudW1iZXI7XG4gIGJ5dGVPZmZzZXQ6IG51bWJlcjtcbiAgYnl0ZUxlbmd0aDogbnVtYmVyO1xuICBieXRlc0ZpbGxlZDogbnVtYmVyO1xuICBtaW5pbXVtRmlsbDogbnVtYmVyO1xuICBlbGVtZW50U2l6ZTogbnVtYmVyO1xuICB2aWV3Q29uc3RydWN0b3I6IFR5cGVkQXJyYXlDb25zdHJ1Y3RvcjxVaW50OEFycmF5PjtcbiAgcmVhZGVyVHlwZTogJ2RlZmF1bHQnIHwgJ25vbmUnO1xufVxuXG5pbnRlcmZhY2UgQllPQlB1bGxJbnRvRGVzY3JpcHRvcjxUIGV4dGVuZHMgTm9uU2hhcmVkPEFycmF5QnVmZmVyVmlldz4gPSBOb25TaGFyZWQ8QXJyYXlCdWZmZXJWaWV3Pj4ge1xuICBidWZmZXI6IEFycmF5QnVmZmVyO1xuICBidWZmZXJCeXRlTGVuZ3RoOiBudW1iZXI7XG4gIGJ5dGVPZmZzZXQ6IG51bWJlcjtcbiAgYnl0ZUxlbmd0aDogbnVtYmVyO1xuICBieXRlc0ZpbGxlZDogbnVtYmVyO1xuICBtaW5pbXVtRmlsbDogbnVtYmVyO1xuICBlbGVtZW50U2l6ZTogbnVtYmVyO1xuICB2aWV3Q29uc3RydWN0b3I6IEFycmF5QnVmZmVyVmlld0NvbnN0cnVjdG9yPFQ+O1xuICByZWFkZXJUeXBlOiAnYnlvYicgfCAnbm9uZSc7XG59XG5cbi8qKlxuICogQWxsb3dzIGNvbnRyb2wgb2YgYSB7QGxpbmsgUmVhZGFibGVTdHJlYW0gfCByZWFkYWJsZSBieXRlIHN0cmVhbX0ncyBzdGF0ZSBhbmQgaW50ZXJuYWwgcXVldWUuXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlciB7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX2NvbnRyb2xsZWRSZWFkYWJsZUJ5dGVTdHJlYW0hOiBSZWFkYWJsZUJ5dGVTdHJlYW07XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX3F1ZXVlITogU2ltcGxlUXVldWU8Qnl0ZVF1ZXVlRWxlbWVudD47XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX3F1ZXVlVG90YWxTaXplITogbnVtYmVyO1xuICAvKiogQGludGVybmFsICovXG4gIF9zdGFydGVkITogYm9vbGVhbjtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfY2xvc2VSZXF1ZXN0ZWQhOiBib29sZWFuO1xuICAvKiogQGludGVybmFsICovXG4gIF9wdWxsQWdhaW4hOiBib29sZWFuO1xuICAvKiogQGludGVybmFsICovXG4gIF9wdWxsaW5nICE6IGJvb2xlYW47XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX3N0cmF0ZWd5SFdNITogbnVtYmVyO1xuICAvKiogQGludGVybmFsICovXG4gIF9wdWxsQWxnb3JpdGhtITogKCkgPT4gUHJvbWlzZTx2b2lkPjtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfY2FuY2VsQWxnb3JpdGhtITogKHJlYXNvbjogYW55KSA9PiBQcm9taXNlPHZvaWQ+O1xuICAvKiogQGludGVybmFsICovXG4gIF9hdXRvQWxsb2NhdGVDaHVua1NpemU6IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfYnlvYlJlcXVlc3Q6IFJlYWRhYmxlU3RyZWFtQllPQlJlcXVlc3QgfCBudWxsO1xuICAvKiogQGludGVybmFsICovXG4gIF9wZW5kaW5nUHVsbEludG9zITogU2ltcGxlUXVldWU8UHVsbEludG9EZXNjcmlwdG9yPjtcblxuICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0lsbGVnYWwgY29uc3RydWN0b3InKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50IEJZT0IgcHVsbCByZXF1ZXN0LCBvciBgbnVsbGAgaWYgdGhlcmUgaXNuJ3Qgb25lLlxuICAgKi9cbiAgZ2V0IGJ5b2JSZXF1ZXN0KCk6IFJlYWRhYmxlU3RyZWFtQllPQlJlcXVlc3QgfCBudWxsIHtcbiAgICBpZiAoIUlzUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlcih0aGlzKSkge1xuICAgICAgdGhyb3cgYnl0ZVN0cmVhbUNvbnRyb2xsZXJCcmFuZENoZWNrRXhjZXB0aW9uKCdieW9iUmVxdWVzdCcpO1xuICAgIH1cblxuICAgIHJldHVybiBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyR2V0QllPQlJlcXVlc3QodGhpcyk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgZGVzaXJlZCBzaXplIHRvIGZpbGwgdGhlIGNvbnRyb2xsZWQgc3RyZWFtJ3MgaW50ZXJuYWwgcXVldWUuIEl0IGNhbiBiZSBuZWdhdGl2ZSwgaWYgdGhlIHF1ZXVlIGlzXG4gICAqIG92ZXItZnVsbC4gQW4gdW5kZXJseWluZyBieXRlIHNvdXJjZSBvdWdodCB0byB1c2UgdGhpcyBpbmZvcm1hdGlvbiB0byBkZXRlcm1pbmUgd2hlbiBhbmQgaG93IHRvIGFwcGx5IGJhY2twcmVzc3VyZS5cbiAgICovXG4gIGdldCBkZXNpcmVkU2l6ZSgpOiBudW1iZXIgfCBudWxsIHtcbiAgICBpZiAoIUlzUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlcih0aGlzKSkge1xuICAgICAgdGhyb3cgYnl0ZVN0cmVhbUNvbnRyb2xsZXJCcmFuZENoZWNrRXhjZXB0aW9uKCdkZXNpcmVkU2l6ZScpO1xuICAgIH1cblxuICAgIHJldHVybiBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyR2V0RGVzaXJlZFNpemUodGhpcyk7XG4gIH1cblxuICAvKipcbiAgICogQ2xvc2VzIHRoZSBjb250cm9sbGVkIHJlYWRhYmxlIHN0cmVhbS4gQ29uc3VtZXJzIHdpbGwgc3RpbGwgYmUgYWJsZSB0byByZWFkIGFueSBwcmV2aW91c2x5LWVucXVldWVkIGNodW5rcyBmcm9tXG4gICAqIHRoZSBzdHJlYW0sIGJ1dCBvbmNlIHRob3NlIGFyZSByZWFkLCB0aGUgc3RyZWFtIHdpbGwgYmVjb21lIGNsb3NlZC5cbiAgICovXG4gIGNsb3NlKCk6IHZvaWQge1xuICAgIGlmICghSXNSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyKHRoaXMpKSB7XG4gICAgICB0aHJvdyBieXRlU3RyZWFtQ29udHJvbGxlckJyYW5kQ2hlY2tFeGNlcHRpb24oJ2Nsb3NlJyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2Nsb3NlUmVxdWVzdGVkKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgc3RyZWFtIGhhcyBhbHJlYWR5IGJlZW4gY2xvc2VkOyBkbyBub3QgY2xvc2UgaXQgYWdhaW4hJyk7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhdGUgPSB0aGlzLl9jb250cm9sbGVkUmVhZGFibGVCeXRlU3RyZWFtLl9zdGF0ZTtcbiAgICBpZiAoc3RhdGUgIT09ICdyZWFkYWJsZScpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYFRoZSBzdHJlYW0gKGluICR7c3RhdGV9IHN0YXRlKSBpcyBub3QgaW4gdGhlIHJlYWRhYmxlIHN0YXRlIGFuZCBjYW5ub3QgYmUgY2xvc2VkYCk7XG4gICAgfVxuXG4gICAgUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlckNsb3NlKHRoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEVucXVldWVzIHRoZSBnaXZlbiBjaHVuayBjaHVuayBpbiB0aGUgY29udHJvbGxlZCByZWFkYWJsZSBzdHJlYW0uXG4gICAqIFRoZSBjaHVuayBoYXMgdG8gYmUgYW4gYEFycmF5QnVmZmVyVmlld2AgaW5zdGFuY2UsIG9yIGVsc2UgYSBgVHlwZUVycm9yYCB3aWxsIGJlIHRocm93bi5cbiAgICovXG4gIGVucXVldWUoY2h1bms6IEFycmF5QnVmZmVyVmlldyk6IHZvaWQ7XG4gIGVucXVldWUoY2h1bms6IE5vblNoYXJlZDxBcnJheUJ1ZmZlclZpZXc+KTogdm9pZCB7XG4gICAgaWYgKCFJc1JlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXIodGhpcykpIHtcbiAgICAgIHRocm93IGJ5dGVTdHJlYW1Db250cm9sbGVyQnJhbmRDaGVja0V4Y2VwdGlvbignZW5xdWV1ZScpO1xuICAgIH1cblxuICAgIGFzc2VydFJlcXVpcmVkQXJndW1lbnQoY2h1bmssIDEsICdlbnF1ZXVlJyk7XG4gICAgaWYgKCFBcnJheUJ1ZmZlci5pc1ZpZXcoY2h1bmspKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdjaHVuayBtdXN0IGJlIGFuIGFycmF5IGJ1ZmZlciB2aWV3Jyk7XG4gICAgfVxuICAgIGlmIChjaHVuay5ieXRlTGVuZ3RoID09PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdjaHVuayBtdXN0IGhhdmUgbm9uLXplcm8gYnl0ZUxlbmd0aCcpO1xuICAgIH1cbiAgICBpZiAoY2h1bmsuYnVmZmVyLmJ5dGVMZW5ndGggPT09IDApIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYGNodW5rJ3MgYnVmZmVyIG11c3QgaGF2ZSBub24temVybyBieXRlTGVuZ3RoYCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2Nsb3NlUmVxdWVzdGVkKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdzdHJlYW0gaXMgY2xvc2VkIG9yIGRyYWluaW5nJyk7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhdGUgPSB0aGlzLl9jb250cm9sbGVkUmVhZGFibGVCeXRlU3RyZWFtLl9zdGF0ZTtcbiAgICBpZiAoc3RhdGUgIT09ICdyZWFkYWJsZScpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYFRoZSBzdHJlYW0gKGluICR7c3RhdGV9IHN0YXRlKSBpcyBub3QgaW4gdGhlIHJlYWRhYmxlIHN0YXRlIGFuZCBjYW5ub3QgYmUgZW5xdWV1ZWQgdG9gKTtcbiAgICB9XG5cbiAgICBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyRW5xdWV1ZSh0aGlzLCBjaHVuayk7XG4gIH1cblxuICAvKipcbiAgICogRXJyb3JzIHRoZSBjb250cm9sbGVkIHJlYWRhYmxlIHN0cmVhbSwgbWFraW5nIGFsbCBmdXR1cmUgaW50ZXJhY3Rpb25zIHdpdGggaXQgZmFpbCB3aXRoIHRoZSBnaXZlbiBlcnJvciBgZWAuXG4gICAqL1xuICBlcnJvcihlOiBhbnkgPSB1bmRlZmluZWQpOiB2b2lkIHtcbiAgICBpZiAoIUlzUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlcih0aGlzKSkge1xuICAgICAgdGhyb3cgYnl0ZVN0cmVhbUNvbnRyb2xsZXJCcmFuZENoZWNrRXhjZXB0aW9uKCdlcnJvcicpO1xuICAgIH1cblxuICAgIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJFcnJvcih0aGlzLCBlKTtcbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgW0NhbmNlbFN0ZXBzXShyZWFzb246IGFueSk6IFByb21pc2U8dm9pZD4ge1xuICAgIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJDbGVhclBlbmRpbmdQdWxsSW50b3ModGhpcyk7XG5cbiAgICBSZXNldFF1ZXVlKHRoaXMpO1xuXG4gICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fY2FuY2VsQWxnb3JpdGhtKHJlYXNvbik7XG4gICAgUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlckNsZWFyQWxnb3JpdGhtcyh0aGlzKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBbUHVsbFN0ZXBzXShyZWFkUmVxdWVzdDogUmVhZFJlcXVlc3Q8Tm9uU2hhcmVkPFVpbnQ4QXJyYXk+Pik6IHZvaWQge1xuICAgIGNvbnN0IHN0cmVhbSA9IHRoaXMuX2NvbnRyb2xsZWRSZWFkYWJsZUJ5dGVTdHJlYW07XG4gICAgYXNzZXJ0KFJlYWRhYmxlU3RyZWFtSGFzRGVmYXVsdFJlYWRlcihzdHJlYW0pKTtcblxuICAgIGlmICh0aGlzLl9xdWV1ZVRvdGFsU2l6ZSA+IDApIHtcbiAgICAgIGFzc2VydChSZWFkYWJsZVN0cmVhbUdldE51bVJlYWRSZXF1ZXN0cyhzdHJlYW0pID09PSAwKTtcblxuICAgICAgUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlckZpbGxSZWFkUmVxdWVzdEZyb21RdWV1ZSh0aGlzLCByZWFkUmVxdWVzdCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgYXV0b0FsbG9jYXRlQ2h1bmtTaXplID0gdGhpcy5fYXV0b0FsbG9jYXRlQ2h1bmtTaXplO1xuICAgIGlmIChhdXRvQWxsb2NhdGVDaHVua1NpemUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgbGV0IGJ1ZmZlcjogQXJyYXlCdWZmZXI7XG4gICAgICB0cnkge1xuICAgICAgICBidWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoYXV0b0FsbG9jYXRlQ2h1bmtTaXplKTtcbiAgICAgIH0gY2F0Y2ggKGJ1ZmZlckUpIHtcbiAgICAgICAgcmVhZFJlcXVlc3QuX2Vycm9yU3RlcHMoYnVmZmVyRSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcHVsbEludG9EZXNjcmlwdG9yOiBEZWZhdWx0UHVsbEludG9EZXNjcmlwdG9yID0ge1xuICAgICAgICBidWZmZXIsXG4gICAgICAgIGJ1ZmZlckJ5dGVMZW5ndGg6IGF1dG9BbGxvY2F0ZUNodW5rU2l6ZSxcbiAgICAgICAgYnl0ZU9mZnNldDogMCxcbiAgICAgICAgYnl0ZUxlbmd0aDogYXV0b0FsbG9jYXRlQ2h1bmtTaXplLFxuICAgICAgICBieXRlc0ZpbGxlZDogMCxcbiAgICAgICAgbWluaW11bUZpbGw6IDEsXG4gICAgICAgIGVsZW1lbnRTaXplOiAxLFxuICAgICAgICB2aWV3Q29uc3RydWN0b3I6IFVpbnQ4QXJyYXksXG4gICAgICAgIHJlYWRlclR5cGU6ICdkZWZhdWx0J1xuICAgICAgfTtcblxuICAgICAgdGhpcy5fcGVuZGluZ1B1bGxJbnRvcy5wdXNoKHB1bGxJbnRvRGVzY3JpcHRvcik7XG4gICAgfVxuXG4gICAgUmVhZGFibGVTdHJlYW1BZGRSZWFkUmVxdWVzdChzdHJlYW0sIHJlYWRSZXF1ZXN0KTtcbiAgICBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyQ2FsbFB1bGxJZk5lZWRlZCh0aGlzKTtcbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgW1JlbGVhc2VTdGVwc10oKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX3BlbmRpbmdQdWxsSW50b3MubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgZmlyc3RQdWxsSW50byA9IHRoaXMuX3BlbmRpbmdQdWxsSW50b3MucGVlaygpO1xuICAgICAgZmlyc3RQdWxsSW50by5yZWFkZXJUeXBlID0gJ25vbmUnO1xuXG4gICAgICB0aGlzLl9wZW5kaW5nUHVsbEludG9zID0gbmV3IFNpbXBsZVF1ZXVlKCk7XG4gICAgICB0aGlzLl9wZW5kaW5nUHVsbEludG9zLnB1c2goZmlyc3RQdWxsSW50byk7XG4gICAgfVxuICB9XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXIucHJvdG90eXBlLCB7XG4gIGNsb3NlOiB7IGVudW1lcmFibGU6IHRydWUgfSxcbiAgZW5xdWV1ZTogeyBlbnVtZXJhYmxlOiB0cnVlIH0sXG4gIGVycm9yOiB7IGVudW1lcmFibGU6IHRydWUgfSxcbiAgYnlvYlJlcXVlc3Q6IHsgZW51bWVyYWJsZTogdHJ1ZSB9LFxuICBkZXNpcmVkU2l6ZTogeyBlbnVtZXJhYmxlOiB0cnVlIH1cbn0pO1xuc2V0RnVuY3Rpb25OYW1lKFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXIucHJvdG90eXBlLmNsb3NlLCAnY2xvc2UnKTtcbnNldEZ1bmN0aW9uTmFtZShSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyLnByb3RvdHlwZS5lbnF1ZXVlLCAnZW5xdWV1ZScpO1xuc2V0RnVuY3Rpb25OYW1lKFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXIucHJvdG90eXBlLmVycm9yLCAnZXJyb3InKTtcbmlmICh0eXBlb2YgU3ltYm9sLnRvU3RyaW5nVGFnID09PSAnc3ltYm9sJykge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlci5wcm90b3R5cGUsIFN5bWJvbC50b1N0cmluZ1RhZywge1xuICAgIHZhbHVlOiAnUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlcicsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlXG4gIH0pO1xufVxuXG4vLyBBYnN0cmFjdCBvcGVyYXRpb25zIGZvciB0aGUgUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlci5cblxuZXhwb3J0IGZ1bmN0aW9uIElzUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlcih4OiBhbnkpOiB4IGlzIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXIge1xuICBpZiAoIXR5cGVJc09iamVjdCh4KSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHgsICdfY29udHJvbGxlZFJlYWRhYmxlQnl0ZVN0cmVhbScpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIHggaW5zdGFuY2VvZiBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyO1xufVxuXG5mdW5jdGlvbiBJc1JlYWRhYmxlU3RyZWFtQllPQlJlcXVlc3QoeDogYW55KTogeCBpcyBSZWFkYWJsZVN0cmVhbUJZT0JSZXF1ZXN0IHtcbiAgaWYgKCF0eXBlSXNPYmplY3QoeCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh4LCAnX2Fzc29jaWF0ZWRSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyJykpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZXR1cm4geCBpbnN0YW5jZW9mIFJlYWRhYmxlU3RyZWFtQllPQlJlcXVlc3Q7XG59XG5cbmZ1bmN0aW9uIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJDYWxsUHVsbElmTmVlZGVkKGNvbnRyb2xsZXI6IFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXIpOiB2b2lkIHtcbiAgY29uc3Qgc2hvdWxkUHVsbCA9IFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJTaG91bGRDYWxsUHVsbChjb250cm9sbGVyKTtcbiAgaWYgKCFzaG91bGRQdWxsKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKGNvbnRyb2xsZXIuX3B1bGxpbmcpIHtcbiAgICBjb250cm9sbGVyLl9wdWxsQWdhaW4gPSB0cnVlO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGFzc2VydCghY29udHJvbGxlci5fcHVsbEFnYWluKTtcblxuICBjb250cm9sbGVyLl9wdWxsaW5nID0gdHJ1ZTtcblxuICAvLyBUT0RPOiBUZXN0IGNvbnRyb2xsZXIgYXJndW1lbnRcbiAgY29uc3QgcHVsbFByb21pc2UgPSBjb250cm9sbGVyLl9wdWxsQWxnb3JpdGhtKCk7XG4gIHVwb25Qcm9taXNlKFxuICAgIHB1bGxQcm9taXNlLFxuICAgICgpID0+IHtcbiAgICAgIGNvbnRyb2xsZXIuX3B1bGxpbmcgPSBmYWxzZTtcblxuICAgICAgaWYgKGNvbnRyb2xsZXIuX3B1bGxBZ2Fpbikge1xuICAgICAgICBjb250cm9sbGVyLl9wdWxsQWdhaW4gPSBmYWxzZTtcbiAgICAgICAgUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlckNhbGxQdWxsSWZOZWVkZWQoY29udHJvbGxlcik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG4gICAgZSA9PiB7XG4gICAgICBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyRXJyb3IoY29udHJvbGxlciwgZSk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICk7XG59XG5cbmZ1bmN0aW9uIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJDbGVhclBlbmRpbmdQdWxsSW50b3MoY29udHJvbGxlcjogUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlcikge1xuICBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVySW52YWxpZGF0ZUJZT0JSZXF1ZXN0KGNvbnRyb2xsZXIpO1xuICBjb250cm9sbGVyLl9wZW5kaW5nUHVsbEludG9zID0gbmV3IFNpbXBsZVF1ZXVlKCk7XG59XG5cbmZ1bmN0aW9uIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJDb21taXRQdWxsSW50b0Rlc2NyaXB0b3I8VCBleHRlbmRzIE5vblNoYXJlZDxBcnJheUJ1ZmZlclZpZXc+PihcbiAgc3RyZWFtOiBSZWFkYWJsZUJ5dGVTdHJlYW0sXG4gIHB1bGxJbnRvRGVzY3JpcHRvcjogUHVsbEludG9EZXNjcmlwdG9yPFQ+XG4pIHtcbiAgYXNzZXJ0KHN0cmVhbS5fc3RhdGUgIT09ICdlcnJvcmVkJyk7XG4gIGFzc2VydChwdWxsSW50b0Rlc2NyaXB0b3IucmVhZGVyVHlwZSAhPT0gJ25vbmUnKTtcblxuICBsZXQgZG9uZSA9IGZhbHNlO1xuICBpZiAoc3RyZWFtLl9zdGF0ZSA9PT0gJ2Nsb3NlZCcpIHtcbiAgICBhc3NlcnQocHVsbEludG9EZXNjcmlwdG9yLmJ5dGVzRmlsbGVkICUgcHVsbEludG9EZXNjcmlwdG9yLmVsZW1lbnRTaXplID09PSAwKTtcbiAgICBkb25lID0gdHJ1ZTtcbiAgfVxuXG4gIGNvbnN0IGZpbGxlZFZpZXcgPSBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyQ29udmVydFB1bGxJbnRvRGVzY3JpcHRvcjxUPihwdWxsSW50b0Rlc2NyaXB0b3IpO1xuICBpZiAocHVsbEludG9EZXNjcmlwdG9yLnJlYWRlclR5cGUgPT09ICdkZWZhdWx0Jykge1xuICAgIFJlYWRhYmxlU3RyZWFtRnVsZmlsbFJlYWRSZXF1ZXN0KHN0cmVhbSwgZmlsbGVkVmlldyBhcyB1bmtub3duIGFzIE5vblNoYXJlZDxVaW50OEFycmF5PiwgZG9uZSk7XG4gIH0gZWxzZSB7XG4gICAgYXNzZXJ0KHB1bGxJbnRvRGVzY3JpcHRvci5yZWFkZXJUeXBlID09PSAnYnlvYicpO1xuICAgIFJlYWRhYmxlU3RyZWFtRnVsZmlsbFJlYWRJbnRvUmVxdWVzdChzdHJlYW0sIGZpbGxlZFZpZXcsIGRvbmUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJDb252ZXJ0UHVsbEludG9EZXNjcmlwdG9yPFQgZXh0ZW5kcyBOb25TaGFyZWQ8QXJyYXlCdWZmZXJWaWV3Pj4oXG4gIHB1bGxJbnRvRGVzY3JpcHRvcjogUHVsbEludG9EZXNjcmlwdG9yPFQ+XG4pOiBUIHtcbiAgY29uc3QgYnl0ZXNGaWxsZWQgPSBwdWxsSW50b0Rlc2NyaXB0b3IuYnl0ZXNGaWxsZWQ7XG4gIGNvbnN0IGVsZW1lbnRTaXplID0gcHVsbEludG9EZXNjcmlwdG9yLmVsZW1lbnRTaXplO1xuXG4gIGFzc2VydChieXRlc0ZpbGxlZCA8PSBwdWxsSW50b0Rlc2NyaXB0b3IuYnl0ZUxlbmd0aCk7XG4gIGFzc2VydChieXRlc0ZpbGxlZCAlIGVsZW1lbnRTaXplID09PSAwKTtcblxuICByZXR1cm4gbmV3IHB1bGxJbnRvRGVzY3JpcHRvci52aWV3Q29uc3RydWN0b3IoXG4gICAgcHVsbEludG9EZXNjcmlwdG9yLmJ1ZmZlciwgcHVsbEludG9EZXNjcmlwdG9yLmJ5dGVPZmZzZXQsIGJ5dGVzRmlsbGVkIC8gZWxlbWVudFNpemUpIGFzIFQ7XG59XG5cbmZ1bmN0aW9uIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJFbnF1ZXVlQ2h1bmtUb1F1ZXVlKGNvbnRyb2xsZXI6IFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWZmZXI6IEFycmF5QnVmZmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnl0ZU9mZnNldDogbnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnl0ZUxlbmd0aDogbnVtYmVyKSB7XG4gIGNvbnRyb2xsZXIuX3F1ZXVlLnB1c2goeyBidWZmZXIsIGJ5dGVPZmZzZXQsIGJ5dGVMZW5ndGggfSk7XG4gIGNvbnRyb2xsZXIuX3F1ZXVlVG90YWxTaXplICs9IGJ5dGVMZW5ndGg7XG59XG5cbmZ1bmN0aW9uIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJFbnF1ZXVlQ2xvbmVkQ2h1bmtUb1F1ZXVlKGNvbnRyb2xsZXI6IFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWZmZXI6IEFycmF5QnVmZmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnl0ZU9mZnNldDogbnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnl0ZUxlbmd0aDogbnVtYmVyKSB7XG4gIGxldCBjbG9uZWRDaHVuaztcbiAgdHJ5IHtcbiAgICBjbG9uZWRDaHVuayA9IEFycmF5QnVmZmVyU2xpY2UoYnVmZmVyLCBieXRlT2Zmc2V0LCBieXRlT2Zmc2V0ICsgYnl0ZUxlbmd0aCk7XG4gIH0gY2F0Y2ggKGNsb25lRSkge1xuICAgIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJFcnJvcihjb250cm9sbGVyLCBjbG9uZUUpO1xuICAgIHRocm93IGNsb25lRTtcbiAgfVxuICBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyRW5xdWV1ZUNodW5rVG9RdWV1ZShjb250cm9sbGVyLCBjbG9uZWRDaHVuaywgMCwgYnl0ZUxlbmd0aCk7XG59XG5cbmZ1bmN0aW9uIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJFbnF1ZXVlRGV0YWNoZWRQdWxsSW50b1RvUXVldWUoY29udHJvbGxlcjogUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3REZXNjcmlwdG9yOiBQdWxsSW50b0Rlc2NyaXB0b3IpIHtcbiAgYXNzZXJ0KGZpcnN0RGVzY3JpcHRvci5yZWFkZXJUeXBlID09PSAnbm9uZScpO1xuICBpZiAoZmlyc3REZXNjcmlwdG9yLmJ5dGVzRmlsbGVkID4gMCkge1xuICAgIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJFbnF1ZXVlQ2xvbmVkQ2h1bmtUb1F1ZXVlKFxuICAgICAgY29udHJvbGxlcixcbiAgICAgIGZpcnN0RGVzY3JpcHRvci5idWZmZXIsXG4gICAgICBmaXJzdERlc2NyaXB0b3IuYnl0ZU9mZnNldCxcbiAgICAgIGZpcnN0RGVzY3JpcHRvci5ieXRlc0ZpbGxlZFxuICAgICk7XG4gIH1cbiAgUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlclNoaWZ0UGVuZGluZ1B1bGxJbnRvKGNvbnRyb2xsZXIpO1xufVxuXG5mdW5jdGlvbiBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyRmlsbFB1bGxJbnRvRGVzY3JpcHRvckZyb21RdWV1ZShjb250cm9sbGVyOiBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHVsbEludG9EZXNjcmlwdG9yOiBQdWxsSW50b0Rlc2NyaXB0b3IpIHtcbiAgY29uc3QgbWF4Qnl0ZXNUb0NvcHkgPSBNYXRoLm1pbihjb250cm9sbGVyLl9xdWV1ZVRvdGFsU2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwdWxsSW50b0Rlc2NyaXB0b3IuYnl0ZUxlbmd0aCAtIHB1bGxJbnRvRGVzY3JpcHRvci5ieXRlc0ZpbGxlZCk7XG4gIGNvbnN0IG1heEJ5dGVzRmlsbGVkID0gcHVsbEludG9EZXNjcmlwdG9yLmJ5dGVzRmlsbGVkICsgbWF4Qnl0ZXNUb0NvcHk7XG5cbiAgbGV0IHRvdGFsQnl0ZXNUb0NvcHlSZW1haW5pbmcgPSBtYXhCeXRlc1RvQ29weTtcbiAgbGV0IHJlYWR5ID0gZmFsc2U7XG4gIGFzc2VydChwdWxsSW50b0Rlc2NyaXB0b3IuYnl0ZXNGaWxsZWQgPCBwdWxsSW50b0Rlc2NyaXB0b3IubWluaW11bUZpbGwpO1xuICBjb25zdCByZW1haW5kZXJCeXRlcyA9IG1heEJ5dGVzRmlsbGVkICUgcHVsbEludG9EZXNjcmlwdG9yLmVsZW1lbnRTaXplO1xuICBjb25zdCBtYXhBbGlnbmVkQnl0ZXMgPSBtYXhCeXRlc0ZpbGxlZCAtIHJlbWFpbmRlckJ5dGVzO1xuICAvLyBBIGRlc2NyaXB0b3IgZm9yIGEgcmVhZCgpIHJlcXVlc3QgdGhhdCBpcyBub3QgeWV0IGZpbGxlZCB1cCB0byBpdHMgbWluaW11bSBsZW5ndGggd2lsbCBzdGF5IGF0IHRoZSBoZWFkXG4gIC8vIG9mIHRoZSBxdWV1ZSwgc28gdGhlIHVuZGVybHlpbmcgc291cmNlIGNhbiBrZWVwIGZpbGxpbmcgaXQuXG4gIGlmIChtYXhBbGlnbmVkQnl0ZXMgPj0gcHVsbEludG9EZXNjcmlwdG9yLm1pbmltdW1GaWxsKSB7XG4gICAgdG90YWxCeXRlc1RvQ29weVJlbWFpbmluZyA9IG1heEFsaWduZWRCeXRlcyAtIHB1bGxJbnRvRGVzY3JpcHRvci5ieXRlc0ZpbGxlZDtcbiAgICByZWFkeSA9IHRydWU7XG4gIH1cblxuICBjb25zdCBxdWV1ZSA9IGNvbnRyb2xsZXIuX3F1ZXVlO1xuXG4gIHdoaWxlICh0b3RhbEJ5dGVzVG9Db3B5UmVtYWluaW5nID4gMCkge1xuICAgIGNvbnN0IGhlYWRPZlF1ZXVlID0gcXVldWUucGVlaygpO1xuXG4gICAgY29uc3QgYnl0ZXNUb0NvcHkgPSBNYXRoLm1pbih0b3RhbEJ5dGVzVG9Db3B5UmVtYWluaW5nLCBoZWFkT2ZRdWV1ZS5ieXRlTGVuZ3RoKTtcblxuICAgIGNvbnN0IGRlc3RTdGFydCA9IHB1bGxJbnRvRGVzY3JpcHRvci5ieXRlT2Zmc2V0ICsgcHVsbEludG9EZXNjcmlwdG9yLmJ5dGVzRmlsbGVkO1xuICAgIENvcHlEYXRhQmxvY2tCeXRlcyhwdWxsSW50b0Rlc2NyaXB0b3IuYnVmZmVyLCBkZXN0U3RhcnQsIGhlYWRPZlF1ZXVlLmJ1ZmZlciwgaGVhZE9mUXVldWUuYnl0ZU9mZnNldCwgYnl0ZXNUb0NvcHkpO1xuXG4gICAgaWYgKGhlYWRPZlF1ZXVlLmJ5dGVMZW5ndGggPT09IGJ5dGVzVG9Db3B5KSB7XG4gICAgICBxdWV1ZS5zaGlmdCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBoZWFkT2ZRdWV1ZS5ieXRlT2Zmc2V0ICs9IGJ5dGVzVG9Db3B5O1xuICAgICAgaGVhZE9mUXVldWUuYnl0ZUxlbmd0aCAtPSBieXRlc1RvQ29weTtcbiAgICB9XG4gICAgY29udHJvbGxlci5fcXVldWVUb3RhbFNpemUgLT0gYnl0ZXNUb0NvcHk7XG5cbiAgICBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyRmlsbEhlYWRQdWxsSW50b0Rlc2NyaXB0b3IoY29udHJvbGxlciwgYnl0ZXNUb0NvcHksIHB1bGxJbnRvRGVzY3JpcHRvcik7XG5cbiAgICB0b3RhbEJ5dGVzVG9Db3B5UmVtYWluaW5nIC09IGJ5dGVzVG9Db3B5O1xuICB9XG5cbiAgaWYgKCFyZWFkeSkge1xuICAgIGFzc2VydChjb250cm9sbGVyLl9xdWV1ZVRvdGFsU2l6ZSA9PT0gMCk7XG4gICAgYXNzZXJ0KHB1bGxJbnRvRGVzY3JpcHRvci5ieXRlc0ZpbGxlZCA+IDApO1xuICAgIGFzc2VydChwdWxsSW50b0Rlc2NyaXB0b3IuYnl0ZXNGaWxsZWQgPCBwdWxsSW50b0Rlc2NyaXB0b3IubWluaW11bUZpbGwpO1xuICB9XG5cbiAgcmV0dXJuIHJlYWR5O1xufVxuXG5mdW5jdGlvbiBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyRmlsbEhlYWRQdWxsSW50b0Rlc2NyaXB0b3IoY29udHJvbGxlcjogUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplOiBudW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHVsbEludG9EZXNjcmlwdG9yOiBQdWxsSW50b0Rlc2NyaXB0b3IpIHtcbiAgYXNzZXJ0KGNvbnRyb2xsZXIuX3BlbmRpbmdQdWxsSW50b3MubGVuZ3RoID09PSAwIHx8IGNvbnRyb2xsZXIuX3BlbmRpbmdQdWxsSW50b3MucGVlaygpID09PSBwdWxsSW50b0Rlc2NyaXB0b3IpO1xuICBhc3NlcnQoY29udHJvbGxlci5fYnlvYlJlcXVlc3QgPT09IG51bGwpO1xuICBwdWxsSW50b0Rlc2NyaXB0b3IuYnl0ZXNGaWxsZWQgKz0gc2l6ZTtcbn1cblxuZnVuY3Rpb24gUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlckhhbmRsZVF1ZXVlRHJhaW4oY29udHJvbGxlcjogUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlcikge1xuICBhc3NlcnQoY29udHJvbGxlci5fY29udHJvbGxlZFJlYWRhYmxlQnl0ZVN0cmVhbS5fc3RhdGUgPT09ICdyZWFkYWJsZScpO1xuXG4gIGlmIChjb250cm9sbGVyLl9xdWV1ZVRvdGFsU2l6ZSA9PT0gMCAmJiBjb250cm9sbGVyLl9jbG9zZVJlcXVlc3RlZCkge1xuICAgIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJDbGVhckFsZ29yaXRobXMoY29udHJvbGxlcik7XG4gICAgUmVhZGFibGVTdHJlYW1DbG9zZShjb250cm9sbGVyLl9jb250cm9sbGVkUmVhZGFibGVCeXRlU3RyZWFtKTtcbiAgfSBlbHNlIHtcbiAgICBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyQ2FsbFB1bGxJZk5lZWRlZChjb250cm9sbGVyKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVySW52YWxpZGF0ZUJZT0JSZXF1ZXN0KGNvbnRyb2xsZXI6IFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXIpIHtcbiAgaWYgKGNvbnRyb2xsZXIuX2J5b2JSZXF1ZXN0ID09PSBudWxsKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29udHJvbGxlci5fYnlvYlJlcXVlc3QuX2Fzc29jaWF0ZWRSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyID0gdW5kZWZpbmVkITtcbiAgY29udHJvbGxlci5fYnlvYlJlcXVlc3QuX3ZpZXcgPSBudWxsITtcbiAgY29udHJvbGxlci5fYnlvYlJlcXVlc3QgPSBudWxsO1xufVxuXG5mdW5jdGlvbiBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyUHJvY2Vzc1B1bGxJbnRvRGVzY3JpcHRvcnNVc2luZ1F1ZXVlKGNvbnRyb2xsZXI6IFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXIpIHtcbiAgYXNzZXJ0KCFjb250cm9sbGVyLl9jbG9zZVJlcXVlc3RlZCk7XG5cbiAgd2hpbGUgKGNvbnRyb2xsZXIuX3BlbmRpbmdQdWxsSW50b3MubGVuZ3RoID4gMCkge1xuICAgIGlmIChjb250cm9sbGVyLl9xdWV1ZVRvdGFsU2l6ZSA9PT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHB1bGxJbnRvRGVzY3JpcHRvciA9IGNvbnRyb2xsZXIuX3BlbmRpbmdQdWxsSW50b3MucGVlaygpO1xuICAgIGFzc2VydChwdWxsSW50b0Rlc2NyaXB0b3IucmVhZGVyVHlwZSAhPT0gJ25vbmUnKTtcblxuICAgIGlmIChSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyRmlsbFB1bGxJbnRvRGVzY3JpcHRvckZyb21RdWV1ZShjb250cm9sbGVyLCBwdWxsSW50b0Rlc2NyaXB0b3IpKSB7XG4gICAgICBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyU2hpZnRQZW5kaW5nUHVsbEludG8oY29udHJvbGxlcik7XG5cbiAgICAgIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJDb21taXRQdWxsSW50b0Rlc2NyaXB0b3IoXG4gICAgICAgIGNvbnRyb2xsZXIuX2NvbnRyb2xsZWRSZWFkYWJsZUJ5dGVTdHJlYW0sXG4gICAgICAgIHB1bGxJbnRvRGVzY3JpcHRvclxuICAgICAgKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlclByb2Nlc3NSZWFkUmVxdWVzdHNVc2luZ1F1ZXVlKGNvbnRyb2xsZXI6IFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXIpIHtcbiAgY29uc3QgcmVhZGVyID0gY29udHJvbGxlci5fY29udHJvbGxlZFJlYWRhYmxlQnl0ZVN0cmVhbS5fcmVhZGVyO1xuICBhc3NlcnQoSXNSZWFkYWJsZVN0cmVhbURlZmF1bHRSZWFkZXIocmVhZGVyKSk7XG4gIHdoaWxlIChyZWFkZXIuX3JlYWRSZXF1ZXN0cy5sZW5ndGggPiAwKSB7XG4gICAgaWYgKGNvbnRyb2xsZXIuX3F1ZXVlVG90YWxTaXplID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHJlYWRSZXF1ZXN0ID0gcmVhZGVyLl9yZWFkUmVxdWVzdHMuc2hpZnQoKTtcbiAgICBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyRmlsbFJlYWRSZXF1ZXN0RnJvbVF1ZXVlKGNvbnRyb2xsZXIsIHJlYWRSZXF1ZXN0KTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlclB1bGxJbnRvPFQgZXh0ZW5kcyBOb25TaGFyZWQ8QXJyYXlCdWZmZXJWaWV3Pj4oXG4gIGNvbnRyb2xsZXI6IFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXIsXG4gIHZpZXc6IFQsXG4gIG1pbjogbnVtYmVyLFxuICByZWFkSW50b1JlcXVlc3Q6IFJlYWRJbnRvUmVxdWVzdDxUPlxuKTogdm9pZCB7XG4gIGNvbnN0IHN0cmVhbSA9IGNvbnRyb2xsZXIuX2NvbnRyb2xsZWRSZWFkYWJsZUJ5dGVTdHJlYW07XG5cbiAgY29uc3QgY3RvciA9IHZpZXcuY29uc3RydWN0b3IgYXMgQXJyYXlCdWZmZXJWaWV3Q29uc3RydWN0b3I8VD47XG4gIGNvbnN0IGVsZW1lbnRTaXplID0gYXJyYXlCdWZmZXJWaWV3RWxlbWVudFNpemUoY3Rvcik7XG5cbiAgY29uc3QgeyBieXRlT2Zmc2V0LCBieXRlTGVuZ3RoIH0gPSB2aWV3O1xuXG4gIGNvbnN0IG1pbmltdW1GaWxsID0gbWluICogZWxlbWVudFNpemU7XG4gIGFzc2VydChtaW5pbXVtRmlsbCA+PSBlbGVtZW50U2l6ZSAmJiBtaW5pbXVtRmlsbCA8PSBieXRlTGVuZ3RoKTtcbiAgYXNzZXJ0KG1pbmltdW1GaWxsICUgZWxlbWVudFNpemUgPT09IDApO1xuXG4gIGxldCBidWZmZXI6IEFycmF5QnVmZmVyO1xuICB0cnkge1xuICAgIGJ1ZmZlciA9IFRyYW5zZmVyQXJyYXlCdWZmZXIodmlldy5idWZmZXIpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmVhZEludG9SZXF1ZXN0Ll9lcnJvclN0ZXBzKGUpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IHB1bGxJbnRvRGVzY3JpcHRvcjogQllPQlB1bGxJbnRvRGVzY3JpcHRvcjxUPiA9IHtcbiAgICBidWZmZXIsXG4gICAgYnVmZmVyQnl0ZUxlbmd0aDogYnVmZmVyLmJ5dGVMZW5ndGgsXG4gICAgYnl0ZU9mZnNldCxcbiAgICBieXRlTGVuZ3RoLFxuICAgIGJ5dGVzRmlsbGVkOiAwLFxuICAgIG1pbmltdW1GaWxsLFxuICAgIGVsZW1lbnRTaXplLFxuICAgIHZpZXdDb25zdHJ1Y3RvcjogY3RvcixcbiAgICByZWFkZXJUeXBlOiAnYnlvYidcbiAgfTtcblxuICBpZiAoY29udHJvbGxlci5fcGVuZGluZ1B1bGxJbnRvcy5sZW5ndGggPiAwKSB7XG4gICAgY29udHJvbGxlci5fcGVuZGluZ1B1bGxJbnRvcy5wdXNoKHB1bGxJbnRvRGVzY3JpcHRvcik7XG5cbiAgICAvLyBObyBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyQ2FsbFB1bGxJZk5lZWRlZCgpIGNhbGwgc2luY2U6XG4gICAgLy8gLSBObyBjaGFuZ2UgaGFwcGVucyBvbiBkZXNpcmVkU2l6ZVxuICAgIC8vIC0gVGhlIHNvdXJjZSBoYXMgYWxyZWFkeSBiZWVuIG5vdGlmaWVkIG9mIHRoYXQgdGhlcmUncyBhdCBsZWFzdCAxIHBlbmRpbmcgcmVhZCh2aWV3KVxuXG4gICAgUmVhZGFibGVTdHJlYW1BZGRSZWFkSW50b1JlcXVlc3Qoc3RyZWFtLCByZWFkSW50b1JlcXVlc3QpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChzdHJlYW0uX3N0YXRlID09PSAnY2xvc2VkJykge1xuICAgIGNvbnN0IGVtcHR5VmlldyA9IG5ldyBjdG9yKHB1bGxJbnRvRGVzY3JpcHRvci5idWZmZXIsIHB1bGxJbnRvRGVzY3JpcHRvci5ieXRlT2Zmc2V0LCAwKTtcbiAgICByZWFkSW50b1JlcXVlc3QuX2Nsb3NlU3RlcHMoZW1wdHlWaWV3KTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoY29udHJvbGxlci5fcXVldWVUb3RhbFNpemUgPiAwKSB7XG4gICAgaWYgKFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJGaWxsUHVsbEludG9EZXNjcmlwdG9yRnJvbVF1ZXVlKGNvbnRyb2xsZXIsIHB1bGxJbnRvRGVzY3JpcHRvcikpIHtcbiAgICAgIGNvbnN0IGZpbGxlZFZpZXcgPSBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyQ29udmVydFB1bGxJbnRvRGVzY3JpcHRvcjxUPihwdWxsSW50b0Rlc2NyaXB0b3IpO1xuXG4gICAgICBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVySGFuZGxlUXVldWVEcmFpbihjb250cm9sbGVyKTtcblxuICAgICAgcmVhZEludG9SZXF1ZXN0Ll9jaHVua1N0ZXBzKGZpbGxlZFZpZXcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChjb250cm9sbGVyLl9jbG9zZVJlcXVlc3RlZCkge1xuICAgICAgY29uc3QgZSA9IG5ldyBUeXBlRXJyb3IoJ0luc3VmZmljaWVudCBieXRlcyB0byBmaWxsIGVsZW1lbnRzIGluIHRoZSBnaXZlbiBidWZmZXInKTtcbiAgICAgIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJFcnJvcihjb250cm9sbGVyLCBlKTtcblxuICAgICAgcmVhZEludG9SZXF1ZXN0Ll9lcnJvclN0ZXBzKGUpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuXG4gIGNvbnRyb2xsZXIuX3BlbmRpbmdQdWxsSW50b3MucHVzaChwdWxsSW50b0Rlc2NyaXB0b3IpO1xuXG4gIFJlYWRhYmxlU3RyZWFtQWRkUmVhZEludG9SZXF1ZXN0PFQ+KHN0cmVhbSwgcmVhZEludG9SZXF1ZXN0KTtcbiAgUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlckNhbGxQdWxsSWZOZWVkZWQoY29udHJvbGxlcik7XG59XG5cbmZ1bmN0aW9uIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJSZXNwb25kSW5DbG9zZWRTdGF0ZShjb250cm9sbGVyOiBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0RGVzY3JpcHRvcjogUHVsbEludG9EZXNjcmlwdG9yKSB7XG4gIGFzc2VydChmaXJzdERlc2NyaXB0b3IuYnl0ZXNGaWxsZWQgJSBmaXJzdERlc2NyaXB0b3IuZWxlbWVudFNpemUgPT09IDApO1xuXG4gIGlmIChmaXJzdERlc2NyaXB0b3IucmVhZGVyVHlwZSA9PT0gJ25vbmUnKSB7XG4gICAgUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlclNoaWZ0UGVuZGluZ1B1bGxJbnRvKGNvbnRyb2xsZXIpO1xuICB9XG5cbiAgY29uc3Qgc3RyZWFtID0gY29udHJvbGxlci5fY29udHJvbGxlZFJlYWRhYmxlQnl0ZVN0cmVhbTtcbiAgaWYgKFJlYWRhYmxlU3RyZWFtSGFzQllPQlJlYWRlcihzdHJlYW0pKSB7XG4gICAgd2hpbGUgKFJlYWRhYmxlU3RyZWFtR2V0TnVtUmVhZEludG9SZXF1ZXN0cyhzdHJlYW0pID4gMCkge1xuICAgICAgY29uc3QgcHVsbEludG9EZXNjcmlwdG9yID0gUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlclNoaWZ0UGVuZGluZ1B1bGxJbnRvKGNvbnRyb2xsZXIpO1xuICAgICAgUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlckNvbW1pdFB1bGxJbnRvRGVzY3JpcHRvcihzdHJlYW0sIHB1bGxJbnRvRGVzY3JpcHRvcik7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJSZXNwb25kSW5SZWFkYWJsZVN0YXRlKGNvbnRyb2xsZXI6IFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBieXRlc1dyaXR0ZW46IG51bWJlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1bGxJbnRvRGVzY3JpcHRvcjogUHVsbEludG9EZXNjcmlwdG9yKSB7XG4gIGFzc2VydChwdWxsSW50b0Rlc2NyaXB0b3IuYnl0ZXNGaWxsZWQgKyBieXRlc1dyaXR0ZW4gPD0gcHVsbEludG9EZXNjcmlwdG9yLmJ5dGVMZW5ndGgpO1xuXG4gIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJGaWxsSGVhZFB1bGxJbnRvRGVzY3JpcHRvcihjb250cm9sbGVyLCBieXRlc1dyaXR0ZW4sIHB1bGxJbnRvRGVzY3JpcHRvcik7XG5cbiAgaWYgKHB1bGxJbnRvRGVzY3JpcHRvci5yZWFkZXJUeXBlID09PSAnbm9uZScpIHtcbiAgICBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyRW5xdWV1ZURldGFjaGVkUHVsbEludG9Ub1F1ZXVlKGNvbnRyb2xsZXIsIHB1bGxJbnRvRGVzY3JpcHRvcik7XG4gICAgUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlclByb2Nlc3NQdWxsSW50b0Rlc2NyaXB0b3JzVXNpbmdRdWV1ZShjb250cm9sbGVyKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAocHVsbEludG9EZXNjcmlwdG9yLmJ5dGVzRmlsbGVkIDwgcHVsbEludG9EZXNjcmlwdG9yLm1pbmltdW1GaWxsKSB7XG4gICAgLy8gQSBkZXNjcmlwdG9yIGZvciBhIHJlYWQoKSByZXF1ZXN0IHRoYXQgaXMgbm90IHlldCBmaWxsZWQgdXAgdG8gaXRzIG1pbmltdW0gbGVuZ3RoIHdpbGwgc3RheSBhdCB0aGUgaGVhZFxuICAgIC8vIG9mIHRoZSBxdWV1ZSwgc28gdGhlIHVuZGVybHlpbmcgc291cmNlIGNhbiBrZWVwIGZpbGxpbmcgaXQuXG4gICAgcmV0dXJuO1xuICB9XG5cbiAgUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlclNoaWZ0UGVuZGluZ1B1bGxJbnRvKGNvbnRyb2xsZXIpO1xuXG4gIGNvbnN0IHJlbWFpbmRlclNpemUgPSBwdWxsSW50b0Rlc2NyaXB0b3IuYnl0ZXNGaWxsZWQgJSBwdWxsSW50b0Rlc2NyaXB0b3IuZWxlbWVudFNpemU7XG4gIGlmIChyZW1haW5kZXJTaXplID4gMCkge1xuICAgIGNvbnN0IGVuZCA9IHB1bGxJbnRvRGVzY3JpcHRvci5ieXRlT2Zmc2V0ICsgcHVsbEludG9EZXNjcmlwdG9yLmJ5dGVzRmlsbGVkO1xuICAgIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJFbnF1ZXVlQ2xvbmVkQ2h1bmtUb1F1ZXVlKFxuICAgICAgY29udHJvbGxlcixcbiAgICAgIHB1bGxJbnRvRGVzY3JpcHRvci5idWZmZXIsXG4gICAgICBlbmQgLSByZW1haW5kZXJTaXplLFxuICAgICAgcmVtYWluZGVyU2l6ZVxuICAgICk7XG4gIH1cblxuICBwdWxsSW50b0Rlc2NyaXB0b3IuYnl0ZXNGaWxsZWQgLT0gcmVtYWluZGVyU2l6ZTtcbiAgUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlckNvbW1pdFB1bGxJbnRvRGVzY3JpcHRvcihjb250cm9sbGVyLl9jb250cm9sbGVkUmVhZGFibGVCeXRlU3RyZWFtLCBwdWxsSW50b0Rlc2NyaXB0b3IpO1xuXG4gIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJQcm9jZXNzUHVsbEludG9EZXNjcmlwdG9yc1VzaW5nUXVldWUoY29udHJvbGxlcik7XG59XG5cbmZ1bmN0aW9uIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJSZXNwb25kSW50ZXJuYWwoY29udHJvbGxlcjogUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlciwgYnl0ZXNXcml0dGVuOiBudW1iZXIpIHtcbiAgY29uc3QgZmlyc3REZXNjcmlwdG9yID0gY29udHJvbGxlci5fcGVuZGluZ1B1bGxJbnRvcy5wZWVrKCk7XG4gIGFzc2VydChDYW5UcmFuc2ZlckFycmF5QnVmZmVyKGZpcnN0RGVzY3JpcHRvci5idWZmZXIpKTtcblxuICBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVySW52YWxpZGF0ZUJZT0JSZXF1ZXN0KGNvbnRyb2xsZXIpO1xuXG4gIGNvbnN0IHN0YXRlID0gY29udHJvbGxlci5fY29udHJvbGxlZFJlYWRhYmxlQnl0ZVN0cmVhbS5fc3RhdGU7XG4gIGlmIChzdGF0ZSA9PT0gJ2Nsb3NlZCcpIHtcbiAgICBhc3NlcnQoYnl0ZXNXcml0dGVuID09PSAwKTtcbiAgICBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyUmVzcG9uZEluQ2xvc2VkU3RhdGUoY29udHJvbGxlciwgZmlyc3REZXNjcmlwdG9yKTtcbiAgfSBlbHNlIHtcbiAgICBhc3NlcnQoc3RhdGUgPT09ICdyZWFkYWJsZScpO1xuICAgIGFzc2VydChieXRlc1dyaXR0ZW4gPiAwKTtcbiAgICBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyUmVzcG9uZEluUmVhZGFibGVTdGF0ZShjb250cm9sbGVyLCBieXRlc1dyaXR0ZW4sIGZpcnN0RGVzY3JpcHRvcik7XG4gIH1cblxuICBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyQ2FsbFB1bGxJZk5lZWRlZChjb250cm9sbGVyKTtcbn1cblxuZnVuY3Rpb24gUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlclNoaWZ0UGVuZGluZ1B1bGxJbnRvKFxuICBjb250cm9sbGVyOiBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyXG4pOiBQdWxsSW50b0Rlc2NyaXB0b3Ige1xuICBhc3NlcnQoY29udHJvbGxlci5fYnlvYlJlcXVlc3QgPT09IG51bGwpO1xuICBjb25zdCBkZXNjcmlwdG9yID0gY29udHJvbGxlci5fcGVuZGluZ1B1bGxJbnRvcy5zaGlmdCgpITtcbiAgcmV0dXJuIGRlc2NyaXB0b3I7XG59XG5cbmZ1bmN0aW9uIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJTaG91bGRDYWxsUHVsbChjb250cm9sbGVyOiBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyKTogYm9vbGVhbiB7XG4gIGNvbnN0IHN0cmVhbSA9IGNvbnRyb2xsZXIuX2NvbnRyb2xsZWRSZWFkYWJsZUJ5dGVTdHJlYW07XG5cbiAgaWYgKHN0cmVhbS5fc3RhdGUgIT09ICdyZWFkYWJsZScpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAoY29udHJvbGxlci5fY2xvc2VSZXF1ZXN0ZWQpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAoIWNvbnRyb2xsZXIuX3N0YXJ0ZWQpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAoUmVhZGFibGVTdHJlYW1IYXNEZWZhdWx0UmVhZGVyKHN0cmVhbSkgJiYgUmVhZGFibGVTdHJlYW1HZXROdW1SZWFkUmVxdWVzdHMoc3RyZWFtKSA+IDApIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGlmIChSZWFkYWJsZVN0cmVhbUhhc0JZT0JSZWFkZXIoc3RyZWFtKSAmJiBSZWFkYWJsZVN0cmVhbUdldE51bVJlYWRJbnRvUmVxdWVzdHMoc3RyZWFtKSA+IDApIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGNvbnN0IGRlc2lyZWRTaXplID0gUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlckdldERlc2lyZWRTaXplKGNvbnRyb2xsZXIpO1xuICBhc3NlcnQoZGVzaXJlZFNpemUgIT09IG51bGwpO1xuICBpZiAoZGVzaXJlZFNpemUhID4gMCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyQ2xlYXJBbGdvcml0aG1zKGNvbnRyb2xsZXI6IFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXIpIHtcbiAgY29udHJvbGxlci5fcHVsbEFsZ29yaXRobSA9IHVuZGVmaW5lZCE7XG4gIGNvbnRyb2xsZXIuX2NhbmNlbEFsZ29yaXRobSA9IHVuZGVmaW5lZCE7XG59XG5cbi8vIEEgY2xpZW50IG9mIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXIgbWF5IHVzZSB0aGVzZSBmdW5jdGlvbnMgZGlyZWN0bHkgdG8gYnlwYXNzIHN0YXRlIGNoZWNrLlxuXG5leHBvcnQgZnVuY3Rpb24gUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlckNsb3NlKGNvbnRyb2xsZXI6IFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXIpIHtcbiAgY29uc3Qgc3RyZWFtID0gY29udHJvbGxlci5fY29udHJvbGxlZFJlYWRhYmxlQnl0ZVN0cmVhbTtcblxuICBpZiAoY29udHJvbGxlci5fY2xvc2VSZXF1ZXN0ZWQgfHwgc3RyZWFtLl9zdGF0ZSAhPT0gJ3JlYWRhYmxlJykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChjb250cm9sbGVyLl9xdWV1ZVRvdGFsU2l6ZSA+IDApIHtcbiAgICBjb250cm9sbGVyLl9jbG9zZVJlcXVlc3RlZCA9IHRydWU7XG5cbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoY29udHJvbGxlci5fcGVuZGluZ1B1bGxJbnRvcy5sZW5ndGggPiAwKSB7XG4gICAgY29uc3QgZmlyc3RQZW5kaW5nUHVsbEludG8gPSBjb250cm9sbGVyLl9wZW5kaW5nUHVsbEludG9zLnBlZWsoKTtcbiAgICBpZiAoZmlyc3RQZW5kaW5nUHVsbEludG8uYnl0ZXNGaWxsZWQgJSBmaXJzdFBlbmRpbmdQdWxsSW50by5lbGVtZW50U2l6ZSAhPT0gMCkge1xuICAgICAgY29uc3QgZSA9IG5ldyBUeXBlRXJyb3IoJ0luc3VmZmljaWVudCBieXRlcyB0byBmaWxsIGVsZW1lbnRzIGluIHRoZSBnaXZlbiBidWZmZXInKTtcbiAgICAgIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJFcnJvcihjb250cm9sbGVyLCBlKTtcblxuICAgICAgdGhyb3cgZTtcbiAgICB9XG4gIH1cblxuICBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyQ2xlYXJBbGdvcml0aG1zKGNvbnRyb2xsZXIpO1xuICBSZWFkYWJsZVN0cmVhbUNsb3NlKHN0cmVhbSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyRW5xdWV1ZShcbiAgY29udHJvbGxlcjogUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlcixcbiAgY2h1bms6IE5vblNoYXJlZDxBcnJheUJ1ZmZlclZpZXc+XG4pIHtcbiAgY29uc3Qgc3RyZWFtID0gY29udHJvbGxlci5fY29udHJvbGxlZFJlYWRhYmxlQnl0ZVN0cmVhbTtcblxuICBpZiAoY29udHJvbGxlci5fY2xvc2VSZXF1ZXN0ZWQgfHwgc3RyZWFtLl9zdGF0ZSAhPT0gJ3JlYWRhYmxlJykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IHsgYnVmZmVyLCBieXRlT2Zmc2V0LCBieXRlTGVuZ3RoIH0gPSBjaHVuaztcbiAgaWYgKElzRGV0YWNoZWRCdWZmZXIoYnVmZmVyKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2NodW5rXFwncyBidWZmZXIgaXMgZGV0YWNoZWQgYW5kIHNvIGNhbm5vdCBiZSBlbnF1ZXVlZCcpO1xuICB9XG4gIGNvbnN0IHRyYW5zZmVycmVkQnVmZmVyID0gVHJhbnNmZXJBcnJheUJ1ZmZlcihidWZmZXIpO1xuXG4gIGlmIChjb250cm9sbGVyLl9wZW5kaW5nUHVsbEludG9zLmxlbmd0aCA+IDApIHtcbiAgICBjb25zdCBmaXJzdFBlbmRpbmdQdWxsSW50byA9IGNvbnRyb2xsZXIuX3BlbmRpbmdQdWxsSW50b3MucGVlaygpO1xuICAgIGlmIChJc0RldGFjaGVkQnVmZmVyKGZpcnN0UGVuZGluZ1B1bGxJbnRvLmJ1ZmZlcikpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICdUaGUgQllPQiByZXF1ZXN0XFwncyBidWZmZXIgaGFzIGJlZW4gZGV0YWNoZWQgYW5kIHNvIGNhbm5vdCBiZSBmaWxsZWQgd2l0aCBhbiBlbnF1ZXVlZCBjaHVuaydcbiAgICAgICk7XG4gICAgfVxuICAgIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJJbnZhbGlkYXRlQllPQlJlcXVlc3QoY29udHJvbGxlcik7XG4gICAgZmlyc3RQZW5kaW5nUHVsbEludG8uYnVmZmVyID0gVHJhbnNmZXJBcnJheUJ1ZmZlcihmaXJzdFBlbmRpbmdQdWxsSW50by5idWZmZXIpO1xuICAgIGlmIChmaXJzdFBlbmRpbmdQdWxsSW50by5yZWFkZXJUeXBlID09PSAnbm9uZScpIHtcbiAgICAgIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJFbnF1ZXVlRGV0YWNoZWRQdWxsSW50b1RvUXVldWUoY29udHJvbGxlciwgZmlyc3RQZW5kaW5nUHVsbEludG8pO1xuICAgIH1cbiAgfVxuXG4gIGlmIChSZWFkYWJsZVN0cmVhbUhhc0RlZmF1bHRSZWFkZXIoc3RyZWFtKSkge1xuICAgIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJQcm9jZXNzUmVhZFJlcXVlc3RzVXNpbmdRdWV1ZShjb250cm9sbGVyKTtcbiAgICBpZiAoUmVhZGFibGVTdHJlYW1HZXROdW1SZWFkUmVxdWVzdHMoc3RyZWFtKSA9PT0gMCkge1xuICAgICAgYXNzZXJ0KGNvbnRyb2xsZXIuX3BlbmRpbmdQdWxsSW50b3MubGVuZ3RoID09PSAwKTtcbiAgICAgIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJFbnF1ZXVlQ2h1bmtUb1F1ZXVlKGNvbnRyb2xsZXIsIHRyYW5zZmVycmVkQnVmZmVyLCBieXRlT2Zmc2V0LCBieXRlTGVuZ3RoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXNzZXJ0KGNvbnRyb2xsZXIuX3F1ZXVlLmxlbmd0aCA9PT0gMCk7XG4gICAgICBpZiAoY29udHJvbGxlci5fcGVuZGluZ1B1bGxJbnRvcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGFzc2VydChjb250cm9sbGVyLl9wZW5kaW5nUHVsbEludG9zLnBlZWsoKS5yZWFkZXJUeXBlID09PSAnZGVmYXVsdCcpO1xuICAgICAgICBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyU2hpZnRQZW5kaW5nUHVsbEludG8oY29udHJvbGxlcik7XG4gICAgICB9XG4gICAgICBjb25zdCB0cmFuc2ZlcnJlZFZpZXcgPSBuZXcgVWludDhBcnJheSh0cmFuc2ZlcnJlZEJ1ZmZlciwgYnl0ZU9mZnNldCwgYnl0ZUxlbmd0aCk7XG4gICAgICBSZWFkYWJsZVN0cmVhbUZ1bGZpbGxSZWFkUmVxdWVzdChzdHJlYW0sIHRyYW5zZmVycmVkVmlldyBhcyBOb25TaGFyZWQ8VWludDhBcnJheT4sIGZhbHNlKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoUmVhZGFibGVTdHJlYW1IYXNCWU9CUmVhZGVyKHN0cmVhbSkpIHtcbiAgICAvLyBUT0RPOiBJZGVhbGx5IGluIHRoaXMgYnJhbmNoIGRldGFjaGluZyBzaG91bGQgaGFwcGVuIG9ubHkgaWYgdGhlIGJ1ZmZlciBpcyBub3QgY29uc3VtZWQgZnVsbHkuXG4gICAgUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlckVucXVldWVDaHVua1RvUXVldWUoY29udHJvbGxlciwgdHJhbnNmZXJyZWRCdWZmZXIsIGJ5dGVPZmZzZXQsIGJ5dGVMZW5ndGgpO1xuICAgIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJQcm9jZXNzUHVsbEludG9EZXNjcmlwdG9yc1VzaW5nUXVldWUoY29udHJvbGxlcik7XG4gIH0gZWxzZSB7XG4gICAgYXNzZXJ0KCFJc1JlYWRhYmxlU3RyZWFtTG9ja2VkKHN0cmVhbSkpO1xuICAgIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJFbnF1ZXVlQ2h1bmtUb1F1ZXVlKGNvbnRyb2xsZXIsIHRyYW5zZmVycmVkQnVmZmVyLCBieXRlT2Zmc2V0LCBieXRlTGVuZ3RoKTtcbiAgfVxuXG4gIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJDYWxsUHVsbElmTmVlZGVkKGNvbnRyb2xsZXIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlckVycm9yKGNvbnRyb2xsZXI6IFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXIsIGU6IGFueSkge1xuICBjb25zdCBzdHJlYW0gPSBjb250cm9sbGVyLl9jb250cm9sbGVkUmVhZGFibGVCeXRlU3RyZWFtO1xuXG4gIGlmIChzdHJlYW0uX3N0YXRlICE9PSAncmVhZGFibGUnKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlckNsZWFyUGVuZGluZ1B1bGxJbnRvcyhjb250cm9sbGVyKTtcblxuICBSZXNldFF1ZXVlKGNvbnRyb2xsZXIpO1xuICBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyQ2xlYXJBbGdvcml0aG1zKGNvbnRyb2xsZXIpO1xuICBSZWFkYWJsZVN0cmVhbUVycm9yKHN0cmVhbSwgZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyRmlsbFJlYWRSZXF1ZXN0RnJvbVF1ZXVlKFxuICBjb250cm9sbGVyOiBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyLFxuICByZWFkUmVxdWVzdDogUmVhZFJlcXVlc3Q8Tm9uU2hhcmVkPFVpbnQ4QXJyYXk+PlxuKSB7XG4gIGFzc2VydChjb250cm9sbGVyLl9xdWV1ZVRvdGFsU2l6ZSA+IDApO1xuXG4gIGNvbnN0IGVudHJ5ID0gY29udHJvbGxlci5fcXVldWUuc2hpZnQoKTtcbiAgY29udHJvbGxlci5fcXVldWVUb3RhbFNpemUgLT0gZW50cnkuYnl0ZUxlbmd0aDtcblxuICBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVySGFuZGxlUXVldWVEcmFpbihjb250cm9sbGVyKTtcblxuICBjb25zdCB2aWV3ID0gbmV3IFVpbnQ4QXJyYXkoZW50cnkuYnVmZmVyLCBlbnRyeS5ieXRlT2Zmc2V0LCBlbnRyeS5ieXRlTGVuZ3RoKTtcbiAgcmVhZFJlcXVlc3QuX2NodW5rU3RlcHModmlldyBhcyBOb25TaGFyZWQ8VWludDhBcnJheT4pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlckdldEJZT0JSZXF1ZXN0KFxuICBjb250cm9sbGVyOiBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyXG4pOiBSZWFkYWJsZVN0cmVhbUJZT0JSZXF1ZXN0IHwgbnVsbCB7XG4gIGlmIChjb250cm9sbGVyLl9ieW9iUmVxdWVzdCA9PT0gbnVsbCAmJiBjb250cm9sbGVyLl9wZW5kaW5nUHVsbEludG9zLmxlbmd0aCA+IDApIHtcbiAgICBjb25zdCBmaXJzdERlc2NyaXB0b3IgPSBjb250cm9sbGVyLl9wZW5kaW5nUHVsbEludG9zLnBlZWsoKTtcbiAgICBjb25zdCB2aWV3ID0gbmV3IFVpbnQ4QXJyYXkoZmlyc3REZXNjcmlwdG9yLmJ1ZmZlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3REZXNjcmlwdG9yLmJ5dGVPZmZzZXQgKyBmaXJzdERlc2NyaXB0b3IuYnl0ZXNGaWxsZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0RGVzY3JpcHRvci5ieXRlTGVuZ3RoIC0gZmlyc3REZXNjcmlwdG9yLmJ5dGVzRmlsbGVkKTtcblxuICAgIGNvbnN0IGJ5b2JSZXF1ZXN0OiBSZWFkYWJsZVN0cmVhbUJZT0JSZXF1ZXN0ID0gT2JqZWN0LmNyZWF0ZShSZWFkYWJsZVN0cmVhbUJZT0JSZXF1ZXN0LnByb3RvdHlwZSk7XG4gICAgU2V0VXBSZWFkYWJsZVN0cmVhbUJZT0JSZXF1ZXN0KGJ5b2JSZXF1ZXN0LCBjb250cm9sbGVyLCB2aWV3IGFzIE5vblNoYXJlZDxVaW50OEFycmF5Pik7XG4gICAgY29udHJvbGxlci5fYnlvYlJlcXVlc3QgPSBieW9iUmVxdWVzdDtcbiAgfVxuICByZXR1cm4gY29udHJvbGxlci5fYnlvYlJlcXVlc3Q7XG59XG5cbmZ1bmN0aW9uIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJHZXREZXNpcmVkU2l6ZShjb250cm9sbGVyOiBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyKTogbnVtYmVyIHwgbnVsbCB7XG4gIGNvbnN0IHN0YXRlID0gY29udHJvbGxlci5fY29udHJvbGxlZFJlYWRhYmxlQnl0ZVN0cmVhbS5fc3RhdGU7XG5cbiAgaWYgKHN0YXRlID09PSAnZXJyb3JlZCcpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBpZiAoc3RhdGUgPT09ICdjbG9zZWQnKSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICByZXR1cm4gY29udHJvbGxlci5fc3RyYXRlZ3lIV00gLSBjb250cm9sbGVyLl9xdWV1ZVRvdGFsU2l6ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJSZXNwb25kKGNvbnRyb2xsZXI6IFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXIsIGJ5dGVzV3JpdHRlbjogbnVtYmVyKSB7XG4gIGFzc2VydChjb250cm9sbGVyLl9wZW5kaW5nUHVsbEludG9zLmxlbmd0aCA+IDApO1xuXG4gIGNvbnN0IGZpcnN0RGVzY3JpcHRvciA9IGNvbnRyb2xsZXIuX3BlbmRpbmdQdWxsSW50b3MucGVlaygpO1xuICBjb25zdCBzdGF0ZSA9IGNvbnRyb2xsZXIuX2NvbnRyb2xsZWRSZWFkYWJsZUJ5dGVTdHJlYW0uX3N0YXRlO1xuXG4gIGlmIChzdGF0ZSA9PT0gJ2Nsb3NlZCcpIHtcbiAgICBpZiAoYnl0ZXNXcml0dGVuICE9PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdieXRlc1dyaXR0ZW4gbXVzdCBiZSAwIHdoZW4gY2FsbGluZyByZXNwb25kKCkgb24gYSBjbG9zZWQgc3RyZWFtJyk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGFzc2VydChzdGF0ZSA9PT0gJ3JlYWRhYmxlJyk7XG4gICAgaWYgKGJ5dGVzV3JpdHRlbiA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignYnl0ZXNXcml0dGVuIG11c3QgYmUgZ3JlYXRlciB0aGFuIDAgd2hlbiBjYWxsaW5nIHJlc3BvbmQoKSBvbiBhIHJlYWRhYmxlIHN0cmVhbScpO1xuICAgIH1cbiAgICBpZiAoZmlyc3REZXNjcmlwdG9yLmJ5dGVzRmlsbGVkICsgYnl0ZXNXcml0dGVuID4gZmlyc3REZXNjcmlwdG9yLmJ5dGVMZW5ndGgpIHtcbiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdieXRlc1dyaXR0ZW4gb3V0IG9mIHJhbmdlJyk7XG4gICAgfVxuICB9XG5cbiAgZmlyc3REZXNjcmlwdG9yLmJ1ZmZlciA9IFRyYW5zZmVyQXJyYXlCdWZmZXIoZmlyc3REZXNjcmlwdG9yLmJ1ZmZlcik7XG5cbiAgUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlclJlc3BvbmRJbnRlcm5hbChjb250cm9sbGVyLCBieXRlc1dyaXR0ZW4pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlclJlc3BvbmRXaXRoTmV3Vmlldyhjb250cm9sbGVyOiBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlldzogTm9uU2hhcmVkPEFycmF5QnVmZmVyVmlldz4pIHtcbiAgYXNzZXJ0KGNvbnRyb2xsZXIuX3BlbmRpbmdQdWxsSW50b3MubGVuZ3RoID4gMCk7XG4gIGFzc2VydCghSXNEZXRhY2hlZEJ1ZmZlcih2aWV3LmJ1ZmZlcikpO1xuXG4gIGNvbnN0IGZpcnN0RGVzY3JpcHRvciA9IGNvbnRyb2xsZXIuX3BlbmRpbmdQdWxsSW50b3MucGVlaygpO1xuICBjb25zdCBzdGF0ZSA9IGNvbnRyb2xsZXIuX2NvbnRyb2xsZWRSZWFkYWJsZUJ5dGVTdHJlYW0uX3N0YXRlO1xuXG4gIGlmIChzdGF0ZSA9PT0gJ2Nsb3NlZCcpIHtcbiAgICBpZiAodmlldy5ieXRlTGVuZ3RoICE9PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgdmlld1xcJ3MgbGVuZ3RoIG11c3QgYmUgMCB3aGVuIGNhbGxpbmcgcmVzcG9uZFdpdGhOZXdWaWV3KCkgb24gYSBjbG9zZWQgc3RyZWFtJyk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGFzc2VydChzdGF0ZSA9PT0gJ3JlYWRhYmxlJyk7XG4gICAgaWYgKHZpZXcuYnl0ZUxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICAgJ1RoZSB2aWV3XFwncyBsZW5ndGggbXVzdCBiZSBncmVhdGVyIHRoYW4gMCB3aGVuIGNhbGxpbmcgcmVzcG9uZFdpdGhOZXdWaWV3KCkgb24gYSByZWFkYWJsZSBzdHJlYW0nXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIGlmIChmaXJzdERlc2NyaXB0b3IuYnl0ZU9mZnNldCArIGZpcnN0RGVzY3JpcHRvci5ieXRlc0ZpbGxlZCAhPT0gdmlldy5ieXRlT2Zmc2V0KSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RoZSByZWdpb24gc3BlY2lmaWVkIGJ5IHZpZXcgZG9lcyBub3QgbWF0Y2ggYnlvYlJlcXVlc3QnKTtcbiAgfVxuICBpZiAoZmlyc3REZXNjcmlwdG9yLmJ1ZmZlckJ5dGVMZW5ndGggIT09IHZpZXcuYnVmZmVyLmJ5dGVMZW5ndGgpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignVGhlIGJ1ZmZlciBvZiB2aWV3IGhhcyBkaWZmZXJlbnQgY2FwYWNpdHkgdGhhbiBieW9iUmVxdWVzdCcpO1xuICB9XG4gIGlmIChmaXJzdERlc2NyaXB0b3IuYnl0ZXNGaWxsZWQgKyB2aWV3LmJ5dGVMZW5ndGggPiBmaXJzdERlc2NyaXB0b3IuYnl0ZUxlbmd0aCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdUaGUgcmVnaW9uIHNwZWNpZmllZCBieSB2aWV3IGlzIGxhcmdlciB0aGFuIGJ5b2JSZXF1ZXN0Jyk7XG4gIH1cblxuICBjb25zdCB2aWV3Qnl0ZUxlbmd0aCA9IHZpZXcuYnl0ZUxlbmd0aDtcbiAgZmlyc3REZXNjcmlwdG9yLmJ1ZmZlciA9IFRyYW5zZmVyQXJyYXlCdWZmZXIodmlldy5idWZmZXIpO1xuICBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyUmVzcG9uZEludGVybmFsKGNvbnRyb2xsZXIsIHZpZXdCeXRlTGVuZ3RoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFNldFVwUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlcihzdHJlYW06IFJlYWRhYmxlQnl0ZVN0cmVhbSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRBbGdvcml0aG06ICgpID0+IHZvaWQgfCBQcm9taXNlTGlrZTx2b2lkPixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHVsbEFsZ29yaXRobTogKCkgPT4gUHJvbWlzZTx2b2lkPixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuY2VsQWxnb3JpdGhtOiAocmVhc29uOiBhbnkpID0+IFByb21pc2U8dm9pZD4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZ2hXYXRlck1hcms6IG51bWJlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0b0FsbG9jYXRlQ2h1bmtTaXplOiBudW1iZXIgfCB1bmRlZmluZWQpIHtcbiAgYXNzZXJ0KHN0cmVhbS5fcmVhZGFibGVTdHJlYW1Db250cm9sbGVyID09PSB1bmRlZmluZWQpO1xuICBpZiAoYXV0b0FsbG9jYXRlQ2h1bmtTaXplICE9PSB1bmRlZmluZWQpIHtcbiAgICBhc3NlcnQoTnVtYmVySXNJbnRlZ2VyKGF1dG9BbGxvY2F0ZUNodW5rU2l6ZSkpO1xuICAgIGFzc2VydChhdXRvQWxsb2NhdGVDaHVua1NpemUgPiAwKTtcbiAgfVxuXG4gIGNvbnRyb2xsZXIuX2NvbnRyb2xsZWRSZWFkYWJsZUJ5dGVTdHJlYW0gPSBzdHJlYW07XG5cbiAgY29udHJvbGxlci5fcHVsbEFnYWluID0gZmFsc2U7XG4gIGNvbnRyb2xsZXIuX3B1bGxpbmcgPSBmYWxzZTtcblxuICBjb250cm9sbGVyLl9ieW9iUmVxdWVzdCA9IG51bGw7XG5cbiAgLy8gTmVlZCB0byBzZXQgdGhlIHNsb3RzIHNvIHRoYXQgdGhlIGFzc2VydCBkb2Vzbid0IGZpcmUuIEluIHRoZSBzcGVjIHRoZSBzbG90cyBhbHJlYWR5IGV4aXN0IGltcGxpY2l0bHkuXG4gIGNvbnRyb2xsZXIuX3F1ZXVlID0gY29udHJvbGxlci5fcXVldWVUb3RhbFNpemUgPSB1bmRlZmluZWQhO1xuICBSZXNldFF1ZXVlKGNvbnRyb2xsZXIpO1xuXG4gIGNvbnRyb2xsZXIuX2Nsb3NlUmVxdWVzdGVkID0gZmFsc2U7XG4gIGNvbnRyb2xsZXIuX3N0YXJ0ZWQgPSBmYWxzZTtcblxuICBjb250cm9sbGVyLl9zdHJhdGVneUhXTSA9IGhpZ2hXYXRlck1hcms7XG5cbiAgY29udHJvbGxlci5fcHVsbEFsZ29yaXRobSA9IHB1bGxBbGdvcml0aG07XG4gIGNvbnRyb2xsZXIuX2NhbmNlbEFsZ29yaXRobSA9IGNhbmNlbEFsZ29yaXRobTtcblxuICBjb250cm9sbGVyLl9hdXRvQWxsb2NhdGVDaHVua1NpemUgPSBhdXRvQWxsb2NhdGVDaHVua1NpemU7XG5cbiAgY29udHJvbGxlci5fcGVuZGluZ1B1bGxJbnRvcyA9IG5ldyBTaW1wbGVRdWV1ZSgpO1xuXG4gIHN0cmVhbS5fcmVhZGFibGVTdHJlYW1Db250cm9sbGVyID0gY29udHJvbGxlcjtcblxuICBjb25zdCBzdGFydFJlc3VsdCA9IHN0YXJ0QWxnb3JpdGhtKCk7XG4gIHVwb25Qcm9taXNlKFxuICAgIHByb21pc2VSZXNvbHZlZFdpdGgoc3RhcnRSZXN1bHQpLFxuICAgICgpID0+IHtcbiAgICAgIGNvbnRyb2xsZXIuX3N0YXJ0ZWQgPSB0cnVlO1xuXG4gICAgICBhc3NlcnQoIWNvbnRyb2xsZXIuX3B1bGxpbmcpO1xuICAgICAgYXNzZXJ0KCFjb250cm9sbGVyLl9wdWxsQWdhaW4pO1xuXG4gICAgICBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyQ2FsbFB1bGxJZk5lZWRlZChjb250cm9sbGVyKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG4gICAgciA9PiB7XG4gICAgICBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyRXJyb3IoY29udHJvbGxlciwgcik7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBTZXRVcFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJGcm9tVW5kZXJseWluZ1NvdXJjZShcbiAgc3RyZWFtOiBSZWFkYWJsZUJ5dGVTdHJlYW0sXG4gIHVuZGVybHlpbmdCeXRlU291cmNlOiBWYWxpZGF0ZWRVbmRlcmx5aW5nQnl0ZVNvdXJjZSxcbiAgaGlnaFdhdGVyTWFyazogbnVtYmVyXG4pIHtcbiAgY29uc3QgY29udHJvbGxlcjogUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlciA9IE9iamVjdC5jcmVhdGUoUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlci5wcm90b3R5cGUpO1xuXG4gIGxldCBzdGFydEFsZ29yaXRobTogKCkgPT4gdm9pZCB8IFByb21pc2VMaWtlPHZvaWQ+O1xuICBsZXQgcHVsbEFsZ29yaXRobTogKCkgPT4gUHJvbWlzZTx2b2lkPjtcbiAgbGV0IGNhbmNlbEFsZ29yaXRobTogKHJlYXNvbjogYW55KSA9PiBQcm9taXNlPHZvaWQ+O1xuXG4gIGlmICh1bmRlcmx5aW5nQnl0ZVNvdXJjZS5zdGFydCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgc3RhcnRBbGdvcml0aG0gPSAoKSA9PiB1bmRlcmx5aW5nQnl0ZVNvdXJjZS5zdGFydCEoY29udHJvbGxlcik7XG4gIH0gZWxzZSB7XG4gICAgc3RhcnRBbGdvcml0aG0gPSAoKSA9PiB1bmRlZmluZWQ7XG4gIH1cbiAgaWYgKHVuZGVybHlpbmdCeXRlU291cmNlLnB1bGwgIT09IHVuZGVmaW5lZCkge1xuICAgIHB1bGxBbGdvcml0aG0gPSAoKSA9PiB1bmRlcmx5aW5nQnl0ZVNvdXJjZS5wdWxsIShjb250cm9sbGVyKTtcbiAgfSBlbHNlIHtcbiAgICBwdWxsQWxnb3JpdGhtID0gKCkgPT4gcHJvbWlzZVJlc29sdmVkV2l0aCh1bmRlZmluZWQpO1xuICB9XG4gIGlmICh1bmRlcmx5aW5nQnl0ZVNvdXJjZS5jYW5jZWwgIT09IHVuZGVmaW5lZCkge1xuICAgIGNhbmNlbEFsZ29yaXRobSA9IHJlYXNvbiA9PiB1bmRlcmx5aW5nQnl0ZVNvdXJjZS5jYW5jZWwhKHJlYXNvbik7XG4gIH0gZWxzZSB7XG4gICAgY2FuY2VsQWxnb3JpdGhtID0gKCkgPT4gcHJvbWlzZVJlc29sdmVkV2l0aCh1bmRlZmluZWQpO1xuICB9XG5cbiAgY29uc3QgYXV0b0FsbG9jYXRlQ2h1bmtTaXplID0gdW5kZXJseWluZ0J5dGVTb3VyY2UuYXV0b0FsbG9jYXRlQ2h1bmtTaXplO1xuICBpZiAoYXV0b0FsbG9jYXRlQ2h1bmtTaXplID09PSAwKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignYXV0b0FsbG9jYXRlQ2h1bmtTaXplIG11c3QgYmUgZ3JlYXRlciB0aGFuIDAnKTtcbiAgfVxuXG4gIFNldFVwUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlcihcbiAgICBzdHJlYW0sIGNvbnRyb2xsZXIsIHN0YXJ0QWxnb3JpdGhtLCBwdWxsQWxnb3JpdGhtLCBjYW5jZWxBbGdvcml0aG0sIGhpZ2hXYXRlck1hcmssIGF1dG9BbGxvY2F0ZUNodW5rU2l6ZVxuICApO1xufVxuXG5mdW5jdGlvbiBTZXRVcFJlYWRhYmxlU3RyZWFtQllPQlJlcXVlc3QocmVxdWVzdDogUmVhZGFibGVTdHJlYW1CWU9CUmVxdWVzdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXc6IE5vblNoYXJlZDxBcnJheUJ1ZmZlclZpZXc+KSB7XG4gIGFzc2VydChJc1JlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXIoY29udHJvbGxlcikpO1xuICBhc3NlcnQodHlwZW9mIHZpZXcgPT09ICdvYmplY3QnKTtcbiAgYXNzZXJ0KEFycmF5QnVmZmVyLmlzVmlldyh2aWV3KSk7XG4gIGFzc2VydCghSXNEZXRhY2hlZEJ1ZmZlcih2aWV3LmJ1ZmZlcikpO1xuICByZXF1ZXN0Ll9hc3NvY2lhdGVkUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlciA9IGNvbnRyb2xsZXI7XG4gIHJlcXVlc3QuX3ZpZXcgPSB2aWV3O1xufVxuXG4vLyBIZWxwZXIgZnVuY3Rpb25zIGZvciB0aGUgUmVhZGFibGVTdHJlYW1CWU9CUmVxdWVzdC5cblxuZnVuY3Rpb24gYnlvYlJlcXVlc3RCcmFuZENoZWNrRXhjZXB0aW9uKG5hbWU6IHN0cmluZyk6IFR5cGVFcnJvciB7XG4gIHJldHVybiBuZXcgVHlwZUVycm9yKFxuICAgIGBSZWFkYWJsZVN0cmVhbUJZT0JSZXF1ZXN0LnByb3RvdHlwZS4ke25hbWV9IGNhbiBvbmx5IGJlIHVzZWQgb24gYSBSZWFkYWJsZVN0cmVhbUJZT0JSZXF1ZXN0YCk7XG59XG5cbi8vIEhlbHBlciBmdW5jdGlvbnMgZm9yIHRoZSBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyLlxuXG5mdW5jdGlvbiBieXRlU3RyZWFtQ29udHJvbGxlckJyYW5kQ2hlY2tFeGNlcHRpb24obmFtZTogc3RyaW5nKTogVHlwZUVycm9yIHtcbiAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoXG4gICAgYFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXIucHJvdG90eXBlLiR7bmFtZX0gY2FuIG9ubHkgYmUgdXNlZCBvbiBhIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJgKTtcbn1cbiIsICJpbXBvcnQgeyBhc3NlcnREaWN0aW9uYXJ5LCBjb252ZXJ0VW5zaWduZWRMb25nTG9uZ1dpdGhFbmZvcmNlUmFuZ2UgfSBmcm9tICcuL2Jhc2ljJztcbmltcG9ydCB0eXBlIHtcbiAgUmVhZGFibGVTdHJlYW1CWU9CUmVhZGVyUmVhZE9wdGlvbnMsXG4gIFJlYWRhYmxlU3RyZWFtR2V0UmVhZGVyT3B0aW9ucyxcbiAgVmFsaWRhdGVkUmVhZGFibGVTdHJlYW1CWU9CUmVhZGVyUmVhZE9wdGlvbnNcbn0gZnJvbSAnLi4vcmVhZGFibGUtc3RyZWFtL3JlYWRlci1vcHRpb25zJztcblxuZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnRSZWFkZXJPcHRpb25zKG9wdGlvbnM6IFJlYWRhYmxlU3RyZWFtR2V0UmVhZGVyT3B0aW9ucyB8IG51bGwgfCB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dDogc3RyaW5nKTogUmVhZGFibGVTdHJlYW1HZXRSZWFkZXJPcHRpb25zIHtcbiAgYXNzZXJ0RGljdGlvbmFyeShvcHRpb25zLCBjb250ZXh0KTtcbiAgY29uc3QgbW9kZSA9IG9wdGlvbnM/Lm1vZGU7XG4gIHJldHVybiB7XG4gICAgbW9kZTogbW9kZSA9PT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkIDogY29udmVydFJlYWRhYmxlU3RyZWFtUmVhZGVyTW9kZShtb2RlLCBgJHtjb250ZXh0fSBoYXMgbWVtYmVyICdtb2RlJyB0aGF0YClcbiAgfTtcbn1cblxuZnVuY3Rpb24gY29udmVydFJlYWRhYmxlU3RyZWFtUmVhZGVyTW9kZShtb2RlOiBzdHJpbmcsIGNvbnRleHQ6IHN0cmluZyk6ICdieW9iJyB7XG4gIG1vZGUgPSBgJHttb2RlfWA7XG4gIGlmIChtb2RlICE9PSAnYnlvYicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGAke2NvbnRleHR9ICcke21vZGV9JyBpcyBub3QgYSB2YWxpZCBlbnVtZXJhdGlvbiB2YWx1ZSBmb3IgUmVhZGFibGVTdHJlYW1SZWFkZXJNb2RlYCk7XG4gIH1cbiAgcmV0dXJuIG1vZGU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjb252ZXJ0QnlvYlJlYWRPcHRpb25zKFxuICBvcHRpb25zOiBSZWFkYWJsZVN0cmVhbUJZT0JSZWFkZXJSZWFkT3B0aW9ucyB8IG51bGwgfCB1bmRlZmluZWQsXG4gIGNvbnRleHQ6IHN0cmluZ1xuKTogVmFsaWRhdGVkUmVhZGFibGVTdHJlYW1CWU9CUmVhZGVyUmVhZE9wdGlvbnMge1xuICBhc3NlcnREaWN0aW9uYXJ5KG9wdGlvbnMsIGNvbnRleHQpO1xuICBjb25zdCBtaW4gPSBvcHRpb25zPy5taW4gPz8gMTtcbiAgcmV0dXJuIHtcbiAgICBtaW46IGNvbnZlcnRVbnNpZ25lZExvbmdMb25nV2l0aEVuZm9yY2VSYW5nZShcbiAgICAgIG1pbixcbiAgICAgIGAke2NvbnRleHR9IGhhcyBtZW1iZXIgJ21pbicgdGhhdGBcbiAgICApXG4gIH07XG59XG4iLCAiaW1wb3J0IGFzc2VydCBmcm9tICcuLi8uLi9zdHViL2Fzc2VydCc7XG5pbXBvcnQgeyBTaW1wbGVRdWV1ZSB9IGZyb20gJy4uL3NpbXBsZS1xdWV1ZSc7XG5pbXBvcnQge1xuICBSZWFkYWJsZVN0cmVhbVJlYWRlckdlbmVyaWNDYW5jZWwsXG4gIFJlYWRhYmxlU3RyZWFtUmVhZGVyR2VuZXJpY0luaXRpYWxpemUsXG4gIFJlYWRhYmxlU3RyZWFtUmVhZGVyR2VuZXJpY1JlbGVhc2UsXG4gIHJlYWRlckxvY2tFeGNlcHRpb25cbn0gZnJvbSAnLi9nZW5lcmljLXJlYWRlcic7XG5pbXBvcnQgeyBJc1JlYWRhYmxlU3RyZWFtTG9ja2VkLCB0eXBlIFJlYWRhYmxlQnl0ZVN0cmVhbSwgdHlwZSBSZWFkYWJsZVN0cmVhbSB9IGZyb20gJy4uL3JlYWRhYmxlLXN0cmVhbSc7XG5pbXBvcnQge1xuICBJc1JlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXIsXG4gIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXIsXG4gIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJQdWxsSW50b1xufSBmcm9tICcuL2J5dGUtc3RyZWFtLWNvbnRyb2xsZXInO1xuaW1wb3J0IHsgc2V0RnVuY3Rpb25OYW1lLCB0eXBlSXNPYmplY3QgfSBmcm9tICcuLi9oZWxwZXJzL21pc2NlbGxhbmVvdXMnO1xuaW1wb3J0IHsgbmV3UHJvbWlzZSwgcHJvbWlzZVJlamVjdGVkV2l0aCB9IGZyb20gJy4uL2hlbHBlcnMvd2ViaWRsJztcbmltcG9ydCB7IGFzc2VydFJlcXVpcmVkQXJndW1lbnQgfSBmcm9tICcuLi92YWxpZGF0b3JzL2Jhc2ljJztcbmltcG9ydCB7IGFzc2VydFJlYWRhYmxlU3RyZWFtIH0gZnJvbSAnLi4vdmFsaWRhdG9ycy9yZWFkYWJsZS1zdHJlYW0nO1xuaW1wb3J0IHsgSXNEZXRhY2hlZEJ1ZmZlciB9IGZyb20gJy4uL2Fic3RyYWN0LW9wcy9lY21hc2NyaXB0JztcbmltcG9ydCB0eXBlIHtcbiAgUmVhZGFibGVTdHJlYW1CWU9CUmVhZGVyUmVhZE9wdGlvbnMsXG4gIFZhbGlkYXRlZFJlYWRhYmxlU3RyZWFtQllPQlJlYWRlclJlYWRPcHRpb25zXG59IGZyb20gJy4vcmVhZGVyLW9wdGlvbnMnO1xuaW1wb3J0IHsgY29udmVydEJ5b2JSZWFkT3B0aW9ucyB9IGZyb20gJy4uL3ZhbGlkYXRvcnMvcmVhZGVyLW9wdGlvbnMnO1xuaW1wb3J0IHsgaXNEYXRhVmlldywgdHlwZSBOb25TaGFyZWQsIHR5cGUgVHlwZWRBcnJheSB9IGZyb20gJy4uL2hlbHBlcnMvYXJyYXktYnVmZmVyLXZpZXcnO1xuXG4vKipcbiAqIEEgcmVzdWx0IHJldHVybmVkIGJ5IHtAbGluayBSZWFkYWJsZVN0cmVhbUJZT0JSZWFkZXIucmVhZH0uXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgdHlwZSBSZWFkYWJsZVN0cmVhbUJZT0JSZWFkUmVzdWx0PFQgZXh0ZW5kcyBBcnJheUJ1ZmZlclZpZXc+ID0ge1xuICBkb25lOiBmYWxzZTtcbiAgdmFsdWU6IFQ7XG59IHwge1xuICBkb25lOiB0cnVlO1xuICB2YWx1ZTogVCB8IHVuZGVmaW5lZDtcbn07XG5cbi8vIEFic3RyYWN0IG9wZXJhdGlvbnMgZm9yIHRoZSBSZWFkYWJsZVN0cmVhbS5cblxuZXhwb3J0IGZ1bmN0aW9uIEFjcXVpcmVSZWFkYWJsZVN0cmVhbUJZT0JSZWFkZXIoc3RyZWFtOiBSZWFkYWJsZUJ5dGVTdHJlYW0pOiBSZWFkYWJsZVN0cmVhbUJZT0JSZWFkZXIge1xuICByZXR1cm4gbmV3IFJlYWRhYmxlU3RyZWFtQllPQlJlYWRlcihzdHJlYW0gYXMgUmVhZGFibGVTdHJlYW08VWludDhBcnJheT4pO1xufVxuXG4vLyBSZWFkYWJsZVN0cmVhbSBBUEkgZXhwb3NlZCBmb3IgY29udHJvbGxlcnMuXG5cbmV4cG9ydCBmdW5jdGlvbiBSZWFkYWJsZVN0cmVhbUFkZFJlYWRJbnRvUmVxdWVzdDxUIGV4dGVuZHMgTm9uU2hhcmVkPEFycmF5QnVmZmVyVmlldz4+KFxuICBzdHJlYW06IFJlYWRhYmxlQnl0ZVN0cmVhbSxcbiAgcmVhZEludG9SZXF1ZXN0OiBSZWFkSW50b1JlcXVlc3Q8VD5cbik6IHZvaWQge1xuICBhc3NlcnQoSXNSZWFkYWJsZVN0cmVhbUJZT0JSZWFkZXIoc3RyZWFtLl9yZWFkZXIpKTtcbiAgYXNzZXJ0KHN0cmVhbS5fc3RhdGUgPT09ICdyZWFkYWJsZScgfHwgc3RyZWFtLl9zdGF0ZSA9PT0gJ2Nsb3NlZCcpO1xuXG4gIChzdHJlYW0uX3JlYWRlciEgYXMgUmVhZGFibGVTdHJlYW1CWU9CUmVhZGVyKS5fcmVhZEludG9SZXF1ZXN0cy5wdXNoKHJlYWRJbnRvUmVxdWVzdCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBSZWFkYWJsZVN0cmVhbUZ1bGZpbGxSZWFkSW50b1JlcXVlc3Qoc3RyZWFtOiBSZWFkYWJsZUJ5dGVTdHJlYW0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rOiBBcnJheUJ1ZmZlclZpZXcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvbmU6IGJvb2xlYW4pIHtcbiAgY29uc3QgcmVhZGVyID0gc3RyZWFtLl9yZWFkZXIgYXMgUmVhZGFibGVTdHJlYW1CWU9CUmVhZGVyO1xuXG4gIGFzc2VydChyZWFkZXIuX3JlYWRJbnRvUmVxdWVzdHMubGVuZ3RoID4gMCk7XG5cbiAgY29uc3QgcmVhZEludG9SZXF1ZXN0ID0gcmVhZGVyLl9yZWFkSW50b1JlcXVlc3RzLnNoaWZ0KCkhO1xuICBpZiAoZG9uZSkge1xuICAgIHJlYWRJbnRvUmVxdWVzdC5fY2xvc2VTdGVwcyhjaHVuayk7XG4gIH0gZWxzZSB7XG4gICAgcmVhZEludG9SZXF1ZXN0Ll9jaHVua1N0ZXBzKGNodW5rKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gUmVhZGFibGVTdHJlYW1HZXROdW1SZWFkSW50b1JlcXVlc3RzKHN0cmVhbTogUmVhZGFibGVCeXRlU3RyZWFtKTogbnVtYmVyIHtcbiAgcmV0dXJuIChzdHJlYW0uX3JlYWRlciBhcyBSZWFkYWJsZVN0cmVhbUJZT0JSZWFkZXIpLl9yZWFkSW50b1JlcXVlc3RzLmxlbmd0aDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFJlYWRhYmxlU3RyZWFtSGFzQllPQlJlYWRlcihzdHJlYW06IFJlYWRhYmxlQnl0ZVN0cmVhbSk6IGJvb2xlYW4ge1xuICBjb25zdCByZWFkZXIgPSBzdHJlYW0uX3JlYWRlcjtcblxuICBpZiAocmVhZGVyID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAoIUlzUmVhZGFibGVTdHJlYW1CWU9CUmVhZGVyKHJlYWRlcikpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuLy8gUmVhZGVyc1xuXG5leHBvcnQgaW50ZXJmYWNlIFJlYWRJbnRvUmVxdWVzdDxUIGV4dGVuZHMgTm9uU2hhcmVkPEFycmF5QnVmZmVyVmlldz4+IHtcbiAgX2NodW5rU3RlcHMoY2h1bms6IFQpOiB2b2lkO1xuXG4gIF9jbG9zZVN0ZXBzKGNodW5rOiBUIHwgdW5kZWZpbmVkKTogdm9pZDtcblxuICBfZXJyb3JTdGVwcyhlOiBhbnkpOiB2b2lkO1xufVxuXG4vKipcbiAqIEEgQllPQiByZWFkZXIgdmVuZGVkIGJ5IGEge0BsaW5rIFJlYWRhYmxlU3RyZWFtfS5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBSZWFkYWJsZVN0cmVhbUJZT0JSZWFkZXIge1xuICAvKiogQGludGVybmFsICovXG4gIF9vd25lclJlYWRhYmxlU3RyZWFtITogUmVhZGFibGVCeXRlU3RyZWFtO1xuICAvKiogQGludGVybmFsICovXG4gIF9jbG9zZWRQcm9taXNlITogUHJvbWlzZTx1bmRlZmluZWQ+O1xuICAvKiogQGludGVybmFsICovXG4gIF9jbG9zZWRQcm9taXNlX3Jlc29sdmU/OiAodmFsdWU/OiB1bmRlZmluZWQpID0+IHZvaWQ7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX2Nsb3NlZFByb21pc2VfcmVqZWN0PzogKHJlYXNvbjogYW55KSA9PiB2b2lkO1xuICAvKiogQGludGVybmFsICovXG4gIF9yZWFkSW50b1JlcXVlc3RzOiBTaW1wbGVRdWV1ZTxSZWFkSW50b1JlcXVlc3Q8YW55Pj47XG5cbiAgY29uc3RydWN0b3Ioc3RyZWFtOiBSZWFkYWJsZVN0cmVhbTxVaW50OEFycmF5Pikge1xuICAgIGFzc2VydFJlcXVpcmVkQXJndW1lbnQoc3RyZWFtLCAxLCAnUmVhZGFibGVTdHJlYW1CWU9CUmVhZGVyJyk7XG4gICAgYXNzZXJ0UmVhZGFibGVTdHJlYW0oc3RyZWFtLCAnRmlyc3QgcGFyYW1ldGVyJyk7XG5cbiAgICBpZiAoSXNSZWFkYWJsZVN0cmVhbUxvY2tlZChzdHJlYW0pKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGlzIHN0cmVhbSBoYXMgYWxyZWFkeSBiZWVuIGxvY2tlZCBmb3IgZXhjbHVzaXZlIHJlYWRpbmcgYnkgYW5vdGhlciByZWFkZXInKTtcbiAgICB9XG5cbiAgICBpZiAoIUlzUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlcihzdHJlYW0uX3JlYWRhYmxlU3RyZWFtQ29udHJvbGxlcikpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjb25zdHJ1Y3QgYSBSZWFkYWJsZVN0cmVhbUJZT0JSZWFkZXIgZm9yIGEgc3RyZWFtIG5vdCBjb25zdHJ1Y3RlZCB3aXRoIGEgYnl0ZSAnICtcbiAgICAgICAgJ3NvdXJjZScpO1xuICAgIH1cblxuICAgIFJlYWRhYmxlU3RyZWFtUmVhZGVyR2VuZXJpY0luaXRpYWxpemUodGhpcywgc3RyZWFtKTtcblxuICAgIHRoaXMuX3JlYWRJbnRvUmVxdWVzdHMgPSBuZXcgU2ltcGxlUXVldWUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHdpbGwgYmUgZnVsZmlsbGVkIHdoZW4gdGhlIHN0cmVhbSBiZWNvbWVzIGNsb3NlZCwgb3IgcmVqZWN0ZWQgaWYgdGhlIHN0cmVhbSBldmVyIGVycm9ycyBvclxuICAgKiB0aGUgcmVhZGVyJ3MgbG9jayBpcyByZWxlYXNlZCBiZWZvcmUgdGhlIHN0cmVhbSBmaW5pc2hlcyBjbG9zaW5nLlxuICAgKi9cbiAgZ2V0IGNsb3NlZCgpOiBQcm9taXNlPHVuZGVmaW5lZD4ge1xuICAgIGlmICghSXNSZWFkYWJsZVN0cmVhbUJZT0JSZWFkZXIodGhpcykpIHtcbiAgICAgIHJldHVybiBwcm9taXNlUmVqZWN0ZWRXaXRoKGJ5b2JSZWFkZXJCcmFuZENoZWNrRXhjZXB0aW9uKCdjbG9zZWQnKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX2Nsb3NlZFByb21pc2U7XG4gIH1cblxuICAvKipcbiAgICogSWYgdGhlIHJlYWRlciBpcyBhY3RpdmUsIGJlaGF2ZXMgdGhlIHNhbWUgYXMge0BsaW5rIFJlYWRhYmxlU3RyZWFtLmNhbmNlbCB8IHN0cmVhbS5jYW5jZWwocmVhc29uKX0uXG4gICAqL1xuICBjYW5jZWwocmVhc29uOiBhbnkgPSB1bmRlZmluZWQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIUlzUmVhZGFibGVTdHJlYW1CWU9CUmVhZGVyKHRoaXMpKSB7XG4gICAgICByZXR1cm4gcHJvbWlzZVJlamVjdGVkV2l0aChieW9iUmVhZGVyQnJhbmRDaGVja0V4Y2VwdGlvbignY2FuY2VsJykpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9vd25lclJlYWRhYmxlU3RyZWFtID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBwcm9taXNlUmVqZWN0ZWRXaXRoKHJlYWRlckxvY2tFeGNlcHRpb24oJ2NhbmNlbCcpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gUmVhZGFibGVTdHJlYW1SZWFkZXJHZW5lcmljQ2FuY2VsKHRoaXMsIHJlYXNvbik7XG4gIH1cblxuICAvKipcbiAgICogQXR0ZW1wdHMgdG8gcmVhZHMgYnl0ZXMgaW50byB2aWV3LCBhbmQgcmV0dXJucyBhIHByb21pc2UgcmVzb2x2ZWQgd2l0aCB0aGUgcmVzdWx0LlxuICAgKlxuICAgKiBJZiByZWFkaW5nIGEgY2h1bmsgY2F1c2VzIHRoZSBxdWV1ZSB0byBiZWNvbWUgZW1wdHksIG1vcmUgZGF0YSB3aWxsIGJlIHB1bGxlZCBmcm9tIHRoZSB1bmRlcmx5aW5nIHNvdXJjZS5cbiAgICovXG4gIHJlYWQ8VCBleHRlbmRzIEFycmF5QnVmZmVyVmlldz4oXG4gICAgdmlldzogVCxcbiAgICBvcHRpb25zPzogUmVhZGFibGVTdHJlYW1CWU9CUmVhZGVyUmVhZE9wdGlvbnNcbiAgKTogUHJvbWlzZTxSZWFkYWJsZVN0cmVhbUJZT0JSZWFkUmVzdWx0PFQ+PjtcbiAgcmVhZDxUIGV4dGVuZHMgTm9uU2hhcmVkPEFycmF5QnVmZmVyVmlldz4+KFxuICAgIHZpZXc6IFQsXG4gICAgcmF3T3B0aW9uczogUmVhZGFibGVTdHJlYW1CWU9CUmVhZGVyUmVhZE9wdGlvbnMgfCBudWxsIHwgdW5kZWZpbmVkID0ge31cbiAgKTogUHJvbWlzZTxSZWFkYWJsZVN0cmVhbUJZT0JSZWFkUmVzdWx0PFQ+PiB7XG4gICAgaWYgKCFJc1JlYWRhYmxlU3RyZWFtQllPQlJlYWRlcih0aGlzKSkge1xuICAgICAgcmV0dXJuIHByb21pc2VSZWplY3RlZFdpdGgoYnlvYlJlYWRlckJyYW5kQ2hlY2tFeGNlcHRpb24oJ3JlYWQnKSk7XG4gICAgfVxuXG4gICAgaWYgKCFBcnJheUJ1ZmZlci5pc1ZpZXcodmlldykpIHtcbiAgICAgIHJldHVybiBwcm9taXNlUmVqZWN0ZWRXaXRoKG5ldyBUeXBlRXJyb3IoJ3ZpZXcgbXVzdCBiZSBhbiBhcnJheSBidWZmZXIgdmlldycpKTtcbiAgICB9XG4gICAgaWYgKHZpZXcuYnl0ZUxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHByb21pc2VSZWplY3RlZFdpdGgobmV3IFR5cGVFcnJvcigndmlldyBtdXN0IGhhdmUgbm9uLXplcm8gYnl0ZUxlbmd0aCcpKTtcbiAgICB9XG4gICAgaWYgKHZpZXcuYnVmZmVyLmJ5dGVMZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBwcm9taXNlUmVqZWN0ZWRXaXRoKG5ldyBUeXBlRXJyb3IoYHZpZXcncyBidWZmZXIgbXVzdCBoYXZlIG5vbi16ZXJvIGJ5dGVMZW5ndGhgKSk7XG4gICAgfVxuICAgIGlmIChJc0RldGFjaGVkQnVmZmVyKHZpZXcuYnVmZmVyKSkge1xuICAgICAgcmV0dXJuIHByb21pc2VSZWplY3RlZFdpdGgobmV3IFR5cGVFcnJvcigndmlld1xcJ3MgYnVmZmVyIGhhcyBiZWVuIGRldGFjaGVkJykpO1xuICAgIH1cblxuICAgIGxldCBvcHRpb25zOiBWYWxpZGF0ZWRSZWFkYWJsZVN0cmVhbUJZT0JSZWFkZXJSZWFkT3B0aW9ucztcbiAgICB0cnkge1xuICAgICAgb3B0aW9ucyA9IGNvbnZlcnRCeW9iUmVhZE9wdGlvbnMocmF3T3B0aW9ucywgJ29wdGlvbnMnKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gcHJvbWlzZVJlamVjdGVkV2l0aChlKTtcbiAgICB9XG4gICAgY29uc3QgbWluID0gb3B0aW9ucy5taW47XG4gICAgaWYgKG1pbiA9PT0gMCkge1xuICAgICAgcmV0dXJuIHByb21pc2VSZWplY3RlZFdpdGgobmV3IFR5cGVFcnJvcignb3B0aW9ucy5taW4gbXVzdCBiZSBncmVhdGVyIHRoYW4gMCcpKTtcbiAgICB9XG4gICAgaWYgKCFpc0RhdGFWaWV3KHZpZXcpKSB7XG4gICAgICBpZiAobWluID4gKHZpZXcgYXMgdW5rbm93biBhcyBUeXBlZEFycmF5KS5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHByb21pc2VSZWplY3RlZFdpdGgobmV3IFJhbmdlRXJyb3IoJ29wdGlvbnMubWluIG11c3QgYmUgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIHZpZXdcXCdzIGxlbmd0aCcpKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKG1pbiA+IHZpZXcuYnl0ZUxlbmd0aCkge1xuICAgICAgcmV0dXJuIHByb21pc2VSZWplY3RlZFdpdGgobmV3IFJhbmdlRXJyb3IoJ29wdGlvbnMubWluIG11c3QgYmUgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIHZpZXdcXCdzIGJ5dGVMZW5ndGgnKSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX293bmVyUmVhZGFibGVTdHJlYW0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHByb21pc2VSZWplY3RlZFdpdGgocmVhZGVyTG9ja0V4Y2VwdGlvbigncmVhZCBmcm9tJykpO1xuICAgIH1cblxuICAgIGxldCByZXNvbHZlUHJvbWlzZSE6IChyZXN1bHQ6IFJlYWRhYmxlU3RyZWFtQllPQlJlYWRSZXN1bHQ8VD4pID0+IHZvaWQ7XG4gICAgbGV0IHJlamVjdFByb21pc2UhOiAocmVhc29uOiBhbnkpID0+IHZvaWQ7XG4gICAgY29uc3QgcHJvbWlzZSA9IG5ld1Byb21pc2U8UmVhZGFibGVTdHJlYW1CWU9CUmVhZFJlc3VsdDxUPj4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgcmVzb2x2ZVByb21pc2UgPSByZXNvbHZlO1xuICAgICAgcmVqZWN0UHJvbWlzZSA9IHJlamVjdDtcbiAgICB9KTtcbiAgICBjb25zdCByZWFkSW50b1JlcXVlc3Q6IFJlYWRJbnRvUmVxdWVzdDxUPiA9IHtcbiAgICAgIF9jaHVua1N0ZXBzOiBjaHVuayA9PiByZXNvbHZlUHJvbWlzZSh7IHZhbHVlOiBjaHVuaywgZG9uZTogZmFsc2UgfSksXG4gICAgICBfY2xvc2VTdGVwczogY2h1bmsgPT4gcmVzb2x2ZVByb21pc2UoeyB2YWx1ZTogY2h1bmssIGRvbmU6IHRydWUgfSksXG4gICAgICBfZXJyb3JTdGVwczogZSA9PiByZWplY3RQcm9taXNlKGUpXG4gICAgfTtcbiAgICBSZWFkYWJsZVN0cmVhbUJZT0JSZWFkZXJSZWFkKHRoaXMsIHZpZXcsIG1pbiwgcmVhZEludG9SZXF1ZXN0KTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWxlYXNlcyB0aGUgcmVhZGVyJ3MgbG9jayBvbiB0aGUgY29ycmVzcG9uZGluZyBzdHJlYW0uIEFmdGVyIHRoZSBsb2NrIGlzIHJlbGVhc2VkLCB0aGUgcmVhZGVyIGlzIG5vIGxvbmdlciBhY3RpdmUuXG4gICAqIElmIHRoZSBhc3NvY2lhdGVkIHN0cmVhbSBpcyBlcnJvcmVkIHdoZW4gdGhlIGxvY2sgaXMgcmVsZWFzZWQsIHRoZSByZWFkZXIgd2lsbCBhcHBlYXIgZXJyb3JlZCBpbiB0aGUgc2FtZSB3YXlcbiAgICogZnJvbSBub3cgb247IG90aGVyd2lzZSwgdGhlIHJlYWRlciB3aWxsIGFwcGVhciBjbG9zZWQuXG4gICAqXG4gICAqIEEgcmVhZGVyJ3MgbG9jayBjYW5ub3QgYmUgcmVsZWFzZWQgd2hpbGUgaXQgc3RpbGwgaGFzIGEgcGVuZGluZyByZWFkIHJlcXVlc3QsIGkuZS4sIGlmIGEgcHJvbWlzZSByZXR1cm5lZCBieVxuICAgKiB0aGUgcmVhZGVyJ3Mge0BsaW5rIFJlYWRhYmxlU3RyZWFtQllPQlJlYWRlci5yZWFkIHwgcmVhZCgpfSBtZXRob2QgaGFzIG5vdCB5ZXQgYmVlbiBzZXR0bGVkLiBBdHRlbXB0aW5nIHRvXG4gICAqIGRvIHNvIHdpbGwgdGhyb3cgYSBgVHlwZUVycm9yYCBhbmQgbGVhdmUgdGhlIHJlYWRlciBsb2NrZWQgdG8gdGhlIHN0cmVhbS5cbiAgICovXG4gIHJlbGVhc2VMb2NrKCk6IHZvaWQge1xuICAgIGlmICghSXNSZWFkYWJsZVN0cmVhbUJZT0JSZWFkZXIodGhpcykpIHtcbiAgICAgIHRocm93IGJ5b2JSZWFkZXJCcmFuZENoZWNrRXhjZXB0aW9uKCdyZWxlYXNlTG9jaycpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9vd25lclJlYWRhYmxlU3RyZWFtID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBSZWFkYWJsZVN0cmVhbUJZT0JSZWFkZXJSZWxlYXNlKHRoaXMpO1xuICB9XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFJlYWRhYmxlU3RyZWFtQllPQlJlYWRlci5wcm90b3R5cGUsIHtcbiAgY2FuY2VsOiB7IGVudW1lcmFibGU6IHRydWUgfSxcbiAgcmVhZDogeyBlbnVtZXJhYmxlOiB0cnVlIH0sXG4gIHJlbGVhc2VMb2NrOiB7IGVudW1lcmFibGU6IHRydWUgfSxcbiAgY2xvc2VkOiB7IGVudW1lcmFibGU6IHRydWUgfVxufSk7XG5zZXRGdW5jdGlvbk5hbWUoUmVhZGFibGVTdHJlYW1CWU9CUmVhZGVyLnByb3RvdHlwZS5jYW5jZWwsICdjYW5jZWwnKTtcbnNldEZ1bmN0aW9uTmFtZShSZWFkYWJsZVN0cmVhbUJZT0JSZWFkZXIucHJvdG90eXBlLnJlYWQsICdyZWFkJyk7XG5zZXRGdW5jdGlvbk5hbWUoUmVhZGFibGVTdHJlYW1CWU9CUmVhZGVyLnByb3RvdHlwZS5yZWxlYXNlTG9jaywgJ3JlbGVhc2VMb2NrJyk7XG5pZiAodHlwZW9mIFN5bWJvbC50b1N0cmluZ1RhZyA9PT0gJ3N5bWJvbCcpIHtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlYWRhYmxlU3RyZWFtQllPQlJlYWRlci5wcm90b3R5cGUsIFN5bWJvbC50b1N0cmluZ1RhZywge1xuICAgIHZhbHVlOiAnUmVhZGFibGVTdHJlYW1CWU9CUmVhZGVyJyxcbiAgICBjb25maWd1cmFibGU6IHRydWVcbiAgfSk7XG59XG5cbi8vIEFic3RyYWN0IG9wZXJhdGlvbnMgZm9yIHRoZSByZWFkZXJzLlxuXG5leHBvcnQgZnVuY3Rpb24gSXNSZWFkYWJsZVN0cmVhbUJZT0JSZWFkZXIoeDogYW55KTogeCBpcyBSZWFkYWJsZVN0cmVhbUJZT0JSZWFkZXIge1xuICBpZiAoIXR5cGVJc09iamVjdCh4KSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHgsICdfcmVhZEludG9SZXF1ZXN0cycpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIHggaW5zdGFuY2VvZiBSZWFkYWJsZVN0cmVhbUJZT0JSZWFkZXI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBSZWFkYWJsZVN0cmVhbUJZT0JSZWFkZXJSZWFkPFQgZXh0ZW5kcyBOb25TaGFyZWQ8QXJyYXlCdWZmZXJWaWV3Pj4oXG4gIHJlYWRlcjogUmVhZGFibGVTdHJlYW1CWU9CUmVhZGVyLFxuICB2aWV3OiBULFxuICBtaW46IG51bWJlcixcbiAgcmVhZEludG9SZXF1ZXN0OiBSZWFkSW50b1JlcXVlc3Q8VD5cbik6IHZvaWQge1xuICBjb25zdCBzdHJlYW0gPSByZWFkZXIuX293bmVyUmVhZGFibGVTdHJlYW07XG5cbiAgYXNzZXJ0KHN0cmVhbSAhPT0gdW5kZWZpbmVkKTtcblxuICBzdHJlYW0uX2Rpc3R1cmJlZCA9IHRydWU7XG5cbiAgaWYgKHN0cmVhbS5fc3RhdGUgPT09ICdlcnJvcmVkJykge1xuICAgIHJlYWRJbnRvUmVxdWVzdC5fZXJyb3JTdGVwcyhzdHJlYW0uX3N0b3JlZEVycm9yKTtcbiAgfSBlbHNlIHtcbiAgICBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyUHVsbEludG8oXG4gICAgICBzdHJlYW0uX3JlYWRhYmxlU3RyZWFtQ29udHJvbGxlciBhcyBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyLFxuICAgICAgdmlldyxcbiAgICAgIG1pbixcbiAgICAgIHJlYWRJbnRvUmVxdWVzdFxuICAgICk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFJlYWRhYmxlU3RyZWFtQllPQlJlYWRlclJlbGVhc2UocmVhZGVyOiBSZWFkYWJsZVN0cmVhbUJZT0JSZWFkZXIpIHtcbiAgUmVhZGFibGVTdHJlYW1SZWFkZXJHZW5lcmljUmVsZWFzZShyZWFkZXIpO1xuICBjb25zdCBlID0gbmV3IFR5cGVFcnJvcignUmVhZGVyIHdhcyByZWxlYXNlZCcpO1xuICBSZWFkYWJsZVN0cmVhbUJZT0JSZWFkZXJFcnJvclJlYWRJbnRvUmVxdWVzdHMocmVhZGVyLCBlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFJlYWRhYmxlU3RyZWFtQllPQlJlYWRlckVycm9yUmVhZEludG9SZXF1ZXN0cyhyZWFkZXI6IFJlYWRhYmxlU3RyZWFtQllPQlJlYWRlciwgZTogYW55KSB7XG4gIGNvbnN0IHJlYWRJbnRvUmVxdWVzdHMgPSByZWFkZXIuX3JlYWRJbnRvUmVxdWVzdHM7XG4gIHJlYWRlci5fcmVhZEludG9SZXF1ZXN0cyA9IG5ldyBTaW1wbGVRdWV1ZSgpO1xuICByZWFkSW50b1JlcXVlc3RzLmZvckVhY2gocmVhZEludG9SZXF1ZXN0ID0+IHtcbiAgICByZWFkSW50b1JlcXVlc3QuX2Vycm9yU3RlcHMoZSk7XG4gIH0pO1xufVxuXG4vLyBIZWxwZXIgZnVuY3Rpb25zIGZvciB0aGUgUmVhZGFibGVTdHJlYW1CWU9CUmVhZGVyLlxuXG5mdW5jdGlvbiBieW9iUmVhZGVyQnJhbmRDaGVja0V4Y2VwdGlvbihuYW1lOiBzdHJpbmcpOiBUeXBlRXJyb3Ige1xuICByZXR1cm4gbmV3IFR5cGVFcnJvcihcbiAgICBgUmVhZGFibGVTdHJlYW1CWU9CUmVhZGVyLnByb3RvdHlwZS4ke25hbWV9IGNhbiBvbmx5IGJlIHVzZWQgb24gYSBSZWFkYWJsZVN0cmVhbUJZT0JSZWFkZXJgKTtcbn1cbiIsICJpbXBvcnQgdHlwZSB7IFF1ZXVpbmdTdHJhdGVneSwgUXVldWluZ1N0cmF0ZWd5U2l6ZUNhbGxiYWNrIH0gZnJvbSAnLi4vcXVldWluZy1zdHJhdGVneSc7XG5pbXBvcnQgTnVtYmVySXNOYU4gZnJvbSAnLi4vLi4vc3R1Yi9udW1iZXItaXNuYW4nO1xuXG5leHBvcnQgZnVuY3Rpb24gRXh0cmFjdEhpZ2hXYXRlck1hcmsoc3RyYXRlZ3k6IFF1ZXVpbmdTdHJhdGVneSwgZGVmYXVsdEhXTTogbnVtYmVyKTogbnVtYmVyIHtcbiAgY29uc3QgeyBoaWdoV2F0ZXJNYXJrIH0gPSBzdHJhdGVneTtcblxuICBpZiAoaGlnaFdhdGVyTWFyayA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIGRlZmF1bHRIV007XG4gIH1cblxuICBpZiAoTnVtYmVySXNOYU4oaGlnaFdhdGVyTWFyaykgfHwgaGlnaFdhdGVyTWFyayA8IDApIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW52YWxpZCBoaWdoV2F0ZXJNYXJrJyk7XG4gIH1cblxuICByZXR1cm4gaGlnaFdhdGVyTWFyaztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEV4dHJhY3RTaXplQWxnb3JpdGhtPFQ+KHN0cmF0ZWd5OiBRdWV1aW5nU3RyYXRlZ3k8VD4pOiBRdWV1aW5nU3RyYXRlZ3lTaXplQ2FsbGJhY2s8VD4ge1xuICBjb25zdCB7IHNpemUgfSA9IHN0cmF0ZWd5O1xuXG4gIGlmICghc2l6ZSkge1xuICAgIHJldHVybiAoKSA9PiAxO1xuICB9XG5cbiAgcmV0dXJuIHNpemU7XG59XG4iLCAiaW1wb3J0IHR5cGUgeyBRdWV1aW5nU3RyYXRlZ3ksIFF1ZXVpbmdTdHJhdGVneVNpemVDYWxsYmFjayB9IGZyb20gJy4uL3F1ZXVpbmctc3RyYXRlZ3knO1xuaW1wb3J0IHsgYXNzZXJ0RGljdGlvbmFyeSwgYXNzZXJ0RnVuY3Rpb24sIGNvbnZlcnRVbnJlc3RyaWN0ZWREb3VibGUgfSBmcm9tICcuL2Jhc2ljJztcblxuZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnRRdWV1aW5nU3RyYXRlZ3k8VD4oaW5pdDogUXVldWluZ1N0cmF0ZWd5PFQ+IHwgbnVsbCB8IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQ6IHN0cmluZyk6IFF1ZXVpbmdTdHJhdGVneTxUPiB7XG4gIGFzc2VydERpY3Rpb25hcnkoaW5pdCwgY29udGV4dCk7XG4gIGNvbnN0IGhpZ2hXYXRlck1hcmsgPSBpbml0Py5oaWdoV2F0ZXJNYXJrO1xuICBjb25zdCBzaXplID0gaW5pdD8uc2l6ZTtcbiAgcmV0dXJuIHtcbiAgICBoaWdoV2F0ZXJNYXJrOiBoaWdoV2F0ZXJNYXJrID09PSB1bmRlZmluZWQgPyB1bmRlZmluZWQgOiBjb252ZXJ0VW5yZXN0cmljdGVkRG91YmxlKGhpZ2hXYXRlck1hcmspLFxuICAgIHNpemU6IHNpemUgPT09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZCA6IGNvbnZlcnRRdWV1aW5nU3RyYXRlZ3lTaXplKHNpemUsIGAke2NvbnRleHR9IGhhcyBtZW1iZXIgJ3NpemUnIHRoYXRgKVxuICB9O1xufVxuXG5mdW5jdGlvbiBjb252ZXJ0UXVldWluZ1N0cmF0ZWd5U2l6ZTxUPihmbjogUXVldWluZ1N0cmF0ZWd5U2l6ZUNhbGxiYWNrPFQ+LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dDogc3RyaW5nKTogUXVldWluZ1N0cmF0ZWd5U2l6ZUNhbGxiYWNrPFQ+IHtcbiAgYXNzZXJ0RnVuY3Rpb24oZm4sIGNvbnRleHQpO1xuICByZXR1cm4gY2h1bmsgPT4gY29udmVydFVucmVzdHJpY3RlZERvdWJsZShmbihjaHVuaykpO1xufVxuIiwgImltcG9ydCB7IGFzc2VydERpY3Rpb25hcnksIGFzc2VydEZ1bmN0aW9uIH0gZnJvbSAnLi9iYXNpYyc7XG5pbXBvcnQgeyBwcm9taXNlQ2FsbCwgcmVmbGVjdENhbGwgfSBmcm9tICcuLi9oZWxwZXJzL3dlYmlkbCc7XG5pbXBvcnQgdHlwZSB7XG4gIFVuZGVybHlpbmdTaW5rLFxuICBVbmRlcmx5aW5nU2lua0Fib3J0Q2FsbGJhY2ssXG4gIFVuZGVybHlpbmdTaW5rQ2xvc2VDYWxsYmFjayxcbiAgVW5kZXJseWluZ1NpbmtTdGFydENhbGxiYWNrLFxuICBVbmRlcmx5aW5nU2lua1dyaXRlQ2FsbGJhY2ssXG4gIFZhbGlkYXRlZFVuZGVybHlpbmdTaW5rXG59IGZyb20gJy4uL3dyaXRhYmxlLXN0cmVhbS91bmRlcmx5aW5nLXNpbmsnO1xuaW1wb3J0IHsgV3JpdGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlciB9IGZyb20gJy4uL3dyaXRhYmxlLXN0cmVhbSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBjb252ZXJ0VW5kZXJseWluZ1Npbms8Vz4ob3JpZ2luYWw6IFVuZGVybHlpbmdTaW5rPFc+IHwgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dDogc3RyaW5nKTogVmFsaWRhdGVkVW5kZXJseWluZ1Npbms8Vz4ge1xuICBhc3NlcnREaWN0aW9uYXJ5KG9yaWdpbmFsLCBjb250ZXh0KTtcbiAgY29uc3QgYWJvcnQgPSBvcmlnaW5hbD8uYWJvcnQ7XG4gIGNvbnN0IGNsb3NlID0gb3JpZ2luYWw/LmNsb3NlO1xuICBjb25zdCBzdGFydCA9IG9yaWdpbmFsPy5zdGFydDtcbiAgY29uc3QgdHlwZSA9IG9yaWdpbmFsPy50eXBlO1xuICBjb25zdCB3cml0ZSA9IG9yaWdpbmFsPy53cml0ZTtcbiAgcmV0dXJuIHtcbiAgICBhYm9ydDogYWJvcnQgPT09IHVuZGVmaW5lZCA/XG4gICAgICB1bmRlZmluZWQgOlxuICAgICAgY29udmVydFVuZGVybHlpbmdTaW5rQWJvcnRDYWxsYmFjayhhYm9ydCwgb3JpZ2luYWwhLCBgJHtjb250ZXh0fSBoYXMgbWVtYmVyICdhYm9ydCcgdGhhdGApLFxuICAgIGNsb3NlOiBjbG9zZSA9PT0gdW5kZWZpbmVkID9cbiAgICAgIHVuZGVmaW5lZCA6XG4gICAgICBjb252ZXJ0VW5kZXJseWluZ1NpbmtDbG9zZUNhbGxiYWNrKGNsb3NlLCBvcmlnaW5hbCEsIGAke2NvbnRleHR9IGhhcyBtZW1iZXIgJ2Nsb3NlJyB0aGF0YCksXG4gICAgc3RhcnQ6IHN0YXJ0ID09PSB1bmRlZmluZWQgP1xuICAgICAgdW5kZWZpbmVkIDpcbiAgICAgIGNvbnZlcnRVbmRlcmx5aW5nU2lua1N0YXJ0Q2FsbGJhY2soc3RhcnQsIG9yaWdpbmFsISwgYCR7Y29udGV4dH0gaGFzIG1lbWJlciAnc3RhcnQnIHRoYXRgKSxcbiAgICB3cml0ZTogd3JpdGUgPT09IHVuZGVmaW5lZCA/XG4gICAgICB1bmRlZmluZWQgOlxuICAgICAgY29udmVydFVuZGVybHlpbmdTaW5rV3JpdGVDYWxsYmFjayh3cml0ZSwgb3JpZ2luYWwhLCBgJHtjb250ZXh0fSBoYXMgbWVtYmVyICd3cml0ZScgdGhhdGApLFxuICAgIHR5cGVcbiAgfTtcbn1cblxuZnVuY3Rpb24gY29udmVydFVuZGVybHlpbmdTaW5rQWJvcnRDYWxsYmFjayhcbiAgZm46IFVuZGVybHlpbmdTaW5rQWJvcnRDYWxsYmFjayxcbiAgb3JpZ2luYWw6IFVuZGVybHlpbmdTaW5rLFxuICBjb250ZXh0OiBzdHJpbmdcbik6IChyZWFzb246IGFueSkgPT4gUHJvbWlzZTx2b2lkPiB7XG4gIGFzc2VydEZ1bmN0aW9uKGZuLCBjb250ZXh0KTtcbiAgcmV0dXJuIChyZWFzb246IGFueSkgPT4gcHJvbWlzZUNhbGwoZm4sIG9yaWdpbmFsLCBbcmVhc29uXSk7XG59XG5cbmZ1bmN0aW9uIGNvbnZlcnRVbmRlcmx5aW5nU2lua0Nsb3NlQ2FsbGJhY2soXG4gIGZuOiBVbmRlcmx5aW5nU2lua0Nsb3NlQ2FsbGJhY2ssXG4gIG9yaWdpbmFsOiBVbmRlcmx5aW5nU2luayxcbiAgY29udGV4dDogc3RyaW5nXG4pOiAoKSA9PiBQcm9taXNlPHZvaWQ+IHtcbiAgYXNzZXJ0RnVuY3Rpb24oZm4sIGNvbnRleHQpO1xuICByZXR1cm4gKCkgPT4gcHJvbWlzZUNhbGwoZm4sIG9yaWdpbmFsLCBbXSk7XG59XG5cbmZ1bmN0aW9uIGNvbnZlcnRVbmRlcmx5aW5nU2lua1N0YXJ0Q2FsbGJhY2soXG4gIGZuOiBVbmRlcmx5aW5nU2lua1N0YXJ0Q2FsbGJhY2ssXG4gIG9yaWdpbmFsOiBVbmRlcmx5aW5nU2luayxcbiAgY29udGV4dDogc3RyaW5nXG4pOiBVbmRlcmx5aW5nU2lua1N0YXJ0Q2FsbGJhY2sge1xuICBhc3NlcnRGdW5jdGlvbihmbiwgY29udGV4dCk7XG4gIHJldHVybiAoY29udHJvbGxlcjogV3JpdGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlcikgPT4gcmVmbGVjdENhbGwoZm4sIG9yaWdpbmFsLCBbY29udHJvbGxlcl0pO1xufVxuXG5mdW5jdGlvbiBjb252ZXJ0VW5kZXJseWluZ1NpbmtXcml0ZUNhbGxiYWNrPFc+KFxuICBmbjogVW5kZXJseWluZ1NpbmtXcml0ZUNhbGxiYWNrPFc+LFxuICBvcmlnaW5hbDogVW5kZXJseWluZ1Npbms8Vz4sXG4gIGNvbnRleHQ6IHN0cmluZ1xuKTogKGNodW5rOiBXLCBjb250cm9sbGVyOiBXcml0YWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyKSA9PiBQcm9taXNlPHZvaWQ+IHtcbiAgYXNzZXJ0RnVuY3Rpb24oZm4sIGNvbnRleHQpO1xuICByZXR1cm4gKGNodW5rOiBXLCBjb250cm9sbGVyOiBXcml0YWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyKSA9PiBwcm9taXNlQ2FsbChmbiwgb3JpZ2luYWwsIFtjaHVuaywgY29udHJvbGxlcl0pO1xufVxuIiwgImltcG9ydCB7IElzV3JpdGFibGVTdHJlYW0sIFdyaXRhYmxlU3RyZWFtIH0gZnJvbSAnLi4vd3JpdGFibGUtc3RyZWFtJztcblxuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydFdyaXRhYmxlU3RyZWFtKHg6IHVua25vd24sIGNvbnRleHQ6IHN0cmluZyk6IGFzc2VydHMgeCBpcyBXcml0YWJsZVN0cmVhbSB7XG4gIGlmICghSXNXcml0YWJsZVN0cmVhbSh4KSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYCR7Y29udGV4dH0gaXMgbm90IGEgV3JpdGFibGVTdHJlYW0uYCk7XG4gIH1cbn1cbiIsICIvKipcbiAqIEEgc2lnbmFsIG9iamVjdCB0aGF0IGFsbG93cyB5b3UgdG8gY29tbXVuaWNhdGUgd2l0aCBhIHJlcXVlc3QgYW5kIGFib3J0IGl0IGlmIHJlcXVpcmVkXG4gKiB2aWEgaXRzIGFzc29jaWF0ZWQgYEFib3J0Q29udHJvbGxlcmAgb2JqZWN0LlxuICpcbiAqIEByZW1hcmtzXG4gKiAgIFRoaXMgaW50ZXJmYWNlIGlzIGNvbXBhdGlibGUgd2l0aCB0aGUgYEFib3J0U2lnbmFsYCBpbnRlcmZhY2UgZGVmaW5lZCBpbiBUeXBlU2NyaXB0J3MgRE9NIHR5cGVzLlxuICogICBJdCBpcyByZWRlZmluZWQgaGVyZSwgc28gaXQgY2FuIGJlIHBvbHlmaWxsZWQgd2l0aG91dCBhIERPTSwgZm9yIGV4YW1wbGUgd2l0aFxuICogICB7QGxpbmsgaHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvYWJvcnRjb250cm9sbGVyLXBvbHlmaWxsIHwgYWJvcnRjb250cm9sbGVyLXBvbHlmaWxsfSBpbiBhIE5vZGUgZW52aXJvbm1lbnQuXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgaW50ZXJmYWNlIEFib3J0U2lnbmFsIHtcbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIHJlcXVlc3QgaXMgYWJvcnRlZC5cbiAgICovXG4gIHJlYWRvbmx5IGFib3J0ZWQ6IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIElmIGFib3J0ZWQsIHJldHVybnMgdGhlIHJlYXNvbiBmb3IgYWJvcnRpbmcuXG4gICAqL1xuICByZWFkb25seSByZWFzb24/OiBhbnk7XG5cbiAgLyoqXG4gICAqIEFkZCBhbiBldmVudCBsaXN0ZW5lciB0byBiZSB0cmlnZ2VyZWQgd2hlbiB0aGlzIHNpZ25hbCBiZWNvbWVzIGFib3J0ZWQuXG4gICAqL1xuICBhZGRFdmVudExpc3RlbmVyKHR5cGU6ICdhYm9ydCcsIGxpc3RlbmVyOiAoKSA9PiB2b2lkKTogdm9pZDtcblxuICAvKipcbiAgICogUmVtb3ZlIGFuIGV2ZW50IGxpc3RlbmVyIHRoYXQgd2FzIHByZXZpb3VzbHkgYWRkZWQgd2l0aCB7QGxpbmsgQWJvcnRTaWduYWwuYWRkRXZlbnRMaXN0ZW5lcn0uXG4gICAqL1xuICByZW1vdmVFdmVudExpc3RlbmVyKHR5cGU6ICdhYm9ydCcsIGxpc3RlbmVyOiAoKSA9PiB2b2lkKTogdm9pZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzQWJvcnRTaWduYWwodmFsdWU6IHVua25vd24pOiB2YWx1ZSBpcyBBYm9ydFNpZ25hbCB7XG4gIGlmICh0eXBlb2YgdmFsdWUgIT09ICdvYmplY3QnIHx8IHZhbHVlID09PSBudWxsKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHRyeSB7XG4gICAgcmV0dXJuIHR5cGVvZiAodmFsdWUgYXMgQWJvcnRTaWduYWwpLmFib3J0ZWQgPT09ICdib29sZWFuJztcbiAgfSBjYXRjaCB7XG4gICAgLy8gQWJvcnRTaWduYWwucHJvdG90eXBlLmFib3J0ZWQgdGhyb3dzIGlmIGl0cyBicmFuZCBjaGVjayBmYWlsc1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG4vKipcbiAqIEEgY29udHJvbGxlciBvYmplY3QgdGhhdCBhbGxvd3MgeW91IHRvIGFib3J0IGFuIGBBYm9ydFNpZ25hbGAgd2hlbiBkZXNpcmVkLlxuICpcbiAqIEByZW1hcmtzXG4gKiAgIFRoaXMgaW50ZXJmYWNlIGlzIGNvbXBhdGlibGUgd2l0aCB0aGUgYEFib3J0Q29udHJvbGxlcmAgaW50ZXJmYWNlIGRlZmluZWQgaW4gVHlwZVNjcmlwdCdzIERPTSB0eXBlcy5cbiAqICAgSXQgaXMgcmVkZWZpbmVkIGhlcmUsIHNvIGl0IGNhbiBiZSBwb2x5ZmlsbGVkIHdpdGhvdXQgYSBET00sIGZvciBleGFtcGxlIHdpdGhcbiAqICAge0BsaW5rIGh0dHBzOi8vd3d3Lm5wbWpzLmNvbS9wYWNrYWdlL2Fib3J0Y29udHJvbGxlci1wb2x5ZmlsbCB8IGFib3J0Y29udHJvbGxlci1wb2x5ZmlsbH0gaW4gYSBOb2RlIGVudmlyb25tZW50LlxuICpcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgaW50ZXJmYWNlIEFib3J0Q29udHJvbGxlciB7XG4gIHJlYWRvbmx5IHNpZ25hbDogQWJvcnRTaWduYWw7XG5cbiAgYWJvcnQocmVhc29uPzogYW55KTogdm9pZDtcbn1cblxuaW50ZXJmYWNlIEFib3J0Q29udHJvbGxlckNvbnN0cnVjdG9yIHtcbiAgbmV3KCk6IEFib3J0Q29udHJvbGxlcjtcbn1cblxuY29uc3Qgc3VwcG9ydHNBYm9ydENvbnRyb2xsZXIgPSB0eXBlb2YgKEFib3J0Q29udHJvbGxlciBhcyBhbnkpID09PSAnZnVuY3Rpb24nO1xuXG4vKipcbiAqIENvbnN0cnVjdCBhIG5ldyBBYm9ydENvbnRyb2xsZXIsIGlmIHN1cHBvcnRlZCBieSB0aGUgcGxhdGZvcm0uXG4gKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVBYm9ydENvbnRyb2xsZXIoKTogQWJvcnRDb250cm9sbGVyIHwgdW5kZWZpbmVkIHtcbiAgaWYgKHN1cHBvcnRzQWJvcnRDb250cm9sbGVyKSB7XG4gICAgcmV0dXJuIG5ldyAoQWJvcnRDb250cm9sbGVyIGFzIEFib3J0Q29udHJvbGxlckNvbnN0cnVjdG9yKSgpO1xuICB9XG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG4iLCAiaW1wb3J0IGFzc2VydCBmcm9tICcuLi9zdHViL2Fzc2VydCc7XG5pbXBvcnQge1xuICBuZXdQcm9taXNlLFxuICBwcm9taXNlUmVqZWN0ZWRXaXRoLFxuICBwcm9taXNlUmVzb2x2ZWRXaXRoLFxuICBzZXRQcm9taXNlSXNIYW5kbGVkVG9UcnVlLFxuICB1cG9uUHJvbWlzZVxufSBmcm9tICcuL2hlbHBlcnMvd2ViaWRsJztcbmltcG9ydCB7XG4gIERlcXVldWVWYWx1ZSxcbiAgRW5xdWV1ZVZhbHVlV2l0aFNpemUsXG4gIFBlZWtRdWV1ZVZhbHVlLFxuICB0eXBlIFF1ZXVlUGFpcixcbiAgUmVzZXRRdWV1ZVxufSBmcm9tICcuL2Fic3RyYWN0LW9wcy9xdWV1ZS13aXRoLXNpemVzJztcbmltcG9ydCB0eXBlIHsgUXVldWluZ1N0cmF0ZWd5LCBRdWV1aW5nU3RyYXRlZ3lTaXplQ2FsbGJhY2sgfSBmcm9tICcuL3F1ZXVpbmctc3RyYXRlZ3knO1xuaW1wb3J0IHsgU2ltcGxlUXVldWUgfSBmcm9tICcuL3NpbXBsZS1xdWV1ZSc7XG5pbXBvcnQgeyBzZXRGdW5jdGlvbk5hbWUsIHR5cGVJc09iamVjdCB9IGZyb20gJy4vaGVscGVycy9taXNjZWxsYW5lb3VzJztcbmltcG9ydCB7IEFib3J0U3RlcHMsIEVycm9yU3RlcHMgfSBmcm9tICcuL2Fic3RyYWN0LW9wcy9pbnRlcm5hbC1tZXRob2RzJztcbmltcG9ydCB7IElzTm9uTmVnYXRpdmVOdW1iZXIgfSBmcm9tICcuL2Fic3RyYWN0LW9wcy9taXNjZWxsYW5lb3VzJztcbmltcG9ydCB7IEV4dHJhY3RIaWdoV2F0ZXJNYXJrLCBFeHRyYWN0U2l6ZUFsZ29yaXRobSB9IGZyb20gJy4vYWJzdHJhY3Qtb3BzL3F1ZXVpbmctc3RyYXRlZ3knO1xuaW1wb3J0IHsgY29udmVydFF1ZXVpbmdTdHJhdGVneSB9IGZyb20gJy4vdmFsaWRhdG9ycy9xdWV1aW5nLXN0cmF0ZWd5JztcbmltcG9ydCB0eXBlIHtcbiAgVW5kZXJseWluZ1NpbmssXG4gIFVuZGVybHlpbmdTaW5rQWJvcnRDYWxsYmFjayxcbiAgVW5kZXJseWluZ1NpbmtDbG9zZUNhbGxiYWNrLFxuICBVbmRlcmx5aW5nU2lua1N0YXJ0Q2FsbGJhY2ssXG4gIFVuZGVybHlpbmdTaW5rV3JpdGVDYWxsYmFjayxcbiAgVmFsaWRhdGVkVW5kZXJseWluZ1Npbmtcbn0gZnJvbSAnLi93cml0YWJsZS1zdHJlYW0vdW5kZXJseWluZy1zaW5rJztcbmltcG9ydCB7IGFzc2VydE9iamVjdCwgYXNzZXJ0UmVxdWlyZWRBcmd1bWVudCB9IGZyb20gJy4vdmFsaWRhdG9ycy9iYXNpYyc7XG5pbXBvcnQgeyBjb252ZXJ0VW5kZXJseWluZ1NpbmsgfSBmcm9tICcuL3ZhbGlkYXRvcnMvdW5kZXJseWluZy1zaW5rJztcbmltcG9ydCB7IGFzc2VydFdyaXRhYmxlU3RyZWFtIH0gZnJvbSAnLi92YWxpZGF0b3JzL3dyaXRhYmxlLXN0cmVhbSc7XG5pbXBvcnQgeyB0eXBlIEFib3J0Q29udHJvbGxlciwgdHlwZSBBYm9ydFNpZ25hbCwgY3JlYXRlQWJvcnRDb250cm9sbGVyIH0gZnJvbSAnLi9hYm9ydC1zaWduYWwnO1xuXG50eXBlIFdyaXRhYmxlU3RyZWFtU3RhdGUgPSAnd3JpdGFibGUnIHwgJ2Nsb3NlZCcgfCAnZXJyb3JpbmcnIHwgJ2Vycm9yZWQnO1xuXG5pbnRlcmZhY2UgV3JpdGVPckNsb3NlUmVxdWVzdCB7XG4gIF9yZXNvbHZlOiAodmFsdWU/OiB1bmRlZmluZWQpID0+IHZvaWQ7XG4gIF9yZWplY3Q6IChyZWFzb246IGFueSkgPT4gdm9pZDtcbn1cblxudHlwZSBXcml0ZVJlcXVlc3QgPSBXcml0ZU9yQ2xvc2VSZXF1ZXN0O1xudHlwZSBDbG9zZVJlcXVlc3QgPSBXcml0ZU9yQ2xvc2VSZXF1ZXN0O1xuXG5pbnRlcmZhY2UgUGVuZGluZ0Fib3J0UmVxdWVzdCB7XG4gIF9wcm9taXNlOiBQcm9taXNlPHVuZGVmaW5lZD47XG4gIF9yZXNvbHZlOiAodmFsdWU/OiB1bmRlZmluZWQpID0+IHZvaWQ7XG4gIF9yZWplY3Q6IChyZWFzb246IGFueSkgPT4gdm9pZDtcbiAgX3JlYXNvbjogYW55O1xuICBfd2FzQWxyZWFkeUVycm9yaW5nOiBib29sZWFuO1xufVxuXG4vKipcbiAqIEEgd3JpdGFibGUgc3RyZWFtIHJlcHJlc2VudHMgYSBkZXN0aW5hdGlvbiBmb3IgZGF0YSwgaW50byB3aGljaCB5b3UgY2FuIHdyaXRlLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuY2xhc3MgV3JpdGFibGVTdHJlYW08VyA9IGFueT4ge1xuICAvKiogQGludGVybmFsICovXG4gIF9zdGF0ZSE6IFdyaXRhYmxlU3RyZWFtU3RhdGU7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX3N0b3JlZEVycm9yOiBhbnk7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX3dyaXRlcjogV3JpdGFibGVTdHJlYW1EZWZhdWx0V3JpdGVyPFc+IHwgdW5kZWZpbmVkO1xuICAvKiogQGludGVybmFsICovXG4gIF93cml0YWJsZVN0cmVhbUNvbnRyb2xsZXIhOiBXcml0YWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyPFc+O1xuICAvKiogQGludGVybmFsICovXG4gIF93cml0ZVJlcXVlc3RzITogU2ltcGxlUXVldWU8V3JpdGVSZXF1ZXN0PjtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfaW5GbGlnaHRXcml0ZVJlcXVlc3Q6IFdyaXRlUmVxdWVzdCB8IHVuZGVmaW5lZDtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfY2xvc2VSZXF1ZXN0OiBDbG9zZVJlcXVlc3QgfCB1bmRlZmluZWQ7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX2luRmxpZ2h0Q2xvc2VSZXF1ZXN0OiBDbG9zZVJlcXVlc3QgfCB1bmRlZmluZWQ7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX3BlbmRpbmdBYm9ydFJlcXVlc3Q6IFBlbmRpbmdBYm9ydFJlcXVlc3QgfCB1bmRlZmluZWQ7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX2JhY2twcmVzc3VyZSE6IGJvb2xlYW47XG5cbiAgY29uc3RydWN0b3IodW5kZXJseWluZ1Npbms/OiBVbmRlcmx5aW5nU2luazxXPiwgc3RyYXRlZ3k/OiBRdWV1aW5nU3RyYXRlZ3k8Vz4pO1xuICBjb25zdHJ1Y3RvcihyYXdVbmRlcmx5aW5nU2luazogVW5kZXJseWluZ1Npbms8Vz4gfCBudWxsIHwgdW5kZWZpbmVkID0ge30sXG4gICAgICAgICAgICAgIHJhd1N0cmF0ZWd5OiBRdWV1aW5nU3RyYXRlZ3k8Vz4gfCBudWxsIHwgdW5kZWZpbmVkID0ge30pIHtcbiAgICBpZiAocmF3VW5kZXJseWluZ1NpbmsgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmF3VW5kZXJseWluZ1NpbmsgPSBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICBhc3NlcnRPYmplY3QocmF3VW5kZXJseWluZ1NpbmssICdGaXJzdCBwYXJhbWV0ZXInKTtcbiAgICB9XG5cbiAgICBjb25zdCBzdHJhdGVneSA9IGNvbnZlcnRRdWV1aW5nU3RyYXRlZ3kocmF3U3RyYXRlZ3ksICdTZWNvbmQgcGFyYW1ldGVyJyk7XG4gICAgY29uc3QgdW5kZXJseWluZ1NpbmsgPSBjb252ZXJ0VW5kZXJseWluZ1NpbmsocmF3VW5kZXJseWluZ1NpbmssICdGaXJzdCBwYXJhbWV0ZXInKTtcblxuICAgIEluaXRpYWxpemVXcml0YWJsZVN0cmVhbSh0aGlzKTtcblxuICAgIGNvbnN0IHR5cGUgPSB1bmRlcmx5aW5nU2luay50eXBlO1xuICAgIGlmICh0eXBlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbnZhbGlkIHR5cGUgaXMgc3BlY2lmaWVkJyk7XG4gICAgfVxuXG4gICAgY29uc3Qgc2l6ZUFsZ29yaXRobSA9IEV4dHJhY3RTaXplQWxnb3JpdGhtKHN0cmF0ZWd5KTtcbiAgICBjb25zdCBoaWdoV2F0ZXJNYXJrID0gRXh0cmFjdEhpZ2hXYXRlck1hcmsoc3RyYXRlZ3ksIDEpO1xuXG4gICAgU2V0VXBXcml0YWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyRnJvbVVuZGVybHlpbmdTaW5rKHRoaXMsIHVuZGVybHlpbmdTaW5rLCBoaWdoV2F0ZXJNYXJrLCBzaXplQWxnb3JpdGhtKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHdoZXRoZXIgb3Igbm90IHRoZSB3cml0YWJsZSBzdHJlYW0gaXMgbG9ja2VkIHRvIGEgd3JpdGVyLlxuICAgKi9cbiAgZ2V0IGxvY2tlZCgpOiBib29sZWFuIHtcbiAgICBpZiAoIUlzV3JpdGFibGVTdHJlYW0odGhpcykpIHtcbiAgICAgIHRocm93IHN0cmVhbUJyYW5kQ2hlY2tFeGNlcHRpb24oJ2xvY2tlZCcpO1xuICAgIH1cblxuICAgIHJldHVybiBJc1dyaXRhYmxlU3RyZWFtTG9ja2VkKHRoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFib3J0cyB0aGUgc3RyZWFtLCBzaWduYWxpbmcgdGhhdCB0aGUgcHJvZHVjZXIgY2FuIG5vIGxvbmdlciBzdWNjZXNzZnVsbHkgd3JpdGUgdG8gdGhlIHN0cmVhbSBhbmQgaXQgaXMgdG8gYmVcbiAgICogaW1tZWRpYXRlbHkgbW92ZWQgdG8gYW4gZXJyb3JlZCBzdGF0ZSwgd2l0aCBhbnkgcXVldWVkLXVwIHdyaXRlcyBkaXNjYXJkZWQuIFRoaXMgd2lsbCBhbHNvIGV4ZWN1dGUgYW55IGFib3J0XG4gICAqIG1lY2hhbmlzbSBvZiB0aGUgdW5kZXJseWluZyBzaW5rLlxuICAgKlxuICAgKiBUaGUgcmV0dXJuZWQgcHJvbWlzZSB3aWxsIGZ1bGZpbGwgaWYgdGhlIHN0cmVhbSBzaHV0cyBkb3duIHN1Y2Nlc3NmdWxseSwgb3IgcmVqZWN0IGlmIHRoZSB1bmRlcmx5aW5nIHNpbmsgc2lnbmFsZWRcbiAgICogdGhhdCB0aGVyZSB3YXMgYW4gZXJyb3IgZG9pbmcgc28uIEFkZGl0aW9uYWxseSwgaXQgd2lsbCByZWplY3Qgd2l0aCBhIGBUeXBlRXJyb3JgICh3aXRob3V0IGF0dGVtcHRpbmcgdG8gY2FuY2VsXG4gICAqIHRoZSBzdHJlYW0pIGlmIHRoZSBzdHJlYW0gaXMgY3VycmVudGx5IGxvY2tlZC5cbiAgICovXG4gIGFib3J0KHJlYXNvbjogYW55ID0gdW5kZWZpbmVkKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCFJc1dyaXRhYmxlU3RyZWFtKHRoaXMpKSB7XG4gICAgICByZXR1cm4gcHJvbWlzZVJlamVjdGVkV2l0aChzdHJlYW1CcmFuZENoZWNrRXhjZXB0aW9uKCdhYm9ydCcpKTtcbiAgICB9XG5cbiAgICBpZiAoSXNXcml0YWJsZVN0cmVhbUxvY2tlZCh0aGlzKSkge1xuICAgICAgcmV0dXJuIHByb21pc2VSZWplY3RlZFdpdGgobmV3IFR5cGVFcnJvcignQ2Fubm90IGFib3J0IGEgc3RyZWFtIHRoYXQgYWxyZWFkeSBoYXMgYSB3cml0ZXInKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIFdyaXRhYmxlU3RyZWFtQWJvcnQodGhpcywgcmVhc29uKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbG9zZXMgdGhlIHN0cmVhbS4gVGhlIHVuZGVybHlpbmcgc2luayB3aWxsIGZpbmlzaCBwcm9jZXNzaW5nIGFueSBwcmV2aW91c2x5LXdyaXR0ZW4gY2h1bmtzLCBiZWZvcmUgaW52b2tpbmcgaXRzXG4gICAqIGNsb3NlIGJlaGF2aW9yLiBEdXJpbmcgdGhpcyB0aW1lIGFueSBmdXJ0aGVyIGF0dGVtcHRzIHRvIHdyaXRlIHdpbGwgZmFpbCAod2l0aG91dCBlcnJvcmluZyB0aGUgc3RyZWFtKS5cbiAgICpcbiAgICogVGhlIG1ldGhvZCByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHdpbGwgZnVsZmlsbCBpZiBhbGwgcmVtYWluaW5nIGNodW5rcyBhcmUgc3VjY2Vzc2Z1bGx5IHdyaXR0ZW4gYW5kIHRoZSBzdHJlYW1cbiAgICogc3VjY2Vzc2Z1bGx5IGNsb3Nlcywgb3IgcmVqZWN0cyBpZiBhbiBlcnJvciBpcyBlbmNvdW50ZXJlZCBkdXJpbmcgdGhpcyBwcm9jZXNzLiBBZGRpdGlvbmFsbHksIGl0IHdpbGwgcmVqZWN0IHdpdGhcbiAgICogYSBgVHlwZUVycm9yYCAod2l0aG91dCBhdHRlbXB0aW5nIHRvIGNhbmNlbCB0aGUgc3RyZWFtKSBpZiB0aGUgc3RyZWFtIGlzIGN1cnJlbnRseSBsb2NrZWQuXG4gICAqL1xuICBjbG9zZSgpIHtcbiAgICBpZiAoIUlzV3JpdGFibGVTdHJlYW0odGhpcykpIHtcbiAgICAgIHJldHVybiBwcm9taXNlUmVqZWN0ZWRXaXRoKHN0cmVhbUJyYW5kQ2hlY2tFeGNlcHRpb24oJ2Nsb3NlJykpO1xuICAgIH1cblxuICAgIGlmIChJc1dyaXRhYmxlU3RyZWFtTG9ja2VkKHRoaXMpKSB7XG4gICAgICByZXR1cm4gcHJvbWlzZVJlamVjdGVkV2l0aChuZXcgVHlwZUVycm9yKCdDYW5ub3QgY2xvc2UgYSBzdHJlYW0gdGhhdCBhbHJlYWR5IGhhcyBhIHdyaXRlcicpKTtcbiAgICB9XG5cbiAgICBpZiAoV3JpdGFibGVTdHJlYW1DbG9zZVF1ZXVlZE9ySW5GbGlnaHQodGhpcykpIHtcbiAgICAgIHJldHVybiBwcm9taXNlUmVqZWN0ZWRXaXRoKG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjbG9zZSBhbiBhbHJlYWR5LWNsb3Npbmcgc3RyZWFtJykpO1xuICAgIH1cblxuICAgIHJldHVybiBXcml0YWJsZVN0cmVhbUNsb3NlKHRoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSB7QGxpbmsgV3JpdGFibGVTdHJlYW1EZWZhdWx0V3JpdGVyIHwgd3JpdGVyfSBhbmQgbG9ja3MgdGhlIHN0cmVhbSB0byB0aGUgbmV3IHdyaXRlci4gV2hpbGUgdGhlIHN0cmVhbVxuICAgKiBpcyBsb2NrZWQsIG5vIG90aGVyIHdyaXRlciBjYW4gYmUgYWNxdWlyZWQgdW50aWwgdGhpcyBvbmUgaXMgcmVsZWFzZWQuXG4gICAqXG4gICAqIFRoaXMgZnVuY3Rpb25hbGl0eSBpcyBlc3BlY2lhbGx5IHVzZWZ1bCBmb3IgY3JlYXRpbmcgYWJzdHJhY3Rpb25zIHRoYXQgZGVzaXJlIHRoZSBhYmlsaXR5IHRvIHdyaXRlIHRvIGEgc3RyZWFtXG4gICAqIHdpdGhvdXQgaW50ZXJydXB0aW9uIG9yIGludGVybGVhdmluZy4gQnkgZ2V0dGluZyBhIHdyaXRlciBmb3IgdGhlIHN0cmVhbSwgeW91IGNhbiBlbnN1cmUgbm9ib2R5IGVsc2UgY2FuIHdyaXRlIGF0XG4gICAqIHRoZSBzYW1lIHRpbWUsIHdoaWNoIHdvdWxkIGNhdXNlIHRoZSByZXN1bHRpbmcgd3JpdHRlbiBkYXRhIHRvIGJlIHVucHJlZGljdGFibGUgYW5kIHByb2JhYmx5IHVzZWxlc3MuXG4gICAqL1xuICBnZXRXcml0ZXIoKTogV3JpdGFibGVTdHJlYW1EZWZhdWx0V3JpdGVyPFc+IHtcbiAgICBpZiAoIUlzV3JpdGFibGVTdHJlYW0odGhpcykpIHtcbiAgICAgIHRocm93IHN0cmVhbUJyYW5kQ2hlY2tFeGNlcHRpb24oJ2dldFdyaXRlcicpO1xuICAgIH1cblxuICAgIHJldHVybiBBY3F1aXJlV3JpdGFibGVTdHJlYW1EZWZhdWx0V3JpdGVyKHRoaXMpO1xuICB9XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFdyaXRhYmxlU3RyZWFtLnByb3RvdHlwZSwge1xuICBhYm9ydDogeyBlbnVtZXJhYmxlOiB0cnVlIH0sXG4gIGNsb3NlOiB7IGVudW1lcmFibGU6IHRydWUgfSxcbiAgZ2V0V3JpdGVyOiB7IGVudW1lcmFibGU6IHRydWUgfSxcbiAgbG9ja2VkOiB7IGVudW1lcmFibGU6IHRydWUgfVxufSk7XG5zZXRGdW5jdGlvbk5hbWUoV3JpdGFibGVTdHJlYW0ucHJvdG90eXBlLmFib3J0LCAnYWJvcnQnKTtcbnNldEZ1bmN0aW9uTmFtZShXcml0YWJsZVN0cmVhbS5wcm90b3R5cGUuY2xvc2UsICdjbG9zZScpO1xuc2V0RnVuY3Rpb25OYW1lKFdyaXRhYmxlU3RyZWFtLnByb3RvdHlwZS5nZXRXcml0ZXIsICdnZXRXcml0ZXInKTtcbmlmICh0eXBlb2YgU3ltYm9sLnRvU3RyaW5nVGFnID09PSAnc3ltYm9sJykge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoV3JpdGFibGVTdHJlYW0ucHJvdG90eXBlLCBTeW1ib2wudG9TdHJpbmdUYWcsIHtcbiAgICB2YWx1ZTogJ1dyaXRhYmxlU3RyZWFtJyxcbiAgICBjb25maWd1cmFibGU6IHRydWVcbiAgfSk7XG59XG5cbmV4cG9ydCB7XG4gIEFjcXVpcmVXcml0YWJsZVN0cmVhbURlZmF1bHRXcml0ZXIsXG4gIENyZWF0ZVdyaXRhYmxlU3RyZWFtLFxuICBJc1dyaXRhYmxlU3RyZWFtLFxuICBJc1dyaXRhYmxlU3RyZWFtTG9ja2VkLFxuICBXcml0YWJsZVN0cmVhbSxcbiAgV3JpdGFibGVTdHJlYW1BYm9ydCxcbiAgV3JpdGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlckVycm9ySWZOZWVkZWQsXG4gIFdyaXRhYmxlU3RyZWFtRGVmYXVsdFdyaXRlckNsb3NlV2l0aEVycm9yUHJvcGFnYXRpb24sXG4gIFdyaXRhYmxlU3RyZWFtRGVmYXVsdFdyaXRlclJlbGVhc2UsXG4gIFdyaXRhYmxlU3RyZWFtRGVmYXVsdFdyaXRlcldyaXRlLFxuICBXcml0YWJsZVN0cmVhbUNsb3NlUXVldWVkT3JJbkZsaWdodFxufTtcblxuZXhwb3J0IHR5cGUge1xuICBVbmRlcmx5aW5nU2luayxcbiAgVW5kZXJseWluZ1NpbmtTdGFydENhbGxiYWNrLFxuICBVbmRlcmx5aW5nU2lua1dyaXRlQ2FsbGJhY2ssXG4gIFVuZGVybHlpbmdTaW5rQ2xvc2VDYWxsYmFjayxcbiAgVW5kZXJseWluZ1NpbmtBYm9ydENhbGxiYWNrXG59O1xuXG4vLyBBYnN0cmFjdCBvcGVyYXRpb25zIGZvciB0aGUgV3JpdGFibGVTdHJlYW0uXG5cbmZ1bmN0aW9uIEFjcXVpcmVXcml0YWJsZVN0cmVhbURlZmF1bHRXcml0ZXI8Vz4oc3RyZWFtOiBXcml0YWJsZVN0cmVhbTxXPik6IFdyaXRhYmxlU3RyZWFtRGVmYXVsdFdyaXRlcjxXPiB7XG4gIHJldHVybiBuZXcgV3JpdGFibGVTdHJlYW1EZWZhdWx0V3JpdGVyKHN0cmVhbSk7XG59XG5cbi8vIFRocm93cyBpZiBhbmQgb25seSBpZiBzdGFydEFsZ29yaXRobSB0aHJvd3MuXG5mdW5jdGlvbiBDcmVhdGVXcml0YWJsZVN0cmVhbTxXPihzdGFydEFsZ29yaXRobTogKCkgPT4gdm9pZCB8IFByb21pc2VMaWtlPHZvaWQ+LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVBbGdvcml0aG06IChjaHVuazogVykgPT4gUHJvbWlzZTx2b2lkPixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlQWxnb3JpdGhtOiAoKSA9PiBQcm9taXNlPHZvaWQ+LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWJvcnRBbGdvcml0aG06IChyZWFzb246IGFueSkgPT4gUHJvbWlzZTx2b2lkPixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZ2hXYXRlck1hcmsgPSAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZUFsZ29yaXRobTogUXVldWluZ1N0cmF0ZWd5U2l6ZUNhbGxiYWNrPFc+ID0gKCkgPT4gMSkge1xuICBhc3NlcnQoSXNOb25OZWdhdGl2ZU51bWJlcihoaWdoV2F0ZXJNYXJrKSk7XG5cbiAgY29uc3Qgc3RyZWFtOiBXcml0YWJsZVN0cmVhbTxXPiA9IE9iamVjdC5jcmVhdGUoV3JpdGFibGVTdHJlYW0ucHJvdG90eXBlKTtcbiAgSW5pdGlhbGl6ZVdyaXRhYmxlU3RyZWFtKHN0cmVhbSk7XG5cbiAgY29uc3QgY29udHJvbGxlcjogV3JpdGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlcjxXPiA9IE9iamVjdC5jcmVhdGUoV3JpdGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlci5wcm90b3R5cGUpO1xuXG4gIFNldFVwV3JpdGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlcihzdHJlYW0sIGNvbnRyb2xsZXIsIHN0YXJ0QWxnb3JpdGhtLCB3cml0ZUFsZ29yaXRobSwgY2xvc2VBbGdvcml0aG0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhYm9ydEFsZ29yaXRobSwgaGlnaFdhdGVyTWFyaywgc2l6ZUFsZ29yaXRobSk7XG4gIHJldHVybiBzdHJlYW07XG59XG5cbmZ1bmN0aW9uIEluaXRpYWxpemVXcml0YWJsZVN0cmVhbTxXPihzdHJlYW06IFdyaXRhYmxlU3RyZWFtPFc+KSB7XG4gIHN0cmVhbS5fc3RhdGUgPSAnd3JpdGFibGUnO1xuXG4gIC8vIFRoZSBlcnJvciB0aGF0IHdpbGwgYmUgcmVwb3J0ZWQgYnkgbmV3IG1ldGhvZCBjYWxscyBvbmNlIHRoZSBzdGF0ZSBiZWNvbWVzIGVycm9yZWQuIE9ubHkgc2V0IHdoZW4gW1tzdGF0ZV1dIGlzXG4gIC8vICdlcnJvcmluZycgb3IgJ2Vycm9yZWQnLiBNYXkgYmUgc2V0IHRvIGFuIHVuZGVmaW5lZCB2YWx1ZS5cbiAgc3RyZWFtLl9zdG9yZWRFcnJvciA9IHVuZGVmaW5lZDtcblxuICBzdHJlYW0uX3dyaXRlciA9IHVuZGVmaW5lZDtcblxuICAvLyBJbml0aWFsaXplIHRvIHVuZGVmaW5lZCBmaXJzdCBiZWNhdXNlIHRoZSBjb25zdHJ1Y3RvciBvZiB0aGUgY29udHJvbGxlciBjaGVja3MgdGhpc1xuICAvLyB2YXJpYWJsZSB0byB2YWxpZGF0ZSB0aGUgY2FsbGVyLlxuICBzdHJlYW0uX3dyaXRhYmxlU3RyZWFtQ29udHJvbGxlciA9IHVuZGVmaW5lZCE7XG5cbiAgLy8gVGhpcyBxdWV1ZSBpcyBwbGFjZWQgaGVyZSBpbnN0ZWFkIG9mIHRoZSB3cml0ZXIgY2xhc3MgaW4gb3JkZXIgdG8gYWxsb3cgZm9yIHBhc3NpbmcgYSB3cml0ZXIgdG8gdGhlIG5leHQgZGF0YVxuICAvLyBwcm9kdWNlciB3aXRob3V0IHdhaXRpbmcgZm9yIHRoZSBxdWV1ZWQgd3JpdGVzIHRvIGZpbmlzaC5cbiAgc3RyZWFtLl93cml0ZVJlcXVlc3RzID0gbmV3IFNpbXBsZVF1ZXVlKCk7XG5cbiAgLy8gV3JpdGUgcmVxdWVzdHMgYXJlIHJlbW92ZWQgZnJvbSBfd3JpdGVSZXF1ZXN0cyB3aGVuIHdyaXRlKCkgaXMgY2FsbGVkIG9uIHRoZSB1bmRlcmx5aW5nIHNpbmsuIFRoaXMgcHJldmVudHNcbiAgLy8gdGhlbSBmcm9tIGJlaW5nIGVycm9uZW91c2x5IHJlamVjdGVkIG9uIGVycm9yLiBJZiBhIHdyaXRlKCkgY2FsbCBpcyBpbi1mbGlnaHQsIHRoZSByZXF1ZXN0IGlzIHN0b3JlZCBoZXJlLlxuICBzdHJlYW0uX2luRmxpZ2h0V3JpdGVSZXF1ZXN0ID0gdW5kZWZpbmVkO1xuXG4gIC8vIFRoZSBwcm9taXNlIHRoYXQgd2FzIHJldHVybmVkIGZyb20gd3JpdGVyLmNsb3NlKCkuIFN0b3JlZCBoZXJlIGJlY2F1c2UgaXQgbWF5IGJlIGZ1bGZpbGxlZCBhZnRlciB0aGUgd3JpdGVyXG4gIC8vIGhhcyBiZWVuIGRldGFjaGVkLlxuICBzdHJlYW0uX2Nsb3NlUmVxdWVzdCA9IHVuZGVmaW5lZDtcblxuICAvLyBDbG9zZSByZXF1ZXN0IGlzIHJlbW92ZWQgZnJvbSBfY2xvc2VSZXF1ZXN0IHdoZW4gY2xvc2UoKSBpcyBjYWxsZWQgb24gdGhlIHVuZGVybHlpbmcgc2luay4gVGhpcyBwcmV2ZW50cyBpdFxuICAvLyBmcm9tIGJlaW5nIGVycm9uZW91c2x5IHJlamVjdGVkIG9uIGVycm9yLiBJZiBhIGNsb3NlKCkgY2FsbCBpcyBpbi1mbGlnaHQsIHRoZSByZXF1ZXN0IGlzIHN0b3JlZCBoZXJlLlxuICBzdHJlYW0uX2luRmxpZ2h0Q2xvc2VSZXF1ZXN0ID0gdW5kZWZpbmVkO1xuXG4gIC8vIFRoZSBwcm9taXNlIHRoYXQgd2FzIHJldHVybmVkIGZyb20gd3JpdGVyLmFib3J0KCkuIFRoaXMgbWF5IGFsc28gYmUgZnVsZmlsbGVkIGFmdGVyIHRoZSB3cml0ZXIgaGFzIGRldGFjaGVkLlxuICBzdHJlYW0uX3BlbmRpbmdBYm9ydFJlcXVlc3QgPSB1bmRlZmluZWQ7XG5cbiAgLy8gVGhlIGJhY2twcmVzc3VyZSBzaWduYWwgc2V0IGJ5IHRoZSBjb250cm9sbGVyLlxuICBzdHJlYW0uX2JhY2twcmVzc3VyZSA9IGZhbHNlO1xufVxuXG5mdW5jdGlvbiBJc1dyaXRhYmxlU3RyZWFtKHg6IHVua25vd24pOiB4IGlzIFdyaXRhYmxlU3RyZWFtIHtcbiAgaWYgKCF0eXBlSXNPYmplY3QoeCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh4LCAnX3dyaXRhYmxlU3RyZWFtQ29udHJvbGxlcicpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIHggaW5zdGFuY2VvZiBXcml0YWJsZVN0cmVhbTtcbn1cblxuZnVuY3Rpb24gSXNXcml0YWJsZVN0cmVhbUxvY2tlZChzdHJlYW06IFdyaXRhYmxlU3RyZWFtKTogYm9vbGVhbiB7XG4gIGFzc2VydChJc1dyaXRhYmxlU3RyZWFtKHN0cmVhbSkpO1xuXG4gIGlmIChzdHJlYW0uX3dyaXRlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIFdyaXRhYmxlU3RyZWFtQWJvcnQoc3RyZWFtOiBXcml0YWJsZVN0cmVhbSwgcmVhc29uOiBhbnkpOiBQcm9taXNlPHVuZGVmaW5lZD4ge1xuICBpZiAoc3RyZWFtLl9zdGF0ZSA9PT0gJ2Nsb3NlZCcgfHwgc3RyZWFtLl9zdGF0ZSA9PT0gJ2Vycm9yZWQnKSB7XG4gICAgcmV0dXJuIHByb21pc2VSZXNvbHZlZFdpdGgodW5kZWZpbmVkKTtcbiAgfVxuICBzdHJlYW0uX3dyaXRhYmxlU3RyZWFtQ29udHJvbGxlci5fYWJvcnRSZWFzb24gPSByZWFzb247XG4gIHN0cmVhbS5fd3JpdGFibGVTdHJlYW1Db250cm9sbGVyLl9hYm9ydENvbnRyb2xsZXI/LmFib3J0KHJlYXNvbik7XG5cbiAgLy8gVHlwZVNjcmlwdCBuYXJyb3dzIHRoZSB0eXBlIG9mIGBzdHJlYW0uX3N0YXRlYCBkb3duIHRvICd3cml0YWJsZScgfCAnZXJyb3JpbmcnLFxuICAvLyBidXQgaXQgZG9lc24ndCBrbm93IHRoYXQgc2lnbmFsaW5nIGFib3J0IHJ1bnMgYXV0aG9yIGNvZGUgdGhhdCBtaWdodCBoYXZlIGNoYW5nZWQgdGhlIHN0YXRlLlxuICAvLyBXaWRlbiB0aGUgdHlwZSBhZ2FpbiBieSBjYXN0aW5nIHRvIFdyaXRhYmxlU3RyZWFtU3RhdGUuXG4gIGNvbnN0IHN0YXRlID0gc3RyZWFtLl9zdGF0ZSBhcyBXcml0YWJsZVN0cmVhbVN0YXRlO1xuXG4gIGlmIChzdGF0ZSA9PT0gJ2Nsb3NlZCcgfHwgc3RhdGUgPT09ICdlcnJvcmVkJykge1xuICAgIHJldHVybiBwcm9taXNlUmVzb2x2ZWRXaXRoKHVuZGVmaW5lZCk7XG4gIH1cbiAgaWYgKHN0cmVhbS5fcGVuZGluZ0Fib3J0UmVxdWVzdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIHN0cmVhbS5fcGVuZGluZ0Fib3J0UmVxdWVzdC5fcHJvbWlzZTtcbiAgfVxuXG4gIGFzc2VydChzdGF0ZSA9PT0gJ3dyaXRhYmxlJyB8fCBzdGF0ZSA9PT0gJ2Vycm9yaW5nJyk7XG5cbiAgbGV0IHdhc0FscmVhZHlFcnJvcmluZyA9IGZhbHNlO1xuICBpZiAoc3RhdGUgPT09ICdlcnJvcmluZycpIHtcbiAgICB3YXNBbHJlYWR5RXJyb3JpbmcgPSB0cnVlO1xuICAgIC8vIHJlYXNvbiB3aWxsIG5vdCBiZSB1c2VkLCBzbyBkb24ndCBrZWVwIGEgcmVmZXJlbmNlIHRvIGl0LlxuICAgIHJlYXNvbiA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIGNvbnN0IHByb21pc2UgPSBuZXdQcm9taXNlPHVuZGVmaW5lZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIHN0cmVhbS5fcGVuZGluZ0Fib3J0UmVxdWVzdCA9IHtcbiAgICAgIF9wcm9taXNlOiB1bmRlZmluZWQhLFxuICAgICAgX3Jlc29sdmU6IHJlc29sdmUsXG4gICAgICBfcmVqZWN0OiByZWplY3QsXG4gICAgICBfcmVhc29uOiByZWFzb24sXG4gICAgICBfd2FzQWxyZWFkeUVycm9yaW5nOiB3YXNBbHJlYWR5RXJyb3JpbmdcbiAgICB9O1xuICB9KTtcbiAgc3RyZWFtLl9wZW5kaW5nQWJvcnRSZXF1ZXN0IS5fcHJvbWlzZSA9IHByb21pc2U7XG5cbiAgaWYgKCF3YXNBbHJlYWR5RXJyb3JpbmcpIHtcbiAgICBXcml0YWJsZVN0cmVhbVN0YXJ0RXJyb3Jpbmcoc3RyZWFtLCByZWFzb24pO1xuICB9XG5cbiAgcmV0dXJuIHByb21pc2U7XG59XG5cbmZ1bmN0aW9uIFdyaXRhYmxlU3RyZWFtQ2xvc2Uoc3RyZWFtOiBXcml0YWJsZVN0cmVhbTxhbnk+KTogUHJvbWlzZTx1bmRlZmluZWQ+IHtcbiAgY29uc3Qgc3RhdGUgPSBzdHJlYW0uX3N0YXRlO1xuICBpZiAoc3RhdGUgPT09ICdjbG9zZWQnIHx8IHN0YXRlID09PSAnZXJyb3JlZCcpIHtcbiAgICByZXR1cm4gcHJvbWlzZVJlamVjdGVkV2l0aChuZXcgVHlwZUVycm9yKFxuICAgICAgYFRoZSBzdHJlYW0gKGluICR7c3RhdGV9IHN0YXRlKSBpcyBub3QgaW4gdGhlIHdyaXRhYmxlIHN0YXRlIGFuZCBjYW5ub3QgYmUgY2xvc2VkYCkpO1xuICB9XG5cbiAgYXNzZXJ0KHN0YXRlID09PSAnd3JpdGFibGUnIHx8IHN0YXRlID09PSAnZXJyb3JpbmcnKTtcbiAgYXNzZXJ0KCFXcml0YWJsZVN0cmVhbUNsb3NlUXVldWVkT3JJbkZsaWdodChzdHJlYW0pKTtcblxuICBjb25zdCBwcm9taXNlID0gbmV3UHJvbWlzZTx1bmRlZmluZWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBjb25zdCBjbG9zZVJlcXVlc3Q6IENsb3NlUmVxdWVzdCA9IHtcbiAgICAgIF9yZXNvbHZlOiByZXNvbHZlLFxuICAgICAgX3JlamVjdDogcmVqZWN0XG4gICAgfTtcblxuICAgIHN0cmVhbS5fY2xvc2VSZXF1ZXN0ID0gY2xvc2VSZXF1ZXN0O1xuICB9KTtcblxuICBjb25zdCB3cml0ZXIgPSBzdHJlYW0uX3dyaXRlcjtcbiAgaWYgKHdyaXRlciAhPT0gdW5kZWZpbmVkICYmIHN0cmVhbS5fYmFja3ByZXNzdXJlICYmIHN0YXRlID09PSAnd3JpdGFibGUnKSB7XG4gICAgZGVmYXVsdFdyaXRlclJlYWR5UHJvbWlzZVJlc29sdmUod3JpdGVyKTtcbiAgfVxuXG4gIFdyaXRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXJDbG9zZShzdHJlYW0uX3dyaXRhYmxlU3RyZWFtQ29udHJvbGxlcik7XG5cbiAgcmV0dXJuIHByb21pc2U7XG59XG5cbi8vIFdyaXRhYmxlU3RyZWFtIEFQSSBleHBvc2VkIGZvciBjb250cm9sbGVycy5cblxuZnVuY3Rpb24gV3JpdGFibGVTdHJlYW1BZGRXcml0ZVJlcXVlc3Qoc3RyZWFtOiBXcml0YWJsZVN0cmVhbSk6IFByb21pc2U8dW5kZWZpbmVkPiB7XG4gIGFzc2VydChJc1dyaXRhYmxlU3RyZWFtTG9ja2VkKHN0cmVhbSkpO1xuICBhc3NlcnQoc3RyZWFtLl9zdGF0ZSA9PT0gJ3dyaXRhYmxlJyk7XG5cbiAgY29uc3QgcHJvbWlzZSA9IG5ld1Byb21pc2U8dW5kZWZpbmVkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgY29uc3Qgd3JpdGVSZXF1ZXN0OiBXcml0ZVJlcXVlc3QgPSB7XG4gICAgICBfcmVzb2x2ZTogcmVzb2x2ZSxcbiAgICAgIF9yZWplY3Q6IHJlamVjdFxuICAgIH07XG5cbiAgICBzdHJlYW0uX3dyaXRlUmVxdWVzdHMucHVzaCh3cml0ZVJlcXVlc3QpO1xuICB9KTtcblxuICByZXR1cm4gcHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gV3JpdGFibGVTdHJlYW1EZWFsV2l0aFJlamVjdGlvbihzdHJlYW06IFdyaXRhYmxlU3RyZWFtLCBlcnJvcjogYW55KSB7XG4gIGNvbnN0IHN0YXRlID0gc3RyZWFtLl9zdGF0ZTtcblxuICBpZiAoc3RhdGUgPT09ICd3cml0YWJsZScpIHtcbiAgICBXcml0YWJsZVN0cmVhbVN0YXJ0RXJyb3Jpbmcoc3RyZWFtLCBlcnJvcik7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgYXNzZXJ0KHN0YXRlID09PSAnZXJyb3JpbmcnKTtcbiAgV3JpdGFibGVTdHJlYW1GaW5pc2hFcnJvcmluZyhzdHJlYW0pO1xufVxuXG5mdW5jdGlvbiBXcml0YWJsZVN0cmVhbVN0YXJ0RXJyb3Jpbmcoc3RyZWFtOiBXcml0YWJsZVN0cmVhbSwgcmVhc29uOiBhbnkpIHtcbiAgYXNzZXJ0KHN0cmVhbS5fc3RvcmVkRXJyb3IgPT09IHVuZGVmaW5lZCk7XG4gIGFzc2VydChzdHJlYW0uX3N0YXRlID09PSAnd3JpdGFibGUnKTtcblxuICBjb25zdCBjb250cm9sbGVyID0gc3RyZWFtLl93cml0YWJsZVN0cmVhbUNvbnRyb2xsZXI7XG4gIGFzc2VydChjb250cm9sbGVyICE9PSB1bmRlZmluZWQpO1xuXG4gIHN0cmVhbS5fc3RhdGUgPSAnZXJyb3JpbmcnO1xuICBzdHJlYW0uX3N0b3JlZEVycm9yID0gcmVhc29uO1xuICBjb25zdCB3cml0ZXIgPSBzdHJlYW0uX3dyaXRlcjtcbiAgaWYgKHdyaXRlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgV3JpdGFibGVTdHJlYW1EZWZhdWx0V3JpdGVyRW5zdXJlUmVhZHlQcm9taXNlUmVqZWN0ZWQod3JpdGVyLCByZWFzb24pO1xuICB9XG5cbiAgaWYgKCFXcml0YWJsZVN0cmVhbUhhc09wZXJhdGlvbk1hcmtlZEluRmxpZ2h0KHN0cmVhbSkgJiYgY29udHJvbGxlci5fc3RhcnRlZCkge1xuICAgIFdyaXRhYmxlU3RyZWFtRmluaXNoRXJyb3Jpbmcoc3RyZWFtKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBXcml0YWJsZVN0cmVhbUZpbmlzaEVycm9yaW5nKHN0cmVhbTogV3JpdGFibGVTdHJlYW0pIHtcbiAgYXNzZXJ0KHN0cmVhbS5fc3RhdGUgPT09ICdlcnJvcmluZycpO1xuICBhc3NlcnQoIVdyaXRhYmxlU3RyZWFtSGFzT3BlcmF0aW9uTWFya2VkSW5GbGlnaHQoc3RyZWFtKSk7XG4gIHN0cmVhbS5fc3RhdGUgPSAnZXJyb3JlZCc7XG4gIHN0cmVhbS5fd3JpdGFibGVTdHJlYW1Db250cm9sbGVyW0Vycm9yU3RlcHNdKCk7XG5cbiAgY29uc3Qgc3RvcmVkRXJyb3IgPSBzdHJlYW0uX3N0b3JlZEVycm9yO1xuICBzdHJlYW0uX3dyaXRlUmVxdWVzdHMuZm9yRWFjaCh3cml0ZVJlcXVlc3QgPT4ge1xuICAgIHdyaXRlUmVxdWVzdC5fcmVqZWN0KHN0b3JlZEVycm9yKTtcbiAgfSk7XG4gIHN0cmVhbS5fd3JpdGVSZXF1ZXN0cyA9IG5ldyBTaW1wbGVRdWV1ZSgpO1xuXG4gIGlmIChzdHJlYW0uX3BlbmRpbmdBYm9ydFJlcXVlc3QgPT09IHVuZGVmaW5lZCkge1xuICAgIFdyaXRhYmxlU3RyZWFtUmVqZWN0Q2xvc2VBbmRDbG9zZWRQcm9taXNlSWZOZWVkZWQoc3RyZWFtKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBhYm9ydFJlcXVlc3QgPSBzdHJlYW0uX3BlbmRpbmdBYm9ydFJlcXVlc3Q7XG4gIHN0cmVhbS5fcGVuZGluZ0Fib3J0UmVxdWVzdCA9IHVuZGVmaW5lZDtcblxuICBpZiAoYWJvcnRSZXF1ZXN0Ll93YXNBbHJlYWR5RXJyb3JpbmcpIHtcbiAgICBhYm9ydFJlcXVlc3QuX3JlamVjdChzdG9yZWRFcnJvcik7XG4gICAgV3JpdGFibGVTdHJlYW1SZWplY3RDbG9zZUFuZENsb3NlZFByb21pc2VJZk5lZWRlZChzdHJlYW0pO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IHByb21pc2UgPSBzdHJlYW0uX3dyaXRhYmxlU3RyZWFtQ29udHJvbGxlcltBYm9ydFN0ZXBzXShhYm9ydFJlcXVlc3QuX3JlYXNvbik7XG4gIHVwb25Qcm9taXNlKFxuICAgIHByb21pc2UsXG4gICAgKCkgPT4ge1xuICAgICAgYWJvcnRSZXF1ZXN0Ll9yZXNvbHZlKCk7XG4gICAgICBXcml0YWJsZVN0cmVhbVJlamVjdENsb3NlQW5kQ2xvc2VkUHJvbWlzZUlmTmVlZGVkKHN0cmVhbSk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuICAgIChyZWFzb246IGFueSkgPT4ge1xuICAgICAgYWJvcnRSZXF1ZXN0Ll9yZWplY3QocmVhc29uKTtcbiAgICAgIFdyaXRhYmxlU3RyZWFtUmVqZWN0Q2xvc2VBbmRDbG9zZWRQcm9taXNlSWZOZWVkZWQoc3RyZWFtKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBXcml0YWJsZVN0cmVhbUZpbmlzaEluRmxpZ2h0V3JpdGUoc3RyZWFtOiBXcml0YWJsZVN0cmVhbSkge1xuICBhc3NlcnQoc3RyZWFtLl9pbkZsaWdodFdyaXRlUmVxdWVzdCAhPT0gdW5kZWZpbmVkKTtcbiAgc3RyZWFtLl9pbkZsaWdodFdyaXRlUmVxdWVzdCEuX3Jlc29sdmUodW5kZWZpbmVkKTtcbiAgc3RyZWFtLl9pbkZsaWdodFdyaXRlUmVxdWVzdCA9IHVuZGVmaW5lZDtcbn1cblxuZnVuY3Rpb24gV3JpdGFibGVTdHJlYW1GaW5pc2hJbkZsaWdodFdyaXRlV2l0aEVycm9yKHN0cmVhbTogV3JpdGFibGVTdHJlYW0sIGVycm9yOiBhbnkpIHtcbiAgYXNzZXJ0KHN0cmVhbS5faW5GbGlnaHRXcml0ZVJlcXVlc3QgIT09IHVuZGVmaW5lZCk7XG4gIHN0cmVhbS5faW5GbGlnaHRXcml0ZVJlcXVlc3QhLl9yZWplY3QoZXJyb3IpO1xuICBzdHJlYW0uX2luRmxpZ2h0V3JpdGVSZXF1ZXN0ID0gdW5kZWZpbmVkO1xuXG4gIGFzc2VydChzdHJlYW0uX3N0YXRlID09PSAnd3JpdGFibGUnIHx8IHN0cmVhbS5fc3RhdGUgPT09ICdlcnJvcmluZycpO1xuXG4gIFdyaXRhYmxlU3RyZWFtRGVhbFdpdGhSZWplY3Rpb24oc3RyZWFtLCBlcnJvcik7XG59XG5cbmZ1bmN0aW9uIFdyaXRhYmxlU3RyZWFtRmluaXNoSW5GbGlnaHRDbG9zZShzdHJlYW06IFdyaXRhYmxlU3RyZWFtKSB7XG4gIGFzc2VydChzdHJlYW0uX2luRmxpZ2h0Q2xvc2VSZXF1ZXN0ICE9PSB1bmRlZmluZWQpO1xuICBzdHJlYW0uX2luRmxpZ2h0Q2xvc2VSZXF1ZXN0IS5fcmVzb2x2ZSh1bmRlZmluZWQpO1xuICBzdHJlYW0uX2luRmxpZ2h0Q2xvc2VSZXF1ZXN0ID0gdW5kZWZpbmVkO1xuXG4gIGNvbnN0IHN0YXRlID0gc3RyZWFtLl9zdGF0ZTtcblxuICBhc3NlcnQoc3RhdGUgPT09ICd3cml0YWJsZScgfHwgc3RhdGUgPT09ICdlcnJvcmluZycpO1xuXG4gIGlmIChzdGF0ZSA9PT0gJ2Vycm9yaW5nJykge1xuICAgIC8vIFRoZSBlcnJvciB3YXMgdG9vIGxhdGUgdG8gZG8gYW55dGhpbmcsIHNvIGl0IGlzIGlnbm9yZWQuXG4gICAgc3RyZWFtLl9zdG9yZWRFcnJvciA9IHVuZGVmaW5lZDtcbiAgICBpZiAoc3RyZWFtLl9wZW5kaW5nQWJvcnRSZXF1ZXN0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHN0cmVhbS5fcGVuZGluZ0Fib3J0UmVxdWVzdC5fcmVzb2x2ZSgpO1xuICAgICAgc3RyZWFtLl9wZW5kaW5nQWJvcnRSZXF1ZXN0ID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIHN0cmVhbS5fc3RhdGUgPSAnY2xvc2VkJztcblxuICBjb25zdCB3cml0ZXIgPSBzdHJlYW0uX3dyaXRlcjtcbiAgaWYgKHdyaXRlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgZGVmYXVsdFdyaXRlckNsb3NlZFByb21pc2VSZXNvbHZlKHdyaXRlcik7XG4gIH1cblxuICBhc3NlcnQoc3RyZWFtLl9wZW5kaW5nQWJvcnRSZXF1ZXN0ID09PSB1bmRlZmluZWQpO1xuICBhc3NlcnQoc3RyZWFtLl9zdG9yZWRFcnJvciA9PT0gdW5kZWZpbmVkKTtcbn1cblxuZnVuY3Rpb24gV3JpdGFibGVTdHJlYW1GaW5pc2hJbkZsaWdodENsb3NlV2l0aEVycm9yKHN0cmVhbTogV3JpdGFibGVTdHJlYW0sIGVycm9yOiBhbnkpIHtcbiAgYXNzZXJ0KHN0cmVhbS5faW5GbGlnaHRDbG9zZVJlcXVlc3QgIT09IHVuZGVmaW5lZCk7XG4gIHN0cmVhbS5faW5GbGlnaHRDbG9zZVJlcXVlc3QhLl9yZWplY3QoZXJyb3IpO1xuICBzdHJlYW0uX2luRmxpZ2h0Q2xvc2VSZXF1ZXN0ID0gdW5kZWZpbmVkO1xuXG4gIGFzc2VydChzdHJlYW0uX3N0YXRlID09PSAnd3JpdGFibGUnIHx8IHN0cmVhbS5fc3RhdGUgPT09ICdlcnJvcmluZycpO1xuXG4gIC8vIE5ldmVyIGV4ZWN1dGUgc2luayBhYm9ydCgpIGFmdGVyIHNpbmsgY2xvc2UoKS5cbiAgaWYgKHN0cmVhbS5fcGVuZGluZ0Fib3J0UmVxdWVzdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgc3RyZWFtLl9wZW5kaW5nQWJvcnRSZXF1ZXN0Ll9yZWplY3QoZXJyb3IpO1xuICAgIHN0cmVhbS5fcGVuZGluZ0Fib3J0UmVxdWVzdCA9IHVuZGVmaW5lZDtcbiAgfVxuICBXcml0YWJsZVN0cmVhbURlYWxXaXRoUmVqZWN0aW9uKHN0cmVhbSwgZXJyb3IpO1xufVxuXG4vLyBUT0RPKHJpY2VhKTogRml4IGFscGhhYmV0aWNhbCBvcmRlci5cbmZ1bmN0aW9uIFdyaXRhYmxlU3RyZWFtQ2xvc2VRdWV1ZWRPckluRmxpZ2h0KHN0cmVhbTogV3JpdGFibGVTdHJlYW0pOiBib29sZWFuIHtcbiAgaWYgKHN0cmVhbS5fY2xvc2VSZXF1ZXN0ID09PSB1bmRlZmluZWQgJiYgc3RyZWFtLl9pbkZsaWdodENsb3NlUmVxdWVzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIFdyaXRhYmxlU3RyZWFtSGFzT3BlcmF0aW9uTWFya2VkSW5GbGlnaHQoc3RyZWFtOiBXcml0YWJsZVN0cmVhbSk6IGJvb2xlYW4ge1xuICBpZiAoc3RyZWFtLl9pbkZsaWdodFdyaXRlUmVxdWVzdCA9PT0gdW5kZWZpbmVkICYmIHN0cmVhbS5faW5GbGlnaHRDbG9zZVJlcXVlc3QgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBXcml0YWJsZVN0cmVhbU1hcmtDbG9zZVJlcXVlc3RJbkZsaWdodChzdHJlYW06IFdyaXRhYmxlU3RyZWFtKSB7XG4gIGFzc2VydChzdHJlYW0uX2luRmxpZ2h0Q2xvc2VSZXF1ZXN0ID09PSB1bmRlZmluZWQpO1xuICBhc3NlcnQoc3RyZWFtLl9jbG9zZVJlcXVlc3QgIT09IHVuZGVmaW5lZCk7XG4gIHN0cmVhbS5faW5GbGlnaHRDbG9zZVJlcXVlc3QgPSBzdHJlYW0uX2Nsb3NlUmVxdWVzdDtcbiAgc3RyZWFtLl9jbG9zZVJlcXVlc3QgPSB1bmRlZmluZWQ7XG59XG5cbmZ1bmN0aW9uIFdyaXRhYmxlU3RyZWFtTWFya0ZpcnN0V3JpdGVSZXF1ZXN0SW5GbGlnaHQoc3RyZWFtOiBXcml0YWJsZVN0cmVhbSkge1xuICBhc3NlcnQoc3RyZWFtLl9pbkZsaWdodFdyaXRlUmVxdWVzdCA9PT0gdW5kZWZpbmVkKTtcbiAgYXNzZXJ0KHN0cmVhbS5fd3JpdGVSZXF1ZXN0cy5sZW5ndGggIT09IDApO1xuICBzdHJlYW0uX2luRmxpZ2h0V3JpdGVSZXF1ZXN0ID0gc3RyZWFtLl93cml0ZVJlcXVlc3RzLnNoaWZ0KCk7XG59XG5cbmZ1bmN0aW9uIFdyaXRhYmxlU3RyZWFtUmVqZWN0Q2xvc2VBbmRDbG9zZWRQcm9taXNlSWZOZWVkZWQoc3RyZWFtOiBXcml0YWJsZVN0cmVhbSkge1xuICBhc3NlcnQoc3RyZWFtLl9zdGF0ZSA9PT0gJ2Vycm9yZWQnKTtcbiAgaWYgKHN0cmVhbS5fY2xvc2VSZXF1ZXN0ICE9PSB1bmRlZmluZWQpIHtcbiAgICBhc3NlcnQoc3RyZWFtLl9pbkZsaWdodENsb3NlUmVxdWVzdCA9PT0gdW5kZWZpbmVkKTtcblxuICAgIHN0cmVhbS5fY2xvc2VSZXF1ZXN0Ll9yZWplY3Qoc3RyZWFtLl9zdG9yZWRFcnJvcik7XG4gICAgc3RyZWFtLl9jbG9zZVJlcXVlc3QgPSB1bmRlZmluZWQ7XG4gIH1cbiAgY29uc3Qgd3JpdGVyID0gc3RyZWFtLl93cml0ZXI7XG4gIGlmICh3cml0ZXIgIT09IHVuZGVmaW5lZCkge1xuICAgIGRlZmF1bHRXcml0ZXJDbG9zZWRQcm9taXNlUmVqZWN0KHdyaXRlciwgc3RyZWFtLl9zdG9yZWRFcnJvcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gV3JpdGFibGVTdHJlYW1VcGRhdGVCYWNrcHJlc3N1cmUoc3RyZWFtOiBXcml0YWJsZVN0cmVhbSwgYmFja3ByZXNzdXJlOiBib29sZWFuKSB7XG4gIGFzc2VydChzdHJlYW0uX3N0YXRlID09PSAnd3JpdGFibGUnKTtcbiAgYXNzZXJ0KCFXcml0YWJsZVN0cmVhbUNsb3NlUXVldWVkT3JJbkZsaWdodChzdHJlYW0pKTtcblxuICBjb25zdCB3cml0ZXIgPSBzdHJlYW0uX3dyaXRlcjtcbiAgaWYgKHdyaXRlciAhPT0gdW5kZWZpbmVkICYmIGJhY2twcmVzc3VyZSAhPT0gc3RyZWFtLl9iYWNrcHJlc3N1cmUpIHtcbiAgICBpZiAoYmFja3ByZXNzdXJlKSB7XG4gICAgICBkZWZhdWx0V3JpdGVyUmVhZHlQcm9taXNlUmVzZXQod3JpdGVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXNzZXJ0KCFiYWNrcHJlc3N1cmUpO1xuXG4gICAgICBkZWZhdWx0V3JpdGVyUmVhZHlQcm9taXNlUmVzb2x2ZSh3cml0ZXIpO1xuICAgIH1cbiAgfVxuXG4gIHN0cmVhbS5fYmFja3ByZXNzdXJlID0gYmFja3ByZXNzdXJlO1xufVxuXG4vKipcbiAqIEEgZGVmYXVsdCB3cml0ZXIgdmVuZGVkIGJ5IGEge0BsaW5rIFdyaXRhYmxlU3RyZWFtfS5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBXcml0YWJsZVN0cmVhbURlZmF1bHRXcml0ZXI8VyA9IGFueT4ge1xuICAvKiogQGludGVybmFsICovXG4gIF9vd25lcldyaXRhYmxlU3RyZWFtOiBXcml0YWJsZVN0cmVhbTxXPjtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfY2xvc2VkUHJvbWlzZSE6IFByb21pc2U8dW5kZWZpbmVkPjtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfY2xvc2VkUHJvbWlzZV9yZXNvbHZlPzogKHZhbHVlPzogdW5kZWZpbmVkKSA9PiB2b2lkO1xuICAvKiogQGludGVybmFsICovXG4gIF9jbG9zZWRQcm9taXNlX3JlamVjdD86IChyZWFzb246IGFueSkgPT4gdm9pZDtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfY2xvc2VkUHJvbWlzZVN0YXRlITogJ3BlbmRpbmcnIHwgJ3Jlc29sdmVkJyB8ICdyZWplY3RlZCc7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX3JlYWR5UHJvbWlzZSE6IFByb21pc2U8dW5kZWZpbmVkPjtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfcmVhZHlQcm9taXNlX3Jlc29sdmU/OiAodmFsdWU/OiB1bmRlZmluZWQpID0+IHZvaWQ7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX3JlYWR5UHJvbWlzZV9yZWplY3Q/OiAocmVhc29uOiBhbnkpID0+IHZvaWQ7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX3JlYWR5UHJvbWlzZVN0YXRlITogJ3BlbmRpbmcnIHwgJ2Z1bGZpbGxlZCcgfCAncmVqZWN0ZWQnO1xuXG4gIGNvbnN0cnVjdG9yKHN0cmVhbTogV3JpdGFibGVTdHJlYW08Vz4pIHtcbiAgICBhc3NlcnRSZXF1aXJlZEFyZ3VtZW50KHN0cmVhbSwgMSwgJ1dyaXRhYmxlU3RyZWFtRGVmYXVsdFdyaXRlcicpO1xuICAgIGFzc2VydFdyaXRhYmxlU3RyZWFtKHN0cmVhbSwgJ0ZpcnN0IHBhcmFtZXRlcicpO1xuXG4gICAgaWYgKElzV3JpdGFibGVTdHJlYW1Mb2NrZWQoc3RyZWFtKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhpcyBzdHJlYW0gaGFzIGFscmVhZHkgYmVlbiBsb2NrZWQgZm9yIGV4Y2x1c2l2ZSB3cml0aW5nIGJ5IGFub3RoZXIgd3JpdGVyJyk7XG4gICAgfVxuXG4gICAgdGhpcy5fb3duZXJXcml0YWJsZVN0cmVhbSA9IHN0cmVhbTtcbiAgICBzdHJlYW0uX3dyaXRlciA9IHRoaXM7XG5cbiAgICBjb25zdCBzdGF0ZSA9IHN0cmVhbS5fc3RhdGU7XG5cbiAgICBpZiAoc3RhdGUgPT09ICd3cml0YWJsZScpIHtcbiAgICAgIGlmICghV3JpdGFibGVTdHJlYW1DbG9zZVF1ZXVlZE9ySW5GbGlnaHQoc3RyZWFtKSAmJiBzdHJlYW0uX2JhY2twcmVzc3VyZSkge1xuICAgICAgICBkZWZhdWx0V3JpdGVyUmVhZHlQcm9taXNlSW5pdGlhbGl6ZSh0aGlzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlZmF1bHRXcml0ZXJSZWFkeVByb21pc2VJbml0aWFsaXplQXNSZXNvbHZlZCh0aGlzKTtcbiAgICAgIH1cblxuICAgICAgZGVmYXVsdFdyaXRlckNsb3NlZFByb21pc2VJbml0aWFsaXplKHRoaXMpO1xuICAgIH0gZWxzZSBpZiAoc3RhdGUgPT09ICdlcnJvcmluZycpIHtcbiAgICAgIGRlZmF1bHRXcml0ZXJSZWFkeVByb21pc2VJbml0aWFsaXplQXNSZWplY3RlZCh0aGlzLCBzdHJlYW0uX3N0b3JlZEVycm9yKTtcbiAgICAgIGRlZmF1bHRXcml0ZXJDbG9zZWRQcm9taXNlSW5pdGlhbGl6ZSh0aGlzKTtcbiAgICB9IGVsc2UgaWYgKHN0YXRlID09PSAnY2xvc2VkJykge1xuICAgICAgZGVmYXVsdFdyaXRlclJlYWR5UHJvbWlzZUluaXRpYWxpemVBc1Jlc29sdmVkKHRoaXMpO1xuICAgICAgZGVmYXVsdFdyaXRlckNsb3NlZFByb21pc2VJbml0aWFsaXplQXNSZXNvbHZlZCh0aGlzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXNzZXJ0KHN0YXRlID09PSAnZXJyb3JlZCcpO1xuXG4gICAgICBjb25zdCBzdG9yZWRFcnJvciA9IHN0cmVhbS5fc3RvcmVkRXJyb3I7XG4gICAgICBkZWZhdWx0V3JpdGVyUmVhZHlQcm9taXNlSW5pdGlhbGl6ZUFzUmVqZWN0ZWQodGhpcywgc3RvcmVkRXJyb3IpO1xuICAgICAgZGVmYXVsdFdyaXRlckNsb3NlZFByb21pc2VJbml0aWFsaXplQXNSZWplY3RlZCh0aGlzLCBzdG9yZWRFcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBwcm9taXNlIHRoYXQgd2lsbCBiZSBmdWxmaWxsZWQgd2hlbiB0aGUgc3RyZWFtIGJlY29tZXMgY2xvc2VkLCBvciByZWplY3RlZCBpZiB0aGUgc3RyZWFtIGV2ZXIgZXJyb3JzIG9yXG4gICAqIHRoZSB3cml0ZXLigJlzIGxvY2sgaXMgcmVsZWFzZWQgYmVmb3JlIHRoZSBzdHJlYW0gZmluaXNoZXMgY2xvc2luZy5cbiAgICovXG4gIGdldCBjbG9zZWQoKTogUHJvbWlzZTx1bmRlZmluZWQ+IHtcbiAgICBpZiAoIUlzV3JpdGFibGVTdHJlYW1EZWZhdWx0V3JpdGVyKHRoaXMpKSB7XG4gICAgICByZXR1cm4gcHJvbWlzZVJlamVjdGVkV2l0aChkZWZhdWx0V3JpdGVyQnJhbmRDaGVja0V4Y2VwdGlvbignY2xvc2VkJykpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9jbG9zZWRQcm9taXNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGRlc2lyZWQgc2l6ZSB0byBmaWxsIHRoZSBzdHJlYW3igJlzIGludGVybmFsIHF1ZXVlLiBJdCBjYW4gYmUgbmVnYXRpdmUsIGlmIHRoZSBxdWV1ZSBpcyBvdmVyLWZ1bGwuXG4gICAqIEEgcHJvZHVjZXIgY2FuIHVzZSB0aGlzIGluZm9ybWF0aW9uIHRvIGRldGVybWluZSB0aGUgcmlnaHQgYW1vdW50IG9mIGRhdGEgdG8gd3JpdGUuXG4gICAqXG4gICAqIEl0IHdpbGwgYmUgYG51bGxgIGlmIHRoZSBzdHJlYW0gY2Fubm90IGJlIHN1Y2Nlc3NmdWxseSB3cml0dGVuIHRvIChkdWUgdG8gZWl0aGVyIGJlaW5nIGVycm9yZWQsIG9yIGhhdmluZyBhbiBhYm9ydFxuICAgKiBxdWV1ZWQgdXApLiBJdCB3aWxsIHJldHVybiB6ZXJvIGlmIHRoZSBzdHJlYW0gaXMgY2xvc2VkLiBBbmQgdGhlIGdldHRlciB3aWxsIHRocm93IGFuIGV4Y2VwdGlvbiBpZiBpbnZva2VkIHdoZW5cbiAgICogdGhlIHdyaXRlcuKAmXMgbG9jayBpcyByZWxlYXNlZC5cbiAgICovXG4gIGdldCBkZXNpcmVkU2l6ZSgpOiBudW1iZXIgfCBudWxsIHtcbiAgICBpZiAoIUlzV3JpdGFibGVTdHJlYW1EZWZhdWx0V3JpdGVyKHRoaXMpKSB7XG4gICAgICB0aHJvdyBkZWZhdWx0V3JpdGVyQnJhbmRDaGVja0V4Y2VwdGlvbignZGVzaXJlZFNpemUnKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fb3duZXJXcml0YWJsZVN0cmVhbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBkZWZhdWx0V3JpdGVyTG9ja0V4Y2VwdGlvbignZGVzaXJlZFNpemUnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gV3JpdGFibGVTdHJlYW1EZWZhdWx0V3JpdGVyR2V0RGVzaXJlZFNpemUodGhpcyk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHByb21pc2UgdGhhdCB3aWxsIGJlIGZ1bGZpbGxlZCB3aGVuIHRoZSBkZXNpcmVkIHNpemUgdG8gZmlsbCB0aGUgc3RyZWFt4oCZcyBpbnRlcm5hbCBxdWV1ZSB0cmFuc2l0aW9uc1xuICAgKiBmcm9tIG5vbi1wb3NpdGl2ZSB0byBwb3NpdGl2ZSwgc2lnbmFsaW5nIHRoYXQgaXQgaXMgbm8gbG9uZ2VyIGFwcGx5aW5nIGJhY2twcmVzc3VyZS4gT25jZSB0aGUgZGVzaXJlZCBzaXplIGRpcHNcbiAgICogYmFjayB0byB6ZXJvIG9yIGJlbG93LCB0aGUgZ2V0dGVyIHdpbGwgcmV0dXJuIGEgbmV3IHByb21pc2UgdGhhdCBzdGF5cyBwZW5kaW5nIHVudGlsIHRoZSBuZXh0IHRyYW5zaXRpb24uXG4gICAqXG4gICAqIElmIHRoZSBzdHJlYW0gYmVjb21lcyBlcnJvcmVkIG9yIGFib3J0ZWQsIG9yIHRoZSB3cml0ZXLigJlzIGxvY2sgaXMgcmVsZWFzZWQsIHRoZSByZXR1cm5lZCBwcm9taXNlIHdpbGwgYmVjb21lXG4gICAqIHJlamVjdGVkLlxuICAgKi9cbiAgZ2V0IHJlYWR5KCk6IFByb21pc2U8dW5kZWZpbmVkPiB7XG4gICAgaWYgKCFJc1dyaXRhYmxlU3RyZWFtRGVmYXVsdFdyaXRlcih0aGlzKSkge1xuICAgICAgcmV0dXJuIHByb21pc2VSZWplY3RlZFdpdGgoZGVmYXVsdFdyaXRlckJyYW5kQ2hlY2tFeGNlcHRpb24oJ3JlYWR5JykpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9yZWFkeVByb21pc2U7XG4gIH1cblxuICAvKipcbiAgICogSWYgdGhlIHJlYWRlciBpcyBhY3RpdmUsIGJlaGF2ZXMgdGhlIHNhbWUgYXMge0BsaW5rIFdyaXRhYmxlU3RyZWFtLmFib3J0IHwgc3RyZWFtLmFib3J0KHJlYXNvbil9LlxuICAgKi9cbiAgYWJvcnQocmVhc29uOiBhbnkgPSB1bmRlZmluZWQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIUlzV3JpdGFibGVTdHJlYW1EZWZhdWx0V3JpdGVyKHRoaXMpKSB7XG4gICAgICByZXR1cm4gcHJvbWlzZVJlamVjdGVkV2l0aChkZWZhdWx0V3JpdGVyQnJhbmRDaGVja0V4Y2VwdGlvbignYWJvcnQnKSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX293bmVyV3JpdGFibGVTdHJlYW0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHByb21pc2VSZWplY3RlZFdpdGgoZGVmYXVsdFdyaXRlckxvY2tFeGNlcHRpb24oJ2Fib3J0JykpO1xuICAgIH1cblxuICAgIHJldHVybiBXcml0YWJsZVN0cmVhbURlZmF1bHRXcml0ZXJBYm9ydCh0aGlzLCByZWFzb24pO1xuICB9XG5cbiAgLyoqXG4gICAqIElmIHRoZSByZWFkZXIgaXMgYWN0aXZlLCBiZWhhdmVzIHRoZSBzYW1lIGFzIHtAbGluayBXcml0YWJsZVN0cmVhbS5jbG9zZSB8IHN0cmVhbS5jbG9zZSgpfS5cbiAgICovXG4gIGNsb3NlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICghSXNXcml0YWJsZVN0cmVhbURlZmF1bHRXcml0ZXIodGhpcykpIHtcbiAgICAgIHJldHVybiBwcm9taXNlUmVqZWN0ZWRXaXRoKGRlZmF1bHRXcml0ZXJCcmFuZENoZWNrRXhjZXB0aW9uKCdjbG9zZScpKTtcbiAgICB9XG5cbiAgICBjb25zdCBzdHJlYW0gPSB0aGlzLl9vd25lcldyaXRhYmxlU3RyZWFtO1xuXG4gICAgaWYgKHN0cmVhbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gcHJvbWlzZVJlamVjdGVkV2l0aChkZWZhdWx0V3JpdGVyTG9ja0V4Y2VwdGlvbignY2xvc2UnKSk7XG4gICAgfVxuXG4gICAgaWYgKFdyaXRhYmxlU3RyZWFtQ2xvc2VRdWV1ZWRPckluRmxpZ2h0KHN0cmVhbSkpIHtcbiAgICAgIHJldHVybiBwcm9taXNlUmVqZWN0ZWRXaXRoKG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjbG9zZSBhbiBhbHJlYWR5LWNsb3Npbmcgc3RyZWFtJykpO1xuICAgIH1cblxuICAgIHJldHVybiBXcml0YWJsZVN0cmVhbURlZmF1bHRXcml0ZXJDbG9zZSh0aGlzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWxlYXNlcyB0aGUgd3JpdGVy4oCZcyBsb2NrIG9uIHRoZSBjb3JyZXNwb25kaW5nIHN0cmVhbS4gQWZ0ZXIgdGhlIGxvY2sgaXMgcmVsZWFzZWQsIHRoZSB3cml0ZXIgaXMgbm8gbG9uZ2VyIGFjdGl2ZS5cbiAgICogSWYgdGhlIGFzc29jaWF0ZWQgc3RyZWFtIGlzIGVycm9yZWQgd2hlbiB0aGUgbG9jayBpcyByZWxlYXNlZCwgdGhlIHdyaXRlciB3aWxsIGFwcGVhciBlcnJvcmVkIGluIHRoZSBzYW1lIHdheSBmcm9tXG4gICAqIG5vdyBvbjsgb3RoZXJ3aXNlLCB0aGUgd3JpdGVyIHdpbGwgYXBwZWFyIGNsb3NlZC5cbiAgICpcbiAgICogTm90ZSB0aGF0IHRoZSBsb2NrIGNhbiBzdGlsbCBiZSByZWxlYXNlZCBldmVuIGlmIHNvbWUgb25nb2luZyB3cml0ZXMgaGF2ZSBub3QgeWV0IGZpbmlzaGVkIChpLmUuIGV2ZW4gaWYgdGhlXG4gICAqIHByb21pc2VzIHJldHVybmVkIGZyb20gcHJldmlvdXMgY2FsbHMgdG8ge0BsaW5rIFdyaXRhYmxlU3RyZWFtRGVmYXVsdFdyaXRlci53cml0ZSB8IHdyaXRlKCl9IGhhdmUgbm90IHlldCBzZXR0bGVkKS5cbiAgICogSXTigJlzIG5vdCBuZWNlc3NhcnkgdG8gaG9sZCB0aGUgbG9jayBvbiB0aGUgd3JpdGVyIGZvciB0aGUgZHVyYXRpb24gb2YgdGhlIHdyaXRlOyB0aGUgbG9jayBpbnN0ZWFkIHNpbXBseSBwcmV2ZW50c1xuICAgKiBvdGhlciBwcm9kdWNlcnMgZnJvbSB3cml0aW5nIGluIGFuIGludGVybGVhdmVkIG1hbm5lci5cbiAgICovXG4gIHJlbGVhc2VMb2NrKCk6IHZvaWQge1xuICAgIGlmICghSXNXcml0YWJsZVN0cmVhbURlZmF1bHRXcml0ZXIodGhpcykpIHtcbiAgICAgIHRocm93IGRlZmF1bHRXcml0ZXJCcmFuZENoZWNrRXhjZXB0aW9uKCdyZWxlYXNlTG9jaycpO1xuICAgIH1cblxuICAgIGNvbnN0IHN0cmVhbSA9IHRoaXMuX293bmVyV3JpdGFibGVTdHJlYW07XG5cbiAgICBpZiAoc3RyZWFtID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBhc3NlcnQoc3RyZWFtLl93cml0ZXIgIT09IHVuZGVmaW5lZCk7XG5cbiAgICBXcml0YWJsZVN0cmVhbURlZmF1bHRXcml0ZXJSZWxlYXNlKHRoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFdyaXRlcyB0aGUgZ2l2ZW4gY2h1bmsgdG8gdGhlIHdyaXRhYmxlIHN0cmVhbSwgYnkgd2FpdGluZyB1bnRpbCBhbnkgcHJldmlvdXMgd3JpdGVzIGhhdmUgZmluaXNoZWQgc3VjY2Vzc2Z1bGx5LFxuICAgKiBhbmQgdGhlbiBzZW5kaW5nIHRoZSBjaHVuayB0byB0aGUgdW5kZXJseWluZyBzaW5rJ3Mge0BsaW5rIFVuZGVybHlpbmdTaW5rLndyaXRlIHwgd3JpdGUoKX0gbWV0aG9kLiBJdCB3aWxsIHJldHVyblxuICAgKiBhIHByb21pc2UgdGhhdCBmdWxmaWxscyB3aXRoIHVuZGVmaW5lZCB1cG9uIGEgc3VjY2Vzc2Z1bCB3cml0ZSwgb3IgcmVqZWN0cyBpZiB0aGUgd3JpdGUgZmFpbHMgb3Igc3RyZWFtIGJlY29tZXNcbiAgICogZXJyb3JlZCBiZWZvcmUgdGhlIHdyaXRpbmcgcHJvY2VzcyBpcyBpbml0aWF0ZWQuXG4gICAqXG4gICAqIE5vdGUgdGhhdCB3aGF0IFwic3VjY2Vzc1wiIG1lYW5zIGlzIHVwIHRvIHRoZSB1bmRlcmx5aW5nIHNpbms7IGl0IG1pZ2h0IGluZGljYXRlIHNpbXBseSB0aGF0IHRoZSBjaHVuayBoYXMgYmVlblxuICAgKiBhY2NlcHRlZCwgYW5kIG5vdCBuZWNlc3NhcmlseSB0aGF0IGl0IGlzIHNhZmVseSBzYXZlZCB0byBpdHMgdWx0aW1hdGUgZGVzdGluYXRpb24uXG4gICAqL1xuICB3cml0ZShjaHVuazogVyk6IFByb21pc2U8dm9pZD47XG4gIHdyaXRlKGNodW5rOiBXID0gdW5kZWZpbmVkISk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICghSXNXcml0YWJsZVN0cmVhbURlZmF1bHRXcml0ZXIodGhpcykpIHtcbiAgICAgIHJldHVybiBwcm9taXNlUmVqZWN0ZWRXaXRoKGRlZmF1bHRXcml0ZXJCcmFuZENoZWNrRXhjZXB0aW9uKCd3cml0ZScpKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fb3duZXJXcml0YWJsZVN0cmVhbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gcHJvbWlzZVJlamVjdGVkV2l0aChkZWZhdWx0V3JpdGVyTG9ja0V4Y2VwdGlvbignd3JpdGUgdG8nKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIFdyaXRhYmxlU3RyZWFtRGVmYXVsdFdyaXRlcldyaXRlKHRoaXMsIGNodW5rKTtcbiAgfVxufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhXcml0YWJsZVN0cmVhbURlZmF1bHRXcml0ZXIucHJvdG90eXBlLCB7XG4gIGFib3J0OiB7IGVudW1lcmFibGU6IHRydWUgfSxcbiAgY2xvc2U6IHsgZW51bWVyYWJsZTogdHJ1ZSB9LFxuICByZWxlYXNlTG9jazogeyBlbnVtZXJhYmxlOiB0cnVlIH0sXG4gIHdyaXRlOiB7IGVudW1lcmFibGU6IHRydWUgfSxcbiAgY2xvc2VkOiB7IGVudW1lcmFibGU6IHRydWUgfSxcbiAgZGVzaXJlZFNpemU6IHsgZW51bWVyYWJsZTogdHJ1ZSB9LFxuICByZWFkeTogeyBlbnVtZXJhYmxlOiB0cnVlIH1cbn0pO1xuc2V0RnVuY3Rpb25OYW1lKFdyaXRhYmxlU3RyZWFtRGVmYXVsdFdyaXRlci5wcm90b3R5cGUuYWJvcnQsICdhYm9ydCcpO1xuc2V0RnVuY3Rpb25OYW1lKFdyaXRhYmxlU3RyZWFtRGVmYXVsdFdyaXRlci5wcm90b3R5cGUuY2xvc2UsICdjbG9zZScpO1xuc2V0RnVuY3Rpb25OYW1lKFdyaXRhYmxlU3RyZWFtRGVmYXVsdFdyaXRlci5wcm90b3R5cGUucmVsZWFzZUxvY2ssICdyZWxlYXNlTG9jaycpO1xuc2V0RnVuY3Rpb25OYW1lKFdyaXRhYmxlU3RyZWFtRGVmYXVsdFdyaXRlci5wcm90b3R5cGUud3JpdGUsICd3cml0ZScpO1xuaWYgKHR5cGVvZiBTeW1ib2wudG9TdHJpbmdUYWcgPT09ICdzeW1ib2wnKSB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShXcml0YWJsZVN0cmVhbURlZmF1bHRXcml0ZXIucHJvdG90eXBlLCBTeW1ib2wudG9TdHJpbmdUYWcsIHtcbiAgICB2YWx1ZTogJ1dyaXRhYmxlU3RyZWFtRGVmYXVsdFdyaXRlcicsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlXG4gIH0pO1xufVxuXG4vLyBBYnN0cmFjdCBvcGVyYXRpb25zIGZvciB0aGUgV3JpdGFibGVTdHJlYW1EZWZhdWx0V3JpdGVyLlxuXG5mdW5jdGlvbiBJc1dyaXRhYmxlU3RyZWFtRGVmYXVsdFdyaXRlcjxXID0gYW55Pih4OiBhbnkpOiB4IGlzIFdyaXRhYmxlU3RyZWFtRGVmYXVsdFdyaXRlcjxXPiB7XG4gIGlmICghdHlwZUlzT2JqZWN0KHgpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoeCwgJ19vd25lcldyaXRhYmxlU3RyZWFtJykpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZXR1cm4geCBpbnN0YW5jZW9mIFdyaXRhYmxlU3RyZWFtRGVmYXVsdFdyaXRlcjtcbn1cblxuLy8gQSBjbGllbnQgb2YgV3JpdGFibGVTdHJlYW1EZWZhdWx0V3JpdGVyIG1heSB1c2UgdGhlc2UgZnVuY3Rpb25zIGRpcmVjdGx5IHRvIGJ5cGFzcyBzdGF0ZSBjaGVjay5cblxuZnVuY3Rpb24gV3JpdGFibGVTdHJlYW1EZWZhdWx0V3JpdGVyQWJvcnQod3JpdGVyOiBXcml0YWJsZVN0cmVhbURlZmF1bHRXcml0ZXIsIHJlYXNvbjogYW55KSB7XG4gIGNvbnN0IHN0cmVhbSA9IHdyaXRlci5fb3duZXJXcml0YWJsZVN0cmVhbTtcblxuICBhc3NlcnQoc3RyZWFtICE9PSB1bmRlZmluZWQpO1xuXG4gIHJldHVybiBXcml0YWJsZVN0cmVhbUFib3J0KHN0cmVhbSwgcmVhc29uKTtcbn1cblxuZnVuY3Rpb24gV3JpdGFibGVTdHJlYW1EZWZhdWx0V3JpdGVyQ2xvc2Uod3JpdGVyOiBXcml0YWJsZVN0cmVhbURlZmF1bHRXcml0ZXIpOiBQcm9taXNlPHVuZGVmaW5lZD4ge1xuICBjb25zdCBzdHJlYW0gPSB3cml0ZXIuX293bmVyV3JpdGFibGVTdHJlYW07XG5cbiAgYXNzZXJ0KHN0cmVhbSAhPT0gdW5kZWZpbmVkKTtcblxuICByZXR1cm4gV3JpdGFibGVTdHJlYW1DbG9zZShzdHJlYW0pO1xufVxuXG5mdW5jdGlvbiBXcml0YWJsZVN0cmVhbURlZmF1bHRXcml0ZXJDbG9zZVdpdGhFcnJvclByb3BhZ2F0aW9uKHdyaXRlcjogV3JpdGFibGVTdHJlYW1EZWZhdWx0V3JpdGVyKTogUHJvbWlzZTx1bmRlZmluZWQ+IHtcbiAgY29uc3Qgc3RyZWFtID0gd3JpdGVyLl9vd25lcldyaXRhYmxlU3RyZWFtO1xuXG4gIGFzc2VydChzdHJlYW0gIT09IHVuZGVmaW5lZCk7XG5cbiAgY29uc3Qgc3RhdGUgPSBzdHJlYW0uX3N0YXRlO1xuICBpZiAoV3JpdGFibGVTdHJlYW1DbG9zZVF1ZXVlZE9ySW5GbGlnaHQoc3RyZWFtKSB8fCBzdGF0ZSA9PT0gJ2Nsb3NlZCcpIHtcbiAgICByZXR1cm4gcHJvbWlzZVJlc29sdmVkV2l0aCh1bmRlZmluZWQpO1xuICB9XG5cbiAgaWYgKHN0YXRlID09PSAnZXJyb3JlZCcpIHtcbiAgICByZXR1cm4gcHJvbWlzZVJlamVjdGVkV2l0aChzdHJlYW0uX3N0b3JlZEVycm9yKTtcbiAgfVxuXG4gIGFzc2VydChzdGF0ZSA9PT0gJ3dyaXRhYmxlJyB8fCBzdGF0ZSA9PT0gJ2Vycm9yaW5nJyk7XG5cbiAgcmV0dXJuIFdyaXRhYmxlU3RyZWFtRGVmYXVsdFdyaXRlckNsb3NlKHdyaXRlcik7XG59XG5cbmZ1bmN0aW9uIFdyaXRhYmxlU3RyZWFtRGVmYXVsdFdyaXRlckVuc3VyZUNsb3NlZFByb21pc2VSZWplY3RlZCh3cml0ZXI6IFdyaXRhYmxlU3RyZWFtRGVmYXVsdFdyaXRlciwgZXJyb3I6IGFueSkge1xuICBpZiAod3JpdGVyLl9jbG9zZWRQcm9taXNlU3RhdGUgPT09ICdwZW5kaW5nJykge1xuICAgIGRlZmF1bHRXcml0ZXJDbG9zZWRQcm9taXNlUmVqZWN0KHdyaXRlciwgZXJyb3IpO1xuICB9IGVsc2Uge1xuICAgIGRlZmF1bHRXcml0ZXJDbG9zZWRQcm9taXNlUmVzZXRUb1JlamVjdGVkKHdyaXRlciwgZXJyb3IpO1xuICB9XG59XG5cbmZ1bmN0aW9uIFdyaXRhYmxlU3RyZWFtRGVmYXVsdFdyaXRlckVuc3VyZVJlYWR5UHJvbWlzZVJlamVjdGVkKHdyaXRlcjogV3JpdGFibGVTdHJlYW1EZWZhdWx0V3JpdGVyLCBlcnJvcjogYW55KSB7XG4gIGlmICh3cml0ZXIuX3JlYWR5UHJvbWlzZVN0YXRlID09PSAncGVuZGluZycpIHtcbiAgICBkZWZhdWx0V3JpdGVyUmVhZHlQcm9taXNlUmVqZWN0KHdyaXRlciwgZXJyb3IpO1xuICB9IGVsc2Uge1xuICAgIGRlZmF1bHRXcml0ZXJSZWFkeVByb21pc2VSZXNldFRvUmVqZWN0ZWQod3JpdGVyLCBlcnJvcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gV3JpdGFibGVTdHJlYW1EZWZhdWx0V3JpdGVyR2V0RGVzaXJlZFNpemUod3JpdGVyOiBXcml0YWJsZVN0cmVhbURlZmF1bHRXcml0ZXIpOiBudW1iZXIgfCBudWxsIHtcbiAgY29uc3Qgc3RyZWFtID0gd3JpdGVyLl9vd25lcldyaXRhYmxlU3RyZWFtO1xuICBjb25zdCBzdGF0ZSA9IHN0cmVhbS5fc3RhdGU7XG5cbiAgaWYgKHN0YXRlID09PSAnZXJyb3JlZCcgfHwgc3RhdGUgPT09ICdlcnJvcmluZycpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGlmIChzdGF0ZSA9PT0gJ2Nsb3NlZCcpIHtcbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIHJldHVybiBXcml0YWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyR2V0RGVzaXJlZFNpemUoc3RyZWFtLl93cml0YWJsZVN0cmVhbUNvbnRyb2xsZXIpO1xufVxuXG5mdW5jdGlvbiBXcml0YWJsZVN0cmVhbURlZmF1bHRXcml0ZXJSZWxlYXNlKHdyaXRlcjogV3JpdGFibGVTdHJlYW1EZWZhdWx0V3JpdGVyKSB7XG4gIGNvbnN0IHN0cmVhbSA9IHdyaXRlci5fb3duZXJXcml0YWJsZVN0cmVhbTtcbiAgYXNzZXJ0KHN0cmVhbSAhPT0gdW5kZWZpbmVkKTtcbiAgYXNzZXJ0KHN0cmVhbS5fd3JpdGVyID09PSB3cml0ZXIpO1xuXG4gIGNvbnN0IHJlbGVhc2VkRXJyb3IgPSBuZXcgVHlwZUVycm9yKFxuICAgIGBXcml0ZXIgd2FzIHJlbGVhc2VkIGFuZCBjYW4gbm8gbG9uZ2VyIGJlIHVzZWQgdG8gbW9uaXRvciB0aGUgc3RyZWFtJ3MgY2xvc2VkbmVzc2ApO1xuXG4gIFdyaXRhYmxlU3RyZWFtRGVmYXVsdFdyaXRlckVuc3VyZVJlYWR5UHJvbWlzZVJlamVjdGVkKHdyaXRlciwgcmVsZWFzZWRFcnJvcik7XG5cbiAgLy8gVGhlIHN0YXRlIHRyYW5zaXRpb25zIHRvIFwiZXJyb3JlZFwiIGJlZm9yZSB0aGUgc2luayBhYm9ydCgpIG1ldGhvZCBydW5zLCBidXQgdGhlIHdyaXRlci5jbG9zZWQgcHJvbWlzZSBpcyBub3RcbiAgLy8gcmVqZWN0ZWQgdW50aWwgYWZ0ZXJ3YXJkcy4gVGhpcyBtZWFucyB0aGF0IHNpbXBseSB0ZXN0aW5nIHN0YXRlIHdpbGwgbm90IHdvcmsuXG4gIFdyaXRhYmxlU3RyZWFtRGVmYXVsdFdyaXRlckVuc3VyZUNsb3NlZFByb21pc2VSZWplY3RlZCh3cml0ZXIsIHJlbGVhc2VkRXJyb3IpO1xuXG4gIHN0cmVhbS5fd3JpdGVyID0gdW5kZWZpbmVkO1xuICB3cml0ZXIuX293bmVyV3JpdGFibGVTdHJlYW0gPSB1bmRlZmluZWQhO1xufVxuXG5mdW5jdGlvbiBXcml0YWJsZVN0cmVhbURlZmF1bHRXcml0ZXJXcml0ZTxXPih3cml0ZXI6IFdyaXRhYmxlU3RyZWFtRGVmYXVsdFdyaXRlcjxXPiwgY2h1bms6IFcpOiBQcm9taXNlPHVuZGVmaW5lZD4ge1xuICBjb25zdCBzdHJlYW0gPSB3cml0ZXIuX293bmVyV3JpdGFibGVTdHJlYW07XG5cbiAgYXNzZXJ0KHN0cmVhbSAhPT0gdW5kZWZpbmVkKTtcblxuICBjb25zdCBjb250cm9sbGVyID0gc3RyZWFtLl93cml0YWJsZVN0cmVhbUNvbnRyb2xsZXI7XG5cbiAgY29uc3QgY2h1bmtTaXplID0gV3JpdGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlckdldENodW5rU2l6ZShjb250cm9sbGVyLCBjaHVuayk7XG5cbiAgaWYgKHN0cmVhbSAhPT0gd3JpdGVyLl9vd25lcldyaXRhYmxlU3RyZWFtKSB7XG4gICAgcmV0dXJuIHByb21pc2VSZWplY3RlZFdpdGgoZGVmYXVsdFdyaXRlckxvY2tFeGNlcHRpb24oJ3dyaXRlIHRvJykpO1xuICB9XG5cbiAgY29uc3Qgc3RhdGUgPSBzdHJlYW0uX3N0YXRlO1xuICBpZiAoc3RhdGUgPT09ICdlcnJvcmVkJykge1xuICAgIHJldHVybiBwcm9taXNlUmVqZWN0ZWRXaXRoKHN0cmVhbS5fc3RvcmVkRXJyb3IpO1xuICB9XG4gIGlmIChXcml0YWJsZVN0cmVhbUNsb3NlUXVldWVkT3JJbkZsaWdodChzdHJlYW0pIHx8IHN0YXRlID09PSAnY2xvc2VkJykge1xuICAgIHJldHVybiBwcm9taXNlUmVqZWN0ZWRXaXRoKG5ldyBUeXBlRXJyb3IoJ1RoZSBzdHJlYW0gaXMgY2xvc2luZyBvciBjbG9zZWQgYW5kIGNhbm5vdCBiZSB3cml0dGVuIHRvJykpO1xuICB9XG4gIGlmIChzdGF0ZSA9PT0gJ2Vycm9yaW5nJykge1xuICAgIHJldHVybiBwcm9taXNlUmVqZWN0ZWRXaXRoKHN0cmVhbS5fc3RvcmVkRXJyb3IpO1xuICB9XG5cbiAgYXNzZXJ0KHN0YXRlID09PSAnd3JpdGFibGUnKTtcblxuICBjb25zdCBwcm9taXNlID0gV3JpdGFibGVTdHJlYW1BZGRXcml0ZVJlcXVlc3Qoc3RyZWFtKTtcblxuICBXcml0YWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyV3JpdGUoY29udHJvbGxlciwgY2h1bmssIGNodW5rU2l6ZSk7XG5cbiAgcmV0dXJuIHByb21pc2U7XG59XG5cbmNvbnN0IGNsb3NlU2VudGluZWw6IHVuaXF1ZSBzeW1ib2wgPSB7fSBhcyBhbnk7XG5cbnR5cGUgUXVldWVSZWNvcmQ8Vz4gPSBXIHwgdHlwZW9mIGNsb3NlU2VudGluZWw7XG5cbi8qKlxuICogQWxsb3dzIGNvbnRyb2wgb2YgYSB7QGxpbmsgV3JpdGFibGVTdHJlYW0gfCB3cml0YWJsZSBzdHJlYW19J3Mgc3RhdGUgYW5kIGludGVybmFsIHF1ZXVlLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIFdyaXRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXI8VyA9IGFueT4ge1xuICAvKiogQGludGVybmFsICovXG4gIF9jb250cm9sbGVkV3JpdGFibGVTdHJlYW0hOiBXcml0YWJsZVN0cmVhbTxXPjtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfcXVldWUhOiBTaW1wbGVRdWV1ZTxRdWV1ZVBhaXI8UXVldWVSZWNvcmQ8Vz4+PjtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfcXVldWVUb3RhbFNpemUhOiBudW1iZXI7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX2Fib3J0UmVhc29uOiBhbnk7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX2Fib3J0Q29udHJvbGxlcjogQWJvcnRDb250cm9sbGVyIHwgdW5kZWZpbmVkO1xuICAvKiogQGludGVybmFsICovXG4gIF9zdGFydGVkITogYm9vbGVhbjtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfc3RyYXRlZ3lTaXplQWxnb3JpdGhtITogUXVldWluZ1N0cmF0ZWd5U2l6ZUNhbGxiYWNrPFc+O1xuICAvKiogQGludGVybmFsICovXG4gIF9zdHJhdGVneUhXTSE6IG51bWJlcjtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfd3JpdGVBbGdvcml0aG0hOiAoY2h1bms6IFcpID0+IFByb21pc2U8dm9pZD47XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX2Nsb3NlQWxnb3JpdGhtITogKCkgPT4gUHJvbWlzZTx2b2lkPjtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfYWJvcnRBbGdvcml0aG0hOiAocmVhc29uOiBhbnkpID0+IFByb21pc2U8dm9pZD47XG5cbiAgcHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbGxlZ2FsIGNvbnN0cnVjdG9yJyk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHJlYXNvbiB3aGljaCB3YXMgcGFzc2VkIHRvIGBXcml0YWJsZVN0cmVhbS5hYm9ydChyZWFzb24pYCB3aGVuIHRoZSBzdHJlYW0gd2FzIGFib3J0ZWQuXG4gICAqXG4gICAqIEBkZXByZWNhdGVkXG4gICAqICBUaGlzIHByb3BlcnR5IGhhcyBiZWVuIHJlbW92ZWQgZnJvbSB0aGUgc3BlY2lmaWNhdGlvbiwgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS93aGF0d2cvc3RyZWFtcy9wdWxsLzExNzcuXG4gICAqICBVc2Uge0BsaW5rIFdyaXRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXIuc2lnbmFsfSdzIGByZWFzb25gIGluc3RlYWQuXG4gICAqL1xuICBnZXQgYWJvcnRSZWFzb24oKTogYW55IHtcbiAgICBpZiAoIUlzV3JpdGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlcih0aGlzKSkge1xuICAgICAgdGhyb3cgZGVmYXVsdENvbnRyb2xsZXJCcmFuZENoZWNrRXhjZXB0aW9uKCdhYm9ydFJlYXNvbicpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fYWJvcnRSZWFzb247XG4gIH1cblxuICAvKipcbiAgICogQW4gYEFib3J0U2lnbmFsYCB0aGF0IGNhbiBiZSB1c2VkIHRvIGFib3J0IHRoZSBwZW5kaW5nIHdyaXRlIG9yIGNsb3NlIG9wZXJhdGlvbiB3aGVuIHRoZSBzdHJlYW0gaXMgYWJvcnRlZC5cbiAgICovXG4gIGdldCBzaWduYWwoKTogQWJvcnRTaWduYWwge1xuICAgIGlmICghSXNXcml0YWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyKHRoaXMpKSB7XG4gICAgICB0aHJvdyBkZWZhdWx0Q29udHJvbGxlckJyYW5kQ2hlY2tFeGNlcHRpb24oJ3NpZ25hbCcpO1xuICAgIH1cbiAgICBpZiAodGhpcy5fYWJvcnRDb250cm9sbGVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIE9sZGVyIGJyb3dzZXJzIG9yIG9sZGVyIE5vZGUgdmVyc2lvbnMgbWF5IG5vdCBzdXBwb3J0IGBBYm9ydENvbnRyb2xsZXJgIG9yIGBBYm9ydFNpZ25hbGAuXG4gICAgICAvLyBXZSBkb24ndCB3YW50IHRvIGJ1bmRsZSBhbmQgc2hpcCBhbiBgQWJvcnRDb250cm9sbGVyYCBwb2x5ZmlsbCB0b2dldGhlciB3aXRoIG91ciBwb2x5ZmlsbCxcbiAgICAgIC8vIHNvIGluc3RlYWQgd2Ugb25seSBpbXBsZW1lbnQgc3VwcG9ydCBmb3IgYHNpZ25hbGAgaWYgd2UgZmluZCBhIGdsb2JhbCBgQWJvcnRDb250cm9sbGVyYCBjb25zdHJ1Y3Rvci5cbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1dyaXRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXIucHJvdG90eXBlLnNpZ25hbCBpcyBub3Qgc3VwcG9ydGVkJyk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9hYm9ydENvbnRyb2xsZXIuc2lnbmFsO1xuICB9XG5cbiAgLyoqXG4gICAqIENsb3NlcyB0aGUgY29udHJvbGxlZCB3cml0YWJsZSBzdHJlYW0sIG1ha2luZyBhbGwgZnV0dXJlIGludGVyYWN0aW9ucyB3aXRoIGl0IGZhaWwgd2l0aCB0aGUgZ2l2ZW4gZXJyb3IgYGVgLlxuICAgKlxuICAgKiBUaGlzIG1ldGhvZCBpcyByYXJlbHkgdXNlZCwgc2luY2UgdXN1YWxseSBpdCBzdWZmaWNlcyB0byByZXR1cm4gYSByZWplY3RlZCBwcm9taXNlIGZyb20gb25lIG9mIHRoZSB1bmRlcmx5aW5nXG4gICAqIHNpbmsncyBtZXRob2RzLiBIb3dldmVyLCBpdCBjYW4gYmUgdXNlZnVsIGZvciBzdWRkZW5seSBzaHV0dGluZyBkb3duIGEgc3RyZWFtIGluIHJlc3BvbnNlIHRvIGFuIGV2ZW50IG91dHNpZGUgdGhlXG4gICAqIG5vcm1hbCBsaWZlY3ljbGUgb2YgaW50ZXJhY3Rpb25zIHdpdGggdGhlIHVuZGVybHlpbmcgc2luay5cbiAgICovXG4gIGVycm9yKGU6IGFueSA9IHVuZGVmaW5lZCk6IHZvaWQge1xuICAgIGlmICghSXNXcml0YWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyKHRoaXMpKSB7XG4gICAgICB0aHJvdyBkZWZhdWx0Q29udHJvbGxlckJyYW5kQ2hlY2tFeGNlcHRpb24oJ2Vycm9yJyk7XG4gICAgfVxuICAgIGNvbnN0IHN0YXRlID0gdGhpcy5fY29udHJvbGxlZFdyaXRhYmxlU3RyZWFtLl9zdGF0ZTtcbiAgICBpZiAoc3RhdGUgIT09ICd3cml0YWJsZScpIHtcbiAgICAgIC8vIFRoZSBzdHJlYW0gaXMgY2xvc2VkLCBlcnJvcmVkIG9yIHdpbGwgYmUgc29vbi4gVGhlIHNpbmsgY2FuJ3QgZG8gYW55dGhpbmcgdXNlZnVsIGlmIGl0IGdldHMgYW4gZXJyb3IgaGVyZSwgc29cbiAgICAgIC8vIGp1c3QgdHJlYXQgaXQgYXMgYSBuby1vcC5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBXcml0YWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyRXJyb3IodGhpcywgZSk7XG4gIH1cblxuICAvKiogQGludGVybmFsICovXG4gIFtBYm9ydFN0ZXBzXShyZWFzb246IGFueSk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX2Fib3J0QWxnb3JpdGhtKHJlYXNvbik7XG4gICAgV3JpdGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlckNsZWFyQWxnb3JpdGhtcyh0aGlzKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBbRXJyb3JTdGVwc10oKSB7XG4gICAgUmVzZXRRdWV1ZSh0aGlzKTtcbiAgfVxufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhXcml0YWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyLnByb3RvdHlwZSwge1xuICBhYm9ydFJlYXNvbjogeyBlbnVtZXJhYmxlOiB0cnVlIH0sXG4gIHNpZ25hbDogeyBlbnVtZXJhYmxlOiB0cnVlIH0sXG4gIGVycm9yOiB7IGVudW1lcmFibGU6IHRydWUgfVxufSk7XG5pZiAodHlwZW9mIFN5bWJvbC50b1N0cmluZ1RhZyA9PT0gJ3N5bWJvbCcpIHtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFdyaXRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXIucHJvdG90eXBlLCBTeW1ib2wudG9TdHJpbmdUYWcsIHtcbiAgICB2YWx1ZTogJ1dyaXRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXInLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICB9KTtcbn1cblxuLy8gQWJzdHJhY3Qgb3BlcmF0aW9ucyBpbXBsZW1lbnRpbmcgaW50ZXJmYWNlIHJlcXVpcmVkIGJ5IHRoZSBXcml0YWJsZVN0cmVhbS5cblxuZnVuY3Rpb24gSXNXcml0YWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyKHg6IGFueSk6IHggaXMgV3JpdGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlcjxhbnk+IHtcbiAgaWYgKCF0eXBlSXNPYmplY3QoeCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh4LCAnX2NvbnRyb2xsZWRXcml0YWJsZVN0cmVhbScpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIHggaW5zdGFuY2VvZiBXcml0YWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyO1xufVxuXG5mdW5jdGlvbiBTZXRVcFdyaXRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXI8Vz4oc3RyZWFtOiBXcml0YWJsZVN0cmVhbTxXPixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiBXcml0YWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyPFc+LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0QWxnb3JpdGhtOiAoKSA9PiB2b2lkIHwgUHJvbWlzZUxpa2U8dm9pZD4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVBbGdvcml0aG06IChjaHVuazogVykgPT4gUHJvbWlzZTx2b2lkPixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9zZUFsZ29yaXRobTogKCkgPT4gUHJvbWlzZTx2b2lkPixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhYm9ydEFsZ29yaXRobTogKHJlYXNvbjogYW55KSA9PiBQcm9taXNlPHZvaWQ+LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZ2hXYXRlck1hcms6IG51bWJlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplQWxnb3JpdGhtOiBRdWV1aW5nU3RyYXRlZ3lTaXplQ2FsbGJhY2s8Vz4pIHtcbiAgYXNzZXJ0KElzV3JpdGFibGVTdHJlYW0oc3RyZWFtKSk7XG4gIGFzc2VydChzdHJlYW0uX3dyaXRhYmxlU3RyZWFtQ29udHJvbGxlciA9PT0gdW5kZWZpbmVkKTtcblxuICBjb250cm9sbGVyLl9jb250cm9sbGVkV3JpdGFibGVTdHJlYW0gPSBzdHJlYW07XG4gIHN0cmVhbS5fd3JpdGFibGVTdHJlYW1Db250cm9sbGVyID0gY29udHJvbGxlcjtcblxuICAvLyBOZWVkIHRvIHNldCB0aGUgc2xvdHMgc28gdGhhdCB0aGUgYXNzZXJ0IGRvZXNuJ3QgZmlyZS4gSW4gdGhlIHNwZWMgdGhlIHNsb3RzIGFscmVhZHkgZXhpc3QgaW1wbGljaXRseS5cbiAgY29udHJvbGxlci5fcXVldWUgPSB1bmRlZmluZWQhO1xuICBjb250cm9sbGVyLl9xdWV1ZVRvdGFsU2l6ZSA9IHVuZGVmaW5lZCE7XG4gIFJlc2V0UXVldWUoY29udHJvbGxlcik7XG5cbiAgY29udHJvbGxlci5fYWJvcnRSZWFzb24gPSB1bmRlZmluZWQ7XG4gIGNvbnRyb2xsZXIuX2Fib3J0Q29udHJvbGxlciA9IGNyZWF0ZUFib3J0Q29udHJvbGxlcigpO1xuICBjb250cm9sbGVyLl9zdGFydGVkID0gZmFsc2U7XG5cbiAgY29udHJvbGxlci5fc3RyYXRlZ3lTaXplQWxnb3JpdGhtID0gc2l6ZUFsZ29yaXRobTtcbiAgY29udHJvbGxlci5fc3RyYXRlZ3lIV00gPSBoaWdoV2F0ZXJNYXJrO1xuXG4gIGNvbnRyb2xsZXIuX3dyaXRlQWxnb3JpdGhtID0gd3JpdGVBbGdvcml0aG07XG4gIGNvbnRyb2xsZXIuX2Nsb3NlQWxnb3JpdGhtID0gY2xvc2VBbGdvcml0aG07XG4gIGNvbnRyb2xsZXIuX2Fib3J0QWxnb3JpdGhtID0gYWJvcnRBbGdvcml0aG07XG5cbiAgY29uc3QgYmFja3ByZXNzdXJlID0gV3JpdGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlckdldEJhY2twcmVzc3VyZShjb250cm9sbGVyKTtcbiAgV3JpdGFibGVTdHJlYW1VcGRhdGVCYWNrcHJlc3N1cmUoc3RyZWFtLCBiYWNrcHJlc3N1cmUpO1xuXG4gIGNvbnN0IHN0YXJ0UmVzdWx0ID0gc3RhcnRBbGdvcml0aG0oKTtcbiAgY29uc3Qgc3RhcnRQcm9taXNlID0gcHJvbWlzZVJlc29sdmVkV2l0aChzdGFydFJlc3VsdCk7XG4gIHVwb25Qcm9taXNlKFxuICAgIHN0YXJ0UHJvbWlzZSxcbiAgICAoKSA9PiB7XG4gICAgICBhc3NlcnQoc3RyZWFtLl9zdGF0ZSA9PT0gJ3dyaXRhYmxlJyB8fCBzdHJlYW0uX3N0YXRlID09PSAnZXJyb3JpbmcnKTtcbiAgICAgIGNvbnRyb2xsZXIuX3N0YXJ0ZWQgPSB0cnVlO1xuICAgICAgV3JpdGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlckFkdmFuY2VRdWV1ZUlmTmVlZGVkKGNvbnRyb2xsZXIpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSxcbiAgICByID0+IHtcbiAgICAgIGFzc2VydChzdHJlYW0uX3N0YXRlID09PSAnd3JpdGFibGUnIHx8IHN0cmVhbS5fc3RhdGUgPT09ICdlcnJvcmluZycpO1xuICAgICAgY29udHJvbGxlci5fc3RhcnRlZCA9IHRydWU7XG4gICAgICBXcml0YWJsZVN0cmVhbURlYWxXaXRoUmVqZWN0aW9uKHN0cmVhbSwgcik7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICk7XG59XG5cbmZ1bmN0aW9uIFNldFVwV3JpdGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlckZyb21VbmRlcmx5aW5nU2luazxXPihzdHJlYW06IFdyaXRhYmxlU3RyZWFtPFc+LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZGVybHlpbmdTaW5rOiBWYWxpZGF0ZWRVbmRlcmx5aW5nU2luazxXPixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWdoV2F0ZXJNYXJrOiBudW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZUFsZ29yaXRobTogUXVldWluZ1N0cmF0ZWd5U2l6ZUNhbGxiYWNrPFc+KSB7XG4gIGNvbnN0IGNvbnRyb2xsZXIgPSBPYmplY3QuY3JlYXRlKFdyaXRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXIucHJvdG90eXBlKTtcblxuICBsZXQgc3RhcnRBbGdvcml0aG06ICgpID0+IHZvaWQgfCBQcm9taXNlTGlrZTx2b2lkPjtcbiAgbGV0IHdyaXRlQWxnb3JpdGhtOiAoY2h1bms6IFcpID0+IFByb21pc2U8dm9pZD47XG4gIGxldCBjbG9zZUFsZ29yaXRobTogKCkgPT4gUHJvbWlzZTx2b2lkPjtcbiAgbGV0IGFib3J0QWxnb3JpdGhtOiAocmVhc29uOiBhbnkpID0+IFByb21pc2U8dm9pZD47XG5cbiAgaWYgKHVuZGVybHlpbmdTaW5rLnN0YXJ0ICE9PSB1bmRlZmluZWQpIHtcbiAgICBzdGFydEFsZ29yaXRobSA9ICgpID0+IHVuZGVybHlpbmdTaW5rLnN0YXJ0IShjb250cm9sbGVyKTtcbiAgfSBlbHNlIHtcbiAgICBzdGFydEFsZ29yaXRobSA9ICgpID0+IHVuZGVmaW5lZDtcbiAgfVxuICBpZiAodW5kZXJseWluZ1Npbmsud3JpdGUgIT09IHVuZGVmaW5lZCkge1xuICAgIHdyaXRlQWxnb3JpdGhtID0gY2h1bmsgPT4gdW5kZXJseWluZ1Npbmsud3JpdGUhKGNodW5rLCBjb250cm9sbGVyKTtcbiAgfSBlbHNlIHtcbiAgICB3cml0ZUFsZ29yaXRobSA9ICgpID0+IHByb21pc2VSZXNvbHZlZFdpdGgodW5kZWZpbmVkKTtcbiAgfVxuICBpZiAodW5kZXJseWluZ1NpbmsuY2xvc2UgIT09IHVuZGVmaW5lZCkge1xuICAgIGNsb3NlQWxnb3JpdGhtID0gKCkgPT4gdW5kZXJseWluZ1NpbmsuY2xvc2UhKCk7XG4gIH0gZWxzZSB7XG4gICAgY2xvc2VBbGdvcml0aG0gPSAoKSA9PiBwcm9taXNlUmVzb2x2ZWRXaXRoKHVuZGVmaW5lZCk7XG4gIH1cbiAgaWYgKHVuZGVybHlpbmdTaW5rLmFib3J0ICE9PSB1bmRlZmluZWQpIHtcbiAgICBhYm9ydEFsZ29yaXRobSA9IHJlYXNvbiA9PiB1bmRlcmx5aW5nU2luay5hYm9ydCEocmVhc29uKTtcbiAgfSBlbHNlIHtcbiAgICBhYm9ydEFsZ29yaXRobSA9ICgpID0+IHByb21pc2VSZXNvbHZlZFdpdGgodW5kZWZpbmVkKTtcbiAgfVxuXG4gIFNldFVwV3JpdGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlcihcbiAgICBzdHJlYW0sIGNvbnRyb2xsZXIsIHN0YXJ0QWxnb3JpdGhtLCB3cml0ZUFsZ29yaXRobSwgY2xvc2VBbGdvcml0aG0sIGFib3J0QWxnb3JpdGhtLCBoaWdoV2F0ZXJNYXJrLCBzaXplQWxnb3JpdGhtXG4gICk7XG59XG5cbi8vIENsZWFyQWxnb3JpdGhtcyBtYXkgYmUgY2FsbGVkIHR3aWNlLiBFcnJvcmluZyB0aGUgc2FtZSBzdHJlYW0gaW4gbXVsdGlwbGUgd2F5cyB3aWxsIG9mdGVuIHJlc3VsdCBpbiByZWR1bmRhbnQgY2FsbHMuXG5mdW5jdGlvbiBXcml0YWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyQ2xlYXJBbGdvcml0aG1zKGNvbnRyb2xsZXI6IFdyaXRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXI8YW55Pikge1xuICBjb250cm9sbGVyLl93cml0ZUFsZ29yaXRobSA9IHVuZGVmaW5lZCE7XG4gIGNvbnRyb2xsZXIuX2Nsb3NlQWxnb3JpdGhtID0gdW5kZWZpbmVkITtcbiAgY29udHJvbGxlci5fYWJvcnRBbGdvcml0aG0gPSB1bmRlZmluZWQhO1xuICBjb250cm9sbGVyLl9zdHJhdGVneVNpemVBbGdvcml0aG0gPSB1bmRlZmluZWQhO1xufVxuXG5mdW5jdGlvbiBXcml0YWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyQ2xvc2U8Vz4oY29udHJvbGxlcjogV3JpdGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlcjxXPikge1xuICBFbnF1ZXVlVmFsdWVXaXRoU2l6ZShjb250cm9sbGVyLCBjbG9zZVNlbnRpbmVsLCAwKTtcbiAgV3JpdGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlckFkdmFuY2VRdWV1ZUlmTmVlZGVkKGNvbnRyb2xsZXIpO1xufVxuXG5mdW5jdGlvbiBXcml0YWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyR2V0Q2h1bmtTaXplPFc+KGNvbnRyb2xsZXI6IFdyaXRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXI8Vz4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rOiBXKTogbnVtYmVyIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gY29udHJvbGxlci5fc3RyYXRlZ3lTaXplQWxnb3JpdGhtKGNodW5rKTtcbiAgfSBjYXRjaCAoY2h1bmtTaXplRSkge1xuICAgIFdyaXRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXJFcnJvcklmTmVlZGVkKGNvbnRyb2xsZXIsIGNodW5rU2l6ZUUpO1xuICAgIHJldHVybiAxO1xuICB9XG59XG5cbmZ1bmN0aW9uIFdyaXRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXJHZXREZXNpcmVkU2l6ZShjb250cm9sbGVyOiBXcml0YWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyPGFueT4pOiBudW1iZXIge1xuICByZXR1cm4gY29udHJvbGxlci5fc3RyYXRlZ3lIV00gLSBjb250cm9sbGVyLl9xdWV1ZVRvdGFsU2l6ZTtcbn1cblxuZnVuY3Rpb24gV3JpdGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlcldyaXRlPFc+KGNvbnRyb2xsZXI6IFdyaXRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXI8Vz4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2h1bms6IFcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmtTaXplOiBudW1iZXIpIHtcbiAgdHJ5IHtcbiAgICBFbnF1ZXVlVmFsdWVXaXRoU2l6ZShjb250cm9sbGVyLCBjaHVuaywgY2h1bmtTaXplKTtcbiAgfSBjYXRjaCAoZW5xdWV1ZUUpIHtcbiAgICBXcml0YWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyRXJyb3JJZk5lZWRlZChjb250cm9sbGVyLCBlbnF1ZXVlRSk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3Qgc3RyZWFtID0gY29udHJvbGxlci5fY29udHJvbGxlZFdyaXRhYmxlU3RyZWFtO1xuICBpZiAoIVdyaXRhYmxlU3RyZWFtQ2xvc2VRdWV1ZWRPckluRmxpZ2h0KHN0cmVhbSkgJiYgc3RyZWFtLl9zdGF0ZSA9PT0gJ3dyaXRhYmxlJykge1xuICAgIGNvbnN0IGJhY2twcmVzc3VyZSA9IFdyaXRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXJHZXRCYWNrcHJlc3N1cmUoY29udHJvbGxlcik7XG4gICAgV3JpdGFibGVTdHJlYW1VcGRhdGVCYWNrcHJlc3N1cmUoc3RyZWFtLCBiYWNrcHJlc3N1cmUpO1xuICB9XG5cbiAgV3JpdGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlckFkdmFuY2VRdWV1ZUlmTmVlZGVkKGNvbnRyb2xsZXIpO1xufVxuXG4vLyBBYnN0cmFjdCBvcGVyYXRpb25zIGZvciB0aGUgV3JpdGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlci5cblxuZnVuY3Rpb24gV3JpdGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlckFkdmFuY2VRdWV1ZUlmTmVlZGVkPFc+KGNvbnRyb2xsZXI6IFdyaXRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXI8Vz4pIHtcbiAgY29uc3Qgc3RyZWFtID0gY29udHJvbGxlci5fY29udHJvbGxlZFdyaXRhYmxlU3RyZWFtO1xuXG4gIGlmICghY29udHJvbGxlci5fc3RhcnRlZCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChzdHJlYW0uX2luRmxpZ2h0V3JpdGVSZXF1ZXN0ICE9PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBzdGF0ZSA9IHN0cmVhbS5fc3RhdGU7XG4gIGFzc2VydChzdGF0ZSAhPT0gJ2Nsb3NlZCcgJiYgc3RhdGUgIT09ICdlcnJvcmVkJyk7XG4gIGlmIChzdGF0ZSA9PT0gJ2Vycm9yaW5nJykge1xuICAgIFdyaXRhYmxlU3RyZWFtRmluaXNoRXJyb3Jpbmcoc3RyZWFtKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoY29udHJvbGxlci5fcXVldWUubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgdmFsdWUgPSBQZWVrUXVldWVWYWx1ZShjb250cm9sbGVyKTtcbiAgaWYgKHZhbHVlID09PSBjbG9zZVNlbnRpbmVsKSB7XG4gICAgV3JpdGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlclByb2Nlc3NDbG9zZShjb250cm9sbGVyKTtcbiAgfSBlbHNlIHtcbiAgICBXcml0YWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyUHJvY2Vzc1dyaXRlKGNvbnRyb2xsZXIsIHZhbHVlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBXcml0YWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyRXJyb3JJZk5lZWRlZChjb250cm9sbGVyOiBXcml0YWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyPGFueT4sIGVycm9yOiBhbnkpIHtcbiAgaWYgKGNvbnRyb2xsZXIuX2NvbnRyb2xsZWRXcml0YWJsZVN0cmVhbS5fc3RhdGUgPT09ICd3cml0YWJsZScpIHtcbiAgICBXcml0YWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyRXJyb3IoY29udHJvbGxlciwgZXJyb3IpO1xuICB9XG59XG5cbmZ1bmN0aW9uIFdyaXRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXJQcm9jZXNzQ2xvc2UoY29udHJvbGxlcjogV3JpdGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlcjxhbnk+KSB7XG4gIGNvbnN0IHN0cmVhbSA9IGNvbnRyb2xsZXIuX2NvbnRyb2xsZWRXcml0YWJsZVN0cmVhbTtcblxuICBXcml0YWJsZVN0cmVhbU1hcmtDbG9zZVJlcXVlc3RJbkZsaWdodChzdHJlYW0pO1xuXG4gIERlcXVldWVWYWx1ZShjb250cm9sbGVyKTtcbiAgYXNzZXJ0KGNvbnRyb2xsZXIuX3F1ZXVlLmxlbmd0aCA9PT0gMCk7XG5cbiAgY29uc3Qgc2lua0Nsb3NlUHJvbWlzZSA9IGNvbnRyb2xsZXIuX2Nsb3NlQWxnb3JpdGhtKCk7XG4gIFdyaXRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXJDbGVhckFsZ29yaXRobXMoY29udHJvbGxlcik7XG4gIHVwb25Qcm9taXNlKFxuICAgIHNpbmtDbG9zZVByb21pc2UsXG4gICAgKCkgPT4ge1xuICAgICAgV3JpdGFibGVTdHJlYW1GaW5pc2hJbkZsaWdodENsb3NlKHN0cmVhbSk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuICAgIHJlYXNvbiA9PiB7XG4gICAgICBXcml0YWJsZVN0cmVhbUZpbmlzaEluRmxpZ2h0Q2xvc2VXaXRoRXJyb3Ioc3RyZWFtLCByZWFzb24pO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICApO1xufVxuXG5mdW5jdGlvbiBXcml0YWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyUHJvY2Vzc1dyaXRlPFc+KGNvbnRyb2xsZXI6IFdyaXRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXI8Vz4sIGNodW5rOiBXKSB7XG4gIGNvbnN0IHN0cmVhbSA9IGNvbnRyb2xsZXIuX2NvbnRyb2xsZWRXcml0YWJsZVN0cmVhbTtcblxuICBXcml0YWJsZVN0cmVhbU1hcmtGaXJzdFdyaXRlUmVxdWVzdEluRmxpZ2h0KHN0cmVhbSk7XG5cbiAgY29uc3Qgc2lua1dyaXRlUHJvbWlzZSA9IGNvbnRyb2xsZXIuX3dyaXRlQWxnb3JpdGhtKGNodW5rKTtcbiAgdXBvblByb21pc2UoXG4gICAgc2lua1dyaXRlUHJvbWlzZSxcbiAgICAoKSA9PiB7XG4gICAgICBXcml0YWJsZVN0cmVhbUZpbmlzaEluRmxpZ2h0V3JpdGUoc3RyZWFtKTtcblxuICAgICAgY29uc3Qgc3RhdGUgPSBzdHJlYW0uX3N0YXRlO1xuICAgICAgYXNzZXJ0KHN0YXRlID09PSAnd3JpdGFibGUnIHx8IHN0YXRlID09PSAnZXJyb3JpbmcnKTtcblxuICAgICAgRGVxdWV1ZVZhbHVlKGNvbnRyb2xsZXIpO1xuXG4gICAgICBpZiAoIVdyaXRhYmxlU3RyZWFtQ2xvc2VRdWV1ZWRPckluRmxpZ2h0KHN0cmVhbSkgJiYgc3RhdGUgPT09ICd3cml0YWJsZScpIHtcbiAgICAgICAgY29uc3QgYmFja3ByZXNzdXJlID0gV3JpdGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlckdldEJhY2twcmVzc3VyZShjb250cm9sbGVyKTtcbiAgICAgICAgV3JpdGFibGVTdHJlYW1VcGRhdGVCYWNrcHJlc3N1cmUoc3RyZWFtLCBiYWNrcHJlc3N1cmUpO1xuICAgICAgfVxuXG4gICAgICBXcml0YWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyQWR2YW5jZVF1ZXVlSWZOZWVkZWQoY29udHJvbGxlcik7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuICAgIHJlYXNvbiA9PiB7XG4gICAgICBpZiAoc3RyZWFtLl9zdGF0ZSA9PT0gJ3dyaXRhYmxlJykge1xuICAgICAgICBXcml0YWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyQ2xlYXJBbGdvcml0aG1zKGNvbnRyb2xsZXIpO1xuICAgICAgfVxuICAgICAgV3JpdGFibGVTdHJlYW1GaW5pc2hJbkZsaWdodFdyaXRlV2l0aEVycm9yKHN0cmVhbSwgcmVhc29uKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgKTtcbn1cblxuZnVuY3Rpb24gV3JpdGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlckdldEJhY2twcmVzc3VyZShjb250cm9sbGVyOiBXcml0YWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyPGFueT4pOiBib29sZWFuIHtcbiAgY29uc3QgZGVzaXJlZFNpemUgPSBXcml0YWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyR2V0RGVzaXJlZFNpemUoY29udHJvbGxlcik7XG4gIHJldHVybiBkZXNpcmVkU2l6ZSA8PSAwO1xufVxuXG4vLyBBIGNsaWVudCBvZiBXcml0YWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyIG1heSB1c2UgdGhlc2UgZnVuY3Rpb25zIGRpcmVjdGx5IHRvIGJ5cGFzcyBzdGF0ZSBjaGVjay5cblxuZnVuY3Rpb24gV3JpdGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlckVycm9yKGNvbnRyb2xsZXI6IFdyaXRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXI8YW55PiwgZXJyb3I6IGFueSkge1xuICBjb25zdCBzdHJlYW0gPSBjb250cm9sbGVyLl9jb250cm9sbGVkV3JpdGFibGVTdHJlYW07XG5cbiAgYXNzZXJ0KHN0cmVhbS5fc3RhdGUgPT09ICd3cml0YWJsZScpO1xuXG4gIFdyaXRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXJDbGVhckFsZ29yaXRobXMoY29udHJvbGxlcik7XG4gIFdyaXRhYmxlU3RyZWFtU3RhcnRFcnJvcmluZyhzdHJlYW0sIGVycm9yKTtcbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9ucyBmb3IgdGhlIFdyaXRhYmxlU3RyZWFtLlxuXG5mdW5jdGlvbiBzdHJlYW1CcmFuZENoZWNrRXhjZXB0aW9uKG5hbWU6IHN0cmluZyk6IFR5cGVFcnJvciB7XG4gIHJldHVybiBuZXcgVHlwZUVycm9yKGBXcml0YWJsZVN0cmVhbS5wcm90b3R5cGUuJHtuYW1lfSBjYW4gb25seSBiZSB1c2VkIG9uIGEgV3JpdGFibGVTdHJlYW1gKTtcbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9ucyBmb3IgdGhlIFdyaXRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXIuXG5cbmZ1bmN0aW9uIGRlZmF1bHRDb250cm9sbGVyQnJhbmRDaGVja0V4Y2VwdGlvbihuYW1lOiBzdHJpbmcpOiBUeXBlRXJyb3Ige1xuICByZXR1cm4gbmV3IFR5cGVFcnJvcihcbiAgICBgV3JpdGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlci5wcm90b3R5cGUuJHtuYW1lfSBjYW4gb25seSBiZSB1c2VkIG9uIGEgV3JpdGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlcmApO1xufVxuXG5cbi8vIEhlbHBlciBmdW5jdGlvbnMgZm9yIHRoZSBXcml0YWJsZVN0cmVhbURlZmF1bHRXcml0ZXIuXG5cbmZ1bmN0aW9uIGRlZmF1bHRXcml0ZXJCcmFuZENoZWNrRXhjZXB0aW9uKG5hbWU6IHN0cmluZyk6IFR5cGVFcnJvciB7XG4gIHJldHVybiBuZXcgVHlwZUVycm9yKFxuICAgIGBXcml0YWJsZVN0cmVhbURlZmF1bHRXcml0ZXIucHJvdG90eXBlLiR7bmFtZX0gY2FuIG9ubHkgYmUgdXNlZCBvbiBhIFdyaXRhYmxlU3RyZWFtRGVmYXVsdFdyaXRlcmApO1xufVxuXG5mdW5jdGlvbiBkZWZhdWx0V3JpdGVyTG9ja0V4Y2VwdGlvbihuYW1lOiBzdHJpbmcpOiBUeXBlRXJyb3Ige1xuICByZXR1cm4gbmV3IFR5cGVFcnJvcignQ2Fubm90ICcgKyBuYW1lICsgJyBhIHN0cmVhbSB1c2luZyBhIHJlbGVhc2VkIHdyaXRlcicpO1xufVxuXG5mdW5jdGlvbiBkZWZhdWx0V3JpdGVyQ2xvc2VkUHJvbWlzZUluaXRpYWxpemUod3JpdGVyOiBXcml0YWJsZVN0cmVhbURlZmF1bHRXcml0ZXIpIHtcbiAgd3JpdGVyLl9jbG9zZWRQcm9taXNlID0gbmV3UHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgd3JpdGVyLl9jbG9zZWRQcm9taXNlX3Jlc29sdmUgPSByZXNvbHZlO1xuICAgIHdyaXRlci5fY2xvc2VkUHJvbWlzZV9yZWplY3QgPSByZWplY3Q7XG4gICAgd3JpdGVyLl9jbG9zZWRQcm9taXNlU3RhdGUgPSAncGVuZGluZyc7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBkZWZhdWx0V3JpdGVyQ2xvc2VkUHJvbWlzZUluaXRpYWxpemVBc1JlamVjdGVkKHdyaXRlcjogV3JpdGFibGVTdHJlYW1EZWZhdWx0V3JpdGVyLCByZWFzb246IGFueSkge1xuICBkZWZhdWx0V3JpdGVyQ2xvc2VkUHJvbWlzZUluaXRpYWxpemUod3JpdGVyKTtcbiAgZGVmYXVsdFdyaXRlckNsb3NlZFByb21pc2VSZWplY3Qod3JpdGVyLCByZWFzb24pO1xufVxuXG5mdW5jdGlvbiBkZWZhdWx0V3JpdGVyQ2xvc2VkUHJvbWlzZUluaXRpYWxpemVBc1Jlc29sdmVkKHdyaXRlcjogV3JpdGFibGVTdHJlYW1EZWZhdWx0V3JpdGVyKSB7XG4gIGRlZmF1bHRXcml0ZXJDbG9zZWRQcm9taXNlSW5pdGlhbGl6ZSh3cml0ZXIpO1xuICBkZWZhdWx0V3JpdGVyQ2xvc2VkUHJvbWlzZVJlc29sdmUod3JpdGVyKTtcbn1cblxuZnVuY3Rpb24gZGVmYXVsdFdyaXRlckNsb3NlZFByb21pc2VSZWplY3Qod3JpdGVyOiBXcml0YWJsZVN0cmVhbURlZmF1bHRXcml0ZXIsIHJlYXNvbjogYW55KSB7XG4gIGlmICh3cml0ZXIuX2Nsb3NlZFByb21pc2VfcmVqZWN0ID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgYXNzZXJ0KHdyaXRlci5fY2xvc2VkUHJvbWlzZVN0YXRlID09PSAncGVuZGluZycpO1xuXG4gIHNldFByb21pc2VJc0hhbmRsZWRUb1RydWUod3JpdGVyLl9jbG9zZWRQcm9taXNlKTtcbiAgd3JpdGVyLl9jbG9zZWRQcm9taXNlX3JlamVjdChyZWFzb24pO1xuICB3cml0ZXIuX2Nsb3NlZFByb21pc2VfcmVzb2x2ZSA9IHVuZGVmaW5lZDtcbiAgd3JpdGVyLl9jbG9zZWRQcm9taXNlX3JlamVjdCA9IHVuZGVmaW5lZDtcbiAgd3JpdGVyLl9jbG9zZWRQcm9taXNlU3RhdGUgPSAncmVqZWN0ZWQnO1xufVxuXG5mdW5jdGlvbiBkZWZhdWx0V3JpdGVyQ2xvc2VkUHJvbWlzZVJlc2V0VG9SZWplY3RlZCh3cml0ZXI6IFdyaXRhYmxlU3RyZWFtRGVmYXVsdFdyaXRlciwgcmVhc29uOiBhbnkpIHtcbiAgYXNzZXJ0KHdyaXRlci5fY2xvc2VkUHJvbWlzZV9yZXNvbHZlID09PSB1bmRlZmluZWQpO1xuICBhc3NlcnQod3JpdGVyLl9jbG9zZWRQcm9taXNlX3JlamVjdCA9PT0gdW5kZWZpbmVkKTtcbiAgYXNzZXJ0KHdyaXRlci5fY2xvc2VkUHJvbWlzZVN0YXRlICE9PSAncGVuZGluZycpO1xuXG4gIGRlZmF1bHRXcml0ZXJDbG9zZWRQcm9taXNlSW5pdGlhbGl6ZUFzUmVqZWN0ZWQod3JpdGVyLCByZWFzb24pO1xufVxuXG5mdW5jdGlvbiBkZWZhdWx0V3JpdGVyQ2xvc2VkUHJvbWlzZVJlc29sdmUod3JpdGVyOiBXcml0YWJsZVN0cmVhbURlZmF1bHRXcml0ZXIpIHtcbiAgaWYgKHdyaXRlci5fY2xvc2VkUHJvbWlzZV9yZXNvbHZlID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgYXNzZXJ0KHdyaXRlci5fY2xvc2VkUHJvbWlzZVN0YXRlID09PSAncGVuZGluZycpO1xuXG4gIHdyaXRlci5fY2xvc2VkUHJvbWlzZV9yZXNvbHZlKHVuZGVmaW5lZCk7XG4gIHdyaXRlci5fY2xvc2VkUHJvbWlzZV9yZXNvbHZlID0gdW5kZWZpbmVkO1xuICB3cml0ZXIuX2Nsb3NlZFByb21pc2VfcmVqZWN0ID0gdW5kZWZpbmVkO1xuICB3cml0ZXIuX2Nsb3NlZFByb21pc2VTdGF0ZSA9ICdyZXNvbHZlZCc7XG59XG5cbmZ1bmN0aW9uIGRlZmF1bHRXcml0ZXJSZWFkeVByb21pc2VJbml0aWFsaXplKHdyaXRlcjogV3JpdGFibGVTdHJlYW1EZWZhdWx0V3JpdGVyKSB7XG4gIHdyaXRlci5fcmVhZHlQcm9taXNlID0gbmV3UHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgd3JpdGVyLl9yZWFkeVByb21pc2VfcmVzb2x2ZSA9IHJlc29sdmU7XG4gICAgd3JpdGVyLl9yZWFkeVByb21pc2VfcmVqZWN0ID0gcmVqZWN0O1xuICB9KTtcbiAgd3JpdGVyLl9yZWFkeVByb21pc2VTdGF0ZSA9ICdwZW5kaW5nJztcbn1cblxuZnVuY3Rpb24gZGVmYXVsdFdyaXRlclJlYWR5UHJvbWlzZUluaXRpYWxpemVBc1JlamVjdGVkKHdyaXRlcjogV3JpdGFibGVTdHJlYW1EZWZhdWx0V3JpdGVyLCByZWFzb246IGFueSkge1xuICBkZWZhdWx0V3JpdGVyUmVhZHlQcm9taXNlSW5pdGlhbGl6ZSh3cml0ZXIpO1xuICBkZWZhdWx0V3JpdGVyUmVhZHlQcm9taXNlUmVqZWN0KHdyaXRlciwgcmVhc29uKTtcbn1cblxuZnVuY3Rpb24gZGVmYXVsdFdyaXRlclJlYWR5UHJvbWlzZUluaXRpYWxpemVBc1Jlc29sdmVkKHdyaXRlcjogV3JpdGFibGVTdHJlYW1EZWZhdWx0V3JpdGVyKSB7XG4gIGRlZmF1bHRXcml0ZXJSZWFkeVByb21pc2VJbml0aWFsaXplKHdyaXRlcik7XG4gIGRlZmF1bHRXcml0ZXJSZWFkeVByb21pc2VSZXNvbHZlKHdyaXRlcik7XG59XG5cbmZ1bmN0aW9uIGRlZmF1bHRXcml0ZXJSZWFkeVByb21pc2VSZWplY3Qod3JpdGVyOiBXcml0YWJsZVN0cmVhbURlZmF1bHRXcml0ZXIsIHJlYXNvbjogYW55KSB7XG4gIGlmICh3cml0ZXIuX3JlYWR5UHJvbWlzZV9yZWplY3QgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHNldFByb21pc2VJc0hhbmRsZWRUb1RydWUod3JpdGVyLl9yZWFkeVByb21pc2UpO1xuICB3cml0ZXIuX3JlYWR5UHJvbWlzZV9yZWplY3QocmVhc29uKTtcbiAgd3JpdGVyLl9yZWFkeVByb21pc2VfcmVzb2x2ZSA9IHVuZGVmaW5lZDtcbiAgd3JpdGVyLl9yZWFkeVByb21pc2VfcmVqZWN0ID0gdW5kZWZpbmVkO1xuICB3cml0ZXIuX3JlYWR5UHJvbWlzZVN0YXRlID0gJ3JlamVjdGVkJztcbn1cblxuZnVuY3Rpb24gZGVmYXVsdFdyaXRlclJlYWR5UHJvbWlzZVJlc2V0KHdyaXRlcjogV3JpdGFibGVTdHJlYW1EZWZhdWx0V3JpdGVyKSB7XG4gIGFzc2VydCh3cml0ZXIuX3JlYWR5UHJvbWlzZV9yZXNvbHZlID09PSB1bmRlZmluZWQpO1xuICBhc3NlcnQod3JpdGVyLl9yZWFkeVByb21pc2VfcmVqZWN0ID09PSB1bmRlZmluZWQpO1xuXG4gIGRlZmF1bHRXcml0ZXJSZWFkeVByb21pc2VJbml0aWFsaXplKHdyaXRlcik7XG59XG5cbmZ1bmN0aW9uIGRlZmF1bHRXcml0ZXJSZWFkeVByb21pc2VSZXNldFRvUmVqZWN0ZWQod3JpdGVyOiBXcml0YWJsZVN0cmVhbURlZmF1bHRXcml0ZXIsIHJlYXNvbjogYW55KSB7XG4gIGFzc2VydCh3cml0ZXIuX3JlYWR5UHJvbWlzZV9yZXNvbHZlID09PSB1bmRlZmluZWQpO1xuICBhc3NlcnQod3JpdGVyLl9yZWFkeVByb21pc2VfcmVqZWN0ID09PSB1bmRlZmluZWQpO1xuXG4gIGRlZmF1bHRXcml0ZXJSZWFkeVByb21pc2VJbml0aWFsaXplQXNSZWplY3RlZCh3cml0ZXIsIHJlYXNvbik7XG59XG5cbmZ1bmN0aW9uIGRlZmF1bHRXcml0ZXJSZWFkeVByb21pc2VSZXNvbHZlKHdyaXRlcjogV3JpdGFibGVTdHJlYW1EZWZhdWx0V3JpdGVyKSB7XG4gIGlmICh3cml0ZXIuX3JlYWR5UHJvbWlzZV9yZXNvbHZlID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB3cml0ZXIuX3JlYWR5UHJvbWlzZV9yZXNvbHZlKHVuZGVmaW5lZCk7XG4gIHdyaXRlci5fcmVhZHlQcm9taXNlX3Jlc29sdmUgPSB1bmRlZmluZWQ7XG4gIHdyaXRlci5fcmVhZHlQcm9taXNlX3JlamVjdCA9IHVuZGVmaW5lZDtcbiAgd3JpdGVyLl9yZWFkeVByb21pc2VTdGF0ZSA9ICdmdWxmaWxsZWQnO1xufVxuIiwgIi8vLyA8cmVmZXJlbmNlIGxpYj1cImRvbVwiIC8+XG5cbmZ1bmN0aW9uIGdldEdsb2JhbHMoKTogdHlwZW9mIGdsb2JhbFRoaXMgfCB1bmRlZmluZWQge1xuICBpZiAodHlwZW9mIGdsb2JhbFRoaXMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIGdsb2JhbFRoaXM7XG4gIH0gZWxzZSBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIHNlbGY7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gZ2xvYmFsO1xuICB9XG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG5cbmV4cG9ydCBjb25zdCBnbG9iYWxzID0gZ2V0R2xvYmFscygpO1xuIiwgIi8vLyA8cmVmZXJlbmNlIHR5cGVzPVwibm9kZVwiIC8+XG5pbXBvcnQgeyBnbG9iYWxzIH0gZnJvbSAnLi4vZ2xvYmFscyc7XG5pbXBvcnQgeyBzZXRGdW5jdGlvbk5hbWUgfSBmcm9tICcuLi9saWIvaGVscGVycy9taXNjZWxsYW5lb3VzJztcblxuaW50ZXJmYWNlIERPTUV4Y2VwdGlvbiBleHRlbmRzIEVycm9yIHtcbiAgbmFtZTogc3RyaW5nO1xuICBtZXNzYWdlOiBzdHJpbmc7XG59XG5cbnR5cGUgRE9NRXhjZXB0aW9uQ29uc3RydWN0b3IgPSBuZXcgKG1lc3NhZ2U/OiBzdHJpbmcsIG5hbWU/OiBzdHJpbmcpID0+IERPTUV4Y2VwdGlvbjtcblxuZnVuY3Rpb24gaXNET01FeGNlcHRpb25Db25zdHJ1Y3RvcihjdG9yOiB1bmtub3duKTogY3RvciBpcyBET01FeGNlcHRpb25Db25zdHJ1Y3RvciB7XG4gIGlmICghKHR5cGVvZiBjdG9yID09PSAnZnVuY3Rpb24nIHx8IHR5cGVvZiBjdG9yID09PSAnb2JqZWN0JykpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKChjdG9yIGFzIERPTUV4Y2VwdGlvbkNvbnN0cnVjdG9yKS5uYW1lICE9PSAnRE9NRXhjZXB0aW9uJykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB0cnkge1xuICAgIG5ldyAoY3RvciBhcyBET01FeGNlcHRpb25Db25zdHJ1Y3RvcikoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbi8qKlxuICogU3VwcG9ydDpcbiAqIC0gV2ViIGJyb3dzZXJzXG4gKiAtIE5vZGUgMTggYW5kIGhpZ2hlciAoaHR0cHM6Ly9naXRodWIuY29tL25vZGVqcy9ub2RlL2NvbW1pdC9lNGIxZmI1ZTY0MjJjMWZmMTUxMjM0YmI5ZGU3OTJkNDVkZDg4ZDg3KVxuICovXG5mdW5jdGlvbiBnZXRGcm9tR2xvYmFsKCk6IERPTUV4Y2VwdGlvbkNvbnN0cnVjdG9yIHwgdW5kZWZpbmVkIHtcbiAgY29uc3QgY3RvciA9IGdsb2JhbHM/LkRPTUV4Y2VwdGlvbjtcbiAgcmV0dXJuIGlzRE9NRXhjZXB0aW9uQ29uc3RydWN0b3IoY3RvcikgPyBjdG9yIDogdW5kZWZpbmVkO1xufVxuXG4vKipcbiAqIFN1cHBvcnQ6XG4gKiAtIEFsbCBwbGF0Zm9ybXNcbiAqL1xuZnVuY3Rpb24gY3JlYXRlUG9seWZpbGwoKTogRE9NRXhjZXB0aW9uQ29uc3RydWN0b3Ige1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXNoYWRvd1xuICBjb25zdCBjdG9yID0gZnVuY3Rpb24gRE9NRXhjZXB0aW9uKHRoaXM6IERPTUV4Y2VwdGlvbiwgbWVzc2FnZT86IHN0cmluZywgbmFtZT86IHN0cmluZykge1xuICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2UgfHwgJyc7XG4gICAgdGhpcy5uYW1lID0gbmFtZSB8fCAnRXJyb3InO1xuICAgIGlmIChFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSkge1xuICAgICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgdGhpcy5jb25zdHJ1Y3Rvcik7XG4gICAgfVxuICB9IGFzIGFueTtcbiAgc2V0RnVuY3Rpb25OYW1lKGN0b3IsICdET01FeGNlcHRpb24nKTtcbiAgY3Rvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSk7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjdG9yLnByb3RvdHlwZSwgJ2NvbnN0cnVjdG9yJywgeyB2YWx1ZTogY3Rvciwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9KTtcbiAgcmV0dXJuIGN0b3I7XG59XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tcmVkZWNsYXJlXG5jb25zdCBET01FeGNlcHRpb246IERPTUV4Y2VwdGlvbkNvbnN0cnVjdG9yID0gZ2V0RnJvbUdsb2JhbCgpIHx8IGNyZWF0ZVBvbHlmaWxsKCk7XG5cbmV4cG9ydCB7IERPTUV4Y2VwdGlvbiB9O1xuIiwgImltcG9ydCB7IElzUmVhZGFibGVTdHJlYW0sIElzUmVhZGFibGVTdHJlYW1Mb2NrZWQsIFJlYWRhYmxlU3RyZWFtLCBSZWFkYWJsZVN0cmVhbUNhbmNlbCB9IGZyb20gJy4uL3JlYWRhYmxlLXN0cmVhbSc7XG5pbXBvcnQgeyBBY3F1aXJlUmVhZGFibGVTdHJlYW1EZWZhdWx0UmVhZGVyLCBSZWFkYWJsZVN0cmVhbURlZmF1bHRSZWFkZXJSZWFkIH0gZnJvbSAnLi9kZWZhdWx0LXJlYWRlcic7XG5pbXBvcnQgeyBSZWFkYWJsZVN0cmVhbVJlYWRlckdlbmVyaWNSZWxlYXNlIH0gZnJvbSAnLi9nZW5lcmljLXJlYWRlcic7XG5pbXBvcnQge1xuICBBY3F1aXJlV3JpdGFibGVTdHJlYW1EZWZhdWx0V3JpdGVyLFxuICBJc1dyaXRhYmxlU3RyZWFtLFxuICBJc1dyaXRhYmxlU3RyZWFtTG9ja2VkLFxuICBXcml0YWJsZVN0cmVhbSxcbiAgV3JpdGFibGVTdHJlYW1BYm9ydCxcbiAgV3JpdGFibGVTdHJlYW1DbG9zZVF1ZXVlZE9ySW5GbGlnaHQsXG4gIFdyaXRhYmxlU3RyZWFtRGVmYXVsdFdyaXRlckNsb3NlV2l0aEVycm9yUHJvcGFnYXRpb24sXG4gIFdyaXRhYmxlU3RyZWFtRGVmYXVsdFdyaXRlclJlbGVhc2UsXG4gIFdyaXRhYmxlU3RyZWFtRGVmYXVsdFdyaXRlcldyaXRlXG59IGZyb20gJy4uL3dyaXRhYmxlLXN0cmVhbSc7XG5pbXBvcnQgYXNzZXJ0IGZyb20gJy4uLy4uL3N0dWIvYXNzZXJ0JztcbmltcG9ydCB7XG4gIG5ld1Byb21pc2UsXG4gIFBlcmZvcm1Qcm9taXNlVGhlbixcbiAgcHJvbWlzZVJlc29sdmVkV2l0aCxcbiAgc2V0UHJvbWlzZUlzSGFuZGxlZFRvVHJ1ZSxcbiAgdXBvbkZ1bGZpbGxtZW50LFxuICB1cG9uUHJvbWlzZSxcbiAgdXBvblJlamVjdGlvblxufSBmcm9tICcuLi9oZWxwZXJzL3dlYmlkbCc7XG5pbXBvcnQgeyBub29wIH0gZnJvbSAnLi4vLi4vdXRpbHMnO1xuaW1wb3J0IHsgdHlwZSBBYm9ydFNpZ25hbCwgaXNBYm9ydFNpZ25hbCB9IGZyb20gJy4uL2Fib3J0LXNpZ25hbCc7XG5pbXBvcnQgeyBET01FeGNlcHRpb24gfSBmcm9tICcuLi8uLi9zdHViL2RvbS1leGNlcHRpb24nO1xuXG5leHBvcnQgZnVuY3Rpb24gUmVhZGFibGVTdHJlYW1QaXBlVG88VD4oc291cmNlOiBSZWFkYWJsZVN0cmVhbTxUPixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0OiBXcml0YWJsZVN0cmVhbTxUPixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2ZW50Q2xvc2U6IGJvb2xlYW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmVudEFib3J0OiBib29sZWFuLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZlbnRDYW5jZWw6IGJvb2xlYW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmFsOiBBYm9ydFNpZ25hbCB8IHVuZGVmaW5lZCk6IFByb21pc2U8dW5kZWZpbmVkPiB7XG4gIGFzc2VydChJc1JlYWRhYmxlU3RyZWFtKHNvdXJjZSkpO1xuICBhc3NlcnQoSXNXcml0YWJsZVN0cmVhbShkZXN0KSk7XG4gIGFzc2VydCh0eXBlb2YgcHJldmVudENsb3NlID09PSAnYm9vbGVhbicpO1xuICBhc3NlcnQodHlwZW9mIHByZXZlbnRBYm9ydCA9PT0gJ2Jvb2xlYW4nKTtcbiAgYXNzZXJ0KHR5cGVvZiBwcmV2ZW50Q2FuY2VsID09PSAnYm9vbGVhbicpO1xuICBhc3NlcnQoc2lnbmFsID09PSB1bmRlZmluZWQgfHwgaXNBYm9ydFNpZ25hbChzaWduYWwpKTtcbiAgYXNzZXJ0KCFJc1JlYWRhYmxlU3RyZWFtTG9ja2VkKHNvdXJjZSkpO1xuICBhc3NlcnQoIUlzV3JpdGFibGVTdHJlYW1Mb2NrZWQoZGVzdCkpO1xuXG4gIGNvbnN0IHJlYWRlciA9IEFjcXVpcmVSZWFkYWJsZVN0cmVhbURlZmF1bHRSZWFkZXI8VD4oc291cmNlKTtcbiAgY29uc3Qgd3JpdGVyID0gQWNxdWlyZVdyaXRhYmxlU3RyZWFtRGVmYXVsdFdyaXRlcjxUPihkZXN0KTtcblxuICBzb3VyY2UuX2Rpc3R1cmJlZCA9IHRydWU7XG5cbiAgbGV0IHNodXR0aW5nRG93biA9IGZhbHNlO1xuXG4gIC8vIFRoaXMgaXMgdXNlZCB0byBrZWVwIHRyYWNrIG9mIHRoZSBzcGVjJ3MgcmVxdWlyZW1lbnQgdGhhdCB3ZSB3YWl0IGZvciBvbmdvaW5nIHdyaXRlcyBkdXJpbmcgc2h1dGRvd24uXG4gIGxldCBjdXJyZW50V3JpdGUgPSBwcm9taXNlUmVzb2x2ZWRXaXRoPHZvaWQ+KHVuZGVmaW5lZCk7XG5cbiAgcmV0dXJuIG5ld1Byb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGxldCBhYm9ydEFsZ29yaXRobTogKCkgPT4gdm9pZDtcbiAgICBpZiAoc2lnbmFsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGFib3J0QWxnb3JpdGhtID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBlcnJvciA9IHNpZ25hbC5yZWFzb24gIT09IHVuZGVmaW5lZCA/IHNpZ25hbC5yZWFzb24gOiBuZXcgRE9NRXhjZXB0aW9uKCdBYm9ydGVkJywgJ0Fib3J0RXJyb3InKTtcbiAgICAgICAgY29uc3QgYWN0aW9uczogQXJyYXk8KCkgPT4gUHJvbWlzZTx2b2lkPj4gPSBbXTtcbiAgICAgICAgaWYgKCFwcmV2ZW50QWJvcnQpIHtcbiAgICAgICAgICBhY3Rpb25zLnB1c2goKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGRlc3QuX3N0YXRlID09PSAnd3JpdGFibGUnKSB7XG4gICAgICAgICAgICAgIHJldHVybiBXcml0YWJsZVN0cmVhbUFib3J0KGRlc3QsIGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlUmVzb2x2ZWRXaXRoKHVuZGVmaW5lZCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFwcmV2ZW50Q2FuY2VsKSB7XG4gICAgICAgICAgYWN0aW9ucy5wdXNoKCgpID0+IHtcbiAgICAgICAgICAgIGlmIChzb3VyY2UuX3N0YXRlID09PSAncmVhZGFibGUnKSB7XG4gICAgICAgICAgICAgIHJldHVybiBSZWFkYWJsZVN0cmVhbUNhbmNlbChzb3VyY2UsIGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlUmVzb2x2ZWRXaXRoKHVuZGVmaW5lZCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgc2h1dGRvd25XaXRoQWN0aW9uKCgpID0+IFByb21pc2UuYWxsKGFjdGlvbnMubWFwKGFjdGlvbiA9PiBhY3Rpb24oKSkpLCB0cnVlLCBlcnJvcik7XG4gICAgICB9O1xuXG4gICAgICBpZiAoc2lnbmFsLmFib3J0ZWQpIHtcbiAgICAgICAgYWJvcnRBbGdvcml0aG0oKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBzaWduYWwuYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBhYm9ydEFsZ29yaXRobSk7XG4gICAgfVxuXG4gICAgLy8gVXNpbmcgcmVhZGVyIGFuZCB3cml0ZXIsIHJlYWQgYWxsIGNodW5rcyBmcm9tIHRoaXMgYW5kIHdyaXRlIHRoZW0gdG8gZGVzdFxuICAgIC8vIC0gQmFja3ByZXNzdXJlIG11c3QgYmUgZW5mb3JjZWRcbiAgICAvLyAtIFNodXRkb3duIG11c3Qgc3RvcCBhbGwgYWN0aXZpdHlcbiAgICBmdW5jdGlvbiBwaXBlTG9vcCgpIHtcbiAgICAgIHJldHVybiBuZXdQcm9taXNlPHZvaWQ+KChyZXNvbHZlTG9vcCwgcmVqZWN0TG9vcCkgPT4ge1xuICAgICAgICBmdW5jdGlvbiBuZXh0KGRvbmU6IGJvb2xlYW4pIHtcbiAgICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgICAgcmVzb2x2ZUxvb3AoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gVXNlIGBQZXJmb3JtUHJvbWlzZVRoZW5gIGluc3RlYWQgb2YgYHVwb25Qcm9taXNlYCB0byBhdm9pZFxuICAgICAgICAgICAgLy8gYWRkaW5nIHVubmVjZXNzYXJ5IGAuY2F0Y2gocmV0aHJvd0Fzc2VydGlvbkVycm9yUmVqZWN0aW9uKWAgaGFuZGxlcnNcbiAgICAgICAgICAgIFBlcmZvcm1Qcm9taXNlVGhlbihwaXBlU3RlcCgpLCBuZXh0LCByZWplY3RMb29wKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBuZXh0KGZhbHNlKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBpcGVTdGVwKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgaWYgKHNodXR0aW5nRG93bikge1xuICAgICAgICByZXR1cm4gcHJvbWlzZVJlc29sdmVkV2l0aCh0cnVlKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIFBlcmZvcm1Qcm9taXNlVGhlbih3cml0ZXIuX3JlYWR5UHJvbWlzZSwgKCkgPT4ge1xuICAgICAgICByZXR1cm4gbmV3UHJvbWlzZTxib29sZWFuPigocmVzb2x2ZVJlYWQsIHJlamVjdFJlYWQpID0+IHtcbiAgICAgICAgICBSZWFkYWJsZVN0cmVhbURlZmF1bHRSZWFkZXJSZWFkKFxuICAgICAgICAgICAgcmVhZGVyLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBfY2h1bmtTdGVwczogY2h1bmsgPT4ge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRXcml0ZSA9IFBlcmZvcm1Qcm9taXNlVGhlbihXcml0YWJsZVN0cmVhbURlZmF1bHRXcml0ZXJXcml0ZSh3cml0ZXIsIGNodW5rKSwgdW5kZWZpbmVkLCBub29wKTtcbiAgICAgICAgICAgICAgICByZXNvbHZlUmVhZChmYWxzZSk7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIF9jbG9zZVN0ZXBzOiAoKSA9PiByZXNvbHZlUmVhZCh0cnVlKSxcbiAgICAgICAgICAgICAgX2Vycm9yU3RlcHM6IHJlamVjdFJlYWRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIEVycm9ycyBtdXN0IGJlIHByb3BhZ2F0ZWQgZm9yd2FyZFxuICAgIGlzT3JCZWNvbWVzRXJyb3JlZChzb3VyY2UsIHJlYWRlci5fY2xvc2VkUHJvbWlzZSwgc3RvcmVkRXJyb3IgPT4ge1xuICAgICAgaWYgKCFwcmV2ZW50QWJvcnQpIHtcbiAgICAgICAgc2h1dGRvd25XaXRoQWN0aW9uKCgpID0+IFdyaXRhYmxlU3RyZWFtQWJvcnQoZGVzdCwgc3RvcmVkRXJyb3IpLCB0cnVlLCBzdG9yZWRFcnJvcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzaHV0ZG93bih0cnVlLCBzdG9yZWRFcnJvcik7XG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9KTtcblxuICAgIC8vIEVycm9ycyBtdXN0IGJlIHByb3BhZ2F0ZWQgYmFja3dhcmRcbiAgICBpc09yQmVjb21lc0Vycm9yZWQoZGVzdCwgd3JpdGVyLl9jbG9zZWRQcm9taXNlLCBzdG9yZWRFcnJvciA9PiB7XG4gICAgICBpZiAoIXByZXZlbnRDYW5jZWwpIHtcbiAgICAgICAgc2h1dGRvd25XaXRoQWN0aW9uKCgpID0+IFJlYWRhYmxlU3RyZWFtQ2FuY2VsKHNvdXJjZSwgc3RvcmVkRXJyb3IpLCB0cnVlLCBzdG9yZWRFcnJvcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzaHV0ZG93bih0cnVlLCBzdG9yZWRFcnJvcik7XG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9KTtcblxuICAgIC8vIENsb3NpbmcgbXVzdCBiZSBwcm9wYWdhdGVkIGZvcndhcmRcbiAgICBpc09yQmVjb21lc0Nsb3NlZChzb3VyY2UsIHJlYWRlci5fY2xvc2VkUHJvbWlzZSwgKCkgPT4ge1xuICAgICAgaWYgKCFwcmV2ZW50Q2xvc2UpIHtcbiAgICAgICAgc2h1dGRvd25XaXRoQWN0aW9uKCgpID0+IFdyaXRhYmxlU3RyZWFtRGVmYXVsdFdyaXRlckNsb3NlV2l0aEVycm9yUHJvcGFnYXRpb24od3JpdGVyKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzaHV0ZG93bigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSk7XG5cbiAgICAvLyBDbG9zaW5nIG11c3QgYmUgcHJvcGFnYXRlZCBiYWNrd2FyZFxuICAgIGlmIChXcml0YWJsZVN0cmVhbUNsb3NlUXVldWVkT3JJbkZsaWdodChkZXN0KSB8fCBkZXN0Ll9zdGF0ZSA9PT0gJ2Nsb3NlZCcpIHtcbiAgICAgIGNvbnN0IGRlc3RDbG9zZWQgPSBuZXcgVHlwZUVycm9yKCd0aGUgZGVzdGluYXRpb24gd3JpdGFibGUgc3RyZWFtIGNsb3NlZCBiZWZvcmUgYWxsIGRhdGEgY291bGQgYmUgcGlwZWQgdG8gaXQnKTtcblxuICAgICAgaWYgKCFwcmV2ZW50Q2FuY2VsKSB7XG4gICAgICAgIHNodXRkb3duV2l0aEFjdGlvbigoKSA9PiBSZWFkYWJsZVN0cmVhbUNhbmNlbChzb3VyY2UsIGRlc3RDbG9zZWQpLCB0cnVlLCBkZXN0Q2xvc2VkKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNodXRkb3duKHRydWUsIGRlc3RDbG9zZWQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHNldFByb21pc2VJc0hhbmRsZWRUb1RydWUocGlwZUxvb3AoKSk7XG5cbiAgICBmdW5jdGlvbiB3YWl0Rm9yV3JpdGVzVG9GaW5pc2goKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAvLyBBbm90aGVyIHdyaXRlIG1heSBoYXZlIHN0YXJ0ZWQgd2hpbGUgd2Ugd2VyZSB3YWl0aW5nIG9uIHRoaXMgY3VycmVudFdyaXRlLCBzbyB3ZSBoYXZlIHRvIGJlIHN1cmUgdG8gd2FpdFxuICAgICAgLy8gZm9yIHRoYXQgdG9vLlxuICAgICAgY29uc3Qgb2xkQ3VycmVudFdyaXRlID0gY3VycmVudFdyaXRlO1xuICAgICAgcmV0dXJuIFBlcmZvcm1Qcm9taXNlVGhlbihcbiAgICAgICAgY3VycmVudFdyaXRlLFxuICAgICAgICAoKSA9PiBvbGRDdXJyZW50V3JpdGUgIT09IGN1cnJlbnRXcml0ZSA/IHdhaXRGb3JXcml0ZXNUb0ZpbmlzaCgpIDogdW5kZWZpbmVkXG4gICAgICApO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzT3JCZWNvbWVzRXJyb3JlZChzdHJlYW06IFJlYWRhYmxlU3RyZWFtIHwgV3JpdGFibGVTdHJlYW0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb21pc2U6IFByb21pc2U8dm9pZD4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogKHJlYXNvbjogYW55KSA9PiBudWxsKSB7XG4gICAgICBpZiAoc3RyZWFtLl9zdGF0ZSA9PT0gJ2Vycm9yZWQnKSB7XG4gICAgICAgIGFjdGlvbihzdHJlYW0uX3N0b3JlZEVycm9yKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVwb25SZWplY3Rpb24ocHJvbWlzZSwgYWN0aW9uKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc09yQmVjb21lc0Nsb3NlZChzdHJlYW06IFJlYWRhYmxlU3RyZWFtIHwgV3JpdGFibGVTdHJlYW0sIHByb21pc2U6IFByb21pc2U8dm9pZD4sIGFjdGlvbjogKCkgPT4gbnVsbCkge1xuICAgICAgaWYgKHN0cmVhbS5fc3RhdGUgPT09ICdjbG9zZWQnKSB7XG4gICAgICAgIGFjdGlvbigpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdXBvbkZ1bGZpbGxtZW50KHByb21pc2UsIGFjdGlvbik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2h1dGRvd25XaXRoQWN0aW9uKGFjdGlvbjogKCkgPT4gUHJvbWlzZTx1bmtub3duPiwgb3JpZ2luYWxJc0Vycm9yPzogYm9vbGVhbiwgb3JpZ2luYWxFcnJvcj86IGFueSkge1xuICAgICAgaWYgKHNodXR0aW5nRG93bikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBzaHV0dGluZ0Rvd24gPSB0cnVlO1xuXG4gICAgICBpZiAoZGVzdC5fc3RhdGUgPT09ICd3cml0YWJsZScgJiYgIVdyaXRhYmxlU3RyZWFtQ2xvc2VRdWV1ZWRPckluRmxpZ2h0KGRlc3QpKSB7XG4gICAgICAgIHVwb25GdWxmaWxsbWVudCh3YWl0Rm9yV3JpdGVzVG9GaW5pc2goKSwgZG9UaGVSZXN0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRvVGhlUmVzdCgpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBkb1RoZVJlc3QoKTogbnVsbCB7XG4gICAgICAgIHVwb25Qcm9taXNlKFxuICAgICAgICAgIGFjdGlvbigpLFxuICAgICAgICAgICgpID0+IGZpbmFsaXplKG9yaWdpbmFsSXNFcnJvciwgb3JpZ2luYWxFcnJvciksXG4gICAgICAgICAgbmV3RXJyb3IgPT4gZmluYWxpemUodHJ1ZSwgbmV3RXJyb3IpXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNodXRkb3duKGlzRXJyb3I/OiBib29sZWFuLCBlcnJvcj86IGFueSkge1xuICAgICAgaWYgKHNodXR0aW5nRG93bikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBzaHV0dGluZ0Rvd24gPSB0cnVlO1xuXG4gICAgICBpZiAoZGVzdC5fc3RhdGUgPT09ICd3cml0YWJsZScgJiYgIVdyaXRhYmxlU3RyZWFtQ2xvc2VRdWV1ZWRPckluRmxpZ2h0KGRlc3QpKSB7XG4gICAgICAgIHVwb25GdWxmaWxsbWVudCh3YWl0Rm9yV3JpdGVzVG9GaW5pc2goKSwgKCkgPT4gZmluYWxpemUoaXNFcnJvciwgZXJyb3IpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZpbmFsaXplKGlzRXJyb3IsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBmaW5hbGl6ZShpc0Vycm9yPzogYm9vbGVhbiwgZXJyb3I/OiBhbnkpOiBudWxsIHtcbiAgICAgIFdyaXRhYmxlU3RyZWFtRGVmYXVsdFdyaXRlclJlbGVhc2Uod3JpdGVyKTtcbiAgICAgIFJlYWRhYmxlU3RyZWFtUmVhZGVyR2VuZXJpY1JlbGVhc2UocmVhZGVyKTtcblxuICAgICAgaWYgKHNpZ25hbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHNpZ25hbC5yZW1vdmVFdmVudExpc3RlbmVyKCdhYm9ydCcsIGFib3J0QWxnb3JpdGhtKTtcbiAgICAgIH1cbiAgICAgIGlmIChpc0Vycm9yKSB7XG4gICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNvbHZlKHVuZGVmaW5lZCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfSk7XG59XG4iLCAiaW1wb3J0IHR5cGUgeyBRdWV1aW5nU3RyYXRlZ3lTaXplQ2FsbGJhY2sgfSBmcm9tICcuLi9xdWV1aW5nLXN0cmF0ZWd5JztcbmltcG9ydCBhc3NlcnQgZnJvbSAnLi4vLi4vc3R1Yi9hc3NlcnQnO1xuaW1wb3J0IHsgRGVxdWV1ZVZhbHVlLCBFbnF1ZXVlVmFsdWVXaXRoU2l6ZSwgdHlwZSBRdWV1ZVBhaXIsIFJlc2V0UXVldWUgfSBmcm9tICcuLi9hYnN0cmFjdC1vcHMvcXVldWUtd2l0aC1zaXplcyc7XG5pbXBvcnQge1xuICBSZWFkYWJsZVN0cmVhbUFkZFJlYWRSZXF1ZXN0LFxuICBSZWFkYWJsZVN0cmVhbUZ1bGZpbGxSZWFkUmVxdWVzdCxcbiAgUmVhZGFibGVTdHJlYW1HZXROdW1SZWFkUmVxdWVzdHMsXG4gIHR5cGUgUmVhZFJlcXVlc3Rcbn0gZnJvbSAnLi9kZWZhdWx0LXJlYWRlcic7XG5pbXBvcnQgeyBTaW1wbGVRdWV1ZSB9IGZyb20gJy4uL3NpbXBsZS1xdWV1ZSc7XG5pbXBvcnQgeyBJc1JlYWRhYmxlU3RyZWFtTG9ja2VkLCBSZWFkYWJsZVN0cmVhbSwgUmVhZGFibGVTdHJlYW1DbG9zZSwgUmVhZGFibGVTdHJlYW1FcnJvciB9IGZyb20gJy4uL3JlYWRhYmxlLXN0cmVhbSc7XG5pbXBvcnQgdHlwZSB7IFZhbGlkYXRlZFVuZGVybHlpbmdTb3VyY2UgfSBmcm9tICcuL3VuZGVybHlpbmctc291cmNlJztcbmltcG9ydCB7IHNldEZ1bmN0aW9uTmFtZSwgdHlwZUlzT2JqZWN0IH0gZnJvbSAnLi4vaGVscGVycy9taXNjZWxsYW5lb3VzJztcbmltcG9ydCB7IENhbmNlbFN0ZXBzLCBQdWxsU3RlcHMsIFJlbGVhc2VTdGVwcyB9IGZyb20gJy4uL2Fic3RyYWN0LW9wcy9pbnRlcm5hbC1tZXRob2RzJztcbmltcG9ydCB7IHByb21pc2VSZXNvbHZlZFdpdGgsIHVwb25Qcm9taXNlIH0gZnJvbSAnLi4vaGVscGVycy93ZWJpZGwnO1xuXG4vKipcbiAqIEFsbG93cyBjb250cm9sIG9mIGEge0BsaW5rIFJlYWRhYmxlU3RyZWFtIHwgcmVhZGFibGUgc3RyZWFtfSdzIHN0YXRlIGFuZCBpbnRlcm5hbCBxdWV1ZS5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBSZWFkYWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyPFI+IHtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfY29udHJvbGxlZFJlYWRhYmxlU3RyZWFtITogUmVhZGFibGVTdHJlYW08Uj47XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX3F1ZXVlITogU2ltcGxlUXVldWU8UXVldWVQYWlyPFI+PjtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfcXVldWVUb3RhbFNpemUhOiBudW1iZXI7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX3N0YXJ0ZWQhOiBib29sZWFuO1xuICAvKiogQGludGVybmFsICovXG4gIF9jbG9zZVJlcXVlc3RlZCE6IGJvb2xlYW47XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX3B1bGxBZ2FpbiE6IGJvb2xlYW47XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX3B1bGxpbmcgITogYm9vbGVhbjtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfc3RyYXRlZ3lTaXplQWxnb3JpdGhtITogUXVldWluZ1N0cmF0ZWd5U2l6ZUNhbGxiYWNrPFI+O1xuICAvKiogQGludGVybmFsICovXG4gIF9zdHJhdGVneUhXTSE6IG51bWJlcjtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfcHVsbEFsZ29yaXRobSE6ICgpID0+IFByb21pc2U8dm9pZD47XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX2NhbmNlbEFsZ29yaXRobSE6IChyZWFzb246IGFueSkgPT4gUHJvbWlzZTx2b2lkPjtcblxuICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0lsbGVnYWwgY29uc3RydWN0b3InKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBkZXNpcmVkIHNpemUgdG8gZmlsbCB0aGUgY29udHJvbGxlZCBzdHJlYW0ncyBpbnRlcm5hbCBxdWV1ZS4gSXQgY2FuIGJlIG5lZ2F0aXZlLCBpZiB0aGUgcXVldWUgaXNcbiAgICogb3Zlci1mdWxsLiBBbiB1bmRlcmx5aW5nIHNvdXJjZSBvdWdodCB0byB1c2UgdGhpcyBpbmZvcm1hdGlvbiB0byBkZXRlcm1pbmUgd2hlbiBhbmQgaG93IHRvIGFwcGx5IGJhY2twcmVzc3VyZS5cbiAgICovXG4gIGdldCBkZXNpcmVkU2l6ZSgpOiBudW1iZXIgfCBudWxsIHtcbiAgICBpZiAoIUlzUmVhZGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlcih0aGlzKSkge1xuICAgICAgdGhyb3cgZGVmYXVsdENvbnRyb2xsZXJCcmFuZENoZWNrRXhjZXB0aW9uKCdkZXNpcmVkU2l6ZScpO1xuICAgIH1cblxuICAgIHJldHVybiBSZWFkYWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyR2V0RGVzaXJlZFNpemUodGhpcyk7XG4gIH1cblxuICAvKipcbiAgICogQ2xvc2VzIHRoZSBjb250cm9sbGVkIHJlYWRhYmxlIHN0cmVhbS4gQ29uc3VtZXJzIHdpbGwgc3RpbGwgYmUgYWJsZSB0byByZWFkIGFueSBwcmV2aW91c2x5LWVucXVldWVkIGNodW5rcyBmcm9tXG4gICAqIHRoZSBzdHJlYW0sIGJ1dCBvbmNlIHRob3NlIGFyZSByZWFkLCB0aGUgc3RyZWFtIHdpbGwgYmVjb21lIGNsb3NlZC5cbiAgICovXG4gIGNsb3NlKCk6IHZvaWQge1xuICAgIGlmICghSXNSZWFkYWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyKHRoaXMpKSB7XG4gICAgICB0aHJvdyBkZWZhdWx0Q29udHJvbGxlckJyYW5kQ2hlY2tFeGNlcHRpb24oJ2Nsb3NlJyk7XG4gICAgfVxuXG4gICAgaWYgKCFSZWFkYWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyQ2FuQ2xvc2VPckVucXVldWUodGhpcykpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBzdHJlYW0gaXMgbm90IGluIGEgc3RhdGUgdGhhdCBwZXJtaXRzIGNsb3NlJyk7XG4gICAgfVxuXG4gICAgUmVhZGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlckNsb3NlKHRoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEVucXVldWVzIHRoZSBnaXZlbiBjaHVuayBgY2h1bmtgIGluIHRoZSBjb250cm9sbGVkIHJlYWRhYmxlIHN0cmVhbS5cbiAgICovXG4gIGVucXVldWUoY2h1bms6IFIpOiB2b2lkO1xuICBlbnF1ZXVlKGNodW5rOiBSID0gdW5kZWZpbmVkISk6IHZvaWQge1xuICAgIGlmICghSXNSZWFkYWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyKHRoaXMpKSB7XG4gICAgICB0aHJvdyBkZWZhdWx0Q29udHJvbGxlckJyYW5kQ2hlY2tFeGNlcHRpb24oJ2VucXVldWUnKTtcbiAgICB9XG5cbiAgICBpZiAoIVJlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXJDYW5DbG9zZU9yRW5xdWV1ZSh0aGlzKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIHN0cmVhbSBpcyBub3QgaW4gYSBzdGF0ZSB0aGF0IHBlcm1pdHMgZW5xdWV1ZScpO1xuICAgIH1cblxuICAgIHJldHVybiBSZWFkYWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyRW5xdWV1ZSh0aGlzLCBjaHVuayk7XG4gIH1cblxuICAvKipcbiAgICogRXJyb3JzIHRoZSBjb250cm9sbGVkIHJlYWRhYmxlIHN0cmVhbSwgbWFraW5nIGFsbCBmdXR1cmUgaW50ZXJhY3Rpb25zIHdpdGggaXQgZmFpbCB3aXRoIHRoZSBnaXZlbiBlcnJvciBgZWAuXG4gICAqL1xuICBlcnJvcihlOiBhbnkgPSB1bmRlZmluZWQpOiB2b2lkIHtcbiAgICBpZiAoIUlzUmVhZGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlcih0aGlzKSkge1xuICAgICAgdGhyb3cgZGVmYXVsdENvbnRyb2xsZXJCcmFuZENoZWNrRXhjZXB0aW9uKCdlcnJvcicpO1xuICAgIH1cblxuICAgIFJlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXJFcnJvcih0aGlzLCBlKTtcbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgW0NhbmNlbFN0ZXBzXShyZWFzb246IGFueSk6IFByb21pc2U8dm9pZD4ge1xuICAgIFJlc2V0UXVldWUodGhpcyk7XG4gICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fY2FuY2VsQWxnb3JpdGhtKHJlYXNvbik7XG4gICAgUmVhZGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlckNsZWFyQWxnb3JpdGhtcyh0aGlzKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBbUHVsbFN0ZXBzXShyZWFkUmVxdWVzdDogUmVhZFJlcXVlc3Q8Uj4pOiB2b2lkIHtcbiAgICBjb25zdCBzdHJlYW0gPSB0aGlzLl9jb250cm9sbGVkUmVhZGFibGVTdHJlYW07XG5cbiAgICBpZiAodGhpcy5fcXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgY2h1bmsgPSBEZXF1ZXVlVmFsdWUodGhpcyk7XG5cbiAgICAgIGlmICh0aGlzLl9jbG9zZVJlcXVlc3RlZCAmJiB0aGlzLl9xdWV1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgUmVhZGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlckNsZWFyQWxnb3JpdGhtcyh0aGlzKTtcbiAgICAgICAgUmVhZGFibGVTdHJlYW1DbG9zZShzdHJlYW0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgUmVhZGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlckNhbGxQdWxsSWZOZWVkZWQodGhpcyk7XG4gICAgICB9XG5cbiAgICAgIHJlYWRSZXF1ZXN0Ll9jaHVua1N0ZXBzKGNodW5rKTtcbiAgICB9IGVsc2Uge1xuICAgICAgUmVhZGFibGVTdHJlYW1BZGRSZWFkUmVxdWVzdChzdHJlYW0sIHJlYWRSZXF1ZXN0KTtcbiAgICAgIFJlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXJDYWxsUHVsbElmTmVlZGVkKHRoaXMpO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgW1JlbGVhc2VTdGVwc10oKTogdm9pZCB7XG4gICAgLy8gRG8gbm90aGluZy5cbiAgfVxufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhSZWFkYWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyLnByb3RvdHlwZSwge1xuICBjbG9zZTogeyBlbnVtZXJhYmxlOiB0cnVlIH0sXG4gIGVucXVldWU6IHsgZW51bWVyYWJsZTogdHJ1ZSB9LFxuICBlcnJvcjogeyBlbnVtZXJhYmxlOiB0cnVlIH0sXG4gIGRlc2lyZWRTaXplOiB7IGVudW1lcmFibGU6IHRydWUgfVxufSk7XG5zZXRGdW5jdGlvbk5hbWUoUmVhZGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlci5wcm90b3R5cGUuY2xvc2UsICdjbG9zZScpO1xuc2V0RnVuY3Rpb25OYW1lKFJlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXIucHJvdG90eXBlLmVucXVldWUsICdlbnF1ZXVlJyk7XG5zZXRGdW5jdGlvbk5hbWUoUmVhZGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlci5wcm90b3R5cGUuZXJyb3IsICdlcnJvcicpO1xuaWYgKHR5cGVvZiBTeW1ib2wudG9TdHJpbmdUYWcgPT09ICdzeW1ib2wnKSB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWFkYWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyLnByb3RvdHlwZSwgU3ltYm9sLnRvU3RyaW5nVGFnLCB7XG4gICAgdmFsdWU6ICdSZWFkYWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyJyxcbiAgICBjb25maWd1cmFibGU6IHRydWVcbiAgfSk7XG59XG5cbi8vIEFic3RyYWN0IG9wZXJhdGlvbnMgZm9yIHRoZSBSZWFkYWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyLlxuXG5mdW5jdGlvbiBJc1JlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXI8UiA9IGFueT4oeDogYW55KTogeCBpcyBSZWFkYWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyPFI+IHtcbiAgaWYgKCF0eXBlSXNPYmplY3QoeCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh4LCAnX2NvbnRyb2xsZWRSZWFkYWJsZVN0cmVhbScpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIHggaW5zdGFuY2VvZiBSZWFkYWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyO1xufVxuXG5mdW5jdGlvbiBSZWFkYWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyQ2FsbFB1bGxJZk5lZWRlZChjb250cm9sbGVyOiBSZWFkYWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyPGFueT4pOiB2b2lkIHtcbiAgY29uc3Qgc2hvdWxkUHVsbCA9IFJlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXJTaG91bGRDYWxsUHVsbChjb250cm9sbGVyKTtcbiAgaWYgKCFzaG91bGRQdWxsKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKGNvbnRyb2xsZXIuX3B1bGxpbmcpIHtcbiAgICBjb250cm9sbGVyLl9wdWxsQWdhaW4gPSB0cnVlO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGFzc2VydCghY29udHJvbGxlci5fcHVsbEFnYWluKTtcblxuICBjb250cm9sbGVyLl9wdWxsaW5nID0gdHJ1ZTtcblxuICBjb25zdCBwdWxsUHJvbWlzZSA9IGNvbnRyb2xsZXIuX3B1bGxBbGdvcml0aG0oKTtcbiAgdXBvblByb21pc2UoXG4gICAgcHVsbFByb21pc2UsXG4gICAgKCkgPT4ge1xuICAgICAgY29udHJvbGxlci5fcHVsbGluZyA9IGZhbHNlO1xuXG4gICAgICBpZiAoY29udHJvbGxlci5fcHVsbEFnYWluKSB7XG4gICAgICAgIGNvbnRyb2xsZXIuX3B1bGxBZ2FpbiA9IGZhbHNlO1xuICAgICAgICBSZWFkYWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyQ2FsbFB1bGxJZk5lZWRlZChjb250cm9sbGVyKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSxcbiAgICBlID0+IHtcbiAgICAgIFJlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXJFcnJvcihjb250cm9sbGVyLCBlKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgKTtcbn1cblxuZnVuY3Rpb24gUmVhZGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlclNob3VsZENhbGxQdWxsKGNvbnRyb2xsZXI6IFJlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXI8YW55Pik6IGJvb2xlYW4ge1xuICBjb25zdCBzdHJlYW0gPSBjb250cm9sbGVyLl9jb250cm9sbGVkUmVhZGFibGVTdHJlYW07XG5cbiAgaWYgKCFSZWFkYWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyQ2FuQ2xvc2VPckVucXVldWUoY29udHJvbGxlcikpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAoIWNvbnRyb2xsZXIuX3N0YXJ0ZWQpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAoSXNSZWFkYWJsZVN0cmVhbUxvY2tlZChzdHJlYW0pICYmIFJlYWRhYmxlU3RyZWFtR2V0TnVtUmVhZFJlcXVlc3RzKHN0cmVhbSkgPiAwKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBjb25zdCBkZXNpcmVkU2l6ZSA9IFJlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXJHZXREZXNpcmVkU2l6ZShjb250cm9sbGVyKTtcbiAgYXNzZXJ0KGRlc2lyZWRTaXplICE9PSBudWxsKTtcbiAgaWYgKGRlc2lyZWRTaXplISA+IDApIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gUmVhZGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlckNsZWFyQWxnb3JpdGhtcyhjb250cm9sbGVyOiBSZWFkYWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyPGFueT4pIHtcbiAgY29udHJvbGxlci5fcHVsbEFsZ29yaXRobSA9IHVuZGVmaW5lZCE7XG4gIGNvbnRyb2xsZXIuX2NhbmNlbEFsZ29yaXRobSA9IHVuZGVmaW5lZCE7XG4gIGNvbnRyb2xsZXIuX3N0cmF0ZWd5U2l6ZUFsZ29yaXRobSA9IHVuZGVmaW5lZCE7XG59XG5cbi8vIEEgY2xpZW50IG9mIFJlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXIgbWF5IHVzZSB0aGVzZSBmdW5jdGlvbnMgZGlyZWN0bHkgdG8gYnlwYXNzIHN0YXRlIGNoZWNrLlxuXG5leHBvcnQgZnVuY3Rpb24gUmVhZGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlckNsb3NlKGNvbnRyb2xsZXI6IFJlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXI8YW55Pikge1xuICBpZiAoIVJlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXJDYW5DbG9zZU9yRW5xdWV1ZShjb250cm9sbGVyKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IHN0cmVhbSA9IGNvbnRyb2xsZXIuX2NvbnRyb2xsZWRSZWFkYWJsZVN0cmVhbTtcblxuICBjb250cm9sbGVyLl9jbG9zZVJlcXVlc3RlZCA9IHRydWU7XG5cbiAgaWYgKGNvbnRyb2xsZXIuX3F1ZXVlLmxlbmd0aCA9PT0gMCkge1xuICAgIFJlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXJDbGVhckFsZ29yaXRobXMoY29udHJvbGxlcik7XG4gICAgUmVhZGFibGVTdHJlYW1DbG9zZShzdHJlYW0pO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBSZWFkYWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyRW5xdWV1ZTxSPihcbiAgY29udHJvbGxlcjogUmVhZGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlcjxSPixcbiAgY2h1bms6IFJcbik6IHZvaWQge1xuICBpZiAoIVJlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXJDYW5DbG9zZU9yRW5xdWV1ZShjb250cm9sbGVyKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IHN0cmVhbSA9IGNvbnRyb2xsZXIuX2NvbnRyb2xsZWRSZWFkYWJsZVN0cmVhbTtcblxuICBpZiAoSXNSZWFkYWJsZVN0cmVhbUxvY2tlZChzdHJlYW0pICYmIFJlYWRhYmxlU3RyZWFtR2V0TnVtUmVhZFJlcXVlc3RzKHN0cmVhbSkgPiAwKSB7XG4gICAgUmVhZGFibGVTdHJlYW1GdWxmaWxsUmVhZFJlcXVlc3Qoc3RyZWFtLCBjaHVuaywgZmFsc2UpO1xuICB9IGVsc2Uge1xuICAgIGxldCBjaHVua1NpemU7XG4gICAgdHJ5IHtcbiAgICAgIGNodW5rU2l6ZSA9IGNvbnRyb2xsZXIuX3N0cmF0ZWd5U2l6ZUFsZ29yaXRobShjaHVuayk7XG4gICAgfSBjYXRjaCAoY2h1bmtTaXplRSkge1xuICAgICAgUmVhZGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlckVycm9yKGNvbnRyb2xsZXIsIGNodW5rU2l6ZUUpO1xuICAgICAgdGhyb3cgY2h1bmtTaXplRTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgRW5xdWV1ZVZhbHVlV2l0aFNpemUoY29udHJvbGxlciwgY2h1bmssIGNodW5rU2l6ZSk7XG4gICAgfSBjYXRjaCAoZW5xdWV1ZUUpIHtcbiAgICAgIFJlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXJFcnJvcihjb250cm9sbGVyLCBlbnF1ZXVlRSk7XG4gICAgICB0aHJvdyBlbnF1ZXVlRTtcbiAgICB9XG4gIH1cblxuICBSZWFkYWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyQ2FsbFB1bGxJZk5lZWRlZChjb250cm9sbGVyKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFJlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXJFcnJvcihjb250cm9sbGVyOiBSZWFkYWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyPGFueT4sIGU6IGFueSkge1xuICBjb25zdCBzdHJlYW0gPSBjb250cm9sbGVyLl9jb250cm9sbGVkUmVhZGFibGVTdHJlYW07XG5cbiAgaWYgKHN0cmVhbS5fc3RhdGUgIT09ICdyZWFkYWJsZScpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBSZXNldFF1ZXVlKGNvbnRyb2xsZXIpO1xuXG4gIFJlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXJDbGVhckFsZ29yaXRobXMoY29udHJvbGxlcik7XG4gIFJlYWRhYmxlU3RyZWFtRXJyb3Ioc3RyZWFtLCBlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFJlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXJHZXREZXNpcmVkU2l6ZShcbiAgY29udHJvbGxlcjogUmVhZGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlcjxhbnk+XG4pOiBudW1iZXIgfCBudWxsIHtcbiAgY29uc3Qgc3RhdGUgPSBjb250cm9sbGVyLl9jb250cm9sbGVkUmVhZGFibGVTdHJlYW0uX3N0YXRlO1xuXG4gIGlmIChzdGF0ZSA9PT0gJ2Vycm9yZWQnKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgaWYgKHN0YXRlID09PSAnY2xvc2VkJykge1xuICAgIHJldHVybiAwO1xuICB9XG5cbiAgcmV0dXJuIGNvbnRyb2xsZXIuX3N0cmF0ZWd5SFdNIC0gY29udHJvbGxlci5fcXVldWVUb3RhbFNpemU7XG59XG5cbi8vIFRoaXMgaXMgdXNlZCBpbiB0aGUgaW1wbGVtZW50YXRpb24gb2YgVHJhbnNmb3JtU3RyZWFtLlxuZXhwb3J0IGZ1bmN0aW9uIFJlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXJIYXNCYWNrcHJlc3N1cmUoXG4gIGNvbnRyb2xsZXI6IFJlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXI8YW55PlxuKTogYm9vbGVhbiB7XG4gIGlmIChSZWFkYWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyU2hvdWxkQ2FsbFB1bGwoY29udHJvbGxlcikpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFJlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXJDYW5DbG9zZU9yRW5xdWV1ZShcbiAgY29udHJvbGxlcjogUmVhZGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlcjxhbnk+XG4pOiBib29sZWFuIHtcbiAgY29uc3Qgc3RhdGUgPSBjb250cm9sbGVyLl9jb250cm9sbGVkUmVhZGFibGVTdHJlYW0uX3N0YXRlO1xuXG4gIGlmICghY29udHJvbGxlci5fY2xvc2VSZXF1ZXN0ZWQgJiYgc3RhdGUgPT09ICdyZWFkYWJsZScpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFNldFVwUmVhZGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlcjxSPihzdHJlYW06IFJlYWRhYmxlU3RyZWFtPFI+LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiBSZWFkYWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyPFI+LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydEFsZ29yaXRobTogKCkgPT4gdm9pZCB8IFByb21pc2VMaWtlPHZvaWQ+LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwdWxsQWxnb3JpdGhtOiAoKSA9PiBQcm9taXNlPHZvaWQ+LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxBbGdvcml0aG06IChyZWFzb246IGFueSkgPT4gUHJvbWlzZTx2b2lkPixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlnaFdhdGVyTWFyazogbnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplQWxnb3JpdGhtOiBRdWV1aW5nU3RyYXRlZ3lTaXplQ2FsbGJhY2s8Uj4pIHtcbiAgYXNzZXJ0KHN0cmVhbS5fcmVhZGFibGVTdHJlYW1Db250cm9sbGVyID09PSB1bmRlZmluZWQpO1xuXG4gIGNvbnRyb2xsZXIuX2NvbnRyb2xsZWRSZWFkYWJsZVN0cmVhbSA9IHN0cmVhbTtcblxuICBjb250cm9sbGVyLl9xdWV1ZSA9IHVuZGVmaW5lZCE7XG4gIGNvbnRyb2xsZXIuX3F1ZXVlVG90YWxTaXplID0gdW5kZWZpbmVkITtcbiAgUmVzZXRRdWV1ZShjb250cm9sbGVyKTtcblxuICBjb250cm9sbGVyLl9zdGFydGVkID0gZmFsc2U7XG4gIGNvbnRyb2xsZXIuX2Nsb3NlUmVxdWVzdGVkID0gZmFsc2U7XG4gIGNvbnRyb2xsZXIuX3B1bGxBZ2FpbiA9IGZhbHNlO1xuICBjb250cm9sbGVyLl9wdWxsaW5nID0gZmFsc2U7XG5cbiAgY29udHJvbGxlci5fc3RyYXRlZ3lTaXplQWxnb3JpdGhtID0gc2l6ZUFsZ29yaXRobTtcbiAgY29udHJvbGxlci5fc3RyYXRlZ3lIV00gPSBoaWdoV2F0ZXJNYXJrO1xuXG4gIGNvbnRyb2xsZXIuX3B1bGxBbGdvcml0aG0gPSBwdWxsQWxnb3JpdGhtO1xuICBjb250cm9sbGVyLl9jYW5jZWxBbGdvcml0aG0gPSBjYW5jZWxBbGdvcml0aG07XG5cbiAgc3RyZWFtLl9yZWFkYWJsZVN0cmVhbUNvbnRyb2xsZXIgPSBjb250cm9sbGVyO1xuXG4gIGNvbnN0IHN0YXJ0UmVzdWx0ID0gc3RhcnRBbGdvcml0aG0oKTtcbiAgdXBvblByb21pc2UoXG4gICAgcHJvbWlzZVJlc29sdmVkV2l0aChzdGFydFJlc3VsdCksXG4gICAgKCkgPT4ge1xuICAgICAgY29udHJvbGxlci5fc3RhcnRlZCA9IHRydWU7XG5cbiAgICAgIGFzc2VydCghY29udHJvbGxlci5fcHVsbGluZyk7XG4gICAgICBhc3NlcnQoIWNvbnRyb2xsZXIuX3B1bGxBZ2Fpbik7XG5cbiAgICAgIFJlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXJDYWxsUHVsbElmTmVlZGVkKGNvbnRyb2xsZXIpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSxcbiAgICByID0+IHtcbiAgICAgIFJlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXJFcnJvcihjb250cm9sbGVyLCByKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFNldFVwUmVhZGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlckZyb21VbmRlcmx5aW5nU291cmNlPFI+KFxuICBzdHJlYW06IFJlYWRhYmxlU3RyZWFtPFI+LFxuICB1bmRlcmx5aW5nU291cmNlOiBWYWxpZGF0ZWRVbmRlcmx5aW5nU291cmNlPFI+LFxuICBoaWdoV2F0ZXJNYXJrOiBudW1iZXIsXG4gIHNpemVBbGdvcml0aG06IFF1ZXVpbmdTdHJhdGVneVNpemVDYWxsYmFjazxSPlxuKSB7XG4gIGNvbnN0IGNvbnRyb2xsZXI6IFJlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXI8Uj4gPSBPYmplY3QuY3JlYXRlKFJlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXIucHJvdG90eXBlKTtcblxuICBsZXQgc3RhcnRBbGdvcml0aG06ICgpID0+IHZvaWQgfCBQcm9taXNlTGlrZTx2b2lkPjtcbiAgbGV0IHB1bGxBbGdvcml0aG06ICgpID0+IFByb21pc2U8dm9pZD47XG4gIGxldCBjYW5jZWxBbGdvcml0aG06IChyZWFzb246IGFueSkgPT4gUHJvbWlzZTx2b2lkPjtcblxuICBpZiAodW5kZXJseWluZ1NvdXJjZS5zdGFydCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgc3RhcnRBbGdvcml0aG0gPSAoKSA9PiB1bmRlcmx5aW5nU291cmNlLnN0YXJ0IShjb250cm9sbGVyKTtcbiAgfSBlbHNlIHtcbiAgICBzdGFydEFsZ29yaXRobSA9ICgpID0+IHVuZGVmaW5lZDtcbiAgfVxuICBpZiAodW5kZXJseWluZ1NvdXJjZS5wdWxsICE9PSB1bmRlZmluZWQpIHtcbiAgICBwdWxsQWxnb3JpdGhtID0gKCkgPT4gdW5kZXJseWluZ1NvdXJjZS5wdWxsIShjb250cm9sbGVyKTtcbiAgfSBlbHNlIHtcbiAgICBwdWxsQWxnb3JpdGhtID0gKCkgPT4gcHJvbWlzZVJlc29sdmVkV2l0aCh1bmRlZmluZWQpO1xuICB9XG4gIGlmICh1bmRlcmx5aW5nU291cmNlLmNhbmNlbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgY2FuY2VsQWxnb3JpdGhtID0gcmVhc29uID0+IHVuZGVybHlpbmdTb3VyY2UuY2FuY2VsIShyZWFzb24pO1xuICB9IGVsc2Uge1xuICAgIGNhbmNlbEFsZ29yaXRobSA9ICgpID0+IHByb21pc2VSZXNvbHZlZFdpdGgodW5kZWZpbmVkKTtcbiAgfVxuXG4gIFNldFVwUmVhZGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlcihcbiAgICBzdHJlYW0sIGNvbnRyb2xsZXIsIHN0YXJ0QWxnb3JpdGhtLCBwdWxsQWxnb3JpdGhtLCBjYW5jZWxBbGdvcml0aG0sIGhpZ2hXYXRlck1hcmssIHNpemVBbGdvcml0aG1cbiAgKTtcbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9ucyBmb3IgdGhlIFJlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXIuXG5cbmZ1bmN0aW9uIGRlZmF1bHRDb250cm9sbGVyQnJhbmRDaGVja0V4Y2VwdGlvbihuYW1lOiBzdHJpbmcpOiBUeXBlRXJyb3Ige1xuICByZXR1cm4gbmV3IFR5cGVFcnJvcihcbiAgICBgUmVhZGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlci5wcm90b3R5cGUuJHtuYW1lfSBjYW4gb25seSBiZSB1c2VkIG9uIGEgUmVhZGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlcmApO1xufVxuIiwgImltcG9ydCB7XG4gIENyZWF0ZVJlYWRhYmxlQnl0ZVN0cmVhbSxcbiAgQ3JlYXRlUmVhZGFibGVTdHJlYW0sXG4gIHR5cGUgRGVmYXVsdFJlYWRhYmxlU3RyZWFtLFxuICBJc1JlYWRhYmxlU3RyZWFtLFxuICB0eXBlIFJlYWRhYmxlQnl0ZVN0cmVhbSxcbiAgUmVhZGFibGVTdHJlYW0sXG4gIFJlYWRhYmxlU3RyZWFtQ2FuY2VsLFxuICB0eXBlIFJlYWRhYmxlU3RyZWFtUmVhZGVyXG59IGZyb20gJy4uL3JlYWRhYmxlLXN0cmVhbSc7XG5pbXBvcnQgeyBSZWFkYWJsZVN0cmVhbVJlYWRlckdlbmVyaWNSZWxlYXNlIH0gZnJvbSAnLi9nZW5lcmljLXJlYWRlcic7XG5pbXBvcnQge1xuICBBY3F1aXJlUmVhZGFibGVTdHJlYW1EZWZhdWx0UmVhZGVyLFxuICBJc1JlYWRhYmxlU3RyZWFtRGVmYXVsdFJlYWRlcixcbiAgUmVhZGFibGVTdHJlYW1EZWZhdWx0UmVhZGVyUmVhZCxcbiAgdHlwZSBSZWFkUmVxdWVzdFxufSBmcm9tICcuL2RlZmF1bHQtcmVhZGVyJztcbmltcG9ydCB7XG4gIEFjcXVpcmVSZWFkYWJsZVN0cmVhbUJZT0JSZWFkZXIsXG4gIElzUmVhZGFibGVTdHJlYW1CWU9CUmVhZGVyLFxuICBSZWFkYWJsZVN0cmVhbUJZT0JSZWFkZXJSZWFkLFxuICB0eXBlIFJlYWRJbnRvUmVxdWVzdFxufSBmcm9tICcuL2J5b2ItcmVhZGVyJztcbmltcG9ydCBhc3NlcnQgZnJvbSAnLi4vLi4vc3R1Yi9hc3NlcnQnO1xuaW1wb3J0IHsgbmV3UHJvbWlzZSwgcHJvbWlzZVJlc29sdmVkV2l0aCwgcXVldWVNaWNyb3Rhc2ssIHVwb25SZWplY3Rpb24gfSBmcm9tICcuLi9oZWxwZXJzL3dlYmlkbCc7XG5pbXBvcnQge1xuICBSZWFkYWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyQ2xvc2UsXG4gIFJlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXJFbnF1ZXVlLFxuICBSZWFkYWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyRXJyb3Jcbn0gZnJvbSAnLi9kZWZhdWx0LWNvbnRyb2xsZXInO1xuaW1wb3J0IHtcbiAgSXNSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyLFxuICBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyQ2xvc2UsXG4gIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJFbnF1ZXVlLFxuICBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyRXJyb3IsXG4gIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJHZXRCWU9CUmVxdWVzdCxcbiAgUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlclJlc3BvbmQsXG4gIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJSZXNwb25kV2l0aE5ld1ZpZXdcbn0gZnJvbSAnLi9ieXRlLXN0cmVhbS1jb250cm9sbGVyJztcbmltcG9ydCB7IENyZWF0ZUFycmF5RnJvbUxpc3QgfSBmcm9tICcuLi9hYnN0cmFjdC1vcHMvZWNtYXNjcmlwdCc7XG5pbXBvcnQgeyBDbG9uZUFzVWludDhBcnJheSB9IGZyb20gJy4uL2Fic3RyYWN0LW9wcy9taXNjZWxsYW5lb3VzJztcbmltcG9ydCB0eXBlIHsgTm9uU2hhcmVkIH0gZnJvbSAnLi4vaGVscGVycy9hcnJheS1idWZmZXItdmlldyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBSZWFkYWJsZVN0cmVhbVRlZTxSPihzdHJlYW06IFJlYWRhYmxlU3RyZWFtPFI+LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb25lRm9yQnJhbmNoMjogYm9vbGVhbik6IFtSZWFkYWJsZVN0cmVhbTxSPiwgUmVhZGFibGVTdHJlYW08Uj5dIHtcbiAgYXNzZXJ0KElzUmVhZGFibGVTdHJlYW0oc3RyZWFtKSk7XG4gIGFzc2VydCh0eXBlb2YgY2xvbmVGb3JCcmFuY2gyID09PSAnYm9vbGVhbicpO1xuICBpZiAoSXNSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyKHN0cmVhbS5fcmVhZGFibGVTdHJlYW1Db250cm9sbGVyKSkge1xuICAgIHJldHVybiBSZWFkYWJsZUJ5dGVTdHJlYW1UZWUoc3RyZWFtIGFzIHVua25vd24gYXMgUmVhZGFibGVCeXRlU3RyZWFtKSBhc1xuICAgICAgdW5rbm93biBhcyBbUmVhZGFibGVTdHJlYW08Uj4sIFJlYWRhYmxlU3RyZWFtPFI+XTtcbiAgfVxuICByZXR1cm4gUmVhZGFibGVTdHJlYW1EZWZhdWx0VGVlKHN0cmVhbSwgY2xvbmVGb3JCcmFuY2gyKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFJlYWRhYmxlU3RyZWFtRGVmYXVsdFRlZTxSPihcbiAgc3RyZWFtOiBSZWFkYWJsZVN0cmVhbTxSPixcbiAgY2xvbmVGb3JCcmFuY2gyOiBib29sZWFuXG4pOiBbRGVmYXVsdFJlYWRhYmxlU3RyZWFtPFI+LCBEZWZhdWx0UmVhZGFibGVTdHJlYW08Uj5dIHtcbiAgYXNzZXJ0KElzUmVhZGFibGVTdHJlYW0oc3RyZWFtKSk7XG4gIGFzc2VydCh0eXBlb2YgY2xvbmVGb3JCcmFuY2gyID09PSAnYm9vbGVhbicpO1xuXG4gIGNvbnN0IHJlYWRlciA9IEFjcXVpcmVSZWFkYWJsZVN0cmVhbURlZmF1bHRSZWFkZXI8Uj4oc3RyZWFtKTtcblxuICBsZXQgcmVhZGluZyA9IGZhbHNlO1xuICBsZXQgcmVhZEFnYWluID0gZmFsc2U7XG4gIGxldCBjYW5jZWxlZDEgPSBmYWxzZTtcbiAgbGV0IGNhbmNlbGVkMiA9IGZhbHNlO1xuICBsZXQgcmVhc29uMTogYW55O1xuICBsZXQgcmVhc29uMjogYW55O1xuICBsZXQgYnJhbmNoMTogRGVmYXVsdFJlYWRhYmxlU3RyZWFtPFI+O1xuICBsZXQgYnJhbmNoMjogRGVmYXVsdFJlYWRhYmxlU3RyZWFtPFI+O1xuXG4gIGxldCByZXNvbHZlQ2FuY2VsUHJvbWlzZTogKHZhbHVlOiB1bmRlZmluZWQgfCBQcm9taXNlPHVuZGVmaW5lZD4pID0+IHZvaWQ7XG4gIGNvbnN0IGNhbmNlbFByb21pc2UgPSBuZXdQcm9taXNlPHVuZGVmaW5lZD4ocmVzb2x2ZSA9PiB7XG4gICAgcmVzb2x2ZUNhbmNlbFByb21pc2UgPSByZXNvbHZlO1xuICB9KTtcblxuICBmdW5jdGlvbiBwdWxsQWxnb3JpdGhtKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmIChyZWFkaW5nKSB7XG4gICAgICByZWFkQWdhaW4gPSB0cnVlO1xuICAgICAgcmV0dXJuIHByb21pc2VSZXNvbHZlZFdpdGgodW5kZWZpbmVkKTtcbiAgICB9XG5cbiAgICByZWFkaW5nID0gdHJ1ZTtcblxuICAgIGNvbnN0IHJlYWRSZXF1ZXN0OiBSZWFkUmVxdWVzdDxSPiA9IHtcbiAgICAgIF9jaHVua1N0ZXBzOiBjaHVuayA9PiB7XG4gICAgICAgIC8vIFRoaXMgbmVlZHMgdG8gYmUgZGVsYXllZCBhIG1pY3JvdGFzayBiZWNhdXNlIGl0IHRha2VzIGF0IGxlYXN0IGEgbWljcm90YXNrIHRvIGRldGVjdCBlcnJvcnMgKHVzaW5nXG4gICAgICAgIC8vIHJlYWRlci5fY2xvc2VkUHJvbWlzZSBiZWxvdyksIGFuZCB3ZSB3YW50IGVycm9ycyBpbiBzdHJlYW0gdG8gZXJyb3IgYm90aCBicmFuY2hlcyBpbW1lZGlhdGVseS4gV2UgY2Fubm90IGxldFxuICAgICAgICAvLyBzdWNjZXNzZnVsIHN5bmNocm9ub3VzbHktYXZhaWxhYmxlIHJlYWRzIGdldCBhaGVhZCBvZiBhc3luY2hyb25vdXNseS1hdmFpbGFibGUgZXJyb3JzLlxuICAgICAgICBxdWV1ZU1pY3JvdGFzaygoKSA9PiB7XG4gICAgICAgICAgcmVhZEFnYWluID0gZmFsc2U7XG4gICAgICAgICAgY29uc3QgY2h1bmsxID0gY2h1bms7XG4gICAgICAgICAgY29uc3QgY2h1bmsyID0gY2h1bms7XG5cbiAgICAgICAgICAvLyBUaGVyZSBpcyBubyB3YXkgdG8gYWNjZXNzIHRoZSBjbG9uaW5nIGNvZGUgcmlnaHQgbm93IGluIHRoZSByZWZlcmVuY2UgaW1wbGVtZW50YXRpb24uXG4gICAgICAgICAgLy8gSWYgd2UgYWRkIG9uZSB0aGVuIHdlJ2xsIG5lZWQgYW4gaW1wbGVtZW50YXRpb24gZm9yIHNlcmlhbGl6YWJsZSBvYmplY3RzLlxuICAgICAgICAgIC8vIGlmICghY2FuY2VsZWQyICYmIGNsb25lRm9yQnJhbmNoMikge1xuICAgICAgICAgIC8vICAgY2h1bmsyID0gU3RydWN0dXJlZERlc2VyaWFsaXplKFN0cnVjdHVyZWRTZXJpYWxpemUoY2h1bmsyKSk7XG4gICAgICAgICAgLy8gfVxuXG4gICAgICAgICAgaWYgKCFjYW5jZWxlZDEpIHtcbiAgICAgICAgICAgIFJlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXJFbnF1ZXVlKGJyYW5jaDEuX3JlYWRhYmxlU3RyZWFtQ29udHJvbGxlciwgY2h1bmsxKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCFjYW5jZWxlZDIpIHtcbiAgICAgICAgICAgIFJlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXJFbnF1ZXVlKGJyYW5jaDIuX3JlYWRhYmxlU3RyZWFtQ29udHJvbGxlciwgY2h1bmsyKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZWFkaW5nID0gZmFsc2U7XG4gICAgICAgICAgaWYgKHJlYWRBZ2Fpbikge1xuICAgICAgICAgICAgcHVsbEFsZ29yaXRobSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgX2Nsb3NlU3RlcHM6ICgpID0+IHtcbiAgICAgICAgcmVhZGluZyA9IGZhbHNlO1xuICAgICAgICBpZiAoIWNhbmNlbGVkMSkge1xuICAgICAgICAgIFJlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXJDbG9zZShicmFuY2gxLl9yZWFkYWJsZVN0cmVhbUNvbnRyb2xsZXIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghY2FuY2VsZWQyKSB7XG4gICAgICAgICAgUmVhZGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlckNsb3NlKGJyYW5jaDIuX3JlYWRhYmxlU3RyZWFtQ29udHJvbGxlcik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWNhbmNlbGVkMSB8fCAhY2FuY2VsZWQyKSB7XG4gICAgICAgICAgcmVzb2x2ZUNhbmNlbFByb21pc2UodW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIF9lcnJvclN0ZXBzOiAoKSA9PiB7XG4gICAgICAgIHJlYWRpbmcgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9O1xuICAgIFJlYWRhYmxlU3RyZWFtRGVmYXVsdFJlYWRlclJlYWQocmVhZGVyLCByZWFkUmVxdWVzdCk7XG5cbiAgICByZXR1cm4gcHJvbWlzZVJlc29sdmVkV2l0aCh1bmRlZmluZWQpO1xuICB9XG5cbiAgZnVuY3Rpb24gY2FuY2VsMUFsZ29yaXRobShyZWFzb246IGFueSk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNhbmNlbGVkMSA9IHRydWU7XG4gICAgcmVhc29uMSA9IHJlYXNvbjtcbiAgICBpZiAoY2FuY2VsZWQyKSB7XG4gICAgICBjb25zdCBjb21wb3NpdGVSZWFzb24gPSBDcmVhdGVBcnJheUZyb21MaXN0KFtyZWFzb24xLCByZWFzb24yXSk7XG4gICAgICBjb25zdCBjYW5jZWxSZXN1bHQgPSBSZWFkYWJsZVN0cmVhbUNhbmNlbChzdHJlYW0sIGNvbXBvc2l0ZVJlYXNvbik7XG4gICAgICByZXNvbHZlQ2FuY2VsUHJvbWlzZShjYW5jZWxSZXN1bHQpO1xuICAgIH1cbiAgICByZXR1cm4gY2FuY2VsUHJvbWlzZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNhbmNlbDJBbGdvcml0aG0ocmVhc29uOiBhbnkpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjYW5jZWxlZDIgPSB0cnVlO1xuICAgIHJlYXNvbjIgPSByZWFzb247XG4gICAgaWYgKGNhbmNlbGVkMSkge1xuICAgICAgY29uc3QgY29tcG9zaXRlUmVhc29uID0gQ3JlYXRlQXJyYXlGcm9tTGlzdChbcmVhc29uMSwgcmVhc29uMl0pO1xuICAgICAgY29uc3QgY2FuY2VsUmVzdWx0ID0gUmVhZGFibGVTdHJlYW1DYW5jZWwoc3RyZWFtLCBjb21wb3NpdGVSZWFzb24pO1xuICAgICAgcmVzb2x2ZUNhbmNlbFByb21pc2UoY2FuY2VsUmVzdWx0KTtcbiAgICB9XG4gICAgcmV0dXJuIGNhbmNlbFByb21pc2U7XG4gIH1cblxuICBmdW5jdGlvbiBzdGFydEFsZ29yaXRobSgpIHtcbiAgICAvLyBkbyBub3RoaW5nXG4gIH1cblxuICBicmFuY2gxID0gQ3JlYXRlUmVhZGFibGVTdHJlYW0oc3RhcnRBbGdvcml0aG0sIHB1bGxBbGdvcml0aG0sIGNhbmNlbDFBbGdvcml0aG0pO1xuICBicmFuY2gyID0gQ3JlYXRlUmVhZGFibGVTdHJlYW0oc3RhcnRBbGdvcml0aG0sIHB1bGxBbGdvcml0aG0sIGNhbmNlbDJBbGdvcml0aG0pO1xuXG4gIHVwb25SZWplY3Rpb24ocmVhZGVyLl9jbG9zZWRQcm9taXNlLCAocjogYW55KSA9PiB7XG4gICAgUmVhZGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlckVycm9yKGJyYW5jaDEuX3JlYWRhYmxlU3RyZWFtQ29udHJvbGxlciwgcik7XG4gICAgUmVhZGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlckVycm9yKGJyYW5jaDIuX3JlYWRhYmxlU3RyZWFtQ29udHJvbGxlciwgcik7XG4gICAgaWYgKCFjYW5jZWxlZDEgfHwgIWNhbmNlbGVkMikge1xuICAgICAgcmVzb2x2ZUNhbmNlbFByb21pc2UodW5kZWZpbmVkKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH0pO1xuXG4gIHJldHVybiBbYnJhbmNoMSwgYnJhbmNoMl07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBSZWFkYWJsZUJ5dGVTdHJlYW1UZWUoc3RyZWFtOiBSZWFkYWJsZUJ5dGVTdHJlYW0pOiBbUmVhZGFibGVCeXRlU3RyZWFtLCBSZWFkYWJsZUJ5dGVTdHJlYW1dIHtcbiAgYXNzZXJ0KElzUmVhZGFibGVTdHJlYW0oc3RyZWFtKSk7XG4gIGFzc2VydChJc1JlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXIoc3RyZWFtLl9yZWFkYWJsZVN0cmVhbUNvbnRyb2xsZXIpKTtcblxuICBsZXQgcmVhZGVyOiBSZWFkYWJsZVN0cmVhbVJlYWRlcjxOb25TaGFyZWQ8VWludDhBcnJheT4+ID0gQWNxdWlyZVJlYWRhYmxlU3RyZWFtRGVmYXVsdFJlYWRlcihzdHJlYW0pO1xuICBsZXQgcmVhZGluZyA9IGZhbHNlO1xuICBsZXQgcmVhZEFnYWluRm9yQnJhbmNoMSA9IGZhbHNlO1xuICBsZXQgcmVhZEFnYWluRm9yQnJhbmNoMiA9IGZhbHNlO1xuICBsZXQgY2FuY2VsZWQxID0gZmFsc2U7XG4gIGxldCBjYW5jZWxlZDIgPSBmYWxzZTtcbiAgbGV0IHJlYXNvbjE6IGFueTtcbiAgbGV0IHJlYXNvbjI6IGFueTtcbiAgbGV0IGJyYW5jaDE6IFJlYWRhYmxlQnl0ZVN0cmVhbTtcbiAgbGV0IGJyYW5jaDI6IFJlYWRhYmxlQnl0ZVN0cmVhbTtcblxuICBsZXQgcmVzb2x2ZUNhbmNlbFByb21pc2U6ICh2YWx1ZTogdW5kZWZpbmVkIHwgUHJvbWlzZTx1bmRlZmluZWQ+KSA9PiB2b2lkO1xuICBjb25zdCBjYW5jZWxQcm9taXNlID0gbmV3UHJvbWlzZTx2b2lkPihyZXNvbHZlID0+IHtcbiAgICByZXNvbHZlQ2FuY2VsUHJvbWlzZSA9IHJlc29sdmU7XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIGZvcndhcmRSZWFkZXJFcnJvcih0aGlzUmVhZGVyOiBSZWFkYWJsZVN0cmVhbVJlYWRlcjxOb25TaGFyZWQ8VWludDhBcnJheT4+KSB7XG4gICAgdXBvblJlamVjdGlvbih0aGlzUmVhZGVyLl9jbG9zZWRQcm9taXNlLCByID0+IHtcbiAgICAgIGlmICh0aGlzUmVhZGVyICE9PSByZWFkZXIpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyRXJyb3IoYnJhbmNoMS5fcmVhZGFibGVTdHJlYW1Db250cm9sbGVyLCByKTtcbiAgICAgIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJFcnJvcihicmFuY2gyLl9yZWFkYWJsZVN0cmVhbUNvbnRyb2xsZXIsIHIpO1xuICAgICAgaWYgKCFjYW5jZWxlZDEgfHwgIWNhbmNlbGVkMikge1xuICAgICAgICByZXNvbHZlQ2FuY2VsUHJvbWlzZSh1bmRlZmluZWQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBwdWxsV2l0aERlZmF1bHRSZWFkZXIoKSB7XG4gICAgaWYgKElzUmVhZGFibGVTdHJlYW1CWU9CUmVhZGVyKHJlYWRlcikpIHtcbiAgICAgIGFzc2VydChyZWFkZXIuX3JlYWRJbnRvUmVxdWVzdHMubGVuZ3RoID09PSAwKTtcbiAgICAgIFJlYWRhYmxlU3RyZWFtUmVhZGVyR2VuZXJpY1JlbGVhc2UocmVhZGVyKTtcblxuICAgICAgcmVhZGVyID0gQWNxdWlyZVJlYWRhYmxlU3RyZWFtRGVmYXVsdFJlYWRlcihzdHJlYW0pO1xuICAgICAgZm9yd2FyZFJlYWRlckVycm9yKHJlYWRlcik7XG4gICAgfVxuXG4gICAgY29uc3QgcmVhZFJlcXVlc3Q6IFJlYWRSZXF1ZXN0PE5vblNoYXJlZDxVaW50OEFycmF5Pj4gPSB7XG4gICAgICBfY2h1bmtTdGVwczogY2h1bmsgPT4ge1xuICAgICAgICAvLyBUaGlzIG5lZWRzIHRvIGJlIGRlbGF5ZWQgYSBtaWNyb3Rhc2sgYmVjYXVzZSBpdCB0YWtlcyBhdCBsZWFzdCBhIG1pY3JvdGFzayB0byBkZXRlY3QgZXJyb3JzICh1c2luZ1xuICAgICAgICAvLyByZWFkZXIuX2Nsb3NlZFByb21pc2UgYmVsb3cpLCBhbmQgd2Ugd2FudCBlcnJvcnMgaW4gc3RyZWFtIHRvIGVycm9yIGJvdGggYnJhbmNoZXMgaW1tZWRpYXRlbHkuIFdlIGNhbm5vdCBsZXRcbiAgICAgICAgLy8gc3VjY2Vzc2Z1bCBzeW5jaHJvbm91c2x5LWF2YWlsYWJsZSByZWFkcyBnZXQgYWhlYWQgb2YgYXN5bmNocm9ub3VzbHktYXZhaWxhYmxlIGVycm9ycy5cbiAgICAgICAgcXVldWVNaWNyb3Rhc2soKCkgPT4ge1xuICAgICAgICAgIHJlYWRBZ2FpbkZvckJyYW5jaDEgPSBmYWxzZTtcbiAgICAgICAgICByZWFkQWdhaW5Gb3JCcmFuY2gyID0gZmFsc2U7XG5cbiAgICAgICAgICBjb25zdCBjaHVuazEgPSBjaHVuaztcbiAgICAgICAgICBsZXQgY2h1bmsyID0gY2h1bms7XG4gICAgICAgICAgaWYgKCFjYW5jZWxlZDEgJiYgIWNhbmNlbGVkMikge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgY2h1bmsyID0gQ2xvbmVBc1VpbnQ4QXJyYXkoY2h1bmspO1xuICAgICAgICAgICAgfSBjYXRjaCAoY2xvbmVFKSB7XG4gICAgICAgICAgICAgIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJFcnJvcihicmFuY2gxLl9yZWFkYWJsZVN0cmVhbUNvbnRyb2xsZXIsIGNsb25lRSk7XG4gICAgICAgICAgICAgIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJFcnJvcihicmFuY2gyLl9yZWFkYWJsZVN0cmVhbUNvbnRyb2xsZXIsIGNsb25lRSk7XG4gICAgICAgICAgICAgIHJlc29sdmVDYW5jZWxQcm9taXNlKFJlYWRhYmxlU3RyZWFtQ2FuY2VsKHN0cmVhbSwgY2xvbmVFKSk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIWNhbmNlbGVkMSkge1xuICAgICAgICAgICAgUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlckVucXVldWUoYnJhbmNoMS5fcmVhZGFibGVTdHJlYW1Db250cm9sbGVyLCBjaHVuazEpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIWNhbmNlbGVkMikge1xuICAgICAgICAgICAgUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlckVucXVldWUoYnJhbmNoMi5fcmVhZGFibGVTdHJlYW1Db250cm9sbGVyLCBjaHVuazIpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJlYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICBpZiAocmVhZEFnYWluRm9yQnJhbmNoMSkge1xuICAgICAgICAgICAgcHVsbDFBbGdvcml0aG0oKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHJlYWRBZ2FpbkZvckJyYW5jaDIpIHtcbiAgICAgICAgICAgIHB1bGwyQWxnb3JpdGhtKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBfY2xvc2VTdGVwczogKCkgPT4ge1xuICAgICAgICByZWFkaW5nID0gZmFsc2U7XG4gICAgICAgIGlmICghY2FuY2VsZWQxKSB7XG4gICAgICAgICAgUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlckNsb3NlKGJyYW5jaDEuX3JlYWRhYmxlU3RyZWFtQ29udHJvbGxlcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFjYW5jZWxlZDIpIHtcbiAgICAgICAgICBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyQ2xvc2UoYnJhbmNoMi5fcmVhZGFibGVTdHJlYW1Db250cm9sbGVyKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYnJhbmNoMS5fcmVhZGFibGVTdHJlYW1Db250cm9sbGVyLl9wZW5kaW5nUHVsbEludG9zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyUmVzcG9uZChicmFuY2gxLl9yZWFkYWJsZVN0cmVhbUNvbnRyb2xsZXIsIDApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChicmFuY2gyLl9yZWFkYWJsZVN0cmVhbUNvbnRyb2xsZXIuX3BlbmRpbmdQdWxsSW50b3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJSZXNwb25kKGJyYW5jaDIuX3JlYWRhYmxlU3RyZWFtQ29udHJvbGxlciwgMCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFjYW5jZWxlZDEgfHwgIWNhbmNlbGVkMikge1xuICAgICAgICAgIHJlc29sdmVDYW5jZWxQcm9taXNlKHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBfZXJyb3JTdGVwczogKCkgPT4ge1xuICAgICAgICByZWFkaW5nID0gZmFsc2U7XG4gICAgICB9XG4gICAgfTtcbiAgICBSZWFkYWJsZVN0cmVhbURlZmF1bHRSZWFkZXJSZWFkKHJlYWRlciwgcmVhZFJlcXVlc3QpO1xuICB9XG5cbiAgZnVuY3Rpb24gcHVsbFdpdGhCWU9CUmVhZGVyKHZpZXc6IE5vblNoYXJlZDxBcnJheUJ1ZmZlclZpZXc+LCBmb3JCcmFuY2gyOiBib29sZWFuKSB7XG4gICAgaWYgKElzUmVhZGFibGVTdHJlYW1EZWZhdWx0UmVhZGVyPE5vblNoYXJlZDxVaW50OEFycmF5Pj4ocmVhZGVyKSkge1xuICAgICAgYXNzZXJ0KHJlYWRlci5fcmVhZFJlcXVlc3RzLmxlbmd0aCA9PT0gMCk7XG4gICAgICBSZWFkYWJsZVN0cmVhbVJlYWRlckdlbmVyaWNSZWxlYXNlKHJlYWRlcik7XG5cbiAgICAgIHJlYWRlciA9IEFjcXVpcmVSZWFkYWJsZVN0cmVhbUJZT0JSZWFkZXIoc3RyZWFtKTtcbiAgICAgIGZvcndhcmRSZWFkZXJFcnJvcihyZWFkZXIpO1xuICAgIH1cblxuICAgIGNvbnN0IGJ5b2JCcmFuY2ggPSBmb3JCcmFuY2gyID8gYnJhbmNoMiA6IGJyYW5jaDE7XG4gICAgY29uc3Qgb3RoZXJCcmFuY2ggPSBmb3JCcmFuY2gyID8gYnJhbmNoMSA6IGJyYW5jaDI7XG5cbiAgICBjb25zdCByZWFkSW50b1JlcXVlc3Q6IFJlYWRJbnRvUmVxdWVzdDxOb25TaGFyZWQ8QXJyYXlCdWZmZXJWaWV3Pj4gPSB7XG4gICAgICBfY2h1bmtTdGVwczogY2h1bmsgPT4ge1xuICAgICAgICAvLyBUaGlzIG5lZWRzIHRvIGJlIGRlbGF5ZWQgYSBtaWNyb3Rhc2sgYmVjYXVzZSBpdCB0YWtlcyBhdCBsZWFzdCBhIG1pY3JvdGFzayB0byBkZXRlY3QgZXJyb3JzICh1c2luZ1xuICAgICAgICAvLyByZWFkZXIuX2Nsb3NlZFByb21pc2UgYmVsb3cpLCBhbmQgd2Ugd2FudCBlcnJvcnMgaW4gc3RyZWFtIHRvIGVycm9yIGJvdGggYnJhbmNoZXMgaW1tZWRpYXRlbHkuIFdlIGNhbm5vdCBsZXRcbiAgICAgICAgLy8gc3VjY2Vzc2Z1bCBzeW5jaHJvbm91c2x5LWF2YWlsYWJsZSByZWFkcyBnZXQgYWhlYWQgb2YgYXN5bmNocm9ub3VzbHktYXZhaWxhYmxlIGVycm9ycy5cbiAgICAgICAgcXVldWVNaWNyb3Rhc2soKCkgPT4ge1xuICAgICAgICAgIHJlYWRBZ2FpbkZvckJyYW5jaDEgPSBmYWxzZTtcbiAgICAgICAgICByZWFkQWdhaW5Gb3JCcmFuY2gyID0gZmFsc2U7XG5cbiAgICAgICAgICBjb25zdCBieW9iQ2FuY2VsZWQgPSBmb3JCcmFuY2gyID8gY2FuY2VsZWQyIDogY2FuY2VsZWQxO1xuICAgICAgICAgIGNvbnN0IG90aGVyQ2FuY2VsZWQgPSBmb3JCcmFuY2gyID8gY2FuY2VsZWQxIDogY2FuY2VsZWQyO1xuXG4gICAgICAgICAgaWYgKCFvdGhlckNhbmNlbGVkKSB7XG4gICAgICAgICAgICBsZXQgY2xvbmVkQ2h1bms7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBjbG9uZWRDaHVuayA9IENsb25lQXNVaW50OEFycmF5KGNodW5rKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGNsb25lRSkge1xuICAgICAgICAgICAgICBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyRXJyb3IoYnlvYkJyYW5jaC5fcmVhZGFibGVTdHJlYW1Db250cm9sbGVyLCBjbG9uZUUpO1xuICAgICAgICAgICAgICBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyRXJyb3Iob3RoZXJCcmFuY2guX3JlYWRhYmxlU3RyZWFtQ29udHJvbGxlciwgY2xvbmVFKTtcbiAgICAgICAgICAgICAgcmVzb2x2ZUNhbmNlbFByb21pc2UoUmVhZGFibGVTdHJlYW1DYW5jZWwoc3RyZWFtLCBjbG9uZUUpKTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFieW9iQ2FuY2VsZWQpIHtcbiAgICAgICAgICAgICAgUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlclJlc3BvbmRXaXRoTmV3VmlldyhieW9iQnJhbmNoLl9yZWFkYWJsZVN0cmVhbUNvbnRyb2xsZXIsIGNodW5rKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJFbnF1ZXVlKG90aGVyQnJhbmNoLl9yZWFkYWJsZVN0cmVhbUNvbnRyb2xsZXIsIGNsb25lZENodW5rKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKCFieW9iQ2FuY2VsZWQpIHtcbiAgICAgICAgICAgIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJSZXNwb25kV2l0aE5ld1ZpZXcoYnlvYkJyYW5jaC5fcmVhZGFibGVTdHJlYW1Db250cm9sbGVyLCBjaHVuayk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmVhZGluZyA9IGZhbHNlO1xuICAgICAgICAgIGlmIChyZWFkQWdhaW5Gb3JCcmFuY2gxKSB7XG4gICAgICAgICAgICBwdWxsMUFsZ29yaXRobSgpO1xuICAgICAgICAgIH0gZWxzZSBpZiAocmVhZEFnYWluRm9yQnJhbmNoMikge1xuICAgICAgICAgICAgcHVsbDJBbGdvcml0aG0oKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIF9jbG9zZVN0ZXBzOiBjaHVuayA9PiB7XG4gICAgICAgIHJlYWRpbmcgPSBmYWxzZTtcblxuICAgICAgICBjb25zdCBieW9iQ2FuY2VsZWQgPSBmb3JCcmFuY2gyID8gY2FuY2VsZWQyIDogY2FuY2VsZWQxO1xuICAgICAgICBjb25zdCBvdGhlckNhbmNlbGVkID0gZm9yQnJhbmNoMiA/IGNhbmNlbGVkMSA6IGNhbmNlbGVkMjtcblxuICAgICAgICBpZiAoIWJ5b2JDYW5jZWxlZCkge1xuICAgICAgICAgIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJDbG9zZShieW9iQnJhbmNoLl9yZWFkYWJsZVN0cmVhbUNvbnRyb2xsZXIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghb3RoZXJDYW5jZWxlZCkge1xuICAgICAgICAgIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJDbG9zZShvdGhlckJyYW5jaC5fcmVhZGFibGVTdHJlYW1Db250cm9sbGVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjaHVuayAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgYXNzZXJ0KGNodW5rLmJ5dGVMZW5ndGggPT09IDApO1xuXG4gICAgICAgICAgaWYgKCFieW9iQ2FuY2VsZWQpIHtcbiAgICAgICAgICAgIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJSZXNwb25kV2l0aE5ld1ZpZXcoYnlvYkJyYW5jaC5fcmVhZGFibGVTdHJlYW1Db250cm9sbGVyLCBjaHVuayk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghb3RoZXJDYW5jZWxlZCAmJiBvdGhlckJyYW5jaC5fcmVhZGFibGVTdHJlYW1Db250cm9sbGVyLl9wZW5kaW5nUHVsbEludG9zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJSZXNwb25kKG90aGVyQnJhbmNoLl9yZWFkYWJsZVN0cmVhbUNvbnRyb2xsZXIsIDApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghYnlvYkNhbmNlbGVkIHx8ICFvdGhlckNhbmNlbGVkKSB7XG4gICAgICAgICAgcmVzb2x2ZUNhbmNlbFByb21pc2UodW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIF9lcnJvclN0ZXBzOiAoKSA9PiB7XG4gICAgICAgIHJlYWRpbmcgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9O1xuICAgIFJlYWRhYmxlU3RyZWFtQllPQlJlYWRlclJlYWQocmVhZGVyLCB2aWV3LCAxLCByZWFkSW50b1JlcXVlc3QpO1xuICB9XG5cbiAgZnVuY3Rpb24gcHVsbDFBbGdvcml0aG0oKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKHJlYWRpbmcpIHtcbiAgICAgIHJlYWRBZ2FpbkZvckJyYW5jaDEgPSB0cnVlO1xuICAgICAgcmV0dXJuIHByb21pc2VSZXNvbHZlZFdpdGgodW5kZWZpbmVkKTtcbiAgICB9XG5cbiAgICByZWFkaW5nID0gdHJ1ZTtcblxuICAgIGNvbnN0IGJ5b2JSZXF1ZXN0ID0gUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlckdldEJZT0JSZXF1ZXN0KGJyYW5jaDEuX3JlYWRhYmxlU3RyZWFtQ29udHJvbGxlcik7XG4gICAgaWYgKGJ5b2JSZXF1ZXN0ID09PSBudWxsKSB7XG4gICAgICBwdWxsV2l0aERlZmF1bHRSZWFkZXIoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcHVsbFdpdGhCWU9CUmVhZGVyKGJ5b2JSZXF1ZXN0Ll92aWV3ISwgZmFsc2UpO1xuICAgIH1cblxuICAgIHJldHVybiBwcm9taXNlUmVzb2x2ZWRXaXRoKHVuZGVmaW5lZCk7XG4gIH1cblxuICBmdW5jdGlvbiBwdWxsMkFsZ29yaXRobSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAocmVhZGluZykge1xuICAgICAgcmVhZEFnYWluRm9yQnJhbmNoMiA9IHRydWU7XG4gICAgICByZXR1cm4gcHJvbWlzZVJlc29sdmVkV2l0aCh1bmRlZmluZWQpO1xuICAgIH1cblxuICAgIHJlYWRpbmcgPSB0cnVlO1xuXG4gICAgY29uc3QgYnlvYlJlcXVlc3QgPSBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyR2V0QllPQlJlcXVlc3QoYnJhbmNoMi5fcmVhZGFibGVTdHJlYW1Db250cm9sbGVyKTtcbiAgICBpZiAoYnlvYlJlcXVlc3QgPT09IG51bGwpIHtcbiAgICAgIHB1bGxXaXRoRGVmYXVsdFJlYWRlcigpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwdWxsV2l0aEJZT0JSZWFkZXIoYnlvYlJlcXVlc3QuX3ZpZXchLCB0cnVlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcHJvbWlzZVJlc29sdmVkV2l0aCh1bmRlZmluZWQpO1xuICB9XG5cbiAgZnVuY3Rpb24gY2FuY2VsMUFsZ29yaXRobShyZWFzb246IGFueSk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNhbmNlbGVkMSA9IHRydWU7XG4gICAgcmVhc29uMSA9IHJlYXNvbjtcbiAgICBpZiAoY2FuY2VsZWQyKSB7XG4gICAgICBjb25zdCBjb21wb3NpdGVSZWFzb24gPSBDcmVhdGVBcnJheUZyb21MaXN0KFtyZWFzb24xLCByZWFzb24yXSk7XG4gICAgICBjb25zdCBjYW5jZWxSZXN1bHQgPSBSZWFkYWJsZVN0cmVhbUNhbmNlbChzdHJlYW0sIGNvbXBvc2l0ZVJlYXNvbik7XG4gICAgICByZXNvbHZlQ2FuY2VsUHJvbWlzZShjYW5jZWxSZXN1bHQpO1xuICAgIH1cbiAgICByZXR1cm4gY2FuY2VsUHJvbWlzZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNhbmNlbDJBbGdvcml0aG0ocmVhc29uOiBhbnkpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjYW5jZWxlZDIgPSB0cnVlO1xuICAgIHJlYXNvbjIgPSByZWFzb247XG4gICAgaWYgKGNhbmNlbGVkMSkge1xuICAgICAgY29uc3QgY29tcG9zaXRlUmVhc29uID0gQ3JlYXRlQXJyYXlGcm9tTGlzdChbcmVhc29uMSwgcmVhc29uMl0pO1xuICAgICAgY29uc3QgY2FuY2VsUmVzdWx0ID0gUmVhZGFibGVTdHJlYW1DYW5jZWwoc3RyZWFtLCBjb21wb3NpdGVSZWFzb24pO1xuICAgICAgcmVzb2x2ZUNhbmNlbFByb21pc2UoY2FuY2VsUmVzdWx0KTtcbiAgICB9XG4gICAgcmV0dXJuIGNhbmNlbFByb21pc2U7XG4gIH1cblxuICBmdW5jdGlvbiBzdGFydEFsZ29yaXRobSgpOiB2b2lkIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBicmFuY2gxID0gQ3JlYXRlUmVhZGFibGVCeXRlU3RyZWFtKHN0YXJ0QWxnb3JpdGhtLCBwdWxsMUFsZ29yaXRobSwgY2FuY2VsMUFsZ29yaXRobSk7XG4gIGJyYW5jaDIgPSBDcmVhdGVSZWFkYWJsZUJ5dGVTdHJlYW0oc3RhcnRBbGdvcml0aG0sIHB1bGwyQWxnb3JpdGhtLCBjYW5jZWwyQWxnb3JpdGhtKTtcblxuICBmb3J3YXJkUmVhZGVyRXJyb3IocmVhZGVyKTtcblxuICByZXR1cm4gW2JyYW5jaDEsIGJyYW5jaDJdO1xufVxuIiwgImltcG9ydCB7IHR5cGVJc09iamVjdCB9IGZyb20gJy4uL2hlbHBlcnMvbWlzY2VsbGFuZW91cyc7XG5pbXBvcnQgdHlwZSB7IFJlYWRhYmxlU3RyZWFtRGVmYXVsdFJlYWRSZXN1bHQgfSBmcm9tICcuL2RlZmF1bHQtcmVhZGVyJztcblxuLyoqXG4gKiBBIGNvbW1vbiBpbnRlcmZhY2UgZm9yIGEgYFJlYWRhZGFibGVTdHJlYW1gIGltcGxlbWVudGF0aW9uLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBSZWFkYWJsZVN0cmVhbUxpa2U8UiA9IGFueT4ge1xuICByZWFkb25seSBsb2NrZWQ6IGJvb2xlYW47XG5cbiAgZ2V0UmVhZGVyKCk6IFJlYWRhYmxlU3RyZWFtRGVmYXVsdFJlYWRlckxpa2U8Uj47XG59XG5cbi8qKlxuICogQSBjb21tb24gaW50ZXJmYWNlIGZvciBhIGBSZWFkYWJsZVN0cmVhbURlZmF1bHRSZWFkZXJgIGltcGxlbWVudGF0aW9uLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBSZWFkYWJsZVN0cmVhbURlZmF1bHRSZWFkZXJMaWtlPFIgPSBhbnk+IHtcbiAgcmVhZG9ubHkgY2xvc2VkOiBQcm9taXNlPHVuZGVmaW5lZD47XG5cbiAgY2FuY2VsKHJlYXNvbj86IGFueSk6IFByb21pc2U8dm9pZD47XG5cbiAgcmVhZCgpOiBQcm9taXNlPFJlYWRhYmxlU3RyZWFtRGVmYXVsdFJlYWRSZXN1bHQ8Uj4+O1xuXG4gIHJlbGVhc2VMb2NrKCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1JlYWRhYmxlU3RyZWFtTGlrZTxSPihzdHJlYW06IHVua25vd24pOiBzdHJlYW0gaXMgUmVhZGFibGVTdHJlYW1MaWtlPFI+IHtcbiAgcmV0dXJuIHR5cGVJc09iamVjdChzdHJlYW0pICYmIHR5cGVvZiAoc3RyZWFtIGFzIFJlYWRhYmxlU3RyZWFtTGlrZTxSPikuZ2V0UmVhZGVyICE9PSAndW5kZWZpbmVkJztcbn1cbiIsICJpbXBvcnQgeyBDcmVhdGVSZWFkYWJsZVN0cmVhbSwgdHlwZSBEZWZhdWx0UmVhZGFibGVTdHJlYW0gfSBmcm9tICcuLi9yZWFkYWJsZS1zdHJlYW0nO1xuaW1wb3J0IHtcbiAgaXNSZWFkYWJsZVN0cmVhbUxpa2UsXG4gIHR5cGUgUmVhZGFibGVTdHJlYW1EZWZhdWx0UmVhZGVyTGlrZSxcbiAgdHlwZSBSZWFkYWJsZVN0cmVhbUxpa2Vcbn0gZnJvbSAnLi9yZWFkYWJsZS1zdHJlYW0tbGlrZSc7XG5pbXBvcnQgeyBSZWFkYWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyQ2xvc2UsIFJlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXJFbnF1ZXVlIH0gZnJvbSAnLi9kZWZhdWx0LWNvbnRyb2xsZXInO1xuaW1wb3J0IHsgR2V0SXRlcmF0b3IsIEdldE1ldGhvZCwgSXRlcmF0b3JDb21wbGV0ZSwgSXRlcmF0b3JOZXh0LCBJdGVyYXRvclZhbHVlIH0gZnJvbSAnLi4vYWJzdHJhY3Qtb3BzL2VjbWFzY3JpcHQnO1xuaW1wb3J0IHsgcHJvbWlzZVJlamVjdGVkV2l0aCwgcHJvbWlzZVJlc29sdmVkV2l0aCwgcmVmbGVjdENhbGwsIHRyYW5zZm9ybVByb21pc2VXaXRoIH0gZnJvbSAnLi4vaGVscGVycy93ZWJpZGwnO1xuaW1wb3J0IHsgdHlwZUlzT2JqZWN0IH0gZnJvbSAnLi4vaGVscGVycy9taXNjZWxsYW5lb3VzJztcbmltcG9ydCB7IG5vb3AgfSBmcm9tICcuLi8uLi91dGlscyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBSZWFkYWJsZVN0cmVhbUZyb208Uj4oXG4gIHNvdXJjZTogSXRlcmFibGU8Uj4gfCBBc3luY0l0ZXJhYmxlPFI+IHwgUmVhZGFibGVTdHJlYW1MaWtlPFI+XG4pOiBEZWZhdWx0UmVhZGFibGVTdHJlYW08Uj4ge1xuICBpZiAoaXNSZWFkYWJsZVN0cmVhbUxpa2Uoc291cmNlKSkge1xuICAgIHJldHVybiBSZWFkYWJsZVN0cmVhbUZyb21EZWZhdWx0UmVhZGVyKHNvdXJjZS5nZXRSZWFkZXIoKSk7XG4gIH1cbiAgcmV0dXJuIFJlYWRhYmxlU3RyZWFtRnJvbUl0ZXJhYmxlKHNvdXJjZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBSZWFkYWJsZVN0cmVhbUZyb21JdGVyYWJsZTxSPihhc3luY0l0ZXJhYmxlOiBJdGVyYWJsZTxSPiB8IEFzeW5jSXRlcmFibGU8Uj4pOiBEZWZhdWx0UmVhZGFibGVTdHJlYW08Uj4ge1xuICBsZXQgc3RyZWFtOiBEZWZhdWx0UmVhZGFibGVTdHJlYW08Uj47XG4gIGNvbnN0IGl0ZXJhdG9yUmVjb3JkID0gR2V0SXRlcmF0b3IoYXN5bmNJdGVyYWJsZSwgJ2FzeW5jJyk7XG5cbiAgY29uc3Qgc3RhcnRBbGdvcml0aG0gPSBub29wO1xuXG4gIGZ1bmN0aW9uIHB1bGxBbGdvcml0aG0oKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgbGV0IG5leHRSZXN1bHQ7XG4gICAgdHJ5IHtcbiAgICAgIG5leHRSZXN1bHQgPSBJdGVyYXRvck5leHQoaXRlcmF0b3JSZWNvcmQpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiBwcm9taXNlUmVqZWN0ZWRXaXRoKGUpO1xuICAgIH1cbiAgICBjb25zdCBuZXh0UHJvbWlzZSA9IHByb21pc2VSZXNvbHZlZFdpdGgobmV4dFJlc3VsdCk7XG4gICAgcmV0dXJuIHRyYW5zZm9ybVByb21pc2VXaXRoKG5leHRQcm9taXNlLCBpdGVyUmVzdWx0ID0+IHtcbiAgICAgIGlmICghdHlwZUlzT2JqZWN0KGl0ZXJSZXN1bHQpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBwcm9taXNlIHJldHVybmVkIGJ5IHRoZSBpdGVyYXRvci5uZXh0KCkgbWV0aG9kIG11c3QgZnVsZmlsbCB3aXRoIGFuIG9iamVjdCcpO1xuICAgICAgfVxuICAgICAgY29uc3QgZG9uZSA9IEl0ZXJhdG9yQ29tcGxldGUoaXRlclJlc3VsdCk7XG4gICAgICBpZiAoZG9uZSkge1xuICAgICAgICBSZWFkYWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyQ2xvc2Uoc3RyZWFtLl9yZWFkYWJsZVN0cmVhbUNvbnRyb2xsZXIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBJdGVyYXRvclZhbHVlKGl0ZXJSZXN1bHQpO1xuICAgICAgICBSZWFkYWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyRW5xdWV1ZShzdHJlYW0uX3JlYWRhYmxlU3RyZWFtQ29udHJvbGxlciwgdmFsdWUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gY2FuY2VsQWxnb3JpdGhtKHJlYXNvbjogYW55KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgaXRlcmF0b3IgPSBpdGVyYXRvclJlY29yZC5pdGVyYXRvcjtcbiAgICBsZXQgcmV0dXJuTWV0aG9kOiAodHlwZW9mIGl0ZXJhdG9yKVsncmV0dXJuJ10gfCB1bmRlZmluZWQ7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybk1ldGhvZCA9IEdldE1ldGhvZChpdGVyYXRvciwgJ3JldHVybicpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiBwcm9taXNlUmVqZWN0ZWRXaXRoKGUpO1xuICAgIH1cbiAgICBpZiAocmV0dXJuTWV0aG9kID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBwcm9taXNlUmVzb2x2ZWRXaXRoKHVuZGVmaW5lZCk7XG4gICAgfVxuICAgIGxldCByZXR1cm5SZXN1bHQ6IEl0ZXJhdG9yUmVzdWx0PFI+IHwgUHJvbWlzZTxJdGVyYXRvclJlc3VsdDxSPj47XG4gICAgdHJ5IHtcbiAgICAgIHJldHVyblJlc3VsdCA9IHJlZmxlY3RDYWxsKHJldHVybk1ldGhvZCwgaXRlcmF0b3IsIFtyZWFzb25dKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gcHJvbWlzZVJlamVjdGVkV2l0aChlKTtcbiAgICB9XG4gICAgY29uc3QgcmV0dXJuUHJvbWlzZSA9IHByb21pc2VSZXNvbHZlZFdpdGgocmV0dXJuUmVzdWx0KTtcbiAgICByZXR1cm4gdHJhbnNmb3JtUHJvbWlzZVdpdGgocmV0dXJuUHJvbWlzZSwgaXRlclJlc3VsdCA9PiB7XG4gICAgICBpZiAoIXR5cGVJc09iamVjdChpdGVyUmVzdWx0KSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgcHJvbWlzZSByZXR1cm5lZCBieSB0aGUgaXRlcmF0b3IucmV0dXJuKCkgbWV0aG9kIG11c3QgZnVsZmlsbCB3aXRoIGFuIG9iamVjdCcpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9KTtcbiAgfVxuXG4gIHN0cmVhbSA9IENyZWF0ZVJlYWRhYmxlU3RyZWFtKHN0YXJ0QWxnb3JpdGhtLCBwdWxsQWxnb3JpdGhtLCBjYW5jZWxBbGdvcml0aG0sIDApO1xuICByZXR1cm4gc3RyZWFtO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gUmVhZGFibGVTdHJlYW1Gcm9tRGVmYXVsdFJlYWRlcjxSPihcbiAgcmVhZGVyOiBSZWFkYWJsZVN0cmVhbURlZmF1bHRSZWFkZXJMaWtlPFI+XG4pOiBEZWZhdWx0UmVhZGFibGVTdHJlYW08Uj4ge1xuICBsZXQgc3RyZWFtOiBEZWZhdWx0UmVhZGFibGVTdHJlYW08Uj47XG5cbiAgY29uc3Qgc3RhcnRBbGdvcml0aG0gPSBub29wO1xuXG4gIGZ1bmN0aW9uIHB1bGxBbGdvcml0aG0oKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgbGV0IHJlYWRQcm9taXNlO1xuICAgIHRyeSB7XG4gICAgICByZWFkUHJvbWlzZSA9IHJlYWRlci5yZWFkKCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIHByb21pc2VSZWplY3RlZFdpdGgoZSk7XG4gICAgfVxuICAgIHJldHVybiB0cmFuc2Zvcm1Qcm9taXNlV2l0aChyZWFkUHJvbWlzZSwgcmVhZFJlc3VsdCA9PiB7XG4gICAgICBpZiAoIXR5cGVJc09iamVjdChyZWFkUmVzdWx0KSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgcHJvbWlzZSByZXR1cm5lZCBieSB0aGUgcmVhZGVyLnJlYWQoKSBtZXRob2QgbXVzdCBmdWxmaWxsIHdpdGggYW4gb2JqZWN0Jyk7XG4gICAgICB9XG4gICAgICBpZiAocmVhZFJlc3VsdC5kb25lKSB7XG4gICAgICAgIFJlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXJDbG9zZShzdHJlYW0uX3JlYWRhYmxlU3RyZWFtQ29udHJvbGxlcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHJlYWRSZXN1bHQudmFsdWU7XG4gICAgICAgIFJlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXJFbnF1ZXVlKHN0cmVhbS5fcmVhZGFibGVTdHJlYW1Db250cm9sbGVyLCB2YWx1ZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBjYW5jZWxBbGdvcml0aG0ocmVhc29uOiBhbnkpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIHByb21pc2VSZXNvbHZlZFdpdGgocmVhZGVyLmNhbmNlbChyZWFzb24pKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gcHJvbWlzZVJlamVjdGVkV2l0aChlKTtcbiAgICB9XG4gIH1cblxuICBzdHJlYW0gPSBDcmVhdGVSZWFkYWJsZVN0cmVhbShzdGFydEFsZ29yaXRobSwgcHVsbEFsZ29yaXRobSwgY2FuY2VsQWxnb3JpdGhtLCAwKTtcbiAgcmV0dXJuIHN0cmVhbTtcbn1cbiIsICJpbXBvcnQgeyBhc3NlcnREaWN0aW9uYXJ5LCBhc3NlcnRGdW5jdGlvbiwgY29udmVydFVuc2lnbmVkTG9uZ0xvbmdXaXRoRW5mb3JjZVJhbmdlIH0gZnJvbSAnLi9iYXNpYyc7XG5pbXBvcnQgdHlwZSB7XG4gIFJlYWRhYmxlU3RyZWFtQ29udHJvbGxlcixcbiAgVW5kZXJseWluZ0J5dGVTb3VyY2UsXG4gIFVuZGVybHlpbmdEZWZhdWx0T3JCeXRlU291cmNlLFxuICBVbmRlcmx5aW5nRGVmYXVsdE9yQnl0ZVNvdXJjZVB1bGxDYWxsYmFjayxcbiAgVW5kZXJseWluZ0RlZmF1bHRPckJ5dGVTb3VyY2VTdGFydENhbGxiYWNrLFxuICBVbmRlcmx5aW5nU291cmNlLFxuICBVbmRlcmx5aW5nU291cmNlQ2FuY2VsQ2FsbGJhY2ssXG4gIFZhbGlkYXRlZFVuZGVybHlpbmdEZWZhdWx0T3JCeXRlU291cmNlXG59IGZyb20gJy4uL3JlYWRhYmxlLXN0cmVhbS91bmRlcmx5aW5nLXNvdXJjZSc7XG5pbXBvcnQgeyBwcm9taXNlQ2FsbCwgcmVmbGVjdENhbGwgfSBmcm9tICcuLi9oZWxwZXJzL3dlYmlkbCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBjb252ZXJ0VW5kZXJseWluZ0RlZmF1bHRPckJ5dGVTb3VyY2U8Uj4oXG4gIHNvdXJjZTogVW5kZXJseWluZ1NvdXJjZTxSPiB8IFVuZGVybHlpbmdCeXRlU291cmNlIHwgbnVsbCxcbiAgY29udGV4dDogc3RyaW5nXG4pOiBWYWxpZGF0ZWRVbmRlcmx5aW5nRGVmYXVsdE9yQnl0ZVNvdXJjZTxSPiB7XG4gIGFzc2VydERpY3Rpb25hcnkoc291cmNlLCBjb250ZXh0KTtcbiAgY29uc3Qgb3JpZ2luYWwgPSBzb3VyY2UgYXMgKFVuZGVybHlpbmdEZWZhdWx0T3JCeXRlU291cmNlPFI+IHwgbnVsbCk7XG4gIGNvbnN0IGF1dG9BbGxvY2F0ZUNodW5rU2l6ZSA9IG9yaWdpbmFsPy5hdXRvQWxsb2NhdGVDaHVua1NpemU7XG4gIGNvbnN0IGNhbmNlbCA9IG9yaWdpbmFsPy5jYW5jZWw7XG4gIGNvbnN0IHB1bGwgPSBvcmlnaW5hbD8ucHVsbDtcbiAgY29uc3Qgc3RhcnQgPSBvcmlnaW5hbD8uc3RhcnQ7XG4gIGNvbnN0IHR5cGUgPSBvcmlnaW5hbD8udHlwZTtcbiAgcmV0dXJuIHtcbiAgICBhdXRvQWxsb2NhdGVDaHVua1NpemU6IGF1dG9BbGxvY2F0ZUNodW5rU2l6ZSA9PT0gdW5kZWZpbmVkID9cbiAgICAgIHVuZGVmaW5lZCA6XG4gICAgICBjb252ZXJ0VW5zaWduZWRMb25nTG9uZ1dpdGhFbmZvcmNlUmFuZ2UoXG4gICAgICAgIGF1dG9BbGxvY2F0ZUNodW5rU2l6ZSxcbiAgICAgICAgYCR7Y29udGV4dH0gaGFzIG1lbWJlciAnYXV0b0FsbG9jYXRlQ2h1bmtTaXplJyB0aGF0YFxuICAgICAgKSxcbiAgICBjYW5jZWw6IGNhbmNlbCA9PT0gdW5kZWZpbmVkID9cbiAgICAgIHVuZGVmaW5lZCA6XG4gICAgICBjb252ZXJ0VW5kZXJseWluZ1NvdXJjZUNhbmNlbENhbGxiYWNrKGNhbmNlbCwgb3JpZ2luYWwhLCBgJHtjb250ZXh0fSBoYXMgbWVtYmVyICdjYW5jZWwnIHRoYXRgKSxcbiAgICBwdWxsOiBwdWxsID09PSB1bmRlZmluZWQgP1xuICAgICAgdW5kZWZpbmVkIDpcbiAgICAgIGNvbnZlcnRVbmRlcmx5aW5nU291cmNlUHVsbENhbGxiYWNrKHB1bGwsIG9yaWdpbmFsISwgYCR7Y29udGV4dH0gaGFzIG1lbWJlciAncHVsbCcgdGhhdGApLFxuICAgIHN0YXJ0OiBzdGFydCA9PT0gdW5kZWZpbmVkID9cbiAgICAgIHVuZGVmaW5lZCA6XG4gICAgICBjb252ZXJ0VW5kZXJseWluZ1NvdXJjZVN0YXJ0Q2FsbGJhY2soc3RhcnQsIG9yaWdpbmFsISwgYCR7Y29udGV4dH0gaGFzIG1lbWJlciAnc3RhcnQnIHRoYXRgKSxcbiAgICB0eXBlOiB0eXBlID09PSB1bmRlZmluZWQgPyB1bmRlZmluZWQgOiBjb252ZXJ0UmVhZGFibGVTdHJlYW1UeXBlKHR5cGUsIGAke2NvbnRleHR9IGhhcyBtZW1iZXIgJ3R5cGUnIHRoYXRgKVxuICB9O1xufVxuXG5mdW5jdGlvbiBjb252ZXJ0VW5kZXJseWluZ1NvdXJjZUNhbmNlbENhbGxiYWNrKFxuICBmbjogVW5kZXJseWluZ1NvdXJjZUNhbmNlbENhbGxiYWNrLFxuICBvcmlnaW5hbDogVW5kZXJseWluZ0RlZmF1bHRPckJ5dGVTb3VyY2UsXG4gIGNvbnRleHQ6IHN0cmluZ1xuKTogKHJlYXNvbjogYW55KSA9PiBQcm9taXNlPHZvaWQ+IHtcbiAgYXNzZXJ0RnVuY3Rpb24oZm4sIGNvbnRleHQpO1xuICByZXR1cm4gKHJlYXNvbjogYW55KSA9PiBwcm9taXNlQ2FsbChmbiwgb3JpZ2luYWwsIFtyZWFzb25dKTtcbn1cblxuZnVuY3Rpb24gY29udmVydFVuZGVybHlpbmdTb3VyY2VQdWxsQ2FsbGJhY2s8Uj4oXG4gIGZuOiBVbmRlcmx5aW5nRGVmYXVsdE9yQnl0ZVNvdXJjZVB1bGxDYWxsYmFjazxSPixcbiAgb3JpZ2luYWw6IFVuZGVybHlpbmdEZWZhdWx0T3JCeXRlU291cmNlPFI+LFxuICBjb250ZXh0OiBzdHJpbmdcbik6IChjb250cm9sbGVyOiBSZWFkYWJsZVN0cmVhbUNvbnRyb2xsZXI8Uj4pID0+IFByb21pc2U8dm9pZD4ge1xuICBhc3NlcnRGdW5jdGlvbihmbiwgY29udGV4dCk7XG4gIHJldHVybiAoY29udHJvbGxlcjogUmVhZGFibGVTdHJlYW1Db250cm9sbGVyPFI+KSA9PiBwcm9taXNlQ2FsbChmbiwgb3JpZ2luYWwsIFtjb250cm9sbGVyXSk7XG59XG5cbmZ1bmN0aW9uIGNvbnZlcnRVbmRlcmx5aW5nU291cmNlU3RhcnRDYWxsYmFjazxSPihcbiAgZm46IFVuZGVybHlpbmdEZWZhdWx0T3JCeXRlU291cmNlU3RhcnRDYWxsYmFjazxSPixcbiAgb3JpZ2luYWw6IFVuZGVybHlpbmdEZWZhdWx0T3JCeXRlU291cmNlPFI+LFxuICBjb250ZXh0OiBzdHJpbmdcbik6IFVuZGVybHlpbmdEZWZhdWx0T3JCeXRlU291cmNlU3RhcnRDYWxsYmFjazxSPiB7XG4gIGFzc2VydEZ1bmN0aW9uKGZuLCBjb250ZXh0KTtcbiAgcmV0dXJuIChjb250cm9sbGVyOiBSZWFkYWJsZVN0cmVhbUNvbnRyb2xsZXI8Uj4pID0+IHJlZmxlY3RDYWxsKGZuLCBvcmlnaW5hbCwgW2NvbnRyb2xsZXJdKTtcbn1cblxuZnVuY3Rpb24gY29udmVydFJlYWRhYmxlU3RyZWFtVHlwZSh0eXBlOiBzdHJpbmcsIGNvbnRleHQ6IHN0cmluZyk6ICdieXRlcycge1xuICB0eXBlID0gYCR7dHlwZX1gO1xuICBpZiAodHlwZSAhPT0gJ2J5dGVzJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYCR7Y29udGV4dH0gJyR7dHlwZX0nIGlzIG5vdCBhIHZhbGlkIGVudW1lcmF0aW9uIHZhbHVlIGZvciBSZWFkYWJsZVN0cmVhbVR5cGVgKTtcbiAgfVxuICByZXR1cm4gdHlwZTtcbn1cbiIsICJpbXBvcnQgeyBhc3NlcnREaWN0aW9uYXJ5IH0gZnJvbSAnLi9iYXNpYyc7XG5pbXBvcnQgdHlwZSB7XG4gIFJlYWRhYmxlU3RyZWFtSXRlcmF0b3JPcHRpb25zLFxuICBWYWxpZGF0ZWRSZWFkYWJsZVN0cmVhbUl0ZXJhdG9yT3B0aW9uc1xufSBmcm9tICcuLi9yZWFkYWJsZS1zdHJlYW0vaXRlcmF0b3Itb3B0aW9ucyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBjb252ZXJ0SXRlcmF0b3JPcHRpb25zKG9wdGlvbnM6IFJlYWRhYmxlU3RyZWFtSXRlcmF0b3JPcHRpb25zIHwgbnVsbCB8IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQ6IHN0cmluZyk6IFZhbGlkYXRlZFJlYWRhYmxlU3RyZWFtSXRlcmF0b3JPcHRpb25zIHtcbiAgYXNzZXJ0RGljdGlvbmFyeShvcHRpb25zLCBjb250ZXh0KTtcbiAgY29uc3QgcHJldmVudENhbmNlbCA9IG9wdGlvbnM/LnByZXZlbnRDYW5jZWw7XG4gIHJldHVybiB7IHByZXZlbnRDYW5jZWw6IEJvb2xlYW4ocHJldmVudENhbmNlbCkgfTtcbn1cbiIsICJpbXBvcnQgeyBhc3NlcnREaWN0aW9uYXJ5IH0gZnJvbSAnLi9iYXNpYyc7XG5pbXBvcnQgdHlwZSB7IFN0cmVhbVBpcGVPcHRpb25zLCBWYWxpZGF0ZWRTdHJlYW1QaXBlT3B0aW9ucyB9IGZyb20gJy4uL3JlYWRhYmxlLXN0cmVhbS9waXBlLW9wdGlvbnMnO1xuaW1wb3J0IHsgdHlwZSBBYm9ydFNpZ25hbCwgaXNBYm9ydFNpZ25hbCB9IGZyb20gJy4uL2Fib3J0LXNpZ25hbCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBjb252ZXJ0UGlwZU9wdGlvbnMob3B0aW9uczogU3RyZWFtUGlwZU9wdGlvbnMgfCBudWxsIHwgdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0OiBzdHJpbmcpOiBWYWxpZGF0ZWRTdHJlYW1QaXBlT3B0aW9ucyB7XG4gIGFzc2VydERpY3Rpb25hcnkob3B0aW9ucywgY29udGV4dCk7XG4gIGNvbnN0IHByZXZlbnRBYm9ydCA9IG9wdGlvbnM/LnByZXZlbnRBYm9ydDtcbiAgY29uc3QgcHJldmVudENhbmNlbCA9IG9wdGlvbnM/LnByZXZlbnRDYW5jZWw7XG4gIGNvbnN0IHByZXZlbnRDbG9zZSA9IG9wdGlvbnM/LnByZXZlbnRDbG9zZTtcbiAgY29uc3Qgc2lnbmFsID0gb3B0aW9ucz8uc2lnbmFsO1xuICBpZiAoc2lnbmFsICE9PSB1bmRlZmluZWQpIHtcbiAgICBhc3NlcnRBYm9ydFNpZ25hbChzaWduYWwsIGAke2NvbnRleHR9IGhhcyBtZW1iZXIgJ3NpZ25hbCcgdGhhdGApO1xuICB9XG4gIHJldHVybiB7XG4gICAgcHJldmVudEFib3J0OiBCb29sZWFuKHByZXZlbnRBYm9ydCksXG4gICAgcHJldmVudENhbmNlbDogQm9vbGVhbihwcmV2ZW50Q2FuY2VsKSxcbiAgICBwcmV2ZW50Q2xvc2U6IEJvb2xlYW4ocHJldmVudENsb3NlKSxcbiAgICBzaWduYWxcbiAgfTtcbn1cblxuZnVuY3Rpb24gYXNzZXJ0QWJvcnRTaWduYWwoc2lnbmFsOiB1bmtub3duLCBjb250ZXh0OiBzdHJpbmcpOiBhc3NlcnRzIHNpZ25hbCBpcyBBYm9ydFNpZ25hbCB7XG4gIGlmICghaXNBYm9ydFNpZ25hbChzaWduYWwpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgJHtjb250ZXh0fSBpcyBub3QgYW4gQWJvcnRTaWduYWwuYCk7XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBhc3NlcnREaWN0aW9uYXJ5LCBhc3NlcnRSZXF1aXJlZEZpZWxkIH0gZnJvbSAnLi9iYXNpYyc7XG5pbXBvcnQgeyBSZWFkYWJsZVN0cmVhbSB9IGZyb20gJy4uL3JlYWRhYmxlLXN0cmVhbSc7XG5pbXBvcnQgeyBXcml0YWJsZVN0cmVhbSB9IGZyb20gJy4uL3dyaXRhYmxlLXN0cmVhbSc7XG5pbXBvcnQgeyBhc3NlcnRSZWFkYWJsZVN0cmVhbSB9IGZyb20gJy4vcmVhZGFibGUtc3RyZWFtJztcbmltcG9ydCB7IGFzc2VydFdyaXRhYmxlU3RyZWFtIH0gZnJvbSAnLi93cml0YWJsZS1zdHJlYW0nO1xuXG5leHBvcnQgZnVuY3Rpb24gY29udmVydFJlYWRhYmxlV3JpdGFibGVQYWlyPFJTIGV4dGVuZHMgUmVhZGFibGVTdHJlYW0sIFdTIGV4dGVuZHMgV3JpdGFibGVTdHJlYW0+KFxuICBwYWlyOiB7IHJlYWRhYmxlOiBSUzsgd3JpdGFibGU6IFdTIH0gfCBudWxsIHwgdW5kZWZpbmVkLFxuICBjb250ZXh0OiBzdHJpbmdcbik6IHsgcmVhZGFibGU6IFJTOyB3cml0YWJsZTogV1MgfSB7XG4gIGFzc2VydERpY3Rpb25hcnkocGFpciwgY29udGV4dCk7XG5cbiAgY29uc3QgcmVhZGFibGUgPSBwYWlyPy5yZWFkYWJsZTtcbiAgYXNzZXJ0UmVxdWlyZWRGaWVsZChyZWFkYWJsZSwgJ3JlYWRhYmxlJywgJ1JlYWRhYmxlV3JpdGFibGVQYWlyJyk7XG4gIGFzc2VydFJlYWRhYmxlU3RyZWFtKHJlYWRhYmxlLCBgJHtjb250ZXh0fSBoYXMgbWVtYmVyICdyZWFkYWJsZScgdGhhdGApO1xuXG4gIGNvbnN0IHdyaXRhYmxlID0gcGFpcj8ud3JpdGFibGU7XG4gIGFzc2VydFJlcXVpcmVkRmllbGQod3JpdGFibGUsICd3cml0YWJsZScsICdSZWFkYWJsZVdyaXRhYmxlUGFpcicpO1xuICBhc3NlcnRXcml0YWJsZVN0cmVhbSh3cml0YWJsZSwgYCR7Y29udGV4dH0gaGFzIG1lbWJlciAnd3JpdGFibGUnIHRoYXRgKTtcblxuICByZXR1cm4geyByZWFkYWJsZSwgd3JpdGFibGUgfTtcbn1cbiIsICJpbXBvcnQgYXNzZXJ0IGZyb20gJy4uL3N0dWIvYXNzZXJ0JztcbmltcG9ydCB7XG4gIHByb21pc2VSZWplY3RlZFdpdGgsXG4gIHByb21pc2VSZXNvbHZlZFdpdGgsXG4gIHNldFByb21pc2VJc0hhbmRsZWRUb1RydWUsXG4gIHRyYW5zZm9ybVByb21pc2VXaXRoXG59IGZyb20gJy4vaGVscGVycy93ZWJpZGwnO1xuaW1wb3J0IHR5cGUgeyBRdWV1aW5nU3RyYXRlZ3ksIFF1ZXVpbmdTdHJhdGVneVNpemVDYWxsYmFjayB9IGZyb20gJy4vcXVldWluZy1zdHJhdGVneSc7XG5pbXBvcnQgeyBBY3F1aXJlUmVhZGFibGVTdHJlYW1Bc3luY0l0ZXJhdG9yLCB0eXBlIFJlYWRhYmxlU3RyZWFtQXN5bmNJdGVyYXRvciB9IGZyb20gJy4vcmVhZGFibGUtc3RyZWFtL2FzeW5jLWl0ZXJhdG9yJztcbmltcG9ydCB7IGRlZmF1bHRSZWFkZXJDbG9zZWRQcm9taXNlUmVqZWN0LCBkZWZhdWx0UmVhZGVyQ2xvc2VkUHJvbWlzZVJlc29sdmUgfSBmcm9tICcuL3JlYWRhYmxlLXN0cmVhbS9nZW5lcmljLXJlYWRlcic7XG5pbXBvcnQge1xuICBBY3F1aXJlUmVhZGFibGVTdHJlYW1EZWZhdWx0UmVhZGVyLFxuICBJc1JlYWRhYmxlU3RyZWFtRGVmYXVsdFJlYWRlcixcbiAgUmVhZGFibGVTdHJlYW1EZWZhdWx0UmVhZGVyLFxuICBSZWFkYWJsZVN0cmVhbURlZmF1bHRSZWFkZXJFcnJvclJlYWRSZXF1ZXN0cyxcbiAgdHlwZSBSZWFkYWJsZVN0cmVhbURlZmF1bHRSZWFkUmVzdWx0XG59IGZyb20gJy4vcmVhZGFibGUtc3RyZWFtL2RlZmF1bHQtcmVhZGVyJztcbmltcG9ydCB7XG4gIEFjcXVpcmVSZWFkYWJsZVN0cmVhbUJZT0JSZWFkZXIsXG4gIElzUmVhZGFibGVTdHJlYW1CWU9CUmVhZGVyLFxuICBSZWFkYWJsZVN0cmVhbUJZT0JSZWFkZXIsXG4gIFJlYWRhYmxlU3RyZWFtQllPQlJlYWRlckVycm9yUmVhZEludG9SZXF1ZXN0cyxcbiAgdHlwZSBSZWFkYWJsZVN0cmVhbUJZT0JSZWFkUmVzdWx0XG59IGZyb20gJy4vcmVhZGFibGUtc3RyZWFtL2J5b2ItcmVhZGVyJztcbmltcG9ydCB7IFJlYWRhYmxlU3RyZWFtUGlwZVRvIH0gZnJvbSAnLi9yZWFkYWJsZS1zdHJlYW0vcGlwZSc7XG5pbXBvcnQgeyBSZWFkYWJsZVN0cmVhbVRlZSB9IGZyb20gJy4vcmVhZGFibGUtc3RyZWFtL3RlZSc7XG5pbXBvcnQgeyBSZWFkYWJsZVN0cmVhbUZyb20gfSBmcm9tICcuL3JlYWRhYmxlLXN0cmVhbS9mcm9tJztcbmltcG9ydCB7IElzV3JpdGFibGVTdHJlYW0sIElzV3JpdGFibGVTdHJlYW1Mb2NrZWQsIFdyaXRhYmxlU3RyZWFtIH0gZnJvbSAnLi93cml0YWJsZS1zdHJlYW0nO1xuaW1wb3J0IHsgU2ltcGxlUXVldWUgfSBmcm9tICcuL3NpbXBsZS1xdWV1ZSc7XG5pbXBvcnQge1xuICBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyLFxuICBSZWFkYWJsZVN0cmVhbUJZT0JSZXF1ZXN0LFxuICBTZXRVcFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXIsXG4gIFNldFVwUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlckZyb21VbmRlcmx5aW5nU291cmNlXG59IGZyb20gJy4vcmVhZGFibGUtc3RyZWFtL2J5dGUtc3RyZWFtLWNvbnRyb2xsZXInO1xuaW1wb3J0IHtcbiAgUmVhZGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlcixcbiAgU2V0VXBSZWFkYWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyLFxuICBTZXRVcFJlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXJGcm9tVW5kZXJseWluZ1NvdXJjZVxufSBmcm9tICcuL3JlYWRhYmxlLXN0cmVhbS9kZWZhdWx0LWNvbnRyb2xsZXInO1xuaW1wb3J0IHR5cGUge1xuICBVbmRlcmx5aW5nQnl0ZVNvdXJjZSxcbiAgVW5kZXJseWluZ0J5dGVTb3VyY2VQdWxsQ2FsbGJhY2ssXG4gIFVuZGVybHlpbmdCeXRlU291cmNlU3RhcnRDYWxsYmFjayxcbiAgVW5kZXJseWluZ1NvdXJjZSxcbiAgVW5kZXJseWluZ1NvdXJjZUNhbmNlbENhbGxiYWNrLFxuICBVbmRlcmx5aW5nU291cmNlUHVsbENhbGxiYWNrLFxuICBVbmRlcmx5aW5nU291cmNlU3RhcnRDYWxsYmFja1xufSBmcm9tICcuL3JlYWRhYmxlLXN0cmVhbS91bmRlcmx5aW5nLXNvdXJjZSc7XG5pbXBvcnQgeyBub29wIH0gZnJvbSAnLi4vdXRpbHMnO1xuaW1wb3J0IHsgc2V0RnVuY3Rpb25OYW1lLCB0eXBlSXNPYmplY3QgfSBmcm9tICcuL2hlbHBlcnMvbWlzY2VsbGFuZW91cyc7XG5pbXBvcnQgeyBDcmVhdGVBcnJheUZyb21MaXN0LCBTeW1ib2xBc3luY0l0ZXJhdG9yIH0gZnJvbSAnLi9hYnN0cmFjdC1vcHMvZWNtYXNjcmlwdCc7XG5pbXBvcnQgeyBDYW5jZWxTdGVwcyB9IGZyb20gJy4vYWJzdHJhY3Qtb3BzL2ludGVybmFsLW1ldGhvZHMnO1xuaW1wb3J0IHsgSXNOb25OZWdhdGl2ZU51bWJlciB9IGZyb20gJy4vYWJzdHJhY3Qtb3BzL21pc2NlbGxhbmVvdXMnO1xuaW1wb3J0IHsgYXNzZXJ0T2JqZWN0LCBhc3NlcnRSZXF1aXJlZEFyZ3VtZW50IH0gZnJvbSAnLi92YWxpZGF0b3JzL2Jhc2ljJztcbmltcG9ydCB7IGNvbnZlcnRRdWV1aW5nU3RyYXRlZ3kgfSBmcm9tICcuL3ZhbGlkYXRvcnMvcXVldWluZy1zdHJhdGVneSc7XG5pbXBvcnQgeyBFeHRyYWN0SGlnaFdhdGVyTWFyaywgRXh0cmFjdFNpemVBbGdvcml0aG0gfSBmcm9tICcuL2Fic3RyYWN0LW9wcy9xdWV1aW5nLXN0cmF0ZWd5JztcbmltcG9ydCB7IGNvbnZlcnRVbmRlcmx5aW5nRGVmYXVsdE9yQnl0ZVNvdXJjZSB9IGZyb20gJy4vdmFsaWRhdG9ycy91bmRlcmx5aW5nLXNvdXJjZSc7XG5pbXBvcnQgdHlwZSB7XG4gIFJlYWRhYmxlU3RyZWFtQllPQlJlYWRlclJlYWRPcHRpb25zLFxuICBSZWFkYWJsZVN0cmVhbUdldFJlYWRlck9wdGlvbnNcbn0gZnJvbSAnLi9yZWFkYWJsZS1zdHJlYW0vcmVhZGVyLW9wdGlvbnMnO1xuaW1wb3J0IHsgY29udmVydFJlYWRlck9wdGlvbnMgfSBmcm9tICcuL3ZhbGlkYXRvcnMvcmVhZGVyLW9wdGlvbnMnO1xuaW1wb3J0IHR5cGUgeyBTdHJlYW1QaXBlT3B0aW9ucywgVmFsaWRhdGVkU3RyZWFtUGlwZU9wdGlvbnMgfSBmcm9tICcuL3JlYWRhYmxlLXN0cmVhbS9waXBlLW9wdGlvbnMnO1xuaW1wb3J0IHR5cGUgeyBSZWFkYWJsZVN0cmVhbUl0ZXJhdG9yT3B0aW9ucyB9IGZyb20gJy4vcmVhZGFibGUtc3RyZWFtL2l0ZXJhdG9yLW9wdGlvbnMnO1xuaW1wb3J0IHsgY29udmVydEl0ZXJhdG9yT3B0aW9ucyB9IGZyb20gJy4vdmFsaWRhdG9ycy9pdGVyYXRvci1vcHRpb25zJztcbmltcG9ydCB7IGNvbnZlcnRQaXBlT3B0aW9ucyB9IGZyb20gJy4vdmFsaWRhdG9ycy9waXBlLW9wdGlvbnMnO1xuaW1wb3J0IHR5cGUgeyBSZWFkYWJsZVdyaXRhYmxlUGFpciB9IGZyb20gJy4vcmVhZGFibGUtc3RyZWFtL3JlYWRhYmxlLXdyaXRhYmxlLXBhaXInO1xuaW1wb3J0IHsgY29udmVydFJlYWRhYmxlV3JpdGFibGVQYWlyIH0gZnJvbSAnLi92YWxpZGF0b3JzL3JlYWRhYmxlLXdyaXRhYmxlLXBhaXInO1xuaW1wb3J0IHR5cGUgeyBSZWFkYWJsZVN0cmVhbURlZmF1bHRSZWFkZXJMaWtlLCBSZWFkYWJsZVN0cmVhbUxpa2UgfSBmcm9tICcuL3JlYWRhYmxlLXN0cmVhbS9yZWFkYWJsZS1zdHJlYW0tbGlrZSc7XG5pbXBvcnQgdHlwZSB7IE5vblNoYXJlZCB9IGZyb20gJy4vaGVscGVycy9hcnJheS1idWZmZXItdmlldyc7XG5cbmV4cG9ydCB0eXBlIERlZmF1bHRSZWFkYWJsZVN0cmVhbTxSID0gYW55PiA9IFJlYWRhYmxlU3RyZWFtPFI+ICYge1xuICBfcmVhZGFibGVTdHJlYW1Db250cm9sbGVyOiBSZWFkYWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyPFI+XG59O1xuXG5leHBvcnQgdHlwZSBSZWFkYWJsZUJ5dGVTdHJlYW0gPSBSZWFkYWJsZVN0cmVhbTxOb25TaGFyZWQ8VWludDhBcnJheT4+ICYge1xuICBfcmVhZGFibGVTdHJlYW1Db250cm9sbGVyOiBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyXG59O1xuXG50eXBlIFJlYWRhYmxlU3RyZWFtU3RhdGUgPSAncmVhZGFibGUnIHwgJ2Nsb3NlZCcgfCAnZXJyb3JlZCc7XG5cbi8qKlxuICogQSByZWFkYWJsZSBzdHJlYW0gcmVwcmVzZW50cyBhIHNvdXJjZSBvZiBkYXRhLCBmcm9tIHdoaWNoIHlvdSBjYW4gcmVhZC5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBSZWFkYWJsZVN0cmVhbTxSID0gYW55PiBpbXBsZW1lbnRzIEFzeW5jSXRlcmFibGU8Uj4ge1xuICAvKiogQGludGVybmFsICovXG4gIF9zdGF0ZSE6IFJlYWRhYmxlU3RyZWFtU3RhdGU7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX3JlYWRlcjogUmVhZGFibGVTdHJlYW1SZWFkZXI8Uj4gfCB1bmRlZmluZWQ7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX3N0b3JlZEVycm9yOiBhbnk7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX2Rpc3R1cmJlZCE6IGJvb2xlYW47XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX3JlYWRhYmxlU3RyZWFtQ29udHJvbGxlciE6IFJlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXI8Uj4gfCBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyO1xuXG4gIGNvbnN0cnVjdG9yKHVuZGVybHlpbmdTb3VyY2U6IFVuZGVybHlpbmdCeXRlU291cmNlLCBzdHJhdGVneT86IHsgaGlnaFdhdGVyTWFyaz86IG51bWJlcjsgc2l6ZT86IHVuZGVmaW5lZCB9KTtcbiAgY29uc3RydWN0b3IodW5kZXJseWluZ1NvdXJjZT86IFVuZGVybHlpbmdTb3VyY2U8Uj4sIHN0cmF0ZWd5PzogUXVldWluZ1N0cmF0ZWd5PFI+KTtcbiAgY29uc3RydWN0b3IocmF3VW5kZXJseWluZ1NvdXJjZTogVW5kZXJseWluZ1NvdXJjZTxSPiB8IFVuZGVybHlpbmdCeXRlU291cmNlIHwgbnVsbCB8IHVuZGVmaW5lZCA9IHt9LFxuICAgICAgICAgICAgICByYXdTdHJhdGVneTogUXVldWluZ1N0cmF0ZWd5PFI+IHwgbnVsbCB8IHVuZGVmaW5lZCA9IHt9KSB7XG4gICAgaWYgKHJhd1VuZGVybHlpbmdTb3VyY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmF3VW5kZXJseWluZ1NvdXJjZSA9IG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFzc2VydE9iamVjdChyYXdVbmRlcmx5aW5nU291cmNlLCAnRmlyc3QgcGFyYW1ldGVyJyk7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RyYXRlZ3kgPSBjb252ZXJ0UXVldWluZ1N0cmF0ZWd5KHJhd1N0cmF0ZWd5LCAnU2Vjb25kIHBhcmFtZXRlcicpO1xuICAgIGNvbnN0IHVuZGVybHlpbmdTb3VyY2UgPSBjb252ZXJ0VW5kZXJseWluZ0RlZmF1bHRPckJ5dGVTb3VyY2UocmF3VW5kZXJseWluZ1NvdXJjZSwgJ0ZpcnN0IHBhcmFtZXRlcicpO1xuXG4gICAgSW5pdGlhbGl6ZVJlYWRhYmxlU3RyZWFtKHRoaXMpO1xuXG4gICAgaWYgKHVuZGVybHlpbmdTb3VyY2UudHlwZSA9PT0gJ2J5dGVzJykge1xuICAgICAgaWYgKHN0cmF0ZWd5LnNpemUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignVGhlIHN0cmF0ZWd5IGZvciBhIGJ5dGUgc3RyZWFtIGNhbm5vdCBoYXZlIGEgc2l6ZSBmdW5jdGlvbicpO1xuICAgICAgfVxuICAgICAgY29uc3QgaGlnaFdhdGVyTWFyayA9IEV4dHJhY3RIaWdoV2F0ZXJNYXJrKHN0cmF0ZWd5LCAwKTtcbiAgICAgIFNldFVwUmVhZGFibGVCeXRlU3RyZWFtQ29udHJvbGxlckZyb21VbmRlcmx5aW5nU291cmNlKFxuICAgICAgICB0aGlzIGFzIHVua25vd24gYXMgUmVhZGFibGVCeXRlU3RyZWFtLFxuICAgICAgICB1bmRlcmx5aW5nU291cmNlLFxuICAgICAgICBoaWdoV2F0ZXJNYXJrXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBhc3NlcnQodW5kZXJseWluZ1NvdXJjZS50eXBlID09PSB1bmRlZmluZWQpO1xuICAgICAgY29uc3Qgc2l6ZUFsZ29yaXRobSA9IEV4dHJhY3RTaXplQWxnb3JpdGhtKHN0cmF0ZWd5KTtcbiAgICAgIGNvbnN0IGhpZ2hXYXRlck1hcmsgPSBFeHRyYWN0SGlnaFdhdGVyTWFyayhzdHJhdGVneSwgMSk7XG4gICAgICBTZXRVcFJlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXJGcm9tVW5kZXJseWluZ1NvdXJjZShcbiAgICAgICAgdGhpcyxcbiAgICAgICAgdW5kZXJseWluZ1NvdXJjZSxcbiAgICAgICAgaGlnaFdhdGVyTWFyayxcbiAgICAgICAgc2l6ZUFsZ29yaXRobVxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogV2hldGhlciBvciBub3QgdGhlIHJlYWRhYmxlIHN0cmVhbSBpcyBsb2NrZWQgdG8gYSB7QGxpbmsgUmVhZGFibGVTdHJlYW1EZWZhdWx0UmVhZGVyIHwgcmVhZGVyfS5cbiAgICovXG4gIGdldCBsb2NrZWQoKTogYm9vbGVhbiB7XG4gICAgaWYgKCFJc1JlYWRhYmxlU3RyZWFtKHRoaXMpKSB7XG4gICAgICB0aHJvdyBzdHJlYW1CcmFuZENoZWNrRXhjZXB0aW9uKCdsb2NrZWQnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gSXNSZWFkYWJsZVN0cmVhbUxvY2tlZCh0aGlzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYW5jZWxzIHRoZSBzdHJlYW0sIHNpZ25hbGluZyBhIGxvc3Mgb2YgaW50ZXJlc3QgaW4gdGhlIHN0cmVhbSBieSBhIGNvbnN1bWVyLlxuICAgKlxuICAgKiBUaGUgc3VwcGxpZWQgYHJlYXNvbmAgYXJndW1lbnQgd2lsbCBiZSBnaXZlbiB0byB0aGUgdW5kZXJseWluZyBzb3VyY2UncyB7QGxpbmsgVW5kZXJseWluZ1NvdXJjZS5jYW5jZWwgfCBjYW5jZWwoKX1cbiAgICogbWV0aG9kLCB3aGljaCBtaWdodCBvciBtaWdodCBub3QgdXNlIGl0LlxuICAgKi9cbiAgY2FuY2VsKHJlYXNvbjogYW55ID0gdW5kZWZpbmVkKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCFJc1JlYWRhYmxlU3RyZWFtKHRoaXMpKSB7XG4gICAgICByZXR1cm4gcHJvbWlzZVJlamVjdGVkV2l0aChzdHJlYW1CcmFuZENoZWNrRXhjZXB0aW9uKCdjYW5jZWwnKSk7XG4gICAgfVxuXG4gICAgaWYgKElzUmVhZGFibGVTdHJlYW1Mb2NrZWQodGhpcykpIHtcbiAgICAgIHJldHVybiBwcm9taXNlUmVqZWN0ZWRXaXRoKG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjYW5jZWwgYSBzdHJlYW0gdGhhdCBhbHJlYWR5IGhhcyBhIHJlYWRlcicpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gUmVhZGFibGVTdHJlYW1DYW5jZWwodGhpcywgcmVhc29uKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEge0BsaW5rIFJlYWRhYmxlU3RyZWFtQllPQlJlYWRlcn0gYW5kIGxvY2tzIHRoZSBzdHJlYW0gdG8gdGhlIG5ldyByZWFkZXIuXG4gICAqXG4gICAqIFRoaXMgY2FsbCBiZWhhdmVzIHRoZSBzYW1lIHdheSBhcyB0aGUgbm8tYXJndW1lbnQgdmFyaWFudCwgZXhjZXB0IHRoYXQgaXQgb25seSB3b3JrcyBvbiByZWFkYWJsZSBieXRlIHN0cmVhbXMsXG4gICAqIGkuZS4gc3RyZWFtcyB3aGljaCB3ZXJlIGNvbnN0cnVjdGVkIHNwZWNpZmljYWxseSB3aXRoIHRoZSBhYmlsaXR5IHRvIGhhbmRsZSBcImJyaW5nIHlvdXIgb3duIGJ1ZmZlclwiIHJlYWRpbmcuXG4gICAqIFRoZSByZXR1cm5lZCBCWU9CIHJlYWRlciBwcm92aWRlcyB0aGUgYWJpbGl0eSB0byBkaXJlY3RseSByZWFkIGluZGl2aWR1YWwgY2h1bmtzIGZyb20gdGhlIHN0cmVhbSB2aWEgaXRzXG4gICAqIHtAbGluayBSZWFkYWJsZVN0cmVhbUJZT0JSZWFkZXIucmVhZCB8IHJlYWQoKX0gbWV0aG9kLCBpbnRvIGRldmVsb3Blci1zdXBwbGllZCBidWZmZXJzLCBhbGxvd2luZyBtb3JlIHByZWNpc2VcbiAgICogY29udHJvbCBvdmVyIGFsbG9jYXRpb24uXG4gICAqL1xuICBnZXRSZWFkZXIoeyBtb2RlIH06IHsgbW9kZTogJ2J5b2InIH0pOiBSZWFkYWJsZVN0cmVhbUJZT0JSZWFkZXI7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEge0BsaW5rIFJlYWRhYmxlU3RyZWFtRGVmYXVsdFJlYWRlcn0gYW5kIGxvY2tzIHRoZSBzdHJlYW0gdG8gdGhlIG5ldyByZWFkZXIuXG4gICAqIFdoaWxlIHRoZSBzdHJlYW0gaXMgbG9ja2VkLCBubyBvdGhlciByZWFkZXIgY2FuIGJlIGFjcXVpcmVkIHVudGlsIHRoaXMgb25lIGlzIHJlbGVhc2VkLlxuICAgKlxuICAgKiBUaGlzIGZ1bmN0aW9uYWxpdHkgaXMgZXNwZWNpYWxseSB1c2VmdWwgZm9yIGNyZWF0aW5nIGFic3RyYWN0aW9ucyB0aGF0IGRlc2lyZSB0aGUgYWJpbGl0eSB0byBjb25zdW1lIGEgc3RyZWFtXG4gICAqIGluIGl0cyBlbnRpcmV0eS4gQnkgZ2V0dGluZyBhIHJlYWRlciBmb3IgdGhlIHN0cmVhbSwgeW91IGNhbiBlbnN1cmUgbm9ib2R5IGVsc2UgY2FuIGludGVybGVhdmUgcmVhZHMgd2l0aCB5b3Vyc1xuICAgKiBvciBjYW5jZWwgdGhlIHN0cmVhbSwgd2hpY2ggd291bGQgaW50ZXJmZXJlIHdpdGggeW91ciBhYnN0cmFjdGlvbi5cbiAgICovXG4gIGdldFJlYWRlcigpOiBSZWFkYWJsZVN0cmVhbURlZmF1bHRSZWFkZXI8Uj47XG4gIGdldFJlYWRlcihcbiAgICByYXdPcHRpb25zOiBSZWFkYWJsZVN0cmVhbUdldFJlYWRlck9wdGlvbnMgfCBudWxsIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkXG4gICk6IFJlYWRhYmxlU3RyZWFtRGVmYXVsdFJlYWRlcjxSPiB8IFJlYWRhYmxlU3RyZWFtQllPQlJlYWRlciB7XG4gICAgaWYgKCFJc1JlYWRhYmxlU3RyZWFtKHRoaXMpKSB7XG4gICAgICB0aHJvdyBzdHJlYW1CcmFuZENoZWNrRXhjZXB0aW9uKCdnZXRSZWFkZXInKTtcbiAgICB9XG5cbiAgICBjb25zdCBvcHRpb25zID0gY29udmVydFJlYWRlck9wdGlvbnMocmF3T3B0aW9ucywgJ0ZpcnN0IHBhcmFtZXRlcicpO1xuXG4gICAgaWYgKG9wdGlvbnMubW9kZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gQWNxdWlyZVJlYWRhYmxlU3RyZWFtRGVmYXVsdFJlYWRlcih0aGlzKTtcbiAgICB9XG5cbiAgICBhc3NlcnQob3B0aW9ucy5tb2RlID09PSAnYnlvYicpO1xuICAgIHJldHVybiBBY3F1aXJlUmVhZGFibGVTdHJlYW1CWU9CUmVhZGVyKHRoaXMgYXMgdW5rbm93biBhcyBSZWFkYWJsZUJ5dGVTdHJlYW0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFByb3ZpZGVzIGEgY29udmVuaWVudCwgY2hhaW5hYmxlIHdheSBvZiBwaXBpbmcgdGhpcyByZWFkYWJsZSBzdHJlYW0gdGhyb3VnaCBhIHRyYW5zZm9ybSBzdHJlYW1cbiAgICogKG9yIGFueSBvdGhlciBgeyB3cml0YWJsZSwgcmVhZGFibGUgfWAgcGFpcikuIEl0IHNpbXBseSB7QGxpbmsgUmVhZGFibGVTdHJlYW0ucGlwZVRvIHwgcGlwZXN9IHRoZSBzdHJlYW1cbiAgICogaW50byB0aGUgd3JpdGFibGUgc2lkZSBvZiB0aGUgc3VwcGxpZWQgcGFpciwgYW5kIHJldHVybnMgdGhlIHJlYWRhYmxlIHNpZGUgZm9yIGZ1cnRoZXIgdXNlLlxuICAgKlxuICAgKiBQaXBpbmcgYSBzdHJlYW0gd2lsbCBsb2NrIGl0IGZvciB0aGUgZHVyYXRpb24gb2YgdGhlIHBpcGUsIHByZXZlbnRpbmcgYW55IG90aGVyIGNvbnN1bWVyIGZyb20gYWNxdWlyaW5nIGEgcmVhZGVyLlxuICAgKi9cbiAgcGlwZVRocm91Z2g8UlMgZXh0ZW5kcyBSZWFkYWJsZVN0cmVhbT4oXG4gICAgdHJhbnNmb3JtOiB7IHJlYWRhYmxlOiBSUzsgd3JpdGFibGU6IFdyaXRhYmxlU3RyZWFtPFI+IH0sXG4gICAgb3B0aW9ucz86IFN0cmVhbVBpcGVPcHRpb25zXG4gICk6IFJTO1xuICBwaXBlVGhyb3VnaDxSUyBleHRlbmRzIFJlYWRhYmxlU3RyZWFtPihcbiAgICByYXdUcmFuc2Zvcm06IHsgcmVhZGFibGU6IFJTOyB3cml0YWJsZTogV3JpdGFibGVTdHJlYW08Uj4gfSB8IG51bGwgfCB1bmRlZmluZWQsXG4gICAgcmF3T3B0aW9uczogU3RyZWFtUGlwZU9wdGlvbnMgfCBudWxsIHwgdW5kZWZpbmVkID0ge31cbiAgKTogUlMge1xuICAgIGlmICghSXNSZWFkYWJsZVN0cmVhbSh0aGlzKSkge1xuICAgICAgdGhyb3cgc3RyZWFtQnJhbmRDaGVja0V4Y2VwdGlvbigncGlwZVRocm91Z2gnKTtcbiAgICB9XG4gICAgYXNzZXJ0UmVxdWlyZWRBcmd1bWVudChyYXdUcmFuc2Zvcm0sIDEsICdwaXBlVGhyb3VnaCcpO1xuXG4gICAgY29uc3QgdHJhbnNmb3JtID0gY29udmVydFJlYWRhYmxlV3JpdGFibGVQYWlyKHJhd1RyYW5zZm9ybSwgJ0ZpcnN0IHBhcmFtZXRlcicpO1xuICAgIGNvbnN0IG9wdGlvbnMgPSBjb252ZXJ0UGlwZU9wdGlvbnMocmF3T3B0aW9ucywgJ1NlY29uZCBwYXJhbWV0ZXInKTtcblxuICAgIGlmIChJc1JlYWRhYmxlU3RyZWFtTG9ja2VkKHRoaXMpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdSZWFkYWJsZVN0cmVhbS5wcm90b3R5cGUucGlwZVRocm91Z2ggY2Fubm90IGJlIHVzZWQgb24gYSBsb2NrZWQgUmVhZGFibGVTdHJlYW0nKTtcbiAgICB9XG4gICAgaWYgKElzV3JpdGFibGVTdHJlYW1Mb2NrZWQodHJhbnNmb3JtLndyaXRhYmxlKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignUmVhZGFibGVTdHJlYW0ucHJvdG90eXBlLnBpcGVUaHJvdWdoIGNhbm5vdCBiZSB1c2VkIG9uIGEgbG9ja2VkIFdyaXRhYmxlU3RyZWFtJyk7XG4gICAgfVxuXG4gICAgY29uc3QgcHJvbWlzZSA9IFJlYWRhYmxlU3RyZWFtUGlwZVRvKFxuICAgICAgdGhpcywgdHJhbnNmb3JtLndyaXRhYmxlLCBvcHRpb25zLnByZXZlbnRDbG9zZSwgb3B0aW9ucy5wcmV2ZW50QWJvcnQsIG9wdGlvbnMucHJldmVudENhbmNlbCwgb3B0aW9ucy5zaWduYWxcbiAgICApO1xuXG4gICAgc2V0UHJvbWlzZUlzSGFuZGxlZFRvVHJ1ZShwcm9taXNlKTtcblxuICAgIHJldHVybiB0cmFuc2Zvcm0ucmVhZGFibGU7XG4gIH1cblxuICAvKipcbiAgICogUGlwZXMgdGhpcyByZWFkYWJsZSBzdHJlYW0gdG8gYSBnaXZlbiB3cml0YWJsZSBzdHJlYW0uIFRoZSB3YXkgaW4gd2hpY2ggdGhlIHBpcGluZyBwcm9jZXNzIGJlaGF2ZXMgdW5kZXJcbiAgICogdmFyaW91cyBlcnJvciBjb25kaXRpb25zIGNhbiBiZSBjdXN0b21pemVkIHdpdGggYSBudW1iZXIgb2YgcGFzc2VkIG9wdGlvbnMuIEl0IHJldHVybnMgYSBwcm9taXNlIHRoYXQgZnVsZmlsbHNcbiAgICogd2hlbiB0aGUgcGlwaW5nIHByb2Nlc3MgY29tcGxldGVzIHN1Y2Nlc3NmdWxseSwgb3IgcmVqZWN0cyBpZiBhbnkgZXJyb3JzIHdlcmUgZW5jb3VudGVyZWQuXG4gICAqXG4gICAqIFBpcGluZyBhIHN0cmVhbSB3aWxsIGxvY2sgaXQgZm9yIHRoZSBkdXJhdGlvbiBvZiB0aGUgcGlwZSwgcHJldmVudGluZyBhbnkgb3RoZXIgY29uc3VtZXIgZnJvbSBhY3F1aXJpbmcgYSByZWFkZXIuXG4gICAqL1xuICBwaXBlVG8oZGVzdGluYXRpb246IFdyaXRhYmxlU3RyZWFtPFI+LCBvcHRpb25zPzogU3RyZWFtUGlwZU9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+O1xuICBwaXBlVG8oZGVzdGluYXRpb246IFdyaXRhYmxlU3RyZWFtPFI+IHwgbnVsbCB8IHVuZGVmaW5lZCxcbiAgICAgICAgIHJhd09wdGlvbnM6IFN0cmVhbVBpcGVPcHRpb25zIHwgbnVsbCB8IHVuZGVmaW5lZCA9IHt9KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCFJc1JlYWRhYmxlU3RyZWFtKHRoaXMpKSB7XG4gICAgICByZXR1cm4gcHJvbWlzZVJlamVjdGVkV2l0aChzdHJlYW1CcmFuZENoZWNrRXhjZXB0aW9uKCdwaXBlVG8nKSk7XG4gICAgfVxuXG4gICAgaWYgKGRlc3RpbmF0aW9uID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBwcm9taXNlUmVqZWN0ZWRXaXRoKGBQYXJhbWV0ZXIgMSBpcyByZXF1aXJlZCBpbiAncGlwZVRvJy5gKTtcbiAgICB9XG4gICAgaWYgKCFJc1dyaXRhYmxlU3RyZWFtKGRlc3RpbmF0aW9uKSkge1xuICAgICAgcmV0dXJuIHByb21pc2VSZWplY3RlZFdpdGgoXG4gICAgICAgIG5ldyBUeXBlRXJyb3IoYFJlYWRhYmxlU3RyZWFtLnByb3RvdHlwZS5waXBlVG8ncyBmaXJzdCBhcmd1bWVudCBtdXN0IGJlIGEgV3JpdGFibGVTdHJlYW1gKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBsZXQgb3B0aW9uczogVmFsaWRhdGVkU3RyZWFtUGlwZU9wdGlvbnM7XG4gICAgdHJ5IHtcbiAgICAgIG9wdGlvbnMgPSBjb252ZXJ0UGlwZU9wdGlvbnMocmF3T3B0aW9ucywgJ1NlY29uZCBwYXJhbWV0ZXInKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gcHJvbWlzZVJlamVjdGVkV2l0aChlKTtcbiAgICB9XG5cbiAgICBpZiAoSXNSZWFkYWJsZVN0cmVhbUxvY2tlZCh0aGlzKSkge1xuICAgICAgcmV0dXJuIHByb21pc2VSZWplY3RlZFdpdGgoXG4gICAgICAgIG5ldyBUeXBlRXJyb3IoJ1JlYWRhYmxlU3RyZWFtLnByb3RvdHlwZS5waXBlVG8gY2Fubm90IGJlIHVzZWQgb24gYSBsb2NrZWQgUmVhZGFibGVTdHJlYW0nKVxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKElzV3JpdGFibGVTdHJlYW1Mb2NrZWQoZGVzdGluYXRpb24pKSB7XG4gICAgICByZXR1cm4gcHJvbWlzZVJlamVjdGVkV2l0aChcbiAgICAgICAgbmV3IFR5cGVFcnJvcignUmVhZGFibGVTdHJlYW0ucHJvdG90eXBlLnBpcGVUbyBjYW5ub3QgYmUgdXNlZCBvbiBhIGxvY2tlZCBXcml0YWJsZVN0cmVhbScpXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiBSZWFkYWJsZVN0cmVhbVBpcGVUbzxSPihcbiAgICAgIHRoaXMsIGRlc3RpbmF0aW9uLCBvcHRpb25zLnByZXZlbnRDbG9zZSwgb3B0aW9ucy5wcmV2ZW50QWJvcnQsIG9wdGlvbnMucHJldmVudENhbmNlbCwgb3B0aW9ucy5zaWduYWxcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFRlZXMgdGhpcyByZWFkYWJsZSBzdHJlYW0sIHJldHVybmluZyBhIHR3by1lbGVtZW50IGFycmF5IGNvbnRhaW5pbmcgdGhlIHR3byByZXN1bHRpbmcgYnJhbmNoZXMgYXNcbiAgICogbmV3IHtAbGluayBSZWFkYWJsZVN0cmVhbX0gaW5zdGFuY2VzLlxuICAgKlxuICAgKiBUZWVpbmcgYSBzdHJlYW0gd2lsbCBsb2NrIGl0LCBwcmV2ZW50aW5nIGFueSBvdGhlciBjb25zdW1lciBmcm9tIGFjcXVpcmluZyBhIHJlYWRlci5cbiAgICogVG8gY2FuY2VsIHRoZSBzdHJlYW0sIGNhbmNlbCBib3RoIG9mIHRoZSByZXN1bHRpbmcgYnJhbmNoZXM7IGEgY29tcG9zaXRlIGNhbmNlbGxhdGlvbiByZWFzb24gd2lsbCB0aGVuIGJlXG4gICAqIHByb3BhZ2F0ZWQgdG8gdGhlIHN0cmVhbSdzIHVuZGVybHlpbmcgc291cmNlLlxuICAgKlxuICAgKiBOb3RlIHRoYXQgdGhlIGNodW5rcyBzZWVuIGluIGVhY2ggYnJhbmNoIHdpbGwgYmUgdGhlIHNhbWUgb2JqZWN0LiBJZiB0aGUgY2h1bmtzIGFyZSBub3QgaW1tdXRhYmxlLFxuICAgKiB0aGlzIGNvdWxkIGFsbG93IGludGVyZmVyZW5jZSBiZXR3ZWVuIHRoZSB0d28gYnJhbmNoZXMuXG4gICAqL1xuICB0ZWUoKTogW1JlYWRhYmxlU3RyZWFtPFI+LCBSZWFkYWJsZVN0cmVhbTxSPl0ge1xuICAgIGlmICghSXNSZWFkYWJsZVN0cmVhbSh0aGlzKSkge1xuICAgICAgdGhyb3cgc3RyZWFtQnJhbmRDaGVja0V4Y2VwdGlvbigndGVlJyk7XG4gICAgfVxuXG4gICAgY29uc3QgYnJhbmNoZXMgPSBSZWFkYWJsZVN0cmVhbVRlZSh0aGlzLCBmYWxzZSk7XG4gICAgcmV0dXJuIENyZWF0ZUFycmF5RnJvbUxpc3QoYnJhbmNoZXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFzeW5jaHJvbm91c2x5IGl0ZXJhdGVzIG92ZXIgdGhlIGNodW5rcyBpbiB0aGUgc3RyZWFtJ3MgaW50ZXJuYWwgcXVldWUuXG4gICAqXG4gICAqIEFzeW5jaHJvbm91c2x5IGl0ZXJhdGluZyBvdmVyIHRoZSBzdHJlYW0gd2lsbCBsb2NrIGl0LCBwcmV2ZW50aW5nIGFueSBvdGhlciBjb25zdW1lciBmcm9tIGFjcXVpcmluZyBhIHJlYWRlci5cbiAgICogVGhlIGxvY2sgd2lsbCBiZSByZWxlYXNlZCBpZiB0aGUgYXN5bmMgaXRlcmF0b3IncyB7QGxpbmsgUmVhZGFibGVTdHJlYW1Bc3luY0l0ZXJhdG9yLnJldHVybiB8IHJldHVybigpfSBtZXRob2RcbiAgICogaXMgY2FsbGVkLCBlLmcuIGJ5IGJyZWFraW5nIG91dCBvZiB0aGUgbG9vcC5cbiAgICpcbiAgICogQnkgZGVmYXVsdCwgY2FsbGluZyB0aGUgYXN5bmMgaXRlcmF0b3IncyB7QGxpbmsgUmVhZGFibGVTdHJlYW1Bc3luY0l0ZXJhdG9yLnJldHVybiB8IHJldHVybigpfSBtZXRob2Qgd2lsbCBhbHNvXG4gICAqIGNhbmNlbCB0aGUgc3RyZWFtLiBUbyBwcmV2ZW50IHRoaXMsIHVzZSB0aGUgc3RyZWFtJ3Mge0BsaW5rIFJlYWRhYmxlU3RyZWFtLnZhbHVlcyB8IHZhbHVlcygpfSBtZXRob2QsIHBhc3NpbmdcbiAgICogYHRydWVgIGZvciB0aGUgYHByZXZlbnRDYW5jZWxgIG9wdGlvbi5cbiAgICovXG4gIHZhbHVlcyhvcHRpb25zPzogUmVhZGFibGVTdHJlYW1JdGVyYXRvck9wdGlvbnMpOiBSZWFkYWJsZVN0cmVhbUFzeW5jSXRlcmF0b3I8Uj47XG4gIHZhbHVlcyhyYXdPcHRpb25zOiBSZWFkYWJsZVN0cmVhbUl0ZXJhdG9yT3B0aW9ucyB8IG51bGwgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQpOiBSZWFkYWJsZVN0cmVhbUFzeW5jSXRlcmF0b3I8Uj4ge1xuICAgIGlmICghSXNSZWFkYWJsZVN0cmVhbSh0aGlzKSkge1xuICAgICAgdGhyb3cgc3RyZWFtQnJhbmRDaGVja0V4Y2VwdGlvbigndmFsdWVzJyk7XG4gICAgfVxuXG4gICAgY29uc3Qgb3B0aW9ucyA9IGNvbnZlcnRJdGVyYXRvck9wdGlvbnMocmF3T3B0aW9ucywgJ0ZpcnN0IHBhcmFtZXRlcicpO1xuICAgIHJldHVybiBBY3F1aXJlUmVhZGFibGVTdHJlYW1Bc3luY0l0ZXJhdG9yPFI+KHRoaXMsIG9wdGlvbnMucHJldmVudENhbmNlbCk7XG4gIH1cblxuICAvKipcbiAgICoge0Bpbmhlcml0RG9jIFJlYWRhYmxlU3RyZWFtLnZhbHVlc31cbiAgICovXG4gIFtTeW1ib2wuYXN5bmNJdGVyYXRvcl0ob3B0aW9ucz86IFJlYWRhYmxlU3RyZWFtSXRlcmF0b3JPcHRpb25zKTogUmVhZGFibGVTdHJlYW1Bc3luY0l0ZXJhdG9yPFI+O1xuXG4gIFtTeW1ib2xBc3luY0l0ZXJhdG9yXShvcHRpb25zPzogUmVhZGFibGVTdHJlYW1JdGVyYXRvck9wdGlvbnMpOiBSZWFkYWJsZVN0cmVhbUFzeW5jSXRlcmF0b3I8Uj4ge1xuICAgIC8vIFN0dWIgaW1wbGVtZW50YXRpb24sIG92ZXJyaWRkZW4gYmVsb3dcbiAgICByZXR1cm4gdGhpcy52YWx1ZXMob3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBSZWFkYWJsZVN0cmVhbSB3cmFwcGluZyB0aGUgcHJvdmlkZWQgaXRlcmFibGUgb3IgYXN5bmMgaXRlcmFibGUuXG4gICAqXG4gICAqIFRoaXMgY2FuIGJlIHVzZWQgdG8gYWRhcHQgdmFyaW91cyBraW5kcyBvZiBvYmplY3RzIGludG8gYSByZWFkYWJsZSBzdHJlYW0sXG4gICAqIHN1Y2ggYXMgYW4gYXJyYXksIGFuIGFzeW5jIGdlbmVyYXRvciwgb3IgYSBOb2RlLmpzIHJlYWRhYmxlIHN0cmVhbS5cbiAgICovXG4gIHN0YXRpYyBmcm9tPFI+KGFzeW5jSXRlcmFibGU6IEl0ZXJhYmxlPFI+IHwgQXN5bmNJdGVyYWJsZTxSPiB8IFJlYWRhYmxlU3RyZWFtTGlrZTxSPik6IFJlYWRhYmxlU3RyZWFtPFI+IHtcbiAgICByZXR1cm4gUmVhZGFibGVTdHJlYW1Gcm9tKGFzeW5jSXRlcmFibGUpO1xuICB9XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFJlYWRhYmxlU3RyZWFtLCB7XG4gIGZyb206IHsgZW51bWVyYWJsZTogdHJ1ZSB9XG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFJlYWRhYmxlU3RyZWFtLnByb3RvdHlwZSwge1xuICBjYW5jZWw6IHsgZW51bWVyYWJsZTogdHJ1ZSB9LFxuICBnZXRSZWFkZXI6IHsgZW51bWVyYWJsZTogdHJ1ZSB9LFxuICBwaXBlVGhyb3VnaDogeyBlbnVtZXJhYmxlOiB0cnVlIH0sXG4gIHBpcGVUbzogeyBlbnVtZXJhYmxlOiB0cnVlIH0sXG4gIHRlZTogeyBlbnVtZXJhYmxlOiB0cnVlIH0sXG4gIHZhbHVlczogeyBlbnVtZXJhYmxlOiB0cnVlIH0sXG4gIGxvY2tlZDogeyBlbnVtZXJhYmxlOiB0cnVlIH1cbn0pO1xuc2V0RnVuY3Rpb25OYW1lKFJlYWRhYmxlU3RyZWFtLmZyb20sICdmcm9tJyk7XG5zZXRGdW5jdGlvbk5hbWUoUmVhZGFibGVTdHJlYW0ucHJvdG90eXBlLmNhbmNlbCwgJ2NhbmNlbCcpO1xuc2V0RnVuY3Rpb25OYW1lKFJlYWRhYmxlU3RyZWFtLnByb3RvdHlwZS5nZXRSZWFkZXIsICdnZXRSZWFkZXInKTtcbnNldEZ1bmN0aW9uTmFtZShSZWFkYWJsZVN0cmVhbS5wcm90b3R5cGUucGlwZVRocm91Z2gsICdwaXBlVGhyb3VnaCcpO1xuc2V0RnVuY3Rpb25OYW1lKFJlYWRhYmxlU3RyZWFtLnByb3RvdHlwZS5waXBlVG8sICdwaXBlVG8nKTtcbnNldEZ1bmN0aW9uTmFtZShSZWFkYWJsZVN0cmVhbS5wcm90b3R5cGUudGVlLCAndGVlJyk7XG5zZXRGdW5jdGlvbk5hbWUoUmVhZGFibGVTdHJlYW0ucHJvdG90eXBlLnZhbHVlcywgJ3ZhbHVlcycpO1xuaWYgKHR5cGVvZiBTeW1ib2wudG9TdHJpbmdUYWcgPT09ICdzeW1ib2wnKSB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWFkYWJsZVN0cmVhbS5wcm90b3R5cGUsIFN5bWJvbC50b1N0cmluZ1RhZywge1xuICAgIHZhbHVlOiAnUmVhZGFibGVTdHJlYW0nLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICB9KTtcbn1cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWFkYWJsZVN0cmVhbS5wcm90b3R5cGUsIFN5bWJvbEFzeW5jSXRlcmF0b3IsIHtcbiAgdmFsdWU6IFJlYWRhYmxlU3RyZWFtLnByb3RvdHlwZS52YWx1ZXMsXG4gIHdyaXRhYmxlOiB0cnVlLFxuICBjb25maWd1cmFibGU6IHRydWVcbn0pO1xuXG5leHBvcnQgdHlwZSB7XG4gIFJlYWRhYmxlU3RyZWFtQXN5bmNJdGVyYXRvcixcbiAgUmVhZGFibGVTdHJlYW1EZWZhdWx0UmVhZFJlc3VsdCxcbiAgUmVhZGFibGVTdHJlYW1CWU9CUmVhZFJlc3VsdCxcbiAgUmVhZGFibGVTdHJlYW1CWU9CUmVhZGVyUmVhZE9wdGlvbnMsXG4gIFVuZGVybHlpbmdCeXRlU291cmNlLFxuICBVbmRlcmx5aW5nU291cmNlLFxuICBVbmRlcmx5aW5nU291cmNlU3RhcnRDYWxsYmFjayxcbiAgVW5kZXJseWluZ1NvdXJjZVB1bGxDYWxsYmFjayxcbiAgVW5kZXJseWluZ1NvdXJjZUNhbmNlbENhbGxiYWNrLFxuICBVbmRlcmx5aW5nQnl0ZVNvdXJjZVN0YXJ0Q2FsbGJhY2ssXG4gIFVuZGVybHlpbmdCeXRlU291cmNlUHVsbENhbGxiYWNrLFxuICBTdHJlYW1QaXBlT3B0aW9ucyxcbiAgUmVhZGFibGVXcml0YWJsZVBhaXIsXG4gIFJlYWRhYmxlU3RyZWFtSXRlcmF0b3JPcHRpb25zLFxuICBSZWFkYWJsZVN0cmVhbUxpa2UsXG4gIFJlYWRhYmxlU3RyZWFtRGVmYXVsdFJlYWRlckxpa2Vcbn07XG5cbi8vIEFic3RyYWN0IG9wZXJhdGlvbnMgZm9yIHRoZSBSZWFkYWJsZVN0cmVhbS5cblxuLy8gVGhyb3dzIGlmIGFuZCBvbmx5IGlmIHN0YXJ0QWxnb3JpdGhtIHRocm93cy5cbmV4cG9ydCBmdW5jdGlvbiBDcmVhdGVSZWFkYWJsZVN0cmVhbTxSPihcbiAgc3RhcnRBbGdvcml0aG06ICgpID0+IHZvaWQgfCBQcm9taXNlTGlrZTx2b2lkPixcbiAgcHVsbEFsZ29yaXRobTogKCkgPT4gUHJvbWlzZTx2b2lkPixcbiAgY2FuY2VsQWxnb3JpdGhtOiAocmVhc29uOiBhbnkpID0+IFByb21pc2U8dm9pZD4sXG4gIGhpZ2hXYXRlck1hcmsgPSAxLFxuICBzaXplQWxnb3JpdGhtOiBRdWV1aW5nU3RyYXRlZ3lTaXplQ2FsbGJhY2s8Uj4gPSAoKSA9PiAxXG4pOiBEZWZhdWx0UmVhZGFibGVTdHJlYW08Uj4ge1xuICBhc3NlcnQoSXNOb25OZWdhdGl2ZU51bWJlcihoaWdoV2F0ZXJNYXJrKSk7XG5cbiAgY29uc3Qgc3RyZWFtOiBEZWZhdWx0UmVhZGFibGVTdHJlYW08Uj4gPSBPYmplY3QuY3JlYXRlKFJlYWRhYmxlU3RyZWFtLnByb3RvdHlwZSk7XG4gIEluaXRpYWxpemVSZWFkYWJsZVN0cmVhbShzdHJlYW0pO1xuXG4gIGNvbnN0IGNvbnRyb2xsZXI6IFJlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXI8Uj4gPSBPYmplY3QuY3JlYXRlKFJlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXIucHJvdG90eXBlKTtcbiAgU2V0VXBSZWFkYWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyKFxuICAgIHN0cmVhbSwgY29udHJvbGxlciwgc3RhcnRBbGdvcml0aG0sIHB1bGxBbGdvcml0aG0sIGNhbmNlbEFsZ29yaXRobSwgaGlnaFdhdGVyTWFyaywgc2l6ZUFsZ29yaXRobVxuICApO1xuXG4gIHJldHVybiBzdHJlYW07XG59XG5cbi8vIFRocm93cyBpZiBhbmQgb25seSBpZiBzdGFydEFsZ29yaXRobSB0aHJvd3MuXG5leHBvcnQgZnVuY3Rpb24gQ3JlYXRlUmVhZGFibGVCeXRlU3RyZWFtKFxuICBzdGFydEFsZ29yaXRobTogKCkgPT4gdm9pZCB8IFByb21pc2VMaWtlPHZvaWQ+LFxuICBwdWxsQWxnb3JpdGhtOiAoKSA9PiBQcm9taXNlPHZvaWQ+LFxuICBjYW5jZWxBbGdvcml0aG06IChyZWFzb246IGFueSkgPT4gUHJvbWlzZTx2b2lkPlxuKTogUmVhZGFibGVCeXRlU3RyZWFtIHtcbiAgY29uc3Qgc3RyZWFtOiBSZWFkYWJsZUJ5dGVTdHJlYW0gPSBPYmplY3QuY3JlYXRlKFJlYWRhYmxlU3RyZWFtLnByb3RvdHlwZSk7XG4gIEluaXRpYWxpemVSZWFkYWJsZVN0cmVhbShzdHJlYW0pO1xuXG4gIGNvbnN0IGNvbnRyb2xsZXI6IFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXIgPSBPYmplY3QuY3JlYXRlKFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXIucHJvdG90eXBlKTtcbiAgU2V0VXBSZWFkYWJsZUJ5dGVTdHJlYW1Db250cm9sbGVyKHN0cmVhbSwgY29udHJvbGxlciwgc3RhcnRBbGdvcml0aG0sIHB1bGxBbGdvcml0aG0sIGNhbmNlbEFsZ29yaXRobSwgMCwgdW5kZWZpbmVkKTtcblxuICByZXR1cm4gc3RyZWFtO1xufVxuXG5mdW5jdGlvbiBJbml0aWFsaXplUmVhZGFibGVTdHJlYW0oc3RyZWFtOiBSZWFkYWJsZVN0cmVhbSkge1xuICBzdHJlYW0uX3N0YXRlID0gJ3JlYWRhYmxlJztcbiAgc3RyZWFtLl9yZWFkZXIgPSB1bmRlZmluZWQ7XG4gIHN0cmVhbS5fc3RvcmVkRXJyb3IgPSB1bmRlZmluZWQ7XG4gIHN0cmVhbS5fZGlzdHVyYmVkID0gZmFsc2U7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBJc1JlYWRhYmxlU3RyZWFtKHg6IHVua25vd24pOiB4IGlzIFJlYWRhYmxlU3RyZWFtIHtcbiAgaWYgKCF0eXBlSXNPYmplY3QoeCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh4LCAnX3JlYWRhYmxlU3RyZWFtQ29udHJvbGxlcicpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIHggaW5zdGFuY2VvZiBSZWFkYWJsZVN0cmVhbTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIElzUmVhZGFibGVTdHJlYW1EaXN0dXJiZWQoc3RyZWFtOiBSZWFkYWJsZVN0cmVhbSk6IGJvb2xlYW4ge1xuICBhc3NlcnQoSXNSZWFkYWJsZVN0cmVhbShzdHJlYW0pKTtcblxuICByZXR1cm4gc3RyZWFtLl9kaXN0dXJiZWQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBJc1JlYWRhYmxlU3RyZWFtTG9ja2VkKHN0cmVhbTogUmVhZGFibGVTdHJlYW0pOiBib29sZWFuIHtcbiAgYXNzZXJ0KElzUmVhZGFibGVTdHJlYW0oc3RyZWFtKSk7XG5cbiAgaWYgKHN0cmVhbS5fcmVhZGVyID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuLy8gUmVhZGFibGVTdHJlYW0gQVBJIGV4cG9zZWQgZm9yIGNvbnRyb2xsZXJzLlxuXG5leHBvcnQgZnVuY3Rpb24gUmVhZGFibGVTdHJlYW1DYW5jZWw8Uj4oc3RyZWFtOiBSZWFkYWJsZVN0cmVhbTxSPiwgcmVhc29uOiBhbnkpOiBQcm9taXNlPHVuZGVmaW5lZD4ge1xuICBzdHJlYW0uX2Rpc3R1cmJlZCA9IHRydWU7XG5cbiAgaWYgKHN0cmVhbS5fc3RhdGUgPT09ICdjbG9zZWQnKSB7XG4gICAgcmV0dXJuIHByb21pc2VSZXNvbHZlZFdpdGgodW5kZWZpbmVkKTtcbiAgfVxuICBpZiAoc3RyZWFtLl9zdGF0ZSA9PT0gJ2Vycm9yZWQnKSB7XG4gICAgcmV0dXJuIHByb21pc2VSZWplY3RlZFdpdGgoc3RyZWFtLl9zdG9yZWRFcnJvcik7XG4gIH1cblxuICBSZWFkYWJsZVN0cmVhbUNsb3NlKHN0cmVhbSk7XG5cbiAgY29uc3QgcmVhZGVyID0gc3RyZWFtLl9yZWFkZXI7XG4gIGlmIChyZWFkZXIgIT09IHVuZGVmaW5lZCAmJiBJc1JlYWRhYmxlU3RyZWFtQllPQlJlYWRlcihyZWFkZXIpKSB7XG4gICAgY29uc3QgcmVhZEludG9SZXF1ZXN0cyA9IHJlYWRlci5fcmVhZEludG9SZXF1ZXN0cztcbiAgICByZWFkZXIuX3JlYWRJbnRvUmVxdWVzdHMgPSBuZXcgU2ltcGxlUXVldWUoKTtcbiAgICByZWFkSW50b1JlcXVlc3RzLmZvckVhY2gocmVhZEludG9SZXF1ZXN0ID0+IHtcbiAgICAgIHJlYWRJbnRvUmVxdWVzdC5fY2xvc2VTdGVwcyh1bmRlZmluZWQpO1xuICAgIH0pO1xuICB9XG5cbiAgY29uc3Qgc291cmNlQ2FuY2VsUHJvbWlzZSA9IHN0cmVhbS5fcmVhZGFibGVTdHJlYW1Db250cm9sbGVyW0NhbmNlbFN0ZXBzXShyZWFzb24pO1xuICByZXR1cm4gdHJhbnNmb3JtUHJvbWlzZVdpdGgoc291cmNlQ2FuY2VsUHJvbWlzZSwgbm9vcCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBSZWFkYWJsZVN0cmVhbUNsb3NlPFI+KHN0cmVhbTogUmVhZGFibGVTdHJlYW08Uj4pOiB2b2lkIHtcbiAgYXNzZXJ0KHN0cmVhbS5fc3RhdGUgPT09ICdyZWFkYWJsZScpO1xuXG4gIHN0cmVhbS5fc3RhdGUgPSAnY2xvc2VkJztcblxuICBjb25zdCByZWFkZXIgPSBzdHJlYW0uX3JlYWRlcjtcblxuICBpZiAocmVhZGVyID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBkZWZhdWx0UmVhZGVyQ2xvc2VkUHJvbWlzZVJlc29sdmUocmVhZGVyKTtcblxuICBpZiAoSXNSZWFkYWJsZVN0cmVhbURlZmF1bHRSZWFkZXI8Uj4ocmVhZGVyKSkge1xuICAgIGNvbnN0IHJlYWRSZXF1ZXN0cyA9IHJlYWRlci5fcmVhZFJlcXVlc3RzO1xuICAgIHJlYWRlci5fcmVhZFJlcXVlc3RzID0gbmV3IFNpbXBsZVF1ZXVlKCk7XG4gICAgcmVhZFJlcXVlc3RzLmZvckVhY2gocmVhZFJlcXVlc3QgPT4ge1xuICAgICAgcmVhZFJlcXVlc3QuX2Nsb3NlU3RlcHMoKTtcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gUmVhZGFibGVTdHJlYW1FcnJvcjxSPihzdHJlYW06IFJlYWRhYmxlU3RyZWFtPFI+LCBlOiBhbnkpOiB2b2lkIHtcbiAgYXNzZXJ0KElzUmVhZGFibGVTdHJlYW0oc3RyZWFtKSk7XG4gIGFzc2VydChzdHJlYW0uX3N0YXRlID09PSAncmVhZGFibGUnKTtcblxuICBzdHJlYW0uX3N0YXRlID0gJ2Vycm9yZWQnO1xuICBzdHJlYW0uX3N0b3JlZEVycm9yID0gZTtcblxuICBjb25zdCByZWFkZXIgPSBzdHJlYW0uX3JlYWRlcjtcblxuICBpZiAocmVhZGVyID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBkZWZhdWx0UmVhZGVyQ2xvc2VkUHJvbWlzZVJlamVjdChyZWFkZXIsIGUpO1xuXG4gIGlmIChJc1JlYWRhYmxlU3RyZWFtRGVmYXVsdFJlYWRlcjxSPihyZWFkZXIpKSB7XG4gICAgUmVhZGFibGVTdHJlYW1EZWZhdWx0UmVhZGVyRXJyb3JSZWFkUmVxdWVzdHMocmVhZGVyLCBlKTtcbiAgfSBlbHNlIHtcbiAgICBhc3NlcnQoSXNSZWFkYWJsZVN0cmVhbUJZT0JSZWFkZXIocmVhZGVyKSk7XG4gICAgUmVhZGFibGVTdHJlYW1CWU9CUmVhZGVyRXJyb3JSZWFkSW50b1JlcXVlc3RzKHJlYWRlciwgZSk7XG4gIH1cbn1cblxuLy8gUmVhZGVyc1xuXG5leHBvcnQgdHlwZSBSZWFkYWJsZVN0cmVhbVJlYWRlcjxSPiA9IFJlYWRhYmxlU3RyZWFtRGVmYXVsdFJlYWRlcjxSPiB8IFJlYWRhYmxlU3RyZWFtQllPQlJlYWRlcjtcblxuZXhwb3J0IHtcbiAgUmVhZGFibGVTdHJlYW1EZWZhdWx0UmVhZGVyLFxuICBSZWFkYWJsZVN0cmVhbUJZT0JSZWFkZXJcbn07XG5cbi8vIENvbnRyb2xsZXJzXG5cbmV4cG9ydCB7XG4gIFJlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXIsXG4gIFJlYWRhYmxlU3RyZWFtQllPQlJlcXVlc3QsXG4gIFJlYWRhYmxlQnl0ZVN0cmVhbUNvbnRyb2xsZXJcbn07XG5cbi8vIEhlbHBlciBmdW5jdGlvbnMgZm9yIHRoZSBSZWFkYWJsZVN0cmVhbS5cblxuZnVuY3Rpb24gc3RyZWFtQnJhbmRDaGVja0V4Y2VwdGlvbihuYW1lOiBzdHJpbmcpOiBUeXBlRXJyb3Ige1xuICByZXR1cm4gbmV3IFR5cGVFcnJvcihgUmVhZGFibGVTdHJlYW0ucHJvdG90eXBlLiR7bmFtZX0gY2FuIG9ubHkgYmUgdXNlZCBvbiBhIFJlYWRhYmxlU3RyZWFtYCk7XG59XG4iLCAiaW1wb3J0IHR5cGUgeyBRdWV1aW5nU3RyYXRlZ3lJbml0IH0gZnJvbSAnLi4vcXVldWluZy1zdHJhdGVneSc7XG5pbXBvcnQgeyBhc3NlcnREaWN0aW9uYXJ5LCBhc3NlcnRSZXF1aXJlZEZpZWxkLCBjb252ZXJ0VW5yZXN0cmljdGVkRG91YmxlIH0gZnJvbSAnLi9iYXNpYyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBjb252ZXJ0UXVldWluZ1N0cmF0ZWd5SW5pdChpbml0OiBRdWV1aW5nU3RyYXRlZ3lJbml0IHwgbnVsbCB8IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0OiBzdHJpbmcpOiBRdWV1aW5nU3RyYXRlZ3lJbml0IHtcbiAgYXNzZXJ0RGljdGlvbmFyeShpbml0LCBjb250ZXh0KTtcbiAgY29uc3QgaGlnaFdhdGVyTWFyayA9IGluaXQ/LmhpZ2hXYXRlck1hcms7XG4gIGFzc2VydFJlcXVpcmVkRmllbGQoaGlnaFdhdGVyTWFyaywgJ2hpZ2hXYXRlck1hcmsnLCAnUXVldWluZ1N0cmF0ZWd5SW5pdCcpO1xuICByZXR1cm4ge1xuICAgIGhpZ2hXYXRlck1hcms6IGNvbnZlcnRVbnJlc3RyaWN0ZWREb3VibGUoaGlnaFdhdGVyTWFyaylcbiAgfTtcbn1cbiIsICJpbXBvcnQgdHlwZSB7IFF1ZXVpbmdTdHJhdGVneSwgUXVldWluZ1N0cmF0ZWd5SW5pdCB9IGZyb20gJy4vcXVldWluZy1zdHJhdGVneSc7XG5pbXBvcnQgeyBzZXRGdW5jdGlvbk5hbWUsIHR5cGVJc09iamVjdCB9IGZyb20gJy4vaGVscGVycy9taXNjZWxsYW5lb3VzJztcbmltcG9ydCB7IGFzc2VydFJlcXVpcmVkQXJndW1lbnQgfSBmcm9tICcuL3ZhbGlkYXRvcnMvYmFzaWMnO1xuaW1wb3J0IHsgY29udmVydFF1ZXVpbmdTdHJhdGVneUluaXQgfSBmcm9tICcuL3ZhbGlkYXRvcnMvcXVldWluZy1zdHJhdGVneS1pbml0JztcblxuLy8gVGhlIHNpemUgZnVuY3Rpb24gbXVzdCBub3QgaGF2ZSBhIHByb3RvdHlwZSBwcm9wZXJ0eSBub3IgYmUgYSBjb25zdHJ1Y3RvclxuY29uc3QgYnl0ZUxlbmd0aFNpemVGdW5jdGlvbiA9IChjaHVuazogQXJyYXlCdWZmZXJWaWV3KTogbnVtYmVyID0+IHtcbiAgcmV0dXJuIGNodW5rLmJ5dGVMZW5ndGg7XG59O1xuc2V0RnVuY3Rpb25OYW1lKGJ5dGVMZW5ndGhTaXplRnVuY3Rpb24sICdzaXplJyk7XG5cbi8qKlxuICogQSBxdWV1aW5nIHN0cmF0ZWd5IHRoYXQgY291bnRzIHRoZSBudW1iZXIgb2YgYnl0ZXMgaW4gZWFjaCBjaHVuay5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJ5dGVMZW5ndGhRdWV1aW5nU3RyYXRlZ3kgaW1wbGVtZW50cyBRdWV1aW5nU3RyYXRlZ3k8QXJyYXlCdWZmZXJWaWV3PiB7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgcmVhZG9ubHkgX2J5dGVMZW5ndGhRdWV1aW5nU3RyYXRlZ3lIaWdoV2F0ZXJNYXJrOiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3Iob3B0aW9uczogUXVldWluZ1N0cmF0ZWd5SW5pdCkge1xuICAgIGFzc2VydFJlcXVpcmVkQXJndW1lbnQob3B0aW9ucywgMSwgJ0J5dGVMZW5ndGhRdWV1aW5nU3RyYXRlZ3knKTtcbiAgICBvcHRpb25zID0gY29udmVydFF1ZXVpbmdTdHJhdGVneUluaXQob3B0aW9ucywgJ0ZpcnN0IHBhcmFtZXRlcicpO1xuICAgIHRoaXMuX2J5dGVMZW5ndGhRdWV1aW5nU3RyYXRlZ3lIaWdoV2F0ZXJNYXJrID0gb3B0aW9ucy5oaWdoV2F0ZXJNYXJrO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGhpZ2ggd2F0ZXIgbWFyayBwcm92aWRlZCB0byB0aGUgY29uc3RydWN0b3IuXG4gICAqL1xuICBnZXQgaGlnaFdhdGVyTWFyaygpOiBudW1iZXIge1xuICAgIGlmICghSXNCeXRlTGVuZ3RoUXVldWluZ1N0cmF0ZWd5KHRoaXMpKSB7XG4gICAgICB0aHJvdyBieXRlTGVuZ3RoQnJhbmRDaGVja0V4Y2VwdGlvbignaGlnaFdhdGVyTWFyaycpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fYnl0ZUxlbmd0aFF1ZXVpbmdTdHJhdGVneUhpZ2hXYXRlck1hcms7XG4gIH1cblxuICAvKipcbiAgICogTWVhc3VyZXMgdGhlIHNpemUgb2YgYGNodW5rYCBieSByZXR1cm5pbmcgdGhlIHZhbHVlIG9mIGl0cyBgYnl0ZUxlbmd0aGAgcHJvcGVydHkuXG4gICAqL1xuICBnZXQgc2l6ZSgpOiAoY2h1bms6IEFycmF5QnVmZmVyVmlldykgPT4gbnVtYmVyIHtcbiAgICBpZiAoIUlzQnl0ZUxlbmd0aFF1ZXVpbmdTdHJhdGVneSh0aGlzKSkge1xuICAgICAgdGhyb3cgYnl0ZUxlbmd0aEJyYW5kQ2hlY2tFeGNlcHRpb24oJ3NpemUnKTtcbiAgICB9XG4gICAgcmV0dXJuIGJ5dGVMZW5ndGhTaXplRnVuY3Rpb247XG4gIH1cbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoQnl0ZUxlbmd0aFF1ZXVpbmdTdHJhdGVneS5wcm90b3R5cGUsIHtcbiAgaGlnaFdhdGVyTWFyazogeyBlbnVtZXJhYmxlOiB0cnVlIH0sXG4gIHNpemU6IHsgZW51bWVyYWJsZTogdHJ1ZSB9XG59KTtcbmlmICh0eXBlb2YgU3ltYm9sLnRvU3RyaW5nVGFnID09PSAnc3ltYm9sJykge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQnl0ZUxlbmd0aFF1ZXVpbmdTdHJhdGVneS5wcm90b3R5cGUsIFN5bWJvbC50b1N0cmluZ1RhZywge1xuICAgIHZhbHVlOiAnQnl0ZUxlbmd0aFF1ZXVpbmdTdHJhdGVneScsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlXG4gIH0pO1xufVxuXG4vLyBIZWxwZXIgZnVuY3Rpb25zIGZvciB0aGUgQnl0ZUxlbmd0aFF1ZXVpbmdTdHJhdGVneS5cblxuZnVuY3Rpb24gYnl0ZUxlbmd0aEJyYW5kQ2hlY2tFeGNlcHRpb24obmFtZTogc3RyaW5nKTogVHlwZUVycm9yIHtcbiAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoYEJ5dGVMZW5ndGhRdWV1aW5nU3RyYXRlZ3kucHJvdG90eXBlLiR7bmFtZX0gY2FuIG9ubHkgYmUgdXNlZCBvbiBhIEJ5dGVMZW5ndGhRdWV1aW5nU3RyYXRlZ3lgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIElzQnl0ZUxlbmd0aFF1ZXVpbmdTdHJhdGVneSh4OiBhbnkpOiB4IGlzIEJ5dGVMZW5ndGhRdWV1aW5nU3RyYXRlZ3kge1xuICBpZiAoIXR5cGVJc09iamVjdCh4KSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHgsICdfYnl0ZUxlbmd0aFF1ZXVpbmdTdHJhdGVneUhpZ2hXYXRlck1hcmsnKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiB4IGluc3RhbmNlb2YgQnl0ZUxlbmd0aFF1ZXVpbmdTdHJhdGVneTtcbn1cbiIsICJpbXBvcnQgdHlwZSB7IFF1ZXVpbmdTdHJhdGVneSwgUXVldWluZ1N0cmF0ZWd5SW5pdCB9IGZyb20gJy4vcXVldWluZy1zdHJhdGVneSc7XG5pbXBvcnQgeyBzZXRGdW5jdGlvbk5hbWUsIHR5cGVJc09iamVjdCB9IGZyb20gJy4vaGVscGVycy9taXNjZWxsYW5lb3VzJztcbmltcG9ydCB7IGFzc2VydFJlcXVpcmVkQXJndW1lbnQgfSBmcm9tICcuL3ZhbGlkYXRvcnMvYmFzaWMnO1xuaW1wb3J0IHsgY29udmVydFF1ZXVpbmdTdHJhdGVneUluaXQgfSBmcm9tICcuL3ZhbGlkYXRvcnMvcXVldWluZy1zdHJhdGVneS1pbml0JztcblxuLy8gVGhlIHNpemUgZnVuY3Rpb24gbXVzdCBub3QgaGF2ZSBhIHByb3RvdHlwZSBwcm9wZXJ0eSBub3IgYmUgYSBjb25zdHJ1Y3RvclxuY29uc3QgY291bnRTaXplRnVuY3Rpb24gPSAoKTogMSA9PiB7XG4gIHJldHVybiAxO1xufTtcbnNldEZ1bmN0aW9uTmFtZShjb3VudFNpemVGdW5jdGlvbiwgJ3NpemUnKTtcblxuLyoqXG4gKiBBIHF1ZXVpbmcgc3RyYXRlZ3kgdGhhdCBjb3VudHMgdGhlIG51bWJlciBvZiBjaHVua3MuXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb3VudFF1ZXVpbmdTdHJhdGVneSBpbXBsZW1lbnRzIFF1ZXVpbmdTdHJhdGVneTxhbnk+IHtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICByZWFkb25seSBfY291bnRRdWV1aW5nU3RyYXRlZ3lIaWdoV2F0ZXJNYXJrITogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM6IFF1ZXVpbmdTdHJhdGVneUluaXQpIHtcbiAgICBhc3NlcnRSZXF1aXJlZEFyZ3VtZW50KG9wdGlvbnMsIDEsICdDb3VudFF1ZXVpbmdTdHJhdGVneScpO1xuICAgIG9wdGlvbnMgPSBjb252ZXJ0UXVldWluZ1N0cmF0ZWd5SW5pdChvcHRpb25zLCAnRmlyc3QgcGFyYW1ldGVyJyk7XG4gICAgdGhpcy5fY291bnRRdWV1aW5nU3RyYXRlZ3lIaWdoV2F0ZXJNYXJrID0gb3B0aW9ucy5oaWdoV2F0ZXJNYXJrO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGhpZ2ggd2F0ZXIgbWFyayBwcm92aWRlZCB0byB0aGUgY29uc3RydWN0b3IuXG4gICAqL1xuICBnZXQgaGlnaFdhdGVyTWFyaygpOiBudW1iZXIge1xuICAgIGlmICghSXNDb3VudFF1ZXVpbmdTdHJhdGVneSh0aGlzKSkge1xuICAgICAgdGhyb3cgY291bnRCcmFuZENoZWNrRXhjZXB0aW9uKCdoaWdoV2F0ZXJNYXJrJyk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9jb3VudFF1ZXVpbmdTdHJhdGVneUhpZ2hXYXRlck1hcms7XG4gIH1cblxuICAvKipcbiAgICogTWVhc3VyZXMgdGhlIHNpemUgb2YgYGNodW5rYCBieSBhbHdheXMgcmV0dXJuaW5nIDEuXG4gICAqIFRoaXMgZW5zdXJlcyB0aGF0IHRoZSB0b3RhbCBxdWV1ZSBzaXplIGlzIGEgY291bnQgb2YgdGhlIG51bWJlciBvZiBjaHVua3MgaW4gdGhlIHF1ZXVlLlxuICAgKi9cbiAgZ2V0IHNpemUoKTogKGNodW5rOiBhbnkpID0+IDEge1xuICAgIGlmICghSXNDb3VudFF1ZXVpbmdTdHJhdGVneSh0aGlzKSkge1xuICAgICAgdGhyb3cgY291bnRCcmFuZENoZWNrRXhjZXB0aW9uKCdzaXplJyk7XG4gICAgfVxuICAgIHJldHVybiBjb3VudFNpemVGdW5jdGlvbjtcbiAgfVxufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhDb3VudFF1ZXVpbmdTdHJhdGVneS5wcm90b3R5cGUsIHtcbiAgaGlnaFdhdGVyTWFyazogeyBlbnVtZXJhYmxlOiB0cnVlIH0sXG4gIHNpemU6IHsgZW51bWVyYWJsZTogdHJ1ZSB9XG59KTtcbmlmICh0eXBlb2YgU3ltYm9sLnRvU3RyaW5nVGFnID09PSAnc3ltYm9sJykge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ291bnRRdWV1aW5nU3RyYXRlZ3kucHJvdG90eXBlLCBTeW1ib2wudG9TdHJpbmdUYWcsIHtcbiAgICB2YWx1ZTogJ0NvdW50UXVldWluZ1N0cmF0ZWd5JyxcbiAgICBjb25maWd1cmFibGU6IHRydWVcbiAgfSk7XG59XG5cbi8vIEhlbHBlciBmdW5jdGlvbnMgZm9yIHRoZSBDb3VudFF1ZXVpbmdTdHJhdGVneS5cblxuZnVuY3Rpb24gY291bnRCcmFuZENoZWNrRXhjZXB0aW9uKG5hbWU6IHN0cmluZyk6IFR5cGVFcnJvciB7XG4gIHJldHVybiBuZXcgVHlwZUVycm9yKGBDb3VudFF1ZXVpbmdTdHJhdGVneS5wcm90b3R5cGUuJHtuYW1lfSBjYW4gb25seSBiZSB1c2VkIG9uIGEgQ291bnRRdWV1aW5nU3RyYXRlZ3lgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIElzQ291bnRRdWV1aW5nU3RyYXRlZ3koeDogYW55KTogeCBpcyBDb3VudFF1ZXVpbmdTdHJhdGVneSB7XG4gIGlmICghdHlwZUlzT2JqZWN0KHgpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoeCwgJ19jb3VudFF1ZXVpbmdTdHJhdGVneUhpZ2hXYXRlck1hcmsnKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiB4IGluc3RhbmNlb2YgQ291bnRRdWV1aW5nU3RyYXRlZ3k7XG59XG4iLCAiaW1wb3J0IHsgYXNzZXJ0RGljdGlvbmFyeSwgYXNzZXJ0RnVuY3Rpb24gfSBmcm9tICcuL2Jhc2ljJztcbmltcG9ydCB7IHByb21pc2VDYWxsLCByZWZsZWN0Q2FsbCB9IGZyb20gJy4uL2hlbHBlcnMvd2ViaWRsJztcbmltcG9ydCB0eXBlIHtcbiAgVHJhbnNmb3JtZXIsXG4gIFRyYW5zZm9ybWVyQ2FuY2VsQ2FsbGJhY2ssXG4gIFRyYW5zZm9ybWVyRmx1c2hDYWxsYmFjayxcbiAgVHJhbnNmb3JtZXJTdGFydENhbGxiYWNrLFxuICBUcmFuc2Zvcm1lclRyYW5zZm9ybUNhbGxiYWNrLFxuICBWYWxpZGF0ZWRUcmFuc2Zvcm1lclxufSBmcm9tICcuLi90cmFuc2Zvcm0tc3RyZWFtL3RyYW5zZm9ybWVyJztcbmltcG9ydCB7IFRyYW5zZm9ybVN0cmVhbURlZmF1bHRDb250cm9sbGVyIH0gZnJvbSAnLi4vdHJhbnNmb3JtLXN0cmVhbSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBjb252ZXJ0VHJhbnNmb3JtZXI8SSwgTz4ob3JpZ2luYWw6IFRyYW5zZm9ybWVyPEksIE8+IHwgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dDogc3RyaW5nKTogVmFsaWRhdGVkVHJhbnNmb3JtZXI8SSwgTz4ge1xuICBhc3NlcnREaWN0aW9uYXJ5KG9yaWdpbmFsLCBjb250ZXh0KTtcbiAgY29uc3QgY2FuY2VsID0gb3JpZ2luYWw/LmNhbmNlbDtcbiAgY29uc3QgZmx1c2ggPSBvcmlnaW5hbD8uZmx1c2g7XG4gIGNvbnN0IHJlYWRhYmxlVHlwZSA9IG9yaWdpbmFsPy5yZWFkYWJsZVR5cGU7XG4gIGNvbnN0IHN0YXJ0ID0gb3JpZ2luYWw/LnN0YXJ0O1xuICBjb25zdCB0cmFuc2Zvcm0gPSBvcmlnaW5hbD8udHJhbnNmb3JtO1xuICBjb25zdCB3cml0YWJsZVR5cGUgPSBvcmlnaW5hbD8ud3JpdGFibGVUeXBlO1xuICByZXR1cm4ge1xuICAgIGNhbmNlbDogY2FuY2VsID09PSB1bmRlZmluZWQgP1xuICAgICAgdW5kZWZpbmVkIDpcbiAgICAgIGNvbnZlcnRUcmFuc2Zvcm1lckNhbmNlbENhbGxiYWNrKGNhbmNlbCwgb3JpZ2luYWwhLCBgJHtjb250ZXh0fSBoYXMgbWVtYmVyICdjYW5jZWwnIHRoYXRgKSxcbiAgICBmbHVzaDogZmx1c2ggPT09IHVuZGVmaW5lZCA/XG4gICAgICB1bmRlZmluZWQgOlxuICAgICAgY29udmVydFRyYW5zZm9ybWVyRmx1c2hDYWxsYmFjayhmbHVzaCwgb3JpZ2luYWwhLCBgJHtjb250ZXh0fSBoYXMgbWVtYmVyICdmbHVzaCcgdGhhdGApLFxuICAgIHJlYWRhYmxlVHlwZSxcbiAgICBzdGFydDogc3RhcnQgPT09IHVuZGVmaW5lZCA/XG4gICAgICB1bmRlZmluZWQgOlxuICAgICAgY29udmVydFRyYW5zZm9ybWVyU3RhcnRDYWxsYmFjayhzdGFydCwgb3JpZ2luYWwhLCBgJHtjb250ZXh0fSBoYXMgbWVtYmVyICdzdGFydCcgdGhhdGApLFxuICAgIHRyYW5zZm9ybTogdHJhbnNmb3JtID09PSB1bmRlZmluZWQgP1xuICAgICAgdW5kZWZpbmVkIDpcbiAgICAgIGNvbnZlcnRUcmFuc2Zvcm1lclRyYW5zZm9ybUNhbGxiYWNrKHRyYW5zZm9ybSwgb3JpZ2luYWwhLCBgJHtjb250ZXh0fSBoYXMgbWVtYmVyICd0cmFuc2Zvcm0nIHRoYXRgKSxcbiAgICB3cml0YWJsZVR5cGVcbiAgfTtcbn1cblxuZnVuY3Rpb24gY29udmVydFRyYW5zZm9ybWVyRmx1c2hDYWxsYmFjazxJLCBPPihcbiAgZm46IFRyYW5zZm9ybWVyRmx1c2hDYWxsYmFjazxPPixcbiAgb3JpZ2luYWw6IFRyYW5zZm9ybWVyPEksIE8+LFxuICBjb250ZXh0OiBzdHJpbmdcbik6IChjb250cm9sbGVyOiBUcmFuc2Zvcm1TdHJlYW1EZWZhdWx0Q29udHJvbGxlcjxPPikgPT4gUHJvbWlzZTx2b2lkPiB7XG4gIGFzc2VydEZ1bmN0aW9uKGZuLCBjb250ZXh0KTtcbiAgcmV0dXJuIChjb250cm9sbGVyOiBUcmFuc2Zvcm1TdHJlYW1EZWZhdWx0Q29udHJvbGxlcjxPPikgPT4gcHJvbWlzZUNhbGwoZm4sIG9yaWdpbmFsLCBbY29udHJvbGxlcl0pO1xufVxuXG5mdW5jdGlvbiBjb252ZXJ0VHJhbnNmb3JtZXJTdGFydENhbGxiYWNrPEksIE8+KFxuICBmbjogVHJhbnNmb3JtZXJTdGFydENhbGxiYWNrPE8+LFxuICBvcmlnaW5hbDogVHJhbnNmb3JtZXI8SSwgTz4sXG4gIGNvbnRleHQ6IHN0cmluZ1xuKTogVHJhbnNmb3JtZXJTdGFydENhbGxiYWNrPE8+IHtcbiAgYXNzZXJ0RnVuY3Rpb24oZm4sIGNvbnRleHQpO1xuICByZXR1cm4gKGNvbnRyb2xsZXI6IFRyYW5zZm9ybVN0cmVhbURlZmF1bHRDb250cm9sbGVyPE8+KSA9PiByZWZsZWN0Q2FsbChmbiwgb3JpZ2luYWwsIFtjb250cm9sbGVyXSk7XG59XG5cbmZ1bmN0aW9uIGNvbnZlcnRUcmFuc2Zvcm1lclRyYW5zZm9ybUNhbGxiYWNrPEksIE8+KFxuICBmbjogVHJhbnNmb3JtZXJUcmFuc2Zvcm1DYWxsYmFjazxJLCBPPixcbiAgb3JpZ2luYWw6IFRyYW5zZm9ybWVyPEksIE8+LFxuICBjb250ZXh0OiBzdHJpbmdcbik6IChjaHVuazogSSwgY29udHJvbGxlcjogVHJhbnNmb3JtU3RyZWFtRGVmYXVsdENvbnRyb2xsZXI8Tz4pID0+IFByb21pc2U8dm9pZD4ge1xuICBhc3NlcnRGdW5jdGlvbihmbiwgY29udGV4dCk7XG4gIHJldHVybiAoY2h1bms6IEksIGNvbnRyb2xsZXI6IFRyYW5zZm9ybVN0cmVhbURlZmF1bHRDb250cm9sbGVyPE8+KSA9PiBwcm9taXNlQ2FsbChmbiwgb3JpZ2luYWwsIFtjaHVuaywgY29udHJvbGxlcl0pO1xufVxuXG5mdW5jdGlvbiBjb252ZXJ0VHJhbnNmb3JtZXJDYW5jZWxDYWxsYmFjazxJLCBPPihcbiAgZm46IFRyYW5zZm9ybWVyQ2FuY2VsQ2FsbGJhY2ssXG4gIG9yaWdpbmFsOiBUcmFuc2Zvcm1lcjxJLCBPPixcbiAgY29udGV4dDogc3RyaW5nXG4pOiAocmVhc29uOiBhbnkpID0+IFByb21pc2U8dm9pZD4ge1xuICBhc3NlcnRGdW5jdGlvbihmbiwgY29udGV4dCk7XG4gIHJldHVybiAocmVhc29uOiBhbnkpID0+IHByb21pc2VDYWxsKGZuLCBvcmlnaW5hbCwgW3JlYXNvbl0pO1xufVxuIiwgImltcG9ydCBhc3NlcnQgZnJvbSAnLi4vc3R1Yi9hc3NlcnQnO1xuaW1wb3J0IHtcbiAgbmV3UHJvbWlzZSxcbiAgcHJvbWlzZVJlamVjdGVkV2l0aCxcbiAgcHJvbWlzZVJlc29sdmVkV2l0aCxcbiAgc2V0UHJvbWlzZUlzSGFuZGxlZFRvVHJ1ZSxcbiAgdHJhbnNmb3JtUHJvbWlzZVdpdGgsXG4gIHVwb25Qcm9taXNlXG59IGZyb20gJy4vaGVscGVycy93ZWJpZGwnO1xuaW1wb3J0IHsgQ3JlYXRlUmVhZGFibGVTdHJlYW0sIHR5cGUgRGVmYXVsdFJlYWRhYmxlU3RyZWFtLCBSZWFkYWJsZVN0cmVhbSB9IGZyb20gJy4vcmVhZGFibGUtc3RyZWFtJztcbmltcG9ydCB7XG4gIFJlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXJDYW5DbG9zZU9yRW5xdWV1ZSxcbiAgUmVhZGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlckNsb3NlLFxuICBSZWFkYWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyRW5xdWV1ZSxcbiAgUmVhZGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlckVycm9yLFxuICBSZWFkYWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyR2V0RGVzaXJlZFNpemUsXG4gIFJlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXJIYXNCYWNrcHJlc3N1cmVcbn0gZnJvbSAnLi9yZWFkYWJsZS1zdHJlYW0vZGVmYXVsdC1jb250cm9sbGVyJztcbmltcG9ydCB0eXBlIHsgUXVldWluZ1N0cmF0ZWd5LCBRdWV1aW5nU3RyYXRlZ3lTaXplQ2FsbGJhY2sgfSBmcm9tICcuL3F1ZXVpbmctc3RyYXRlZ3knO1xuaW1wb3J0IHsgQ3JlYXRlV3JpdGFibGVTdHJlYW0sIFdyaXRhYmxlU3RyZWFtLCBXcml0YWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyRXJyb3JJZk5lZWRlZCB9IGZyb20gJy4vd3JpdGFibGUtc3RyZWFtJztcbmltcG9ydCB7IHNldEZ1bmN0aW9uTmFtZSwgdHlwZUlzT2JqZWN0IH0gZnJvbSAnLi9oZWxwZXJzL21pc2NlbGxhbmVvdXMnO1xuaW1wb3J0IHsgSXNOb25OZWdhdGl2ZU51bWJlciB9IGZyb20gJy4vYWJzdHJhY3Qtb3BzL21pc2NlbGxhbmVvdXMnO1xuaW1wb3J0IHsgY29udmVydFF1ZXVpbmdTdHJhdGVneSB9IGZyb20gJy4vdmFsaWRhdG9ycy9xdWV1aW5nLXN0cmF0ZWd5JztcbmltcG9ydCB7IEV4dHJhY3RIaWdoV2F0ZXJNYXJrLCBFeHRyYWN0U2l6ZUFsZ29yaXRobSB9IGZyb20gJy4vYWJzdHJhY3Qtb3BzL3F1ZXVpbmctc3RyYXRlZ3knO1xuaW1wb3J0IHR5cGUge1xuICBUcmFuc2Zvcm1lcixcbiAgVHJhbnNmb3JtZXJDYW5jZWxDYWxsYmFjayxcbiAgVHJhbnNmb3JtZXJGbHVzaENhbGxiYWNrLFxuICBUcmFuc2Zvcm1lclN0YXJ0Q2FsbGJhY2ssXG4gIFRyYW5zZm9ybWVyVHJhbnNmb3JtQ2FsbGJhY2ssXG4gIFZhbGlkYXRlZFRyYW5zZm9ybWVyXG59IGZyb20gJy4vdHJhbnNmb3JtLXN0cmVhbS90cmFuc2Zvcm1lcic7XG5pbXBvcnQgeyBjb252ZXJ0VHJhbnNmb3JtZXIgfSBmcm9tICcuL3ZhbGlkYXRvcnMvdHJhbnNmb3JtZXInO1xuXG4vLyBDbGFzcyBUcmFuc2Zvcm1TdHJlYW1cblxuLyoqXG4gKiBBIHRyYW5zZm9ybSBzdHJlYW0gY29uc2lzdHMgb2YgYSBwYWlyIG9mIHN0cmVhbXM6IGEge0BsaW5rIFdyaXRhYmxlU3RyZWFtIHwgd3JpdGFibGUgc3RyZWFtfSxcbiAqIGtub3duIGFzIGl0cyB3cml0YWJsZSBzaWRlLCBhbmQgYSB7QGxpbmsgUmVhZGFibGVTdHJlYW0gfCByZWFkYWJsZSBzdHJlYW19LCBrbm93biBhcyBpdHMgcmVhZGFibGUgc2lkZS5cbiAqIEluIGEgbWFubmVyIHNwZWNpZmljIHRvIHRoZSB0cmFuc2Zvcm0gc3RyZWFtIGluIHF1ZXN0aW9uLCB3cml0ZXMgdG8gdGhlIHdyaXRhYmxlIHNpZGUgcmVzdWx0IGluIG5ldyBkYXRhIGJlaW5nXG4gKiBtYWRlIGF2YWlsYWJsZSBmb3IgcmVhZGluZyBmcm9tIHRoZSByZWFkYWJsZSBzaWRlLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIFRyYW5zZm9ybVN0cmVhbTxJID0gYW55LCBPID0gYW55PiB7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX3dyaXRhYmxlITogV3JpdGFibGVTdHJlYW08ST47XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX3JlYWRhYmxlITogRGVmYXVsdFJlYWRhYmxlU3RyZWFtPE8+O1xuICAvKiogQGludGVybmFsICovXG4gIF9iYWNrcHJlc3N1cmUhOiBib29sZWFuO1xuICAvKiogQGludGVybmFsICovXG4gIF9iYWNrcHJlc3N1cmVDaGFuZ2VQcm9taXNlITogUHJvbWlzZTx2b2lkPjtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfYmFja3ByZXNzdXJlQ2hhbmdlUHJvbWlzZV9yZXNvbHZlITogKCkgPT4gdm9pZDtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfdHJhbnNmb3JtU3RyZWFtQ29udHJvbGxlciE6IFRyYW5zZm9ybVN0cmVhbURlZmF1bHRDb250cm9sbGVyPE8+O1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHRyYW5zZm9ybWVyPzogVHJhbnNmb3JtZXI8SSwgTz4sXG4gICAgd3JpdGFibGVTdHJhdGVneT86IFF1ZXVpbmdTdHJhdGVneTxJPixcbiAgICByZWFkYWJsZVN0cmF0ZWd5PzogUXVldWluZ1N0cmF0ZWd5PE8+XG4gICk7XG4gIGNvbnN0cnVjdG9yKHJhd1RyYW5zZm9ybWVyOiBUcmFuc2Zvcm1lcjxJLCBPPiB8IG51bGwgfCB1bmRlZmluZWQgPSB7fSxcbiAgICAgICAgICAgICAgcmF3V3JpdGFibGVTdHJhdGVneTogUXVldWluZ1N0cmF0ZWd5PEk+IHwgbnVsbCB8IHVuZGVmaW5lZCA9IHt9LFxuICAgICAgICAgICAgICByYXdSZWFkYWJsZVN0cmF0ZWd5OiBRdWV1aW5nU3RyYXRlZ3k8Tz4gfCBudWxsIHwgdW5kZWZpbmVkID0ge30pIHtcbiAgICBpZiAocmF3VHJhbnNmb3JtZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmF3VHJhbnNmb3JtZXIgPSBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IHdyaXRhYmxlU3RyYXRlZ3kgPSBjb252ZXJ0UXVldWluZ1N0cmF0ZWd5KHJhd1dyaXRhYmxlU3RyYXRlZ3ksICdTZWNvbmQgcGFyYW1ldGVyJyk7XG4gICAgY29uc3QgcmVhZGFibGVTdHJhdGVneSA9IGNvbnZlcnRRdWV1aW5nU3RyYXRlZ3kocmF3UmVhZGFibGVTdHJhdGVneSwgJ1RoaXJkIHBhcmFtZXRlcicpO1xuXG4gICAgY29uc3QgdHJhbnNmb3JtZXIgPSBjb252ZXJ0VHJhbnNmb3JtZXIocmF3VHJhbnNmb3JtZXIsICdGaXJzdCBwYXJhbWV0ZXInKTtcbiAgICBpZiAodHJhbnNmb3JtZXIucmVhZGFibGVUeXBlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbnZhbGlkIHJlYWRhYmxlVHlwZSBzcGVjaWZpZWQnKTtcbiAgICB9XG4gICAgaWYgKHRyYW5zZm9ybWVyLndyaXRhYmxlVHlwZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW52YWxpZCB3cml0YWJsZVR5cGUgc3BlY2lmaWVkJyk7XG4gICAgfVxuXG4gICAgY29uc3QgcmVhZGFibGVIaWdoV2F0ZXJNYXJrID0gRXh0cmFjdEhpZ2hXYXRlck1hcmsocmVhZGFibGVTdHJhdGVneSwgMCk7XG4gICAgY29uc3QgcmVhZGFibGVTaXplQWxnb3JpdGhtID0gRXh0cmFjdFNpemVBbGdvcml0aG0ocmVhZGFibGVTdHJhdGVneSk7XG4gICAgY29uc3Qgd3JpdGFibGVIaWdoV2F0ZXJNYXJrID0gRXh0cmFjdEhpZ2hXYXRlck1hcmsod3JpdGFibGVTdHJhdGVneSwgMSk7XG4gICAgY29uc3Qgd3JpdGFibGVTaXplQWxnb3JpdGhtID0gRXh0cmFjdFNpemVBbGdvcml0aG0od3JpdGFibGVTdHJhdGVneSk7XG5cbiAgICBsZXQgc3RhcnRQcm9taXNlX3Jlc29sdmUhOiAodmFsdWU6IHZvaWQgfCBQcm9taXNlTGlrZTx2b2lkPikgPT4gdm9pZDtcbiAgICBjb25zdCBzdGFydFByb21pc2UgPSBuZXdQcm9taXNlPHZvaWQ+KHJlc29sdmUgPT4ge1xuICAgICAgc3RhcnRQcm9taXNlX3Jlc29sdmUgPSByZXNvbHZlO1xuICAgIH0pO1xuXG4gICAgSW5pdGlhbGl6ZVRyYW5zZm9ybVN0cmVhbShcbiAgICAgIHRoaXMsIHN0YXJ0UHJvbWlzZSwgd3JpdGFibGVIaWdoV2F0ZXJNYXJrLCB3cml0YWJsZVNpemVBbGdvcml0aG0sIHJlYWRhYmxlSGlnaFdhdGVyTWFyaywgcmVhZGFibGVTaXplQWxnb3JpdGhtXG4gICAgKTtcbiAgICBTZXRVcFRyYW5zZm9ybVN0cmVhbURlZmF1bHRDb250cm9sbGVyRnJvbVRyYW5zZm9ybWVyKHRoaXMsIHRyYW5zZm9ybWVyKTtcblxuICAgIGlmICh0cmFuc2Zvcm1lci5zdGFydCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBzdGFydFByb21pc2VfcmVzb2x2ZSh0cmFuc2Zvcm1lci5zdGFydCh0aGlzLl90cmFuc2Zvcm1TdHJlYW1Db250cm9sbGVyKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0YXJ0UHJvbWlzZV9yZXNvbHZlKHVuZGVmaW5lZCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRoZSByZWFkYWJsZSBzaWRlIG9mIHRoZSB0cmFuc2Zvcm0gc3RyZWFtLlxuICAgKi9cbiAgZ2V0IHJlYWRhYmxlKCk6IFJlYWRhYmxlU3RyZWFtPE8+IHtcbiAgICBpZiAoIUlzVHJhbnNmb3JtU3RyZWFtKHRoaXMpKSB7XG4gICAgICB0aHJvdyBzdHJlYW1CcmFuZENoZWNrRXhjZXB0aW9uKCdyZWFkYWJsZScpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9yZWFkYWJsZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgd3JpdGFibGUgc2lkZSBvZiB0aGUgdHJhbnNmb3JtIHN0cmVhbS5cbiAgICovXG4gIGdldCB3cml0YWJsZSgpOiBXcml0YWJsZVN0cmVhbTxJPiB7XG4gICAgaWYgKCFJc1RyYW5zZm9ybVN0cmVhbSh0aGlzKSkge1xuICAgICAgdGhyb3cgc3RyZWFtQnJhbmRDaGVja0V4Y2VwdGlvbignd3JpdGFibGUnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fd3JpdGFibGU7XG4gIH1cbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoVHJhbnNmb3JtU3RyZWFtLnByb3RvdHlwZSwge1xuICByZWFkYWJsZTogeyBlbnVtZXJhYmxlOiB0cnVlIH0sXG4gIHdyaXRhYmxlOiB7IGVudW1lcmFibGU6IHRydWUgfVxufSk7XG5pZiAodHlwZW9mIFN5bWJvbC50b1N0cmluZ1RhZyA9PT0gJ3N5bWJvbCcpIHtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRyYW5zZm9ybVN0cmVhbS5wcm90b3R5cGUsIFN5bWJvbC50b1N0cmluZ1RhZywge1xuICAgIHZhbHVlOiAnVHJhbnNmb3JtU3RyZWFtJyxcbiAgICBjb25maWd1cmFibGU6IHRydWVcbiAgfSk7XG59XG5cbmV4cG9ydCB0eXBlIHtcbiAgVHJhbnNmb3JtZXIsXG4gIFRyYW5zZm9ybWVyQ2FuY2VsQ2FsbGJhY2ssXG4gIFRyYW5zZm9ybWVyU3RhcnRDYWxsYmFjayxcbiAgVHJhbnNmb3JtZXJGbHVzaENhbGxiYWNrLFxuICBUcmFuc2Zvcm1lclRyYW5zZm9ybUNhbGxiYWNrXG59O1xuXG4vLyBUcmFuc2Zvcm0gU3RyZWFtIEFic3RyYWN0IE9wZXJhdGlvbnNcblxuZXhwb3J0IGZ1bmN0aW9uIENyZWF0ZVRyYW5zZm9ybVN0cmVhbTxJLCBPPihzdGFydEFsZ29yaXRobTogKCkgPT4gdm9pZCB8IFByb21pc2VMaWtlPHZvaWQ+LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1BbGdvcml0aG06IChjaHVuazogSSkgPT4gUHJvbWlzZTx2b2lkPixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmx1c2hBbGdvcml0aG06ICgpID0+IFByb21pc2U8dm9pZD4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbEFsZ29yaXRobTogKHJlYXNvbjogYW55KSA9PiBQcm9taXNlPHZvaWQ+LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cml0YWJsZUhpZ2hXYXRlck1hcmsgPSAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cml0YWJsZVNpemVBbGdvcml0aG06IFF1ZXVpbmdTdHJhdGVneVNpemVDYWxsYmFjazxJPiA9ICgpID0+IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRhYmxlSGlnaFdhdGVyTWFyayA9IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRhYmxlU2l6ZUFsZ29yaXRobTogUXVldWluZ1N0cmF0ZWd5U2l6ZUNhbGxiYWNrPE8+ID0gKCkgPT4gMSkge1xuICBhc3NlcnQoSXNOb25OZWdhdGl2ZU51bWJlcih3cml0YWJsZUhpZ2hXYXRlck1hcmspKTtcbiAgYXNzZXJ0KElzTm9uTmVnYXRpdmVOdW1iZXIocmVhZGFibGVIaWdoV2F0ZXJNYXJrKSk7XG5cbiAgY29uc3Qgc3RyZWFtOiBUcmFuc2Zvcm1TdHJlYW08SSwgTz4gPSBPYmplY3QuY3JlYXRlKFRyYW5zZm9ybVN0cmVhbS5wcm90b3R5cGUpO1xuXG4gIGxldCBzdGFydFByb21pc2VfcmVzb2x2ZSE6ICh2YWx1ZTogdm9pZCB8IFByb21pc2VMaWtlPHZvaWQ+KSA9PiB2b2lkO1xuICBjb25zdCBzdGFydFByb21pc2UgPSBuZXdQcm9taXNlPHZvaWQ+KHJlc29sdmUgPT4ge1xuICAgIHN0YXJ0UHJvbWlzZV9yZXNvbHZlID0gcmVzb2x2ZTtcbiAgfSk7XG5cbiAgSW5pdGlhbGl6ZVRyYW5zZm9ybVN0cmVhbShzdHJlYW0sIHN0YXJ0UHJvbWlzZSwgd3JpdGFibGVIaWdoV2F0ZXJNYXJrLCB3cml0YWJsZVNpemVBbGdvcml0aG0sIHJlYWRhYmxlSGlnaFdhdGVyTWFyayxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkYWJsZVNpemVBbGdvcml0aG0pO1xuXG4gIGNvbnN0IGNvbnRyb2xsZXI6IFRyYW5zZm9ybVN0cmVhbURlZmF1bHRDb250cm9sbGVyPE8+ID0gT2JqZWN0LmNyZWF0ZShUcmFuc2Zvcm1TdHJlYW1EZWZhdWx0Q29udHJvbGxlci5wcm90b3R5cGUpO1xuXG4gIFNldFVwVHJhbnNmb3JtU3RyZWFtRGVmYXVsdENvbnRyb2xsZXIoc3RyZWFtLCBjb250cm9sbGVyLCB0cmFuc2Zvcm1BbGdvcml0aG0sIGZsdXNoQWxnb3JpdGhtLCBjYW5jZWxBbGdvcml0aG0pO1xuXG4gIGNvbnN0IHN0YXJ0UmVzdWx0ID0gc3RhcnRBbGdvcml0aG0oKTtcbiAgc3RhcnRQcm9taXNlX3Jlc29sdmUoc3RhcnRSZXN1bHQpO1xuICByZXR1cm4gc3RyZWFtO1xufVxuXG5mdW5jdGlvbiBJbml0aWFsaXplVHJhbnNmb3JtU3RyZWFtPEksIE8+KHN0cmVhbTogVHJhbnNmb3JtU3RyZWFtPEksIE8+LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydFByb21pc2U6IFByb21pc2U8dm9pZD4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRhYmxlSGlnaFdhdGVyTWFyazogbnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cml0YWJsZVNpemVBbGdvcml0aG06IFF1ZXVpbmdTdHJhdGVneVNpemVDYWxsYmFjazxJPixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGFibGVIaWdoV2F0ZXJNYXJrOiBudW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRhYmxlU2l6ZUFsZ29yaXRobTogUXVldWluZ1N0cmF0ZWd5U2l6ZUNhbGxiYWNrPE8+KSB7XG4gIGZ1bmN0aW9uIHN0YXJ0QWxnb3JpdGhtKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiBzdGFydFByb21pc2U7XG4gIH1cblxuICBmdW5jdGlvbiB3cml0ZUFsZ29yaXRobShjaHVuazogSSk6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiBUcmFuc2Zvcm1TdHJlYW1EZWZhdWx0U2lua1dyaXRlQWxnb3JpdGhtKHN0cmVhbSwgY2h1bmspO1xuICB9XG5cbiAgZnVuY3Rpb24gYWJvcnRBbGdvcml0aG0ocmVhc29uOiBhbnkpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gVHJhbnNmb3JtU3RyZWFtRGVmYXVsdFNpbmtBYm9ydEFsZ29yaXRobShzdHJlYW0sIHJlYXNvbik7XG4gIH1cblxuICBmdW5jdGlvbiBjbG9zZUFsZ29yaXRobSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gVHJhbnNmb3JtU3RyZWFtRGVmYXVsdFNpbmtDbG9zZUFsZ29yaXRobShzdHJlYW0pO1xuICB9XG5cbiAgc3RyZWFtLl93cml0YWJsZSA9IENyZWF0ZVdyaXRhYmxlU3RyZWFtKHN0YXJ0QWxnb3JpdGhtLCB3cml0ZUFsZ29yaXRobSwgY2xvc2VBbGdvcml0aG0sIGFib3J0QWxnb3JpdGhtLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGFibGVIaWdoV2F0ZXJNYXJrLCB3cml0YWJsZVNpemVBbGdvcml0aG0pO1xuXG4gIGZ1bmN0aW9uIHB1bGxBbGdvcml0aG0oKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIFRyYW5zZm9ybVN0cmVhbURlZmF1bHRTb3VyY2VQdWxsQWxnb3JpdGhtKHN0cmVhbSk7XG4gIH1cblxuICBmdW5jdGlvbiBjYW5jZWxBbGdvcml0aG0ocmVhc29uOiBhbnkpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gVHJhbnNmb3JtU3RyZWFtRGVmYXVsdFNvdXJjZUNhbmNlbEFsZ29yaXRobShzdHJlYW0sIHJlYXNvbik7XG4gIH1cblxuICBzdHJlYW0uX3JlYWRhYmxlID0gQ3JlYXRlUmVhZGFibGVTdHJlYW0oc3RhcnRBbGdvcml0aG0sIHB1bGxBbGdvcml0aG0sIGNhbmNlbEFsZ29yaXRobSwgcmVhZGFibGVIaWdoV2F0ZXJNYXJrLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGFibGVTaXplQWxnb3JpdGhtKTtcblxuICAvLyBUaGUgW1tiYWNrcHJlc3N1cmVdXSBzbG90IGlzIHNldCB0byB1bmRlZmluZWQgc28gdGhhdCBpdCBjYW4gYmUgaW5pdGlhbGlzZWQgYnkgVHJhbnNmb3JtU3RyZWFtU2V0QmFja3ByZXNzdXJlLlxuICBzdHJlYW0uX2JhY2twcmVzc3VyZSA9IHVuZGVmaW5lZCE7XG4gIHN0cmVhbS5fYmFja3ByZXNzdXJlQ2hhbmdlUHJvbWlzZSA9IHVuZGVmaW5lZCE7XG4gIHN0cmVhbS5fYmFja3ByZXNzdXJlQ2hhbmdlUHJvbWlzZV9yZXNvbHZlID0gdW5kZWZpbmVkITtcbiAgVHJhbnNmb3JtU3RyZWFtU2V0QmFja3ByZXNzdXJlKHN0cmVhbSwgdHJ1ZSk7XG5cbiAgc3RyZWFtLl90cmFuc2Zvcm1TdHJlYW1Db250cm9sbGVyID0gdW5kZWZpbmVkITtcbn1cblxuZnVuY3Rpb24gSXNUcmFuc2Zvcm1TdHJlYW0oeDogdW5rbm93bik6IHggaXMgVHJhbnNmb3JtU3RyZWFtIHtcbiAgaWYgKCF0eXBlSXNPYmplY3QoeCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh4LCAnX3RyYW5zZm9ybVN0cmVhbUNvbnRyb2xsZXInKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiB4IGluc3RhbmNlb2YgVHJhbnNmb3JtU3RyZWFtO1xufVxuXG4vLyBUaGlzIGlzIGEgbm8tb3AgaWYgYm90aCBzaWRlcyBhcmUgYWxyZWFkeSBlcnJvcmVkLlxuZnVuY3Rpb24gVHJhbnNmb3JtU3RyZWFtRXJyb3Ioc3RyZWFtOiBUcmFuc2Zvcm1TdHJlYW0sIGU6IGFueSkge1xuICBSZWFkYWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyRXJyb3Ioc3RyZWFtLl9yZWFkYWJsZS5fcmVhZGFibGVTdHJlYW1Db250cm9sbGVyLCBlKTtcbiAgVHJhbnNmb3JtU3RyZWFtRXJyb3JXcml0YWJsZUFuZFVuYmxvY2tXcml0ZShzdHJlYW0sIGUpO1xufVxuXG5mdW5jdGlvbiBUcmFuc2Zvcm1TdHJlYW1FcnJvcldyaXRhYmxlQW5kVW5ibG9ja1dyaXRlKHN0cmVhbTogVHJhbnNmb3JtU3RyZWFtLCBlOiBhbnkpIHtcbiAgVHJhbnNmb3JtU3RyZWFtRGVmYXVsdENvbnRyb2xsZXJDbGVhckFsZ29yaXRobXMoc3RyZWFtLl90cmFuc2Zvcm1TdHJlYW1Db250cm9sbGVyKTtcbiAgV3JpdGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlckVycm9ySWZOZWVkZWQoc3RyZWFtLl93cml0YWJsZS5fd3JpdGFibGVTdHJlYW1Db250cm9sbGVyLCBlKTtcbiAgVHJhbnNmb3JtU3RyZWFtVW5ibG9ja1dyaXRlKHN0cmVhbSk7XG59XG5cbmZ1bmN0aW9uIFRyYW5zZm9ybVN0cmVhbVVuYmxvY2tXcml0ZShzdHJlYW06IFRyYW5zZm9ybVN0cmVhbSkge1xuICBpZiAoc3RyZWFtLl9iYWNrcHJlc3N1cmUpIHtcbiAgICAvLyBQcmV0ZW5kIHRoYXQgcHVsbCgpIHdhcyBjYWxsZWQgdG8gcGVybWl0IGFueSBwZW5kaW5nIHdyaXRlKCkgY2FsbHMgdG8gY29tcGxldGUuIFRyYW5zZm9ybVN0cmVhbVNldEJhY2twcmVzc3VyZSgpXG4gICAgLy8gY2Fubm90IGJlIGNhbGxlZCBmcm9tIGVucXVldWUoKSBvciBwdWxsKCkgb25jZSB0aGUgUmVhZGFibGVTdHJlYW0gaXMgZXJyb3JlZCwgc28gdGhpcyB3aWxsIHdpbGwgYmUgdGhlIGZpbmFsIHRpbWVcbiAgICAvLyBfYmFja3ByZXNzdXJlIGlzIHNldC5cbiAgICBUcmFuc2Zvcm1TdHJlYW1TZXRCYWNrcHJlc3N1cmUoc3RyZWFtLCBmYWxzZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gVHJhbnNmb3JtU3RyZWFtU2V0QmFja3ByZXNzdXJlKHN0cmVhbTogVHJhbnNmb3JtU3RyZWFtLCBiYWNrcHJlc3N1cmU6IGJvb2xlYW4pIHtcbiAgLy8gUGFzc2VzIGFsc28gd2hlbiBjYWxsZWQgZHVyaW5nIGNvbnN0cnVjdGlvbi5cbiAgYXNzZXJ0KHN0cmVhbS5fYmFja3ByZXNzdXJlICE9PSBiYWNrcHJlc3N1cmUpO1xuXG4gIGlmIChzdHJlYW0uX2JhY2twcmVzc3VyZUNoYW5nZVByb21pc2UgIT09IHVuZGVmaW5lZCkge1xuICAgIHN0cmVhbS5fYmFja3ByZXNzdXJlQ2hhbmdlUHJvbWlzZV9yZXNvbHZlKCk7XG4gIH1cblxuICBzdHJlYW0uX2JhY2twcmVzc3VyZUNoYW5nZVByb21pc2UgPSBuZXdQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgIHN0cmVhbS5fYmFja3ByZXNzdXJlQ2hhbmdlUHJvbWlzZV9yZXNvbHZlID0gcmVzb2x2ZTtcbiAgfSk7XG5cbiAgc3RyZWFtLl9iYWNrcHJlc3N1cmUgPSBiYWNrcHJlc3N1cmU7XG59XG5cbi8vIENsYXNzIFRyYW5zZm9ybVN0cmVhbURlZmF1bHRDb250cm9sbGVyXG5cbi8qKlxuICogQWxsb3dzIGNvbnRyb2wgb2YgdGhlIHtAbGluayBSZWFkYWJsZVN0cmVhbX0gYW5kIHtAbGluayBXcml0YWJsZVN0cmVhbX0gb2YgdGhlIGFzc29jaWF0ZWQge0BsaW5rIFRyYW5zZm9ybVN0cmVhbX0uXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgVHJhbnNmb3JtU3RyZWFtRGVmYXVsdENvbnRyb2xsZXI8Tz4ge1xuICAvKiogQGludGVybmFsICovXG4gIF9jb250cm9sbGVkVHJhbnNmb3JtU3RyZWFtOiBUcmFuc2Zvcm1TdHJlYW08YW55LCBPPjtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfZmluaXNoUHJvbWlzZTogUHJvbWlzZTx1bmRlZmluZWQ+IHwgdW5kZWZpbmVkO1xuICAvKiogQGludGVybmFsICovXG4gIF9maW5pc2hQcm9taXNlX3Jlc29sdmU/OiAodmFsdWU/OiB1bmRlZmluZWQpID0+IHZvaWQ7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgX2ZpbmlzaFByb21pc2VfcmVqZWN0PzogKHJlYXNvbjogYW55KSA9PiB2b2lkO1xuICAvKiogQGludGVybmFsICovXG4gIF90cmFuc2Zvcm1BbGdvcml0aG06IChjaHVuazogYW55KSA9PiBQcm9taXNlPHZvaWQ+O1xuICAvKiogQGludGVybmFsICovXG4gIF9mbHVzaEFsZ29yaXRobTogKCkgPT4gUHJvbWlzZTx2b2lkPjtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfY2FuY2VsQWxnb3JpdGhtOiAocmVhc29uOiBhbnkpID0+IFByb21pc2U8dm9pZD47XG5cbiAgcHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbGxlZ2FsIGNvbnN0cnVjdG9yJyk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgZGVzaXJlZCBzaXplIHRvIGZpbGwgdGhlIHJlYWRhYmxlIHNpZGXigJlzIGludGVybmFsIHF1ZXVlLiBJdCBjYW4gYmUgbmVnYXRpdmUsIGlmIHRoZSBxdWV1ZSBpcyBvdmVyLWZ1bGwuXG4gICAqL1xuICBnZXQgZGVzaXJlZFNpemUoKTogbnVtYmVyIHwgbnVsbCB7XG4gICAgaWYgKCFJc1RyYW5zZm9ybVN0cmVhbURlZmF1bHRDb250cm9sbGVyKHRoaXMpKSB7XG4gICAgICB0aHJvdyBkZWZhdWx0Q29udHJvbGxlckJyYW5kQ2hlY2tFeGNlcHRpb24oJ2Rlc2lyZWRTaXplJyk7XG4gICAgfVxuXG4gICAgY29uc3QgcmVhZGFibGVDb250cm9sbGVyID0gdGhpcy5fY29udHJvbGxlZFRyYW5zZm9ybVN0cmVhbS5fcmVhZGFibGUuX3JlYWRhYmxlU3RyZWFtQ29udHJvbGxlcjtcbiAgICByZXR1cm4gUmVhZGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlckdldERlc2lyZWRTaXplKHJlYWRhYmxlQ29udHJvbGxlcik7XG4gIH1cblxuICAvKipcbiAgICogRW5xdWV1ZXMgdGhlIGdpdmVuIGNodW5rIGBjaHVua2AgaW4gdGhlIHJlYWRhYmxlIHNpZGUgb2YgdGhlIGNvbnRyb2xsZWQgdHJhbnNmb3JtIHN0cmVhbS5cbiAgICovXG4gIGVucXVldWUoY2h1bms6IE8pOiB2b2lkO1xuICBlbnF1ZXVlKGNodW5rOiBPID0gdW5kZWZpbmVkISk6IHZvaWQge1xuICAgIGlmICghSXNUcmFuc2Zvcm1TdHJlYW1EZWZhdWx0Q29udHJvbGxlcih0aGlzKSkge1xuICAgICAgdGhyb3cgZGVmYXVsdENvbnRyb2xsZXJCcmFuZENoZWNrRXhjZXB0aW9uKCdlbnF1ZXVlJyk7XG4gICAgfVxuXG4gICAgVHJhbnNmb3JtU3RyZWFtRGVmYXVsdENvbnRyb2xsZXJFbnF1ZXVlKHRoaXMsIGNodW5rKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFcnJvcnMgYm90aCB0aGUgcmVhZGFibGUgc2lkZSBhbmQgdGhlIHdyaXRhYmxlIHNpZGUgb2YgdGhlIGNvbnRyb2xsZWQgdHJhbnNmb3JtIHN0cmVhbSwgbWFraW5nIGFsbCBmdXR1cmVcbiAgICogaW50ZXJhY3Rpb25zIHdpdGggaXQgZmFpbCB3aXRoIHRoZSBnaXZlbiBlcnJvciBgZWAuIEFueSBjaHVua3MgcXVldWVkIGZvciB0cmFuc2Zvcm1hdGlvbiB3aWxsIGJlIGRpc2NhcmRlZC5cbiAgICovXG4gIGVycm9yKHJlYXNvbjogYW55ID0gdW5kZWZpbmVkKTogdm9pZCB7XG4gICAgaWYgKCFJc1RyYW5zZm9ybVN0cmVhbURlZmF1bHRDb250cm9sbGVyKHRoaXMpKSB7XG4gICAgICB0aHJvdyBkZWZhdWx0Q29udHJvbGxlckJyYW5kQ2hlY2tFeGNlcHRpb24oJ2Vycm9yJyk7XG4gICAgfVxuXG4gICAgVHJhbnNmb3JtU3RyZWFtRGVmYXVsdENvbnRyb2xsZXJFcnJvcih0aGlzLCByZWFzb24pO1xuICB9XG5cbiAgLyoqXG4gICAqIENsb3NlcyB0aGUgcmVhZGFibGUgc2lkZSBhbmQgZXJyb3JzIHRoZSB3cml0YWJsZSBzaWRlIG9mIHRoZSBjb250cm9sbGVkIHRyYW5zZm9ybSBzdHJlYW0uIFRoaXMgaXMgdXNlZnVsIHdoZW4gdGhlXG4gICAqIHRyYW5zZm9ybWVyIG9ubHkgbmVlZHMgdG8gY29uc3VtZSBhIHBvcnRpb24gb2YgdGhlIGNodW5rcyB3cml0dGVuIHRvIHRoZSB3cml0YWJsZSBzaWRlLlxuICAgKi9cbiAgdGVybWluYXRlKCk6IHZvaWQge1xuICAgIGlmICghSXNUcmFuc2Zvcm1TdHJlYW1EZWZhdWx0Q29udHJvbGxlcih0aGlzKSkge1xuICAgICAgdGhyb3cgZGVmYXVsdENvbnRyb2xsZXJCcmFuZENoZWNrRXhjZXB0aW9uKCd0ZXJtaW5hdGUnKTtcbiAgICB9XG5cbiAgICBUcmFuc2Zvcm1TdHJlYW1EZWZhdWx0Q29udHJvbGxlclRlcm1pbmF0ZSh0aGlzKTtcbiAgfVxufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhUcmFuc2Zvcm1TdHJlYW1EZWZhdWx0Q29udHJvbGxlci5wcm90b3R5cGUsIHtcbiAgZW5xdWV1ZTogeyBlbnVtZXJhYmxlOiB0cnVlIH0sXG4gIGVycm9yOiB7IGVudW1lcmFibGU6IHRydWUgfSxcbiAgdGVybWluYXRlOiB7IGVudW1lcmFibGU6IHRydWUgfSxcbiAgZGVzaXJlZFNpemU6IHsgZW51bWVyYWJsZTogdHJ1ZSB9XG59KTtcbnNldEZ1bmN0aW9uTmFtZShUcmFuc2Zvcm1TdHJlYW1EZWZhdWx0Q29udHJvbGxlci5wcm90b3R5cGUuZW5xdWV1ZSwgJ2VucXVldWUnKTtcbnNldEZ1bmN0aW9uTmFtZShUcmFuc2Zvcm1TdHJlYW1EZWZhdWx0Q29udHJvbGxlci5wcm90b3R5cGUuZXJyb3IsICdlcnJvcicpO1xuc2V0RnVuY3Rpb25OYW1lKFRyYW5zZm9ybVN0cmVhbURlZmF1bHRDb250cm9sbGVyLnByb3RvdHlwZS50ZXJtaW5hdGUsICd0ZXJtaW5hdGUnKTtcbmlmICh0eXBlb2YgU3ltYm9sLnRvU3RyaW5nVGFnID09PSAnc3ltYm9sJykge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVHJhbnNmb3JtU3RyZWFtRGVmYXVsdENvbnRyb2xsZXIucHJvdG90eXBlLCBTeW1ib2wudG9TdHJpbmdUYWcsIHtcbiAgICB2YWx1ZTogJ1RyYW5zZm9ybVN0cmVhbURlZmF1bHRDb250cm9sbGVyJyxcbiAgICBjb25maWd1cmFibGU6IHRydWVcbiAgfSk7XG59XG5cbi8vIFRyYW5zZm9ybSBTdHJlYW0gRGVmYXVsdCBDb250cm9sbGVyIEFic3RyYWN0IE9wZXJhdGlvbnNcblxuZnVuY3Rpb24gSXNUcmFuc2Zvcm1TdHJlYW1EZWZhdWx0Q29udHJvbGxlcjxPID0gYW55Pih4OiBhbnkpOiB4IGlzIFRyYW5zZm9ybVN0cmVhbURlZmF1bHRDb250cm9sbGVyPE8+IHtcbiAgaWYgKCF0eXBlSXNPYmplY3QoeCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh4LCAnX2NvbnRyb2xsZWRUcmFuc2Zvcm1TdHJlYW0nKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiB4IGluc3RhbmNlb2YgVHJhbnNmb3JtU3RyZWFtRGVmYXVsdENvbnRyb2xsZXI7XG59XG5cbmZ1bmN0aW9uIFNldFVwVHJhbnNmb3JtU3RyZWFtRGVmYXVsdENvbnRyb2xsZXI8SSwgTz4oc3RyZWFtOiBUcmFuc2Zvcm1TdHJlYW08SSwgTz4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6IFRyYW5zZm9ybVN0cmVhbURlZmF1bHRDb250cm9sbGVyPE8+LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1BbGdvcml0aG06IChjaHVuazogSSkgPT4gUHJvbWlzZTx2b2lkPixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmx1c2hBbGdvcml0aG06ICgpID0+IFByb21pc2U8dm9pZD4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbEFsZ29yaXRobTogKHJlYXNvbjogYW55KSA9PiBQcm9taXNlPHZvaWQ+KSB7XG4gIGFzc2VydChJc1RyYW5zZm9ybVN0cmVhbShzdHJlYW0pKTtcbiAgYXNzZXJ0KHN0cmVhbS5fdHJhbnNmb3JtU3RyZWFtQ29udHJvbGxlciA9PT0gdW5kZWZpbmVkKTtcblxuICBjb250cm9sbGVyLl9jb250cm9sbGVkVHJhbnNmb3JtU3RyZWFtID0gc3RyZWFtO1xuICBzdHJlYW0uX3RyYW5zZm9ybVN0cmVhbUNvbnRyb2xsZXIgPSBjb250cm9sbGVyO1xuXG4gIGNvbnRyb2xsZXIuX3RyYW5zZm9ybUFsZ29yaXRobSA9IHRyYW5zZm9ybUFsZ29yaXRobTtcbiAgY29udHJvbGxlci5fZmx1c2hBbGdvcml0aG0gPSBmbHVzaEFsZ29yaXRobTtcbiAgY29udHJvbGxlci5fY2FuY2VsQWxnb3JpdGhtID0gY2FuY2VsQWxnb3JpdGhtO1xuXG4gIGNvbnRyb2xsZXIuX2ZpbmlzaFByb21pc2UgPSB1bmRlZmluZWQ7XG4gIGNvbnRyb2xsZXIuX2ZpbmlzaFByb21pc2VfcmVzb2x2ZSA9IHVuZGVmaW5lZDtcbiAgY29udHJvbGxlci5fZmluaXNoUHJvbWlzZV9yZWplY3QgPSB1bmRlZmluZWQ7XG59XG5cbmZ1bmN0aW9uIFNldFVwVHJhbnNmb3JtU3RyZWFtRGVmYXVsdENvbnRyb2xsZXJGcm9tVHJhbnNmb3JtZXI8SSwgTz4oc3RyZWFtOiBUcmFuc2Zvcm1TdHJlYW08SSwgTz4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybWVyOiBWYWxpZGF0ZWRUcmFuc2Zvcm1lcjxJLCBPPikge1xuICBjb25zdCBjb250cm9sbGVyOiBUcmFuc2Zvcm1TdHJlYW1EZWZhdWx0Q29udHJvbGxlcjxPPiA9IE9iamVjdC5jcmVhdGUoVHJhbnNmb3JtU3RyZWFtRGVmYXVsdENvbnRyb2xsZXIucHJvdG90eXBlKTtcblxuICBsZXQgdHJhbnNmb3JtQWxnb3JpdGhtOiAoY2h1bms6IEkpID0+IFByb21pc2U8dm9pZD47XG4gIGxldCBmbHVzaEFsZ29yaXRobTogKCkgPT4gUHJvbWlzZTx2b2lkPjtcbiAgbGV0IGNhbmNlbEFsZ29yaXRobTogKHJlYXNvbjogYW55KSA9PiBQcm9taXNlPHZvaWQ+O1xuXG4gIGlmICh0cmFuc2Zvcm1lci50cmFuc2Zvcm0gIT09IHVuZGVmaW5lZCkge1xuICAgIHRyYW5zZm9ybUFsZ29yaXRobSA9IGNodW5rID0+IHRyYW5zZm9ybWVyLnRyYW5zZm9ybSEoY2h1bmssIGNvbnRyb2xsZXIpO1xuICB9IGVsc2Uge1xuICAgIHRyYW5zZm9ybUFsZ29yaXRobSA9IGNodW5rID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIFRyYW5zZm9ybVN0cmVhbURlZmF1bHRDb250cm9sbGVyRW5xdWV1ZShjb250cm9sbGVyLCBjaHVuayBhcyB1bmtub3duIGFzIE8pO1xuICAgICAgICByZXR1cm4gcHJvbWlzZVJlc29sdmVkV2l0aCh1bmRlZmluZWQpO1xuICAgICAgfSBjYXRjaCAodHJhbnNmb3JtUmVzdWx0RSkge1xuICAgICAgICByZXR1cm4gcHJvbWlzZVJlamVjdGVkV2l0aCh0cmFuc2Zvcm1SZXN1bHRFKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgaWYgKHRyYW5zZm9ybWVyLmZsdXNoICE9PSB1bmRlZmluZWQpIHtcbiAgICBmbHVzaEFsZ29yaXRobSA9ICgpID0+IHRyYW5zZm9ybWVyLmZsdXNoIShjb250cm9sbGVyKTtcbiAgfSBlbHNlIHtcbiAgICBmbHVzaEFsZ29yaXRobSA9ICgpID0+IHByb21pc2VSZXNvbHZlZFdpdGgodW5kZWZpbmVkKTtcbiAgfVxuXG4gIGlmICh0cmFuc2Zvcm1lci5jYW5jZWwgIT09IHVuZGVmaW5lZCkge1xuICAgIGNhbmNlbEFsZ29yaXRobSA9IHJlYXNvbiA9PiB0cmFuc2Zvcm1lci5jYW5jZWwhKHJlYXNvbik7XG4gIH0gZWxzZSB7XG4gICAgY2FuY2VsQWxnb3JpdGhtID0gKCkgPT4gcHJvbWlzZVJlc29sdmVkV2l0aCh1bmRlZmluZWQpO1xuICB9XG5cbiAgU2V0VXBUcmFuc2Zvcm1TdHJlYW1EZWZhdWx0Q29udHJvbGxlcihzdHJlYW0sIGNvbnRyb2xsZXIsIHRyYW5zZm9ybUFsZ29yaXRobSwgZmx1c2hBbGdvcml0aG0sIGNhbmNlbEFsZ29yaXRobSk7XG59XG5cbmZ1bmN0aW9uIFRyYW5zZm9ybVN0cmVhbURlZmF1bHRDb250cm9sbGVyQ2xlYXJBbGdvcml0aG1zKGNvbnRyb2xsZXI6IFRyYW5zZm9ybVN0cmVhbURlZmF1bHRDb250cm9sbGVyPGFueT4pIHtcbiAgY29udHJvbGxlci5fdHJhbnNmb3JtQWxnb3JpdGhtID0gdW5kZWZpbmVkITtcbiAgY29udHJvbGxlci5fZmx1c2hBbGdvcml0aG0gPSB1bmRlZmluZWQhO1xuICBjb250cm9sbGVyLl9jYW5jZWxBbGdvcml0aG0gPSB1bmRlZmluZWQhO1xufVxuXG5mdW5jdGlvbiBUcmFuc2Zvcm1TdHJlYW1EZWZhdWx0Q29udHJvbGxlckVucXVldWU8Tz4oY29udHJvbGxlcjogVHJhbnNmb3JtU3RyZWFtRGVmYXVsdENvbnRyb2xsZXI8Tz4sIGNodW5rOiBPKSB7XG4gIGNvbnN0IHN0cmVhbSA9IGNvbnRyb2xsZXIuX2NvbnRyb2xsZWRUcmFuc2Zvcm1TdHJlYW07XG4gIGNvbnN0IHJlYWRhYmxlQ29udHJvbGxlciA9IHN0cmVhbS5fcmVhZGFibGUuX3JlYWRhYmxlU3RyZWFtQ29udHJvbGxlcjtcbiAgaWYgKCFSZWFkYWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyQ2FuQ2xvc2VPckVucXVldWUocmVhZGFibGVDb250cm9sbGVyKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1JlYWRhYmxlIHNpZGUgaXMgbm90IGluIGEgc3RhdGUgdGhhdCBwZXJtaXRzIGVucXVldWUnKTtcbiAgfVxuXG4gIC8vIFdlIHRocm90dGxlIHRyYW5zZm9ybSBpbnZvY2F0aW9ucyBiYXNlZCBvbiB0aGUgYmFja3ByZXNzdXJlIG9mIHRoZSBSZWFkYWJsZVN0cmVhbSwgYnV0IHdlIHN0aWxsXG4gIC8vIGFjY2VwdCBUcmFuc2Zvcm1TdHJlYW1EZWZhdWx0Q29udHJvbGxlckVucXVldWUoKSBjYWxscy5cblxuICB0cnkge1xuICAgIFJlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXJFbnF1ZXVlKHJlYWRhYmxlQ29udHJvbGxlciwgY2h1bmspO1xuICB9IGNhdGNoIChlKSB7XG4gICAgLy8gVGhpcyBoYXBwZW5zIHdoZW4gcmVhZGFibGVTdHJhdGVneS5zaXplKCkgdGhyb3dzLlxuICAgIFRyYW5zZm9ybVN0cmVhbUVycm9yV3JpdGFibGVBbmRVbmJsb2NrV3JpdGUoc3RyZWFtLCBlKTtcblxuICAgIHRocm93IHN0cmVhbS5fcmVhZGFibGUuX3N0b3JlZEVycm9yO1xuICB9XG5cbiAgY29uc3QgYmFja3ByZXNzdXJlID0gUmVhZGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlckhhc0JhY2twcmVzc3VyZShyZWFkYWJsZUNvbnRyb2xsZXIpO1xuICBpZiAoYmFja3ByZXNzdXJlICE9PSBzdHJlYW0uX2JhY2twcmVzc3VyZSkge1xuICAgIGFzc2VydChiYWNrcHJlc3N1cmUpO1xuICAgIFRyYW5zZm9ybVN0cmVhbVNldEJhY2twcmVzc3VyZShzdHJlYW0sIHRydWUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIFRyYW5zZm9ybVN0cmVhbURlZmF1bHRDb250cm9sbGVyRXJyb3IoY29udHJvbGxlcjogVHJhbnNmb3JtU3RyZWFtRGVmYXVsdENvbnRyb2xsZXI8YW55PiwgZTogYW55KSB7XG4gIFRyYW5zZm9ybVN0cmVhbUVycm9yKGNvbnRyb2xsZXIuX2NvbnRyb2xsZWRUcmFuc2Zvcm1TdHJlYW0sIGUpO1xufVxuXG5mdW5jdGlvbiBUcmFuc2Zvcm1TdHJlYW1EZWZhdWx0Q29udHJvbGxlclBlcmZvcm1UcmFuc2Zvcm08SSwgTz4oY29udHJvbGxlcjogVHJhbnNmb3JtU3RyZWFtRGVmYXVsdENvbnRyb2xsZXI8Tz4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2h1bms6IEkpIHtcbiAgY29uc3QgdHJhbnNmb3JtUHJvbWlzZSA9IGNvbnRyb2xsZXIuX3RyYW5zZm9ybUFsZ29yaXRobShjaHVuayk7XG4gIHJldHVybiB0cmFuc2Zvcm1Qcm9taXNlV2l0aCh0cmFuc2Zvcm1Qcm9taXNlLCB1bmRlZmluZWQsIHIgPT4ge1xuICAgIFRyYW5zZm9ybVN0cmVhbUVycm9yKGNvbnRyb2xsZXIuX2NvbnRyb2xsZWRUcmFuc2Zvcm1TdHJlYW0sIHIpO1xuICAgIHRocm93IHI7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBUcmFuc2Zvcm1TdHJlYW1EZWZhdWx0Q29udHJvbGxlclRlcm1pbmF0ZTxPPihjb250cm9sbGVyOiBUcmFuc2Zvcm1TdHJlYW1EZWZhdWx0Q29udHJvbGxlcjxPPikge1xuICBjb25zdCBzdHJlYW0gPSBjb250cm9sbGVyLl9jb250cm9sbGVkVHJhbnNmb3JtU3RyZWFtO1xuICBjb25zdCByZWFkYWJsZUNvbnRyb2xsZXIgPSBzdHJlYW0uX3JlYWRhYmxlLl9yZWFkYWJsZVN0cmVhbUNvbnRyb2xsZXI7XG5cbiAgUmVhZGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlckNsb3NlKHJlYWRhYmxlQ29udHJvbGxlcik7XG5cbiAgY29uc3QgZXJyb3IgPSBuZXcgVHlwZUVycm9yKCdUcmFuc2Zvcm1TdHJlYW0gdGVybWluYXRlZCcpO1xuICBUcmFuc2Zvcm1TdHJlYW1FcnJvcldyaXRhYmxlQW5kVW5ibG9ja1dyaXRlKHN0cmVhbSwgZXJyb3IpO1xufVxuXG4vLyBUcmFuc2Zvcm1TdHJlYW1EZWZhdWx0U2luayBBbGdvcml0aG1zXG5cbmZ1bmN0aW9uIFRyYW5zZm9ybVN0cmVhbURlZmF1bHRTaW5rV3JpdGVBbGdvcml0aG08SSwgTz4oc3RyZWFtOiBUcmFuc2Zvcm1TdHJlYW08SSwgTz4sIGNodW5rOiBJKTogUHJvbWlzZTx2b2lkPiB7XG4gIGFzc2VydChzdHJlYW0uX3dyaXRhYmxlLl9zdGF0ZSA9PT0gJ3dyaXRhYmxlJyk7XG5cbiAgY29uc3QgY29udHJvbGxlciA9IHN0cmVhbS5fdHJhbnNmb3JtU3RyZWFtQ29udHJvbGxlcjtcblxuICBpZiAoc3RyZWFtLl9iYWNrcHJlc3N1cmUpIHtcbiAgICBjb25zdCBiYWNrcHJlc3N1cmVDaGFuZ2VQcm9taXNlID0gc3RyZWFtLl9iYWNrcHJlc3N1cmVDaGFuZ2VQcm9taXNlO1xuICAgIGFzc2VydChiYWNrcHJlc3N1cmVDaGFuZ2VQcm9taXNlICE9PSB1bmRlZmluZWQpO1xuICAgIHJldHVybiB0cmFuc2Zvcm1Qcm9taXNlV2l0aChiYWNrcHJlc3N1cmVDaGFuZ2VQcm9taXNlLCAoKSA9PiB7XG4gICAgICBjb25zdCB3cml0YWJsZSA9IHN0cmVhbS5fd3JpdGFibGU7XG4gICAgICBjb25zdCBzdGF0ZSA9IHdyaXRhYmxlLl9zdGF0ZTtcbiAgICAgIGlmIChzdGF0ZSA9PT0gJ2Vycm9yaW5nJykge1xuICAgICAgICB0aHJvdyB3cml0YWJsZS5fc3RvcmVkRXJyb3I7XG4gICAgICB9XG4gICAgICBhc3NlcnQoc3RhdGUgPT09ICd3cml0YWJsZScpO1xuICAgICAgcmV0dXJuIFRyYW5zZm9ybVN0cmVhbURlZmF1bHRDb250cm9sbGVyUGVyZm9ybVRyYW5zZm9ybTxJLCBPPihjb250cm9sbGVyLCBjaHVuayk7XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gVHJhbnNmb3JtU3RyZWFtRGVmYXVsdENvbnRyb2xsZXJQZXJmb3JtVHJhbnNmb3JtPEksIE8+KGNvbnRyb2xsZXIsIGNodW5rKTtcbn1cblxuZnVuY3Rpb24gVHJhbnNmb3JtU3RyZWFtRGVmYXVsdFNpbmtBYm9ydEFsZ29yaXRobTxJLCBPPihzdHJlYW06IFRyYW5zZm9ybVN0cmVhbTxJLCBPPiwgcmVhc29uOiBhbnkpOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3QgY29udHJvbGxlciA9IHN0cmVhbS5fdHJhbnNmb3JtU3RyZWFtQ29udHJvbGxlcjtcbiAgaWYgKGNvbnRyb2xsZXIuX2ZpbmlzaFByb21pc2UgIT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBjb250cm9sbGVyLl9maW5pc2hQcm9taXNlO1xuICB9XG5cbiAgLy8gc3RyZWFtLl9yZWFkYWJsZSBjYW5ub3QgY2hhbmdlIGFmdGVyIGNvbnN0cnVjdGlvbiwgc28gY2FjaGluZyBpdCBhY3Jvc3MgYSBjYWxsIHRvIHVzZXIgY29kZSBpcyBzYWZlLlxuICBjb25zdCByZWFkYWJsZSA9IHN0cmVhbS5fcmVhZGFibGU7XG5cbiAgLy8gQXNzaWduIHRoZSBfZmluaXNoUHJvbWlzZSBub3cgc28gdGhhdCBpZiBfY2FuY2VsQWxnb3JpdGhtIGNhbGxzIHJlYWRhYmxlLmNhbmNlbCgpIGludGVybmFsbHksXG4gIC8vIHdlIGRvbid0IHJ1biB0aGUgX2NhbmNlbEFsZ29yaXRobSBhZ2Fpbi5cbiAgY29udHJvbGxlci5fZmluaXNoUHJvbWlzZSA9IG5ld1Byb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGNvbnRyb2xsZXIuX2ZpbmlzaFByb21pc2VfcmVzb2x2ZSA9IHJlc29sdmU7XG4gICAgY29udHJvbGxlci5fZmluaXNoUHJvbWlzZV9yZWplY3QgPSByZWplY3Q7XG4gIH0pO1xuXG4gIGNvbnN0IGNhbmNlbFByb21pc2UgPSBjb250cm9sbGVyLl9jYW5jZWxBbGdvcml0aG0ocmVhc29uKTtcbiAgVHJhbnNmb3JtU3RyZWFtRGVmYXVsdENvbnRyb2xsZXJDbGVhckFsZ29yaXRobXMoY29udHJvbGxlcik7XG5cbiAgdXBvblByb21pc2UoY2FuY2VsUHJvbWlzZSwgKCkgPT4ge1xuICAgIGlmIChyZWFkYWJsZS5fc3RhdGUgPT09ICdlcnJvcmVkJykge1xuICAgICAgZGVmYXVsdENvbnRyb2xsZXJGaW5pc2hQcm9taXNlUmVqZWN0KGNvbnRyb2xsZXIsIHJlYWRhYmxlLl9zdG9yZWRFcnJvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIFJlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXJFcnJvcihyZWFkYWJsZS5fcmVhZGFibGVTdHJlYW1Db250cm9sbGVyLCByZWFzb24pO1xuICAgICAgZGVmYXVsdENvbnRyb2xsZXJGaW5pc2hQcm9taXNlUmVzb2x2ZShjb250cm9sbGVyKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH0sIHIgPT4ge1xuICAgIFJlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXJFcnJvcihyZWFkYWJsZS5fcmVhZGFibGVTdHJlYW1Db250cm9sbGVyLCByKTtcbiAgICBkZWZhdWx0Q29udHJvbGxlckZpbmlzaFByb21pc2VSZWplY3QoY29udHJvbGxlciwgcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH0pO1xuXG4gIHJldHVybiBjb250cm9sbGVyLl9maW5pc2hQcm9taXNlO1xufVxuXG5mdW5jdGlvbiBUcmFuc2Zvcm1TdHJlYW1EZWZhdWx0U2lua0Nsb3NlQWxnb3JpdGhtPEksIE8+KHN0cmVhbTogVHJhbnNmb3JtU3RyZWFtPEksIE8+KTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IGNvbnRyb2xsZXIgPSBzdHJlYW0uX3RyYW5zZm9ybVN0cmVhbUNvbnRyb2xsZXI7XG4gIGlmIChjb250cm9sbGVyLl9maW5pc2hQcm9taXNlICE9PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gY29udHJvbGxlci5fZmluaXNoUHJvbWlzZTtcbiAgfVxuXG4gIC8vIHN0cmVhbS5fcmVhZGFibGUgY2Fubm90IGNoYW5nZSBhZnRlciBjb25zdHJ1Y3Rpb24sIHNvIGNhY2hpbmcgaXQgYWNyb3NzIGEgY2FsbCB0byB1c2VyIGNvZGUgaXMgc2FmZS5cbiAgY29uc3QgcmVhZGFibGUgPSBzdHJlYW0uX3JlYWRhYmxlO1xuXG4gIC8vIEFzc2lnbiB0aGUgX2ZpbmlzaFByb21pc2Ugbm93IHNvIHRoYXQgaWYgX2ZsdXNoQWxnb3JpdGhtIGNhbGxzIHJlYWRhYmxlLmNhbmNlbCgpIGludGVybmFsbHksXG4gIC8vIHdlIGRvbid0IGFsc28gcnVuIHRoZSBfY2FuY2VsQWxnb3JpdGhtLlxuICBjb250cm9sbGVyLl9maW5pc2hQcm9taXNlID0gbmV3UHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgY29udHJvbGxlci5fZmluaXNoUHJvbWlzZV9yZXNvbHZlID0gcmVzb2x2ZTtcbiAgICBjb250cm9sbGVyLl9maW5pc2hQcm9taXNlX3JlamVjdCA9IHJlamVjdDtcbiAgfSk7XG5cbiAgY29uc3QgZmx1c2hQcm9taXNlID0gY29udHJvbGxlci5fZmx1c2hBbGdvcml0aG0oKTtcbiAgVHJhbnNmb3JtU3RyZWFtRGVmYXVsdENvbnRyb2xsZXJDbGVhckFsZ29yaXRobXMoY29udHJvbGxlcik7XG5cbiAgdXBvblByb21pc2UoZmx1c2hQcm9taXNlLCAoKSA9PiB7XG4gICAgaWYgKHJlYWRhYmxlLl9zdGF0ZSA9PT0gJ2Vycm9yZWQnKSB7XG4gICAgICBkZWZhdWx0Q29udHJvbGxlckZpbmlzaFByb21pc2VSZWplY3QoY29udHJvbGxlciwgcmVhZGFibGUuX3N0b3JlZEVycm9yKTtcbiAgICB9IGVsc2Uge1xuICAgICAgUmVhZGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlckNsb3NlKHJlYWRhYmxlLl9yZWFkYWJsZVN0cmVhbUNvbnRyb2xsZXIpO1xuICAgICAgZGVmYXVsdENvbnRyb2xsZXJGaW5pc2hQcm9taXNlUmVzb2x2ZShjb250cm9sbGVyKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH0sIHIgPT4ge1xuICAgIFJlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXJFcnJvcihyZWFkYWJsZS5fcmVhZGFibGVTdHJlYW1Db250cm9sbGVyLCByKTtcbiAgICBkZWZhdWx0Q29udHJvbGxlckZpbmlzaFByb21pc2VSZWplY3QoY29udHJvbGxlciwgcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH0pO1xuXG4gIHJldHVybiBjb250cm9sbGVyLl9maW5pc2hQcm9taXNlO1xufVxuXG4vLyBUcmFuc2Zvcm1TdHJlYW1EZWZhdWx0U291cmNlIEFsZ29yaXRobXNcblxuZnVuY3Rpb24gVHJhbnNmb3JtU3RyZWFtRGVmYXVsdFNvdXJjZVB1bGxBbGdvcml0aG0oc3RyZWFtOiBUcmFuc2Zvcm1TdHJlYW0pOiBQcm9taXNlPHZvaWQ+IHtcbiAgLy8gSW52YXJpYW50LiBFbmZvcmNlZCBieSB0aGUgcHJvbWlzZXMgcmV0dXJuZWQgYnkgc3RhcnQoKSBhbmQgcHVsbCgpLlxuICBhc3NlcnQoc3RyZWFtLl9iYWNrcHJlc3N1cmUpO1xuXG4gIGFzc2VydChzdHJlYW0uX2JhY2twcmVzc3VyZUNoYW5nZVByb21pc2UgIT09IHVuZGVmaW5lZCk7XG5cbiAgVHJhbnNmb3JtU3RyZWFtU2V0QmFja3ByZXNzdXJlKHN0cmVhbSwgZmFsc2UpO1xuXG4gIC8vIFByZXZlbnQgdGhlIG5leHQgcHVsbCgpIGNhbGwgdW50aWwgdGhlcmUgaXMgYmFja3ByZXNzdXJlLlxuICByZXR1cm4gc3RyZWFtLl9iYWNrcHJlc3N1cmVDaGFuZ2VQcm9taXNlO1xufVxuXG5mdW5jdGlvbiBUcmFuc2Zvcm1TdHJlYW1EZWZhdWx0U291cmNlQ2FuY2VsQWxnb3JpdGhtPEksIE8+KHN0cmVhbTogVHJhbnNmb3JtU3RyZWFtPEksIE8+LCByZWFzb246IGFueSk6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCBjb250cm9sbGVyID0gc3RyZWFtLl90cmFuc2Zvcm1TdHJlYW1Db250cm9sbGVyO1xuICBpZiAoY29udHJvbGxlci5fZmluaXNoUHJvbWlzZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIGNvbnRyb2xsZXIuX2ZpbmlzaFByb21pc2U7XG4gIH1cblxuICAvLyBzdHJlYW0uX3dyaXRhYmxlIGNhbm5vdCBjaGFuZ2UgYWZ0ZXIgY29uc3RydWN0aW9uLCBzbyBjYWNoaW5nIGl0IGFjcm9zcyBhIGNhbGwgdG8gdXNlciBjb2RlIGlzIHNhZmUuXG4gIGNvbnN0IHdyaXRhYmxlID0gc3RyZWFtLl93cml0YWJsZTtcblxuICAvLyBBc3NpZ24gdGhlIF9maW5pc2hQcm9taXNlIG5vdyBzbyB0aGF0IGlmIF9mbHVzaEFsZ29yaXRobSBjYWxscyB3cml0YWJsZS5hYm9ydCgpIG9yXG4gIC8vIHdyaXRhYmxlLmNhbmNlbCgpIGludGVybmFsbHksIHdlIGRvbid0IHJ1biB0aGUgX2NhbmNlbEFsZ29yaXRobSBhZ2Fpbiwgb3IgYWxzbyBydW4gdGhlXG4gIC8vIF9mbHVzaEFsZ29yaXRobS5cbiAgY29udHJvbGxlci5fZmluaXNoUHJvbWlzZSA9IG5ld1Byb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGNvbnRyb2xsZXIuX2ZpbmlzaFByb21pc2VfcmVzb2x2ZSA9IHJlc29sdmU7XG4gICAgY29udHJvbGxlci5fZmluaXNoUHJvbWlzZV9yZWplY3QgPSByZWplY3Q7XG4gIH0pO1xuXG4gIGNvbnN0IGNhbmNlbFByb21pc2UgPSBjb250cm9sbGVyLl9jYW5jZWxBbGdvcml0aG0ocmVhc29uKTtcbiAgVHJhbnNmb3JtU3RyZWFtRGVmYXVsdENvbnRyb2xsZXJDbGVhckFsZ29yaXRobXMoY29udHJvbGxlcik7XG5cbiAgdXBvblByb21pc2UoY2FuY2VsUHJvbWlzZSwgKCkgPT4ge1xuICAgIGlmICh3cml0YWJsZS5fc3RhdGUgPT09ICdlcnJvcmVkJykge1xuICAgICAgZGVmYXVsdENvbnRyb2xsZXJGaW5pc2hQcm9taXNlUmVqZWN0KGNvbnRyb2xsZXIsIHdyaXRhYmxlLl9zdG9yZWRFcnJvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIFdyaXRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXJFcnJvcklmTmVlZGVkKHdyaXRhYmxlLl93cml0YWJsZVN0cmVhbUNvbnRyb2xsZXIsIHJlYXNvbik7XG4gICAgICBUcmFuc2Zvcm1TdHJlYW1VbmJsb2NrV3JpdGUoc3RyZWFtKTtcbiAgICAgIGRlZmF1bHRDb250cm9sbGVyRmluaXNoUHJvbWlzZVJlc29sdmUoY29udHJvbGxlcik7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9LCByID0+IHtcbiAgICBXcml0YWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyRXJyb3JJZk5lZWRlZCh3cml0YWJsZS5fd3JpdGFibGVTdHJlYW1Db250cm9sbGVyLCByKTtcbiAgICBUcmFuc2Zvcm1TdHJlYW1VbmJsb2NrV3JpdGUoc3RyZWFtKTtcbiAgICBkZWZhdWx0Q29udHJvbGxlckZpbmlzaFByb21pc2VSZWplY3QoY29udHJvbGxlciwgcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH0pO1xuXG4gIHJldHVybiBjb250cm9sbGVyLl9maW5pc2hQcm9taXNlO1xufVxuXG4vLyBIZWxwZXIgZnVuY3Rpb25zIGZvciB0aGUgVHJhbnNmb3JtU3RyZWFtRGVmYXVsdENvbnRyb2xsZXIuXG5cbmZ1bmN0aW9uIGRlZmF1bHRDb250cm9sbGVyQnJhbmRDaGVja0V4Y2VwdGlvbihuYW1lOiBzdHJpbmcpOiBUeXBlRXJyb3Ige1xuICByZXR1cm4gbmV3IFR5cGVFcnJvcihcbiAgICBgVHJhbnNmb3JtU3RyZWFtRGVmYXVsdENvbnRyb2xsZXIucHJvdG90eXBlLiR7bmFtZX0gY2FuIG9ubHkgYmUgdXNlZCBvbiBhIFRyYW5zZm9ybVN0cmVhbURlZmF1bHRDb250cm9sbGVyYCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0Q29udHJvbGxlckZpbmlzaFByb21pc2VSZXNvbHZlKGNvbnRyb2xsZXI6IFRyYW5zZm9ybVN0cmVhbURlZmF1bHRDb250cm9sbGVyPGFueT4pIHtcbiAgaWYgKGNvbnRyb2xsZXIuX2ZpbmlzaFByb21pc2VfcmVzb2x2ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29udHJvbGxlci5fZmluaXNoUHJvbWlzZV9yZXNvbHZlKCk7XG4gIGNvbnRyb2xsZXIuX2ZpbmlzaFByb21pc2VfcmVzb2x2ZSA9IHVuZGVmaW5lZDtcbiAgY29udHJvbGxlci5fZmluaXNoUHJvbWlzZV9yZWplY3QgPSB1bmRlZmluZWQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0Q29udHJvbGxlckZpbmlzaFByb21pc2VSZWplY3QoY29udHJvbGxlcjogVHJhbnNmb3JtU3RyZWFtRGVmYXVsdENvbnRyb2xsZXI8YW55PiwgcmVhc29uOiBhbnkpIHtcbiAgaWYgKGNvbnRyb2xsZXIuX2ZpbmlzaFByb21pc2VfcmVqZWN0ID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBzZXRQcm9taXNlSXNIYW5kbGVkVG9UcnVlKGNvbnRyb2xsZXIuX2ZpbmlzaFByb21pc2UhKTtcbiAgY29udHJvbGxlci5fZmluaXNoUHJvbWlzZV9yZWplY3QocmVhc29uKTtcbiAgY29udHJvbGxlci5fZmluaXNoUHJvbWlzZV9yZXNvbHZlID0gdW5kZWZpbmVkO1xuICBjb250cm9sbGVyLl9maW5pc2hQcm9taXNlX3JlamVjdCA9IHVuZGVmaW5lZDtcbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9ucyBmb3IgdGhlIFRyYW5zZm9ybVN0cmVhbS5cblxuZnVuY3Rpb24gc3RyZWFtQnJhbmRDaGVja0V4Y2VwdGlvbihuYW1lOiBzdHJpbmcpOiBUeXBlRXJyb3Ige1xuICByZXR1cm4gbmV3IFR5cGVFcnJvcihcbiAgICBgVHJhbnNmb3JtU3RyZWFtLnByb3RvdHlwZS4ke25hbWV9IGNhbiBvbmx5IGJlIHVzZWQgb24gYSBUcmFuc2Zvcm1TdHJlYW1gKTtcbn1cbiIsICIvKiBjOCBpZ25vcmUgc3RhcnQgKi9cbi8vIDY0IEtpQiAoc2FtZSBzaXplIGNocm9tZSBzbGljZSB0aGVpcnMgYmxvYiBpbnRvIFVpbnQ4YXJyYXkncylcbmNvbnN0IFBPT0xfU0laRSA9IDY1NTM2XG5cbmlmICghZ2xvYmFsVGhpcy5SZWFkYWJsZVN0cmVhbSkge1xuICAvLyBgbm9kZTpzdHJlYW0vd2ViYCBnb3QgaW50cm9kdWNlZCBpbiB2MTYuNS4wIGFzIGV4cGVyaW1lbnRhbFxuICAvLyBhbmQgaXQncyBwcmVmZXJyZWQgb3ZlciB0aGUgcG9seWZpbGxlZCB2ZXJzaW9uLiBTbyB3ZSBhbHNvXG4gIC8vIHN1cHByZXNzIHRoZSB3YXJuaW5nIHRoYXQgZ2V0cyBlbWl0dGVkIGJ5IE5vZGVKUyBmb3IgdXNpbmcgaXQuXG4gIHRyeSB7XG4gICAgY29uc3QgcHJvY2VzcyA9IHJlcXVpcmUoJ25vZGU6cHJvY2VzcycpXG4gICAgY29uc3QgeyBlbWl0V2FybmluZyB9ID0gcHJvY2Vzc1xuICAgIHRyeSB7XG4gICAgICBwcm9jZXNzLmVtaXRXYXJuaW5nID0gKCkgPT4ge31cbiAgICAgIE9iamVjdC5hc3NpZ24oZ2xvYmFsVGhpcywgcmVxdWlyZSgnbm9kZTpzdHJlYW0vd2ViJykpXG4gICAgICBwcm9jZXNzLmVtaXRXYXJuaW5nID0gZW1pdFdhcm5pbmdcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcHJvY2Vzcy5lbWl0V2FybmluZyA9IGVtaXRXYXJuaW5nXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAvLyBmYWxsYmFjayB0byBwb2x5ZmlsbCBpbXBsZW1lbnRhdGlvblxuICAgIE9iamVjdC5hc3NpZ24oZ2xvYmFsVGhpcywgcmVxdWlyZSgnd2ViLXN0cmVhbXMtcG9seWZpbGwvZGlzdC9wb255ZmlsbC5lczIwMTguanMnKSlcbiAgfVxufVxuXG50cnkge1xuICAvLyBEb24ndCB1c2Ugbm9kZTogcHJlZml4IGZvciB0aGlzLCByZXF1aXJlK25vZGU6IGlzIG5vdCBzdXBwb3J0ZWQgdW50aWwgbm9kZSB2MTQuMTRcbiAgLy8gT25seSBgaW1wb3J0KClgIGNhbiB1c2UgcHJlZml4IGluIDEyLjIwIGFuZCBsYXRlclxuICBjb25zdCB7IEJsb2IgfSA9IHJlcXVpcmUoJ2J1ZmZlcicpXG4gIGlmIChCbG9iICYmICFCbG9iLnByb3RvdHlwZS5zdHJlYW0pIHtcbiAgICBCbG9iLnByb3RvdHlwZS5zdHJlYW0gPSBmdW5jdGlvbiBuYW1lIChwYXJhbXMpIHtcbiAgICAgIGxldCBwb3NpdGlvbiA9IDBcbiAgICAgIGNvbnN0IGJsb2IgPSB0aGlzXG5cbiAgICAgIHJldHVybiBuZXcgUmVhZGFibGVTdHJlYW0oe1xuICAgICAgICB0eXBlOiAnYnl0ZXMnLFxuICAgICAgICBhc3luYyBwdWxsIChjdHJsKSB7XG4gICAgICAgICAgY29uc3QgY2h1bmsgPSBibG9iLnNsaWNlKHBvc2l0aW9uLCBNYXRoLm1pbihibG9iLnNpemUsIHBvc2l0aW9uICsgUE9PTF9TSVpFKSlcbiAgICAgICAgICBjb25zdCBidWZmZXIgPSBhd2FpdCBjaHVuay5hcnJheUJ1ZmZlcigpXG4gICAgICAgICAgcG9zaXRpb24gKz0gYnVmZmVyLmJ5dGVMZW5ndGhcbiAgICAgICAgICBjdHJsLmVucXVldWUobmV3IFVpbnQ4QXJyYXkoYnVmZmVyKSlcblxuICAgICAgICAgIGlmIChwb3NpdGlvbiA9PT0gYmxvYi5zaXplKSB7XG4gICAgICAgICAgICBjdHJsLmNsb3NlKClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9XG59IGNhdGNoIChlcnJvcikge31cbi8qIGM4IGlnbm9yZSBlbmQgKi9cbiIsICIvKiEgZmV0Y2gtYmxvYi4gTUlUIExpY2Vuc2UuIEppbW15IFdcdTAwRTRydGluZyA8aHR0cHM6Ly9qaW1teS53YXJ0aW5nLnNlL29wZW5zb3VyY2U+ICovXG5cbi8vIFRPRE8gKGppbW15d2FydGluZyk6IGluIHRoZSBmZWF0dXJlIHVzZSBjb25kaXRpb25hbCBsb2FkaW5nIHdpdGggdG9wIGxldmVsIGF3YWl0IChyZXF1aXJlcyAxNC54KVxuLy8gTm9kZSBoYXMgcmVjZW50bHkgYWRkZWQgd2hhdHdnIHN0cmVhbSBpbnRvIGNvcmVcblxuaW1wb3J0ICcuL3N0cmVhbXMuY2pzJ1xuXG4vLyA2NCBLaUIgKHNhbWUgc2l6ZSBjaHJvbWUgc2xpY2UgdGhlaXJzIGJsb2IgaW50byBVaW50OGFycmF5J3MpXG5jb25zdCBQT09MX1NJWkUgPSA2NTUzNlxuXG4vKiogQHBhcmFtIHsoQmxvYiB8IFVpbnQ4QXJyYXkpW119IHBhcnRzICovXG5hc3luYyBmdW5jdGlvbiAqIHRvSXRlcmF0b3IgKHBhcnRzLCBjbG9uZSA9IHRydWUpIHtcbiAgZm9yIChjb25zdCBwYXJ0IG9mIHBhcnRzKSB7XG4gICAgaWYgKCdzdHJlYW0nIGluIHBhcnQpIHtcbiAgICAgIHlpZWxkICogKC8qKiBAdHlwZSB7QXN5bmNJdGVyYWJsZUl0ZXJhdG9yPFVpbnQ4QXJyYXk+fSAqLyAocGFydC5zdHJlYW0oKSkpXG4gICAgfSBlbHNlIGlmIChBcnJheUJ1ZmZlci5pc1ZpZXcocGFydCkpIHtcbiAgICAgIGlmIChjbG9uZSkge1xuICAgICAgICBsZXQgcG9zaXRpb24gPSBwYXJ0LmJ5dGVPZmZzZXRcbiAgICAgICAgY29uc3QgZW5kID0gcGFydC5ieXRlT2Zmc2V0ICsgcGFydC5ieXRlTGVuZ3RoXG4gICAgICAgIHdoaWxlIChwb3NpdGlvbiAhPT0gZW5kKSB7XG4gICAgICAgICAgY29uc3Qgc2l6ZSA9IE1hdGgubWluKGVuZCAtIHBvc2l0aW9uLCBQT09MX1NJWkUpXG4gICAgICAgICAgY29uc3QgY2h1bmsgPSBwYXJ0LmJ1ZmZlci5zbGljZShwb3NpdGlvbiwgcG9zaXRpb24gKyBzaXplKVxuICAgICAgICAgIHBvc2l0aW9uICs9IGNodW5rLmJ5dGVMZW5ndGhcbiAgICAgICAgICB5aWVsZCBuZXcgVWludDhBcnJheShjaHVuaylcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgeWllbGQgcGFydFxuICAgICAgfVxuICAgIC8qIGM4IGlnbm9yZSBuZXh0IDEwICovXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEZvciBibG9icyB0aGF0IGhhdmUgYXJyYXlCdWZmZXIgYnV0IG5vIHN0cmVhbSBtZXRob2QgKG5vZGVzIGJ1ZmZlci5CbG9iKVxuICAgICAgbGV0IHBvc2l0aW9uID0gMCwgYiA9ICgvKiogQHR5cGUge0Jsb2J9ICovIChwYXJ0KSlcbiAgICAgIHdoaWxlIChwb3NpdGlvbiAhPT0gYi5zaXplKSB7XG4gICAgICAgIGNvbnN0IGNodW5rID0gYi5zbGljZShwb3NpdGlvbiwgTWF0aC5taW4oYi5zaXplLCBwb3NpdGlvbiArIFBPT0xfU0laRSkpXG4gICAgICAgIGNvbnN0IGJ1ZmZlciA9IGF3YWl0IGNodW5rLmFycmF5QnVmZmVyKClcbiAgICAgICAgcG9zaXRpb24gKz0gYnVmZmVyLmJ5dGVMZW5ndGhcbiAgICAgICAgeWllbGQgbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5jb25zdCBfQmxvYiA9IGNsYXNzIEJsb2Ige1xuICAvKiogQHR5cGUge0FycmF5LjwoQmxvYnxVaW50OEFycmF5KT59ICovXG4gICNwYXJ0cyA9IFtdXG4gICN0eXBlID0gJydcbiAgI3NpemUgPSAwXG4gICNlbmRpbmdzID0gJ3RyYW5zcGFyZW50J1xuXG4gIC8qKlxuICAgKiBUaGUgQmxvYigpIGNvbnN0cnVjdG9yIHJldHVybnMgYSBuZXcgQmxvYiBvYmplY3QuIFRoZSBjb250ZW50XG4gICAqIG9mIHRoZSBibG9iIGNvbnNpc3RzIG9mIHRoZSBjb25jYXRlbmF0aW9uIG9mIHRoZSB2YWx1ZXMgZ2l2ZW5cbiAgICogaW4gdGhlIHBhcmFtZXRlciBhcnJheS5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBibG9iUGFydHNcbiAgICogQHBhcmFtIHt7IHR5cGU/OiBzdHJpbmcsIGVuZGluZ3M/OiBzdHJpbmcgfX0gW29wdGlvbnNdXG4gICAqL1xuICBjb25zdHJ1Y3RvciAoYmxvYlBhcnRzID0gW10sIG9wdGlvbnMgPSB7fSkge1xuICAgIGlmICh0eXBlb2YgYmxvYlBhcnRzICE9PSAnb2JqZWN0JyB8fCBibG9iUGFydHMgPT09IG51bGwpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ZhaWxlZCB0byBjb25zdHJ1Y3QgXFwnQmxvYlxcJzogVGhlIHByb3ZpZGVkIHZhbHVlIGNhbm5vdCBiZSBjb252ZXJ0ZWQgdG8gYSBzZXF1ZW5jZS4nKVxuICAgIH1cblxuICAgIGlmICh0eXBlb2YgYmxvYlBhcnRzW1N5bWJvbC5pdGVyYXRvcl0gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ZhaWxlZCB0byBjb25zdHJ1Y3QgXFwnQmxvYlxcJzogVGhlIG9iamVjdCBtdXN0IGhhdmUgYSBjYWxsYWJsZSBAQGl0ZXJhdG9yIHByb3BlcnR5LicpXG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBvcHRpb25zICE9PSAnb2JqZWN0JyAmJiB0eXBlb2Ygb3B0aW9ucyAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRmFpbGVkIHRvIGNvbnN0cnVjdCBcXCdCbG9iXFwnOiBwYXJhbWV0ZXIgMiBjYW5ub3QgY29udmVydCB0byBkaWN0aW9uYXJ5LicpXG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMgPT09IG51bGwpIG9wdGlvbnMgPSB7fVxuXG4gICAgY29uc3QgZW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpXG4gICAgZm9yIChjb25zdCBlbGVtZW50IG9mIGJsb2JQYXJ0cykge1xuICAgICAgbGV0IHBhcnRcbiAgICAgIGlmIChBcnJheUJ1ZmZlci5pc1ZpZXcoZWxlbWVudCkpIHtcbiAgICAgICAgcGFydCA9IG5ldyBVaW50OEFycmF5KGVsZW1lbnQuYnVmZmVyLnNsaWNlKGVsZW1lbnQuYnl0ZU9mZnNldCwgZWxlbWVudC5ieXRlT2Zmc2V0ICsgZWxlbWVudC5ieXRlTGVuZ3RoKSlcbiAgICAgIH0gZWxzZSBpZiAoZWxlbWVudCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgICAgIHBhcnQgPSBuZXcgVWludDhBcnJheShlbGVtZW50LnNsaWNlKDApKVxuICAgICAgfSBlbHNlIGlmIChlbGVtZW50IGluc3RhbmNlb2YgQmxvYikge1xuICAgICAgICBwYXJ0ID0gZWxlbWVudFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFydCA9IGVuY29kZXIuZW5jb2RlKGAke2VsZW1lbnR9YClcbiAgICAgIH1cblxuICAgICAgdGhpcy4jc2l6ZSArPSBBcnJheUJ1ZmZlci5pc1ZpZXcocGFydCkgPyBwYXJ0LmJ5dGVMZW5ndGggOiBwYXJ0LnNpemVcbiAgICAgIHRoaXMuI3BhcnRzLnB1c2gocGFydClcbiAgICB9XG5cbiAgICB0aGlzLiNlbmRpbmdzID0gYCR7b3B0aW9ucy5lbmRpbmdzID09PSB1bmRlZmluZWQgPyAndHJhbnNwYXJlbnQnIDogb3B0aW9ucy5lbmRpbmdzfWBcbiAgICBjb25zdCB0eXBlID0gb3B0aW9ucy50eXBlID09PSB1bmRlZmluZWQgPyAnJyA6IFN0cmluZyhvcHRpb25zLnR5cGUpXG4gICAgdGhpcy4jdHlwZSA9IC9eW1xceDIwLVxceDdFXSokLy50ZXN0KHR5cGUpID8gdHlwZSA6ICcnXG4gIH1cblxuICAvKipcbiAgICogVGhlIEJsb2IgaW50ZXJmYWNlJ3Mgc2l6ZSBwcm9wZXJ0eSByZXR1cm5zIHRoZVxuICAgKiBzaXplIG9mIHRoZSBCbG9iIGluIGJ5dGVzLlxuICAgKi9cbiAgZ2V0IHNpemUgKCkge1xuICAgIHJldHVybiB0aGlzLiNzaXplXG4gIH1cblxuICAvKipcbiAgICogVGhlIHR5cGUgcHJvcGVydHkgb2YgYSBCbG9iIG9iamVjdCByZXR1cm5zIHRoZSBNSU1FIHR5cGUgb2YgdGhlIGZpbGUuXG4gICAqL1xuICBnZXQgdHlwZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuI3R5cGVcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgdGV4dCgpIG1ldGhvZCBpbiB0aGUgQmxvYiBpbnRlcmZhY2UgcmV0dXJucyBhIFByb21pc2VcbiAgICogdGhhdCByZXNvbHZlcyB3aXRoIGEgc3RyaW5nIGNvbnRhaW5pbmcgdGhlIGNvbnRlbnRzIG9mXG4gICAqIHRoZSBibG9iLCBpbnRlcnByZXRlZCBhcyBVVEYtOC5cbiAgICpcbiAgICogQHJldHVybiB7UHJvbWlzZTxzdHJpbmc+fVxuICAgKi9cbiAgYXN5bmMgdGV4dCAoKSB7XG4gICAgLy8gTW9yZSBvcHRpbWl6ZWQgdGhhbiB1c2luZyB0aGlzLmFycmF5QnVmZmVyKClcbiAgICAvLyB0aGF0IHJlcXVpcmVzIHR3aWNlIGFzIG11Y2ggcmFtXG4gICAgY29uc3QgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigpXG4gICAgbGV0IHN0ciA9ICcnXG4gICAgZm9yIGF3YWl0IChjb25zdCBwYXJ0IG9mIHRvSXRlcmF0b3IodGhpcy4jcGFydHMsIGZhbHNlKSkge1xuICAgICAgc3RyICs9IGRlY29kZXIuZGVjb2RlKHBhcnQsIHsgc3RyZWFtOiB0cnVlIH0pXG4gICAgfVxuICAgIC8vIFJlbWFpbmluZ1xuICAgIHN0ciArPSBkZWNvZGVyLmRlY29kZSgpXG4gICAgcmV0dXJuIHN0clxuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBhcnJheUJ1ZmZlcigpIG1ldGhvZCBpbiB0aGUgQmxvYiBpbnRlcmZhY2UgcmV0dXJucyBhXG4gICAqIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSBjb250ZW50cyBvZiB0aGUgYmxvYiBhc1xuICAgKiBiaW5hcnkgZGF0YSBjb250YWluZWQgaW4gYW4gQXJyYXlCdWZmZXIuXG4gICAqXG4gICAqIEByZXR1cm4ge1Byb21pc2U8QXJyYXlCdWZmZXI+fVxuICAgKi9cbiAgYXN5bmMgYXJyYXlCdWZmZXIgKCkge1xuICAgIC8vIEVhc2llciB3YXkuLi4gSnVzdCBhIHVubmVjZXNzYXJ5IG92ZXJoZWFkXG4gICAgLy8gY29uc3QgdmlldyA9IG5ldyBVaW50OEFycmF5KHRoaXMuc2l6ZSk7XG4gICAgLy8gYXdhaXQgdGhpcy5zdHJlYW0oKS5nZXRSZWFkZXIoe21vZGU6ICdieW9iJ30pLnJlYWQodmlldyk7XG4gICAgLy8gcmV0dXJuIHZpZXcuYnVmZmVyO1xuXG4gICAgY29uc3QgZGF0YSA9IG5ldyBVaW50OEFycmF5KHRoaXMuc2l6ZSlcbiAgICBsZXQgb2Zmc2V0ID0gMFxuICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgdG9JdGVyYXRvcih0aGlzLiNwYXJ0cywgZmFsc2UpKSB7XG4gICAgICBkYXRhLnNldChjaHVuaywgb2Zmc2V0KVxuICAgICAgb2Zmc2V0ICs9IGNodW5rLmxlbmd0aFxuICAgIH1cblxuICAgIHJldHVybiBkYXRhLmJ1ZmZlclxuICB9XG5cbiAgc3RyZWFtICgpIHtcbiAgICBjb25zdCBpdCA9IHRvSXRlcmF0b3IodGhpcy4jcGFydHMsIHRydWUpXG5cbiAgICByZXR1cm4gbmV3IGdsb2JhbFRoaXMuUmVhZGFibGVTdHJlYW0oe1xuICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgdHlwZTogJ2J5dGVzJyxcbiAgICAgIGFzeW5jIHB1bGwgKGN0cmwpIHtcbiAgICAgICAgY29uc3QgY2h1bmsgPSBhd2FpdCBpdC5uZXh0KClcbiAgICAgICAgY2h1bmsuZG9uZSA/IGN0cmwuY2xvc2UoKSA6IGN0cmwuZW5xdWV1ZShjaHVuay52YWx1ZSlcbiAgICAgIH0sXG5cbiAgICAgIGFzeW5jIGNhbmNlbCAoKSB7XG4gICAgICAgIGF3YWl0IGl0LnJldHVybigpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgQmxvYiBpbnRlcmZhY2UncyBzbGljZSgpIG1ldGhvZCBjcmVhdGVzIGFuZCByZXR1cm5zIGFcbiAgICogbmV3IEJsb2Igb2JqZWN0IHdoaWNoIGNvbnRhaW5zIGRhdGEgZnJvbSBhIHN1YnNldCBvZiB0aGVcbiAgICogYmxvYiBvbiB3aGljaCBpdCdzIGNhbGxlZC5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IFtzdGFydF1cbiAgICogQHBhcmFtIHtudW1iZXJ9IFtlbmRdXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbdHlwZV1cbiAgICovXG4gIHNsaWNlIChzdGFydCA9IDAsIGVuZCA9IHRoaXMuc2l6ZSwgdHlwZSA9ICcnKSB7XG4gICAgY29uc3QgeyBzaXplIH0gPSB0aGlzXG5cbiAgICBsZXQgcmVsYXRpdmVTdGFydCA9IHN0YXJ0IDwgMCA/IE1hdGgubWF4KHNpemUgKyBzdGFydCwgMCkgOiBNYXRoLm1pbihzdGFydCwgc2l6ZSlcbiAgICBsZXQgcmVsYXRpdmVFbmQgPSBlbmQgPCAwID8gTWF0aC5tYXgoc2l6ZSArIGVuZCwgMCkgOiBNYXRoLm1pbihlbmQsIHNpemUpXG5cbiAgICBjb25zdCBzcGFuID0gTWF0aC5tYXgocmVsYXRpdmVFbmQgLSByZWxhdGl2ZVN0YXJ0LCAwKVxuICAgIGNvbnN0IHBhcnRzID0gdGhpcy4jcGFydHNcbiAgICBjb25zdCBibG9iUGFydHMgPSBbXVxuICAgIGxldCBhZGRlZCA9IDBcblxuICAgIGZvciAoY29uc3QgcGFydCBvZiBwYXJ0cykge1xuICAgICAgLy8gZG9uJ3QgYWRkIHRoZSBvdmVyZmxvdyB0byBuZXcgYmxvYlBhcnRzXG4gICAgICBpZiAoYWRkZWQgPj0gc3Bhbikge1xuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjb25zdCBzaXplID0gQXJyYXlCdWZmZXIuaXNWaWV3KHBhcnQpID8gcGFydC5ieXRlTGVuZ3RoIDogcGFydC5zaXplXG4gICAgICBpZiAocmVsYXRpdmVTdGFydCAmJiBzaXplIDw9IHJlbGF0aXZlU3RhcnQpIHtcbiAgICAgICAgLy8gU2tpcCB0aGUgYmVnaW5uaW5nIGFuZCBjaGFuZ2UgdGhlIHJlbGF0aXZlXG4gICAgICAgIC8vIHN0YXJ0ICYgZW5kIHBvc2l0aW9uIGFzIHdlIHNraXAgdGhlIHVud2FudGVkIHBhcnRzXG4gICAgICAgIHJlbGF0aXZlU3RhcnQgLT0gc2l6ZVxuICAgICAgICByZWxhdGl2ZUVuZCAtPSBzaXplXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsZXQgY2h1bmtcbiAgICAgICAgaWYgKEFycmF5QnVmZmVyLmlzVmlldyhwYXJ0KSkge1xuICAgICAgICAgIGNodW5rID0gcGFydC5zdWJhcnJheShyZWxhdGl2ZVN0YXJ0LCBNYXRoLm1pbihzaXplLCByZWxhdGl2ZUVuZCkpXG4gICAgICAgICAgYWRkZWQgKz0gY2h1bmsuYnl0ZUxlbmd0aFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNodW5rID0gcGFydC5zbGljZShyZWxhdGl2ZVN0YXJ0LCBNYXRoLm1pbihzaXplLCByZWxhdGl2ZUVuZCkpXG4gICAgICAgICAgYWRkZWQgKz0gY2h1bmsuc2l6ZVxuICAgICAgICB9XG4gICAgICAgIHJlbGF0aXZlRW5kIC09IHNpemVcbiAgICAgICAgYmxvYlBhcnRzLnB1c2goY2h1bmspXG4gICAgICAgIHJlbGF0aXZlU3RhcnQgPSAwIC8vIEFsbCBuZXh0IHNlcXVlbnRpYWwgcGFydHMgc2hvdWxkIHN0YXJ0IGF0IDBcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW10sIHsgdHlwZTogU3RyaW5nKHR5cGUpLnRvTG93ZXJDYXNlKCkgfSlcbiAgICBibG9iLiNzaXplID0gc3BhblxuICAgIGJsb2IuI3BhcnRzID0gYmxvYlBhcnRzXG5cbiAgICByZXR1cm4gYmxvYlxuICB9XG5cbiAgZ2V0IFtTeW1ib2wudG9TdHJpbmdUYWddICgpIHtcbiAgICByZXR1cm4gJ0Jsb2InXG4gIH1cblxuICBzdGF0aWMgW1N5bWJvbC5oYXNJbnN0YW5jZV0gKG9iamVjdCkge1xuICAgIHJldHVybiAoXG4gICAgICBvYmplY3QgJiZcbiAgICAgIHR5cGVvZiBvYmplY3QgPT09ICdvYmplY3QnICYmXG4gICAgICB0eXBlb2Ygb2JqZWN0LmNvbnN0cnVjdG9yID09PSAnZnVuY3Rpb24nICYmXG4gICAgICAoXG4gICAgICAgIHR5cGVvZiBvYmplY3Quc3RyZWFtID09PSAnZnVuY3Rpb24nIHx8XG4gICAgICAgIHR5cGVvZiBvYmplY3QuYXJyYXlCdWZmZXIgPT09ICdmdW5jdGlvbidcbiAgICAgICkgJiZcbiAgICAgIC9eKEJsb2J8RmlsZSkkLy50ZXN0KG9iamVjdFtTeW1ib2wudG9TdHJpbmdUYWddKVxuICAgIClcbiAgfVxufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhfQmxvYi5wcm90b3R5cGUsIHtcbiAgc2l6ZTogeyBlbnVtZXJhYmxlOiB0cnVlIH0sXG4gIHR5cGU6IHsgZW51bWVyYWJsZTogdHJ1ZSB9LFxuICBzbGljZTogeyBlbnVtZXJhYmxlOiB0cnVlIH1cbn0pXG5cbi8qKiBAdHlwZSB7dHlwZW9mIGdsb2JhbFRoaXMuQmxvYn0gKi9cbmV4cG9ydCBjb25zdCBCbG9iID0gX0Jsb2JcbmV4cG9ydCBkZWZhdWx0IEJsb2JcbiIsICJpbXBvcnQgQmxvYiBmcm9tICcuL2luZGV4LmpzJ1xuXG5jb25zdCBfRmlsZSA9IGNsYXNzIEZpbGUgZXh0ZW5kcyBCbG9iIHtcbiAgI2xhc3RNb2RpZmllZCA9IDBcbiAgI25hbWUgPSAnJ1xuXG4gIC8qKlxuICAgKiBAcGFyYW0geypbXX0gZmlsZUJpdHNcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZpbGVOYW1lXG4gICAqIEBwYXJhbSB7e2xhc3RNb2RpZmllZD86IG51bWJlciwgdHlwZT86IHN0cmluZ319IG9wdGlvbnNcbiAgICovLy8gQHRzLWlnbm9yZVxuICBjb25zdHJ1Y3RvciAoZmlsZUJpdHMsIGZpbGVOYW1lLCBvcHRpb25zID0ge30pIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYEZhaWxlZCB0byBjb25zdHJ1Y3QgJ0ZpbGUnOiAyIGFyZ3VtZW50cyByZXF1aXJlZCwgYnV0IG9ubHkgJHthcmd1bWVudHMubGVuZ3RofSBwcmVzZW50LmApXG4gICAgfVxuICAgIHN1cGVyKGZpbGVCaXRzLCBvcHRpb25zKVxuXG4gICAgaWYgKG9wdGlvbnMgPT09IG51bGwpIG9wdGlvbnMgPSB7fVxuXG4gICAgLy8gU2ltdWxhdGUgV2ViSURMIHR5cGUgY2FzdGluZyBmb3IgTmFOIHZhbHVlIGluIGxhc3RNb2RpZmllZCBvcHRpb24uXG4gICAgY29uc3QgbGFzdE1vZGlmaWVkID0gb3B0aW9ucy5sYXN0TW9kaWZpZWQgPT09IHVuZGVmaW5lZCA/IERhdGUubm93KCkgOiBOdW1iZXIob3B0aW9ucy5sYXN0TW9kaWZpZWQpXG4gICAgaWYgKCFOdW1iZXIuaXNOYU4obGFzdE1vZGlmaWVkKSkge1xuICAgICAgdGhpcy4jbGFzdE1vZGlmaWVkID0gbGFzdE1vZGlmaWVkXG4gICAgfVxuXG4gICAgdGhpcy4jbmFtZSA9IFN0cmluZyhmaWxlTmFtZSlcbiAgfVxuXG4gIGdldCBuYW1lICgpIHtcbiAgICByZXR1cm4gdGhpcy4jbmFtZVxuICB9XG5cbiAgZ2V0IGxhc3RNb2RpZmllZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuI2xhc3RNb2RpZmllZFxuICB9XG5cbiAgZ2V0IFtTeW1ib2wudG9TdHJpbmdUYWddICgpIHtcbiAgICByZXR1cm4gJ0ZpbGUnXG4gIH1cblxuICBzdGF0aWMgW1N5bWJvbC5oYXNJbnN0YW5jZV0gKG9iamVjdCkge1xuICAgIHJldHVybiAhIW9iamVjdCAmJiBvYmplY3QgaW5zdGFuY2VvZiBCbG9iICYmXG4gICAgICAvXihGaWxlKSQvLnRlc3Qob2JqZWN0W1N5bWJvbC50b1N0cmluZ1RhZ10pXG4gIH1cbn1cblxuLyoqIEB0eXBlIHt0eXBlb2YgZ2xvYmFsVGhpcy5GaWxlfSAqLy8vIEB0cy1pZ25vcmVcbmV4cG9ydCBjb25zdCBGaWxlID0gX0ZpbGVcbmV4cG9ydCBkZWZhdWx0IEZpbGVcbiIsICIvKiEgZm9ybWRhdGEtcG9seWZpbGwuIE1JVCBMaWNlbnNlLiBKaW1teSBXXHUwMEU0cnRpbmcgPGh0dHBzOi8vamltbXkud2FydGluZy5zZS9vcGVuc291cmNlPiAqL1xuXG5pbXBvcnQgQyBmcm9tICdmZXRjaC1ibG9iJ1xuaW1wb3J0IEYgZnJvbSAnZmV0Y2gtYmxvYi9maWxlLmpzJ1xuXG52YXIge3RvU3RyaW5nVGFnOnQsaXRlcmF0b3I6aSxoYXNJbnN0YW5jZTpofT1TeW1ib2wsXG5yPU1hdGgucmFuZG9tLFxubT0nYXBwZW5kLHNldCxnZXQsZ2V0QWxsLGRlbGV0ZSxrZXlzLHZhbHVlcyxlbnRyaWVzLGZvckVhY2gsY29uc3RydWN0b3InLnNwbGl0KCcsJyksXG5mPShhLGIsYyk9PihhKz0nJywvXihCbG9ifEZpbGUpJC8udGVzdChiICYmIGJbdF0pP1soYz1jIT09dm9pZCAwP2MrJyc6Ylt0XT09J0ZpbGUnP2IubmFtZTonYmxvYicsYSksYi5uYW1lIT09Y3x8Ylt0XT09J2Jsb2InP25ldyBGKFtiXSxjLGIpOmJdOlthLGIrJyddKSxcbmU9KGMsZik9PihmP2M6Yy5yZXBsYWNlKC9cXHI/XFxufFxcci9nLCdcXHJcXG4nKSkucmVwbGFjZSgvXFxuL2csJyUwQScpLnJlcGxhY2UoL1xcci9nLCclMEQnKS5yZXBsYWNlKC9cIi9nLCclMjInKSxcbng9KG4sIGEsIGUpPT57aWYoYS5sZW5ndGg8ZSl7dGhyb3cgbmV3IFR5cGVFcnJvcihgRmFpbGVkIHRvIGV4ZWN1dGUgJyR7bn0nIG9uICdGb3JtRGF0YSc6ICR7ZX0gYXJndW1lbnRzIHJlcXVpcmVkLCBidXQgb25seSAke2EubGVuZ3RofSBwcmVzZW50LmApfX1cblxuZXhwb3J0IGNvbnN0IEZpbGUgPSBGXG5cbi8qKiBAdHlwZSB7dHlwZW9mIGdsb2JhbFRoaXMuRm9ybURhdGF9ICovXG5leHBvcnQgY29uc3QgRm9ybURhdGEgPSBjbGFzcyBGb3JtRGF0YSB7XG4jZD1bXTtcbmNvbnN0cnVjdG9yKC4uLmEpe2lmKGEubGVuZ3RoKXRocm93IG5ldyBUeXBlRXJyb3IoYEZhaWxlZCB0byBjb25zdHJ1Y3QgJ0Zvcm1EYXRhJzogcGFyYW1ldGVyIDEgaXMgbm90IG9mIHR5cGUgJ0hUTUxGb3JtRWxlbWVudCcuYCl9XG5nZXQgW3RdKCkge3JldHVybiAnRm9ybURhdGEnfVxuW2ldKCl7cmV0dXJuIHRoaXMuZW50cmllcygpfVxuc3RhdGljIFtoXShvKSB7cmV0dXJuIG8mJnR5cGVvZiBvPT09J29iamVjdCcmJm9bdF09PT0nRm9ybURhdGEnJiYhbS5zb21lKG09PnR5cGVvZiBvW21dIT0nZnVuY3Rpb24nKX1cbmFwcGVuZCguLi5hKXt4KCdhcHBlbmQnLGFyZ3VtZW50cywyKTt0aGlzLiNkLnB1c2goZiguLi5hKSl9XG5kZWxldGUoYSl7eCgnZGVsZXRlJyxhcmd1bWVudHMsMSk7YSs9Jyc7dGhpcy4jZD10aGlzLiNkLmZpbHRlcigoW2JdKT0+YiE9PWEpfVxuZ2V0KGEpe3goJ2dldCcsYXJndW1lbnRzLDEpO2ErPScnO2Zvcih2YXIgYj10aGlzLiNkLGw9Yi5sZW5ndGgsYz0wO2M8bDtjKyspaWYoYltjXVswXT09PWEpcmV0dXJuIGJbY11bMV07cmV0dXJuIG51bGx9XG5nZXRBbGwoYSxiKXt4KCdnZXRBbGwnLGFyZ3VtZW50cywxKTtiPVtdO2ErPScnO3RoaXMuI2QuZm9yRWFjaChjPT5jWzBdPT09YSYmYi5wdXNoKGNbMV0pKTtyZXR1cm4gYn1cbmhhcyhhKXt4KCdoYXMnLGFyZ3VtZW50cywxKTthKz0nJztyZXR1cm4gdGhpcy4jZC5zb21lKGI9PmJbMF09PT1hKX1cbmZvckVhY2goYSxiKXt4KCdmb3JFYWNoJyxhcmd1bWVudHMsMSk7Zm9yKHZhciBbYyxkXW9mIHRoaXMpYS5jYWxsKGIsZCxjLHRoaXMpfVxuc2V0KC4uLmEpe3goJ3NldCcsYXJndW1lbnRzLDIpO3ZhciBiPVtdLGM9ITA7YT1mKC4uLmEpO3RoaXMuI2QuZm9yRWFjaChkPT57ZFswXT09PWFbMF0/YyYmKGM9IWIucHVzaChhKSk6Yi5wdXNoKGQpfSk7YyYmYi5wdXNoKGEpO3RoaXMuI2Q9Yn1cbiplbnRyaWVzKCl7eWllbGQqdGhpcy4jZH1cbiprZXlzKCl7Zm9yKHZhclthXW9mIHRoaXMpeWllbGQgYX1cbip2YWx1ZXMoKXtmb3IodmFyWyxhXW9mIHRoaXMpeWllbGQgYX19XG5cbi8qKiBAcGFyYW0ge0Zvcm1EYXRhfSBGICovXG5leHBvcnQgZnVuY3Rpb24gZm9ybURhdGFUb0Jsb2IgKEYsQj1DKXtcbnZhciBiPWAke3IoKX0ke3IoKX1gLnJlcGxhY2UoL1xcLi9nLCAnJykuc2xpY2UoLTI4KS5wYWRTdGFydCgzMiwgJy0nKSxjPVtdLHA9YC0tJHtifVxcclxcbkNvbnRlbnQtRGlzcG9zaXRpb246IGZvcm0tZGF0YTsgbmFtZT1cImBcbkYuZm9yRWFjaCgodixuKT0+dHlwZW9mIHY9PSdzdHJpbmcnXG4/Yy5wdXNoKHArZShuKStgXCJcXHJcXG5cXHJcXG4ke3YucmVwbGFjZSgvXFxyKD8hXFxuKXwoPzwhXFxyKVxcbi9nLCAnXFxyXFxuJyl9XFxyXFxuYClcbjpjLnB1c2gocCtlKG4pK2BcIjsgZmlsZW5hbWU9XCIke2Uodi5uYW1lLCAxKX1cIlxcclxcbkNvbnRlbnQtVHlwZTogJHt2LnR5cGV8fFwiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtXCJ9XFxyXFxuXFxyXFxuYCwgdiwgJ1xcclxcbicpKVxuYy5wdXNoKGAtLSR7Yn0tLWApXG5yZXR1cm4gbmV3IEIoYyx7dHlwZTpcIm11bHRpcGFydC9mb3JtLWRhdGE7IGJvdW5kYXJ5PVwiK2J9KX1cbiIsICIvKiEgbm9kZS1kb21leGNlcHRpb24uIE1JVCBMaWNlbnNlLiBKaW1teSBXXHUwMEU0cnRpbmcgPGh0dHBzOi8vamltbXkud2FydGluZy5zZS9vcGVuc291cmNlPiAqL1xuXG5pZiAoIWdsb2JhbFRoaXMuRE9NRXhjZXB0aW9uKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBNZXNzYWdlQ2hhbm5lbCB9ID0gcmVxdWlyZSgnd29ya2VyX3RocmVhZHMnKSxcbiAgICBwb3J0ID0gbmV3IE1lc3NhZ2VDaGFubmVsKCkucG9ydDEsXG4gICAgYWIgPSBuZXcgQXJyYXlCdWZmZXIoKVxuICAgIHBvcnQucG9zdE1lc3NhZ2UoYWIsIFthYiwgYWJdKVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBlcnIuY29uc3RydWN0b3IubmFtZSA9PT0gJ0RPTUV4Y2VwdGlvbicgJiYgKFxuICAgICAgZ2xvYmFsVGhpcy5ET01FeGNlcHRpb24gPSBlcnIuY29uc3RydWN0b3JcbiAgICApXG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnbG9iYWxUaGlzLkRPTUV4Y2VwdGlvblxuIiwgImltcG9ydCB7IHN0YXRTeW5jLCBjcmVhdGVSZWFkU3RyZWFtLCBwcm9taXNlcyBhcyBmcyB9IGZyb20gJ25vZGU6ZnMnXG5pbXBvcnQgeyBiYXNlbmFtZSB9IGZyb20gJ25vZGU6cGF0aCdcbmltcG9ydCBET01FeGNlcHRpb24gZnJvbSAnbm9kZS1kb21leGNlcHRpb24nXG5cbmltcG9ydCBGaWxlIGZyb20gJy4vZmlsZS5qcydcbmltcG9ydCBCbG9iIGZyb20gJy4vaW5kZXguanMnXG5cbmNvbnN0IHsgc3RhdCB9ID0gZnNcblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gcGF0aCBmaWxlcGF0aCBvbiB0aGUgZGlza1xuICogQHBhcmFtIHtzdHJpbmd9IFt0eXBlXSBtaW1ldHlwZSB0byB1c2VcbiAqL1xuY29uc3QgYmxvYkZyb21TeW5jID0gKHBhdGgsIHR5cGUpID0+IGZyb21CbG9iKHN0YXRTeW5jKHBhdGgpLCBwYXRoLCB0eXBlKVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIGZpbGVwYXRoIG9uIHRoZSBkaXNrXG4gKiBAcGFyYW0ge3N0cmluZ30gW3R5cGVdIG1pbWV0eXBlIHRvIHVzZVxuICogQHJldHVybnMge1Byb21pc2U8QmxvYj59XG4gKi9cbmNvbnN0IGJsb2JGcm9tID0gKHBhdGgsIHR5cGUpID0+IHN0YXQocGF0aCkudGhlbihzdGF0ID0+IGZyb21CbG9iKHN0YXQsIHBhdGgsIHR5cGUpKVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIGZpbGVwYXRoIG9uIHRoZSBkaXNrXG4gKiBAcGFyYW0ge3N0cmluZ30gW3R5cGVdIG1pbWV0eXBlIHRvIHVzZVxuICogQHJldHVybnMge1Byb21pc2U8RmlsZT59XG4gKi9cbmNvbnN0IGZpbGVGcm9tID0gKHBhdGgsIHR5cGUpID0+IHN0YXQocGF0aCkudGhlbihzdGF0ID0+IGZyb21GaWxlKHN0YXQsIHBhdGgsIHR5cGUpKVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIGZpbGVwYXRoIG9uIHRoZSBkaXNrXG4gKiBAcGFyYW0ge3N0cmluZ30gW3R5cGVdIG1pbWV0eXBlIHRvIHVzZVxuICovXG5jb25zdCBmaWxlRnJvbVN5bmMgPSAocGF0aCwgdHlwZSkgPT4gZnJvbUZpbGUoc3RhdFN5bmMocGF0aCksIHBhdGgsIHR5cGUpXG5cbi8vIEB0cy1pZ25vcmVcbmNvbnN0IGZyb21CbG9iID0gKHN0YXQsIHBhdGgsIHR5cGUgPSAnJykgPT4gbmV3IEJsb2IoW25ldyBCbG9iRGF0YUl0ZW0oe1xuICBwYXRoLFxuICBzaXplOiBzdGF0LnNpemUsXG4gIGxhc3RNb2RpZmllZDogc3RhdC5tdGltZU1zLFxuICBzdGFydDogMFxufSldLCB7IHR5cGUgfSlcblxuLy8gQHRzLWlnbm9yZVxuY29uc3QgZnJvbUZpbGUgPSAoc3RhdCwgcGF0aCwgdHlwZSA9ICcnKSA9PiBuZXcgRmlsZShbbmV3IEJsb2JEYXRhSXRlbSh7XG4gIHBhdGgsXG4gIHNpemU6IHN0YXQuc2l6ZSxcbiAgbGFzdE1vZGlmaWVkOiBzdGF0Lm10aW1lTXMsXG4gIHN0YXJ0OiAwXG59KV0sIGJhc2VuYW1lKHBhdGgpLCB7IHR5cGUsIGxhc3RNb2RpZmllZDogc3RhdC5tdGltZU1zIH0pXG5cbi8qKlxuICogVGhpcyBpcyBhIGJsb2IgYmFja2VkIHVwIGJ5IGEgZmlsZSBvbiB0aGUgZGlza1xuICogd2l0aCBtaW5pdW0gcmVxdWlyZW1lbnQuIEl0cyB3cmFwcGVkIGFyb3VuZCBhIEJsb2IgYXMgYSBibG9iUGFydFxuICogc28geW91IGhhdmUgbm8gZGlyZWN0IGFjY2VzcyB0byB0aGlzLlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmNsYXNzIEJsb2JEYXRhSXRlbSB7XG4gICNwYXRoXG4gICNzdGFydFxuXG4gIGNvbnN0cnVjdG9yIChvcHRpb25zKSB7XG4gICAgdGhpcy4jcGF0aCA9IG9wdGlvbnMucGF0aFxuICAgIHRoaXMuI3N0YXJ0ID0gb3B0aW9ucy5zdGFydFxuICAgIHRoaXMuc2l6ZSA9IG9wdGlvbnMuc2l6ZVxuICAgIHRoaXMubGFzdE1vZGlmaWVkID0gb3B0aW9ucy5sYXN0TW9kaWZpZWRcbiAgfVxuXG4gIC8qKlxuICAgKiBTbGljaW5nIGFyZ3VtZW50cyBpcyBmaXJzdCB2YWxpZGF0ZWQgYW5kIGZvcm1hdHRlZFxuICAgKiB0byBub3QgYmUgb3V0IG9mIHJhbmdlIGJ5IEJsb2IucHJvdG90eXBlLnNsaWNlXG4gICAqL1xuICBzbGljZSAoc3RhcnQsIGVuZCkge1xuICAgIHJldHVybiBuZXcgQmxvYkRhdGFJdGVtKHtcbiAgICAgIHBhdGg6IHRoaXMuI3BhdGgsXG4gICAgICBsYXN0TW9kaWZpZWQ6IHRoaXMubGFzdE1vZGlmaWVkLFxuICAgICAgc2l6ZTogZW5kIC0gc3RhcnQsXG4gICAgICBzdGFydDogdGhpcy4jc3RhcnQgKyBzdGFydFxuICAgIH0pXG4gIH1cblxuICBhc3luYyAqIHN0cmVhbSAoKSB7XG4gICAgY29uc3QgeyBtdGltZU1zIH0gPSBhd2FpdCBzdGF0KHRoaXMuI3BhdGgpXG4gICAgaWYgKG10aW1lTXMgPiB0aGlzLmxhc3RNb2RpZmllZCkge1xuICAgICAgdGhyb3cgbmV3IERPTUV4Y2VwdGlvbignVGhlIHJlcXVlc3RlZCBmaWxlIGNvdWxkIG5vdCBiZSByZWFkLCB0eXBpY2FsbHkgZHVlIHRvIHBlcm1pc3Npb24gcHJvYmxlbXMgdGhhdCBoYXZlIG9jY3VycmVkIGFmdGVyIGEgcmVmZXJlbmNlIHRvIGEgZmlsZSB3YXMgYWNxdWlyZWQuJywgJ05vdFJlYWRhYmxlRXJyb3InKVxuICAgIH1cbiAgICB5aWVsZCAqIGNyZWF0ZVJlYWRTdHJlYW0odGhpcy4jcGF0aCwge1xuICAgICAgc3RhcnQ6IHRoaXMuI3N0YXJ0LFxuICAgICAgZW5kOiB0aGlzLiNzdGFydCArIHRoaXMuc2l6ZSAtIDFcbiAgICB9KVxuICB9XG5cbiAgZ2V0IFtTeW1ib2wudG9TdHJpbmdUYWddICgpIHtcbiAgICByZXR1cm4gJ0Jsb2InXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgYmxvYkZyb21TeW5jXG5leHBvcnQgeyBGaWxlLCBCbG9iLCBibG9iRnJvbSwgYmxvYkZyb21TeW5jLCBmaWxlRnJvbSwgZmlsZUZyb21TeW5jIH1cbiIsICJpbXBvcnQge0ZpbGV9IGZyb20gJ2ZldGNoLWJsb2IvZnJvbS5qcyc7XG5pbXBvcnQge0Zvcm1EYXRhfSBmcm9tICdmb3JtZGF0YS1wb2x5ZmlsbC9lc20ubWluLmpzJztcblxubGV0IHMgPSAwO1xuY29uc3QgUyA9IHtcblx0U1RBUlRfQk9VTkRBUlk6IHMrKyxcblx0SEVBREVSX0ZJRUxEX1NUQVJUOiBzKyssXG5cdEhFQURFUl9GSUVMRDogcysrLFxuXHRIRUFERVJfVkFMVUVfU1RBUlQ6IHMrKyxcblx0SEVBREVSX1ZBTFVFOiBzKyssXG5cdEhFQURFUl9WQUxVRV9BTE1PU1RfRE9ORTogcysrLFxuXHRIRUFERVJTX0FMTU9TVF9ET05FOiBzKyssXG5cdFBBUlRfREFUQV9TVEFSVDogcysrLFxuXHRQQVJUX0RBVEE6IHMrKyxcblx0RU5EOiBzKytcbn07XG5cbmxldCBmID0gMTtcbmNvbnN0IEYgPSB7XG5cdFBBUlRfQk9VTkRBUlk6IGYsXG5cdExBU1RfQk9VTkRBUlk6IGYgKj0gMlxufTtcblxuY29uc3QgTEYgPSAxMDtcbmNvbnN0IENSID0gMTM7XG5jb25zdCBTUEFDRSA9IDMyO1xuY29uc3QgSFlQSEVOID0gNDU7XG5jb25zdCBDT0xPTiA9IDU4O1xuY29uc3QgQSA9IDk3O1xuY29uc3QgWiA9IDEyMjtcblxuY29uc3QgbG93ZXIgPSBjID0+IGMgfCAweDIwO1xuXG5jb25zdCBub29wID0gKCkgPT4ge307XG5cbmNsYXNzIE11bHRpcGFydFBhcnNlciB7XG5cdC8qKlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gYm91bmRhcnlcblx0ICovXG5cdGNvbnN0cnVjdG9yKGJvdW5kYXJ5KSB7XG5cdFx0dGhpcy5pbmRleCA9IDA7XG5cdFx0dGhpcy5mbGFncyA9IDA7XG5cblx0XHR0aGlzLm9uSGVhZGVyRW5kID0gbm9vcDtcblx0XHR0aGlzLm9uSGVhZGVyRmllbGQgPSBub29wO1xuXHRcdHRoaXMub25IZWFkZXJzRW5kID0gbm9vcDtcblx0XHR0aGlzLm9uSGVhZGVyVmFsdWUgPSBub29wO1xuXHRcdHRoaXMub25QYXJ0QmVnaW4gPSBub29wO1xuXHRcdHRoaXMub25QYXJ0RGF0YSA9IG5vb3A7XG5cdFx0dGhpcy5vblBhcnRFbmQgPSBub29wO1xuXG5cdFx0dGhpcy5ib3VuZGFyeUNoYXJzID0ge307XG5cblx0XHRib3VuZGFyeSA9ICdcXHJcXG4tLScgKyBib3VuZGFyeTtcblx0XHRjb25zdCB1aThhID0gbmV3IFVpbnQ4QXJyYXkoYm91bmRhcnkubGVuZ3RoKTtcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGJvdW5kYXJ5Lmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR1aThhW2ldID0gYm91bmRhcnkuY2hhckNvZGVBdChpKTtcblx0XHRcdHRoaXMuYm91bmRhcnlDaGFyc1t1aThhW2ldXSA9IHRydWU7XG5cdFx0fVxuXG5cdFx0dGhpcy5ib3VuZGFyeSA9IHVpOGE7XG5cdFx0dGhpcy5sb29rYmVoaW5kID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5ib3VuZGFyeS5sZW5ndGggKyA4KTtcblx0XHR0aGlzLnN0YXRlID0gUy5TVEFSVF9CT1VOREFSWTtcblx0fVxuXG5cdC8qKlxuXHQgKiBAcGFyYW0ge1VpbnQ4QXJyYXl9IGRhdGFcblx0ICovXG5cdHdyaXRlKGRhdGEpIHtcblx0XHRsZXQgaSA9IDA7XG5cdFx0Y29uc3QgbGVuZ3RoXyA9IGRhdGEubGVuZ3RoO1xuXHRcdGxldCBwcmV2aW91c0luZGV4ID0gdGhpcy5pbmRleDtcblx0XHRsZXQge2xvb2tiZWhpbmQsIGJvdW5kYXJ5LCBib3VuZGFyeUNoYXJzLCBpbmRleCwgc3RhdGUsIGZsYWdzfSA9IHRoaXM7XG5cdFx0Y29uc3QgYm91bmRhcnlMZW5ndGggPSB0aGlzLmJvdW5kYXJ5Lmxlbmd0aDtcblx0XHRjb25zdCBib3VuZGFyeUVuZCA9IGJvdW5kYXJ5TGVuZ3RoIC0gMTtcblx0XHRjb25zdCBidWZmZXJMZW5ndGggPSBkYXRhLmxlbmd0aDtcblx0XHRsZXQgYztcblx0XHRsZXQgY2w7XG5cblx0XHRjb25zdCBtYXJrID0gbmFtZSA9PiB7XG5cdFx0XHR0aGlzW25hbWUgKyAnTWFyayddID0gaTtcblx0XHR9O1xuXG5cdFx0Y29uc3QgY2xlYXIgPSBuYW1lID0+IHtcblx0XHRcdGRlbGV0ZSB0aGlzW25hbWUgKyAnTWFyayddO1xuXHRcdH07XG5cblx0XHRjb25zdCBjYWxsYmFjayA9IChjYWxsYmFja1N5bWJvbCwgc3RhcnQsIGVuZCwgdWk4YSkgPT4ge1xuXHRcdFx0aWYgKHN0YXJ0ID09PSB1bmRlZmluZWQgfHwgc3RhcnQgIT09IGVuZCkge1xuXHRcdFx0XHR0aGlzW2NhbGxiYWNrU3ltYm9sXSh1aThhICYmIHVpOGEuc3ViYXJyYXkoc3RhcnQsIGVuZCkpO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRjb25zdCBkYXRhQ2FsbGJhY2sgPSAobmFtZSwgY2xlYXIpID0+IHtcblx0XHRcdGNvbnN0IG1hcmtTeW1ib2wgPSBuYW1lICsgJ01hcmsnO1xuXHRcdFx0aWYgKCEobWFya1N5bWJvbCBpbiB0aGlzKSkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGlmIChjbGVhcikge1xuXHRcdFx0XHRjYWxsYmFjayhuYW1lLCB0aGlzW21hcmtTeW1ib2xdLCBpLCBkYXRhKTtcblx0XHRcdFx0ZGVsZXRlIHRoaXNbbWFya1N5bWJvbF07XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjYWxsYmFjayhuYW1lLCB0aGlzW21hcmtTeW1ib2xdLCBkYXRhLmxlbmd0aCwgZGF0YSk7XG5cdFx0XHRcdHRoaXNbbWFya1N5bWJvbF0gPSAwO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoXzsgaSsrKSB7XG5cdFx0XHRjID0gZGF0YVtpXTtcblxuXHRcdFx0c3dpdGNoIChzdGF0ZSkge1xuXHRcdFx0XHRjYXNlIFMuU1RBUlRfQk9VTkRBUlk6XG5cdFx0XHRcdFx0aWYgKGluZGV4ID09PSBib3VuZGFyeS5sZW5ndGggLSAyKSB7XG5cdFx0XHRcdFx0XHRpZiAoYyA9PT0gSFlQSEVOKSB7XG5cdFx0XHRcdFx0XHRcdGZsYWdzIHw9IEYuTEFTVF9CT1VOREFSWTtcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoYyAhPT0gQ1IpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRpbmRleCsrO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChpbmRleCAtIDEgPT09IGJvdW5kYXJ5Lmxlbmd0aCAtIDIpIHtcblx0XHRcdFx0XHRcdGlmIChmbGFncyAmIEYuTEFTVF9CT1VOREFSWSAmJiBjID09PSBIWVBIRU4pIHtcblx0XHRcdFx0XHRcdFx0c3RhdGUgPSBTLkVORDtcblx0XHRcdFx0XHRcdFx0ZmxhZ3MgPSAwO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmICghKGZsYWdzICYgRi5MQVNUX0JPVU5EQVJZKSAmJiBjID09PSBMRikge1xuXHRcdFx0XHRcdFx0XHRpbmRleCA9IDA7XG5cdFx0XHRcdFx0XHRcdGNhbGxiYWNrKCdvblBhcnRCZWdpbicpO1xuXHRcdFx0XHRcdFx0XHRzdGF0ZSA9IFMuSEVBREVSX0ZJRUxEX1NUQVJUO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAoYyAhPT0gYm91bmRhcnlbaW5kZXggKyAyXSkge1xuXHRcdFx0XHRcdFx0aW5kZXggPSAtMjtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAoYyA9PT0gYm91bmRhcnlbaW5kZXggKyAyXSkge1xuXHRcdFx0XHRcdFx0aW5kZXgrKztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBTLkhFQURFUl9GSUVMRF9TVEFSVDpcblx0XHRcdFx0XHRzdGF0ZSA9IFMuSEVBREVSX0ZJRUxEO1xuXHRcdFx0XHRcdG1hcmsoJ29uSGVhZGVyRmllbGQnKTtcblx0XHRcdFx0XHRpbmRleCA9IDA7XG5cdFx0XHRcdFx0Ly8gZmFsbHMgdGhyb3VnaFxuXHRcdFx0XHRjYXNlIFMuSEVBREVSX0ZJRUxEOlxuXHRcdFx0XHRcdGlmIChjID09PSBDUikge1xuXHRcdFx0XHRcdFx0Y2xlYXIoJ29uSGVhZGVyRmllbGQnKTtcblx0XHRcdFx0XHRcdHN0YXRlID0gUy5IRUFERVJTX0FMTU9TVF9ET05FO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aW5kZXgrKztcblx0XHRcdFx0XHRpZiAoYyA9PT0gSFlQSEVOKSB7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAoYyA9PT0gQ09MT04pIHtcblx0XHRcdFx0XHRcdGlmIChpbmRleCA9PT0gMSkge1xuXHRcdFx0XHRcdFx0XHQvLyBlbXB0eSBoZWFkZXIgZmllbGRcblx0XHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRkYXRhQ2FsbGJhY2soJ29uSGVhZGVyRmllbGQnLCB0cnVlKTtcblx0XHRcdFx0XHRcdHN0YXRlID0gUy5IRUFERVJfVkFMVUVfU1RBUlQ7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRjbCA9IGxvd2VyKGMpO1xuXHRcdFx0XHRcdGlmIChjbCA8IEEgfHwgY2wgPiBaKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgUy5IRUFERVJfVkFMVUVfU1RBUlQ6XG5cdFx0XHRcdFx0aWYgKGMgPT09IFNQQUNFKSB7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRtYXJrKCdvbkhlYWRlclZhbHVlJyk7XG5cdFx0XHRcdFx0c3RhdGUgPSBTLkhFQURFUl9WQUxVRTtcblx0XHRcdFx0XHQvLyBmYWxscyB0aHJvdWdoXG5cdFx0XHRcdGNhc2UgUy5IRUFERVJfVkFMVUU6XG5cdFx0XHRcdFx0aWYgKGMgPT09IENSKSB7XG5cdFx0XHRcdFx0XHRkYXRhQ2FsbGJhY2soJ29uSGVhZGVyVmFsdWUnLCB0cnVlKTtcblx0XHRcdFx0XHRcdGNhbGxiYWNrKCdvbkhlYWRlckVuZCcpO1xuXHRcdFx0XHRcdFx0c3RhdGUgPSBTLkhFQURFUl9WQUxVRV9BTE1PU1RfRE9ORTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBTLkhFQURFUl9WQUxVRV9BTE1PU1RfRE9ORTpcblx0XHRcdFx0XHRpZiAoYyAhPT0gTEYpIHtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRzdGF0ZSA9IFMuSEVBREVSX0ZJRUxEX1NUQVJUO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFMuSEVBREVSU19BTE1PU1RfRE9ORTpcblx0XHRcdFx0XHRpZiAoYyAhPT0gTEYpIHtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRjYWxsYmFjaygnb25IZWFkZXJzRW5kJyk7XG5cdFx0XHRcdFx0c3RhdGUgPSBTLlBBUlRfREFUQV9TVEFSVDtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBTLlBBUlRfREFUQV9TVEFSVDpcblx0XHRcdFx0XHRzdGF0ZSA9IFMuUEFSVF9EQVRBO1xuXHRcdFx0XHRcdG1hcmsoJ29uUGFydERhdGEnKTtcblx0XHRcdFx0XHQvLyBmYWxscyB0aHJvdWdoXG5cdFx0XHRcdGNhc2UgUy5QQVJUX0RBVEE6XG5cdFx0XHRcdFx0cHJldmlvdXNJbmRleCA9IGluZGV4O1xuXG5cdFx0XHRcdFx0aWYgKGluZGV4ID09PSAwKSB7XG5cdFx0XHRcdFx0XHQvLyBib3llci1tb29yZSBkZXJyaXZlZCBhbGdvcml0aG0gdG8gc2FmZWx5IHNraXAgbm9uLWJvdW5kYXJ5IGRhdGFcblx0XHRcdFx0XHRcdGkgKz0gYm91bmRhcnlFbmQ7XG5cdFx0XHRcdFx0XHR3aGlsZSAoaSA8IGJ1ZmZlckxlbmd0aCAmJiAhKGRhdGFbaV0gaW4gYm91bmRhcnlDaGFycykpIHtcblx0XHRcdFx0XHRcdFx0aSArPSBib3VuZGFyeUxlbmd0aDtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0aSAtPSBib3VuZGFyeUVuZDtcblx0XHRcdFx0XHRcdGMgPSBkYXRhW2ldO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmIChpbmRleCA8IGJvdW5kYXJ5Lmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0aWYgKGJvdW5kYXJ5W2luZGV4XSA9PT0gYykge1xuXHRcdFx0XHRcdFx0XHRpZiAoaW5kZXggPT09IDApIHtcblx0XHRcdFx0XHRcdFx0XHRkYXRhQ2FsbGJhY2soJ29uUGFydERhdGEnLCB0cnVlKTtcblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdGluZGV4Kys7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRpbmRleCA9IDA7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChpbmRleCA9PT0gYm91bmRhcnkubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRpbmRleCsrO1xuXHRcdFx0XHRcdFx0aWYgKGMgPT09IENSKSB7XG5cdFx0XHRcdFx0XHRcdC8vIENSID0gcGFydCBib3VuZGFyeVxuXHRcdFx0XHRcdFx0XHRmbGFncyB8PSBGLlBBUlRfQk9VTkRBUlk7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGMgPT09IEhZUEhFTikge1xuXHRcdFx0XHRcdFx0XHQvLyBIWVBIRU4gPSBlbmQgYm91bmRhcnlcblx0XHRcdFx0XHRcdFx0ZmxhZ3MgfD0gRi5MQVNUX0JPVU5EQVJZO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0aW5kZXggPSAwO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gZWxzZSBpZiAoaW5kZXggLSAxID09PSBib3VuZGFyeS5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdGlmIChmbGFncyAmIEYuUEFSVF9CT1VOREFSWSkge1xuXHRcdFx0XHRcdFx0XHRpbmRleCA9IDA7XG5cdFx0XHRcdFx0XHRcdGlmIChjID09PSBMRikge1xuXHRcdFx0XHRcdFx0XHRcdC8vIHVuc2V0IHRoZSBQQVJUX0JPVU5EQVJZIGZsYWdcblx0XHRcdFx0XHRcdFx0XHRmbGFncyAmPSB+Ri5QQVJUX0JPVU5EQVJZO1xuXHRcdFx0XHRcdFx0XHRcdGNhbGxiYWNrKCdvblBhcnRFbmQnKTtcblx0XHRcdFx0XHRcdFx0XHRjYWxsYmFjaygnb25QYXJ0QmVnaW4nKTtcblx0XHRcdFx0XHRcdFx0XHRzdGF0ZSA9IFMuSEVBREVSX0ZJRUxEX1NUQVJUO1xuXHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGZsYWdzICYgRi5MQVNUX0JPVU5EQVJZKSB7XG5cdFx0XHRcdFx0XHRcdGlmIChjID09PSBIWVBIRU4pIHtcblx0XHRcdFx0XHRcdFx0XHRjYWxsYmFjaygnb25QYXJ0RW5kJyk7XG5cdFx0XHRcdFx0XHRcdFx0c3RhdGUgPSBTLkVORDtcblx0XHRcdFx0XHRcdFx0XHRmbGFncyA9IDA7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0aW5kZXggPSAwO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRpbmRleCA9IDA7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKGluZGV4ID4gMCkge1xuXHRcdFx0XHRcdFx0Ly8gd2hlbiBtYXRjaGluZyBhIHBvc3NpYmxlIGJvdW5kYXJ5LCBrZWVwIGEgbG9va2JlaGluZCByZWZlcmVuY2Vcblx0XHRcdFx0XHRcdC8vIGluIGNhc2UgaXQgdHVybnMgb3V0IHRvIGJlIGEgZmFsc2UgbGVhZFxuXHRcdFx0XHRcdFx0bG9va2JlaGluZFtpbmRleCAtIDFdID0gYztcblx0XHRcdFx0XHR9IGVsc2UgaWYgKHByZXZpb3VzSW5kZXggPiAwKSB7XG5cdFx0XHRcdFx0XHQvLyBpZiBvdXIgYm91bmRhcnkgdHVybmVkIG91dCB0byBiZSBydWJiaXNoLCB0aGUgY2FwdHVyZWQgbG9va2JlaGluZFxuXHRcdFx0XHRcdFx0Ly8gYmVsb25ncyB0byBwYXJ0RGF0YVxuXHRcdFx0XHRcdFx0Y29uc3QgX2xvb2tiZWhpbmQgPSBuZXcgVWludDhBcnJheShsb29rYmVoaW5kLmJ1ZmZlciwgbG9va2JlaGluZC5ieXRlT2Zmc2V0LCBsb29rYmVoaW5kLmJ5dGVMZW5ndGgpO1xuXHRcdFx0XHRcdFx0Y2FsbGJhY2soJ29uUGFydERhdGEnLCAwLCBwcmV2aW91c0luZGV4LCBfbG9va2JlaGluZCk7XG5cdFx0XHRcdFx0XHRwcmV2aW91c0luZGV4ID0gMDtcblx0XHRcdFx0XHRcdG1hcmsoJ29uUGFydERhdGEnKTtcblxuXHRcdFx0XHRcdFx0Ly8gcmVjb25zaWRlciB0aGUgY3VycmVudCBjaGFyYWN0ZXIgZXZlbiBzbyBpdCBpbnRlcnJ1cHRlZCB0aGUgc2VxdWVuY2Vcblx0XHRcdFx0XHRcdC8vIGl0IGNvdWxkIGJlIHRoZSBiZWdpbm5pbmcgb2YgYSBuZXcgc2VxdWVuY2Vcblx0XHRcdFx0XHRcdGktLTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBTLkVORDpcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoYFVuZXhwZWN0ZWQgc3RhdGUgZW50ZXJlZDogJHtzdGF0ZX1gKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRkYXRhQ2FsbGJhY2soJ29uSGVhZGVyRmllbGQnKTtcblx0XHRkYXRhQ2FsbGJhY2soJ29uSGVhZGVyVmFsdWUnKTtcblx0XHRkYXRhQ2FsbGJhY2soJ29uUGFydERhdGEnKTtcblxuXHRcdC8vIFVwZGF0ZSBwcm9wZXJ0aWVzIGZvciB0aGUgbmV4dCBjYWxsXG5cdFx0dGhpcy5pbmRleCA9IGluZGV4O1xuXHRcdHRoaXMuc3RhdGUgPSBzdGF0ZTtcblx0XHR0aGlzLmZsYWdzID0gZmxhZ3M7XG5cdH1cblxuXHRlbmQoKSB7XG5cdFx0aWYgKCh0aGlzLnN0YXRlID09PSBTLkhFQURFUl9GSUVMRF9TVEFSVCAmJiB0aGlzLmluZGV4ID09PSAwKSB8fFxuXHRcdFx0KHRoaXMuc3RhdGUgPT09IFMuUEFSVF9EQVRBICYmIHRoaXMuaW5kZXggPT09IHRoaXMuYm91bmRhcnkubGVuZ3RoKSkge1xuXHRcdFx0dGhpcy5vblBhcnRFbmQoKTtcblx0XHR9IGVsc2UgaWYgKHRoaXMuc3RhdGUgIT09IFMuRU5EKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ011bHRpcGFydFBhcnNlci5lbmQoKTogc3RyZWFtIGVuZGVkIHVuZXhwZWN0ZWRseScpO1xuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBfZmlsZU5hbWUoaGVhZGVyVmFsdWUpIHtcblx0Ly8gbWF0Y2hlcyBlaXRoZXIgYSBxdW90ZWQtc3RyaW5nIG9yIGEgdG9rZW4gKFJGQyAyNjE2IHNlY3Rpb24gMTkuNS4xKVxuXHRjb25zdCBtID0gaGVhZGVyVmFsdWUubWF0Y2goL1xcYmZpbGVuYW1lPShcIiguKj8pXCJ8KFteKCk8PkAsOzpcXFxcXCIvW1xcXT89e31cXHNcXHRdKykpKCR8O1xccykvaSk7XG5cdGlmICghbSkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdGNvbnN0IG1hdGNoID0gbVsyXSB8fCBtWzNdIHx8ICcnO1xuXHRsZXQgZmlsZW5hbWUgPSBtYXRjaC5zbGljZShtYXRjaC5sYXN0SW5kZXhPZignXFxcXCcpICsgMSk7XG5cdGZpbGVuYW1lID0gZmlsZW5hbWUucmVwbGFjZSgvJTIyL2csICdcIicpO1xuXHRmaWxlbmFtZSA9IGZpbGVuYW1lLnJlcGxhY2UoLyYjKFxcZHs0fSk7L2csIChtLCBjb2RlKSA9PiB7XG5cdFx0cmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoY29kZSk7XG5cdH0pO1xuXHRyZXR1cm4gZmlsZW5hbWU7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB0b0Zvcm1EYXRhKEJvZHksIGN0KSB7XG5cdGlmICghL211bHRpcGFydC9pLnRlc3QoY3QpKSB7XG5cdFx0dGhyb3cgbmV3IFR5cGVFcnJvcignRmFpbGVkIHRvIGZldGNoJyk7XG5cdH1cblxuXHRjb25zdCBtID0gY3QubWF0Y2goL2JvdW5kYXJ5PSg/OlwiKFteXCJdKylcInwoW147XSspKS9pKTtcblxuXHRpZiAoIW0pIHtcblx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdubyBvciBiYWQgY29udGVudC10eXBlIGhlYWRlciwgbm8gbXVsdGlwYXJ0IGJvdW5kYXJ5Jyk7XG5cdH1cblxuXHRjb25zdCBwYXJzZXIgPSBuZXcgTXVsdGlwYXJ0UGFyc2VyKG1bMV0gfHwgbVsyXSk7XG5cblx0bGV0IGhlYWRlckZpZWxkO1xuXHRsZXQgaGVhZGVyVmFsdWU7XG5cdGxldCBlbnRyeVZhbHVlO1xuXHRsZXQgZW50cnlOYW1lO1xuXHRsZXQgY29udGVudFR5cGU7XG5cdGxldCBmaWxlbmFtZTtcblx0Y29uc3QgZW50cnlDaHVua3MgPSBbXTtcblx0Y29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcblxuXHRjb25zdCBvblBhcnREYXRhID0gdWk4YSA9PiB7XG5cdFx0ZW50cnlWYWx1ZSArPSBkZWNvZGVyLmRlY29kZSh1aThhLCB7c3RyZWFtOiB0cnVlfSk7XG5cdH07XG5cblx0Y29uc3QgYXBwZW5kVG9GaWxlID0gdWk4YSA9PiB7XG5cdFx0ZW50cnlDaHVua3MucHVzaCh1aThhKTtcblx0fTtcblxuXHRjb25zdCBhcHBlbmRGaWxlVG9Gb3JtRGF0YSA9ICgpID0+IHtcblx0XHRjb25zdCBmaWxlID0gbmV3IEZpbGUoZW50cnlDaHVua3MsIGZpbGVuYW1lLCB7dHlwZTogY29udGVudFR5cGV9KTtcblx0XHRmb3JtRGF0YS5hcHBlbmQoZW50cnlOYW1lLCBmaWxlKTtcblx0fTtcblxuXHRjb25zdCBhcHBlbmRFbnRyeVRvRm9ybURhdGEgPSAoKSA9PiB7XG5cdFx0Zm9ybURhdGEuYXBwZW5kKGVudHJ5TmFtZSwgZW50cnlWYWx1ZSk7XG5cdH07XG5cblx0Y29uc3QgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigndXRmLTgnKTtcblx0ZGVjb2Rlci5kZWNvZGUoKTtcblxuXHRwYXJzZXIub25QYXJ0QmVnaW4gPSBmdW5jdGlvbiAoKSB7XG5cdFx0cGFyc2VyLm9uUGFydERhdGEgPSBvblBhcnREYXRhO1xuXHRcdHBhcnNlci5vblBhcnRFbmQgPSBhcHBlbmRFbnRyeVRvRm9ybURhdGE7XG5cblx0XHRoZWFkZXJGaWVsZCA9ICcnO1xuXHRcdGhlYWRlclZhbHVlID0gJyc7XG5cdFx0ZW50cnlWYWx1ZSA9ICcnO1xuXHRcdGVudHJ5TmFtZSA9ICcnO1xuXHRcdGNvbnRlbnRUeXBlID0gJyc7XG5cdFx0ZmlsZW5hbWUgPSBudWxsO1xuXHRcdGVudHJ5Q2h1bmtzLmxlbmd0aCA9IDA7XG5cdH07XG5cblx0cGFyc2VyLm9uSGVhZGVyRmllbGQgPSBmdW5jdGlvbiAodWk4YSkge1xuXHRcdGhlYWRlckZpZWxkICs9IGRlY29kZXIuZGVjb2RlKHVpOGEsIHtzdHJlYW06IHRydWV9KTtcblx0fTtcblxuXHRwYXJzZXIub25IZWFkZXJWYWx1ZSA9IGZ1bmN0aW9uICh1aThhKSB7XG5cdFx0aGVhZGVyVmFsdWUgKz0gZGVjb2Rlci5kZWNvZGUodWk4YSwge3N0cmVhbTogdHJ1ZX0pO1xuXHR9O1xuXG5cdHBhcnNlci5vbkhlYWRlckVuZCA9IGZ1bmN0aW9uICgpIHtcblx0XHRoZWFkZXJWYWx1ZSArPSBkZWNvZGVyLmRlY29kZSgpO1xuXHRcdGhlYWRlckZpZWxkID0gaGVhZGVyRmllbGQudG9Mb3dlckNhc2UoKTtcblxuXHRcdGlmIChoZWFkZXJGaWVsZCA9PT0gJ2NvbnRlbnQtZGlzcG9zaXRpb24nKSB7XG5cdFx0XHQvLyBtYXRjaGVzIGVpdGhlciBhIHF1b3RlZC1zdHJpbmcgb3IgYSB0b2tlbiAoUkZDIDI2MTYgc2VjdGlvbiAxOS41LjEpXG5cdFx0XHRjb25zdCBtID0gaGVhZGVyVmFsdWUubWF0Y2goL1xcYm5hbWU9KFwiKFteXCJdKilcInwoW14oKTw+QCw7OlxcXFxcIi9bXFxdPz17fVxcc1xcdF0rKSkvaSk7XG5cblx0XHRcdGlmIChtKSB7XG5cdFx0XHRcdGVudHJ5TmFtZSA9IG1bMl0gfHwgbVszXSB8fCAnJztcblx0XHRcdH1cblxuXHRcdFx0ZmlsZW5hbWUgPSBfZmlsZU5hbWUoaGVhZGVyVmFsdWUpO1xuXG5cdFx0XHRpZiAoZmlsZW5hbWUpIHtcblx0XHRcdFx0cGFyc2VyLm9uUGFydERhdGEgPSBhcHBlbmRUb0ZpbGU7XG5cdFx0XHRcdHBhcnNlci5vblBhcnRFbmQgPSBhcHBlbmRGaWxlVG9Gb3JtRGF0YTtcblx0XHRcdH1cblx0XHR9IGVsc2UgaWYgKGhlYWRlckZpZWxkID09PSAnY29udGVudC10eXBlJykge1xuXHRcdFx0Y29udGVudFR5cGUgPSBoZWFkZXJWYWx1ZTtcblx0XHR9XG5cblx0XHRoZWFkZXJWYWx1ZSA9ICcnO1xuXHRcdGhlYWRlckZpZWxkID0gJyc7XG5cdH07XG5cblx0Zm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBCb2R5KSB7XG5cdFx0cGFyc2VyLndyaXRlKGNodW5rKTtcblx0fVxuXG5cdHBhcnNlci5lbmQoKTtcblxuXHRyZXR1cm4gZm9ybURhdGE7XG59XG4iLCAibW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgLyogVGhlIGxvY2FsIGZpbGUgaGVhZGVyICovXG4gICAgTE9DSERSICAgICAgICAgICA6IDMwLCAvLyBMT0MgaGVhZGVyIHNpemVcbiAgICBMT0NTSUcgICAgICAgICAgIDogMHgwNDAzNGI1MCwgLy8gXCJQS1xcMDAzXFwwMDRcIlxuICAgIExPQ1ZFUiAgICAgICAgICAgOiA0LFx0Ly8gdmVyc2lvbiBuZWVkZWQgdG8gZXh0cmFjdFxuICAgIExPQ0ZMRyAgICAgICAgICAgOiA2LCAvLyBnZW5lcmFsIHB1cnBvc2UgYml0IGZsYWdcbiAgICBMT0NIT1cgICAgICAgICAgIDogOCwgLy8gY29tcHJlc3Npb24gbWV0aG9kXG4gICAgTE9DVElNICAgICAgICAgICA6IDEwLCAvLyBtb2RpZmljYXRpb24gdGltZSAoMiBieXRlcyB0aW1lLCAyIGJ5dGVzIGRhdGUpXG4gICAgTE9DQ1JDICAgICAgICAgICA6IDE0LCAvLyB1bmNvbXByZXNzZWQgZmlsZSBjcmMtMzIgdmFsdWVcbiAgICBMT0NTSVogICAgICAgICAgIDogMTgsIC8vIGNvbXByZXNzZWQgc2l6ZVxuICAgIExPQ0xFTiAgICAgICAgICAgOiAyMiwgLy8gdW5jb21wcmVzc2VkIHNpemVcbiAgICBMT0NOQU0gICAgICAgICAgIDogMjYsIC8vIGZpbGVuYW1lIGxlbmd0aFxuICAgIExPQ0VYVCAgICAgICAgICAgOiAyOCwgLy8gZXh0cmEgZmllbGQgbGVuZ3RoXG5cbiAgICAvKiBUaGUgRGF0YSBkZXNjcmlwdG9yICovXG4gICAgRVhUU0lHICAgICAgICAgICA6IDB4MDgwNzRiNTAsIC8vIFwiUEtcXDAwN1xcMDA4XCJcbiAgICBFWFRIRFIgICAgICAgICAgIDogMTYsIC8vIEVYVCBoZWFkZXIgc2l6ZVxuICAgIEVYVENSQyAgICAgICAgICAgOiA0LCAvLyB1bmNvbXByZXNzZWQgZmlsZSBjcmMtMzIgdmFsdWVcbiAgICBFWFRTSVogICAgICAgICAgIDogOCwgLy8gY29tcHJlc3NlZCBzaXplXG4gICAgRVhUTEVOICAgICAgICAgICA6IDEyLCAvLyB1bmNvbXByZXNzZWQgc2l6ZVxuXG4gICAgLyogVGhlIGNlbnRyYWwgZGlyZWN0b3J5IGZpbGUgaGVhZGVyICovXG4gICAgQ0VOSERSICAgICAgICAgICA6IDQ2LCAvLyBDRU4gaGVhZGVyIHNpemVcbiAgICBDRU5TSUcgICAgICAgICAgIDogMHgwMjAxNGI1MCwgLy8gXCJQS1xcMDAxXFwwMDJcIlxuICAgIENFTlZFTSAgICAgICAgICAgOiA0LCAvLyB2ZXJzaW9uIG1hZGUgYnlcbiAgICBDRU5WRVIgICAgICAgICAgIDogNiwgLy8gdmVyc2lvbiBuZWVkZWQgdG8gZXh0cmFjdFxuICAgIENFTkZMRyAgICAgICAgICAgOiA4LCAvLyBlbmNyeXB0LCBkZWNyeXB0IGZsYWdzXG4gICAgQ0VOSE9XICAgICAgICAgICA6IDEwLCAvLyBjb21wcmVzc2lvbiBtZXRob2RcbiAgICBDRU5USU0gICAgICAgICAgIDogMTIsIC8vIG1vZGlmaWNhdGlvbiB0aW1lICgyIGJ5dGVzIHRpbWUsIDIgYnl0ZXMgZGF0ZSlcbiAgICBDRU5DUkMgICAgICAgICAgIDogMTYsIC8vIHVuY29tcHJlc3NlZCBmaWxlIGNyYy0zMiB2YWx1ZVxuICAgIENFTlNJWiAgICAgICAgICAgOiAyMCwgLy8gY29tcHJlc3NlZCBzaXplXG4gICAgQ0VOTEVOICAgICAgICAgICA6IDI0LCAvLyB1bmNvbXByZXNzZWQgc2l6ZVxuICAgIENFTk5BTSAgICAgICAgICAgOiAyOCwgLy8gZmlsZW5hbWUgbGVuZ3RoXG4gICAgQ0VORVhUICAgICAgICAgICA6IDMwLCAvLyBleHRyYSBmaWVsZCBsZW5ndGhcbiAgICBDRU5DT00gICAgICAgICAgIDogMzIsIC8vIGZpbGUgY29tbWVudCBsZW5ndGhcbiAgICBDRU5EU0sgICAgICAgICAgIDogMzQsIC8vIHZvbHVtZSBudW1iZXIgc3RhcnRcbiAgICBDRU5BVFQgICAgICAgICAgIDogMzYsIC8vIGludGVybmFsIGZpbGUgYXR0cmlidXRlc1xuICAgIENFTkFUWCAgICAgICAgICAgOiAzOCwgLy8gZXh0ZXJuYWwgZmlsZSBhdHRyaWJ1dGVzIChob3N0IHN5c3RlbSBkZXBlbmRlbnQpXG4gICAgQ0VOT0ZGICAgICAgICAgICA6IDQyLCAvLyBMT0MgaGVhZGVyIG9mZnNldFxuXG4gICAgLyogVGhlIGVudHJpZXMgaW4gdGhlIGVuZCBvZiBjZW50cmFsIGRpcmVjdG9yeSAqL1xuICAgIEVOREhEUiAgICAgICAgICAgOiAyMiwgLy8gRU5EIGhlYWRlciBzaXplXG4gICAgRU5EU0lHICAgICAgICAgICA6IDB4MDYwNTRiNTAsIC8vIFwiUEtcXDAwNVxcMDA2XCJcbiAgICBFTkRTVUIgICAgICAgICAgIDogOCwgLy8gbnVtYmVyIG9mIGVudHJpZXMgb24gdGhpcyBkaXNrXG4gICAgRU5EVE9UICAgICAgICAgICA6IDEwLCAvLyB0b3RhbCBudW1iZXIgb2YgZW50cmllc1xuICAgIEVORFNJWiAgICAgICAgICAgOiAxMiwgLy8gY2VudHJhbCBkaXJlY3Rvcnkgc2l6ZSBpbiBieXRlc1xuICAgIEVORE9GRiAgICAgICAgICAgOiAxNiwgLy8gb2Zmc2V0IG9mIGZpcnN0IENFTiBoZWFkZXJcbiAgICBFTkRDT00gICAgICAgICAgIDogMjAsIC8vIHppcCBmaWxlIGNvbW1lbnQgbGVuZ3RoXG5cbiAgICBFTkQ2NEhEUiAgICAgICAgIDogMjAsIC8vIHppcDY0IEVORCBoZWFkZXIgc2l6ZVxuICAgIEVORDY0U0lHICAgICAgICAgOiAweDA3MDY0YjUwLCAvLyB6aXA2NCBMb2NhdG9yIHNpZ25hdHVyZSwgXCJQS1xcMDA2XFwwMDdcIlxuICAgIEVORDY0U1RBUlQgICAgICAgOiA0LCAvLyBudW1iZXIgb2YgdGhlIGRpc2sgd2l0aCB0aGUgc3RhcnQgb2YgdGhlIHppcDY0XG4gICAgRU5ENjRPRkYgICAgICAgICA6IDgsIC8vIHJlbGF0aXZlIG9mZnNldCBvZiB0aGUgemlwNjQgZW5kIG9mIGNlbnRyYWwgZGlyZWN0b3J5XG4gICAgRU5ENjROVU1ESVNLUyAgICA6IDE2LCAvLyB0b3RhbCBudW1iZXIgb2YgZGlza3NcblxuICAgIFpJUDY0U0lHICAgICAgICAgOiAweDA2MDY0YjUwLCAvLyB6aXA2NCBzaWduYXR1cmUsIFwiUEtcXDAwNlxcMDA2XCJcbiAgICBaSVA2NEhEUiAgICAgICAgIDogNTYsIC8vIHppcDY0IHJlY29yZCBtaW5pbXVtIHNpemVcbiAgICBaSVA2NExFQUQgICAgICAgIDogMTIsIC8vIGxlYWRpbmcgYnl0ZXMgYXQgdGhlIHN0YXJ0IG9mIHRoZSByZWNvcmQsIG5vdCBjb3VudGVkIGJ5IHRoZSB2YWx1ZSBzdG9yZWQgaW4gWklQNjRTSVpFXG4gICAgWklQNjRTSVpFICAgICAgICA6IDQsIC8vIHppcDY0IHNpemUgb2YgdGhlIGNlbnRyYWwgZGlyZWN0b3J5IHJlY29yZFxuICAgIFpJUDY0VkVNICAgICAgICAgOiAxMiwgLy8gemlwNjQgdmVyc2lvbiBtYWRlIGJ5XG4gICAgWklQNjRWRVIgICAgICAgICA6IDE0LCAvLyB6aXA2NCB2ZXJzaW9uIG5lZWRlZCB0byBleHRyYWN0XG4gICAgWklQNjREU0sgICAgICAgICA6IDE2LCAvLyB6aXA2NCBudW1iZXIgb2YgdGhpcyBkaXNrXG4gICAgWklQNjREU0tESVIgICAgICA6IDIwLCAvLyBudW1iZXIgb2YgdGhlIGRpc2sgd2l0aCB0aGUgc3RhcnQgb2YgdGhlIHJlY29yZCBkaXJlY3RvcnlcbiAgICBaSVA2NFNVQiAgICAgICAgIDogMjQsIC8vIG51bWJlciBvZiBlbnRyaWVzIG9uIHRoaXMgZGlza1xuICAgIFpJUDY0VE9UICAgICAgICAgOiAzMiwgLy8gdG90YWwgbnVtYmVyIG9mIGVudHJpZXNcbiAgICBaSVA2NFNJWkIgICAgICAgIDogNDAsIC8vIHppcDY0IGNlbnRyYWwgZGlyZWN0b3J5IHNpemUgaW4gYnl0ZXNcbiAgICBaSVA2NE9GRiAgICAgICAgIDogNDgsIC8vIG9mZnNldCBvZiBzdGFydCBvZiBjZW50cmFsIGRpcmVjdG9yeSB3aXRoIHJlc3BlY3QgdG8gdGhlIHN0YXJ0aW5nIGRpc2sgbnVtYmVyXG4gICAgWklQNjRFWFRSQSAgICAgICA6IDU2LCAvLyBleHRlbnNpYmxlIGRhdGEgc2VjdG9yXG5cbiAgICAvKiBDb21wcmVzc2lvbiBtZXRob2RzICovXG4gICAgU1RPUkVEICAgICAgICAgICA6IDAsIC8vIG5vIGNvbXByZXNzaW9uXG4gICAgU0hSVU5LICAgICAgICAgICA6IDEsIC8vIHNocnVua1xuICAgIFJFRFVDRUQxICAgICAgICAgOiAyLCAvLyByZWR1Y2VkIHdpdGggY29tcHJlc3Npb24gZmFjdG9yIDFcbiAgICBSRURVQ0VEMiAgICAgICAgIDogMywgLy8gcmVkdWNlZCB3aXRoIGNvbXByZXNzaW9uIGZhY3RvciAyXG4gICAgUkVEVUNFRDMgICAgICAgICA6IDQsIC8vIHJlZHVjZWQgd2l0aCBjb21wcmVzc2lvbiBmYWN0b3IgM1xuICAgIFJFRFVDRUQ0ICAgICAgICAgOiA1LCAvLyByZWR1Y2VkIHdpdGggY29tcHJlc3Npb24gZmFjdG9yIDRcbiAgICBJTVBMT0RFRCAgICAgICAgIDogNiwgLy8gaW1wbG9kZWRcbiAgICAvLyA3IHJlc2VydmVkIGZvciBUb2tlbml6aW5nIGNvbXByZXNzaW9uIGFsZ29yaXRobVxuICAgIERFRkxBVEVEICAgICAgICAgOiA4LCAvLyBkZWZsYXRlZFxuICAgIEVOSEFOQ0VEX0RFRkxBVEVEOiA5LCAvLyBlbmhhbmNlZCBkZWZsYXRlZFxuICAgIFBLV0FSRSAgICAgICAgICAgOiAxMCwvLyBQS1dhcmUgRENMIGltcGxvZGVkXG4gICAgLy8gMTEgcmVzZXJ2ZWQgYnkgUEtXQVJFXG4gICAgQlpJUDIgICAgICAgICAgICA6IDEyLCAvLyAgY29tcHJlc3NlZCB1c2luZyBCWklQMlxuICAgIC8vIDEzIHJlc2VydmVkIGJ5IFBLV0FSRVxuICAgIExaTUEgICAgICAgICAgICAgOiAxNCwgLy8gTFpNQVxuICAgIC8vIDE1LTE3IHJlc2VydmVkIGJ5IFBLV0FSRVxuICAgIElCTV9URVJTRSAgICAgICAgOiAxOCwgLy8gY29tcHJlc3NlZCB1c2luZyBJQk0gVEVSU0VcbiAgICBJQk1fTFo3NyAgICAgICAgIDogMTksIC8vIElCTSBMWjc3IHpcbiAgICBBRVNfRU5DUllQVCAgICAgIDogOTksIC8vIFdpblpJUCBBRVMgZW5jcnlwdGlvbiBtZXRob2RcblxuICAgIC8qIEdlbmVyYWwgcHVycG9zZSBiaXQgZmxhZyAqL1xuICAgIC8vIHZhbHVlcyBjYW4gb2J0YWluZWQgd2l0aCBleHByZXNzaW9uIDIqKmJpdG5yXG4gICAgRkxHX0VOQyAgICAgICAgICA6IDEsICAgIC8vIEJpdCAwOiBlbmNyeXB0ZWQgZmlsZVxuICAgIEZMR19DT01QMSAgICAgICAgOiAyLCAgICAvLyBCaXQgMSwgY29tcHJlc3Npb24gb3B0aW9uXG4gICAgRkxHX0NPTVAyICAgICAgICA6IDQsICAgIC8vIEJpdCAyLCBjb21wcmVzc2lvbiBvcHRpb25cbiAgICBGTEdfREVTQyAgICAgICAgIDogOCwgICAgLy8gQml0IDMsIGRhdGEgZGVzY3JpcHRvclxuICAgIEZMR19FTkggICAgICAgICAgOiAxNiwgICAvLyBCaXQgNCwgZW5oYW5jZWQgZGVmbGF0aW5nXG4gICAgRkxHX1BBVENIICAgICAgICA6IDMyLCAgIC8vIEJpdCA1LCBpbmRpY2F0ZXMgdGhhdCB0aGUgZmlsZSBpcyBjb21wcmVzc2VkIHBhdGNoZWQgZGF0YS5cbiAgICBGTEdfU1RSICAgICAgICAgIDogNjQsICAgLy8gQml0IDYsIHN0cm9uZyBlbmNyeXB0aW9uIChwYXRlbnRlZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQml0cyA3LTEwOiBDdXJyZW50bHkgdW51c2VkLlxuICAgIEZMR19FRlMgICAgICAgICAgOiAyMDQ4LCAvLyBCaXQgMTE6IExhbmd1YWdlIGVuY29kaW5nIGZsYWcgKEVGUylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQml0IDEyOiBSZXNlcnZlZCBieSBQS1dBUkUgZm9yIGVuaGFuY2VkIGNvbXByZXNzaW9uLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBCaXQgMTM6IGVuY3J5cHRlZCB0aGUgQ2VudHJhbCBEaXJlY3RvcnkgKHBhdGVudGVkKS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQml0cyAxNC0xNTogUmVzZXJ2ZWQgYnkgUEtXQVJFLlxuICAgIEZMR19NU0sgICAgICAgICAgOiA0MDk2LCAvLyBtYXNrIGhlYWRlciB2YWx1ZXNcblxuICAgIC8qIExvYWQgdHlwZSAqL1xuICAgIEZJTEUgICAgICAgICAgICAgOiAyLFxuICAgIEJVRkZFUiAgICAgICAgICAgOiAxLFxuICAgIE5PTkUgICAgICAgICAgICAgOiAwLFxuXG4gICAgLyogNC41IEV4dGVuc2libGUgZGF0YSBmaWVsZHMgKi9cbiAgICBFRl9JRCAgICAgICAgICAgIDogMCxcbiAgICBFRl9TSVpFICAgICAgICAgIDogMixcblxuICAgIC8qIEhlYWRlciBJRHMgKi9cbiAgICBJRF9aSVA2NCAgICAgICAgIDogMHgwMDAxLFxuICAgIElEX0FWSU5GTyAgICAgICAgOiAweDAwMDcsXG4gICAgSURfUEZTICAgICAgICAgICA6IDB4MDAwOCxcbiAgICBJRF9PUzIgICAgICAgICAgIDogMHgwMDA5LFxuICAgIElEX05URlMgICAgICAgICAgOiAweDAwMGEsXG4gICAgSURfT1BFTlZNUyAgICAgICA6IDB4MDAwYyxcbiAgICBJRF9VTklYICAgICAgICAgIDogMHgwMDBkLFxuICAgIElEX0ZPUksgICAgICAgICAgOiAweDAwMGUsXG4gICAgSURfUEFUQ0ggICAgICAgICA6IDB4MDAwZixcbiAgICBJRF9YNTA5X1BLQ1M3ICAgIDogMHgwMDE0LFxuICAgIElEX1g1MDlfQ0VSVElEX0YgOiAweDAwMTUsXG4gICAgSURfWDUwOV9DRVJUSURfQyA6IDB4MDAxNixcbiAgICBJRF9TVFJPTkdFTkMgICAgIDogMHgwMDE3LFxuICAgIElEX1JFQ09SRF9NR1QgICAgOiAweDAwMTgsXG4gICAgSURfWDUwOV9QS0NTN19STCA6IDB4MDAxOSxcbiAgICBJRF9JQk0xICAgICAgICAgIDogMHgwMDY1LFxuICAgIElEX0lCTTIgICAgICAgICAgOiAweDAwNjYsXG4gICAgSURfUE9TWklQICAgICAgICA6IDB4NDY5MCxcblxuICAgIEVGX1pJUDY0X09SXzMyICAgOiAweGZmZmZmZmZmLFxuICAgIEVGX1pJUDY0X09SXzE2ICAgOiAweGZmZmYsXG4gICAgRUZfWklQNjRfU1VOQ09NUCA6IDAsXG4gICAgRUZfWklQNjRfU0NPTVAgICA6IDgsXG4gICAgRUZfWklQNjRfUkhPICAgICA6IDE2LFxuICAgIEVGX1pJUDY0X0RTTiAgICAgOiAyNFxufTtcbiIsICJjb25zdCBlcnJvcnMgPSB7XG4gICAgLyogSGVhZGVyIGVycm9yIG1lc3NhZ2VzICovXG4gICAgSU5WQUxJRF9MT0M6IFwiSW52YWxpZCBMT0MgaGVhZGVyIChiYWQgc2lnbmF0dXJlKVwiLFxuICAgIElOVkFMSURfQ0VOOiBcIkludmFsaWQgQ0VOIGhlYWRlciAoYmFkIHNpZ25hdHVyZSlcIixcbiAgICBJTlZBTElEX0VORDogXCJJbnZhbGlkIEVORCBoZWFkZXIgKGJhZCBzaWduYXR1cmUpXCIsXG5cbiAgICAvKiBEZXNjcmlwdG9yICovXG4gICAgREVTQ1JJUFRPUl9OT1RfRVhJU1Q6IFwiTm8gZGVzY3JpcHRvciBwcmVzZW50XCIsXG4gICAgREVTQ1JJUFRPUl9VTktOT1dOOiBcIlVua25vd24gZGVzY3JpcHRvciBmb3JtYXRcIixcbiAgICBERVNDUklQVE9SX0ZBVUxUWTogXCJEZXNjcmlwdG9yIGRhdGEgaXMgbWFsZm9ybWVkXCIsXG5cbiAgICAvKiBaaXBFbnRyeSBlcnJvciBtZXNzYWdlcyovXG4gICAgTk9fREFUQTogXCJOb3RoaW5nIHRvIGRlY29tcHJlc3NcIixcbiAgICBCQURfQ1JDOiBcIkNSQzMyIGNoZWNrc3VtIGZhaWxlZCB7MH1cIixcbiAgICBGSUxFX0lOX1RIRV9XQVk6IFwiVGhlcmUgaXMgYSBmaWxlIGluIHRoZSB3YXk6IHswfVwiLFxuICAgIFVOS05PV05fTUVUSE9EOiBcIkludmFsaWQvdW5zdXBwb3J0ZWQgY29tcHJlc3Npb24gbWV0aG9kXCIsXG5cbiAgICAvKiBJbmZsYXRlciBlcnJvciBtZXNzYWdlcyAqL1xuICAgIEFWQUlMX0RBVEE6IFwiaW5mbGF0ZTo6QXZhaWxhYmxlIGluZmxhdGUgZGF0YSBkaWQgbm90IHRlcm1pbmF0ZVwiLFxuICAgIElOVkFMSURfRElTVEFOQ0U6IFwiaW5mbGF0ZTo6SW52YWxpZCBsaXRlcmFsL2xlbmd0aCBvciBkaXN0YW5jZSBjb2RlIGluIGZpeGVkIG9yIGR5bmFtaWMgYmxvY2tcIixcbiAgICBUT19NQU5ZX0NPREVTOiBcImluZmxhdGU6OkR5bmFtaWMgYmxvY2sgY29kZSBkZXNjcmlwdGlvbjogdG9vIG1hbnkgbGVuZ3RoIG9yIGRpc3RhbmNlIGNvZGVzXCIsXG4gICAgSU5WQUxJRF9SRVBFQVRfTEVOOiBcImluZmxhdGU6OkR5bmFtaWMgYmxvY2sgY29kZSBkZXNjcmlwdGlvbjogcmVwZWF0IG1vcmUgdGhhbiBzcGVjaWZpZWQgbGVuZ3Roc1wiLFxuICAgIElOVkFMSURfUkVQRUFUX0ZJUlNUOiBcImluZmxhdGU6OkR5bmFtaWMgYmxvY2sgY29kZSBkZXNjcmlwdGlvbjogcmVwZWF0IGxlbmd0aHMgd2l0aCBubyBmaXJzdCBsZW5ndGhcIixcbiAgICBJTkNPTVBMRVRFX0NPREVTOiBcImluZmxhdGU6OkR5bmFtaWMgYmxvY2sgY29kZSBkZXNjcmlwdGlvbjogY29kZSBsZW5ndGhzIGNvZGVzIGluY29tcGxldGVcIixcbiAgICBJTlZBTElEX0RZTl9ESVNUQU5DRTogXCJpbmZsYXRlOjpEeW5hbWljIGJsb2NrIGNvZGUgZGVzY3JpcHRpb246IGludmFsaWQgZGlzdGFuY2UgY29kZSBsZW5ndGhzXCIsXG4gICAgSU5WQUxJRF9DT0RFU19MRU46IFwiaW5mbGF0ZTo6RHluYW1pYyBibG9jayBjb2RlIGRlc2NyaXB0aW9uOiBpbnZhbGlkIGxpdGVyYWwvbGVuZ3RoIGNvZGUgbGVuZ3Roc1wiLFxuICAgIElOVkFMSURfU1RPUkVfQkxPQ0s6IFwiaW5mbGF0ZTo6U3RvcmVkIGJsb2NrIGxlbmd0aCBkaWQgbm90IG1hdGNoIG9uZSdzIGNvbXBsZW1lbnRcIixcbiAgICBJTlZBTElEX0JMT0NLX1RZUEU6IFwiaW5mbGF0ZTo6SW52YWxpZCBibG9jayB0eXBlICh0eXBlID09IDMpXCIsXG5cbiAgICAvKiBBRE0tWklQIGVycm9yIG1lc3NhZ2VzICovXG4gICAgQ0FOVF9FWFRSQUNUX0ZJTEU6IFwiQ291bGQgbm90IGV4dHJhY3QgdGhlIGZpbGVcIixcbiAgICBDQU5UX09WRVJSSURFOiBcIlRhcmdldCBmaWxlIGFscmVhZHkgZXhpc3RzXCIsXG4gICAgRElTS19FTlRSWV9UT09fTEFSR0U6IFwiTnVtYmVyIG9mIGRpc2sgZW50cmllcyBpcyB0b28gbGFyZ2VcIixcbiAgICBOT19aSVA6IFwiTm8gemlwIGZpbGUgd2FzIGxvYWRlZFwiLFxuICAgIE5PX0VOVFJZOiBcIkVudHJ5IGRvZXNuJ3QgZXhpc3RcIixcbiAgICBESVJFQ1RPUllfQ09OVEVOVF9FUlJPUjogXCJBIGRpcmVjdG9yeSBjYW5ub3QgaGF2ZSBjb250ZW50XCIsXG4gICAgRklMRV9OT1RfRk9VTkQ6ICdGaWxlIG5vdCBmb3VuZDogXCJ7MH1cIicsXG4gICAgTk9UX0lNUExFTUVOVEVEOiBcIk5vdCBpbXBsZW1lbnRlZFwiLFxuICAgIElOVkFMSURfRklMRU5BTUU6IFwiSW52YWxpZCBmaWxlbmFtZVwiLFxuICAgIElOVkFMSURfRk9STUFUOiBcIkludmFsaWQgb3IgdW5zdXBwb3J0ZWQgemlwIGZvcm1hdC4gTm8gRU5EIGhlYWRlciBmb3VuZFwiLFxuICAgIElOVkFMSURfUEFTU19QQVJBTTogXCJJbmNvbXBhdGlibGUgcGFzc3dvcmQgcGFyYW1ldGVyXCIsXG4gICAgV1JPTkdfUEFTU1dPUkQ6IFwiV3JvbmcgUGFzc3dvcmRcIixcblxuICAgIC8qIEFETS1aSVAgKi9cbiAgICBDT01NRU5UX1RPT19MT05HOiBcIkNvbW1lbnQgaXMgdG9vIGxvbmdcIiwgLy8gQ29tbWVudCBjYW4gYmUgbWF4IDY1NTM1IGJ5dGVzIGxvbmcgKE5PVEU6IHNvbWUgbm9uLVVTIGNoYXJhY3RlcnMgbWF5IHRha2UgbW9yZSBzcGFjZSlcbiAgICBFWFRSQV9GSUVMRF9QQVJTRV9FUlJPUjogXCJFeHRyYSBmaWVsZCBwYXJzaW5nIGVycm9yXCJcbn07XG5cbi8vIHRlbXBsYXRlXG5mdW5jdGlvbiBFKG1lc3NhZ2UpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgaWYgKGFyZ3MubGVuZ3RoKSB7IC8vIEFsbG93IHswfSAuLiB7OX0gYXJndW1lbnRzIGluIGVycm9yIG1lc3NhZ2UsIGJhc2VkIG9uIGFyZ3VtZW50IG51bWJlclxuICAgICAgICAgICAgbWVzc2FnZSA9IG1lc3NhZ2UucmVwbGFjZSgvXFx7KFxcZClcXH0vZywgKF8sIG4pID0+IGFyZ3Nbbl0gfHwgJycpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ldyBFcnJvcignQURNLVpJUDogJyArIG1lc3NhZ2UpO1xuICAgIH07XG59XG5cbi8vIEluaXQgZXJyb3JzIHdpdGggdGVtcGxhdGVcbmZvciAoY29uc3QgbXNnIG9mIE9iamVjdC5rZXlzKGVycm9ycykpIHtcbiAgICBleHBvcnRzW21zZ10gPSBFKGVycm9yc1ttc2ddKTtcbn1cbiIsICJjb25zdCBmc3lzdGVtID0gcmVxdWlyZShcImZzXCIpO1xuY29uc3QgcHRoID0gcmVxdWlyZShcInBhdGhcIik7XG5jb25zdCBDb25zdGFudHMgPSByZXF1aXJlKFwiLi9jb25zdGFudHNcIik7XG5jb25zdCBFcnJvcnMgPSByZXF1aXJlKFwiLi9lcnJvcnNcIik7XG5jb25zdCBpc1dpbiA9IHR5cGVvZiBwcm9jZXNzID09PSBcIm9iamVjdFwiICYmIFwid2luMzJcIiA9PT0gcHJvY2Vzcy5wbGF0Zm9ybTtcblxuY29uc3QgaXNfT2JqID0gKG9iaikgPT4gdHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIiAmJiBvYmogIT09IG51bGw7XG5cbi8vIGdlbmVyYXRlIENSQzMyIGxvb2t1cCB0YWJsZVxuY29uc3QgY3JjVGFibGUgPSBuZXcgVWludDMyQXJyYXkoMjU2KS5tYXAoKHQsIGMpID0+IHtcbiAgICBmb3IgKGxldCBrID0gMDsgayA8IDg7IGsrKykge1xuICAgICAgICBpZiAoKGMgJiAxKSAhPT0gMCkge1xuICAgICAgICAgICAgYyA9IDB4ZWRiODgzMjAgXiAoYyA+Pj4gMSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjID4+Pj0gMTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYyA+Pj4gMDtcbn0pO1xuXG4vLyBVVElMUyBmdW5jdGlvbnNcblxuZnVuY3Rpb24gVXRpbHMob3B0cykge1xuICAgIHRoaXMuc2VwID0gcHRoLnNlcDtcbiAgICB0aGlzLmZzID0gZnN5c3RlbTtcblxuICAgIGlmIChpc19PYmoob3B0cykpIHtcbiAgICAgICAgLy8gY3VzdG9tIGZpbGVzeXN0ZW1cbiAgICAgICAgaWYgKGlzX09iaihvcHRzLmZzKSAmJiB0eXBlb2Ygb3B0cy5mcy5zdGF0U3luYyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB0aGlzLmZzID0gb3B0cy5mcztcbiAgICAgICAgfVxuICAgIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBVdGlscztcblxuLy8gSU5TVEFOVElBQkxFIGZ1bmN0aW9uc1xuXG5VdGlscy5wcm90b3R5cGUubWFrZURpciA9IGZ1bmN0aW9uICgvKlN0cmluZyovIGZvbGRlcikge1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gU3luYyAtIG1ha2UgZGlyZWN0b3JpZXMgdHJlZVxuICAgIGZ1bmN0aW9uIG1rZGlyU3luYygvKlN0cmluZyovIGZwYXRoKSB7XG4gICAgICAgIGxldCByZXNvbHZlZFBhdGggPSBmcGF0aC5zcGxpdChzZWxmLnNlcClbMF07XG4gICAgICAgIGZwYXRoLnNwbGl0KHNlbGYuc2VwKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICBpZiAoIW5hbWUgfHwgbmFtZS5zdWJzdHIoLTEsIDEpID09PSBcIjpcIikgcmV0dXJuO1xuICAgICAgICAgICAgcmVzb2x2ZWRQYXRoICs9IHNlbGYuc2VwICsgbmFtZTtcbiAgICAgICAgICAgIHZhciBzdGF0O1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBzdGF0ID0gc2VsZi5mcy5zdGF0U3luYyhyZXNvbHZlZFBhdGgpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHNlbGYuZnMubWtkaXJTeW5jKHJlc29sdmVkUGF0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3RhdCAmJiBzdGF0LmlzRmlsZSgpKSB0aHJvdyBFcnJvcnMuRklMRV9JTl9USEVfV0FZKGBcIiR7cmVzb2x2ZWRQYXRofVwiYCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIG1rZGlyU3luYyhmb2xkZXIpO1xufTtcblxuVXRpbHMucHJvdG90eXBlLndyaXRlRmlsZVRvID0gZnVuY3Rpb24gKC8qU3RyaW5nKi8gcGF0aCwgLypCdWZmZXIqLyBjb250ZW50LCAvKkJvb2xlYW4qLyBvdmVyd3JpdGUsIC8qTnVtYmVyKi8gYXR0cikge1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgIGlmIChzZWxmLmZzLmV4aXN0c1N5bmMocGF0aCkpIHtcbiAgICAgICAgaWYgKCFvdmVyd3JpdGUpIHJldHVybiBmYWxzZTsgLy8gY2Fubm90IG92ZXJ3cml0ZVxuXG4gICAgICAgIHZhciBzdGF0ID0gc2VsZi5mcy5zdGF0U3luYyhwYXRoKTtcbiAgICAgICAgaWYgKHN0YXQuaXNEaXJlY3RvcnkoKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHZhciBmb2xkZXIgPSBwdGguZGlybmFtZShwYXRoKTtcbiAgICBpZiAoIXNlbGYuZnMuZXhpc3RzU3luYyhmb2xkZXIpKSB7XG4gICAgICAgIHNlbGYubWFrZURpcihmb2xkZXIpO1xuICAgIH1cblxuICAgIHZhciBmZDtcbiAgICB0cnkge1xuICAgICAgICBmZCA9IHNlbGYuZnMub3BlblN5bmMocGF0aCwgXCJ3XCIsIDBvNjY2KTsgLy8gMDY2NlxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgc2VsZi5mcy5jaG1vZFN5bmMocGF0aCwgMG82NjYpO1xuICAgICAgICBmZCA9IHNlbGYuZnMub3BlblN5bmMocGF0aCwgXCJ3XCIsIDBvNjY2KTtcbiAgICB9XG4gICAgaWYgKGZkKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzZWxmLmZzLndyaXRlU3luYyhmZCwgY29udGVudCwgMCwgY29udGVudC5sZW5ndGgsIDApO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgc2VsZi5mcy5jbG9zZVN5bmMoZmQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNlbGYuZnMuY2htb2RTeW5jKHBhdGgsIGF0dHIgfHwgMG82NjYpO1xuICAgIHJldHVybiB0cnVlO1xufTtcblxuVXRpbHMucHJvdG90eXBlLndyaXRlRmlsZVRvQXN5bmMgPSBmdW5jdGlvbiAoLypTdHJpbmcqLyBwYXRoLCAvKkJ1ZmZlciovIGNvbnRlbnQsIC8qQm9vbGVhbiovIG92ZXJ3cml0ZSwgLypOdW1iZXIqLyBhdHRyLCAvKkZ1bmN0aW9uKi8gY2FsbGJhY2spIHtcbiAgICBpZiAodHlwZW9mIGF0dHIgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBjYWxsYmFjayA9IGF0dHI7XG4gICAgICAgIGF0dHIgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XG5cbiAgICBzZWxmLmZzLmV4aXN0cyhwYXRoLCBmdW5jdGlvbiAoZXhpc3QpIHtcbiAgICAgICAgaWYgKGV4aXN0ICYmICFvdmVyd3JpdGUpIHJldHVybiBjYWxsYmFjayhmYWxzZSk7XG5cbiAgICAgICAgc2VsZi5mcy5zdGF0KHBhdGgsIGZ1bmN0aW9uIChlcnIsIHN0YXQpIHtcbiAgICAgICAgICAgIGlmIChleGlzdCAmJiBzdGF0LmlzRGlyZWN0b3J5KCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZmFsc2UpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgZm9sZGVyID0gcHRoLmRpcm5hbWUocGF0aCk7XG4gICAgICAgICAgICBzZWxmLmZzLmV4aXN0cyhmb2xkZXIsIGZ1bmN0aW9uIChleGlzdHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWV4aXN0cykgc2VsZi5tYWtlRGlyKGZvbGRlcik7XG5cbiAgICAgICAgICAgICAgICBzZWxmLmZzLm9wZW4ocGF0aCwgXCJ3XCIsIDBvNjY2LCBmdW5jdGlvbiAoZXJyLCBmZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmZzLmNobW9kKHBhdGgsIDBvNjY2LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5mcy5vcGVuKHBhdGgsIFwid1wiLCAwbzY2NiwgZnVuY3Rpb24gKGVyciwgZmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5mcy53cml0ZShmZCwgY29udGVudCwgMCwgY29udGVudC5sZW5ndGgsIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZnMuY2xvc2UoZmQsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmZzLmNobW9kKHBhdGgsIGF0dHIgfHwgMG82NjYsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChmZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5mcy53cml0ZShmZCwgY29udGVudCwgMCwgY29udGVudC5sZW5ndGgsIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmZzLmNsb3NlKGZkLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZnMuY2htb2QocGF0aCwgYXR0ciB8fCAwbzY2NiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmZzLmNobW9kKHBhdGgsIGF0dHIgfHwgMG82NjYsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59O1xuXG5VdGlscy5wcm90b3R5cGUuZmluZEZpbGVzID0gZnVuY3Rpb24gKC8qU3RyaW5nKi8gcGF0aCkge1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gICAgZnVuY3Rpb24gZmluZFN5bmMoLypTdHJpbmcqLyBkaXIsIC8qUmVnRXhwKi8gcGF0dGVybiwgLypCb29sZWFuKi8gcmVjdXJzaXZlKSB7XG4gICAgICAgIGlmICh0eXBlb2YgcGF0dGVybiA9PT0gXCJib29sZWFuXCIpIHtcbiAgICAgICAgICAgIHJlY3Vyc2l2ZSA9IHBhdHRlcm47XG4gICAgICAgICAgICBwYXR0ZXJuID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGxldCBmaWxlcyA9IFtdO1xuICAgICAgICBzZWxmLmZzLnJlYWRkaXJTeW5jKGRpcikuZm9yRWFjaChmdW5jdGlvbiAoZmlsZSkge1xuICAgICAgICAgICAgY29uc3QgcGF0aCA9IHB0aC5qb2luKGRpciwgZmlsZSk7XG4gICAgICAgICAgICBjb25zdCBzdGF0ID0gc2VsZi5mcy5zdGF0U3luYyhwYXRoKTtcblxuICAgICAgICAgICAgaWYgKCFwYXR0ZXJuIHx8IHBhdHRlcm4udGVzdChwYXRoKSkge1xuICAgICAgICAgICAgICAgIGZpbGVzLnB1c2gocHRoLm5vcm1hbGl6ZShwYXRoKSArIChzdGF0LmlzRGlyZWN0b3J5KCkgPyBzZWxmLnNlcCA6IFwiXCIpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHN0YXQuaXNEaXJlY3RvcnkoKSAmJiByZWN1cnNpdmUpIGZpbGVzID0gZmlsZXMuY29uY2F0KGZpbmRTeW5jKHBhdGgsIHBhdHRlcm4sIHJlY3Vyc2l2ZSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZpbGVzO1xuICAgIH1cblxuICAgIHJldHVybiBmaW5kU3luYyhwYXRoLCB1bmRlZmluZWQsIHRydWUpO1xufTtcblxuLyoqXG4gKiBDYWxsYmFjayBmb3Igc2hvd2luZyBpZiBldmVyeXRoaW5nIHdhcyBkb25lLlxuICpcbiAqIEBjYWxsYmFjayBmaWxlbGlzdENhbGxiYWNrXG4gKiBAcGFyYW0ge0Vycm9yfSBlcnIgLSBFcnJvciBvYmplY3RcbiAqIEBwYXJhbSB7c3RyaW5nW119IGxpc3QgLSB3YXMgcmVxdWVzdCBmdWxseSBjb21wbGV0ZWRcbiAqL1xuXG4vKipcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gZGlyXG4gKiBAcGFyYW0ge2ZpbGVsaXN0Q2FsbGJhY2t9IGNiXG4gKi9cblV0aWxzLnByb3RvdHlwZS5maW5kRmlsZXNBc3luYyA9IGZ1bmN0aW9uIChkaXIsIGNiKSB7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgbGV0IHJlc3VsdHMgPSBbXTtcbiAgICBzZWxmLmZzLnJlYWRkaXIoZGlyLCBmdW5jdGlvbiAoZXJyLCBsaXN0KSB7XG4gICAgICAgIGlmIChlcnIpIHJldHVybiBjYihlcnIpO1xuICAgICAgICBsZXQgbGlzdF9sZW5ndGggPSBsaXN0Lmxlbmd0aDtcbiAgICAgICAgaWYgKCFsaXN0X2xlbmd0aCkgcmV0dXJuIGNiKG51bGwsIHJlc3VsdHMpO1xuICAgICAgICBsaXN0LmZvckVhY2goZnVuY3Rpb24gKGZpbGUpIHtcbiAgICAgICAgICAgIGZpbGUgPSBwdGguam9pbihkaXIsIGZpbGUpO1xuICAgICAgICAgICAgc2VsZi5mcy5zdGF0KGZpbGUsIGZ1bmN0aW9uIChlcnIsIHN0YXQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSByZXR1cm4gY2IoZXJyKTtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdCkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2gocHRoLm5vcm1hbGl6ZShmaWxlKSArIChzdGF0LmlzRGlyZWN0b3J5KCkgPyBzZWxmLnNlcCA6IFwiXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXQuaXNEaXJlY3RvcnkoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5maW5kRmlsZXNBc3luYyhmaWxlLCBmdW5jdGlvbiAoZXJyLCByZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSByZXR1cm4gY2IoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzID0gcmVzdWx0cy5jb25jYXQocmVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIS0tbGlzdF9sZW5ndGgpIGNiKG51bGwsIHJlc3VsdHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIS0tbGlzdF9sZW5ndGgpIGNiKG51bGwsIHJlc3VsdHMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufTtcblxuVXRpbHMucHJvdG90eXBlLmdldEF0dHJpYnV0ZXMgPSBmdW5jdGlvbiAoKSB7fTtcblxuVXRpbHMucHJvdG90eXBlLnNldEF0dHJpYnV0ZXMgPSBmdW5jdGlvbiAoKSB7fTtcblxuLy8gU1RBVElDIGZ1bmN0aW9uc1xuXG4vLyBjcmMzMiBzaW5nbGUgdXBkYXRlIChpdCBpcyBwYXJ0IG9mIGNyYzMyKVxuVXRpbHMuY3JjMzJ1cGRhdGUgPSBmdW5jdGlvbiAoY3JjLCBieXRlKSB7XG4gICAgcmV0dXJuIGNyY1RhYmxlWyhjcmMgXiBieXRlKSAmIDB4ZmZdIF4gKGNyYyA+Pj4gOCk7XG59O1xuXG5VdGlscy5jcmMzMiA9IGZ1bmN0aW9uIChidWYpIHtcbiAgICBpZiAodHlwZW9mIGJ1ZiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBidWYgPSBCdWZmZXIuZnJvbShidWYsIFwidXRmOFwiKTtcbiAgICB9XG5cbiAgICBsZXQgbGVuID0gYnVmLmxlbmd0aDtcbiAgICBsZXQgY3JjID0gfjA7XG4gICAgZm9yIChsZXQgb2ZmID0gMDsgb2ZmIDwgbGVuOyApIGNyYyA9IFV0aWxzLmNyYzMydXBkYXRlKGNyYywgYnVmW29mZisrXSk7XG4gICAgLy8geG9yIGFuZCBjYXN0IGFzIHVpbnQzMiBudW1iZXJcbiAgICByZXR1cm4gfmNyYyA+Pj4gMDtcbn07XG5cblV0aWxzLm1ldGhvZFRvU3RyaW5nID0gZnVuY3Rpb24gKC8qTnVtYmVyKi8gbWV0aG9kKSB7XG4gICAgc3dpdGNoIChtZXRob2QpIHtcbiAgICAgICAgY2FzZSBDb25zdGFudHMuU1RPUkVEOlxuICAgICAgICAgICAgcmV0dXJuIFwiU1RPUkVEIChcIiArIG1ldGhvZCArIFwiKVwiO1xuICAgICAgICBjYXNlIENvbnN0YW50cy5ERUZMQVRFRDpcbiAgICAgICAgICAgIHJldHVybiBcIkRFRkxBVEVEIChcIiArIG1ldGhvZCArIFwiKVwiO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIFwiVU5TVVBQT1JURUQgKFwiICsgbWV0aG9kICsgXCIpXCI7XG4gICAgfVxufTtcblxuLyoqXG4gKiByZW1vdmVzIFwiLi5cIiBzdHlsZSBwYXRoIGVsZW1lbnRzXG4gKiBAcGFyYW0ge3N0cmluZ30gcGF0aCAtIGZpeGFibGUgcGF0aFxuICogQHJldHVybnMgc3RyaW5nIC0gZml4ZWQgZmlsZXBhdGhcbiAqL1xuVXRpbHMuY2Fub25pY2FsID0gZnVuY3Rpb24gKC8qc3RyaW5nKi8gcGF0aCkge1xuICAgIGlmICghcGF0aCkgcmV0dXJuIFwiXCI7XG4gICAgLy8gdHJpY2sgbm9ybWFsaXplIHRoaW5rIHBhdGggaXMgYWJzb2x1dGVcbiAgICBjb25zdCBzYWZlU3VmZml4ID0gcHRoLnBvc2l4Lm5vcm1hbGl6ZShcIi9cIiArIHBhdGguc3BsaXQoXCJcXFxcXCIpLmpvaW4oXCIvXCIpKTtcbiAgICByZXR1cm4gcHRoLmpvaW4oXCIuXCIsIHNhZmVTdWZmaXgpO1xufTtcblxuLyoqXG4gKiBmaXggZmlsZSBuYW1lcyBpbiBhY2hpdmVcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIC0gZml4YWJsZSBwYXRoXG4gKiBAcmV0dXJucyBzdHJpbmcgLSBmaXhlZCBmaWxlcGF0aFxuICovXG5cblV0aWxzLnppcG5hbWVmaXggPSBmdW5jdGlvbiAocGF0aCkge1xuICAgIGlmICghcGF0aCkgcmV0dXJuIFwiXCI7XG4gICAgLy8gdHJpY2sgbm9ybWFsaXplIHRoaW5rIHBhdGggaXMgYWJzb2x1dGVcbiAgICBjb25zdCBzYWZlU3VmZml4ID0gcHRoLnBvc2l4Lm5vcm1hbGl6ZShcIi9cIiArIHBhdGguc3BsaXQoXCJcXFxcXCIpLmpvaW4oXCIvXCIpKTtcbiAgICByZXR1cm4gcHRoLnBvc2l4LmpvaW4oXCIuXCIsIHNhZmVTdWZmaXgpO1xufTtcblxuLyoqXG4gKlxuICogQHBhcmFtIHtBcnJheX0gYXJyXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFja1xuICogQHJldHVybnNcbiAqL1xuVXRpbHMuZmluZExhc3QgPSBmdW5jdGlvbiAoYXJyLCBjYWxsYmFjaykge1xuICAgIGlmICghQXJyYXkuaXNBcnJheShhcnIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXJyIGlzIG5vdCBhcnJheVwiKTtcblxuICAgIGNvbnN0IGxlbiA9IGFyci5sZW5ndGggPj4+IDA7XG4gICAgZm9yIChsZXQgaSA9IGxlbiAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIGlmIChjYWxsYmFjayhhcnJbaV0sIGksIGFycikpIHtcbiAgICAgICAgICAgIHJldHVybiBhcnJbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHZvaWQgMDtcbn07XG5cbi8vIG1ha2UgYWJvbHV0ZSBwYXRocyB0YWtpbmcgcHJlZml4IGFzIHJvb3QgZm9sZGVyXG5VdGlscy5zYW5pdGl6ZSA9IGZ1bmN0aW9uICgvKnN0cmluZyovIHByZWZpeCwgLypzdHJpbmcqLyBuYW1lKSB7XG4gICAgcHJlZml4ID0gcHRoLnJlc29sdmUocHRoLm5vcm1hbGl6ZShwcmVmaXgpKTtcbiAgICB2YXIgcGFydHMgPSBuYW1lLnNwbGl0KFwiL1wiKTtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IHBhcnRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICB2YXIgcGF0aCA9IHB0aC5ub3JtYWxpemUocHRoLmpvaW4ocHJlZml4LCBwYXJ0cy5zbGljZShpLCBsKS5qb2luKHB0aC5zZXApKSk7XG4gICAgICAgIGlmIChwYXRoLmluZGV4T2YocHJlZml4KSA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHBhdGg7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHB0aC5ub3JtYWxpemUocHRoLmpvaW4ocHJlZml4LCBwdGguYmFzZW5hbWUobmFtZSkpKTtcbn07XG5cbi8vIGNvbnZlcnRzIGJ1ZmZlciwgVWludDhBcnJheSwgc3RyaW5nIHR5cGVzIHRvIGJ1ZmZlclxuVXRpbHMudG9CdWZmZXIgPSBmdW5jdGlvbiB0b0J1ZmZlcigvKmJ1ZmZlciwgVWludDhBcnJheSwgc3RyaW5nKi8gaW5wdXQsIC8qIGZ1bmN0aW9uICovIGVuY29kZXIpIHtcbiAgICBpZiAoQnVmZmVyLmlzQnVmZmVyKGlucHV0KSkge1xuICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgfSBlbHNlIGlmIChpbnB1dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHtcbiAgICAgICAgcmV0dXJuIEJ1ZmZlci5mcm9tKGlucHV0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBleHBlY3Qgc3RyaW5nIGFsbCBvdGhlciB2YWx1ZXMgYXJlIGludmFsaWQgYW5kIHJldHVybiBlbXB0eSBidWZmZXJcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBpbnB1dCA9PT0gXCJzdHJpbmdcIiA/IGVuY29kZXIoaW5wdXQpIDogQnVmZmVyLmFsbG9jKDApO1xuICAgIH1cbn07XG5cblV0aWxzLnJlYWRCaWdVSW50NjRMRSA9IGZ1bmN0aW9uICgvKkJ1ZmZlciovIGJ1ZmZlciwgLyppbnQqLyBpbmRleCkge1xuICAgIHZhciBzbGljZSA9IEJ1ZmZlci5mcm9tKGJ1ZmZlci5zbGljZShpbmRleCwgaW5kZXggKyA4KSk7XG4gICAgc2xpY2Uuc3dhcDY0KCk7XG5cbiAgICByZXR1cm4gcGFyc2VJbnQoYDB4JHtzbGljZS50b1N0cmluZyhcImhleFwiKX1gKTtcbn07XG5cblV0aWxzLmZyb21ET1MyRGF0ZSA9IGZ1bmN0aW9uICh2YWwpIHtcbiAgICByZXR1cm4gbmV3IERhdGUoKCh2YWwgPj4gMjUpICYgMHg3ZikgKyAxOTgwLCBNYXRoLm1heCgoKHZhbCA+PiAyMSkgJiAweDBmKSAtIDEsIDApLCBNYXRoLm1heCgodmFsID4+IDE2KSAmIDB4MWYsIDEpLCAodmFsID4+IDExKSAmIDB4MWYsICh2YWwgPj4gNSkgJiAweDNmLCAodmFsICYgMHgxZikgPDwgMSk7XG59O1xuXG5VdGlscy5mcm9tRGF0ZTJET1MgPSBmdW5jdGlvbiAodmFsKSB7XG4gICAgbGV0IGRhdGUgPSAwO1xuICAgIGxldCB0aW1lID0gMDtcbiAgICBpZiAodmFsLmdldEZ1bGxZZWFyKCkgPiAxOTc5KSB7XG4gICAgICAgIGRhdGUgPSAoKCh2YWwuZ2V0RnVsbFllYXIoKSAtIDE5ODApICYgMHg3ZikgPDwgOSkgfCAoKHZhbC5nZXRNb250aCgpICsgMSkgPDwgNSkgfCB2YWwuZ2V0RGF0ZSgpO1xuICAgICAgICB0aW1lID0gKHZhbC5nZXRIb3VycygpIDw8IDExKSB8ICh2YWwuZ2V0TWludXRlcygpIDw8IDUpIHwgKHZhbC5nZXRTZWNvbmRzKCkgPj4gMSk7XG4gICAgfVxuICAgIHJldHVybiAoZGF0ZSA8PCAxNikgfCB0aW1lO1xufTtcblxuVXRpbHMuaXNXaW4gPSBpc1dpbjsgLy8gRG8gd2UgaGF2ZSB3aW5kb3dzIHN5c3RlbVxuVXRpbHMuY3JjVGFibGUgPSBjcmNUYWJsZTtcbiIsICJjb25zdCBwdGggPSByZXF1aXJlKFwicGF0aFwiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoLypTdHJpbmcqLyBwYXRoLCAvKlV0aWxzIG9iamVjdCovIHsgZnMgfSkge1xuICAgIHZhciBfcGF0aCA9IHBhdGggfHwgXCJcIixcbiAgICAgICAgX29iaiA9IG5ld0F0dHIoKSxcbiAgICAgICAgX3N0YXQgPSBudWxsO1xuXG4gICAgZnVuY3Rpb24gbmV3QXR0cigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGRpcmVjdG9yeTogZmFsc2UsXG4gICAgICAgICAgICByZWFkb25seTogZmFsc2UsXG4gICAgICAgICAgICBoaWRkZW46IGZhbHNlLFxuICAgICAgICAgICAgZXhlY3V0YWJsZTogZmFsc2UsXG4gICAgICAgICAgICBtdGltZTogMCxcbiAgICAgICAgICAgIGF0aW1lOiAwXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgaWYgKF9wYXRoICYmIGZzLmV4aXN0c1N5bmMoX3BhdGgpKSB7XG4gICAgICAgIF9zdGF0ID0gZnMuc3RhdFN5bmMoX3BhdGgpO1xuICAgICAgICBfb2JqLmRpcmVjdG9yeSA9IF9zdGF0LmlzRGlyZWN0b3J5KCk7XG4gICAgICAgIF9vYmoubXRpbWUgPSBfc3RhdC5tdGltZTtcbiAgICAgICAgX29iai5hdGltZSA9IF9zdGF0LmF0aW1lO1xuICAgICAgICBfb2JqLmV4ZWN1dGFibGUgPSAoMG8xMTEgJiBfc3RhdC5tb2RlKSAhPT0gMDsgLy8gZmlsZSBpcyBleGVjdXRhYmxlIHdobyBldmVyIGhhciByaWdodCBub3QganVzdCBvd25lclxuICAgICAgICBfb2JqLnJlYWRvbmx5ID0gKDBvMjAwICYgX3N0YXQubW9kZSkgPT09IDA7IC8vIHJlYWRvbmx5IGlmIG93bmVyIGhhcyBubyB3cml0ZSByaWdodFxuICAgICAgICBfb2JqLmhpZGRlbiA9IHB0aC5iYXNlbmFtZShfcGF0aClbMF0gPT09IFwiLlwiO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcIkludmFsaWQgcGF0aDogXCIgKyBfcGF0aCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0IGRpcmVjdG9yeSgpIHtcbiAgICAgICAgICAgIHJldHVybiBfb2JqLmRpcmVjdG9yeTtcbiAgICAgICAgfSxcblxuICAgICAgICBnZXQgcmVhZE9ubHkoKSB7XG4gICAgICAgICAgICByZXR1cm4gX29iai5yZWFkb25seTtcbiAgICAgICAgfSxcblxuICAgICAgICBnZXQgaGlkZGVuKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9vYmouaGlkZGVuO1xuICAgICAgICB9LFxuXG4gICAgICAgIGdldCBtdGltZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBfb2JqLm10aW1lO1xuICAgICAgICB9LFxuXG4gICAgICAgIGdldCBhdGltZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBfb2JqLmF0aW1lO1xuICAgICAgICB9LFxuXG4gICAgICAgIGdldCBleGVjdXRhYmxlKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9vYmouZXhlY3V0YWJsZTtcbiAgICAgICAgfSxcblxuICAgICAgICBkZWNvZGVBdHRyaWJ1dGVzOiBmdW5jdGlvbiAoKSB7fSxcblxuICAgICAgICBlbmNvZGVBdHRyaWJ1dGVzOiBmdW5jdGlvbiAoKSB7fSxcblxuICAgICAgICB0b0pTT046IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcGF0aDogX3BhdGgsXG4gICAgICAgICAgICAgICAgaXNEaXJlY3Rvcnk6IF9vYmouZGlyZWN0b3J5LFxuICAgICAgICAgICAgICAgIGlzUmVhZE9ubHk6IF9vYmoucmVhZG9ubHksXG4gICAgICAgICAgICAgICAgaXNIaWRkZW46IF9vYmouaGlkZGVuLFxuICAgICAgICAgICAgICAgIGlzRXhlY3V0YWJsZTogX29iai5leGVjdXRhYmxlLFxuICAgICAgICAgICAgICAgIG1UaW1lOiBfb2JqLm10aW1lLFxuICAgICAgICAgICAgICAgIGFUaW1lOiBfb2JqLmF0aW1lXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuXG4gICAgICAgIHRvU3RyaW5nOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcy50b0pTT04oKSwgbnVsbCwgXCJcXHRcIik7XG4gICAgICAgIH1cbiAgICB9O1xufTtcbiIsICJtb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBlZnM6IHRydWUsXG4gICAgZW5jb2RlOiAoZGF0YSkgPT4gQnVmZmVyLmZyb20oZGF0YSwgXCJ1dGY4XCIpLFxuICAgIGRlY29kZTogKGRhdGEpID0+IGRhdGEudG9TdHJpbmcoXCJ1dGY4XCIpXG59O1xuIiwgIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4vdXRpbHNcIik7XG5tb2R1bGUuZXhwb3J0cy5Db25zdGFudHMgPSByZXF1aXJlKFwiLi9jb25zdGFudHNcIik7XG5tb2R1bGUuZXhwb3J0cy5FcnJvcnMgPSByZXF1aXJlKFwiLi9lcnJvcnNcIik7XG5tb2R1bGUuZXhwb3J0cy5GaWxlQXR0ciA9IHJlcXVpcmUoXCIuL2ZhdHRyXCIpO1xubW9kdWxlLmV4cG9ydHMuZGVjb2RlciA9IHJlcXVpcmUoXCIuL2RlY29kZXJcIik7XG4iLCAidmFyIFV0aWxzID0gcmVxdWlyZShcIi4uL3V0aWxcIiksXG4gICAgQ29uc3RhbnRzID0gVXRpbHMuQ29uc3RhbnRzO1xuXG4vKiBUaGUgY2VudHJhbCBkaXJlY3RvcnkgZmlsZSBoZWFkZXIgKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBfdmVyTWFkZSA9IDIwLCAvLyB2Mi4wXG4gICAgICAgIF92ZXJzaW9uID0gMTAsIC8vIHYxLjBcbiAgICAgICAgX2ZsYWdzID0gMCxcbiAgICAgICAgX21ldGhvZCA9IDAsXG4gICAgICAgIF90aW1lID0gMCxcbiAgICAgICAgX2NyYyA9IDAsXG4gICAgICAgIF9jb21wcmVzc2VkU2l6ZSA9IDAsXG4gICAgICAgIF9zaXplID0gMCxcbiAgICAgICAgX2ZuYW1lTGVuID0gMCxcbiAgICAgICAgX2V4dHJhTGVuID0gMCxcbiAgICAgICAgX2NvbUxlbiA9IDAsXG4gICAgICAgIF9kaXNrU3RhcnQgPSAwLFxuICAgICAgICBfaW5hdHRyID0gMCxcbiAgICAgICAgX2F0dHIgPSAwLFxuICAgICAgICBfb2Zmc2V0ID0gMDtcblxuICAgIF92ZXJNYWRlIHw9IFV0aWxzLmlzV2luID8gMHgwYTAwIDogMHgwMzAwO1xuXG4gICAgLy8gU2V0IEVGUyBmbGFnIHNpbmNlIGZpbGVuYW1lIGFuZCBjb21tZW50IGZpZWxkcyBhcmUgYWxsIGJ5IGRlZmF1bHQgZW5jb2RlZCB1c2luZyBVVEYtOC5cbiAgICAvLyBXaXRob3V0IGl0IGZpbGUgbmFtZXMgbWF5IGJlIGNvcnJ1cHRlZCBmb3Igb3RoZXIgYXBwcyB3aGVuIGZpbGUgbmFtZXMgdXNlIHVuaWNvZGUgY2hhcnNcbiAgICBfZmxhZ3MgfD0gQ29uc3RhbnRzLkZMR19FRlM7XG5cbiAgICBjb25zdCBfbG9jYWxIZWFkZXIgPSB7XG4gICAgICAgIGV4dHJhTGVuOiAwXG4gICAgfTtcblxuICAgIC8vIGNhc3RpbmdcbiAgICBjb25zdCB1aW50MzIgPSAodmFsKSA9PiBNYXRoLm1heCgwLCB2YWwpID4+PiAwO1xuICAgIGNvbnN0IHVpbnQxNiA9ICh2YWwpID0+IE1hdGgubWF4KDAsIHZhbCkgJiAweGZmZmY7XG4gICAgY29uc3QgdWludDggPSAodmFsKSA9PiBNYXRoLm1heCgwLCB2YWwpICYgMHhmZjtcblxuICAgIF90aW1lID0gVXRpbHMuZnJvbURhdGUyRE9TKG5ldyBEYXRlKCkpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0IG1hZGUoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3Zlck1hZGU7XG4gICAgICAgIH0sXG4gICAgICAgIHNldCBtYWRlKHZhbCkge1xuICAgICAgICAgICAgX3Zlck1hZGUgPSB2YWw7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0IHZlcnNpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gX3ZlcnNpb247XG4gICAgICAgIH0sXG4gICAgICAgIHNldCB2ZXJzaW9uKHZhbCkge1xuICAgICAgICAgICAgX3ZlcnNpb24gPSB2YWw7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0IGZsYWdzKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9mbGFncztcbiAgICAgICAgfSxcbiAgICAgICAgc2V0IGZsYWdzKHZhbCkge1xuICAgICAgICAgICAgX2ZsYWdzID0gdmFsO1xuICAgICAgICB9LFxuXG4gICAgICAgIGdldCBmbGFnc19lZnMoKSB7XG4gICAgICAgICAgICByZXR1cm4gKF9mbGFncyAmIENvbnN0YW50cy5GTEdfRUZTKSA+IDA7XG4gICAgICAgIH0sXG4gICAgICAgIHNldCBmbGFnc19lZnModmFsKSB7XG4gICAgICAgICAgICBpZiAodmFsKSB7XG4gICAgICAgICAgICAgICAgX2ZsYWdzIHw9IENvbnN0YW50cy5GTEdfRUZTO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBfZmxhZ3MgJj0gfkNvbnN0YW50cy5GTEdfRUZTO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGdldCBmbGFnc19kZXNjKCkge1xuICAgICAgICAgICAgcmV0dXJuIChfZmxhZ3MgJiBDb25zdGFudHMuRkxHX0RFU0MpID4gMDtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0IGZsYWdzX2Rlc2ModmFsKSB7XG4gICAgICAgICAgICBpZiAodmFsKSB7XG4gICAgICAgICAgICAgICAgX2ZsYWdzIHw9IENvbnN0YW50cy5GTEdfREVTQztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgX2ZsYWdzICY9IH5Db25zdGFudHMuRkxHX0RFU0M7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0IG1ldGhvZCgpIHtcbiAgICAgICAgICAgIHJldHVybiBfbWV0aG9kO1xuICAgICAgICB9LFxuICAgICAgICBzZXQgbWV0aG9kKHZhbCkge1xuICAgICAgICAgICAgc3dpdGNoICh2YWwpIHtcbiAgICAgICAgICAgICAgICBjYXNlIENvbnN0YW50cy5TVE9SRUQ6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmVyc2lvbiA9IDEwO1xuICAgICAgICAgICAgICAgIGNhc2UgQ29uc3RhbnRzLkRFRkxBVEVEOlxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmVyc2lvbiA9IDIwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX21ldGhvZCA9IHZhbDtcbiAgICAgICAgfSxcblxuICAgICAgICBnZXQgdGltZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBVdGlscy5mcm9tRE9TMkRhdGUodGhpcy50aW1ldmFsKTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0IHRpbWUodmFsKSB7XG4gICAgICAgICAgICB0aGlzLnRpbWV2YWwgPSBVdGlscy5mcm9tRGF0ZTJET1ModmFsKTtcbiAgICAgICAgfSxcblxuICAgICAgICBnZXQgdGltZXZhbCgpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGltZTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0IHRpbWV2YWwodmFsKSB7XG4gICAgICAgICAgICBfdGltZSA9IHVpbnQzMih2YWwpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGdldCB0aW1lSGlnaEJ5dGUoKSB7XG4gICAgICAgICAgICByZXR1cm4gdWludDgoX3RpbWUgPj4+IDgpO1xuICAgICAgICB9LFxuICAgICAgICBnZXQgY3JjKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9jcmM7XG4gICAgICAgIH0sXG4gICAgICAgIHNldCBjcmModmFsKSB7XG4gICAgICAgICAgICBfY3JjID0gdWludDMyKHZhbCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0IGNvbXByZXNzZWRTaXplKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9jb21wcmVzc2VkU2l6ZTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0IGNvbXByZXNzZWRTaXplKHZhbCkge1xuICAgICAgICAgICAgX2NvbXByZXNzZWRTaXplID0gdWludDMyKHZhbCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0IHNpemUoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3NpemU7XG4gICAgICAgIH0sXG4gICAgICAgIHNldCBzaXplKHZhbCkge1xuICAgICAgICAgICAgX3NpemUgPSB1aW50MzIodmFsKTtcbiAgICAgICAgfSxcblxuICAgICAgICBnZXQgZmlsZU5hbWVMZW5ndGgoKSB7XG4gICAgICAgICAgICByZXR1cm4gX2ZuYW1lTGVuO1xuICAgICAgICB9LFxuICAgICAgICBzZXQgZmlsZU5hbWVMZW5ndGgodmFsKSB7XG4gICAgICAgICAgICBfZm5hbWVMZW4gPSB2YWw7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0IGV4dHJhTGVuZ3RoKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9leHRyYUxlbjtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0IGV4dHJhTGVuZ3RoKHZhbCkge1xuICAgICAgICAgICAgX2V4dHJhTGVuID0gdmFsO1xuICAgICAgICB9LFxuXG4gICAgICAgIGdldCBleHRyYUxvY2FsTGVuZ3RoKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9sb2NhbEhlYWRlci5leHRyYUxlbjtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0IGV4dHJhTG9jYWxMZW5ndGgodmFsKSB7XG4gICAgICAgICAgICBfbG9jYWxIZWFkZXIuZXh0cmFMZW4gPSB2YWw7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0IGNvbW1lbnRMZW5ndGgoKSB7XG4gICAgICAgICAgICByZXR1cm4gX2NvbUxlbjtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0IGNvbW1lbnRMZW5ndGgodmFsKSB7XG4gICAgICAgICAgICBfY29tTGVuID0gdmFsO1xuICAgICAgICB9LFxuXG4gICAgICAgIGdldCBkaXNrTnVtU3RhcnQoKSB7XG4gICAgICAgICAgICByZXR1cm4gX2Rpc2tTdGFydDtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0IGRpc2tOdW1TdGFydCh2YWwpIHtcbiAgICAgICAgICAgIF9kaXNrU3RhcnQgPSB1aW50MzIodmFsKTtcbiAgICAgICAgfSxcblxuICAgICAgICBnZXQgaW5BdHRyKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9pbmF0dHI7XG4gICAgICAgIH0sXG4gICAgICAgIHNldCBpbkF0dHIodmFsKSB7XG4gICAgICAgICAgICBfaW5hdHRyID0gdWludDMyKHZhbCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0IGF0dHIoKSB7XG4gICAgICAgICAgICByZXR1cm4gX2F0dHI7XG4gICAgICAgIH0sXG4gICAgICAgIHNldCBhdHRyKHZhbCkge1xuICAgICAgICAgICAgX2F0dHIgPSB1aW50MzIodmFsKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvLyBnZXQgVW5peCBmaWxlIHBlcm1pc3Npb25zXG4gICAgICAgIGdldCBmaWxlQXR0cigpIHtcbiAgICAgICAgICAgIHJldHVybiAoX2F0dHIgfHwgMCkgPj4gMTYgJiAweGZmZjtcbiAgICAgICAgfSxcblxuICAgICAgICBnZXQgb2Zmc2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIF9vZmZzZXQ7XG4gICAgICAgIH0sXG4gICAgICAgIHNldCBvZmZzZXQodmFsKSB7XG4gICAgICAgICAgICBfb2Zmc2V0ID0gdWludDMyKHZhbCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0IGVuY3J5cHRlZCgpIHtcbiAgICAgICAgICAgIHJldHVybiAoX2ZsYWdzICYgQ29uc3RhbnRzLkZMR19FTkMpID09PSBDb25zdGFudHMuRkxHX0VOQztcbiAgICAgICAgfSxcblxuICAgICAgICBnZXQgY2VudHJhbEhlYWRlclNpemUoKSB7XG4gICAgICAgICAgICByZXR1cm4gQ29uc3RhbnRzLkNFTkhEUiArIF9mbmFtZUxlbiArIF9leHRyYUxlbiArIF9jb21MZW47XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0IHJlYWxEYXRhT2Zmc2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIF9vZmZzZXQgKyBDb25zdGFudHMuTE9DSERSICsgX2xvY2FsSGVhZGVyLmZuYW1lTGVuICsgX2xvY2FsSGVhZGVyLmV4dHJhTGVuO1xuICAgICAgICB9LFxuXG4gICAgICAgIGdldCBsb2NhbEhlYWRlcigpIHtcbiAgICAgICAgICAgIHJldHVybiBfbG9jYWxIZWFkZXI7XG4gICAgICAgIH0sXG5cbiAgICAgICAgbG9hZExvY2FsSGVhZGVyRnJvbUJpbmFyeTogZnVuY3Rpb24gKC8qQnVmZmVyKi8gaW5wdXQpIHtcbiAgICAgICAgICAgIHZhciBkYXRhID0gaW5wdXQuc2xpY2UoX29mZnNldCwgX29mZnNldCArIENvbnN0YW50cy5MT0NIRFIpO1xuICAgICAgICAgICAgLy8gMzAgYnl0ZXMgYW5kIHNob3VsZCBzdGFydCB3aXRoIFwiUEtcXDAwM1xcMDA0XCJcbiAgICAgICAgICAgIGlmIChkYXRhLnJlYWRVSW50MzJMRSgwKSAhPT0gQ29uc3RhbnRzLkxPQ1NJRykge1xuICAgICAgICAgICAgICAgIHRocm93IFV0aWxzLkVycm9ycy5JTlZBTElEX0xPQygpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyB2ZXJzaW9uIG5lZWRlZCB0byBleHRyYWN0XG4gICAgICAgICAgICBfbG9jYWxIZWFkZXIudmVyc2lvbiA9IGRhdGEucmVhZFVJbnQxNkxFKENvbnN0YW50cy5MT0NWRVIpO1xuICAgICAgICAgICAgLy8gZ2VuZXJhbCBwdXJwb3NlIGJpdCBmbGFnXG4gICAgICAgICAgICBfbG9jYWxIZWFkZXIuZmxhZ3MgPSBkYXRhLnJlYWRVSW50MTZMRShDb25zdGFudHMuTE9DRkxHKTtcbiAgICAgICAgICAgIC8vIGNvbXByZXNzaW9uIG1ldGhvZFxuICAgICAgICAgICAgX2xvY2FsSGVhZGVyLm1ldGhvZCA9IGRhdGEucmVhZFVJbnQxNkxFKENvbnN0YW50cy5MT0NIT1cpO1xuICAgICAgICAgICAgLy8gbW9kaWZpY2F0aW9uIHRpbWUgKDIgYnl0ZXMgdGltZSwgMiBieXRlcyBkYXRlKVxuICAgICAgICAgICAgX2xvY2FsSGVhZGVyLnRpbWUgPSBkYXRhLnJlYWRVSW50MzJMRShDb25zdGFudHMuTE9DVElNKTtcbiAgICAgICAgICAgIC8vIHVuY29tcHJlc3NlZCBmaWxlIGNyYy0zMiB2YWx1XG4gICAgICAgICAgICBfbG9jYWxIZWFkZXIuY3JjID0gZGF0YS5yZWFkVUludDMyTEUoQ29uc3RhbnRzLkxPQ0NSQyk7XG4gICAgICAgICAgICAvLyBjb21wcmVzc2VkIHNpemVcbiAgICAgICAgICAgIF9sb2NhbEhlYWRlci5jb21wcmVzc2VkU2l6ZSA9IGRhdGEucmVhZFVJbnQzMkxFKENvbnN0YW50cy5MT0NTSVopO1xuICAgICAgICAgICAgLy8gdW5jb21wcmVzc2VkIHNpemVcbiAgICAgICAgICAgIF9sb2NhbEhlYWRlci5zaXplID0gZGF0YS5yZWFkVUludDMyTEUoQ29uc3RhbnRzLkxPQ0xFTik7XG4gICAgICAgICAgICAvLyBmaWxlbmFtZSBsZW5ndGhcbiAgICAgICAgICAgIF9sb2NhbEhlYWRlci5mbmFtZUxlbiA9IGRhdGEucmVhZFVJbnQxNkxFKENvbnN0YW50cy5MT0NOQU0pO1xuICAgICAgICAgICAgLy8gZXh0cmEgZmllbGQgbGVuZ3RoXG4gICAgICAgICAgICBfbG9jYWxIZWFkZXIuZXh0cmFMZW4gPSBkYXRhLnJlYWRVSW50MTZMRShDb25zdGFudHMuTE9DRVhUKTtcblxuICAgICAgICAgICAgLy8gcmVhZCBleHRyYSBkYXRhXG4gICAgICAgICAgICBjb25zdCBleHRyYVN0YXJ0ID0gX29mZnNldCArIENvbnN0YW50cy5MT0NIRFIgKyBfbG9jYWxIZWFkZXIuZm5hbWVMZW47XG4gICAgICAgICAgICBjb25zdCBleHRyYUVuZCA9IGV4dHJhU3RhcnQgKyBfbG9jYWxIZWFkZXIuZXh0cmFMZW47XG4gICAgICAgICAgICByZXR1cm4gaW5wdXQuc2xpY2UoZXh0cmFTdGFydCwgZXh0cmFFbmQpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGxvYWRGcm9tQmluYXJ5OiBmdW5jdGlvbiAoLypCdWZmZXIqLyBkYXRhKSB7XG4gICAgICAgICAgICAvLyBkYXRhIHNob3VsZCBiZSA0NiBieXRlcyBhbmQgc3RhcnQgd2l0aCBcIlBLIDAxIDAyXCJcbiAgICAgICAgICAgIGlmIChkYXRhLmxlbmd0aCAhPT0gQ29uc3RhbnRzLkNFTkhEUiB8fCBkYXRhLnJlYWRVSW50MzJMRSgwKSAhPT0gQ29uc3RhbnRzLkNFTlNJRykge1xuICAgICAgICAgICAgICAgIHRocm93IFV0aWxzLkVycm9ycy5JTlZBTElEX0NFTigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gdmVyc2lvbiBtYWRlIGJ5XG4gICAgICAgICAgICBfdmVyTWFkZSA9IGRhdGEucmVhZFVJbnQxNkxFKENvbnN0YW50cy5DRU5WRU0pO1xuICAgICAgICAgICAgLy8gdmVyc2lvbiBuZWVkZWQgdG8gZXh0cmFjdFxuICAgICAgICAgICAgX3ZlcnNpb24gPSBkYXRhLnJlYWRVSW50MTZMRShDb25zdGFudHMuQ0VOVkVSKTtcbiAgICAgICAgICAgIC8vIGVuY3J5cHQsIGRlY3J5cHQgZmxhZ3NcbiAgICAgICAgICAgIF9mbGFncyA9IGRhdGEucmVhZFVJbnQxNkxFKENvbnN0YW50cy5DRU5GTEcpO1xuICAgICAgICAgICAgLy8gY29tcHJlc3Npb24gbWV0aG9kXG4gICAgICAgICAgICBfbWV0aG9kID0gZGF0YS5yZWFkVUludDE2TEUoQ29uc3RhbnRzLkNFTkhPVyk7XG4gICAgICAgICAgICAvLyBtb2RpZmljYXRpb24gdGltZSAoMiBieXRlcyB0aW1lLCAyIGJ5dGVzIGRhdGUpXG4gICAgICAgICAgICBfdGltZSA9IGRhdGEucmVhZFVJbnQzMkxFKENvbnN0YW50cy5DRU5USU0pO1xuICAgICAgICAgICAgLy8gdW5jb21wcmVzc2VkIGZpbGUgY3JjLTMyIHZhbHVlXG4gICAgICAgICAgICBfY3JjID0gZGF0YS5yZWFkVUludDMyTEUoQ29uc3RhbnRzLkNFTkNSQyk7XG4gICAgICAgICAgICAvLyBjb21wcmVzc2VkIHNpemVcbiAgICAgICAgICAgIF9jb21wcmVzc2VkU2l6ZSA9IGRhdGEucmVhZFVJbnQzMkxFKENvbnN0YW50cy5DRU5TSVopO1xuICAgICAgICAgICAgLy8gdW5jb21wcmVzc2VkIHNpemVcbiAgICAgICAgICAgIF9zaXplID0gZGF0YS5yZWFkVUludDMyTEUoQ29uc3RhbnRzLkNFTkxFTik7XG4gICAgICAgICAgICAvLyBmaWxlbmFtZSBsZW5ndGhcbiAgICAgICAgICAgIF9mbmFtZUxlbiA9IGRhdGEucmVhZFVJbnQxNkxFKENvbnN0YW50cy5DRU5OQU0pO1xuICAgICAgICAgICAgLy8gZXh0cmEgZmllbGQgbGVuZ3RoXG4gICAgICAgICAgICBfZXh0cmFMZW4gPSBkYXRhLnJlYWRVSW50MTZMRShDb25zdGFudHMuQ0VORVhUKTtcbiAgICAgICAgICAgIC8vIGZpbGUgY29tbWVudCBsZW5ndGhcbiAgICAgICAgICAgIF9jb21MZW4gPSBkYXRhLnJlYWRVSW50MTZMRShDb25zdGFudHMuQ0VOQ09NKTtcbiAgICAgICAgICAgIC8vIHZvbHVtZSBudW1iZXIgc3RhcnRcbiAgICAgICAgICAgIF9kaXNrU3RhcnQgPSBkYXRhLnJlYWRVSW50MTZMRShDb25zdGFudHMuQ0VORFNLKTtcbiAgICAgICAgICAgIC8vIGludGVybmFsIGZpbGUgYXR0cmlidXRlc1xuICAgICAgICAgICAgX2luYXR0ciA9IGRhdGEucmVhZFVJbnQxNkxFKENvbnN0YW50cy5DRU5BVFQpO1xuICAgICAgICAgICAgLy8gZXh0ZXJuYWwgZmlsZSBhdHRyaWJ1dGVzXG4gICAgICAgICAgICBfYXR0ciA9IGRhdGEucmVhZFVJbnQzMkxFKENvbnN0YW50cy5DRU5BVFgpO1xuICAgICAgICAgICAgLy8gTE9DIGhlYWRlciBvZmZzZXRcbiAgICAgICAgICAgIF9vZmZzZXQgPSBkYXRhLnJlYWRVSW50MzJMRShDb25zdGFudHMuQ0VOT0ZGKTtcbiAgICAgICAgfSxcblxuICAgICAgICBsb2NhbEhlYWRlclRvQmluYXJ5OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBMT0MgaGVhZGVyIHNpemUgKDMwIGJ5dGVzKVxuICAgICAgICAgICAgdmFyIGRhdGEgPSBCdWZmZXIuYWxsb2MoQ29uc3RhbnRzLkxPQ0hEUik7XG4gICAgICAgICAgICAvLyBcIlBLXFwwMDNcXDAwNFwiXG4gICAgICAgICAgICBkYXRhLndyaXRlVUludDMyTEUoQ29uc3RhbnRzLkxPQ1NJRywgMCk7XG4gICAgICAgICAgICAvLyB2ZXJzaW9uIG5lZWRlZCB0byBleHRyYWN0XG4gICAgICAgICAgICBkYXRhLndyaXRlVUludDE2TEUoX3ZlcnNpb24sIENvbnN0YW50cy5MT0NWRVIpO1xuICAgICAgICAgICAgLy8gZ2VuZXJhbCBwdXJwb3NlIGJpdCBmbGFnXG4gICAgICAgICAgICBkYXRhLndyaXRlVUludDE2TEUoX2ZsYWdzLCBDb25zdGFudHMuTE9DRkxHKTtcbiAgICAgICAgICAgIC8vIGNvbXByZXNzaW9uIG1ldGhvZFxuICAgICAgICAgICAgZGF0YS53cml0ZVVJbnQxNkxFKF9tZXRob2QsIENvbnN0YW50cy5MT0NIT1cpO1xuICAgICAgICAgICAgLy8gbW9kaWZpY2F0aW9uIHRpbWUgKDIgYnl0ZXMgdGltZSwgMiBieXRlcyBkYXRlKVxuICAgICAgICAgICAgZGF0YS53cml0ZVVJbnQzMkxFKF90aW1lLCBDb25zdGFudHMuTE9DVElNKTtcbiAgICAgICAgICAgIC8vIHVuY29tcHJlc3NlZCBmaWxlIGNyYy0zMiB2YWx1ZVxuICAgICAgICAgICAgZGF0YS53cml0ZVVJbnQzMkxFKF9jcmMsIENvbnN0YW50cy5MT0NDUkMpO1xuICAgICAgICAgICAgLy8gY29tcHJlc3NlZCBzaXplXG4gICAgICAgICAgICBkYXRhLndyaXRlVUludDMyTEUoX2NvbXByZXNzZWRTaXplLCBDb25zdGFudHMuTE9DU0laKTtcbiAgICAgICAgICAgIC8vIHVuY29tcHJlc3NlZCBzaXplXG4gICAgICAgICAgICBkYXRhLndyaXRlVUludDMyTEUoX3NpemUsIENvbnN0YW50cy5MT0NMRU4pO1xuICAgICAgICAgICAgLy8gZmlsZW5hbWUgbGVuZ3RoXG4gICAgICAgICAgICBkYXRhLndyaXRlVUludDE2TEUoX2ZuYW1lTGVuLCBDb25zdGFudHMuTE9DTkFNKTtcbiAgICAgICAgICAgIC8vIGV4dHJhIGZpZWxkIGxlbmd0aFxuICAgICAgICAgICAgZGF0YS53cml0ZVVJbnQxNkxFKF9sb2NhbEhlYWRlci5leHRyYUxlbiwgQ29uc3RhbnRzLkxPQ0VYVCk7XG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgfSxcblxuICAgICAgICBjZW50cmFsSGVhZGVyVG9CaW5hcnk6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIENFTiBoZWFkZXIgc2l6ZSAoNDYgYnl0ZXMpXG4gICAgICAgICAgICB2YXIgZGF0YSA9IEJ1ZmZlci5hbGxvYyhDb25zdGFudHMuQ0VOSERSICsgX2ZuYW1lTGVuICsgX2V4dHJhTGVuICsgX2NvbUxlbik7XG4gICAgICAgICAgICAvLyBcIlBLXFwwMDFcXDAwMlwiXG4gICAgICAgICAgICBkYXRhLndyaXRlVUludDMyTEUoQ29uc3RhbnRzLkNFTlNJRywgMCk7XG4gICAgICAgICAgICAvLyB2ZXJzaW9uIG1hZGUgYnlcbiAgICAgICAgICAgIGRhdGEud3JpdGVVSW50MTZMRShfdmVyTWFkZSwgQ29uc3RhbnRzLkNFTlZFTSk7XG4gICAgICAgICAgICAvLyB2ZXJzaW9uIG5lZWRlZCB0byBleHRyYWN0XG4gICAgICAgICAgICBkYXRhLndyaXRlVUludDE2TEUoX3ZlcnNpb24sIENvbnN0YW50cy5DRU5WRVIpO1xuICAgICAgICAgICAgLy8gZW5jcnlwdCwgZGVjcnlwdCBmbGFnc1xuICAgICAgICAgICAgZGF0YS53cml0ZVVJbnQxNkxFKF9mbGFncywgQ29uc3RhbnRzLkNFTkZMRyk7XG4gICAgICAgICAgICAvLyBjb21wcmVzc2lvbiBtZXRob2RcbiAgICAgICAgICAgIGRhdGEud3JpdGVVSW50MTZMRShfbWV0aG9kLCBDb25zdGFudHMuQ0VOSE9XKTtcbiAgICAgICAgICAgIC8vIG1vZGlmaWNhdGlvbiB0aW1lICgyIGJ5dGVzIHRpbWUsIDIgYnl0ZXMgZGF0ZSlcbiAgICAgICAgICAgIGRhdGEud3JpdGVVSW50MzJMRShfdGltZSwgQ29uc3RhbnRzLkNFTlRJTSk7XG4gICAgICAgICAgICAvLyB1bmNvbXByZXNzZWQgZmlsZSBjcmMtMzIgdmFsdWVcbiAgICAgICAgICAgIGRhdGEud3JpdGVVSW50MzJMRShfY3JjLCBDb25zdGFudHMuQ0VOQ1JDKTtcbiAgICAgICAgICAgIC8vIGNvbXByZXNzZWQgc2l6ZVxuICAgICAgICAgICAgZGF0YS53cml0ZVVJbnQzMkxFKF9jb21wcmVzc2VkU2l6ZSwgQ29uc3RhbnRzLkNFTlNJWik7XG4gICAgICAgICAgICAvLyB1bmNvbXByZXNzZWQgc2l6ZVxuICAgICAgICAgICAgZGF0YS53cml0ZVVJbnQzMkxFKF9zaXplLCBDb25zdGFudHMuQ0VOTEVOKTtcbiAgICAgICAgICAgIC8vIGZpbGVuYW1lIGxlbmd0aFxuICAgICAgICAgICAgZGF0YS53cml0ZVVJbnQxNkxFKF9mbmFtZUxlbiwgQ29uc3RhbnRzLkNFTk5BTSk7XG4gICAgICAgICAgICAvLyBleHRyYSBmaWVsZCBsZW5ndGhcbiAgICAgICAgICAgIGRhdGEud3JpdGVVSW50MTZMRShfZXh0cmFMZW4sIENvbnN0YW50cy5DRU5FWFQpO1xuICAgICAgICAgICAgLy8gZmlsZSBjb21tZW50IGxlbmd0aFxuICAgICAgICAgICAgZGF0YS53cml0ZVVJbnQxNkxFKF9jb21MZW4sIENvbnN0YW50cy5DRU5DT00pO1xuICAgICAgICAgICAgLy8gdm9sdW1lIG51bWJlciBzdGFydFxuICAgICAgICAgICAgZGF0YS53cml0ZVVJbnQxNkxFKF9kaXNrU3RhcnQsIENvbnN0YW50cy5DRU5EU0spO1xuICAgICAgICAgICAgLy8gaW50ZXJuYWwgZmlsZSBhdHRyaWJ1dGVzXG4gICAgICAgICAgICBkYXRhLndyaXRlVUludDE2TEUoX2luYXR0ciwgQ29uc3RhbnRzLkNFTkFUVCk7XG4gICAgICAgICAgICAvLyBleHRlcm5hbCBmaWxlIGF0dHJpYnV0ZXNcbiAgICAgICAgICAgIGRhdGEud3JpdGVVSW50MzJMRShfYXR0ciwgQ29uc3RhbnRzLkNFTkFUWCk7XG4gICAgICAgICAgICAvLyBMT0MgaGVhZGVyIG9mZnNldFxuICAgICAgICAgICAgZGF0YS53cml0ZVVJbnQzMkxFKF9vZmZzZXQsIENvbnN0YW50cy5DRU5PRkYpO1xuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIH0sXG5cbiAgICAgICAgdG9KU09OOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjb25zdCBieXRlcyA9IGZ1bmN0aW9uIChucikge1xuICAgICAgICAgICAgICAgIHJldHVybiBuciArIFwiIGJ5dGVzXCI7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG1hZGU6IF92ZXJNYWRlLFxuICAgICAgICAgICAgICAgIHZlcnNpb246IF92ZXJzaW9uLFxuICAgICAgICAgICAgICAgIGZsYWdzOiBfZmxhZ3MsXG4gICAgICAgICAgICAgICAgbWV0aG9kOiBVdGlscy5tZXRob2RUb1N0cmluZyhfbWV0aG9kKSxcbiAgICAgICAgICAgICAgICB0aW1lOiB0aGlzLnRpbWUsXG4gICAgICAgICAgICAgICAgY3JjOiBcIjB4XCIgKyBfY3JjLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpLFxuICAgICAgICAgICAgICAgIGNvbXByZXNzZWRTaXplOiBieXRlcyhfY29tcHJlc3NlZFNpemUpLFxuICAgICAgICAgICAgICAgIHNpemU6IGJ5dGVzKF9zaXplKSxcbiAgICAgICAgICAgICAgICBmaWxlTmFtZUxlbmd0aDogYnl0ZXMoX2ZuYW1lTGVuKSxcbiAgICAgICAgICAgICAgICBleHRyYUxlbmd0aDogYnl0ZXMoX2V4dHJhTGVuKSxcbiAgICAgICAgICAgICAgICBjb21tZW50TGVuZ3RoOiBieXRlcyhfY29tTGVuKSxcbiAgICAgICAgICAgICAgICBkaXNrTnVtU3RhcnQ6IF9kaXNrU3RhcnQsXG4gICAgICAgICAgICAgICAgaW5BdHRyOiBfaW5hdHRyLFxuICAgICAgICAgICAgICAgIGF0dHI6IF9hdHRyLFxuICAgICAgICAgICAgICAgIG9mZnNldDogX29mZnNldCxcbiAgICAgICAgICAgICAgICBjZW50cmFsSGVhZGVyU2l6ZTogYnl0ZXMoQ29uc3RhbnRzLkNFTkhEUiArIF9mbmFtZUxlbiArIF9leHRyYUxlbiArIF9jb21MZW4pXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuXG4gICAgICAgIHRvU3RyaW5nOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcy50b0pTT04oKSwgbnVsbCwgXCJcXHRcIik7XG4gICAgICAgIH1cbiAgICB9O1xufTtcbiIsICJ2YXIgVXRpbHMgPSByZXF1aXJlKFwiLi4vdXRpbFwiKSxcbiAgICBDb25zdGFudHMgPSBVdGlscy5Db25zdGFudHM7XG5cbi8qIFRoZSBlbnRyaWVzIGluIHRoZSBlbmQgb2YgY2VudHJhbCBkaXJlY3RvcnkgKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBfdm9sdW1lRW50cmllcyA9IDAsXG4gICAgICAgIF90b3RhbEVudHJpZXMgPSAwLFxuICAgICAgICBfc2l6ZSA9IDAsXG4gICAgICAgIF9vZmZzZXQgPSAwLFxuICAgICAgICBfY29tbWVudExlbmd0aCA9IDA7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBnZXQgZGlza0VudHJpZXMoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3ZvbHVtZUVudHJpZXM7XG4gICAgICAgIH0sXG4gICAgICAgIHNldCBkaXNrRW50cmllcygvKk51bWJlciovIHZhbCkge1xuICAgICAgICAgICAgX3ZvbHVtZUVudHJpZXMgPSBfdG90YWxFbnRyaWVzID0gdmFsO1xuICAgICAgICB9LFxuXG4gICAgICAgIGdldCB0b3RhbEVudHJpZXMoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3RvdGFsRW50cmllcztcbiAgICAgICAgfSxcbiAgICAgICAgc2V0IHRvdGFsRW50cmllcygvKk51bWJlciovIHZhbCkge1xuICAgICAgICAgICAgX3RvdGFsRW50cmllcyA9IF92b2x1bWVFbnRyaWVzID0gdmFsO1xuICAgICAgICB9LFxuXG4gICAgICAgIGdldCBzaXplKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zaXplO1xuICAgICAgICB9LFxuICAgICAgICBzZXQgc2l6ZSgvKk51bWJlciovIHZhbCkge1xuICAgICAgICAgICAgX3NpemUgPSB2YWw7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0IG9mZnNldCgpIHtcbiAgICAgICAgICAgIHJldHVybiBfb2Zmc2V0O1xuICAgICAgICB9LFxuICAgICAgICBzZXQgb2Zmc2V0KC8qTnVtYmVyKi8gdmFsKSB7XG4gICAgICAgICAgICBfb2Zmc2V0ID0gdmFsO1xuICAgICAgICB9LFxuXG4gICAgICAgIGdldCBjb21tZW50TGVuZ3RoKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9jb21tZW50TGVuZ3RoO1xuICAgICAgICB9LFxuICAgICAgICBzZXQgY29tbWVudExlbmd0aCgvKk51bWJlciovIHZhbCkge1xuICAgICAgICAgICAgX2NvbW1lbnRMZW5ndGggPSB2YWw7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0IG1haW5IZWFkZXJTaXplKCkge1xuICAgICAgICAgICAgcmV0dXJuIENvbnN0YW50cy5FTkRIRFIgKyBfY29tbWVudExlbmd0aDtcbiAgICAgICAgfSxcblxuICAgICAgICBsb2FkRnJvbUJpbmFyeTogZnVuY3Rpb24gKC8qQnVmZmVyKi8gZGF0YSkge1xuICAgICAgICAgICAgLy8gZGF0YSBzaG91bGQgYmUgMjIgYnl0ZXMgYW5kIHN0YXJ0IHdpdGggXCJQSyAwNSAwNlwiXG4gICAgICAgICAgICAvLyBvciBiZSA1NisgYnl0ZXMgYW5kIHN0YXJ0IHdpdGggXCJQSyAwNiAwNlwiIGZvciBaaXA2NFxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIChkYXRhLmxlbmd0aCAhPT0gQ29uc3RhbnRzLkVOREhEUiB8fCBkYXRhLnJlYWRVSW50MzJMRSgwKSAhPT0gQ29uc3RhbnRzLkVORFNJRykgJiZcbiAgICAgICAgICAgICAgICAoZGF0YS5sZW5ndGggPCBDb25zdGFudHMuWklQNjRIRFIgfHwgZGF0YS5yZWFkVUludDMyTEUoMCkgIT09IENvbnN0YW50cy5aSVA2NFNJRylcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHRocm93IFV0aWxzLkVycm9ycy5JTlZBTElEX0VORCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZGF0YS5yZWFkVUludDMyTEUoMCkgPT09IENvbnN0YW50cy5FTkRTSUcpIHtcbiAgICAgICAgICAgICAgICAvLyBudW1iZXIgb2YgZW50cmllcyBvbiB0aGlzIHZvbHVtZVxuICAgICAgICAgICAgICAgIF92b2x1bWVFbnRyaWVzID0gZGF0YS5yZWFkVUludDE2TEUoQ29uc3RhbnRzLkVORFNVQik7XG4gICAgICAgICAgICAgICAgLy8gdG90YWwgbnVtYmVyIG9mIGVudHJpZXNcbiAgICAgICAgICAgICAgICBfdG90YWxFbnRyaWVzID0gZGF0YS5yZWFkVUludDE2TEUoQ29uc3RhbnRzLkVORFRPVCk7XG4gICAgICAgICAgICAgICAgLy8gY2VudHJhbCBkaXJlY3Rvcnkgc2l6ZSBpbiBieXRlc1xuICAgICAgICAgICAgICAgIF9zaXplID0gZGF0YS5yZWFkVUludDMyTEUoQ29uc3RhbnRzLkVORFNJWik7XG4gICAgICAgICAgICAgICAgLy8gb2Zmc2V0IG9mIGZpcnN0IENFTiBoZWFkZXJcbiAgICAgICAgICAgICAgICBfb2Zmc2V0ID0gZGF0YS5yZWFkVUludDMyTEUoQ29uc3RhbnRzLkVORE9GRik7XG4gICAgICAgICAgICAgICAgLy8gemlwIGZpbGUgY29tbWVudCBsZW5ndGhcbiAgICAgICAgICAgICAgICBfY29tbWVudExlbmd0aCA9IGRhdGEucmVhZFVJbnQxNkxFKENvbnN0YW50cy5FTkRDT00pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBudW1iZXIgb2YgZW50cmllcyBvbiB0aGlzIHZvbHVtZVxuICAgICAgICAgICAgICAgIF92b2x1bWVFbnRyaWVzID0gVXRpbHMucmVhZEJpZ1VJbnQ2NExFKGRhdGEsIENvbnN0YW50cy5aSVA2NFNVQik7XG4gICAgICAgICAgICAgICAgLy8gdG90YWwgbnVtYmVyIG9mIGVudHJpZXNcbiAgICAgICAgICAgICAgICBfdG90YWxFbnRyaWVzID0gVXRpbHMucmVhZEJpZ1VJbnQ2NExFKGRhdGEsIENvbnN0YW50cy5aSVA2NFRPVCk7XG4gICAgICAgICAgICAgICAgLy8gY2VudHJhbCBkaXJlY3Rvcnkgc2l6ZSBpbiBieXRlc1xuICAgICAgICAgICAgICAgIF9zaXplID0gVXRpbHMucmVhZEJpZ1VJbnQ2NExFKGRhdGEsIENvbnN0YW50cy5aSVA2NFNJWkUpO1xuICAgICAgICAgICAgICAgIC8vIG9mZnNldCBvZiBmaXJzdCBDRU4gaGVhZGVyXG4gICAgICAgICAgICAgICAgX29mZnNldCA9IFV0aWxzLnJlYWRCaWdVSW50NjRMRShkYXRhLCBDb25zdGFudHMuWklQNjRPRkYpO1xuXG4gICAgICAgICAgICAgICAgX2NvbW1lbnRMZW5ndGggPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHRvQmluYXJ5OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYiA9IEJ1ZmZlci5hbGxvYyhDb25zdGFudHMuRU5ESERSICsgX2NvbW1lbnRMZW5ndGgpO1xuICAgICAgICAgICAgLy8gXCJQSyAwNSAwNlwiIHNpZ25hdHVyZVxuICAgICAgICAgICAgYi53cml0ZVVJbnQzMkxFKENvbnN0YW50cy5FTkRTSUcsIDApO1xuICAgICAgICAgICAgYi53cml0ZVVJbnQzMkxFKDAsIDQpO1xuICAgICAgICAgICAgLy8gbnVtYmVyIG9mIGVudHJpZXMgb24gdGhpcyB2b2x1bWVcbiAgICAgICAgICAgIGIud3JpdGVVSW50MTZMRShfdm9sdW1lRW50cmllcywgQ29uc3RhbnRzLkVORFNVQik7XG4gICAgICAgICAgICAvLyB0b3RhbCBudW1iZXIgb2YgZW50cmllc1xuICAgICAgICAgICAgYi53cml0ZVVJbnQxNkxFKF90b3RhbEVudHJpZXMsIENvbnN0YW50cy5FTkRUT1QpO1xuICAgICAgICAgICAgLy8gY2VudHJhbCBkaXJlY3Rvcnkgc2l6ZSBpbiBieXRlc1xuICAgICAgICAgICAgYi53cml0ZVVJbnQzMkxFKF9zaXplLCBDb25zdGFudHMuRU5EU0laKTtcbiAgICAgICAgICAgIC8vIG9mZnNldCBvZiBmaXJzdCBDRU4gaGVhZGVyXG4gICAgICAgICAgICBiLndyaXRlVUludDMyTEUoX29mZnNldCwgQ29uc3RhbnRzLkVORE9GRik7XG4gICAgICAgICAgICAvLyB6aXAgZmlsZSBjb21tZW50IGxlbmd0aFxuICAgICAgICAgICAgYi53cml0ZVVJbnQxNkxFKF9jb21tZW50TGVuZ3RoLCBDb25zdGFudHMuRU5EQ09NKTtcbiAgICAgICAgICAgIC8vIGZpbGwgY29tbWVudCBtZW1vcnkgd2l0aCBzcGFjZXMgc28gbm8gZ2FyYmFnZSBpcyBsZWZ0IHRoZXJlXG4gICAgICAgICAgICBiLmZpbGwoXCIgXCIsIENvbnN0YW50cy5FTkRIRFIpO1xuXG4gICAgICAgICAgICByZXR1cm4gYjtcbiAgICAgICAgfSxcblxuICAgICAgICB0b0pTT046IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIGNyZWF0ZXMgMHgwMDAwIHN0eWxlIG91dHB1dFxuICAgICAgICAgICAgY29uc3Qgb2Zmc2V0ID0gZnVuY3Rpb24gKG5yLCBsZW4pIHtcbiAgICAgICAgICAgICAgICBsZXQgb2ZmcyA9IG5yLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgICAgIHdoaWxlIChvZmZzLmxlbmd0aCA8IGxlbikgb2ZmcyA9IFwiMFwiICsgb2ZmcztcbiAgICAgICAgICAgICAgICByZXR1cm4gXCIweFwiICsgb2ZmcztcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZGlza0VudHJpZXM6IF92b2x1bWVFbnRyaWVzLFxuICAgICAgICAgICAgICAgIHRvdGFsRW50cmllczogX3RvdGFsRW50cmllcyxcbiAgICAgICAgICAgICAgICBzaXplOiBfc2l6ZSArIFwiIGJ5dGVzXCIsXG4gICAgICAgICAgICAgICAgb2Zmc2V0OiBvZmZzZXQoX29mZnNldCwgNCksXG4gICAgICAgICAgICAgICAgY29tbWVudExlbmd0aDogX2NvbW1lbnRMZW5ndGhcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG5cbiAgICAgICAgdG9TdHJpbmc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLnRvSlNPTigpLCBudWxsLCBcIlxcdFwiKTtcbiAgICAgICAgfVxuICAgIH07XG59O1xuLy8gTWlzc3BlbGxlZFxuIiwgImV4cG9ydHMuRW50cnlIZWFkZXIgPSByZXF1aXJlKFwiLi9lbnRyeUhlYWRlclwiKTtcbmV4cG9ydHMuTWFpbkhlYWRlciA9IHJlcXVpcmUoXCIuL21haW5IZWFkZXJcIik7XG4iLCAibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoLypCdWZmZXIqLyBpbmJ1Zikge1xuICAgIHZhciB6bGliID0gcmVxdWlyZShcInpsaWJcIik7XG5cbiAgICB2YXIgb3B0cyA9IHsgY2h1bmtTaXplOiAocGFyc2VJbnQoaW5idWYubGVuZ3RoIC8gMTAyNCkgKyAxKSAqIDEwMjQgfTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGRlZmxhdGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB6bGliLmRlZmxhdGVSYXdTeW5jKGluYnVmLCBvcHRzKTtcbiAgICAgICAgfSxcblxuICAgICAgICBkZWZsYXRlQXN5bmM6IGZ1bmN0aW9uICgvKkZ1bmN0aW9uKi8gY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHZhciB0bXAgPSB6bGliLmNyZWF0ZURlZmxhdGVSYXcob3B0cyksXG4gICAgICAgICAgICAgICAgcGFydHMgPSBbXSxcbiAgICAgICAgICAgICAgICB0b3RhbCA9IDA7XG4gICAgICAgICAgICB0bXAub24oXCJkYXRhXCIsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgcGFydHMucHVzaChkYXRhKTtcbiAgICAgICAgICAgICAgICB0b3RhbCArPSBkYXRhLmxlbmd0aDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdG1wLm9uKFwiZW5kXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgYnVmID0gQnVmZmVyLmFsbG9jKHRvdGFsKSxcbiAgICAgICAgICAgICAgICAgICAgd3JpdHRlbiA9IDA7XG4gICAgICAgICAgICAgICAgYnVmLmZpbGwoMCk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXJ0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGFydCA9IHBhcnRzW2ldO1xuICAgICAgICAgICAgICAgICAgICBwYXJ0LmNvcHkoYnVmLCB3cml0dGVuKTtcbiAgICAgICAgICAgICAgICAgICAgd3JpdHRlbiArPSBwYXJ0Lmxlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soYnVmKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdG1wLmVuZChpbmJ1Zik7XG4gICAgICAgIH1cbiAgICB9O1xufTtcbiIsICJjb25zdCB2ZXJzaW9uID0gKyhwcm9jZXNzLnZlcnNpb25zID8gcHJvY2Vzcy52ZXJzaW9ucy5ub2RlIDogXCJcIikuc3BsaXQoXCIuXCIpWzBdIHx8IDA7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKC8qQnVmZmVyKi8gaW5idWYsIC8qbnVtYmVyKi8gZXhwZWN0ZWRMZW5ndGgpIHtcbiAgICB2YXIgemxpYiA9IHJlcXVpcmUoXCJ6bGliXCIpO1xuICAgIGNvbnN0IG9wdGlvbiA9IHZlcnNpb24gPj0gMTUgJiYgZXhwZWN0ZWRMZW5ndGggPiAwID8geyBtYXhPdXRwdXRMZW5ndGg6IGV4cGVjdGVkTGVuZ3RoIH0gOiB7fTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGluZmxhdGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB6bGliLmluZmxhdGVSYXdTeW5jKGluYnVmLCBvcHRpb24pO1xuICAgICAgICB9LFxuXG4gICAgICAgIGluZmxhdGVBc3luYzogZnVuY3Rpb24gKC8qRnVuY3Rpb24qLyBjYWxsYmFjaykge1xuICAgICAgICAgICAgdmFyIHRtcCA9IHpsaWIuY3JlYXRlSW5mbGF0ZVJhdyhvcHRpb24pLFxuICAgICAgICAgICAgICAgIHBhcnRzID0gW10sXG4gICAgICAgICAgICAgICAgdG90YWwgPSAwO1xuICAgICAgICAgICAgdG1wLm9uKFwiZGF0YVwiLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIHBhcnRzLnB1c2goZGF0YSk7XG4gICAgICAgICAgICAgICAgdG90YWwgKz0gZGF0YS5sZW5ndGg7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRtcC5vbihcImVuZFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGJ1ZiA9IEJ1ZmZlci5hbGxvYyh0b3RhbCksXG4gICAgICAgICAgICAgICAgICAgIHdyaXR0ZW4gPSAwO1xuICAgICAgICAgICAgICAgIGJ1Zi5maWxsKDApO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcnQgPSBwYXJ0c1tpXTtcbiAgICAgICAgICAgICAgICAgICAgcGFydC5jb3B5KGJ1Ziwgd3JpdHRlbik7XG4gICAgICAgICAgICAgICAgICAgIHdyaXR0ZW4gKz0gcGFydC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKGJ1Zik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRtcC5lbmQoaW5idWYpO1xuICAgICAgICB9XG4gICAgfTtcbn07XG4iLCAiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8vIG5vZGUgY3J5cHQsIHdlIHVzZSBpdCBmb3IgZ2VuZXJhdGUgc2FsdFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vZGUvbm8tdW5zdXBwb3J0ZWQtZmVhdHVyZXMvbm9kZS1idWlsdGluc1xuY29uc3QgeyByYW5kb21GaWxsU3luYyB9ID0gcmVxdWlyZShcImNyeXB0b1wiKTtcbmNvbnN0IEVycm9ycyA9IHJlcXVpcmUoXCIuLi91dGlsL2Vycm9yc1wiKTtcblxuLy8gZ2VuZXJhdGUgQ1JDMzIgbG9va3VwIHRhYmxlXG5jb25zdCBjcmN0YWJsZSA9IG5ldyBVaW50MzJBcnJheSgyNTYpLm1hcCgodCwgY3JjKSA9PiB7XG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCA4OyBqKyspIHtcbiAgICAgICAgaWYgKDAgIT09IChjcmMgJiAxKSkge1xuICAgICAgICAgICAgY3JjID0gKGNyYyA+Pj4gMSkgXiAweGVkYjg4MzIwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY3JjID4+Pj0gMTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY3JjID4+PiAwO1xufSk7XG5cbi8vIEMtc3R5bGUgdUludDMyIE11bHRpcGx5IChkaXNjYXJkcyBoaWdoZXIgYml0cywgd2hlbiBKUyBtdWx0aXBseSBkaXNjYXJkcyBsb3dlciBiaXRzKVxuY29uc3QgdU11bCA9IChhLCBiKSA9PiBNYXRoLmltdWwoYSwgYikgPj4+IDA7XG5cbi8vIGNyYzMyIGJ5dGUgc2luZ2xlIHVwZGF0ZSAoYWN0dWFsbHkgc2FtZSBmdW5jdGlvbiBpcyBwYXJ0IG9mIHV0aWxzLmNyYzMyIGZ1bmN0aW9uIDopIClcbmNvbnN0IGNyYzMydXBkYXRlID0gKHBDcmMzMiwgYnZhbCkgPT4ge1xuICAgIHJldHVybiBjcmN0YWJsZVsocENyYzMyIF4gYnZhbCkgJiAweGZmXSBeIChwQ3JjMzIgPj4+IDgpO1xufTtcblxuLy8gZnVuY3Rpb24gZm9yIGdlbmVyYXRpbmcgc2FsdCBmb3IgZW5jcnl0aW9uIGhlYWRlclxuY29uc3QgZ2VuU2FsdCA9ICgpID0+IHtcbiAgICBpZiAoXCJmdW5jdGlvblwiID09PSB0eXBlb2YgcmFuZG9tRmlsbFN5bmMpIHtcbiAgICAgICAgcmV0dXJuIHJhbmRvbUZpbGxTeW5jKEJ1ZmZlci5hbGxvYygxMikpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGZhbGxiYWNrIGlmIGZ1bmN0aW9uIGlzIG5vdCBkZWZpbmVkXG4gICAgICAgIHJldHVybiBnZW5TYWx0Lm5vZGUoKTtcbiAgICB9XG59O1xuXG4vLyBzYWx0IGdlbmVyYXRpb24gd2l0aCBub2RlIHJhbmRvbSBmdW5jdGlvbiAobWFpbmx5IGFzIGZhbGxiYWNrKVxuZ2VuU2FsdC5ub2RlID0gKCkgPT4ge1xuICAgIGNvbnN0IHNhbHQgPSBCdWZmZXIuYWxsb2MoMTIpO1xuICAgIGNvbnN0IGxlbiA9IHNhbHQubGVuZ3RoO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHNhbHRbaV0gPSAoTWF0aC5yYW5kb20oKSAqIDI1NikgJiAweGZmO1xuICAgIHJldHVybiBzYWx0O1xufTtcblxuLy8gZ2VuZXJhbCBjb25maWdcbmNvbnN0IGNvbmZpZyA9IHtcbiAgICBnZW5TYWx0XG59O1xuXG4vLyBDbGFzcyBJbml0a2V5cyBoYW5kbGVzIHNhbWUgYmFzaWMgb3BzIHdpdGgga2V5c1xuZnVuY3Rpb24gSW5pdGtleXMocHcpIHtcbiAgICBjb25zdCBwYXNzID0gQnVmZmVyLmlzQnVmZmVyKHB3KSA/IHB3IDogQnVmZmVyLmZyb20ocHcpO1xuICAgIHRoaXMua2V5cyA9IG5ldyBVaW50MzJBcnJheShbMHgxMjM0NTY3OCwgMHgyMzQ1Njc4OSwgMHgzNDU2Nzg5MF0pO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFzcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLnVwZGF0ZUtleXMocGFzc1tpXSk7XG4gICAgfVxufVxuXG5Jbml0a2V5cy5wcm90b3R5cGUudXBkYXRlS2V5cyA9IGZ1bmN0aW9uIChieXRlVmFsdWUpIHtcbiAgICBjb25zdCBrZXlzID0gdGhpcy5rZXlzO1xuICAgIGtleXNbMF0gPSBjcmMzMnVwZGF0ZShrZXlzWzBdLCBieXRlVmFsdWUpO1xuICAgIGtleXNbMV0gKz0ga2V5c1swXSAmIDB4ZmY7XG4gICAga2V5c1sxXSA9IHVNdWwoa2V5c1sxXSwgMTM0Nzc1ODEzKSArIDE7XG4gICAga2V5c1syXSA9IGNyYzMydXBkYXRlKGtleXNbMl0sIGtleXNbMV0gPj4+IDI0KTtcbiAgICByZXR1cm4gYnl0ZVZhbHVlO1xufTtcblxuSW5pdGtleXMucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgayA9ICh0aGlzLmtleXNbMl0gfCAyKSA+Pj4gMDsgLy8ga2V5XG4gICAgcmV0dXJuICh1TXVsKGssIGsgXiAxKSA+PiA4KSAmIDB4ZmY7IC8vIGRlY29kZVxufTtcblxuZnVuY3Rpb24gbWFrZV9kZWNyeXB0ZXIoLypCdWZmZXIqLyBwd2QpIHtcbiAgICAvLyAxLiBTdGFnZSBpbml0aWFsaXplIGtleVxuICAgIGNvbnN0IGtleXMgPSBuZXcgSW5pdGtleXMocHdkKTtcblxuICAgIC8vIHJldHVybiBkZWNyeXB0ZXIgZnVuY3Rpb25cbiAgICByZXR1cm4gZnVuY3Rpb24gKC8qQnVmZmVyKi8gZGF0YSkge1xuICAgICAgICAvLyByZXN1bHQgLSB3ZSBjcmVhdGUgbmV3IEJ1ZmZlciBmb3IgcmVzdWx0c1xuICAgICAgICBjb25zdCByZXN1bHQgPSBCdWZmZXIuYWxsb2MoZGF0YS5sZW5ndGgpO1xuICAgICAgICBsZXQgcG9zID0gMDtcbiAgICAgICAgLy8gcHJvY2VzcyBpbnB1dCBkYXRhXG4gICAgICAgIGZvciAobGV0IGMgb2YgZGF0YSkge1xuICAgICAgICAgICAgLy9jIF49IGtleXMubmV4dCgpO1xuICAgICAgICAgICAgLy9yZXN1bHRbcG9zKytdID0gYzsgLy8gZGVjb2RlICYgU2F2ZSBWYWx1ZVxuICAgICAgICAgICAgcmVzdWx0W3BvcysrXSA9IGtleXMudXBkYXRlS2V5cyhjIF4ga2V5cy5uZXh0KCkpOyAvLyB1cGRhdGUga2V5cyB3aXRoIGRlY29kZWQgYnl0ZVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gbWFrZV9lbmNyeXB0ZXIoLypCdWZmZXIqLyBwd2QpIHtcbiAgICAvLyAxLiBTdGFnZSBpbml0aWFsaXplIGtleVxuICAgIGNvbnN0IGtleXMgPSBuZXcgSW5pdGtleXMocHdkKTtcblxuICAgIC8vIHJldHVybiBlbmNyeXB0aW5nIGZ1bmN0aW9uLCByZXN1bHQgYW5kIHBvcyBpcyBoZXJlIHNvIHdlIGRvbnQgaGF2ZSB0byBtZXJnZSBidWZmZXJzIGxhdGVyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgvKkJ1ZmZlciovIGRhdGEsIC8qQnVmZmVyKi8gcmVzdWx0LCAvKiBOdW1iZXIgKi8gcG9zID0gMCkge1xuICAgICAgICAvLyByZXN1bHQgLSB3ZSBjcmVhdGUgbmV3IEJ1ZmZlciBmb3IgcmVzdWx0c1xuICAgICAgICBpZiAoIXJlc3VsdCkgcmVzdWx0ID0gQnVmZmVyLmFsbG9jKGRhdGEubGVuZ3RoKTtcbiAgICAgICAgLy8gcHJvY2VzcyBpbnB1dCBkYXRhXG4gICAgICAgIGZvciAobGV0IGMgb2YgZGF0YSkge1xuICAgICAgICAgICAgY29uc3QgayA9IGtleXMubmV4dCgpOyAvLyBzYXZlIGtleSBieXRlXG4gICAgICAgICAgICByZXN1bHRbcG9zKytdID0gYyBeIGs7IC8vIHNhdmUgdmFsXG4gICAgICAgICAgICBrZXlzLnVwZGF0ZUtleXMoYyk7IC8vIHVwZGF0ZSBrZXlzIHdpdGggZGVjb2RlZCBieXRlXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBkZWNyeXB0KC8qQnVmZmVyKi8gZGF0YSwgLypPYmplY3QqLyBoZWFkZXIsIC8qU3RyaW5nLCBCdWZmZXIqLyBwd2QpIHtcbiAgICBpZiAoIWRhdGEgfHwgIUJ1ZmZlci5pc0J1ZmZlcihkYXRhKSB8fCBkYXRhLmxlbmd0aCA8IDEyKSB7XG4gICAgICAgIHJldHVybiBCdWZmZXIuYWxsb2MoMCk7XG4gICAgfVxuXG4gICAgLy8gMS4gV2UgSW5pdGlhbGl6ZSBhbmQgZ2VuZXJhdGUgZGVjcnlwdGluZyBmdW5jdGlvblxuICAgIGNvbnN0IGRlY3J5cHRlciA9IG1ha2VfZGVjcnlwdGVyKHB3ZCk7XG5cbiAgICAvLyAyLiBkZWNyeXB0IHNhbHQgd2hhdCBpcyBhbHdheXMgMTIgYnl0ZXMgYW5kIGlzIGEgcGFydCBvZiBmaWxlIGNvbnRlbnRcbiAgICBjb25zdCBzYWx0ID0gZGVjcnlwdGVyKGRhdGEuc2xpY2UoMCwgMTIpKTtcblxuICAgIC8vIGlmIGJpdCAzICgweDA4KSBvZiB0aGUgZ2VuZXJhbC1wdXJwb3NlIGZsYWdzIGZpZWxkIGlzIHNldCwgY2hlY2sgc2FsdFsxMV0gd2l0aCB0aGUgaGlnaCBieXRlIG9mIHRoZSBoZWFkZXIgdGltZVxuICAgIC8vIDIgYnl0ZSBkYXRhIGJsb2NrIChhcyBwZXIgSW5mby1aaXAgc3BlYyksIG90aGVyd2lzZSBjaGVjayB3aXRoIHRoZSBoaWdoIGJ5dGUgb2YgdGhlIGhlYWRlciBlbnRyeVxuICAgIGNvbnN0IHZlcmlmeUJ5dGUgPSAoaGVhZGVyLmZsYWdzICYgMHg4KSA9PT0gMHg4ID8gaGVhZGVyLnRpbWVIaWdoQnl0ZSA6IGhlYWRlci5jcmMgPj4+IDI0O1xuXG4gICAgLy8zLiBkb2VzIHBhc3N3b3JkIG1lZXQgZXhwZWN0YXRpb25zXG4gICAgaWYgKHNhbHRbMTFdICE9PSB2ZXJpZnlCeXRlKSB7XG4gICAgICAgIHRocm93IEVycm9ycy5XUk9OR19QQVNTV09SRCgpO1xuICAgIH1cblxuICAgIC8vIDQuIGRlY29kZSBjb250ZW50XG4gICAgcmV0dXJuIGRlY3J5cHRlcihkYXRhLnNsaWNlKDEyKSk7XG59XG5cbi8vIGxldHMgYWRkIHdheSB0byBwb3B1bGF0ZSBzYWx0LCBOT1QgUkVDT01NRU5ERUQgZm9yIHByb2R1Y3Rpb24gYnV0IG1heWJlIHVzZWZ1bCBmb3IgdGVzdGluZyBnZW5lcmFsIGZ1bmN0aW9uYWxpdHlcbmZ1bmN0aW9uIF9zYWx0ZXIoZGF0YSkge1xuICAgIGlmIChCdWZmZXIuaXNCdWZmZXIoZGF0YSkgJiYgZGF0YS5sZW5ndGggPj0gMTIpIHtcbiAgICAgICAgLy8gYmUgYXdhcmUgLSBjdXJyZW50bHkgc2FsdGluZyBidWZmZXIgZGF0YSBpcyBtb2RpZmllZFxuICAgICAgICBjb25maWcuZ2VuU2FsdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBkYXRhLnNsaWNlKDAsIDEyKTtcbiAgICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKGRhdGEgPT09IFwibm9kZVwiKSB7XG4gICAgICAgIC8vIHRlc3Qgc2FsdCBnZW5lcmF0aW9uIHdpdGggbm9kZSByYW5kb20gZnVuY3Rpb25cbiAgICAgICAgY29uZmlnLmdlblNhbHQgPSBnZW5TYWx0Lm5vZGU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gaWYgdmFsdWUgaXMgbm90IGFjY2VwdGFibGUgY29uZmlnIGdldHMgcmVzZXQuXG4gICAgICAgIGNvbmZpZy5nZW5TYWx0ID0gZ2VuU2FsdDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGVuY3J5cHQoLypCdWZmZXIqLyBkYXRhLCAvKk9iamVjdCovIGhlYWRlciwgLypTdHJpbmcsIEJ1ZmZlciovIHB3ZCwgLypCb29sZWFuKi8gb2xkbGlrZSA9IGZhbHNlKSB7XG4gICAgLy8gMS4gdGVzdCBkYXRhIGlmIGRhdGEgaXMgbm90IEJ1ZmZlciB3ZSBtYWtlIGJ1ZmZlciBmcm9tIGl0XG4gICAgaWYgKGRhdGEgPT0gbnVsbCkgZGF0YSA9IEJ1ZmZlci5hbGxvYygwKTtcbiAgICAvLyBpZiBkYXRhIGlzIG5vdCBidWZmZXIgYmUgbWFrZSBidWZmZXIgZnJvbSBpdFxuICAgIGlmICghQnVmZmVyLmlzQnVmZmVyKGRhdGEpKSBkYXRhID0gQnVmZmVyLmZyb20oZGF0YS50b1N0cmluZygpKTtcblxuICAgIC8vIDIuIFdlIEluaXRpYWxpemUgYW5kIGdlbmVyYXRlIGVuY3J5cHRpbmcgZnVuY3Rpb25cbiAgICBjb25zdCBlbmNyeXB0ZXIgPSBtYWtlX2VuY3J5cHRlcihwd2QpO1xuXG4gICAgLy8gMy4gZ2VuZXJhdGUgc2FsdCAoMTItYnl0ZXMgb2YgcmFuZG9tIGRhdGEpXG4gICAgY29uc3Qgc2FsdCA9IGNvbmZpZy5nZW5TYWx0KCk7XG4gICAgc2FsdFsxMV0gPSAoaGVhZGVyLmNyYyA+Pj4gMjQpICYgMHhmZjtcblxuICAgIC8vIG9sZCBpbXBsZW1lbnRhdGlvbnMgKGJlZm9yZSBQS1ppcCAyLjA0ZykgdXNlZCB0d28gYnl0ZSBjaGVja1xuICAgIGlmIChvbGRsaWtlKSBzYWx0WzEwXSA9IChoZWFkZXIuY3JjID4+PiAxNikgJiAweGZmO1xuXG4gICAgLy8gNC4gY3JlYXRlIG91dHB1dFxuICAgIGNvbnN0IHJlc3VsdCA9IEJ1ZmZlci5hbGxvYyhkYXRhLmxlbmd0aCArIDEyKTtcbiAgICBlbmNyeXB0ZXIoc2FsdCwgcmVzdWx0KTtcblxuICAgIC8vIGZpbmFsbHkgZW5jb2RlIGNvbnRlbnRcbiAgICByZXR1cm4gZW5jcnlwdGVyKGRhdGEsIHJlc3VsdCwgMTIpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHsgZGVjcnlwdCwgZW5jcnlwdCwgX3NhbHRlciB9O1xuIiwgImV4cG9ydHMuRGVmbGF0ZXIgPSByZXF1aXJlKFwiLi9kZWZsYXRlclwiKTtcbmV4cG9ydHMuSW5mbGF0ZXIgPSByZXF1aXJlKFwiLi9pbmZsYXRlclwiKTtcbmV4cG9ydHMuWmlwQ3J5cHRvID0gcmVxdWlyZShcIi4vemlwY3J5cHRvXCIpO1xuIiwgInZhciBVdGlscyA9IHJlcXVpcmUoXCIuL3V0aWxcIiksXG4gICAgSGVhZGVycyA9IHJlcXVpcmUoXCIuL2hlYWRlcnNcIiksXG4gICAgQ29uc3RhbnRzID0gVXRpbHMuQ29uc3RhbnRzLFxuICAgIE1ldGhvZHMgPSByZXF1aXJlKFwiLi9tZXRob2RzXCIpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgvKiogb2JqZWN0ICovIG9wdGlvbnMsIC8qQnVmZmVyKi8gaW5wdXQpIHtcbiAgICB2YXIgX2NlbnRyYWxIZWFkZXIgPSBuZXcgSGVhZGVycy5FbnRyeUhlYWRlcigpLFxuICAgICAgICBfZW50cnlOYW1lID0gQnVmZmVyLmFsbG9jKDApLFxuICAgICAgICBfY29tbWVudCA9IEJ1ZmZlci5hbGxvYygwKSxcbiAgICAgICAgX2lzRGlyZWN0b3J5ID0gZmFsc2UsXG4gICAgICAgIHVuY29tcHJlc3NlZERhdGEgPSBudWxsLFxuICAgICAgICBfZXh0cmEgPSBCdWZmZXIuYWxsb2MoMCksXG4gICAgICAgIF9leHRyYWxvY2FsID0gQnVmZmVyLmFsbG9jKDApLFxuICAgICAgICBfZWZzID0gdHJ1ZTtcblxuICAgIC8vIGFzc2lnbiBvcHRpb25zXG4gICAgY29uc3Qgb3B0cyA9IG9wdGlvbnM7XG5cbiAgICBjb25zdCBkZWNvZGVyID0gdHlwZW9mIG9wdHMuZGVjb2RlciA9PT0gXCJvYmplY3RcIiA/IG9wdHMuZGVjb2RlciA6IFV0aWxzLmRlY29kZXI7XG4gICAgX2VmcyA9IGRlY29kZXIuaGFzT3duUHJvcGVydHkoXCJlZnNcIikgPyBkZWNvZGVyLmVmcyA6IGZhbHNlO1xuXG4gICAgZnVuY3Rpb24gZ2V0Q29tcHJlc3NlZERhdGFGcm9tWmlwKCkge1xuICAgICAgICAvL2lmICghaW5wdXQgfHwgIUJ1ZmZlci5pc0J1ZmZlcihpbnB1dCkpIHtcbiAgICAgICAgaWYgKCFpbnB1dCB8fCAhKGlucHV0IGluc3RhbmNlb2YgVWludDhBcnJheSkpIHtcbiAgICAgICAgICAgIHJldHVybiBCdWZmZXIuYWxsb2MoMCk7XG4gICAgICAgIH1cbiAgICAgICAgX2V4dHJhbG9jYWwgPSBfY2VudHJhbEhlYWRlci5sb2FkTG9jYWxIZWFkZXJGcm9tQmluYXJ5KGlucHV0KTtcbiAgICAgICAgcmV0dXJuIGlucHV0LnNsaWNlKF9jZW50cmFsSGVhZGVyLnJlYWxEYXRhT2Zmc2V0LCBfY2VudHJhbEhlYWRlci5yZWFsRGF0YU9mZnNldCArIF9jZW50cmFsSGVhZGVyLmNvbXByZXNzZWRTaXplKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmMzMk9LKGRhdGEpIHtcbiAgICAgICAgLy8gaWYgYml0IDMgKDB4MDgpIG9mIHRoZSBnZW5lcmFsLXB1cnBvc2UgZmxhZ3MgZmllbGQgaXMgc2V0LCB0aGVuIHRoZSBDUkMtMzIgYW5kIGZpbGUgc2l6ZXMgYXJlIG5vdCBrbm93biB3aGVuIHRoZSBsb2NhbCBoZWFkZXIgaXMgd3JpdHRlblxuICAgICAgICBpZiAoIV9jZW50cmFsSGVhZGVyLmZsYWdzX2Rlc2MpIHtcbiAgICAgICAgICAgIGlmIChVdGlscy5jcmMzMihkYXRhKSAhPT0gX2NlbnRyYWxIZWFkZXIubG9jYWxIZWFkZXIuY3JjKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZGVzY3JpcHRvciA9IHt9O1xuICAgICAgICAgICAgY29uc3QgZGF0YUVuZE9mZnNldCA9IF9jZW50cmFsSGVhZGVyLnJlYWxEYXRhT2Zmc2V0ICsgX2NlbnRyYWxIZWFkZXIuY29tcHJlc3NlZFNpemU7XG4gICAgICAgICAgICAvLyBubyBkZXNjcmlwdG9yIGFmdGVyIGNvbXByZXNzZWQgZGF0YSwgaW5zdGVhZCBuZXcgbG9jYWwgaGVhZGVyXG4gICAgICAgICAgICBpZiAoaW5wdXQucmVhZFVJbnQzMkxFKGRhdGFFbmRPZmZzZXQpID09IENvbnN0YW50cy5MT0NTSUcgfHwgaW5wdXQucmVhZFVJbnQzMkxFKGRhdGFFbmRPZmZzZXQpID09IENvbnN0YW50cy5DRU5TSUcpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBVdGlscy5FcnJvcnMuREVTQ1JJUFRPUl9OT1RfRVhJU1QoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gZ2V0IGRlY3JpcHRvciBkYXRhXG4gICAgICAgICAgICBpZiAoaW5wdXQucmVhZFVJbnQzMkxFKGRhdGFFbmRPZmZzZXQpID09IENvbnN0YW50cy5FWFRTSUcpIHtcbiAgICAgICAgICAgICAgICAvLyBkZXNjcmlwdG9yIHdpdGggc2lnbmF0dXJlXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRvci5jcmMgPSBpbnB1dC5yZWFkVUludDMyTEUoZGF0YUVuZE9mZnNldCArIENvbnN0YW50cy5FWFRDUkMpO1xuICAgICAgICAgICAgICAgIGRlc2NyaXB0b3IuY29tcHJlc3NlZFNpemUgPSBpbnB1dC5yZWFkVUludDMyTEUoZGF0YUVuZE9mZnNldCArIENvbnN0YW50cy5FWFRTSVopO1xuICAgICAgICAgICAgICAgIGRlc2NyaXB0b3Iuc2l6ZSA9IGlucHV0LnJlYWRVSW50MzJMRShkYXRhRW5kT2Zmc2V0ICsgQ29uc3RhbnRzLkVYVExFTik7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlucHV0LnJlYWRVSW50MTZMRShkYXRhRW5kT2Zmc2V0ICsgMTIpID09PSAweDRiNTApIHtcbiAgICAgICAgICAgICAgICAvLyBkZXNjcmlwdG9yIHdpdGhvdXQgc2lnbmF0dXJlICh3ZSBjaGVjayBpcyBuZXcgaGVhZGVyIHN0YXJ0aW5nIHdoZXJlIHdlIGV4cGVjdClcbiAgICAgICAgICAgICAgICBkZXNjcmlwdG9yLmNyYyA9IGlucHV0LnJlYWRVSW50MzJMRShkYXRhRW5kT2Zmc2V0ICsgQ29uc3RhbnRzLkVYVENSQyAtIDQpO1xuICAgICAgICAgICAgICAgIGRlc2NyaXB0b3IuY29tcHJlc3NlZFNpemUgPSBpbnB1dC5yZWFkVUludDMyTEUoZGF0YUVuZE9mZnNldCArIENvbnN0YW50cy5FWFRTSVogLSA0KTtcbiAgICAgICAgICAgICAgICBkZXNjcmlwdG9yLnNpemUgPSBpbnB1dC5yZWFkVUludDMyTEUoZGF0YUVuZE9mZnNldCArIENvbnN0YW50cy5FWFRMRU4gLSA0KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgVXRpbHMuRXJyb3JzLkRFU0NSSVBUT1JfVU5LTk9XTigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBjaGVjayBkYXRhIGludGVncml0eVxuICAgICAgICAgICAgaWYgKGRlc2NyaXB0b3IuY29tcHJlc3NlZFNpemUgIT09IF9jZW50cmFsSGVhZGVyLmNvbXByZXNzZWRTaXplIHx8IGRlc2NyaXB0b3Iuc2l6ZSAhPT0gX2NlbnRyYWxIZWFkZXIuc2l6ZSB8fCBkZXNjcmlwdG9yLmNyYyAhPT0gX2NlbnRyYWxIZWFkZXIuY3JjKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgVXRpbHMuRXJyb3JzLkRFU0NSSVBUT1JfRkFVTFRZKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoVXRpbHMuY3JjMzIoZGF0YSkgIT09IGRlc2NyaXB0b3IuY3JjKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBAVE9ETzogemlwNjQgYml0IGRlc2NyaXB0b3IgZmllbGRzXG4gICAgICAgICAgICAvLyBpZiBiaXQgMyBpcyBzZXQgYW5kIGFueSB2YWx1ZSBpbiBsb2NhbCBoZWFkZXIgXCJ6aXA2NCBFeHRlbmRlZCBpbmZvcm1hdGlvblwiIGV4dHJhIGZpZWxkIGFyZSBzZXQgMCAocGxhY2UgaG9sZGVyKVxuICAgICAgICAgICAgLy8gdGhlbiA2NC1iaXQgZGVzY3JpcHRvciBmb3JtYXQgaXMgdXNlZCBpbnN0ZWFkIG9mIDMyLWJpdFxuICAgICAgICAgICAgLy8gY2VudHJhbCBoZWFkZXIgLSBcInppcDY0IEV4dGVuZGVkIGluZm9ybWF0aW9uXCIgZXh0cmEgZmllbGQgc2hvdWxkIHN0b3JlIHJlYWwgdmFsdWVzIGFuZCBub3QgcGxhY2UgaG9sZGVyc1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRlY29tcHJlc3MoLypCb29sZWFuKi8gYXN5bmMsIC8qRnVuY3Rpb24qLyBjYWxsYmFjaywgLypTdHJpbmcsIEJ1ZmZlciovIHBhc3MpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gXCJ1bmRlZmluZWRcIiAmJiB0eXBlb2YgYXN5bmMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHBhc3MgPSBhc3luYztcbiAgICAgICAgICAgIGFzeW5jID0gdm9pZCAwO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfaXNEaXJlY3RvcnkpIHtcbiAgICAgICAgICAgIGlmIChhc3luYyAmJiBjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKEJ1ZmZlci5hbGxvYygwKSwgVXRpbHMuRXJyb3JzLkRJUkVDVE9SWV9DT05URU5UX0VSUk9SKCkpOyAvL3NpIGFkZGVkIGVycm9yLlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIEJ1ZmZlci5hbGxvYygwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBjb21wcmVzc2VkRGF0YSA9IGdldENvbXByZXNzZWREYXRhRnJvbVppcCgpO1xuXG4gICAgICAgIGlmIChjb21wcmVzc2VkRGF0YS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIC8vIEZpbGUgaXMgZW1wdHksIG5vdGhpbmcgdG8gZGVjb21wcmVzcy5cbiAgICAgICAgICAgIGlmIChhc3luYyAmJiBjYWxsYmFjaykgY2FsbGJhY2soY29tcHJlc3NlZERhdGEpO1xuICAgICAgICAgICAgcmV0dXJuIGNvbXByZXNzZWREYXRhO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKF9jZW50cmFsSGVhZGVyLmVuY3J5cHRlZCkge1xuICAgICAgICAgICAgaWYgKFwic3RyaW5nXCIgIT09IHR5cGVvZiBwYXNzICYmICFCdWZmZXIuaXNCdWZmZXIocGFzcykpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBVdGlscy5FcnJvcnMuSU5WQUxJRF9QQVNTX1BBUkFNKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb21wcmVzc2VkRGF0YSA9IE1ldGhvZHMuWmlwQ3J5cHRvLmRlY3J5cHQoY29tcHJlc3NlZERhdGEsIF9jZW50cmFsSGVhZGVyLCBwYXNzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkYXRhID0gQnVmZmVyLmFsbG9jKF9jZW50cmFsSGVhZGVyLnNpemUpO1xuXG4gICAgICAgIHN3aXRjaCAoX2NlbnRyYWxIZWFkZXIubWV0aG9kKSB7XG4gICAgICAgICAgICBjYXNlIFV0aWxzLkNvbnN0YW50cy5TVE9SRUQ6XG4gICAgICAgICAgICAgICAgY29tcHJlc3NlZERhdGEuY29weShkYXRhKTtcbiAgICAgICAgICAgICAgICBpZiAoIWNyYzMyT0soZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFzeW5jICYmIGNhbGxiYWNrKSBjYWxsYmFjayhkYXRhLCBVdGlscy5FcnJvcnMuQkFEX0NSQygpKTsgLy9zaSBhZGRlZCBlcnJvclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBVdGlscy5FcnJvcnMuQkFEX0NSQygpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vc2kgYWRkZWQgb3RoZXJ3aXNlIGRpZCBub3Qgc2VlbSB0byByZXR1cm4gZGF0YS5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGFzeW5jICYmIGNhbGxiYWNrKSBjYWxsYmFjayhkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBVdGlscy5Db25zdGFudHMuREVGTEFURUQ6XG4gICAgICAgICAgICAgICAgdmFyIGluZmxhdGVyID0gbmV3IE1ldGhvZHMuSW5mbGF0ZXIoY29tcHJlc3NlZERhdGEsIF9jZW50cmFsSGVhZGVyLnNpemUpO1xuICAgICAgICAgICAgICAgIGlmICghYXN5bmMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gaW5mbGF0ZXIuaW5mbGF0ZShkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmNvcHkoZGF0YSwgMCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghY3JjMzJPSyhkYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgVXRpbHMuRXJyb3JzLkJBRF9DUkMoYFwiJHtkZWNvZGVyLmRlY29kZShfZW50cnlOYW1lKX1cImApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGluZmxhdGVyLmluZmxhdGVBc3luYyhmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuY29weShyZXN1bHQsIDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjcmMzMk9LKHJlc3VsdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2socmVzdWx0LCBVdGlscy5FcnJvcnMuQkFEX0NSQygpKTsgLy9zaSBhZGRlZCBlcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGlmIChhc3luYyAmJiBjYWxsYmFjaykgY2FsbGJhY2soQnVmZmVyLmFsbG9jKDApLCBVdGlscy5FcnJvcnMuVU5LTk9XTl9NRVRIT0QoKSk7XG4gICAgICAgICAgICAgICAgdGhyb3cgVXRpbHMuRXJyb3JzLlVOS05PV05fTUVUSE9EKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjb21wcmVzcygvKkJvb2xlYW4qLyBhc3luYywgLypGdW5jdGlvbiovIGNhbGxiYWNrKSB7XG4gICAgICAgIGlmICgoIXVuY29tcHJlc3NlZERhdGEgfHwgIXVuY29tcHJlc3NlZERhdGEubGVuZ3RoKSAmJiBCdWZmZXIuaXNCdWZmZXIoaW5wdXQpKSB7XG4gICAgICAgICAgICAvLyBubyBkYXRhIHNldCBvciB0aGUgZGF0YSB3YXNuJ3QgY2hhbmdlZCB0byByZXF1aXJlIHJlY29tcHJlc3Npb25cbiAgICAgICAgICAgIGlmIChhc3luYyAmJiBjYWxsYmFjaykgY2FsbGJhY2soZ2V0Q29tcHJlc3NlZERhdGFGcm9tWmlwKCkpO1xuICAgICAgICAgICAgcmV0dXJuIGdldENvbXByZXNzZWREYXRhRnJvbVppcCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHVuY29tcHJlc3NlZERhdGEubGVuZ3RoICYmICFfaXNEaXJlY3RvcnkpIHtcbiAgICAgICAgICAgIHZhciBjb21wcmVzc2VkRGF0YTtcbiAgICAgICAgICAgIC8vIExvY2FsIGZpbGUgaGVhZGVyXG4gICAgICAgICAgICBzd2l0Y2ggKF9jZW50cmFsSGVhZGVyLm1ldGhvZCkge1xuICAgICAgICAgICAgICAgIGNhc2UgVXRpbHMuQ29uc3RhbnRzLlNUT1JFRDpcbiAgICAgICAgICAgICAgICAgICAgX2NlbnRyYWxIZWFkZXIuY29tcHJlc3NlZFNpemUgPSBfY2VudHJhbEhlYWRlci5zaXplO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbXByZXNzZWREYXRhID0gQnVmZmVyLmFsbG9jKHVuY29tcHJlc3NlZERhdGEubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgdW5jb21wcmVzc2VkRGF0YS5jb3B5KGNvbXByZXNzZWREYXRhKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoYXN5bmMgJiYgY2FsbGJhY2spIGNhbGxiYWNrKGNvbXByZXNzZWREYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbXByZXNzZWREYXRhO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgY2FzZSBVdGlscy5Db25zdGFudHMuREVGTEFURUQ6XG4gICAgICAgICAgICAgICAgICAgIHZhciBkZWZsYXRlciA9IG5ldyBNZXRob2RzLkRlZmxhdGVyKHVuY29tcHJlc3NlZERhdGEpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWFzeW5jKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVmbGF0ZWQgPSBkZWZsYXRlci5kZWZsYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfY2VudHJhbEhlYWRlci5jb21wcmVzc2VkU2l6ZSA9IGRlZmxhdGVkLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWZsYXRlZDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmxhdGVyLmRlZmxhdGVBc3luYyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXByZXNzZWREYXRhID0gQnVmZmVyLmFsbG9jKGRhdGEubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2VudHJhbEhlYWRlci5jb21wcmVzc2VkU2l6ZSA9IGRhdGEubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuY29weShjb21wcmVzc2VkRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soY29tcHJlc3NlZERhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZGVmbGF0ZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChhc3luYyAmJiBjYWxsYmFjaykge1xuICAgICAgICAgICAgY2FsbGJhY2soQnVmZmVyLmFsbG9jKDApKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBCdWZmZXIuYWxsb2MoMCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZWFkVUludDY0TEUoYnVmZmVyLCBvZmZzZXQpIHtcbiAgICAgICAgcmV0dXJuIChidWZmZXIucmVhZFVJbnQzMkxFKG9mZnNldCArIDQpIDw8IDQpICsgYnVmZmVyLnJlYWRVSW50MzJMRShvZmZzZXQpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhcnNlRXh0cmEoZGF0YSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIG9mZnNldCA9IDA7XG4gICAgICAgICAgICB2YXIgc2lnbmF0dXJlLCBzaXplLCBwYXJ0O1xuICAgICAgICAgICAgd2hpbGUgKG9mZnNldCArIDQgPCBkYXRhLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHNpZ25hdHVyZSA9IGRhdGEucmVhZFVJbnQxNkxFKG9mZnNldCk7XG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDI7XG4gICAgICAgICAgICAgICAgc2l6ZSA9IGRhdGEucmVhZFVJbnQxNkxFKG9mZnNldCk7XG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDI7XG4gICAgICAgICAgICAgICAgcGFydCA9IGRhdGEuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyBzaXplKTtcbiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gc2l6ZTtcbiAgICAgICAgICAgICAgICBpZiAoQ29uc3RhbnRzLklEX1pJUDY0ID09PSBzaWduYXR1cmUpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VaaXA2NEV4dGVuZGVkSW5mb3JtYXRpb24ocGFydCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgVXRpbHMuRXJyb3JzLkVYVFJBX0ZJRUxEX1BBUlNFX0VSUk9SKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvL092ZXJyaWRlIGhlYWRlciBmaWVsZCB2YWx1ZXMgd2l0aCB2YWx1ZXMgZnJvbSB0aGUgWklQNjQgZXh0cmEgZmllbGRcbiAgICBmdW5jdGlvbiBwYXJzZVppcDY0RXh0ZW5kZWRJbmZvcm1hdGlvbihkYXRhKSB7XG4gICAgICAgIHZhciBzaXplLCBjb21wcmVzc2VkU2l6ZSwgb2Zmc2V0LCBkaXNrTnVtU3RhcnQ7XG5cbiAgICAgICAgaWYgKGRhdGEubGVuZ3RoID49IENvbnN0YW50cy5FRl9aSVA2NF9TQ09NUCkge1xuICAgICAgICAgICAgc2l6ZSA9IHJlYWRVSW50NjRMRShkYXRhLCBDb25zdGFudHMuRUZfWklQNjRfU1VOQ09NUCk7XG4gICAgICAgICAgICBpZiAoX2NlbnRyYWxIZWFkZXIuc2l6ZSA9PT0gQ29uc3RhbnRzLkVGX1pJUDY0X09SXzMyKSB7XG4gICAgICAgICAgICAgICAgX2NlbnRyYWxIZWFkZXIuc2l6ZSA9IHNpemU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRhdGEubGVuZ3RoID49IENvbnN0YW50cy5FRl9aSVA2NF9SSE8pIHtcbiAgICAgICAgICAgIGNvbXByZXNzZWRTaXplID0gcmVhZFVJbnQ2NExFKGRhdGEsIENvbnN0YW50cy5FRl9aSVA2NF9TQ09NUCk7XG4gICAgICAgICAgICBpZiAoX2NlbnRyYWxIZWFkZXIuY29tcHJlc3NlZFNpemUgPT09IENvbnN0YW50cy5FRl9aSVA2NF9PUl8zMikge1xuICAgICAgICAgICAgICAgIF9jZW50cmFsSGVhZGVyLmNvbXByZXNzZWRTaXplID0gY29tcHJlc3NlZFNpemU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRhdGEubGVuZ3RoID49IENvbnN0YW50cy5FRl9aSVA2NF9EU04pIHtcbiAgICAgICAgICAgIG9mZnNldCA9IHJlYWRVSW50NjRMRShkYXRhLCBDb25zdGFudHMuRUZfWklQNjRfUkhPKTtcbiAgICAgICAgICAgIGlmIChfY2VudHJhbEhlYWRlci5vZmZzZXQgPT09IENvbnN0YW50cy5FRl9aSVA2NF9PUl8zMikge1xuICAgICAgICAgICAgICAgIF9jZW50cmFsSGVhZGVyLm9mZnNldCA9IG9mZnNldDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZGF0YS5sZW5ndGggPj0gQ29uc3RhbnRzLkVGX1pJUDY0X0RTTiArIDQpIHtcbiAgICAgICAgICAgIGRpc2tOdW1TdGFydCA9IGRhdGEucmVhZFVJbnQzMkxFKENvbnN0YW50cy5FRl9aSVA2NF9EU04pO1xuICAgICAgICAgICAgaWYgKF9jZW50cmFsSGVhZGVyLmRpc2tOdW1TdGFydCA9PT0gQ29uc3RhbnRzLkVGX1pJUDY0X09SXzE2KSB7XG4gICAgICAgICAgICAgICAgX2NlbnRyYWxIZWFkZXIuZGlza051bVN0YXJ0ID0gZGlza051bVN0YXJ0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0IGVudHJ5TmFtZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBkZWNvZGVyLmRlY29kZShfZW50cnlOYW1lKTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0IHJhd0VudHJ5TmFtZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBfZW50cnlOYW1lO1xuICAgICAgICB9LFxuICAgICAgICBzZXQgZW50cnlOYW1lKHZhbCkge1xuICAgICAgICAgICAgX2VudHJ5TmFtZSA9IFV0aWxzLnRvQnVmZmVyKHZhbCwgZGVjb2Rlci5lbmNvZGUpO1xuICAgICAgICAgICAgdmFyIGxhc3RDaGFyID0gX2VudHJ5TmFtZVtfZW50cnlOYW1lLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgX2lzRGlyZWN0b3J5ID0gbGFzdENoYXIgPT09IDQ3IHx8IGxhc3RDaGFyID09PSA5MjtcbiAgICAgICAgICAgIF9jZW50cmFsSGVhZGVyLmZpbGVOYW1lTGVuZ3RoID0gX2VudHJ5TmFtZS5sZW5ndGg7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0IGVmcygpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgX2VmcyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9lZnModGhpcy5lbnRyeU5hbWUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX2VmcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBnZXQgZXh0cmEoKSB7XG4gICAgICAgICAgICByZXR1cm4gX2V4dHJhO1xuICAgICAgICB9LFxuICAgICAgICBzZXQgZXh0cmEodmFsKSB7XG4gICAgICAgICAgICBfZXh0cmEgPSB2YWw7XG4gICAgICAgICAgICBfY2VudHJhbEhlYWRlci5leHRyYUxlbmd0aCA9IHZhbC5sZW5ndGg7XG4gICAgICAgICAgICBwYXJzZUV4dHJhKHZhbCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0IGNvbW1lbnQoKSB7XG4gICAgICAgICAgICByZXR1cm4gZGVjb2Rlci5kZWNvZGUoX2NvbW1lbnQpO1xuICAgICAgICB9LFxuICAgICAgICBzZXQgY29tbWVudCh2YWwpIHtcbiAgICAgICAgICAgIF9jb21tZW50ID0gVXRpbHMudG9CdWZmZXIodmFsLCBkZWNvZGVyLmVuY29kZSk7XG4gICAgICAgICAgICBfY2VudHJhbEhlYWRlci5jb21tZW50TGVuZ3RoID0gX2NvbW1lbnQubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKF9jb21tZW50Lmxlbmd0aCA+IDB4ZmZmZikgdGhyb3cgVXRpbHMuRXJyb3JzLkNPTU1FTlRfVE9PX0xPTkcoKTtcbiAgICAgICAgfSxcblxuICAgICAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgICAgIHZhciBuID0gZGVjb2Rlci5kZWNvZGUoX2VudHJ5TmFtZSk7XG4gICAgICAgICAgICByZXR1cm4gX2lzRGlyZWN0b3J5XG4gICAgICAgICAgICAgICAgPyBuXG4gICAgICAgICAgICAgICAgICAgICAgLnN1YnN0cihuLmxlbmd0aCAtIDEpXG4gICAgICAgICAgICAgICAgICAgICAgLnNwbGl0KFwiL1wiKVxuICAgICAgICAgICAgICAgICAgICAgIC5wb3AoKVxuICAgICAgICAgICAgICAgIDogbi5zcGxpdChcIi9cIikucG9wKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGdldCBpc0RpcmVjdG9yeSgpIHtcbiAgICAgICAgICAgIHJldHVybiBfaXNEaXJlY3Rvcnk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0Q29tcHJlc3NlZERhdGE6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBjb21wcmVzcyhmYWxzZSwgbnVsbCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0Q29tcHJlc3NlZERhdGFBc3luYzogZnVuY3Rpb24gKC8qRnVuY3Rpb24qLyBjYWxsYmFjaykge1xuICAgICAgICAgICAgY29tcHJlc3ModHJ1ZSwgY2FsbGJhY2spO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNldERhdGE6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdW5jb21wcmVzc2VkRGF0YSA9IFV0aWxzLnRvQnVmZmVyKHZhbHVlLCBVdGlscy5kZWNvZGVyLmVuY29kZSk7XG4gICAgICAgICAgICBpZiAoIV9pc0RpcmVjdG9yeSAmJiB1bmNvbXByZXNzZWREYXRhLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIF9jZW50cmFsSGVhZGVyLnNpemUgPSB1bmNvbXByZXNzZWREYXRhLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBfY2VudHJhbEhlYWRlci5tZXRob2QgPSBVdGlscy5Db25zdGFudHMuREVGTEFURUQ7XG4gICAgICAgICAgICAgICAgX2NlbnRyYWxIZWFkZXIuY3JjID0gVXRpbHMuY3JjMzIodmFsdWUpO1xuICAgICAgICAgICAgICAgIF9jZW50cmFsSGVhZGVyLmNoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBmb2xkZXJzIGFuZCBibGFuayBmaWxlcyBzaG91bGQgYmUgc3RvcmVkXG4gICAgICAgICAgICAgICAgX2NlbnRyYWxIZWFkZXIubWV0aG9kID0gVXRpbHMuQ29uc3RhbnRzLlNUT1JFRDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBnZXREYXRhOiBmdW5jdGlvbiAocGFzcykge1xuICAgICAgICAgICAgaWYgKF9jZW50cmFsSGVhZGVyLmNoYW5nZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5jb21wcmVzc2VkRGF0YTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlY29tcHJlc3MoZmFsc2UsIG51bGwsIHBhc3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGdldERhdGFBc3luYzogZnVuY3Rpb24gKC8qRnVuY3Rpb24qLyBjYWxsYmFjaywgcGFzcykge1xuICAgICAgICAgICAgaWYgKF9jZW50cmFsSGVhZGVyLmNoYW5nZWQpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayh1bmNvbXByZXNzZWREYXRhKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZGVjb21wcmVzcyh0cnVlLCBjYWxsYmFjaywgcGFzcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2V0IGF0dHIoYXR0cikge1xuICAgICAgICAgICAgX2NlbnRyYWxIZWFkZXIuYXR0ciA9IGF0dHI7XG4gICAgICAgIH0sXG4gICAgICAgIGdldCBhdHRyKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9jZW50cmFsSGVhZGVyLmF0dHI7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2V0IGhlYWRlcigvKkJ1ZmZlciovIGRhdGEpIHtcbiAgICAgICAgICAgIF9jZW50cmFsSGVhZGVyLmxvYWRGcm9tQmluYXJ5KGRhdGEpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGdldCBoZWFkZXIoKSB7XG4gICAgICAgICAgICByZXR1cm4gX2NlbnRyYWxIZWFkZXI7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcGFja0NlbnRyYWxIZWFkZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF9jZW50cmFsSGVhZGVyLmZsYWdzX2VmcyA9IHRoaXMuZWZzO1xuICAgICAgICAgICAgX2NlbnRyYWxIZWFkZXIuZXh0cmFMZW5ndGggPSBfZXh0cmEubGVuZ3RoO1xuICAgICAgICAgICAgLy8gMS4gY3JlYXRlIGhlYWRlciAoYnVmZmVyKVxuICAgICAgICAgICAgdmFyIGhlYWRlciA9IF9jZW50cmFsSGVhZGVyLmNlbnRyYWxIZWFkZXJUb0JpbmFyeSgpO1xuICAgICAgICAgICAgdmFyIGFkZHBvcyA9IFV0aWxzLkNvbnN0YW50cy5DRU5IRFI7XG4gICAgICAgICAgICAvLyAyLiBhZGQgZmlsZSBuYW1lXG4gICAgICAgICAgICBfZW50cnlOYW1lLmNvcHkoaGVhZGVyLCBhZGRwb3MpO1xuICAgICAgICAgICAgYWRkcG9zICs9IF9lbnRyeU5hbWUubGVuZ3RoO1xuICAgICAgICAgICAgLy8gMy4gYWRkIGV4dHJhIGRhdGFcbiAgICAgICAgICAgIF9leHRyYS5jb3B5KGhlYWRlciwgYWRkcG9zKTtcbiAgICAgICAgICAgIGFkZHBvcyArPSBfY2VudHJhbEhlYWRlci5leHRyYUxlbmd0aDtcbiAgICAgICAgICAgIC8vIDQuIGFkZCBmaWxlIGNvbW1lbnRcbiAgICAgICAgICAgIF9jb21tZW50LmNvcHkoaGVhZGVyLCBhZGRwb3MpO1xuICAgICAgICAgICAgcmV0dXJuIGhlYWRlcjtcbiAgICAgICAgfSxcblxuICAgICAgICBwYWNrTG9jYWxIZWFkZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGxldCBhZGRwb3MgPSAwO1xuICAgICAgICAgICAgX2NlbnRyYWxIZWFkZXIuZmxhZ3NfZWZzID0gdGhpcy5lZnM7XG4gICAgICAgICAgICBfY2VudHJhbEhlYWRlci5leHRyYUxvY2FsTGVuZ3RoID0gX2V4dHJhbG9jYWwubGVuZ3RoO1xuICAgICAgICAgICAgLy8gMS4gY29uc3RydWN0IGxvY2FsIGhlYWRlciBCdWZmZXJcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsSGVhZGVyQnVmID0gX2NlbnRyYWxIZWFkZXIubG9jYWxIZWFkZXJUb0JpbmFyeSgpO1xuICAgICAgICAgICAgLy8gMi4gbG9jYWxIZWFkZXIgLSBjcmF0ZSBoZWFkZXIgYnVmZmVyXG4gICAgICAgICAgICBjb25zdCBsb2NhbEhlYWRlciA9IEJ1ZmZlci5hbGxvYyhsb2NhbEhlYWRlckJ1Zi5sZW5ndGggKyBfZW50cnlOYW1lLmxlbmd0aCArIF9jZW50cmFsSGVhZGVyLmV4dHJhTG9jYWxMZW5ndGgpO1xuICAgICAgICAgICAgLy8gMi4xIGFkZCBsb2NhbGhlYWRlclxuICAgICAgICAgICAgbG9jYWxIZWFkZXJCdWYuY29weShsb2NhbEhlYWRlciwgYWRkcG9zKTtcbiAgICAgICAgICAgIGFkZHBvcyArPSBsb2NhbEhlYWRlckJ1Zi5sZW5ndGg7XG4gICAgICAgICAgICAvLyAyLjIgYWRkIGZpbGUgbmFtZVxuICAgICAgICAgICAgX2VudHJ5TmFtZS5jb3B5KGxvY2FsSGVhZGVyLCBhZGRwb3MpO1xuICAgICAgICAgICAgYWRkcG9zICs9IF9lbnRyeU5hbWUubGVuZ3RoO1xuICAgICAgICAgICAgLy8gMi4zIGFkZCBleHRyYSBmaWVsZFxuICAgICAgICAgICAgX2V4dHJhbG9jYWwuY29weShsb2NhbEhlYWRlciwgYWRkcG9zKTtcbiAgICAgICAgICAgIGFkZHBvcyArPSBfZXh0cmFsb2NhbC5sZW5ndGg7XG5cbiAgICAgICAgICAgIHJldHVybiBsb2NhbEhlYWRlcjtcbiAgICAgICAgfSxcblxuICAgICAgICB0b0pTT046IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNvbnN0IGJ5dGVzID0gZnVuY3Rpb24gKG5yKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiPFwiICsgKChuciAmJiBuci5sZW5ndGggKyBcIiBieXRlcyBidWZmZXJcIikgfHwgXCJudWxsXCIpICsgXCI+XCI7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGVudHJ5TmFtZTogdGhpcy5lbnRyeU5hbWUsXG4gICAgICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lLFxuICAgICAgICAgICAgICAgIGNvbW1lbnQ6IHRoaXMuY29tbWVudCxcbiAgICAgICAgICAgICAgICBpc0RpcmVjdG9yeTogdGhpcy5pc0RpcmVjdG9yeSxcbiAgICAgICAgICAgICAgICBoZWFkZXI6IF9jZW50cmFsSGVhZGVyLnRvSlNPTigpLFxuICAgICAgICAgICAgICAgIGNvbXByZXNzZWREYXRhOiBieXRlcyhpbnB1dCksXG4gICAgICAgICAgICAgICAgZGF0YTogYnl0ZXModW5jb21wcmVzc2VkRGF0YSlcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG5cbiAgICAgICAgdG9TdHJpbmc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLnRvSlNPTigpLCBudWxsLCBcIlxcdFwiKTtcbiAgICAgICAgfVxuICAgIH07XG59O1xuIiwgImNvbnN0IFppcEVudHJ5ID0gcmVxdWlyZShcIi4vemlwRW50cnlcIik7XG5jb25zdCBIZWFkZXJzID0gcmVxdWlyZShcIi4vaGVhZGVyc1wiKTtcbmNvbnN0IFV0aWxzID0gcmVxdWlyZShcIi4vdXRpbFwiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoLypCdWZmZXJ8bnVsbCovIGluQnVmZmVyLCAvKiogb2JqZWN0ICovIG9wdGlvbnMpIHtcbiAgICB2YXIgZW50cnlMaXN0ID0gW10sXG4gICAgICAgIGVudHJ5VGFibGUgPSB7fSxcbiAgICAgICAgX2NvbW1lbnQgPSBCdWZmZXIuYWxsb2MoMCksXG4gICAgICAgIG1haW5IZWFkZXIgPSBuZXcgSGVhZGVycy5NYWluSGVhZGVyKCksXG4gICAgICAgIGxvYWRlZEVudHJpZXMgPSBmYWxzZTtcbiAgICB2YXIgcGFzc3dvcmQgPSBudWxsO1xuICAgIGNvbnN0IHRlbXBvcmFyeSA9IG5ldyBTZXQoKTtcblxuICAgIC8vIGFzc2lnbiBvcHRpb25zXG4gICAgY29uc3Qgb3B0cyA9IG9wdGlvbnM7XG5cbiAgICBjb25zdCB7IG5vU29ydCwgZGVjb2RlciB9ID0gb3B0cztcblxuICAgIGlmIChpbkJ1ZmZlcikge1xuICAgICAgICAvLyBpcyBhIG1lbW9yeSBidWZmZXJcbiAgICAgICAgcmVhZE1haW5IZWFkZXIob3B0cy5yZWFkRW50cmllcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gbm9uZS4gaXMgYSBuZXcgZmlsZVxuICAgICAgICBsb2FkZWRFbnRyaWVzID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtYWtlVGVtcG9yYXJ5Rm9sZGVycygpIHtcbiAgICAgICAgY29uc3QgZm9sZGVyc0xpc3QgPSBuZXcgU2V0KCk7XG5cbiAgICAgICAgLy8gTWFrZSBsaXN0IG9mIGFsbCBmb2xkZXJzIGluIGZpbGVcbiAgICAgICAgZm9yIChjb25zdCBlbGVtIG9mIE9iamVjdC5rZXlzKGVudHJ5VGFibGUpKSB7XG4gICAgICAgICAgICBjb25zdCBlbGVtZW50cyA9IGVsZW0uc3BsaXQoXCIvXCIpO1xuICAgICAgICAgICAgZWxlbWVudHMucG9wKCk7IC8vIGZpbGVuYW1lXG4gICAgICAgICAgICBpZiAoIWVsZW1lbnRzLmxlbmd0aCkgY29udGludWU7IC8vIG5vIGZvbGRlcnNcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdWIgPSBlbGVtZW50cy5zbGljZSgwLCBpICsgMSkuam9pbihcIi9cIikgKyBcIi9cIjtcbiAgICAgICAgICAgICAgICBmb2xkZXJzTGlzdC5hZGQoc3ViKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNyZWF0ZSBtaXNzaW5nIGZvbGRlcnMgYXMgdGVtcG9yYXJ5XG4gICAgICAgIGZvciAoY29uc3QgZWxlbSBvZiBmb2xkZXJzTGlzdCkge1xuICAgICAgICAgICAgaWYgKCEoZWxlbSBpbiBlbnRyeVRhYmxlKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRlbXBmb2xkZXIgPSBuZXcgWmlwRW50cnkob3B0cyk7XG4gICAgICAgICAgICAgICAgdGVtcGZvbGRlci5lbnRyeU5hbWUgPSBlbGVtO1xuICAgICAgICAgICAgICAgIHRlbXBmb2xkZXIuYXR0ciA9IDB4MTA7XG4gICAgICAgICAgICAgICAgdGVtcGZvbGRlci50ZW1wb3JhcnkgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGVudHJ5TGlzdC5wdXNoKHRlbXBmb2xkZXIpO1xuICAgICAgICAgICAgICAgIGVudHJ5VGFibGVbdGVtcGZvbGRlci5lbnRyeU5hbWVdID0gdGVtcGZvbGRlcjtcbiAgICAgICAgICAgICAgICB0ZW1wb3JhcnkuYWRkKHRlbXBmb2xkZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVhZEVudHJpZXMoKSB7XG4gICAgICAgIGxvYWRlZEVudHJpZXMgPSB0cnVlO1xuICAgICAgICBlbnRyeVRhYmxlID0ge307XG4gICAgICAgIGlmIChtYWluSGVhZGVyLmRpc2tFbnRyaWVzID4gKGluQnVmZmVyLmxlbmd0aCAtIG1haW5IZWFkZXIub2Zmc2V0KSAvIFV0aWxzLkNvbnN0YW50cy5DRU5IRFIpIHtcbiAgICAgICAgICAgIHRocm93IFV0aWxzLkVycm9ycy5ESVNLX0VOVFJZX1RPT19MQVJHRSgpO1xuICAgICAgICB9XG4gICAgICAgIGVudHJ5TGlzdCA9IG5ldyBBcnJheShtYWluSGVhZGVyLmRpc2tFbnRyaWVzKTsgLy8gdG90YWwgbnVtYmVyIG9mIGVudHJpZXNcbiAgICAgICAgdmFyIGluZGV4ID0gbWFpbkhlYWRlci5vZmZzZXQ7IC8vIG9mZnNldCBvZiBmaXJzdCBDRU4gaGVhZGVyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZW50cnlMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgdG1wID0gaW5kZXgsXG4gICAgICAgICAgICAgICAgZW50cnkgPSBuZXcgWmlwRW50cnkob3B0cywgaW5CdWZmZXIpO1xuICAgICAgICAgICAgZW50cnkuaGVhZGVyID0gaW5CdWZmZXIuc2xpY2UodG1wLCAodG1wICs9IFV0aWxzLkNvbnN0YW50cy5DRU5IRFIpKTtcblxuICAgICAgICAgICAgZW50cnkuZW50cnlOYW1lID0gaW5CdWZmZXIuc2xpY2UodG1wLCAodG1wICs9IGVudHJ5LmhlYWRlci5maWxlTmFtZUxlbmd0aCkpO1xuXG4gICAgICAgICAgICBpZiAoZW50cnkuaGVhZGVyLmV4dHJhTGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgZW50cnkuZXh0cmEgPSBpbkJ1ZmZlci5zbGljZSh0bXAsICh0bXAgKz0gZW50cnkuaGVhZGVyLmV4dHJhTGVuZ3RoKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChlbnRyeS5oZWFkZXIuY29tbWVudExlbmd0aCkgZW50cnkuY29tbWVudCA9IGluQnVmZmVyLnNsaWNlKHRtcCwgdG1wICsgZW50cnkuaGVhZGVyLmNvbW1lbnRMZW5ndGgpO1xuXG4gICAgICAgICAgICBpbmRleCArPSBlbnRyeS5oZWFkZXIuY2VudHJhbEhlYWRlclNpemU7XG5cbiAgICAgICAgICAgIGVudHJ5TGlzdFtpXSA9IGVudHJ5O1xuICAgICAgICAgICAgZW50cnlUYWJsZVtlbnRyeS5lbnRyeU5hbWVdID0gZW50cnk7XG4gICAgICAgIH1cbiAgICAgICAgdGVtcG9yYXJ5LmNsZWFyKCk7XG4gICAgICAgIG1ha2VUZW1wb3JhcnlGb2xkZXJzKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVhZE1haW5IZWFkZXIoLypCb29sZWFuKi8gcmVhZE5vdykge1xuICAgICAgICB2YXIgaSA9IGluQnVmZmVyLmxlbmd0aCAtIFV0aWxzLkNvbnN0YW50cy5FTkRIRFIsIC8vIEVORCBoZWFkZXIgc2l6ZVxuICAgICAgICAgICAgbWF4ID0gTWF0aC5tYXgoMCwgaSAtIDB4ZmZmZiksIC8vIDB4RkZGRiBpcyB0aGUgbWF4IHppcCBmaWxlIGNvbW1lbnQgbGVuZ3RoXG4gICAgICAgICAgICBuID0gbWF4LFxuICAgICAgICAgICAgZW5kU3RhcnQgPSBpbkJ1ZmZlci5sZW5ndGgsXG4gICAgICAgICAgICBlbmRPZmZzZXQgPSAtMSwgLy8gU3RhcnQgb2Zmc2V0IG9mIHRoZSBFTkQgaGVhZGVyXG4gICAgICAgICAgICBjb21tZW50RW5kID0gMDtcblxuICAgICAgICAvLyBvcHRpb24gdG8gc2VhcmNoIGhlYWRlciBmb3JtIGVudGlyZSBmaWxlXG4gICAgICAgIGNvbnN0IHRyYWlsaW5nU3BhY2UgPSB0eXBlb2Ygb3B0cy50cmFpbGluZ1NwYWNlID09PSBcImJvb2xlYW5cIiA/IG9wdHMudHJhaWxpbmdTcGFjZSA6IGZhbHNlO1xuICAgICAgICBpZiAodHJhaWxpbmdTcGFjZSkgbWF4ID0gMDtcblxuICAgICAgICBmb3IgKGk7IGkgPj0gbjsgaS0tKSB7XG4gICAgICAgICAgICBpZiAoaW5CdWZmZXJbaV0gIT09IDB4NTApIGNvbnRpbnVlOyAvLyBxdWljayBjaGVjayB0aGF0IHRoZSBieXRlIGlzICdQJ1xuICAgICAgICAgICAgaWYgKGluQnVmZmVyLnJlYWRVSW50MzJMRShpKSA9PT0gVXRpbHMuQ29uc3RhbnRzLkVORFNJRykge1xuICAgICAgICAgICAgICAgIC8vIFwiUEtcXDAwNVxcMDA2XCJcbiAgICAgICAgICAgICAgICBlbmRPZmZzZXQgPSBpO1xuICAgICAgICAgICAgICAgIGNvbW1lbnRFbmQgPSBpO1xuICAgICAgICAgICAgICAgIGVuZFN0YXJ0ID0gaSArIFV0aWxzLkNvbnN0YW50cy5FTkRIRFI7XG4gICAgICAgICAgICAgICAgLy8gV2UgYWxyZWFkeSBmb3VuZCBhIHJlZ3VsYXIgc2lnbmF0dXJlLCBsZXQncyBsb29rIGp1c3QgYSBiaXQgZnVydGhlciB0byBjaGVjayBpZiB0aGVyZSdzIGFueSB6aXA2NCBzaWduYXR1cmVcbiAgICAgICAgICAgICAgICBuID0gaSAtIFV0aWxzLkNvbnN0YW50cy5FTkQ2NEhEUjtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGluQnVmZmVyLnJlYWRVSW50MzJMRShpKSA9PT0gVXRpbHMuQ29uc3RhbnRzLkVORDY0U0lHKSB7XG4gICAgICAgICAgICAgICAgLy8gRm91bmQgYSB6aXA2NCBzaWduYXR1cmUsIGxldCdzIGNvbnRpbnVlIHJlYWRpbmcgdGhlIHdob2xlIHppcDY0IHJlY29yZFxuICAgICAgICAgICAgICAgIG4gPSBtYXg7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpbkJ1ZmZlci5yZWFkVUludDMyTEUoaSkgPT09IFV0aWxzLkNvbnN0YW50cy5aSVA2NFNJRykge1xuICAgICAgICAgICAgICAgIC8vIEZvdW5kIHRoZSB6aXA2NCByZWNvcmQsIGxldCdzIGRldGVybWluZSBpdCdzIHNpemVcbiAgICAgICAgICAgICAgICBlbmRPZmZzZXQgPSBpO1xuICAgICAgICAgICAgICAgIGVuZFN0YXJ0ID0gaSArIFV0aWxzLnJlYWRCaWdVSW50NjRMRShpbkJ1ZmZlciwgaSArIFV0aWxzLkNvbnN0YW50cy5aSVA2NFNJWkUpICsgVXRpbHMuQ29uc3RhbnRzLlpJUDY0TEVBRDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlbmRPZmZzZXQgPT0gLTEpIHRocm93IFV0aWxzLkVycm9ycy5JTlZBTElEX0ZPUk1BVCgpO1xuXG4gICAgICAgIG1haW5IZWFkZXIubG9hZEZyb21CaW5hcnkoaW5CdWZmZXIuc2xpY2UoZW5kT2Zmc2V0LCBlbmRTdGFydCkpO1xuICAgICAgICBpZiAobWFpbkhlYWRlci5jb21tZW50TGVuZ3RoKSB7XG4gICAgICAgICAgICBfY29tbWVudCA9IGluQnVmZmVyLnNsaWNlKGNvbW1lbnRFbmQgKyBVdGlscy5Db25zdGFudHMuRU5ESERSKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVhZE5vdykgcmVhZEVudHJpZXMoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzb3J0RW50cmllcygpIHtcbiAgICAgICAgaWYgKGVudHJ5TGlzdC5sZW5ndGggPiAxICYmICFub1NvcnQpIHtcbiAgICAgICAgICAgIGVudHJ5TGlzdC5zb3J0KChhLCBiKSA9PiBhLmVudHJ5TmFtZS50b0xvd2VyQ2FzZSgpLmxvY2FsZUNvbXBhcmUoYi5lbnRyeU5hbWUudG9Mb3dlckNhc2UoKSkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgYW4gYXJyYXkgb2YgWmlwRW50cnkgb2JqZWN0cyBleGlzdGVudCBpbiB0aGUgY3VycmVudCBvcGVuZWQgYXJjaGl2ZVxuICAgICAgICAgKiBAcmV0dXJuIEFycmF5XG4gICAgICAgICAqL1xuICAgICAgICBnZXQgZW50cmllcygpIHtcbiAgICAgICAgICAgIGlmICghbG9hZGVkRW50cmllcykge1xuICAgICAgICAgICAgICAgIHJlYWRFbnRyaWVzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZW50cnlMaXN0LmZpbHRlcigoZSkgPT4gIXRlbXBvcmFyeS5oYXMoZSkpO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBcmNoaXZlIGNvbW1lbnRcbiAgICAgICAgICogQHJldHVybiB7U3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0IGNvbW1lbnQoKSB7XG4gICAgICAgICAgICByZXR1cm4gZGVjb2Rlci5kZWNvZGUoX2NvbW1lbnQpO1xuICAgICAgICB9LFxuICAgICAgICBzZXQgY29tbWVudCh2YWwpIHtcbiAgICAgICAgICAgIF9jb21tZW50ID0gVXRpbHMudG9CdWZmZXIodmFsLCBkZWNvZGVyLmVuY29kZSk7XG4gICAgICAgICAgICBtYWluSGVhZGVyLmNvbW1lbnRMZW5ndGggPSBfY29tbWVudC5sZW5ndGg7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0RW50cnlDb3VudDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCFsb2FkZWRFbnRyaWVzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1haW5IZWFkZXIuZGlza0VudHJpZXM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBlbnRyeUxpc3QubGVuZ3RoO1xuICAgICAgICB9LFxuXG4gICAgICAgIGZvckVhY2g6IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAgICAgdGhpcy5lbnRyaWVzLmZvckVhY2goY2FsbGJhY2spO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIGEgcmVmZXJlbmNlIHRvIHRoZSBlbnRyeSB3aXRoIHRoZSBnaXZlbiBuYW1lIG9yIG51bGwgaWYgZW50cnkgaXMgaW5leGlzdGVudFxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gZW50cnlOYW1lXG4gICAgICAgICAqIEByZXR1cm4gWmlwRW50cnlcbiAgICAgICAgICovXG4gICAgICAgIGdldEVudHJ5OiBmdW5jdGlvbiAoLypTdHJpbmcqLyBlbnRyeU5hbWUpIHtcbiAgICAgICAgICAgIGlmICghbG9hZGVkRW50cmllcykge1xuICAgICAgICAgICAgICAgIHJlYWRFbnRyaWVzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZW50cnlUYWJsZVtlbnRyeU5hbWVdIHx8IG51bGw7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFkZHMgdGhlIGdpdmVuIGVudHJ5IHRvIHRoZSBlbnRyeSBsaXN0XG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSBlbnRyeVxuICAgICAgICAgKi9cbiAgICAgICAgc2V0RW50cnk6IGZ1bmN0aW9uICgvKlppcEVudHJ5Ki8gZW50cnkpIHtcbiAgICAgICAgICAgIGlmICghbG9hZGVkRW50cmllcykge1xuICAgICAgICAgICAgICAgIHJlYWRFbnRyaWVzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbnRyeUxpc3QucHVzaChlbnRyeSk7XG4gICAgICAgICAgICBlbnRyeVRhYmxlW2VudHJ5LmVudHJ5TmFtZV0gPSBlbnRyeTtcbiAgICAgICAgICAgIG1haW5IZWFkZXIudG90YWxFbnRyaWVzID0gZW50cnlMaXN0Lmxlbmd0aDtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVtb3ZlcyB0aGUgZmlsZSB3aXRoIHRoZSBnaXZlbiBuYW1lIGZyb20gdGhlIGVudHJ5IGxpc3QuXG4gICAgICAgICAqXG4gICAgICAgICAqIElmIHRoZSBlbnRyeSBpcyBhIGRpcmVjdG9yeSwgdGhlbiBhbGwgbmVzdGVkIGZpbGVzIGFuZCBkaXJlY3RvcmllcyB3aWxsIGJlIHJlbW92ZWRcbiAgICAgICAgICogQHBhcmFtIGVudHJ5TmFtZVxuICAgICAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgICAgICovXG4gICAgICAgIGRlbGV0ZUZpbGU6IGZ1bmN0aW9uICgvKlN0cmluZyovIGVudHJ5TmFtZSwgd2l0aHN1YmZvbGRlcnMgPSB0cnVlKSB7XG4gICAgICAgICAgICBpZiAoIWxvYWRlZEVudHJpZXMpIHtcbiAgICAgICAgICAgICAgICByZWFkRW50cmllcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZW50cnkgPSBlbnRyeVRhYmxlW2VudHJ5TmFtZV07XG4gICAgICAgICAgICBjb25zdCBsaXN0ID0gdGhpcy5nZXRFbnRyeUNoaWxkcmVuKGVudHJ5LCB3aXRoc3ViZm9sZGVycykubWFwKChjaGlsZCkgPT4gY2hpbGQuZW50cnlOYW1lKTtcblxuICAgICAgICAgICAgbGlzdC5mb3JFYWNoKHRoaXMuZGVsZXRlRW50cnkpO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZW1vdmVzIHRoZSBlbnRyeSB3aXRoIHRoZSBnaXZlbiBuYW1lIGZyb20gdGhlIGVudHJ5IGxpc3QuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBlbnRyeU5hbWVcbiAgICAgICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICAgICAqL1xuICAgICAgICBkZWxldGVFbnRyeTogZnVuY3Rpb24gKC8qU3RyaW5nKi8gZW50cnlOYW1lKSB7XG4gICAgICAgICAgICBpZiAoIWxvYWRlZEVudHJpZXMpIHtcbiAgICAgICAgICAgICAgICByZWFkRW50cmllcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZW50cnkgPSBlbnRyeVRhYmxlW2VudHJ5TmFtZV07XG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IGVudHJ5TGlzdC5pbmRleE9mKGVudHJ5KTtcbiAgICAgICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgZW50cnlMaXN0LnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgZGVsZXRlIGVudHJ5VGFibGVbZW50cnlOYW1lXTtcbiAgICAgICAgICAgICAgICBtYWluSGVhZGVyLnRvdGFsRW50cmllcyA9IGVudHJ5TGlzdC5sZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqICBJdGVyYXRlcyBhbmQgcmV0dXJucyBhbGwgbmVzdGVkIGZpbGVzIGFuZCBkaXJlY3RvcmllcyBvZiB0aGUgZ2l2ZW4gZW50cnlcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIGVudHJ5XG4gICAgICAgICAqIEByZXR1cm4gQXJyYXlcbiAgICAgICAgICovXG4gICAgICAgIGdldEVudHJ5Q2hpbGRyZW46IGZ1bmN0aW9uICgvKlppcEVudHJ5Ki8gZW50cnksIHN1YmZvbGRlcnMgPSB0cnVlKSB7XG4gICAgICAgICAgICBpZiAoIWxvYWRlZEVudHJpZXMpIHtcbiAgICAgICAgICAgICAgICByZWFkRW50cmllcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBlbnRyeSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgIGlmIChlbnRyeS5pc0RpcmVjdG9yeSAmJiBzdWJmb2xkZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpc3QgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IGVudHJ5LmVudHJ5TmFtZTtcblxuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHppcEVudHJ5IG9mIGVudHJ5TGlzdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHppcEVudHJ5LmVudHJ5TmFtZS5zdGFydHNXaXRoKG5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdC5wdXNoKHppcEVudHJ5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGlzdDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW2VudHJ5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqICBIb3cgbWFueSBjaGlsZCBlbGVtZW50cyBlbnRyeSBoYXNcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtaaXBFbnRyeX0gZW50cnlcbiAgICAgICAgICogQHJldHVybiB7aW50ZWdlcn1cbiAgICAgICAgICovXG4gICAgICAgIGdldENoaWxkQ291bnQ6IGZ1bmN0aW9uIChlbnRyeSkge1xuICAgICAgICAgICAgaWYgKGVudHJ5ICYmIGVudHJ5LmlzRGlyZWN0b3J5KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbGlzdCA9IHRoaXMuZ2V0RW50cnlDaGlsZHJlbihlbnRyeSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxpc3QuaW5jbHVkZXMoZW50cnkpID8gbGlzdC5sZW5ndGggLSAxIDogbGlzdC5sZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyB0aGUgemlwIGZpbGVcbiAgICAgICAgICpcbiAgICAgICAgICogQHJldHVybiBCdWZmZXJcbiAgICAgICAgICovXG4gICAgICAgIGNvbXByZXNzVG9CdWZmZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghbG9hZGVkRW50cmllcykge1xuICAgICAgICAgICAgICAgIHJlYWRFbnRyaWVzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzb3J0RW50cmllcygpO1xuXG4gICAgICAgICAgICBjb25zdCBkYXRhQmxvY2sgPSBbXTtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlckJsb2NrcyA9IFtdO1xuICAgICAgICAgICAgbGV0IHRvdGFsU2l6ZSA9IDA7XG4gICAgICAgICAgICBsZXQgZGluZGV4ID0gMDtcblxuICAgICAgICAgICAgbWFpbkhlYWRlci5zaXplID0gMDtcbiAgICAgICAgICAgIG1haW5IZWFkZXIub2Zmc2V0ID0gMDtcbiAgICAgICAgICAgIGxldCB0b3RhbEVudHJpZXMgPSAwO1xuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIHRoaXMuZW50cmllcykge1xuICAgICAgICAgICAgICAgIC8vIGNvbXByZXNzIGRhdGEgYW5kIHNldCBsb2NhbCBhbmQgZW50cnkgaGVhZGVyIGFjY29yZGluZ2x5LiBSZWFzb24gd2h5IGlzIGNhbGxlZCBmaXJzdFxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbXByZXNzZWREYXRhID0gZW50cnkuZ2V0Q29tcHJlc3NlZERhdGEoKTtcbiAgICAgICAgICAgICAgICBlbnRyeS5oZWFkZXIub2Zmc2V0ID0gZGluZGV4O1xuXG4gICAgICAgICAgICAgICAgLy8gMS4gY29uc3RydWN0IGxvY2FsIGhlYWRlclxuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsSGVhZGVyID0gZW50cnkucGFja0xvY2FsSGVhZGVyKCk7XG5cbiAgICAgICAgICAgICAgICAvLyAyLiBvZmZzZXRzXG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YUxlbmd0aCA9IGxvY2FsSGVhZGVyLmxlbmd0aCArIGNvbXByZXNzZWREYXRhLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBkaW5kZXggKz0gZGF0YUxlbmd0aDtcblxuICAgICAgICAgICAgICAgIC8vIDMuIHN0b3JlIHZhbHVlcyBpbiBzZXF1ZW5jZVxuICAgICAgICAgICAgICAgIGRhdGFCbG9jay5wdXNoKGxvY2FsSGVhZGVyKTtcbiAgICAgICAgICAgICAgICBkYXRhQmxvY2sucHVzaChjb21wcmVzc2VkRGF0YSk7XG5cbiAgICAgICAgICAgICAgICAvLyA0LiBjb25zdHJ1Y3QgY2VudHJhbCBoZWFkZXJcbiAgICAgICAgICAgICAgICBjb25zdCBjZW50cmFsSGVhZGVyID0gZW50cnkucGFja0NlbnRyYWxIZWFkZXIoKTtcbiAgICAgICAgICAgICAgICBoZWFkZXJCbG9ja3MucHVzaChjZW50cmFsSGVhZGVyKTtcbiAgICAgICAgICAgICAgICAvLyA1LiB1cGRhdGUgbWFpbiBoZWFkZXJcbiAgICAgICAgICAgICAgICBtYWluSGVhZGVyLnNpemUgKz0gY2VudHJhbEhlYWRlci5sZW5ndGg7XG4gICAgICAgICAgICAgICAgdG90YWxTaXplICs9IGRhdGFMZW5ndGggKyBjZW50cmFsSGVhZGVyLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB0b3RhbEVudHJpZXMrKztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdG90YWxTaXplICs9IG1haW5IZWFkZXIubWFpbkhlYWRlclNpemU7IC8vIGFsc28gaW5jbHVkZXMgemlwIGZpbGUgY29tbWVudCBsZW5ndGhcbiAgICAgICAgICAgIC8vIHBvaW50IHRvIGVuZCBvZiBkYXRhIGFuZCBiZWdpbm5pbmcgb2YgY2VudHJhbCBkaXJlY3RvcnkgZmlyc3QgcmVjb3JkXG4gICAgICAgICAgICBtYWluSGVhZGVyLm9mZnNldCA9IGRpbmRleDtcbiAgICAgICAgICAgIG1haW5IZWFkZXIudG90YWxFbnRyaWVzID0gdG90YWxFbnRyaWVzO1xuXG4gICAgICAgICAgICBkaW5kZXggPSAwO1xuICAgICAgICAgICAgY29uc3Qgb3V0QnVmZmVyID0gQnVmZmVyLmFsbG9jKHRvdGFsU2l6ZSk7XG4gICAgICAgICAgICAvLyB3cml0ZSBkYXRhIGJsb2Nrc1xuICAgICAgICAgICAgZm9yIChjb25zdCBjb250ZW50IG9mIGRhdGFCbG9jaykge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQuY29weShvdXRCdWZmZXIsIGRpbmRleCk7XG4gICAgICAgICAgICAgICAgZGluZGV4ICs9IGNvbnRlbnQubGVuZ3RoO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyB3cml0ZSBjZW50cmFsIGRpcmVjdG9yeSBlbnRyaWVzXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGNvbnRlbnQgb2YgaGVhZGVyQmxvY2tzKSB7XG4gICAgICAgICAgICAgICAgY29udGVudC5jb3B5KG91dEJ1ZmZlciwgZGluZGV4KTtcbiAgICAgICAgICAgICAgICBkaW5kZXggKz0gY29udGVudC5sZW5ndGg7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHdyaXRlIG1haW4gaGVhZGVyXG4gICAgICAgICAgICBjb25zdCBtaCA9IG1haW5IZWFkZXIudG9CaW5hcnkoKTtcbiAgICAgICAgICAgIGlmIChfY29tbWVudCkge1xuICAgICAgICAgICAgICAgIF9jb21tZW50LmNvcHkobWgsIFV0aWxzLkNvbnN0YW50cy5FTkRIRFIpOyAvLyBhZGQgemlwIGZpbGUgY29tbWVudFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWguY29weShvdXRCdWZmZXIsIGRpbmRleCk7XG5cbiAgICAgICAgICAgIC8vIFNpbmNlIHdlIHVwZGF0ZSBlbnRyeSBhbmQgbWFpbiBoZWFkZXIgb2Zmc2V0cyxcbiAgICAgICAgICAgIC8vIHRoZXkgYXJlIG5vIGxvbmdlciB2YWxpZCBhbmQgd2UgaGF2ZSB0byByZXNldCBjb250ZW50XG4gICAgICAgICAgICAvLyAoSXNzdWUgNjQpXG5cbiAgICAgICAgICAgIGluQnVmZmVyID0gb3V0QnVmZmVyO1xuICAgICAgICAgICAgbG9hZGVkRW50cmllcyA9IGZhbHNlO1xuXG4gICAgICAgICAgICByZXR1cm4gb3V0QnVmZmVyO1xuICAgICAgICB9LFxuXG4gICAgICAgIHRvQXN5bmNCdWZmZXI6IGZ1bmN0aW9uICgvKkZ1bmN0aW9uKi8gb25TdWNjZXNzLCAvKkZ1bmN0aW9uKi8gb25GYWlsLCAvKkZ1bmN0aW9uKi8gb25JdGVtU3RhcnQsIC8qRnVuY3Rpb24qLyBvbkl0ZW1FbmQpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKCFsb2FkZWRFbnRyaWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlYWRFbnRyaWVzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNvcnRFbnRyaWVzKCk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhQmxvY2sgPSBbXTtcbiAgICAgICAgICAgICAgICBjb25zdCBjZW50cmFsSGVhZGVycyA9IFtdO1xuICAgICAgICAgICAgICAgIGxldCB0b3RhbFNpemUgPSAwO1xuICAgICAgICAgICAgICAgIGxldCBkaW5kZXggPSAwO1xuICAgICAgICAgICAgICAgIGxldCB0b3RhbEVudHJpZXMgPSAwO1xuXG4gICAgICAgICAgICAgICAgbWFpbkhlYWRlci5zaXplID0gMDtcbiAgICAgICAgICAgICAgICBtYWluSGVhZGVyLm9mZnNldCA9IDA7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBjb21wcmVzczJCdWZmZXIgPSBmdW5jdGlvbiAoZW50cnlMaXN0cykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZW50cnlMaXN0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbnRyeSA9IGVudHJ5TGlzdHMuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBlbnRyeS5lbnRyeU5hbWUgKyBlbnRyeS5leHRyYS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uSXRlbVN0YXJ0KSBvbkl0ZW1TdGFydChuYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudHJ5LmdldENvbXByZXNzZWREYXRhQXN5bmMoZnVuY3Rpb24gKGNvbXByZXNzZWREYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uSXRlbUVuZCkgb25JdGVtRW5kKG5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudHJ5LmhlYWRlci5vZmZzZXQgPSBkaW5kZXg7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAxLiBjb25zdHJ1Y3QgbG9jYWwgaGVhZGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbG9jYWxIZWFkZXIgPSBlbnRyeS5wYWNrTG9jYWxIZWFkZXIoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDIuIG9mZnNldHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhTGVuZ3RoID0gbG9jYWxIZWFkZXIubGVuZ3RoICsgY29tcHJlc3NlZERhdGEubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpbmRleCArPSBkYXRhTGVuZ3RoO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gMy4gc3RvcmUgdmFsdWVzIGluIHNlcXVlbmNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YUJsb2NrLnB1c2gobG9jYWxIZWFkZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFCbG9jay5wdXNoKGNvbXByZXNzZWREYXRhKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNlbnRyYWwgaGVhZGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2VudGFsSGVhZGVyID0gZW50cnkucGFja0NlbnRyYWxIZWFkZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZW50cmFsSGVhZGVycy5wdXNoKGNlbnRhbEhlYWRlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFpbkhlYWRlci5zaXplICs9IGNlbnRhbEhlYWRlci5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxTaXplICs9IGRhdGFMZW5ndGggKyBjZW50YWxIZWFkZXIubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsRW50cmllcysrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcHJlc3MyQnVmZmVyKGVudHJ5TGlzdHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RhbFNpemUgKz0gbWFpbkhlYWRlci5tYWluSGVhZGVyU2l6ZTsgLy8gYWxzbyBpbmNsdWRlcyB6aXAgZmlsZSBjb21tZW50IGxlbmd0aFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcG9pbnQgdG8gZW5kIG9mIGRhdGEgYW5kIGJlZ2lubmluZyBvZiBjZW50cmFsIGRpcmVjdG9yeSBmaXJzdCByZWNvcmRcbiAgICAgICAgICAgICAgICAgICAgICAgIG1haW5IZWFkZXIub2Zmc2V0ID0gZGluZGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFpbkhlYWRlci50b3RhbEVudHJpZXMgPSB0b3RhbEVudHJpZXM7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGRpbmRleCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvdXRCdWZmZXIgPSBCdWZmZXIuYWxsb2ModG90YWxTaXplKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFCbG9jay5mb3JFYWNoKGZ1bmN0aW9uIChjb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudC5jb3B5KG91dEJ1ZmZlciwgZGluZGV4KTsgLy8gd3JpdGUgZGF0YSBibG9ja3NcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaW5kZXggKz0gY29udGVudC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbnRyYWxIZWFkZXJzLmZvckVhY2goZnVuY3Rpb24gKGNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50LmNvcHkob3V0QnVmZmVyLCBkaW5kZXgpOyAvLyB3cml0ZSBjZW50cmFsIGRpcmVjdG9yeSBlbnRyaWVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGluZGV4ICs9IGNvbnRlbnQubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1oID0gbWFpbkhlYWRlci50b0JpbmFyeSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9jb21tZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbW1lbnQuY29weShtaCwgVXRpbHMuQ29uc3RhbnRzLkVOREhEUik7IC8vIGFkZCB6aXAgZmlsZSBjb21tZW50XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIG1oLmNvcHkob3V0QnVmZmVyLCBkaW5kZXgpOyAvLyB3cml0ZSBtYWluIGhlYWRlclxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTaW5jZSB3ZSB1cGRhdGUgZW50cnkgYW5kIG1haW4gaGVhZGVyIG9mZnNldHMsIHRoZXkgYXJlIG5vXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBsb25nZXIgdmFsaWQgYW5kIHdlIGhhdmUgdG8gcmVzZXQgY29udGVudCB1c2luZyBvdXIgbmV3IGJ1ZmZlclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gKElzc3VlIDY0KVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpbkJ1ZmZlciA9IG91dEJ1ZmZlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRlZEVudHJpZXMgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgb25TdWNjZXNzKG91dEJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgY29tcHJlc3MyQnVmZmVyKEFycmF5LmZyb20odGhpcy5lbnRyaWVzKSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgb25GYWlsKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbn07XG4iLCAiY29uc3QgVXRpbHMgPSByZXF1aXJlKFwiLi91dGlsXCIpO1xuY29uc3QgcHRoID0gcmVxdWlyZShcInBhdGhcIik7XG5jb25zdCBaaXBFbnRyeSA9IHJlcXVpcmUoXCIuL3ppcEVudHJ5XCIpO1xuY29uc3QgWmlwRmlsZSA9IHJlcXVpcmUoXCIuL3ppcEZpbGVcIik7XG5cbmNvbnN0IGdldF9Cb29sID0gKC4uLnZhbCkgPT4gVXRpbHMuZmluZExhc3QodmFsLCAoYykgPT4gdHlwZW9mIGMgPT09IFwiYm9vbGVhblwiKTtcbmNvbnN0IGdldF9TdHIgPSAoLi4udmFsKSA9PiBVdGlscy5maW5kTGFzdCh2YWwsIChjKSA9PiB0eXBlb2YgYyA9PT0gXCJzdHJpbmdcIik7XG5jb25zdCBnZXRfRnVuID0gKC4uLnZhbCkgPT4gVXRpbHMuZmluZExhc3QodmFsLCAoYykgPT4gdHlwZW9mIGMgPT09IFwiZnVuY3Rpb25cIik7XG5cbmNvbnN0IGRlZmF1bHRPcHRpb25zID0ge1xuICAgIC8vIG9wdGlvbiBcIm5vU29ydFwiIDogaWYgdHJ1ZSBpdCBkaXNhYmxlcyBmaWxlcyBzb3J0aW5nXG4gICAgbm9Tb3J0OiBmYWxzZSxcbiAgICAvLyByZWFkIGVudHJpZXMgZHVyaW5nIGxvYWQgKGluaXRpYWwgbG9hZGluZyBtYXkgYmUgc2xvd2VyKVxuICAgIHJlYWRFbnRyaWVzOiBmYWxzZSxcbiAgICAvLyBkZWZhdWx0IG1ldGhvZCBpcyBub25lXG4gICAgbWV0aG9kOiBVdGlscy5Db25zdGFudHMuTk9ORSxcbiAgICAvLyBmaWxlIHN5c3RlbVxuICAgIGZzOiBudWxsXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgvKipTdHJpbmcqLyBpbnB1dCwgLyoqIG9iamVjdCAqLyBvcHRpb25zKSB7XG4gICAgbGV0IGluQnVmZmVyID0gbnVsbDtcblxuICAgIC8vIGNyZWF0ZSBvYmplY3QgYmFzZWQgZGVmYXVsdCBvcHRpb25zLCBhbGxvd2luZyB0aGVtIHRvIGJlIG92ZXJ3cml0dGVuXG4gICAgY29uc3Qgb3B0cyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShudWxsKSwgZGVmYXVsdE9wdGlvbnMpO1xuXG4gICAgLy8gdGVzdCBpbnB1dCB2YXJpYWJsZVxuICAgIGlmIChpbnB1dCAmJiBcIm9iamVjdFwiID09PSB0eXBlb2YgaW5wdXQpIHtcbiAgICAgICAgLy8gaWYgdmFsdWUgaXMgbm90IGJ1ZmZlciB3ZSBhY2NlcHQgaXQgdG8gYmUgb2JqZWN0IHdpdGggb3B0aW9uc1xuICAgICAgICBpZiAoIShpbnB1dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpKSB7XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKG9wdHMsIGlucHV0KTtcbiAgICAgICAgICAgIGlucHV0ID0gb3B0cy5pbnB1dCA/IG9wdHMuaW5wdXQgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICBpZiAob3B0cy5pbnB1dCkgZGVsZXRlIG9wdHMuaW5wdXQ7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBpZiBpbnB1dCBpcyBidWZmZXJcbiAgICAgICAgaWYgKEJ1ZmZlci5pc0J1ZmZlcihpbnB1dCkpIHtcbiAgICAgICAgICAgIGluQnVmZmVyID0gaW5wdXQ7XG4gICAgICAgICAgICBvcHRzLm1ldGhvZCA9IFV0aWxzLkNvbnN0YW50cy5CVUZGRVI7XG4gICAgICAgICAgICBpbnB1dCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIGFzc2lnbiBvcHRpb25zXG4gICAgT2JqZWN0LmFzc2lnbihvcHRzLCBvcHRpb25zKTtcblxuICAgIC8vIGluc3RhbmNpYXRlIHV0aWxzIGZpbGVzeXN0ZW1cbiAgICBjb25zdCBmaWxldG9vbHMgPSBuZXcgVXRpbHMob3B0cyk7XG5cbiAgICBpZiAodHlwZW9mIG9wdHMuZGVjb2RlciAhPT0gXCJvYmplY3RcIiB8fCB0eXBlb2Ygb3B0cy5kZWNvZGVyLmVuY29kZSAhPT0gXCJmdW5jdGlvblwiIHx8IHR5cGVvZiBvcHRzLmRlY29kZXIuZGVjb2RlICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgb3B0cy5kZWNvZGVyID0gVXRpbHMuZGVjb2RlcjtcbiAgICB9XG5cbiAgICAvLyBpZiBpbnB1dCBpcyBmaWxlIG5hbWUgd2UgcmV0cmlldmUgaXRzIGNvbnRlbnRcbiAgICBpZiAoaW5wdXQgJiYgXCJzdHJpbmdcIiA9PT0gdHlwZW9mIGlucHV0KSB7XG4gICAgICAgIC8vIGxvYWQgemlwIGZpbGVcbiAgICAgICAgaWYgKGZpbGV0b29scy5mcy5leGlzdHNTeW5jKGlucHV0KSkge1xuICAgICAgICAgICAgb3B0cy5tZXRob2QgPSBVdGlscy5Db25zdGFudHMuRklMRTtcbiAgICAgICAgICAgIG9wdHMuZmlsZW5hbWUgPSBpbnB1dDtcbiAgICAgICAgICAgIGluQnVmZmVyID0gZmlsZXRvb2xzLmZzLnJlYWRGaWxlU3luYyhpbnB1dCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBVdGlscy5FcnJvcnMuSU5WQUxJRF9GSUxFTkFNRSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gY3JlYXRlIHZhcmlhYmxlXG4gICAgY29uc3QgX3ppcCA9IG5ldyBaaXBGaWxlKGluQnVmZmVyLCBvcHRzKTtcblxuICAgIGNvbnN0IHsgY2Fub25pY2FsLCBzYW5pdGl6ZSwgemlwbmFtZWZpeCB9ID0gVXRpbHM7XG5cbiAgICBmdW5jdGlvbiBnZXRFbnRyeSgvKipPYmplY3QqLyBlbnRyeSkge1xuICAgICAgICBpZiAoZW50cnkgJiYgX3ppcCkge1xuICAgICAgICAgICAgdmFyIGl0ZW07XG4gICAgICAgICAgICAvLyBJZiBlbnRyeSB3YXMgZ2l2ZW4gYXMgYSBmaWxlIG5hbWVcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZW50cnkgPT09IFwic3RyaW5nXCIpIGl0ZW0gPSBfemlwLmdldEVudHJ5KHB0aC5wb3NpeC5ub3JtYWxpemUoZW50cnkpKTtcbiAgICAgICAgICAgIC8vIGlmIGVudHJ5IHdhcyBnaXZlbiBhcyBhIFppcEVudHJ5IG9iamVjdFxuICAgICAgICAgICAgaWYgKHR5cGVvZiBlbnRyeSA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgZW50cnkuZW50cnlOYW1lICE9PSBcInVuZGVmaW5lZFwiICYmIHR5cGVvZiBlbnRyeS5oZWFkZXIgIT09IFwidW5kZWZpbmVkXCIpIGl0ZW0gPSBfemlwLmdldEVudHJ5KGVudHJ5LmVudHJ5TmFtZSk7XG5cbiAgICAgICAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZml4UGF0aCh6aXBQYXRoKSB7XG4gICAgICAgIGNvbnN0IHsgam9pbiwgbm9ybWFsaXplLCBzZXAgfSA9IHB0aC5wb3NpeDtcbiAgICAgICAgLy8gY29udmVydCB3aW5kb3dzIGZpbGUgc2VwYXJhdG9ycyBhbmQgbm9ybWFsaXplXG4gICAgICAgIHJldHVybiBqb2luKFwiLlwiLCBub3JtYWxpemUoc2VwICsgemlwUGF0aC5zcGxpdChcIlxcXFxcIikuam9pbihzZXApICsgc2VwKSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZmlsZW5hbWVGaWx0ZXIoZmlsdGVyZm4pIHtcbiAgICAgICAgaWYgKGZpbHRlcmZuIGluc3RhbmNlb2YgUmVnRXhwKSB7XG4gICAgICAgICAgICAvLyBpZiBmaWx0ZXIgaXMgUmVnRXhwIHdyYXAgaXRcbiAgICAgICAgICAgIHJldHVybiAoZnVuY3Rpb24gKHJ4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChmaWxlbmFtZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcngudGVzdChmaWxlbmFtZSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pKGZpbHRlcmZuKTtcbiAgICAgICAgfSBlbHNlIGlmIChcImZ1bmN0aW9uXCIgIT09IHR5cGVvZiBmaWx0ZXJmbikge1xuICAgICAgICAgICAgLy8gaWYgZmlsdGVyIGlzIG5vdCBmdW5jdGlvbiB3ZSB3aWxsIHJlcGxhY2UgaXRcbiAgICAgICAgICAgIHJldHVybiAoKSA9PiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmaWx0ZXJmbjtcbiAgICB9XG5cbiAgICAvLyBrZWVwIGxhc3QgY2hhcmFjdGVyIG9uIGZvbGRlcnNcbiAgICBjb25zdCByZWxhdGl2ZVBhdGggPSAobG9jYWwsIGVudHJ5KSA9PiB7XG4gICAgICAgIGxldCBsYXN0Q2hhciA9IGVudHJ5LnNsaWNlKC0xKTtcbiAgICAgICAgbGFzdENoYXIgPSBsYXN0Q2hhciA9PT0gZmlsZXRvb2xzLnNlcCA/IGZpbGV0b29scy5zZXAgOiBcIlwiO1xuICAgICAgICByZXR1cm4gcHRoLnJlbGF0aXZlKGxvY2FsLCBlbnRyeSkgKyBsYXN0Q2hhcjtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEV4dHJhY3RzIHRoZSBnaXZlbiBlbnRyeSBmcm9tIHRoZSBhcmNoaXZlIGFuZCByZXR1cm5zIHRoZSBjb250ZW50IGFzIGEgQnVmZmVyIG9iamVjdFxuICAgICAgICAgKiBAcGFyYW0ge1ppcEVudHJ5fHN0cmluZ30gZW50cnkgWmlwRW50cnkgb2JqZWN0IG9yIFN0cmluZyB3aXRoIHRoZSBmdWxsIHBhdGggb2YgdGhlIGVudHJ5XG4gICAgICAgICAqIEBwYXJhbSB7QnVmZmVyfHN0cmluZ30gW3Bhc3NdIC0gcGFzc3dvcmRcbiAgICAgICAgICogQHJldHVybiBCdWZmZXIgb3IgTnVsbCBpbiBjYXNlIG9mIGVycm9yXG4gICAgICAgICAqL1xuICAgICAgICByZWFkRmlsZTogZnVuY3Rpb24gKGVudHJ5LCBwYXNzKSB7XG4gICAgICAgICAgICB2YXIgaXRlbSA9IGdldEVudHJ5KGVudHJ5KTtcbiAgICAgICAgICAgIHJldHVybiAoaXRlbSAmJiBpdGVtLmdldERhdGEocGFzcykpIHx8IG51bGw7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgaG93IG1hbnkgY2hpbGQgZWxlbWVudHMgaGFzIG9uIGVudHJ5IChkaXJlY3Rvcmllcykgb24gZmlsZXMgaXQgaXMgYWx3YXlzIDBcbiAgICAgICAgICogQHBhcmFtIHtaaXBFbnRyeXxzdHJpbmd9IGVudHJ5IFppcEVudHJ5IG9iamVjdCBvciBTdHJpbmcgd2l0aCB0aGUgZnVsbCBwYXRoIG9mIHRoZSBlbnRyeVxuICAgICAgICAgKiBAcmV0dXJucyB7aW50ZWdlcn1cbiAgICAgICAgICovXG4gICAgICAgIGNoaWxkQ291bnQ6IGZ1bmN0aW9uIChlbnRyeSkge1xuICAgICAgICAgICAgY29uc3QgaXRlbSA9IGdldEVudHJ5KGVudHJ5KTtcbiAgICAgICAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF96aXAuZ2V0Q2hpbGRDb3VudChpdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQXN5bmNocm9ub3VzIHJlYWRGaWxlXG4gICAgICAgICAqIEBwYXJhbSB7WmlwRW50cnl8c3RyaW5nfSBlbnRyeSBaaXBFbnRyeSBvYmplY3Qgb3IgU3RyaW5nIHdpdGggdGhlIGZ1bGwgcGF0aCBvZiB0aGUgZW50cnlcbiAgICAgICAgICogQHBhcmFtIHtjYWxsYmFja30gY2FsbGJhY2tcbiAgICAgICAgICpcbiAgICAgICAgICogQHJldHVybiBCdWZmZXIgb3IgTnVsbCBpbiBjYXNlIG9mIGVycm9yXG4gICAgICAgICAqL1xuICAgICAgICByZWFkRmlsZUFzeW5jOiBmdW5jdGlvbiAoZW50cnksIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICB2YXIgaXRlbSA9IGdldEVudHJ5KGVudHJ5KTtcbiAgICAgICAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgaXRlbS5nZXREYXRhQXN5bmMoY2FsbGJhY2spO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhudWxsLCBcImdldEVudHJ5IGZhaWxlZCBmb3I6XCIgKyBlbnRyeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEV4dHJhY3RzIHRoZSBnaXZlbiBlbnRyeSBmcm9tIHRoZSBhcmNoaXZlIGFuZCByZXR1cm5zIHRoZSBjb250ZW50IGFzIHBsYWluIHRleHQgaW4gdGhlIGdpdmVuIGVuY29kaW5nXG4gICAgICAgICAqIEBwYXJhbSB7WmlwRW50cnl8c3RyaW5nfSBlbnRyeSAtIFppcEVudHJ5IG9iamVjdCBvciBTdHJpbmcgd2l0aCB0aGUgZnVsbCBwYXRoIG9mIHRoZSBlbnRyeVxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZW5jb2RpbmcgLSBPcHRpb25hbC4gSWYgbm8gZW5jb2RpbmcgaXMgc3BlY2lmaWVkIHV0ZjggaXMgdXNlZFxuICAgICAgICAgKlxuICAgICAgICAgKiBAcmV0dXJuIFN0cmluZ1xuICAgICAgICAgKi9cbiAgICAgICAgcmVhZEFzVGV4dDogZnVuY3Rpb24gKGVudHJ5LCBlbmNvZGluZykge1xuICAgICAgICAgICAgdmFyIGl0ZW0gPSBnZXRFbnRyeShlbnRyeSk7XG4gICAgICAgICAgICBpZiAoaXRlbSkge1xuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gaXRlbS5nZXREYXRhKCk7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEgJiYgZGF0YS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEudG9TdHJpbmcoZW5jb2RpbmcgfHwgXCJ1dGY4XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBc3luY2hyb25vdXMgcmVhZEFzVGV4dFxuICAgICAgICAgKiBAcGFyYW0ge1ppcEVudHJ5fHN0cmluZ30gZW50cnkgWmlwRW50cnkgb2JqZWN0IG9yIFN0cmluZyB3aXRoIHRoZSBmdWxsIHBhdGggb2YgdGhlIGVudHJ5XG4gICAgICAgICAqIEBwYXJhbSB7Y2FsbGJhY2t9IGNhbGxiYWNrXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbZW5jb2RpbmddIC0gT3B0aW9uYWwuIElmIG5vIGVuY29kaW5nIGlzIHNwZWNpZmllZCB1dGY4IGlzIHVzZWRcbiAgICAgICAgICpcbiAgICAgICAgICogQHJldHVybiBTdHJpbmdcbiAgICAgICAgICovXG4gICAgICAgIHJlYWRBc1RleHRBc3luYzogZnVuY3Rpb24gKGVudHJ5LCBjYWxsYmFjaywgZW5jb2RpbmcpIHtcbiAgICAgICAgICAgIHZhciBpdGVtID0gZ2V0RW50cnkoZW50cnkpO1xuICAgICAgICAgICAgaWYgKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICBpdGVtLmdldERhdGFBc3luYyhmdW5jdGlvbiAoZGF0YSwgZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGRhdGEsIGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZGF0YS50b1N0cmluZyhlbmNvZGluZyB8fCBcInV0ZjhcIikpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soXCJcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soXCJcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlbW92ZSB0aGUgZW50cnkgZnJvbSB0aGUgZmlsZSBvciB0aGUgZW50cnkgYW5kIGFsbCBpdCdzIG5lc3RlZCBkaXJlY3RvcmllcyBhbmQgZmlsZXMgaWYgdGhlIGdpdmVuIGVudHJ5IGlzIGEgZGlyZWN0b3J5XG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7WmlwRW50cnl8c3RyaW5nfSBlbnRyeVxuICAgICAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgICAgICovXG4gICAgICAgIGRlbGV0ZUZpbGU6IGZ1bmN0aW9uIChlbnRyeSwgd2l0aHN1YmZvbGRlcnMgPSB0cnVlKSB7XG4gICAgICAgICAgICAvLyBAVE9ETzogdGVzdCBkZWxldGVGaWxlXG4gICAgICAgICAgICB2YXIgaXRlbSA9IGdldEVudHJ5KGVudHJ5KTtcbiAgICAgICAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgX3ppcC5kZWxldGVGaWxlKGl0ZW0uZW50cnlOYW1lLCB3aXRoc3ViZm9sZGVycyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlbW92ZSB0aGUgZW50cnkgZnJvbSB0aGUgZmlsZSBvciBkaXJlY3Rvcnkgd2l0aG91dCBhZmZlY3RpbmcgYW55IG5lc3RlZCBlbnRyaWVzXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7WmlwRW50cnl8c3RyaW5nfSBlbnRyeVxuICAgICAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgICAgICovXG4gICAgICAgIGRlbGV0ZUVudHJ5OiBmdW5jdGlvbiAoZW50cnkpIHtcbiAgICAgICAgICAgIC8vIEBUT0RPOiB0ZXN0IGRlbGV0ZUVudHJ5XG4gICAgICAgICAgICB2YXIgaXRlbSA9IGdldEVudHJ5KGVudHJ5KTtcbiAgICAgICAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgX3ppcC5kZWxldGVFbnRyeShpdGVtLmVudHJ5TmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFkZHMgYSBjb21tZW50IHRvIHRoZSB6aXAuIFRoZSB6aXAgbXVzdCBiZSByZXdyaXR0ZW4gYWZ0ZXIgYWRkaW5nIHRoZSBjb21tZW50LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gY29tbWVudFxuICAgICAgICAgKi9cbiAgICAgICAgYWRkWmlwQ29tbWVudDogZnVuY3Rpb24gKGNvbW1lbnQpIHtcbiAgICAgICAgICAgIC8vIEBUT0RPOiB0ZXN0IGFkZFppcENvbW1lbnRcbiAgICAgICAgICAgIF96aXAuY29tbWVudCA9IGNvbW1lbnQ7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgdGhlIHppcCBjb21tZW50XG4gICAgICAgICAqXG4gICAgICAgICAqIEByZXR1cm4gU3RyaW5nXG4gICAgICAgICAqL1xuICAgICAgICBnZXRaaXBDb21tZW50OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3ppcC5jb21tZW50IHx8IFwiXCI7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFkZHMgYSBjb21tZW50IHRvIGEgc3BlY2lmaWVkIHppcEVudHJ5LiBUaGUgemlwIG11c3QgYmUgcmV3cml0dGVuIGFmdGVyIGFkZGluZyB0aGUgY29tbWVudFxuICAgICAgICAgKiBUaGUgY29tbWVudCBjYW5ub3QgZXhjZWVkIDY1NTM1IGNoYXJhY3RlcnMgaW4gbGVuZ3RoXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7WmlwRW50cnl9IGVudHJ5XG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjb21tZW50XG4gICAgICAgICAqL1xuICAgICAgICBhZGRaaXBFbnRyeUNvbW1lbnQ6IGZ1bmN0aW9uIChlbnRyeSwgY29tbWVudCkge1xuICAgICAgICAgICAgdmFyIGl0ZW0gPSBnZXRFbnRyeShlbnRyeSk7XG4gICAgICAgICAgICBpZiAoaXRlbSkge1xuICAgICAgICAgICAgICAgIGl0ZW0uY29tbWVudCA9IGNvbW1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgdGhlIGNvbW1lbnQgb2YgdGhlIHNwZWNpZmllZCBlbnRyeVxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge1ppcEVudHJ5fSBlbnRyeVxuICAgICAgICAgKiBAcmV0dXJuIFN0cmluZ1xuICAgICAgICAgKi9cbiAgICAgICAgZ2V0WmlwRW50cnlDb21tZW50OiBmdW5jdGlvbiAoZW50cnkpIHtcbiAgICAgICAgICAgIHZhciBpdGVtID0gZ2V0RW50cnkoZW50cnkpO1xuICAgICAgICAgICAgaWYgKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5jb21tZW50IHx8IFwiXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogVXBkYXRlcyB0aGUgY29udGVudCBvZiBhbiBleGlzdGluZyBlbnRyeSBpbnNpZGUgdGhlIGFyY2hpdmUuIFRoZSB6aXAgbXVzdCBiZSByZXdyaXR0ZW4gYWZ0ZXIgdXBkYXRpbmcgdGhlIGNvbnRlbnRcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtaaXBFbnRyeX0gZW50cnlcbiAgICAgICAgICogQHBhcmFtIHtCdWZmZXJ9IGNvbnRlbnRcbiAgICAgICAgICovXG4gICAgICAgIHVwZGF0ZUZpbGU6IGZ1bmN0aW9uIChlbnRyeSwgY29udGVudCkge1xuICAgICAgICAgICAgdmFyIGl0ZW0gPSBnZXRFbnRyeShlbnRyeSk7XG4gICAgICAgICAgICBpZiAoaXRlbSkge1xuICAgICAgICAgICAgICAgIGl0ZW0uc2V0RGF0YShjb250ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQWRkcyBhIGZpbGUgZnJvbSB0aGUgZGlzayB0byB0aGUgYXJjaGl2ZVxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbG9jYWxQYXRoIEZpbGUgdG8gYWRkIHRvIHppcFxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3ppcFBhdGhdIE9wdGlvbmFsIHBhdGggaW5zaWRlIHRoZSB6aXBcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFt6aXBOYW1lXSBPcHRpb25hbCBuYW1lIGZvciB0aGUgZmlsZVxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2NvbW1lbnRdIE9wdGlvbmFsIGZpbGUgY29tbWVudFxuICAgICAgICAgKi9cbiAgICAgICAgYWRkTG9jYWxGaWxlOiBmdW5jdGlvbiAobG9jYWxQYXRoLCB6aXBQYXRoLCB6aXBOYW1lLCBjb21tZW50KSB7XG4gICAgICAgICAgICBpZiAoZmlsZXRvb2xzLmZzLmV4aXN0c1N5bmMobG9jYWxQYXRoKSkge1xuICAgICAgICAgICAgICAgIC8vIGZpeCBaaXBQYXRoXG4gICAgICAgICAgICAgICAgemlwUGF0aCA9IHppcFBhdGggPyBmaXhQYXRoKHppcFBhdGgpIDogXCJcIjtcblxuICAgICAgICAgICAgICAgIC8vIHAgLSBsb2NhbCBmaWxlIG5hbWVcbiAgICAgICAgICAgICAgICBjb25zdCBwID0gcHRoLndpbjMyLmJhc2VuYW1lKHB0aC53aW4zMi5ub3JtYWxpemUobG9jYWxQYXRoKSk7XG5cbiAgICAgICAgICAgICAgICAvLyBhZGQgZmlsZSBuYW1lIGludG8gemlwcGF0aFxuICAgICAgICAgICAgICAgIHppcFBhdGggKz0gemlwTmFtZSA/IHppcE5hbWUgOiBwO1xuXG4gICAgICAgICAgICAgICAgLy8gcmVhZCBmaWxlIGF0dHJpYnV0ZXNcbiAgICAgICAgICAgICAgICBjb25zdCBfYXR0ciA9IGZpbGV0b29scy5mcy5zdGF0U3luYyhsb2NhbFBhdGgpO1xuXG4gICAgICAgICAgICAgICAgLy8gZ2V0IGZpbGUgY29udGVudFxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBfYXR0ci5pc0ZpbGUoKSA/IGZpbGV0b29scy5mcy5yZWFkRmlsZVN5bmMobG9jYWxQYXRoKSA6IEJ1ZmZlci5hbGxvYygwKTtcblxuICAgICAgICAgICAgICAgIC8vIGlmIGZvbGRlclxuICAgICAgICAgICAgICAgIGlmIChfYXR0ci5pc0RpcmVjdG9yeSgpKSB6aXBQYXRoICs9IGZpbGV0b29scy5zZXA7XG5cbiAgICAgICAgICAgICAgICAvLyBhZGQgZmlsZSBpbnRvIHppcCBmaWxlXG4gICAgICAgICAgICAgICAgdGhpcy5hZGRGaWxlKHppcFBhdGgsIGRhdGEsIGNvbW1lbnQsIF9hdHRyKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgVXRpbHMuRXJyb3JzLkZJTEVfTk9UX0ZPVU5EKGxvY2FsUGF0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhbGxiYWNrIGZvciBzaG93aW5nIGlmIGV2ZXJ5dGhpbmcgd2FzIGRvbmUuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBjYWxsYmFjayBkb25lQ2FsbGJhY2tcbiAgICAgICAgICogQHBhcmFtIHtFcnJvcn0gZXJyIC0gRXJyb3Igb2JqZWN0XG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gZG9uZSAtIHdhcyByZXF1ZXN0IGZ1bGx5IGNvbXBsZXRlZFxuICAgICAgICAgKi9cblxuICAgICAgICAvKipcbiAgICAgICAgICogQWRkcyBhIGZpbGUgZnJvbSB0aGUgZGlzayB0byB0aGUgYXJjaGl2ZVxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0geyhvYmplY3R8c3RyaW5nKX0gb3B0aW9ucyAtIG9wdGlvbnMgb2JqZWN0LCBpZiBpdCBpcyBzdHJpbmcgaXQgdXMgdXNlZCBhcyBsb2NhbFBhdGguXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLmxvY2FsUGF0aCAtIExvY2FsIHBhdGggdG8gdGhlIGZpbGUuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5jb21tZW50XSAtIE9wdGlvbmFsIGZpbGUgY29tbWVudC5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnppcFBhdGhdIC0gT3B0aW9uYWwgcGF0aCBpbnNpZGUgdGhlIHppcFxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuemlwTmFtZV0gLSBPcHRpb25hbCBuYW1lIGZvciB0aGUgZmlsZVxuICAgICAgICAgKiBAcGFyYW0ge2RvbmVDYWxsYmFja30gY2FsbGJhY2sgLSBUaGUgY2FsbGJhY2sgdGhhdCBoYW5kbGVzIHRoZSByZXNwb25zZS5cbiAgICAgICAgICovXG4gICAgICAgIGFkZExvY2FsRmlsZUFzeW5jOiBmdW5jdGlvbiAob3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSB0eXBlb2Ygb3B0aW9ucyA9PT0gXCJvYmplY3RcIiA/IG9wdGlvbnMgOiB7IGxvY2FsUGF0aDogb3B0aW9ucyB9O1xuICAgICAgICAgICAgY29uc3QgbG9jYWxQYXRoID0gcHRoLnJlc29sdmUob3B0aW9ucy5sb2NhbFBhdGgpO1xuICAgICAgICAgICAgY29uc3QgeyBjb21tZW50IH0gPSBvcHRpb25zO1xuICAgICAgICAgICAgbGV0IHsgemlwUGF0aCwgemlwTmFtZSB9ID0gb3B0aW9ucztcbiAgICAgICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICBmaWxldG9vbHMuZnMuc3RhdChsb2NhbFBhdGgsIGZ1bmN0aW9uIChlcnIsIHN0YXRzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycikgcmV0dXJuIGNhbGxiYWNrKGVyciwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIC8vIGZpeCBaaXBQYXRoXG4gICAgICAgICAgICAgICAgemlwUGF0aCA9IHppcFBhdGggPyBmaXhQYXRoKHppcFBhdGgpIDogXCJcIjtcbiAgICAgICAgICAgICAgICAvLyBwIC0gbG9jYWwgZmlsZSBuYW1lXG4gICAgICAgICAgICAgICAgY29uc3QgcCA9IHB0aC53aW4zMi5iYXNlbmFtZShwdGgud2luMzIubm9ybWFsaXplKGxvY2FsUGF0aCkpO1xuICAgICAgICAgICAgICAgIC8vIGFkZCBmaWxlIG5hbWUgaW50byB6aXBwYXRoXG4gICAgICAgICAgICAgICAgemlwUGF0aCArPSB6aXBOYW1lID8gemlwTmFtZSA6IHA7XG5cbiAgICAgICAgICAgICAgICBpZiAoc3RhdHMuaXNGaWxlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZmlsZXRvb2xzLmZzLnJlYWRGaWxlKGxvY2FsUGF0aCwgZnVuY3Rpb24gKGVyciwgZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikgcmV0dXJuIGNhbGxiYWNrKGVyciwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5hZGRGaWxlKHppcFBhdGgsIGRhdGEsIGNvbW1lbnQsIHN0YXRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXRJbW1lZGlhdGUoY2FsbGJhY2ssIHVuZGVmaW5lZCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RhdHMuaXNEaXJlY3RvcnkoKSkge1xuICAgICAgICAgICAgICAgICAgICB6aXBQYXRoICs9IGZpbGV0b29scy5zZXA7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuYWRkRmlsZSh6aXBQYXRoLCBCdWZmZXIuYWxsb2MoMCksIGNvbW1lbnQsIHN0YXRzKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNldEltbWVkaWF0ZShjYWxsYmFjaywgdW5kZWZpbmVkLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQWRkcyBhIGxvY2FsIGRpcmVjdG9yeSBhbmQgYWxsIGl0cyBuZXN0ZWQgZmlsZXMgYW5kIGRpcmVjdG9yaWVzIHRvIHRoZSBhcmNoaXZlXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBsb2NhbFBhdGggLSBsb2NhbCBwYXRoIHRvIHRoZSBmb2xkZXJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFt6aXBQYXRoXSAtIG9wdGlvbmFsIHBhdGggaW5zaWRlIHppcFxuICAgICAgICAgKiBAcGFyYW0geyhSZWdFeHB8ZnVuY3Rpb24pfSBbZmlsdGVyXSAtIG9wdGlvbmFsIFJlZ0V4cCBvciBGdW5jdGlvbiBpZiBmaWxlcyBtYXRjaCB3aWxsIGJlIGluY2x1ZGVkLlxuICAgICAgICAgKi9cbiAgICAgICAgYWRkTG9jYWxGb2xkZXI6IGZ1bmN0aW9uIChsb2NhbFBhdGgsIHppcFBhdGgsIGZpbHRlcikge1xuICAgICAgICAgICAgLy8gUHJlcGFyZSBmaWx0ZXJcbiAgICAgICAgICAgIGZpbHRlciA9IGZpbGVuYW1lRmlsdGVyKGZpbHRlcik7XG5cbiAgICAgICAgICAgIC8vIGZpeCBaaXBQYXRoXG4gICAgICAgICAgICB6aXBQYXRoID0gemlwUGF0aCA/IGZpeFBhdGgoemlwUGF0aCkgOiBcIlwiO1xuXG4gICAgICAgICAgICAvLyBub3JtYWxpemUgdGhlIHBhdGggZmlyc3RcbiAgICAgICAgICAgIGxvY2FsUGF0aCA9IHB0aC5ub3JtYWxpemUobG9jYWxQYXRoKTtcblxuICAgICAgICAgICAgaWYgKGZpbGV0b29scy5mcy5leGlzdHNTeW5jKGxvY2FsUGF0aCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtcyA9IGZpbGV0b29scy5maW5kRmlsZXMobG9jYWxQYXRoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcblxuICAgICAgICAgICAgICAgIGlmIChpdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBmaWxlcGF0aCBvZiBpdGVtcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcCA9IHB0aC5qb2luKHppcFBhdGgsIHJlbGF0aXZlUGF0aChsb2NhbFBhdGgsIGZpbGVwYXRoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlsdGVyKHApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5hZGRMb2NhbEZpbGUoZmlsZXBhdGgsIHB0aC5kaXJuYW1lKHApKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgVXRpbHMuRXJyb3JzLkZJTEVfTk9UX0ZPVU5EKGxvY2FsUGF0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFzeW5jaHJvbm91cyBhZGRMb2NhbEZvbGRlclxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbG9jYWxQYXRoXG4gICAgICAgICAqIEBwYXJhbSB7Y2FsbGJhY2t9IGNhbGxiYWNrXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbemlwUGF0aF0gb3B0aW9uYWwgcGF0aCBpbnNpZGUgemlwXG4gICAgICAgICAqIEBwYXJhbSB7UmVnRXhwfGZ1bmN0aW9ufSBbZmlsdGVyXSBvcHRpb25hbCBSZWdFeHAgb3IgRnVuY3Rpb24gaWYgZmlsZXMgbWF0Y2ggd2lsbFxuICAgICAgICAgKiAgICAgICAgICAgICAgIGJlIGluY2x1ZGVkLlxuICAgICAgICAgKi9cbiAgICAgICAgYWRkTG9jYWxGb2xkZXJBc3luYzogZnVuY3Rpb24gKGxvY2FsUGF0aCwgY2FsbGJhY2ssIHppcFBhdGgsIGZpbHRlcikge1xuICAgICAgICAgICAgLy8gUHJlcGFyZSBmaWx0ZXJcbiAgICAgICAgICAgIGZpbHRlciA9IGZpbGVuYW1lRmlsdGVyKGZpbHRlcik7XG5cbiAgICAgICAgICAgIC8vIGZpeCBaaXBQYXRoXG4gICAgICAgICAgICB6aXBQYXRoID0gemlwUGF0aCA/IGZpeFBhdGgoemlwUGF0aCkgOiBcIlwiO1xuXG4gICAgICAgICAgICAvLyBub3JtYWxpemUgdGhlIHBhdGggZmlyc3RcbiAgICAgICAgICAgIGxvY2FsUGF0aCA9IHB0aC5ub3JtYWxpemUobG9jYWxQYXRoKTtcblxuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAgICAgZmlsZXRvb2xzLmZzLm9wZW4obG9jYWxQYXRoLCBcInJcIiwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgIGlmIChlcnIgJiYgZXJyLmNvZGUgPT09IFwiRU5PRU5UXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sodW5kZWZpbmVkLCBVdGlscy5FcnJvcnMuRklMRV9OT1RfRk9VTkQobG9jYWxQYXRoKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sodW5kZWZpbmVkLCBlcnIpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpdGVtcyA9IGZpbGV0b29scy5maW5kRmlsZXMobG9jYWxQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSAtMTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgbmV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGkgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpIDwgaXRlbXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpbGVwYXRoID0gaXRlbXNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHAgPSByZWxhdGl2ZVBhdGgobG9jYWxQYXRoLCBmaWxlcGF0aCkuc3BsaXQoXCJcXFxcXCIpLmpvaW4oXCIvXCIpOyAvL3dpbmRvd3MgZml4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IHBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm5vcm1hbGl6ZShcIk5GRFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvW1xcdTAzMDAtXFx1MDM2Zl0vZywgXCJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1teXFx4MjAtXFx4N0VdL2csIFwiXCIpOyAvLyBhY2NlbnQgZml4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpbHRlcihwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxldG9vbHMuZnMuc3RhdChmaWxlcGF0aCwgZnVuY3Rpb24gKGVyMCwgc3RhdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcjApIGNhbGxiYWNrKHVuZGVmaW5lZCwgZXIwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGF0cy5pc0ZpbGUoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGV0b29scy5mcy5yZWFkRmlsZShmaWxlcGF0aCwgZnVuY3Rpb24gKGVyMSwgZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXIxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayh1bmRlZmluZWQsIGVyMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmFkZEZpbGUoemlwUGF0aCArIHAsIGRhdGEsIFwiXCIsIHN0YXRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmFkZEZpbGUoemlwUGF0aCArIHAgKyBcIi9cIiwgQnVmZmVyLmFsbG9jKDApLCBcIlwiLCBzdGF0cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLm5leHRUaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayh0cnVlLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIG5leHQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQWRkcyBhIGxvY2FsIGRpcmVjdG9yeSBhbmQgYWxsIGl0cyBuZXN0ZWQgZmlsZXMgYW5kIGRpcmVjdG9yaWVzIHRvIHRoZSBhcmNoaXZlXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0IHwgc3RyaW5nfSBvcHRpb25zIC0gb3B0aW9ucyBvYmplY3QsIGlmIGl0IGlzIHN0cmluZyBpdCB1cyB1c2VkIGFzIGxvY2FsUGF0aC5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMubG9jYWxQYXRoIC0gTG9jYWwgcGF0aCB0byB0aGUgZm9sZGVyLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuemlwUGF0aF0gLSBvcHRpb25hbCBwYXRoIGluc2lkZSB6aXAuXG4gICAgICAgICAqIEBwYXJhbSB7UmVnRXhwfGZ1bmN0aW9ufSBbb3B0aW9ucy5maWx0ZXJdIC0gb3B0aW9uYWwgUmVnRXhwIG9yIEZ1bmN0aW9uIGlmIGZpbGVzIG1hdGNoIHdpbGwgYmUgaW5jbHVkZWQuXG4gICAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb258c3RyaW5nfSBbb3B0aW9ucy5uYW1lZml4XSAtIG9wdGlvbmFsIGZ1bmN0aW9uIHRvIGhlbHAgZml4IGZpbGVuYW1lXG4gICAgICAgICAqIEBwYXJhbSB7ZG9uZUNhbGxiYWNrfSBjYWxsYmFjayAtIFRoZSBjYWxsYmFjayB0aGF0IGhhbmRsZXMgdGhlIHJlc3BvbnNlLlxuICAgICAgICAgKlxuICAgICAgICAgKi9cbiAgICAgICAgYWRkTG9jYWxGb2xkZXJBc3luYzI6IGZ1bmN0aW9uIChvcHRpb25zLCBjYWxsYmFjaykge1xuICAgICAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICBvcHRpb25zID0gdHlwZW9mIG9wdGlvbnMgPT09IFwib2JqZWN0XCIgPyBvcHRpb25zIDogeyBsb2NhbFBhdGg6IG9wdGlvbnMgfTtcbiAgICAgICAgICAgIGxvY2FsUGF0aCA9IHB0aC5yZXNvbHZlKGZpeFBhdGgob3B0aW9ucy5sb2NhbFBhdGgpKTtcbiAgICAgICAgICAgIGxldCB7IHppcFBhdGgsIGZpbHRlciwgbmFtZWZpeCB9ID0gb3B0aW9ucztcblxuICAgICAgICAgICAgaWYgKGZpbHRlciBpbnN0YW5jZW9mIFJlZ0V4cCkge1xuICAgICAgICAgICAgICAgIGZpbHRlciA9IChmdW5jdGlvbiAocngpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChmaWxlbmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJ4LnRlc3QoZmlsZW5hbWUpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pKGZpbHRlcik7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFwiZnVuY3Rpb25cIiAhPT0gdHlwZW9mIGZpbHRlcikge1xuICAgICAgICAgICAgICAgIGZpbHRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gZml4IFppcFBhdGhcbiAgICAgICAgICAgIHppcFBhdGggPSB6aXBQYXRoID8gZml4UGF0aCh6aXBQYXRoKSA6IFwiXCI7XG5cbiAgICAgICAgICAgIC8vIENoZWNrIE5hbWVmaXggZnVuY3Rpb25cbiAgICAgICAgICAgIGlmIChuYW1lZml4ID09IFwibGF0aW4xXCIpIHtcbiAgICAgICAgICAgICAgICBuYW1lZml4ID0gKHN0cikgPT5cbiAgICAgICAgICAgICAgICAgICAgc3RyXG4gICAgICAgICAgICAgICAgICAgICAgICAubm9ybWFsaXplKFwiTkZEXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvW1xcdTAzMDAtXFx1MDM2Zl0vZywgXCJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9bXlxceDIwLVxceDdFXS9nLCBcIlwiKTsgLy8gYWNjZW50IGZpeCAobGF0aW4xIGNoYXJhY2VycyBvbmx5KVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodHlwZW9mIG5hbWVmaXggIT09IFwiZnVuY3Rpb25cIikgbmFtZWZpeCA9IChzdHIpID0+IHN0cjtcblxuICAgICAgICAgICAgLy8gaW50ZXJuYWwsIGNyZWF0ZSByZWxhdGl2ZSBwYXRoICsgZml4IHRoZSBuYW1lXG4gICAgICAgICAgICBjb25zdCByZWxQYXRoRml4ID0gKGVudHJ5KSA9PiBwdGguam9pbih6aXBQYXRoLCBuYW1lZml4KHJlbGF0aXZlUGF0aChsb2NhbFBhdGgsIGVudHJ5KSkpO1xuICAgICAgICAgICAgY29uc3QgZmlsZU5hbWVGaXggPSAoZW50cnkpID0+IHB0aC53aW4zMi5iYXNlbmFtZShwdGgud2luMzIubm9ybWFsaXplKG5hbWVmaXgoZW50cnkpKSk7XG5cbiAgICAgICAgICAgIGZpbGV0b29scy5mcy5vcGVuKGxvY2FsUGF0aCwgXCJyXCIsIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyICYmIGVyci5jb2RlID09PSBcIkVOT0VOVFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHVuZGVmaW5lZCwgVXRpbHMuRXJyb3JzLkZJTEVfTk9UX0ZPVU5EKGxvY2FsUGF0aCkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHVuZGVmaW5lZCwgZXJyKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmaWxldG9vbHMuZmluZEZpbGVzQXN5bmMobG9jYWxQYXRoLCBmdW5jdGlvbiAoZXJyLCBmaWxlRW50cmllcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikgcmV0dXJuIGNhbGxiYWNrKGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlRW50cmllcyA9IGZpbGVFbnRyaWVzLmZpbHRlcigoZGlyKSA9PiBmaWx0ZXIocmVsUGF0aEZpeChkaXIpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWZpbGVFbnRyaWVzLmxlbmd0aCkgY2FsbGJhY2sodW5kZWZpbmVkLCBmYWxzZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEltbWVkaWF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlRW50cmllcy5yZXZlcnNlKCkucmVkdWNlKGZ1bmN0aW9uIChuZXh0LCBlbnRyeSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGVyciwgZG9uZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVyciB8fCBkb25lID09PSBmYWxzZSkgcmV0dXJuIHNldEltbWVkaWF0ZShuZXh0LCBlcnIsIGZhbHNlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5hZGRMb2NhbEZpbGVBc3luYyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsUGF0aDogZW50cnksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHppcFBhdGg6IHB0aC5kaXJuYW1lKHJlbFBhdGhGaXgoZW50cnkpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgemlwTmFtZTogZmlsZU5hbWVGaXgoZW50cnkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGNhbGxiYWNrKVxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFkZHMgYSBsb2NhbCBkaXJlY3RvcnkgYW5kIGFsbCBpdHMgbmVzdGVkIGZpbGVzIGFuZCBkaXJlY3RvcmllcyB0byB0aGUgYXJjaGl2ZVxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbG9jYWxQYXRoIC0gcGF0aCB3aGVyZSBmaWxlcyB3aWxsIGJlIGV4dHJhY3RlZFxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gcHJvcHMgLSBvcHRpb25hbCBwcm9wZXJ0aWVzXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbcHJvcHMuemlwUGF0aF0gLSBvcHRpb25hbCBwYXRoIGluc2lkZSB6aXBcbiAgICAgICAgICogQHBhcmFtIHtSZWdFeHB8ZnVuY3Rpb259IFtwcm9wcy5maWx0ZXJdIC0gb3B0aW9uYWwgUmVnRXhwIG9yIEZ1bmN0aW9uIGlmIGZpbGVzIG1hdGNoIHdpbGwgYmUgaW5jbHVkZWQuXG4gICAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb258c3RyaW5nfSBbcHJvcHMubmFtZWZpeF0gLSBvcHRpb25hbCBmdW5jdGlvbiB0byBoZWxwIGZpeCBmaWxlbmFtZVxuICAgICAgICAgKi9cbiAgICAgICAgYWRkTG9jYWxGb2xkZXJQcm9taXNlOiBmdW5jdGlvbiAobG9jYWxQYXRoLCBwcm9wcykge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZExvY2FsRm9sZGVyQXN5bmMyKE9iamVjdC5hc3NpZ24oeyBsb2NhbFBhdGggfSwgcHJvcHMpLCAoZXJyLCBkb25lKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZG9uZSkgcmVzb2x2ZSh0aGlzKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBbGxvd3MgeW91IHRvIGNyZWF0ZSBhIGVudHJ5IChmaWxlIG9yIGRpcmVjdG9yeSkgaW4gdGhlIHppcCBmaWxlLlxuICAgICAgICAgKiBJZiB5b3Ugd2FudCB0byBjcmVhdGUgYSBkaXJlY3RvcnkgdGhlIGVudHJ5TmFtZSBtdXN0IGVuZCBpbiAvIGFuZCBhIG51bGwgYnVmZmVyIHNob3VsZCBiZSBwcm92aWRlZC5cbiAgICAgICAgICogQ29tbWVudCBhbmQgYXR0cmlidXRlcyBhcmUgb3B0aW9uYWxcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGVudHJ5TmFtZVxuICAgICAgICAgKiBAcGFyYW0ge0J1ZmZlciB8IHN0cmluZ30gY29udGVudCAtIGZpbGUgY29udGVudCBhcyBidWZmZXIgb3IgdXRmOCBjb2RlZCBzdHJpbmdcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFtjb21tZW50XSAtIGZpbGUgY29tbWVudFxuICAgICAgICAgKiBAcGFyYW0ge251bWJlciB8IG9iamVjdH0gW2F0dHJdIC0gbnVtYmVyIGFzIHVuaXggZmlsZSBwZXJtaXNzaW9ucywgb2JqZWN0IGFzIGZpbGVzeXN0ZW0gU3RhdHMgb2JqZWN0XG4gICAgICAgICAqL1xuICAgICAgICBhZGRGaWxlOiBmdW5jdGlvbiAoZW50cnlOYW1lLCBjb250ZW50LCBjb21tZW50LCBhdHRyKSB7XG4gICAgICAgICAgICBlbnRyeU5hbWUgPSB6aXBuYW1lZml4KGVudHJ5TmFtZSk7XG4gICAgICAgICAgICBsZXQgZW50cnkgPSBnZXRFbnRyeShlbnRyeU5hbWUpO1xuICAgICAgICAgICAgY29uc3QgdXBkYXRlID0gZW50cnkgIT0gbnVsbDtcblxuICAgICAgICAgICAgLy8gcHJlcGFyZSBuZXcgZW50cnlcbiAgICAgICAgICAgIGlmICghdXBkYXRlKSB7XG4gICAgICAgICAgICAgICAgZW50cnkgPSBuZXcgWmlwRW50cnkob3B0cyk7XG4gICAgICAgICAgICAgICAgZW50cnkuZW50cnlOYW1lID0gZW50cnlOYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZW50cnkuY29tbWVudCA9IGNvbW1lbnQgfHwgXCJcIjtcblxuICAgICAgICAgICAgY29uc3QgaXNTdGF0ID0gXCJvYmplY3RcIiA9PT0gdHlwZW9mIGF0dHIgJiYgYXR0ciBpbnN0YW5jZW9mIGZpbGV0b29scy5mcy5TdGF0cztcblxuICAgICAgICAgICAgLy8gbGFzdCBtb2RpZmljYXRpb24gdGltZSBmcm9tIGZpbGUgc3RhdHNcbiAgICAgICAgICAgIGlmIChpc1N0YXQpIHtcbiAgICAgICAgICAgICAgICBlbnRyeS5oZWFkZXIudGltZSA9IGF0dHIubXRpbWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFNldCBmaWxlIGF0dHJpYnV0ZVxuICAgICAgICAgICAgdmFyIGZpbGVhdHRyID0gZW50cnkuaXNEaXJlY3RvcnkgPyAweDEwIDogMDsgLy8gKE1TLURPUyBkaXJlY3RvcnkgZmxhZylcblxuICAgICAgICAgICAgLy8gZXh0ZW5kZWQgYXR0cmlidXRlcyBmaWVsZCBmb3IgVW5peFxuICAgICAgICAgICAgLy8gc2V0IGZpbGUgdHlwZSBlaXRoZXIgU19JRkRJUiAvIFNfSUZSRUdcbiAgICAgICAgICAgIGxldCB1bml4ID0gZW50cnkuaXNEaXJlY3RvcnkgPyAweDQwMDAgOiAweDgwMDA7XG5cbiAgICAgICAgICAgIGlmIChpc1N0YXQpIHtcbiAgICAgICAgICAgICAgICAvLyBGaWxlIGF0dHJpYnV0ZXMgZnJvbSBmaWxlIHN0YXRzXG4gICAgICAgICAgICAgICAgdW5peCB8PSAweGZmZiAmIGF0dHIubW9kZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXCJudW1iZXJcIiA9PT0gdHlwZW9mIGF0dHIpIHtcbiAgICAgICAgICAgICAgICAvLyBhdHRyIGZyb20gZ2l2ZW4gYXR0ciB2YWx1ZXNcbiAgICAgICAgICAgICAgICB1bml4IHw9IDB4ZmZmICYgYXR0cjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gRGVmYXVsdCB2YWx1ZXM6XG4gICAgICAgICAgICAgICAgdW5peCB8PSBlbnRyeS5pc0RpcmVjdG9yeSA/IDBvNzU1IDogMG82NDQ7IC8vIHBlcm1pc3Npb25zIChkcnd4ci14ci14KSBvciAoLXItd3ItLXItLSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZmlsZWF0dHIgPSAoZmlsZWF0dHIgfCAodW5peCA8PCAxNikpID4+PiAwOyAvLyBhZGQgYXR0cmlidXRlc1xuXG4gICAgICAgICAgICBlbnRyeS5hdHRyID0gZmlsZWF0dHI7XG5cbiAgICAgICAgICAgIGVudHJ5LnNldERhdGEoY29udGVudCk7XG4gICAgICAgICAgICBpZiAoIXVwZGF0ZSkgX3ppcC5zZXRFbnRyeShlbnRyeSk7XG5cbiAgICAgICAgICAgIHJldHVybiBlbnRyeTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyBhbiBhcnJheSBvZiBaaXBFbnRyeSBvYmplY3RzIHJlcHJlc2VudGluZyB0aGUgZmlsZXMgYW5kIGZvbGRlcnMgaW5zaWRlIHRoZSBhcmNoaXZlXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbcGFzc3dvcmRdXG4gICAgICAgICAqIEByZXR1cm5zIEFycmF5XG4gICAgICAgICAqL1xuICAgICAgICBnZXRFbnRyaWVzOiBmdW5jdGlvbiAocGFzc3dvcmQpIHtcbiAgICAgICAgICAgIF96aXAucGFzc3dvcmQgPSBwYXNzd29yZDtcbiAgICAgICAgICAgIHJldHVybiBfemlwID8gX3ppcC5lbnRyaWVzIDogW107XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgYSBaaXBFbnRyeSBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBmaWxlIG9yIGZvbGRlciBzcGVjaWZpZWQgYnkgYGBuYW1lYGAuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAgICAgICAqIEByZXR1cm4gWmlwRW50cnlcbiAgICAgICAgICovXG4gICAgICAgIGdldEVudHJ5OiBmdW5jdGlvbiAoLyoqU3RyaW5nKi8gbmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIGdldEVudHJ5KG5hbWUpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGdldEVudHJ5Q291bnQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfemlwLmdldEVudHJ5Q291bnQoKTtcbiAgICAgICAgfSxcblxuICAgICAgICBmb3JFYWNoOiBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHJldHVybiBfemlwLmZvckVhY2goY2FsbGJhY2spO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFeHRyYWN0cyB0aGUgZ2l2ZW4gZW50cnkgdG8gdGhlIGdpdmVuIHRhcmdldFBhdGhcbiAgICAgICAgICogSWYgdGhlIGVudHJ5IGlzIGEgZGlyZWN0b3J5IGluc2lkZSB0aGUgYXJjaGl2ZSwgdGhlIGVudGlyZSBkaXJlY3RvcnkgYW5kIGl0J3Mgc3ViZGlyZWN0b3JpZXMgd2lsbCBiZSBleHRyYWN0ZWRcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd8WmlwRW50cnl9IGVudHJ5IC0gWmlwRW50cnkgb2JqZWN0IG9yIFN0cmluZyB3aXRoIHRoZSBmdWxsIHBhdGggb2YgdGhlIGVudHJ5XG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0YXJnZXRQYXRoIC0gVGFyZ2V0IGZvbGRlciB3aGVyZSB0byB3cml0ZSB0aGUgZmlsZVxuICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFttYWludGFpbkVudHJ5UGF0aD10cnVlXSAtIElmIG1haW50YWluRW50cnlQYXRoIGlzIHRydWUgYW5kIHRoZSBlbnRyeSBpcyBpbnNpZGUgYSBmb2xkZXIsIHRoZSBlbnRyeSBmb2xkZXIgd2lsbCBiZSBjcmVhdGVkIGluIHRhcmdldFBhdGggYXMgd2VsbC4gRGVmYXVsdCBpcyBUUlVFXG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW292ZXJ3cml0ZT1mYWxzZV0gLSBJZiB0aGUgZmlsZSBhbHJlYWR5IGV4aXN0cyBhdCB0aGUgdGFyZ2V0IHBhdGgsIHRoZSBmaWxlIHdpbGwgYmUgb3ZlcndyaXRlbiBpZiB0aGlzIGlzIHRydWUuXG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2tlZXBPcmlnaW5hbFBlcm1pc3Npb249ZmFsc2VdIC0gVGhlIGZpbGUgd2lsbCBiZSBzZXQgYXMgdGhlIHBlcm1pc3Npb24gZnJvbSB0aGUgZW50cnkgaWYgdGhpcyBpcyB0cnVlLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW291dEZpbGVOYW1lXSAtIFN0cmluZyBJZiBzZXQgd2lsbCBvdmVycmlkZSB0aGUgZmlsZW5hbWUgb2YgdGhlIGV4dHJhY3RlZCBmaWxlIChPbmx5IHdvcmtzIGlmIHRoZSBlbnRyeSBpcyBhIGZpbGUpXG4gICAgICAgICAqXG4gICAgICAgICAqIEByZXR1cm4gQm9vbGVhblxuICAgICAgICAgKi9cbiAgICAgICAgZXh0cmFjdEVudHJ5VG86IGZ1bmN0aW9uIChlbnRyeSwgdGFyZ2V0UGF0aCwgbWFpbnRhaW5FbnRyeVBhdGgsIG92ZXJ3cml0ZSwga2VlcE9yaWdpbmFsUGVybWlzc2lvbiwgb3V0RmlsZU5hbWUpIHtcbiAgICAgICAgICAgIG92ZXJ3cml0ZSA9IGdldF9Cb29sKGZhbHNlLCBvdmVyd3JpdGUpO1xuICAgICAgICAgICAga2VlcE9yaWdpbmFsUGVybWlzc2lvbiA9IGdldF9Cb29sKGZhbHNlLCBrZWVwT3JpZ2luYWxQZXJtaXNzaW9uKTtcbiAgICAgICAgICAgIG1haW50YWluRW50cnlQYXRoID0gZ2V0X0Jvb2wodHJ1ZSwgbWFpbnRhaW5FbnRyeVBhdGgpO1xuICAgICAgICAgICAgb3V0RmlsZU5hbWUgPSBnZXRfU3RyKGtlZXBPcmlnaW5hbFBlcm1pc3Npb24sIG91dEZpbGVOYW1lKTtcblxuICAgICAgICAgICAgdmFyIGl0ZW0gPSBnZXRFbnRyeShlbnRyeSk7XG4gICAgICAgICAgICBpZiAoIWl0ZW0pIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBVdGlscy5FcnJvcnMuTk9fRU5UUlkoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGVudHJ5TmFtZSA9IGNhbm9uaWNhbChpdGVtLmVudHJ5TmFtZSk7XG5cbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBzYW5pdGl6ZSh0YXJnZXRQYXRoLCBvdXRGaWxlTmFtZSAmJiAhaXRlbS5pc0RpcmVjdG9yeSA/IG91dEZpbGVOYW1lIDogbWFpbnRhaW5FbnRyeVBhdGggPyBlbnRyeU5hbWUgOiBwdGguYmFzZW5hbWUoZW50cnlOYW1lKSk7XG5cbiAgICAgICAgICAgIGlmIChpdGVtLmlzRGlyZWN0b3J5KSB7XG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkcmVuID0gX3ppcC5nZXRFbnRyeUNoaWxkcmVuKGl0ZW0pO1xuICAgICAgICAgICAgICAgIGNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZC5pc0RpcmVjdG9yeSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29udGVudCA9IGNoaWxkLmdldERhdGEoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBVdGlscy5FcnJvcnMuQ0FOVF9FWFRSQUNUX0ZJTEUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IGNhbm9uaWNhbChjaGlsZC5lbnRyeU5hbWUpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGROYW1lID0gc2FuaXRpemUodGFyZ2V0UGF0aCwgbWFpbnRhaW5FbnRyeVBhdGggPyBuYW1lIDogcHRoLmJhc2VuYW1lKG5hbWUpKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIHJldmVyc2Ugb3BlcmF0aW9uIGZvciBhdHRyIGRlcGVuZCBvbiBtZXRob2QgYWRkRmlsZSgpXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVBdHRyID0ga2VlcE9yaWdpbmFsUGVybWlzc2lvbiA/IGNoaWxkLmhlYWRlci5maWxlQXR0ciA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgZmlsZXRvb2xzLndyaXRlRmlsZVRvKGNoaWxkTmFtZSwgY29udGVudCwgb3ZlcndyaXRlLCBmaWxlQXR0cik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBjb250ZW50ID0gaXRlbS5nZXREYXRhKF96aXAucGFzc3dvcmQpO1xuICAgICAgICAgICAgaWYgKCFjb250ZW50KSB0aHJvdyBVdGlscy5FcnJvcnMuQ0FOVF9FWFRSQUNUX0ZJTEUoKTtcblxuICAgICAgICAgICAgaWYgKGZpbGV0b29scy5mcy5leGlzdHNTeW5jKHRhcmdldCkgJiYgIW92ZXJ3cml0ZSkge1xuICAgICAgICAgICAgICAgIHRocm93IFV0aWxzLkVycm9ycy5DQU5UX09WRVJSSURFKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBUaGUgcmV2ZXJzZSBvcGVyYXRpb24gZm9yIGF0dHIgZGVwZW5kIG9uIG1ldGhvZCBhZGRGaWxlKClcbiAgICAgICAgICAgIGNvbnN0IGZpbGVBdHRyID0ga2VlcE9yaWdpbmFsUGVybWlzc2lvbiA/IGVudHJ5LmhlYWRlci5maWxlQXR0ciA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGZpbGV0b29scy53cml0ZUZpbGVUbyh0YXJnZXQsIGNvbnRlbnQsIG92ZXJ3cml0ZSwgZmlsZUF0dHIpO1xuXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGVzdCB0aGUgYXJjaGl2ZVxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3Bhc3NdXG4gICAgICAgICAqL1xuICAgICAgICB0ZXN0OiBmdW5jdGlvbiAocGFzcykge1xuICAgICAgICAgICAgaWYgKCFfemlwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKHZhciBlbnRyeSBpbiBfemlwLmVudHJpZXMpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZW50cnkuaXNEaXJlY3RvcnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb250ZW50ID0gX3ppcC5lbnRyaWVzW2VudHJ5XS5nZXREYXRhKHBhc3MpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEV4dHJhY3RzIHRoZSBlbnRpcmUgYXJjaGl2ZSB0byB0aGUgZ2l2ZW4gbG9jYXRpb25cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHRhcmdldFBhdGggVGFyZ2V0IGxvY2F0aW9uXG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW292ZXJ3cml0ZT1mYWxzZV0gSWYgdGhlIGZpbGUgYWxyZWFkeSBleGlzdHMgYXQgdGhlIHRhcmdldCBwYXRoLCB0aGUgZmlsZSB3aWxsIGJlIG92ZXJ3cml0ZW4gaWYgdGhpcyBpcyB0cnVlLlxuICAgICAgICAgKiAgICAgICAgICAgICAgICAgIERlZmF1bHQgaXMgRkFMU0VcbiAgICAgICAgICogQHBhcmFtIHtib29sZWFufSBba2VlcE9yaWdpbmFsUGVybWlzc2lvbj1mYWxzZV0gVGhlIGZpbGUgd2lsbCBiZSBzZXQgYXMgdGhlIHBlcm1pc3Npb24gZnJvbSB0aGUgZW50cnkgaWYgdGhpcyBpcyB0cnVlLlxuICAgICAgICAgKiAgICAgICAgICAgICAgICAgIERlZmF1bHQgaXMgRkFMU0VcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd8QnVmZmVyfSBbcGFzc10gcGFzc3dvcmRcbiAgICAgICAgICovXG4gICAgICAgIGV4dHJhY3RBbGxUbzogZnVuY3Rpb24gKHRhcmdldFBhdGgsIG92ZXJ3cml0ZSwga2VlcE9yaWdpbmFsUGVybWlzc2lvbiwgcGFzcykge1xuICAgICAgICAgICAga2VlcE9yaWdpbmFsUGVybWlzc2lvbiA9IGdldF9Cb29sKGZhbHNlLCBrZWVwT3JpZ2luYWxQZXJtaXNzaW9uKTtcbiAgICAgICAgICAgIHBhc3MgPSBnZXRfU3RyKGtlZXBPcmlnaW5hbFBlcm1pc3Npb24sIHBhc3MpO1xuICAgICAgICAgICAgb3ZlcndyaXRlID0gZ2V0X0Jvb2woZmFsc2UsIG92ZXJ3cml0ZSk7XG4gICAgICAgICAgICBpZiAoIV96aXApIHRocm93IFV0aWxzLkVycm9ycy5OT19aSVAoKTtcblxuICAgICAgICAgICAgX3ppcC5lbnRyaWVzLmZvckVhY2goZnVuY3Rpb24gKGVudHJ5KSB7XG4gICAgICAgICAgICAgICAgdmFyIGVudHJ5TmFtZSA9IHNhbml0aXplKHRhcmdldFBhdGgsIGNhbm9uaWNhbChlbnRyeS5lbnRyeU5hbWUpKTtcbiAgICAgICAgICAgICAgICBpZiAoZW50cnkuaXNEaXJlY3RvcnkpIHtcbiAgICAgICAgICAgICAgICAgICAgZmlsZXRvb2xzLm1ha2VEaXIoZW50cnlOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgY29udGVudCA9IGVudHJ5LmdldERhdGEocGFzcyk7XG4gICAgICAgICAgICAgICAgaWYgKCFjb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IFV0aWxzLkVycm9ycy5DQU5UX0VYVFJBQ1RfRklMRSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBUaGUgcmV2ZXJzZSBvcGVyYXRpb24gZm9yIGF0dHIgZGVwZW5kIG9uIG1ldGhvZCBhZGRGaWxlKClcbiAgICAgICAgICAgICAgICBjb25zdCBmaWxlQXR0ciA9IGtlZXBPcmlnaW5hbFBlcm1pc3Npb24gPyBlbnRyeS5oZWFkZXIuZmlsZUF0dHIgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgZmlsZXRvb2xzLndyaXRlRmlsZVRvKGVudHJ5TmFtZSwgY29udGVudCwgb3ZlcndyaXRlLCBmaWxlQXR0cik7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgZmlsZXRvb2xzLmZzLnV0aW1lc1N5bmMoZW50cnlOYW1lLCBlbnRyeS5oZWFkZXIudGltZSwgZW50cnkuaGVhZGVyLnRpbWUpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBVdGlscy5FcnJvcnMuQ0FOVF9FWFRSQUNUX0ZJTEUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQXN5bmNocm9ub3VzIGV4dHJhY3RBbGxUb1xuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGFyZ2V0UGF0aCBUYXJnZXQgbG9jYXRpb25cbiAgICAgICAgICogQHBhcmFtIHtib29sZWFufSBbb3ZlcndyaXRlPWZhbHNlXSBJZiB0aGUgZmlsZSBhbHJlYWR5IGV4aXN0cyBhdCB0aGUgdGFyZ2V0IHBhdGgsIHRoZSBmaWxlIHdpbGwgYmUgb3ZlcndyaXRlbiBpZiB0aGlzIGlzIHRydWUuXG4gICAgICAgICAqICAgICAgICAgICAgICAgICAgRGVmYXVsdCBpcyBGQUxTRVxuICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtrZWVwT3JpZ2luYWxQZXJtaXNzaW9uPWZhbHNlXSBUaGUgZmlsZSB3aWxsIGJlIHNldCBhcyB0aGUgcGVybWlzc2lvbiBmcm9tIHRoZSBlbnRyeSBpZiB0aGlzIGlzIHRydWUuXG4gICAgICAgICAqICAgICAgICAgICAgICAgICAgRGVmYXVsdCBpcyBGQUxTRVxuICAgICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayBUaGUgY2FsbGJhY2sgd2lsbCBiZSBleGVjdXRlZCB3aGVuIGFsbCBlbnRyaWVzIGFyZSBleHRyYWN0ZWQgc3VjY2Vzc2Z1bGx5IG9yIGFueSBlcnJvciBpcyB0aHJvd24uXG4gICAgICAgICAqL1xuICAgICAgICBleHRyYWN0QWxsVG9Bc3luYzogZnVuY3Rpb24gKHRhcmdldFBhdGgsIG92ZXJ3cml0ZSwga2VlcE9yaWdpbmFsUGVybWlzc2lvbiwgY2FsbGJhY2spIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gZ2V0X0Z1bihvdmVyd3JpdGUsIGtlZXBPcmlnaW5hbFBlcm1pc3Npb24sIGNhbGxiYWNrKTtcbiAgICAgICAgICAgIGtlZXBPcmlnaW5hbFBlcm1pc3Npb24gPSBnZXRfQm9vbChmYWxzZSwga2VlcE9yaWdpbmFsUGVybWlzc2lvbik7XG4gICAgICAgICAgICBvdmVyd3JpdGUgPSBnZXRfQm9vbChmYWxzZSwgb3ZlcndyaXRlKTtcbiAgICAgICAgICAgIGlmICghY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4dHJhY3RBbGxUb0FzeW5jKHRhcmdldFBhdGgsIG92ZXJ3cml0ZSwga2VlcE9yaWdpbmFsUGVybWlzc2lvbiwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghX3ppcCkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKFV0aWxzLkVycm9ycy5OT19aSVAoKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0YXJnZXRQYXRoID0gcHRoLnJlc29sdmUodGFyZ2V0UGF0aCk7XG4gICAgICAgICAgICAvLyBjb252ZXJ0IGVudHJ5TmFtZSB0b1xuICAgICAgICAgICAgY29uc3QgZ2V0UGF0aCA9IChlbnRyeSkgPT4gc2FuaXRpemUodGFyZ2V0UGF0aCwgcHRoLm5vcm1hbGl6ZShjYW5vbmljYWwoZW50cnkuZW50cnlOYW1lKSkpO1xuICAgICAgICAgICAgY29uc3QgZ2V0RXJyb3IgPSAobXNnLCBmaWxlKSA9PiBuZXcgRXJyb3IobXNnICsgJzogXCInICsgZmlsZSArICdcIicpO1xuXG4gICAgICAgICAgICAvLyBzZXBhcmF0ZSBkaXJlY3RvcmllcyBmcm9tIGZpbGVzXG4gICAgICAgICAgICBjb25zdCBkaXJFbnRyaWVzID0gW107XG4gICAgICAgICAgICBjb25zdCBmaWxlRW50cmllcyA9IFtdO1xuICAgICAgICAgICAgX3ppcC5lbnRyaWVzLmZvckVhY2goKGUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZS5pc0RpcmVjdG9yeSkge1xuICAgICAgICAgICAgICAgICAgICBkaXJFbnRyaWVzLnB1c2goZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZmlsZUVudHJpZXMucHVzaChlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gQ3JlYXRlIGRpcmVjdG9yeSBlbnRyaWVzIGZpcnN0IHN5bmNocm9ub3VzbHlcbiAgICAgICAgICAgIC8vIHRoaXMgcHJldmVudHMgcmFjZSBjb25kaXRpb24gYW5kIGFzc3VyZXMgZm9sZGVycyBhcmUgdGhlcmUgYmVmb3JlIHdyaXRpbmcgZmlsZXNcbiAgICAgICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgZGlyRW50cmllcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRpclBhdGggPSBnZXRQYXRoKGVudHJ5KTtcbiAgICAgICAgICAgICAgICAvLyBUaGUgcmV2ZXJzZSBvcGVyYXRpb24gZm9yIGF0dHIgZGVwZW5kIG9uIG1ldGhvZCBhZGRGaWxlKClcbiAgICAgICAgICAgICAgICBjb25zdCBkaXJBdHRyID0ga2VlcE9yaWdpbmFsUGVybWlzc2lvbiA/IGVudHJ5LmhlYWRlci5maWxlQXR0ciA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBmaWxldG9vbHMubWFrZURpcihkaXJQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRpckF0dHIpIGZpbGV0b29scy5mcy5jaG1vZFN5bmMoZGlyUGF0aCwgZGlyQXR0cik7XG4gICAgICAgICAgICAgICAgICAgIC8vIGluIHVuaXggdGltZXN0YW1wIHdpbGwgY2hhbmdlIGlmIGZpbGVzIGFyZSBsYXRlciBhZGRlZCB0byBmb2xkZXIsIGJ1dCBzdGlsbFxuICAgICAgICAgICAgICAgICAgICBmaWxldG9vbHMuZnMudXRpbWVzU3luYyhkaXJQYXRoLCBlbnRyeS5oZWFkZXIudGltZSwgZW50cnkuaGVhZGVyLnRpbWUpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGdldEVycm9yKFwiVW5hYmxlIHRvIGNyZWF0ZSBmb2xkZXJcIiwgZGlyUGF0aCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZmlsZUVudHJpZXMucmV2ZXJzZSgpLnJlZHVjZShmdW5jdGlvbiAobmV4dCwgZW50cnkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0KGVycik7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbnRyeU5hbWUgPSBwdGgubm9ybWFsaXplKGNhbm9uaWNhbChlbnRyeS5lbnRyeU5hbWUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVQYXRoID0gc2FuaXRpemUodGFyZ2V0UGF0aCwgZW50cnlOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudHJ5LmdldERhdGFBc3luYyhmdW5jdGlvbiAoY29udGVudCwgZXJyXzEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyXzEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dChlcnJfMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICghY29udGVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0KFV0aWxzLkVycm9ycy5DQU5UX0VYVFJBQ1RfRklMRSgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgcmV2ZXJzZSBvcGVyYXRpb24gZm9yIGF0dHIgZGVwZW5kIG9uIG1ldGhvZCBhZGRGaWxlKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZUF0dHIgPSBrZWVwT3JpZ2luYWxQZXJtaXNzaW9uID8gZW50cnkuaGVhZGVyLmZpbGVBdHRyIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxldG9vbHMud3JpdGVGaWxlVG9Bc3luYyhmaWxlUGF0aCwgY29udGVudCwgb3ZlcndyaXRlLCBmaWxlQXR0ciwgZnVuY3Rpb24gKHN1Y2MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc3VjYykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHQoZ2V0RXJyb3IoXCJVbmFibGUgdG8gd3JpdGUgZmlsZVwiLCBmaWxlUGF0aCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZXRvb2xzLmZzLnV0aW1lcyhmaWxlUGF0aCwgZW50cnkuaGVhZGVyLnRpbWUsIGVudHJ5LmhlYWRlci50aW1lLCBmdW5jdGlvbiAoZXJyXzIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyXzIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dChnZXRFcnJvcihcIlVuYWJsZSB0byBzZXQgdGltZXNcIiwgZmlsZVBhdGgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0sIGNhbGxiYWNrKSgpO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXcml0ZXMgdGhlIG5ld2x5IGNyZWF0ZWQgemlwIGZpbGUgdG8gZGlzayBhdCB0aGUgc3BlY2lmaWVkIGxvY2F0aW9uIG9yIGlmIGEgemlwIHdhcyBvcGVuZWQgYW5kIG5vIGBgdGFyZ2V0RmlsZU5hbWVgYCBpcyBwcm92aWRlZCwgaXQgd2lsbCBvdmVyd3JpdGUgdGhlIG9wZW5lZCB6aXBcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHRhcmdldEZpbGVOYW1lXG4gICAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrXG4gICAgICAgICAqL1xuICAgICAgICB3cml0ZVppcDogZnVuY3Rpb24gKHRhcmdldEZpbGVOYW1lLCBjYWxsYmFjaykge1xuICAgICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRhcmdldEZpbGVOYW1lID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sgPSB0YXJnZXRGaWxlTmFtZTtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RmlsZU5hbWUgPSBcIlwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCF0YXJnZXRGaWxlTmFtZSAmJiBvcHRzLmZpbGVuYW1lKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0RmlsZU5hbWUgPSBvcHRzLmZpbGVuYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0YXJnZXRGaWxlTmFtZSkgcmV0dXJuO1xuXG4gICAgICAgICAgICB2YXIgemlwRGF0YSA9IF96aXAuY29tcHJlc3NUb0J1ZmZlcigpO1xuICAgICAgICAgICAgaWYgKHppcERhdGEpIHtcbiAgICAgICAgICAgICAgICB2YXIgb2sgPSBmaWxldG9vbHMud3JpdGVGaWxlVG8odGFyZ2V0RmlsZU5hbWUsIHppcERhdGEsIHRydWUpO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09IFwiZnVuY3Rpb25cIikgY2FsbGJhY2soIW9rID8gbmV3IEVycm9yKFwiZmFpbGVkXCIpIDogbnVsbCwgXCJcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0YXJnZXRGaWxlTmFtZVxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gW3Byb3BzXVxuICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtwcm9wcy5vdmVyd3JpdGU9dHJ1ZV0gSWYgdGhlIGZpbGUgYWxyZWFkeSBleGlzdHMgYXQgdGhlIHRhcmdldCBwYXRoLCB0aGUgZmlsZSB3aWxsIGJlIG92ZXJ3cml0ZW4gaWYgdGhpcyBpcyB0cnVlLlxuICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtwcm9wcy5wZXJtXSBUaGUgZmlsZSB3aWxsIGJlIHNldCBhcyB0aGUgcGVybWlzc2lvbiBmcm9tIHRoZSBlbnRyeSBpZiB0aGlzIGlzIHRydWUuXG5cbiAgICAgICAgICogQHJldHVybnMge1Byb21pc2U8dm9pZD59XG4gICAgICAgICAqL1xuICAgICAgICB3cml0ZVppcFByb21pc2U6IGZ1bmN0aW9uICgvKipTdHJpbmcqLyB0YXJnZXRGaWxlTmFtZSwgLyogb2JqZWN0ICovIHByb3BzKSB7XG4gICAgICAgICAgICBjb25zdCB7IG92ZXJ3cml0ZSwgcGVybSB9ID0gT2JqZWN0LmFzc2lnbih7IG92ZXJ3cml0ZTogdHJ1ZSB9LCBwcm9wcyk7XG5cbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gZmluZCBmaWxlIG5hbWVcbiAgICAgICAgICAgICAgICBpZiAoIXRhcmdldEZpbGVOYW1lICYmIG9wdHMuZmlsZW5hbWUpIHRhcmdldEZpbGVOYW1lID0gb3B0cy5maWxlbmFtZTtcbiAgICAgICAgICAgICAgICBpZiAoIXRhcmdldEZpbGVOYW1lKSByZWplY3QoXCJBRE0tWklQOiBaSVAgRmlsZSBOYW1lIE1pc3NpbmdcIik7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnRvQnVmZmVyUHJvbWlzZSgpLnRoZW4oKHppcERhdGEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmV0ID0gKGRvbmUpID0+IChkb25lID8gcmVzb2x2ZShkb25lKSA6IHJlamVjdChcIkFETS1aSVA6IFdhc24ndCBhYmxlIHRvIHdyaXRlIHppcCBmaWxlXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgZmlsZXRvb2xzLndyaXRlRmlsZVRvQXN5bmModGFyZ2V0RmlsZU5hbWUsIHppcERhdGEsIG92ZXJ3cml0ZSwgcGVybSwgcmV0KTtcbiAgICAgICAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEByZXR1cm5zIHtQcm9taXNlPEJ1ZmZlcj59IEEgcHJvbWlzZSB0byB0aGUgQnVmZmVyLlxuICAgICAgICAgKi9cbiAgICAgICAgdG9CdWZmZXJQcm9taXNlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgIF96aXAudG9Bc3luY0J1ZmZlcihyZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgdGhlIGNvbnRlbnQgb2YgdGhlIGVudGlyZSB6aXAgZmlsZSBhcyBhIEJ1ZmZlciBvYmplY3RcbiAgICAgICAgICpcbiAgICAgICAgICogQHByb3Age2Z1bmN0aW9ufSBbb25TdWNjZXNzXVxuICAgICAgICAgKiBAcHJvcCB7ZnVuY3Rpb259IFtvbkZhaWxdXG4gICAgICAgICAqIEBwcm9wIHtmdW5jdGlvbn0gW29uSXRlbVN0YXJ0XVxuICAgICAgICAgKiBAcHJvcCB7ZnVuY3Rpb259IFtvbkl0ZW1FbmRdXG4gICAgICAgICAqIEByZXR1cm5zIHtCdWZmZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0b0J1ZmZlcjogZnVuY3Rpb24gKG9uU3VjY2Vzcywgb25GYWlsLCBvbkl0ZW1TdGFydCwgb25JdGVtRW5kKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG9uU3VjY2VzcyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgX3ppcC50b0FzeW5jQnVmZmVyKG9uU3VjY2Vzcywgb25GYWlsLCBvbkl0ZW1TdGFydCwgb25JdGVtRW5kKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBfemlwLmNvbXByZXNzVG9CdWZmZXIoKTtcbiAgICAgICAgfVxuICAgIH07XG59O1xuIiwgIlwidXNlIHN0cmljdFwiO1xyXG5tb2R1bGUuZXhwb3J0cyA9IGFzUHJvbWlzZTtcclxuXHJcbi8qKlxyXG4gKiBDYWxsYmFjayBhcyB1c2VkIGJ5IHtAbGluayB1dGlsLmFzUHJvbWlzZX0uXHJcbiAqIEB0eXBlZGVmIGFzUHJvbWlzZUNhbGxiYWNrXHJcbiAqIEB0eXBlIHtmdW5jdGlvbn1cclxuICogQHBhcmFtIHtFcnJvcnxudWxsfSBlcnJvciBFcnJvciwgaWYgYW55XHJcbiAqIEBwYXJhbSB7Li4uKn0gcGFyYW1zIEFkZGl0aW9uYWwgYXJndW1lbnRzXHJcbiAqIEByZXR1cm5zIHt1bmRlZmluZWR9XHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIFJldHVybnMgYSBwcm9taXNlIGZyb20gYSBub2RlLXN0eWxlIGNhbGxiYWNrIGZ1bmN0aW9uLlxyXG4gKiBAbWVtYmVyb2YgdXRpbFxyXG4gKiBAcGFyYW0ge2FzUHJvbWlzZUNhbGxiYWNrfSBmbiBGdW5jdGlvbiB0byBjYWxsXHJcbiAqIEBwYXJhbSB7Kn0gY3R4IEZ1bmN0aW9uIGNvbnRleHRcclxuICogQHBhcmFtIHsuLi4qfSBwYXJhbXMgRnVuY3Rpb24gYXJndW1lbnRzXHJcbiAqIEByZXR1cm5zIHtQcm9taXNlPCo+fSBQcm9taXNpZmllZCBmdW5jdGlvblxyXG4gKi9cclxuZnVuY3Rpb24gYXNQcm9taXNlKGZuLCBjdHgvKiwgdmFyYXJncyAqLykge1xyXG4gICAgdmFyIHBhcmFtcyAgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpLFxyXG4gICAgICAgIG9mZnNldCAgPSAwLFxyXG4gICAgICAgIGluZGV4ICAgPSAyLFxyXG4gICAgICAgIHBlbmRpbmcgPSB0cnVlO1xyXG4gICAgd2hpbGUgKGluZGV4IDwgYXJndW1lbnRzLmxlbmd0aClcclxuICAgICAgICBwYXJhbXNbb2Zmc2V0KytdID0gYXJndW1lbnRzW2luZGV4KytdO1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIGV4ZWN1dG9yKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIHBhcmFtc1tvZmZzZXRdID0gZnVuY3Rpb24gY2FsbGJhY2soZXJyLyosIHZhcmFyZ3MgKi8pIHtcclxuICAgICAgICAgICAgaWYgKHBlbmRpbmcpIHtcclxuICAgICAgICAgICAgICAgIHBlbmRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGlmIChlcnIpXHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycik7XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcGFyYW1zID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAob2Zmc2V0IDwgcGFyYW1zLmxlbmd0aClcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zW29mZnNldCsrXSA9IGFyZ3VtZW50c1tvZmZzZXRdO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUuYXBwbHkobnVsbCwgcGFyYW1zKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgZm4uYXBwbHkoY3R4IHx8IG51bGwsIHBhcmFtcyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgIGlmIChwZW5kaW5nKSB7XHJcbiAgICAgICAgICAgICAgICBwZW5kaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcbiIsICJcInVzZSBzdHJpY3RcIjtcclxuXHJcbi8qKlxyXG4gKiBBIG1pbmltYWwgYmFzZTY0IGltcGxlbWVudGF0aW9uIGZvciBudW1iZXIgYXJyYXlzLlxyXG4gKiBAbWVtYmVyb2YgdXRpbFxyXG4gKiBAbmFtZXNwYWNlXHJcbiAqL1xyXG52YXIgYmFzZTY0ID0gZXhwb3J0cztcclxuXHJcbi8qKlxyXG4gKiBDYWxjdWxhdGVzIHRoZSBieXRlIGxlbmd0aCBvZiBhIGJhc2U2NCBlbmNvZGVkIHN0cmluZy5cclxuICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZyBCYXNlNjQgZW5jb2RlZCBzdHJpbmdcclxuICogQHJldHVybnMge251bWJlcn0gQnl0ZSBsZW5ndGhcclxuICovXHJcbmJhc2U2NC5sZW5ndGggPSBmdW5jdGlvbiBsZW5ndGgoc3RyaW5nKSB7XHJcbiAgICB2YXIgcCA9IHN0cmluZy5sZW5ndGg7XHJcbiAgICBpZiAoIXApXHJcbiAgICAgICAgcmV0dXJuIDA7XHJcbiAgICB2YXIgbiA9IDA7XHJcbiAgICB3aGlsZSAoLS1wICUgNCA+IDEgJiYgc3RyaW5nLmNoYXJBdChwKSA9PT0gXCI9XCIpXHJcbiAgICAgICAgKytuO1xyXG4gICAgcmV0dXJuIE1hdGguY2VpbChzdHJpbmcubGVuZ3RoICogMykgLyA0IC0gbjtcclxufTtcclxuXHJcbi8vIEJhc2U2NCBlbmNvZGluZyB0YWJsZVxyXG52YXIgYjY0ID0gbmV3IEFycmF5KDY0KTtcclxuXHJcbi8vIEJhc2U2NCBkZWNvZGluZyB0YWJsZVxyXG52YXIgczY0ID0gbmV3IEFycmF5KDEyMyk7XHJcblxyXG4vLyA2NS4uOTAsIDk3Li4xMjIsIDQ4Li41NywgNDMsIDQ3XHJcbmZvciAodmFyIGkgPSAwOyBpIDwgNjQ7KVxyXG4gICAgczY0W2I2NFtpXSA9IGkgPCAyNiA/IGkgKyA2NSA6IGkgPCA1MiA/IGkgKyA3MSA6IGkgPCA2MiA/IGkgLSA0IDogaSAtIDU5IHwgNDNdID0gaSsrO1xyXG5cclxuLyoqXHJcbiAqIEVuY29kZXMgYSBidWZmZXIgdG8gYSBiYXNlNjQgZW5jb2RlZCBzdHJpbmcuXHJcbiAqIEBwYXJhbSB7VWludDhBcnJheX0gYnVmZmVyIFNvdXJjZSBidWZmZXJcclxuICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0IFNvdXJjZSBzdGFydFxyXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIFNvdXJjZSBlbmRcclxuICogQHJldHVybnMge3N0cmluZ30gQmFzZTY0IGVuY29kZWQgc3RyaW5nXHJcbiAqL1xyXG5iYXNlNjQuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKGJ1ZmZlciwgc3RhcnQsIGVuZCkge1xyXG4gICAgdmFyIHBhcnRzID0gbnVsbCxcclxuICAgICAgICBjaHVuayA9IFtdO1xyXG4gICAgdmFyIGkgPSAwLCAvLyBvdXRwdXQgaW5kZXhcclxuICAgICAgICBqID0gMCwgLy8gZ290byBpbmRleFxyXG4gICAgICAgIHQ7ICAgICAvLyB0ZW1wb3JhcnlcclxuICAgIHdoaWxlIChzdGFydCA8IGVuZCkge1xyXG4gICAgICAgIHZhciBiID0gYnVmZmVyW3N0YXJ0KytdO1xyXG4gICAgICAgIHN3aXRjaCAoaikge1xyXG4gICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICBjaHVua1tpKytdID0gYjY0W2IgPj4gMl07XHJcbiAgICAgICAgICAgICAgICB0ID0gKGIgJiAzKSA8PCA0O1xyXG4gICAgICAgICAgICAgICAgaiA9IDE7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgY2h1bmtbaSsrXSA9IGI2NFt0IHwgYiA+PiA0XTtcclxuICAgICAgICAgICAgICAgIHQgPSAoYiAmIDE1KSA8PCAyO1xyXG4gICAgICAgICAgICAgICAgaiA9IDI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgY2h1bmtbaSsrXSA9IGI2NFt0IHwgYiA+PiA2XTtcclxuICAgICAgICAgICAgICAgIGNodW5rW2krK10gPSBiNjRbYiAmIDYzXTtcclxuICAgICAgICAgICAgICAgIGogPSAwO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpID4gODE5MSkge1xyXG4gICAgICAgICAgICAocGFydHMgfHwgKHBhcnRzID0gW10pKS5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLCBjaHVuaykpO1xyXG4gICAgICAgICAgICBpID0gMDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoaikge1xyXG4gICAgICAgIGNodW5rW2krK10gPSBiNjRbdF07XHJcbiAgICAgICAgY2h1bmtbaSsrXSA9IDYxO1xyXG4gICAgICAgIGlmIChqID09PSAxKVxyXG4gICAgICAgICAgICBjaHVua1tpKytdID0gNjE7XHJcbiAgICB9XHJcbiAgICBpZiAocGFydHMpIHtcclxuICAgICAgICBpZiAoaSlcclxuICAgICAgICAgICAgcGFydHMucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZywgY2h1bmsuc2xpY2UoMCwgaSkpKTtcclxuICAgICAgICByZXR1cm4gcGFydHMuam9pbihcIlwiKTtcclxuICAgIH1cclxuICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZywgY2h1bmsuc2xpY2UoMCwgaSkpO1xyXG59O1xyXG5cclxudmFyIGludmFsaWRFbmNvZGluZyA9IFwiaW52YWxpZCBlbmNvZGluZ1wiO1xyXG5cclxuLyoqXHJcbiAqIERlY29kZXMgYSBiYXNlNjQgZW5jb2RlZCBzdHJpbmcgdG8gYSBidWZmZXIuXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmcgU291cmNlIHN0cmluZ1xyXG4gKiBAcGFyYW0ge1VpbnQ4QXJyYXl9IGJ1ZmZlciBEZXN0aW5hdGlvbiBidWZmZXJcclxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBEZXN0aW5hdGlvbiBvZmZzZXRcclxuICogQHJldHVybnMge251bWJlcn0gTnVtYmVyIG9mIGJ5dGVzIHdyaXR0ZW5cclxuICogQHRocm93cyB7RXJyb3J9IElmIGVuY29kaW5nIGlzIGludmFsaWRcclxuICovXHJcbmJhc2U2NC5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUoc3RyaW5nLCBidWZmZXIsIG9mZnNldCkge1xyXG4gICAgdmFyIHN0YXJ0ID0gb2Zmc2V0O1xyXG4gICAgdmFyIGogPSAwLCAvLyBnb3RvIGluZGV4XHJcbiAgICAgICAgdDsgICAgIC8vIHRlbXBvcmFyeVxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHJpbmcubGVuZ3RoOykge1xyXG4gICAgICAgIHZhciBjID0gc3RyaW5nLmNoYXJDb2RlQXQoaSsrKTtcclxuICAgICAgICBpZiAoYyA9PT0gNjEgJiYgaiA+IDEpXHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGlmICgoYyA9IHM2NFtjXSkgPT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoaW52YWxpZEVuY29kaW5nKTtcclxuICAgICAgICBzd2l0Y2ggKGopIHtcclxuICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgdCA9IGM7XHJcbiAgICAgICAgICAgICAgICBqID0gMTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICBidWZmZXJbb2Zmc2V0KytdID0gdCA8PCAyIHwgKGMgJiA0OCkgPj4gNDtcclxuICAgICAgICAgICAgICAgIHQgPSBjO1xyXG4gICAgICAgICAgICAgICAgaiA9IDI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgYnVmZmVyW29mZnNldCsrXSA9ICh0ICYgMTUpIDw8IDQgfCAoYyAmIDYwKSA+PiAyO1xyXG4gICAgICAgICAgICAgICAgdCA9IGM7XHJcbiAgICAgICAgICAgICAgICBqID0gMztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICBidWZmZXJbb2Zmc2V0KytdID0gKHQgJiAzKSA8PCA2IHwgYztcclxuICAgICAgICAgICAgICAgIGogPSAwO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGogPT09IDEpXHJcbiAgICAgICAgdGhyb3cgRXJyb3IoaW52YWxpZEVuY29kaW5nKTtcclxuICAgIHJldHVybiBvZmZzZXQgLSBzdGFydDtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBUZXN0cyBpZiB0aGUgc3BlY2lmaWVkIHN0cmluZyBhcHBlYXJzIHRvIGJlIGJhc2U2NCBlbmNvZGVkLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nIFN0cmluZyB0byB0ZXN0XHJcbiAqIEByZXR1cm5zIHtib29sZWFufSBgdHJ1ZWAgaWYgcHJvYmFibHkgYmFzZTY0IGVuY29kZWQsIG90aGVyd2lzZSBmYWxzZVxyXG4gKi9cclxuYmFzZTY0LnRlc3QgPSBmdW5jdGlvbiB0ZXN0KHN0cmluZykge1xyXG4gICAgcmV0dXJuIC9eKD86W0EtWmEtejAtOSsvXXs0fSkqKD86W0EtWmEtejAtOSsvXXsyfT09fFtBLVphLXowLTkrL117M309KT8kLy50ZXN0KHN0cmluZyk7XHJcbn07XHJcbiIsICJcInVzZSBzdHJpY3RcIjtcclxubW9kdWxlLmV4cG9ydHMgPSBFdmVudEVtaXR0ZXI7XHJcblxyXG4vKipcclxuICogQ29uc3RydWN0cyBhIG5ldyBldmVudCBlbWl0dGVyIGluc3RhbmNlLlxyXG4gKiBAY2xhc3NkZXNjIEEgbWluaW1hbCBldmVudCBlbWl0dGVyLlxyXG4gKiBAbWVtYmVyb2YgdXRpbFxyXG4gKiBAY29uc3RydWN0b3JcclxuICovXHJcbmZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlZ2lzdGVyZWQgbGlzdGVuZXJzLlxyXG4gICAgICogQHR5cGUge09iamVjdC48c3RyaW5nLCo+fVxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgdGhpcy5fbGlzdGVuZXJzID0ge307XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZWdpc3RlcnMgYW4gZXZlbnQgbGlzdGVuZXIuXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBldnQgRXZlbnQgbmFtZVxyXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBmbiBMaXN0ZW5lclxyXG4gKiBAcGFyYW0geyp9IFtjdHhdIExpc3RlbmVyIGNvbnRleHRcclxuICogQHJldHVybnMge3V0aWwuRXZlbnRFbWl0dGVyfSBgdGhpc2BcclxuICovXHJcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub24gPSBmdW5jdGlvbiBvbihldnQsIGZuLCBjdHgpIHtcclxuICAgICh0aGlzLl9saXN0ZW5lcnNbZXZ0XSB8fCAodGhpcy5fbGlzdGVuZXJzW2V2dF0gPSBbXSkpLnB1c2goe1xyXG4gICAgICAgIGZuICA6IGZuLFxyXG4gICAgICAgIGN0eCA6IGN0eCB8fCB0aGlzXHJcbiAgICB9KTtcclxuICAgIHJldHVybiB0aGlzO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFJlbW92ZXMgYW4gZXZlbnQgbGlzdGVuZXIgb3IgYW55IG1hdGNoaW5nIGxpc3RlbmVycyBpZiBhcmd1bWVudHMgYXJlIG9taXR0ZWQuXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBbZXZ0XSBFdmVudCBuYW1lLiBSZW1vdmVzIGFsbCBsaXN0ZW5lcnMgaWYgb21pdHRlZC5cclxuICogQHBhcmFtIHtmdW5jdGlvbn0gW2ZuXSBMaXN0ZW5lciB0byByZW1vdmUuIFJlbW92ZXMgYWxsIGxpc3RlbmVycyBvZiBgZXZ0YCBpZiBvbWl0dGVkLlxyXG4gKiBAcmV0dXJucyB7dXRpbC5FdmVudEVtaXR0ZXJ9IGB0aGlzYFxyXG4gKi9cclxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vZmYgPSBmdW5jdGlvbiBvZmYoZXZ0LCBmbikge1xyXG4gICAgaWYgKGV2dCA9PT0gdW5kZWZpbmVkKVxyXG4gICAgICAgIHRoaXMuX2xpc3RlbmVycyA9IHt9O1xyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgaWYgKGZuID09PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgIHRoaXMuX2xpc3RlbmVyc1tldnRdID0gW107XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnNbZXZ0XTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOylcclxuICAgICAgICAgICAgICAgIGlmIChsaXN0ZW5lcnNbaV0uZm4gPT09IGZuKVxyXG4gICAgICAgICAgICAgICAgICAgIGxpc3RlbmVycy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgKytpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEVtaXRzIGFuIGV2ZW50IGJ5IGNhbGxpbmcgaXRzIGxpc3RlbmVycyB3aXRoIHRoZSBzcGVjaWZpZWQgYXJndW1lbnRzLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gZXZ0IEV2ZW50IG5hbWVcclxuICogQHBhcmFtIHsuLi4qfSBhcmdzIEFyZ3VtZW50c1xyXG4gKiBAcmV0dXJucyB7dXRpbC5FdmVudEVtaXR0ZXJ9IGB0aGlzYFxyXG4gKi9cclxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24gZW1pdChldnQpIHtcclxuICAgIHZhciBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnNbZXZ0XTtcclxuICAgIGlmIChsaXN0ZW5lcnMpIHtcclxuICAgICAgICB2YXIgYXJncyA9IFtdLFxyXG4gICAgICAgICAgICBpID0gMTtcclxuICAgICAgICBmb3IgKDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7KVxyXG4gICAgICAgICAgICBhcmdzLnB1c2goYXJndW1lbnRzW2krK10pO1xyXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOylcclxuICAgICAgICAgICAgbGlzdGVuZXJzW2ldLmZuLmFwcGx5KGxpc3RlbmVyc1tpKytdLmN0eCwgYXJncyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcztcclxufTtcclxuIiwgIlwidXNlIHN0cmljdFwiO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KGZhY3RvcnkpO1xyXG5cclxuLyoqXHJcbiAqIFJlYWRzIC8gd3JpdGVzIGZsb2F0cyAvIGRvdWJsZXMgZnJvbSAvIHRvIGJ1ZmZlcnMuXHJcbiAqIEBuYW1lIHV0aWwuZmxvYXRcclxuICogQG5hbWVzcGFjZVxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBXcml0ZXMgYSAzMiBiaXQgZmxvYXQgdG8gYSBidWZmZXIgdXNpbmcgbGl0dGxlIGVuZGlhbiBieXRlIG9yZGVyLlxyXG4gKiBAbmFtZSB1dGlsLmZsb2F0LndyaXRlRmxvYXRMRVxyXG4gKiBAZnVuY3Rpb25cclxuICogQHBhcmFtIHtudW1iZXJ9IHZhbCBWYWx1ZSB0byB3cml0ZVxyXG4gKiBAcGFyYW0ge1VpbnQ4QXJyYXl9IGJ1ZiBUYXJnZXQgYnVmZmVyXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBwb3MgVGFyZ2V0IGJ1ZmZlciBvZmZzZXRcclxuICogQHJldHVybnMge3VuZGVmaW5lZH1cclxuICovXHJcblxyXG4vKipcclxuICogV3JpdGVzIGEgMzIgYml0IGZsb2F0IHRvIGEgYnVmZmVyIHVzaW5nIGJpZyBlbmRpYW4gYnl0ZSBvcmRlci5cclxuICogQG5hbWUgdXRpbC5mbG9hdC53cml0ZUZsb2F0QkVcclxuICogQGZ1bmN0aW9uXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWwgVmFsdWUgdG8gd3JpdGVcclxuICogQHBhcmFtIHtVaW50OEFycmF5fSBidWYgVGFyZ2V0IGJ1ZmZlclxyXG4gKiBAcGFyYW0ge251bWJlcn0gcG9zIFRhcmdldCBidWZmZXIgb2Zmc2V0XHJcbiAqIEByZXR1cm5zIHt1bmRlZmluZWR9XHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIFJlYWRzIGEgMzIgYml0IGZsb2F0IGZyb20gYSBidWZmZXIgdXNpbmcgbGl0dGxlIGVuZGlhbiBieXRlIG9yZGVyLlxyXG4gKiBAbmFtZSB1dGlsLmZsb2F0LnJlYWRGbG9hdExFXHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAcGFyYW0ge1VpbnQ4QXJyYXl9IGJ1ZiBTb3VyY2UgYnVmZmVyXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBwb3MgU291cmNlIGJ1ZmZlciBvZmZzZXRcclxuICogQHJldHVybnMge251bWJlcn0gVmFsdWUgcmVhZFxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBSZWFkcyBhIDMyIGJpdCBmbG9hdCBmcm9tIGEgYnVmZmVyIHVzaW5nIGJpZyBlbmRpYW4gYnl0ZSBvcmRlci5cclxuICogQG5hbWUgdXRpbC5mbG9hdC5yZWFkRmxvYXRCRVxyXG4gKiBAZnVuY3Rpb25cclxuICogQHBhcmFtIHtVaW50OEFycmF5fSBidWYgU291cmNlIGJ1ZmZlclxyXG4gKiBAcGFyYW0ge251bWJlcn0gcG9zIFNvdXJjZSBidWZmZXIgb2Zmc2V0XHJcbiAqIEByZXR1cm5zIHtudW1iZXJ9IFZhbHVlIHJlYWRcclxuICovXHJcblxyXG4vKipcclxuICogV3JpdGVzIGEgNjQgYml0IGRvdWJsZSB0byBhIGJ1ZmZlciB1c2luZyBsaXR0bGUgZW5kaWFuIGJ5dGUgb3JkZXIuXHJcbiAqIEBuYW1lIHV0aWwuZmxvYXQud3JpdGVEb3VibGVMRVxyXG4gKiBAZnVuY3Rpb25cclxuICogQHBhcmFtIHtudW1iZXJ9IHZhbCBWYWx1ZSB0byB3cml0ZVxyXG4gKiBAcGFyYW0ge1VpbnQ4QXJyYXl9IGJ1ZiBUYXJnZXQgYnVmZmVyXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBwb3MgVGFyZ2V0IGJ1ZmZlciBvZmZzZXRcclxuICogQHJldHVybnMge3VuZGVmaW5lZH1cclxuICovXHJcblxyXG4vKipcclxuICogV3JpdGVzIGEgNjQgYml0IGRvdWJsZSB0byBhIGJ1ZmZlciB1c2luZyBiaWcgZW5kaWFuIGJ5dGUgb3JkZXIuXHJcbiAqIEBuYW1lIHV0aWwuZmxvYXQud3JpdGVEb3VibGVCRVxyXG4gKiBAZnVuY3Rpb25cclxuICogQHBhcmFtIHtudW1iZXJ9IHZhbCBWYWx1ZSB0byB3cml0ZVxyXG4gKiBAcGFyYW0ge1VpbnQ4QXJyYXl9IGJ1ZiBUYXJnZXQgYnVmZmVyXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBwb3MgVGFyZ2V0IGJ1ZmZlciBvZmZzZXRcclxuICogQHJldHVybnMge3VuZGVmaW5lZH1cclxuICovXHJcblxyXG4vKipcclxuICogUmVhZHMgYSA2NCBiaXQgZG91YmxlIGZyb20gYSBidWZmZXIgdXNpbmcgbGl0dGxlIGVuZGlhbiBieXRlIG9yZGVyLlxyXG4gKiBAbmFtZSB1dGlsLmZsb2F0LnJlYWREb3VibGVMRVxyXG4gKiBAZnVuY3Rpb25cclxuICogQHBhcmFtIHtVaW50OEFycmF5fSBidWYgU291cmNlIGJ1ZmZlclxyXG4gKiBAcGFyYW0ge251bWJlcn0gcG9zIFNvdXJjZSBidWZmZXIgb2Zmc2V0XHJcbiAqIEByZXR1cm5zIHtudW1iZXJ9IFZhbHVlIHJlYWRcclxuICovXHJcblxyXG4vKipcclxuICogUmVhZHMgYSA2NCBiaXQgZG91YmxlIGZyb20gYSBidWZmZXIgdXNpbmcgYmlnIGVuZGlhbiBieXRlIG9yZGVyLlxyXG4gKiBAbmFtZSB1dGlsLmZsb2F0LnJlYWREb3VibGVCRVxyXG4gKiBAZnVuY3Rpb25cclxuICogQHBhcmFtIHtVaW50OEFycmF5fSBidWYgU291cmNlIGJ1ZmZlclxyXG4gKiBAcGFyYW0ge251bWJlcn0gcG9zIFNvdXJjZSBidWZmZXIgb2Zmc2V0XHJcbiAqIEByZXR1cm5zIHtudW1iZXJ9IFZhbHVlIHJlYWRcclxuICovXHJcblxyXG4vLyBGYWN0b3J5IGZ1bmN0aW9uIGZvciB0aGUgcHVycG9zZSBvZiBub2RlLWJhc2VkIHRlc3RpbmcgaW4gbW9kaWZpZWQgZ2xvYmFsIGVudmlyb25tZW50c1xyXG5mdW5jdGlvbiBmYWN0b3J5KGV4cG9ydHMpIHtcclxuXHJcbiAgICAvLyBmbG9hdDogdHlwZWQgYXJyYXlcclxuICAgIGlmICh0eXBlb2YgRmxvYXQzMkFycmF5ICE9PSBcInVuZGVmaW5lZFwiKSAoZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIHZhciBmMzIgPSBuZXcgRmxvYXQzMkFycmF5KFsgLTAgXSksXHJcbiAgICAgICAgICAgIGY4YiA9IG5ldyBVaW50OEFycmF5KGYzMi5idWZmZXIpLFxyXG4gICAgICAgICAgICBsZSAgPSBmOGJbM10gPT09IDEyODtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gd3JpdGVGbG9hdF9mMzJfY3B5KHZhbCwgYnVmLCBwb3MpIHtcclxuICAgICAgICAgICAgZjMyWzBdID0gdmFsO1xyXG4gICAgICAgICAgICBidWZbcG9zICAgIF0gPSBmOGJbMF07XHJcbiAgICAgICAgICAgIGJ1Zltwb3MgKyAxXSA9IGY4YlsxXTtcclxuICAgICAgICAgICAgYnVmW3BvcyArIDJdID0gZjhiWzJdO1xyXG4gICAgICAgICAgICBidWZbcG9zICsgM10gPSBmOGJbM107XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiB3cml0ZUZsb2F0X2YzMl9yZXYodmFsLCBidWYsIHBvcykge1xyXG4gICAgICAgICAgICBmMzJbMF0gPSB2YWw7XHJcbiAgICAgICAgICAgIGJ1Zltwb3MgICAgXSA9IGY4YlszXTtcclxuICAgICAgICAgICAgYnVmW3BvcyArIDFdID0gZjhiWzJdO1xyXG4gICAgICAgICAgICBidWZbcG9zICsgMl0gPSBmOGJbMV07XHJcbiAgICAgICAgICAgIGJ1Zltwb3MgKyAzXSA9IGY4YlswXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXHJcbiAgICAgICAgZXhwb3J0cy53cml0ZUZsb2F0TEUgPSBsZSA/IHdyaXRlRmxvYXRfZjMyX2NweSA6IHdyaXRlRmxvYXRfZjMyX3JldjtcclxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xyXG4gICAgICAgIGV4cG9ydHMud3JpdGVGbG9hdEJFID0gbGUgPyB3cml0ZUZsb2F0X2YzMl9yZXYgOiB3cml0ZUZsb2F0X2YzMl9jcHk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHJlYWRGbG9hdF9mMzJfY3B5KGJ1ZiwgcG9zKSB7XHJcbiAgICAgICAgICAgIGY4YlswXSA9IGJ1Zltwb3MgICAgXTtcclxuICAgICAgICAgICAgZjhiWzFdID0gYnVmW3BvcyArIDFdO1xyXG4gICAgICAgICAgICBmOGJbMl0gPSBidWZbcG9zICsgMl07XHJcbiAgICAgICAgICAgIGY4YlszXSA9IGJ1Zltwb3MgKyAzXTtcclxuICAgICAgICAgICAgcmV0dXJuIGYzMlswXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHJlYWRGbG9hdF9mMzJfcmV2KGJ1ZiwgcG9zKSB7XHJcbiAgICAgICAgICAgIGY4YlszXSA9IGJ1Zltwb3MgICAgXTtcclxuICAgICAgICAgICAgZjhiWzJdID0gYnVmW3BvcyArIDFdO1xyXG4gICAgICAgICAgICBmOGJbMV0gPSBidWZbcG9zICsgMl07XHJcbiAgICAgICAgICAgIGY4YlswXSA9IGJ1Zltwb3MgKyAzXTtcclxuICAgICAgICAgICAgcmV0dXJuIGYzMlswXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXHJcbiAgICAgICAgZXhwb3J0cy5yZWFkRmxvYXRMRSA9IGxlID8gcmVhZEZsb2F0X2YzMl9jcHkgOiByZWFkRmxvYXRfZjMyX3JldjtcclxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xyXG4gICAgICAgIGV4cG9ydHMucmVhZEZsb2F0QkUgPSBsZSA/IHJlYWRGbG9hdF9mMzJfcmV2IDogcmVhZEZsb2F0X2YzMl9jcHk7XHJcblxyXG4gICAgLy8gZmxvYXQ6IGllZWU3NTRcclxuICAgIH0pKCk7IGVsc2UgKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICBmdW5jdGlvbiB3cml0ZUZsb2F0X2llZWU3NTQod3JpdGVVaW50LCB2YWwsIGJ1ZiwgcG9zKSB7XHJcbiAgICAgICAgICAgIHZhciBzaWduID0gdmFsIDwgMCA/IDEgOiAwO1xyXG4gICAgICAgICAgICBpZiAoc2lnbilcclxuICAgICAgICAgICAgICAgIHZhbCA9IC12YWw7XHJcbiAgICAgICAgICAgIGlmICh2YWwgPT09IDApXHJcbiAgICAgICAgICAgICAgICB3cml0ZVVpbnQoMSAvIHZhbCA+IDAgPyAvKiBwb3NpdGl2ZSAqLyAwIDogLyogbmVnYXRpdmUgMCAqLyAyMTQ3NDgzNjQ4LCBidWYsIHBvcyk7XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzTmFOKHZhbCkpXHJcbiAgICAgICAgICAgICAgICB3cml0ZVVpbnQoMjE0MzI4OTM0NCwgYnVmLCBwb3MpO1xyXG4gICAgICAgICAgICBlbHNlIGlmICh2YWwgPiAzLjQwMjgyMzQ2NjM4NTI4ODZlKzM4KSAvLyArLUluZmluaXR5XHJcbiAgICAgICAgICAgICAgICB3cml0ZVVpbnQoKHNpZ24gPDwgMzEgfCAyMTM5MDk1MDQwKSA+Pj4gMCwgYnVmLCBwb3MpO1xyXG4gICAgICAgICAgICBlbHNlIGlmICh2YWwgPCAxLjE3NTQ5NDM1MDgyMjI4NzVlLTM4KSAvLyBkZW5vcm1hbFxyXG4gICAgICAgICAgICAgICAgd3JpdGVVaW50KChzaWduIDw8IDMxIHwgTWF0aC5yb3VuZCh2YWwgLyAxLjQwMTI5ODQ2NDMyNDgxN2UtNDUpKSA+Pj4gMCwgYnVmLCBwb3MpO1xyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciBleHBvbmVudCA9IE1hdGguZmxvb3IoTWF0aC5sb2codmFsKSAvIE1hdGguTE4yKSxcclxuICAgICAgICAgICAgICAgICAgICBtYW50aXNzYSA9IE1hdGgucm91bmQodmFsICogTWF0aC5wb3coMiwgLWV4cG9uZW50KSAqIDgzODg2MDgpICYgODM4ODYwNztcclxuICAgICAgICAgICAgICAgIHdyaXRlVWludCgoc2lnbiA8PCAzMSB8IGV4cG9uZW50ICsgMTI3IDw8IDIzIHwgbWFudGlzc2EpID4+PiAwLCBidWYsIHBvcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGV4cG9ydHMud3JpdGVGbG9hdExFID0gd3JpdGVGbG9hdF9pZWVlNzU0LmJpbmQobnVsbCwgd3JpdGVVaW50TEUpO1xyXG4gICAgICAgIGV4cG9ydHMud3JpdGVGbG9hdEJFID0gd3JpdGVGbG9hdF9pZWVlNzU0LmJpbmQobnVsbCwgd3JpdGVVaW50QkUpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiByZWFkRmxvYXRfaWVlZTc1NChyZWFkVWludCwgYnVmLCBwb3MpIHtcclxuICAgICAgICAgICAgdmFyIHVpbnQgPSByZWFkVWludChidWYsIHBvcyksXHJcbiAgICAgICAgICAgICAgICBzaWduID0gKHVpbnQgPj4gMzEpICogMiArIDEsXHJcbiAgICAgICAgICAgICAgICBleHBvbmVudCA9IHVpbnQgPj4+IDIzICYgMjU1LFxyXG4gICAgICAgICAgICAgICAgbWFudGlzc2EgPSB1aW50ICYgODM4ODYwNztcclxuICAgICAgICAgICAgcmV0dXJuIGV4cG9uZW50ID09PSAyNTVcclxuICAgICAgICAgICAgICAgID8gbWFudGlzc2FcclxuICAgICAgICAgICAgICAgID8gTmFOXHJcbiAgICAgICAgICAgICAgICA6IHNpZ24gKiBJbmZpbml0eVxyXG4gICAgICAgICAgICAgICAgOiBleHBvbmVudCA9PT0gMCAvLyBkZW5vcm1hbFxyXG4gICAgICAgICAgICAgICAgPyBzaWduICogMS40MDEyOTg0NjQzMjQ4MTdlLTQ1ICogbWFudGlzc2FcclxuICAgICAgICAgICAgICAgIDogc2lnbiAqIE1hdGgucG93KDIsIGV4cG9uZW50IC0gMTUwKSAqIChtYW50aXNzYSArIDgzODg2MDgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZXhwb3J0cy5yZWFkRmxvYXRMRSA9IHJlYWRGbG9hdF9pZWVlNzU0LmJpbmQobnVsbCwgcmVhZFVpbnRMRSk7XHJcbiAgICAgICAgZXhwb3J0cy5yZWFkRmxvYXRCRSA9IHJlYWRGbG9hdF9pZWVlNzU0LmJpbmQobnVsbCwgcmVhZFVpbnRCRSk7XHJcblxyXG4gICAgfSkoKTtcclxuXHJcbiAgICAvLyBkb3VibGU6IHR5cGVkIGFycmF5XHJcbiAgICBpZiAodHlwZW9mIEZsb2F0NjRBcnJheSAhPT0gXCJ1bmRlZmluZWRcIikgKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICB2YXIgZjY0ID0gbmV3IEZsb2F0NjRBcnJheShbLTBdKSxcclxuICAgICAgICAgICAgZjhiID0gbmV3IFVpbnQ4QXJyYXkoZjY0LmJ1ZmZlciksXHJcbiAgICAgICAgICAgIGxlICA9IGY4Yls3XSA9PT0gMTI4O1xyXG5cclxuICAgICAgICBmdW5jdGlvbiB3cml0ZURvdWJsZV9mNjRfY3B5KHZhbCwgYnVmLCBwb3MpIHtcclxuICAgICAgICAgICAgZjY0WzBdID0gdmFsO1xyXG4gICAgICAgICAgICBidWZbcG9zICAgIF0gPSBmOGJbMF07XHJcbiAgICAgICAgICAgIGJ1Zltwb3MgKyAxXSA9IGY4YlsxXTtcclxuICAgICAgICAgICAgYnVmW3BvcyArIDJdID0gZjhiWzJdO1xyXG4gICAgICAgICAgICBidWZbcG9zICsgM10gPSBmOGJbM107XHJcbiAgICAgICAgICAgIGJ1Zltwb3MgKyA0XSA9IGY4Yls0XTtcclxuICAgICAgICAgICAgYnVmW3BvcyArIDVdID0gZjhiWzVdO1xyXG4gICAgICAgICAgICBidWZbcG9zICsgNl0gPSBmOGJbNl07XHJcbiAgICAgICAgICAgIGJ1Zltwb3MgKyA3XSA9IGY4Yls3XTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHdyaXRlRG91YmxlX2Y2NF9yZXYodmFsLCBidWYsIHBvcykge1xyXG4gICAgICAgICAgICBmNjRbMF0gPSB2YWw7XHJcbiAgICAgICAgICAgIGJ1Zltwb3MgICAgXSA9IGY4Yls3XTtcclxuICAgICAgICAgICAgYnVmW3BvcyArIDFdID0gZjhiWzZdO1xyXG4gICAgICAgICAgICBidWZbcG9zICsgMl0gPSBmOGJbNV07XHJcbiAgICAgICAgICAgIGJ1Zltwb3MgKyAzXSA9IGY4Yls0XTtcclxuICAgICAgICAgICAgYnVmW3BvcyArIDRdID0gZjhiWzNdO1xyXG4gICAgICAgICAgICBidWZbcG9zICsgNV0gPSBmOGJbMl07XHJcbiAgICAgICAgICAgIGJ1Zltwb3MgKyA2XSA9IGY4YlsxXTtcclxuICAgICAgICAgICAgYnVmW3BvcyArIDddID0gZjhiWzBdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cclxuICAgICAgICBleHBvcnRzLndyaXRlRG91YmxlTEUgPSBsZSA/IHdyaXRlRG91YmxlX2Y2NF9jcHkgOiB3cml0ZURvdWJsZV9mNjRfcmV2O1xyXG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXHJcbiAgICAgICAgZXhwb3J0cy53cml0ZURvdWJsZUJFID0gbGUgPyB3cml0ZURvdWJsZV9mNjRfcmV2IDogd3JpdGVEb3VibGVfZjY0X2NweTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmVhZERvdWJsZV9mNjRfY3B5KGJ1ZiwgcG9zKSB7XHJcbiAgICAgICAgICAgIGY4YlswXSA9IGJ1Zltwb3MgICAgXTtcclxuICAgICAgICAgICAgZjhiWzFdID0gYnVmW3BvcyArIDFdO1xyXG4gICAgICAgICAgICBmOGJbMl0gPSBidWZbcG9zICsgMl07XHJcbiAgICAgICAgICAgIGY4YlszXSA9IGJ1Zltwb3MgKyAzXTtcclxuICAgICAgICAgICAgZjhiWzRdID0gYnVmW3BvcyArIDRdO1xyXG4gICAgICAgICAgICBmOGJbNV0gPSBidWZbcG9zICsgNV07XHJcbiAgICAgICAgICAgIGY4Yls2XSA9IGJ1Zltwb3MgKyA2XTtcclxuICAgICAgICAgICAgZjhiWzddID0gYnVmW3BvcyArIDddO1xyXG4gICAgICAgICAgICByZXR1cm4gZjY0WzBdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmVhZERvdWJsZV9mNjRfcmV2KGJ1ZiwgcG9zKSB7XHJcbiAgICAgICAgICAgIGY4Yls3XSA9IGJ1Zltwb3MgICAgXTtcclxuICAgICAgICAgICAgZjhiWzZdID0gYnVmW3BvcyArIDFdO1xyXG4gICAgICAgICAgICBmOGJbNV0gPSBidWZbcG9zICsgMl07XHJcbiAgICAgICAgICAgIGY4Yls0XSA9IGJ1Zltwb3MgKyAzXTtcclxuICAgICAgICAgICAgZjhiWzNdID0gYnVmW3BvcyArIDRdO1xyXG4gICAgICAgICAgICBmOGJbMl0gPSBidWZbcG9zICsgNV07XHJcbiAgICAgICAgICAgIGY4YlsxXSA9IGJ1Zltwb3MgKyA2XTtcclxuICAgICAgICAgICAgZjhiWzBdID0gYnVmW3BvcyArIDddO1xyXG4gICAgICAgICAgICByZXR1cm4gZjY0WzBdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cclxuICAgICAgICBleHBvcnRzLnJlYWREb3VibGVMRSA9IGxlID8gcmVhZERvdWJsZV9mNjRfY3B5IDogcmVhZERvdWJsZV9mNjRfcmV2O1xyXG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXHJcbiAgICAgICAgZXhwb3J0cy5yZWFkRG91YmxlQkUgPSBsZSA/IHJlYWREb3VibGVfZjY0X3JldiA6IHJlYWREb3VibGVfZjY0X2NweTtcclxuXHJcbiAgICAvLyBkb3VibGU6IGllZWU3NTRcclxuICAgIH0pKCk7IGVsc2UgKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICBmdW5jdGlvbiB3cml0ZURvdWJsZV9pZWVlNzU0KHdyaXRlVWludCwgb2ZmMCwgb2ZmMSwgdmFsLCBidWYsIHBvcykge1xyXG4gICAgICAgICAgICB2YXIgc2lnbiA9IHZhbCA8IDAgPyAxIDogMDtcclxuICAgICAgICAgICAgaWYgKHNpZ24pXHJcbiAgICAgICAgICAgICAgICB2YWwgPSAtdmFsO1xyXG4gICAgICAgICAgICBpZiAodmFsID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB3cml0ZVVpbnQoMCwgYnVmLCBwb3MgKyBvZmYwKTtcclxuICAgICAgICAgICAgICAgIHdyaXRlVWludCgxIC8gdmFsID4gMCA/IC8qIHBvc2l0aXZlICovIDAgOiAvKiBuZWdhdGl2ZSAwICovIDIxNDc0ODM2NDgsIGJ1ZiwgcG9zICsgb2ZmMSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNOYU4odmFsKSkge1xyXG4gICAgICAgICAgICAgICAgd3JpdGVVaW50KDAsIGJ1ZiwgcG9zICsgb2ZmMCk7XHJcbiAgICAgICAgICAgICAgICB3cml0ZVVpbnQoMjE0Njk1OTM2MCwgYnVmLCBwb3MgKyBvZmYxKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh2YWwgPiAxLjc5NzY5MzEzNDg2MjMxNTdlKzMwOCkgeyAvLyArLUluZmluaXR5XHJcbiAgICAgICAgICAgICAgICB3cml0ZVVpbnQoMCwgYnVmLCBwb3MgKyBvZmYwKTtcclxuICAgICAgICAgICAgICAgIHdyaXRlVWludCgoc2lnbiA8PCAzMSB8IDIxNDY0MzUwNzIpID4+PiAwLCBidWYsIHBvcyArIG9mZjEpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1hbnRpc3NhO1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhbCA8IDIuMjI1MDczODU4NTA3MjAxNGUtMzA4KSB7IC8vIGRlbm9ybWFsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFudGlzc2EgPSB2YWwgLyA1ZS0zMjQ7XHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVVaW50KG1hbnRpc3NhID4+PiAwLCBidWYsIHBvcyArIG9mZjApO1xyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlVWludCgoc2lnbiA8PCAzMSB8IG1hbnRpc3NhIC8gNDI5NDk2NzI5NikgPj4+IDAsIGJ1ZiwgcG9zICsgb2ZmMSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBleHBvbmVudCA9IE1hdGguZmxvb3IoTWF0aC5sb2codmFsKSAvIE1hdGguTE4yKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXhwb25lbnQgPT09IDEwMjQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9uZW50ID0gMTAyMztcclxuICAgICAgICAgICAgICAgICAgICBtYW50aXNzYSA9IHZhbCAqIE1hdGgucG93KDIsIC1leHBvbmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVVaW50KG1hbnRpc3NhICogNDUwMzU5OTYyNzM3MDQ5NiA+Pj4gMCwgYnVmLCBwb3MgKyBvZmYwKTtcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZVVpbnQoKHNpZ24gPDwgMzEgfCBleHBvbmVudCArIDEwMjMgPDwgMjAgfCBtYW50aXNzYSAqIDEwNDg1NzYgJiAxMDQ4NTc1KSA+Pj4gMCwgYnVmLCBwb3MgKyBvZmYxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZXhwb3J0cy53cml0ZURvdWJsZUxFID0gd3JpdGVEb3VibGVfaWVlZTc1NC5iaW5kKG51bGwsIHdyaXRlVWludExFLCAwLCA0KTtcclxuICAgICAgICBleHBvcnRzLndyaXRlRG91YmxlQkUgPSB3cml0ZURvdWJsZV9pZWVlNzU0LmJpbmQobnVsbCwgd3JpdGVVaW50QkUsIDQsIDApO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiByZWFkRG91YmxlX2llZWU3NTQocmVhZFVpbnQsIG9mZjAsIG9mZjEsIGJ1ZiwgcG9zKSB7XHJcbiAgICAgICAgICAgIHZhciBsbyA9IHJlYWRVaW50KGJ1ZiwgcG9zICsgb2ZmMCksXHJcbiAgICAgICAgICAgICAgICBoaSA9IHJlYWRVaW50KGJ1ZiwgcG9zICsgb2ZmMSk7XHJcbiAgICAgICAgICAgIHZhciBzaWduID0gKGhpID4+IDMxKSAqIDIgKyAxLFxyXG4gICAgICAgICAgICAgICAgZXhwb25lbnQgPSBoaSA+Pj4gMjAgJiAyMDQ3LFxyXG4gICAgICAgICAgICAgICAgbWFudGlzc2EgPSA0Mjk0OTY3Mjk2ICogKGhpICYgMTA0ODU3NSkgKyBsbztcclxuICAgICAgICAgICAgcmV0dXJuIGV4cG9uZW50ID09PSAyMDQ3XHJcbiAgICAgICAgICAgICAgICA/IG1hbnRpc3NhXHJcbiAgICAgICAgICAgICAgICA/IE5hTlxyXG4gICAgICAgICAgICAgICAgOiBzaWduICogSW5maW5pdHlcclxuICAgICAgICAgICAgICAgIDogZXhwb25lbnQgPT09IDAgLy8gZGVub3JtYWxcclxuICAgICAgICAgICAgICAgID8gc2lnbiAqIDVlLTMyNCAqIG1hbnRpc3NhXHJcbiAgICAgICAgICAgICAgICA6IHNpZ24gKiBNYXRoLnBvdygyLCBleHBvbmVudCAtIDEwNzUpICogKG1hbnRpc3NhICsgNDUwMzU5OTYyNzM3MDQ5Nik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBleHBvcnRzLnJlYWREb3VibGVMRSA9IHJlYWREb3VibGVfaWVlZTc1NC5iaW5kKG51bGwsIHJlYWRVaW50TEUsIDAsIDQpO1xyXG4gICAgICAgIGV4cG9ydHMucmVhZERvdWJsZUJFID0gcmVhZERvdWJsZV9pZWVlNzU0LmJpbmQobnVsbCwgcmVhZFVpbnRCRSwgNCwgMCk7XHJcblxyXG4gICAgfSkoKTtcclxuXHJcbiAgICByZXR1cm4gZXhwb3J0cztcclxufVxyXG5cclxuLy8gdWludCBoZWxwZXJzXHJcblxyXG5mdW5jdGlvbiB3cml0ZVVpbnRMRSh2YWwsIGJ1ZiwgcG9zKSB7XHJcbiAgICBidWZbcG9zICAgIF0gPSAgdmFsICAgICAgICAmIDI1NTtcclxuICAgIGJ1Zltwb3MgKyAxXSA9ICB2YWwgPj4+IDggICYgMjU1O1xyXG4gICAgYnVmW3BvcyArIDJdID0gIHZhbCA+Pj4gMTYgJiAyNTU7XHJcbiAgICBidWZbcG9zICsgM10gPSAgdmFsID4+PiAyNDtcclxufVxyXG5cclxuZnVuY3Rpb24gd3JpdGVVaW50QkUodmFsLCBidWYsIHBvcykge1xyXG4gICAgYnVmW3BvcyAgICBdID0gIHZhbCA+Pj4gMjQ7XHJcbiAgICBidWZbcG9zICsgMV0gPSAgdmFsID4+PiAxNiAmIDI1NTtcclxuICAgIGJ1Zltwb3MgKyAyXSA9ICB2YWwgPj4+IDggICYgMjU1O1xyXG4gICAgYnVmW3BvcyArIDNdID0gIHZhbCAgICAgICAgJiAyNTU7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlYWRVaW50TEUoYnVmLCBwb3MpIHtcclxuICAgIHJldHVybiAoYnVmW3BvcyAgICBdXHJcbiAgICAgICAgICB8IGJ1Zltwb3MgKyAxXSA8PCA4XHJcbiAgICAgICAgICB8IGJ1Zltwb3MgKyAyXSA8PCAxNlxyXG4gICAgICAgICAgfCBidWZbcG9zICsgM10gPDwgMjQpID4+PiAwO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZWFkVWludEJFKGJ1ZiwgcG9zKSB7XHJcbiAgICByZXR1cm4gKGJ1Zltwb3MgICAgXSA8PCAyNFxyXG4gICAgICAgICAgfCBidWZbcG9zICsgMV0gPDwgMTZcclxuICAgICAgICAgIHwgYnVmW3BvcyArIDJdIDw8IDhcclxuICAgICAgICAgIHwgYnVmW3BvcyArIDNdKSA+Pj4gMDtcclxufVxyXG4iLCAiXCJ1c2Ugc3RyaWN0XCI7XHJcbm1vZHVsZS5leHBvcnRzID0gaW5xdWlyZTtcclxuXHJcbi8qKlxyXG4gKiBSZXF1aXJlcyBhIG1vZHVsZSBvbmx5IGlmIGF2YWlsYWJsZS5cclxuICogQG1lbWJlcm9mIHV0aWxcclxuICogQHBhcmFtIHtzdHJpbmd9IG1vZHVsZU5hbWUgTW9kdWxlIHRvIHJlcXVpcmVcclxuICogQHJldHVybnMgez9PYmplY3R9IFJlcXVpcmVkIG1vZHVsZSBpZiBhdmFpbGFibGUgYW5kIG5vdCBlbXB0eSwgb3RoZXJ3aXNlIGBudWxsYFxyXG4gKi9cclxuZnVuY3Rpb24gaW5xdWlyZShtb2R1bGVOYW1lKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHZhciBtb2QgPSBldmFsKFwicXVpcmVcIi5yZXBsYWNlKC9eLyxcInJlXCIpKShtb2R1bGVOYW1lKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1ldmFsXHJcbiAgICAgICAgaWYgKG1vZCAmJiAobW9kLmxlbmd0aCB8fCBPYmplY3Qua2V5cyhtb2QpLmxlbmd0aCkpXHJcbiAgICAgICAgICAgIHJldHVybiBtb2Q7XHJcbiAgICB9IGNhdGNoIChlKSB7fSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWVtcHR5XHJcbiAgICByZXR1cm4gbnVsbDtcclxufVxyXG4iLCAiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4vKipcclxuICogQSBtaW5pbWFsIFVURjggaW1wbGVtZW50YXRpb24gZm9yIG51bWJlciBhcnJheXMuXHJcbiAqIEBtZW1iZXJvZiB1dGlsXHJcbiAqIEBuYW1lc3BhY2VcclxuICovXHJcbnZhciB1dGY4ID0gZXhwb3J0cztcclxuXHJcbi8qKlxyXG4gKiBDYWxjdWxhdGVzIHRoZSBVVEY4IGJ5dGUgbGVuZ3RoIG9mIGEgc3RyaW5nLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nIFN0cmluZ1xyXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBCeXRlIGxlbmd0aFxyXG4gKi9cclxudXRmOC5sZW5ndGggPSBmdW5jdGlvbiB1dGY4X2xlbmd0aChzdHJpbmcpIHtcclxuICAgIHZhciBsZW4gPSAwLFxyXG4gICAgICAgIGMgPSAwO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHJpbmcubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICBjID0gc3RyaW5nLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgaWYgKGMgPCAxMjgpXHJcbiAgICAgICAgICAgIGxlbiArPSAxO1xyXG4gICAgICAgIGVsc2UgaWYgKGMgPCAyMDQ4KVxyXG4gICAgICAgICAgICBsZW4gKz0gMjtcclxuICAgICAgICBlbHNlIGlmICgoYyAmIDB4RkMwMCkgPT09IDB4RDgwMCAmJiAoc3RyaW5nLmNoYXJDb2RlQXQoaSArIDEpICYgMHhGQzAwKSA9PT0gMHhEQzAwKSB7XHJcbiAgICAgICAgICAgICsraTtcclxuICAgICAgICAgICAgbGVuICs9IDQ7XHJcbiAgICAgICAgfSBlbHNlXHJcbiAgICAgICAgICAgIGxlbiArPSAzO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGxlbjtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBSZWFkcyBVVEY4IGJ5dGVzIGFzIGEgc3RyaW5nLlxyXG4gKiBAcGFyYW0ge1VpbnQ4QXJyYXl9IGJ1ZmZlciBTb3VyY2UgYnVmZmVyXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydCBTb3VyY2Ugc3RhcnRcclxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBTb3VyY2UgZW5kXHJcbiAqIEByZXR1cm5zIHtzdHJpbmd9IFN0cmluZyByZWFkXHJcbiAqL1xyXG51dGY4LnJlYWQgPSBmdW5jdGlvbiB1dGY4X3JlYWQoYnVmZmVyLCBzdGFydCwgZW5kKSB7XHJcbiAgICB2YXIgbGVuID0gZW5kIC0gc3RhcnQ7XHJcbiAgICBpZiAobGVuIDwgMSlcclxuICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgIHZhciBwYXJ0cyA9IG51bGwsXHJcbiAgICAgICAgY2h1bmsgPSBbXSxcclxuICAgICAgICBpID0gMCwgLy8gY2hhciBvZmZzZXRcclxuICAgICAgICB0OyAgICAgLy8gdGVtcG9yYXJ5XHJcbiAgICB3aGlsZSAoc3RhcnQgPCBlbmQpIHtcclxuICAgICAgICB0ID0gYnVmZmVyW3N0YXJ0KytdO1xyXG4gICAgICAgIGlmICh0IDwgMTI4KVxyXG4gICAgICAgICAgICBjaHVua1tpKytdID0gdDtcclxuICAgICAgICBlbHNlIGlmICh0ID4gMTkxICYmIHQgPCAyMjQpXHJcbiAgICAgICAgICAgIGNodW5rW2krK10gPSAodCAmIDMxKSA8PCA2IHwgYnVmZmVyW3N0YXJ0KytdICYgNjM7XHJcbiAgICAgICAgZWxzZSBpZiAodCA+IDIzOSAmJiB0IDwgMzY1KSB7XHJcbiAgICAgICAgICAgIHQgPSAoKHQgJiA3KSA8PCAxOCB8IChidWZmZXJbc3RhcnQrK10gJiA2MykgPDwgMTIgfCAoYnVmZmVyW3N0YXJ0KytdICYgNjMpIDw8IDYgfCBidWZmZXJbc3RhcnQrK10gJiA2MykgLSAweDEwMDAwO1xyXG4gICAgICAgICAgICBjaHVua1tpKytdID0gMHhEODAwICsgKHQgPj4gMTApO1xyXG4gICAgICAgICAgICBjaHVua1tpKytdID0gMHhEQzAwICsgKHQgJiAxMDIzKTtcclxuICAgICAgICB9IGVsc2VcclxuICAgICAgICAgICAgY2h1bmtbaSsrXSA9ICh0ICYgMTUpIDw8IDEyIHwgKGJ1ZmZlcltzdGFydCsrXSAmIDYzKSA8PCA2IHwgYnVmZmVyW3N0YXJ0KytdICYgNjM7XHJcbiAgICAgICAgaWYgKGkgPiA4MTkxKSB7XHJcbiAgICAgICAgICAgIChwYXJ0cyB8fCAocGFydHMgPSBbXSkpLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsIGNodW5rKSk7XHJcbiAgICAgICAgICAgIGkgPSAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChwYXJ0cykge1xyXG4gICAgICAgIGlmIChpKVxyXG4gICAgICAgICAgICBwYXJ0cy5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLCBjaHVuay5zbGljZSgwLCBpKSkpO1xyXG4gICAgICAgIHJldHVybiBwYXJ0cy5qb2luKFwiXCIpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLCBjaHVuay5zbGljZSgwLCBpKSk7XHJcbn07XHJcblxyXG4vKipcclxuICogV3JpdGVzIGEgc3RyaW5nIGFzIFVURjggYnl0ZXMuXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmcgU291cmNlIHN0cmluZ1xyXG4gKiBAcGFyYW0ge1VpbnQ4QXJyYXl9IGJ1ZmZlciBEZXN0aW5hdGlvbiBidWZmZXJcclxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBEZXN0aW5hdGlvbiBvZmZzZXRcclxuICogQHJldHVybnMge251bWJlcn0gQnl0ZXMgd3JpdHRlblxyXG4gKi9cclxudXRmOC53cml0ZSA9IGZ1bmN0aW9uIHV0Zjhfd3JpdGUoc3RyaW5nLCBidWZmZXIsIG9mZnNldCkge1xyXG4gICAgdmFyIHN0YXJ0ID0gb2Zmc2V0LFxyXG4gICAgICAgIGMxLCAvLyBjaGFyYWN0ZXIgMVxyXG4gICAgICAgIGMyOyAvLyBjaGFyYWN0ZXIgMlxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHJpbmcubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICBjMSA9IHN0cmluZy5jaGFyQ29kZUF0KGkpO1xyXG4gICAgICAgIGlmIChjMSA8IDEyOCkge1xyXG4gICAgICAgICAgICBidWZmZXJbb2Zmc2V0KytdID0gYzE7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjMSA8IDIwNDgpIHtcclxuICAgICAgICAgICAgYnVmZmVyW29mZnNldCsrXSA9IGMxID4+IDYgICAgICAgfCAxOTI7XHJcbiAgICAgICAgICAgIGJ1ZmZlcltvZmZzZXQrK10gPSBjMSAgICAgICAmIDYzIHwgMTI4O1xyXG4gICAgICAgIH0gZWxzZSBpZiAoKGMxICYgMHhGQzAwKSA9PT0gMHhEODAwICYmICgoYzIgPSBzdHJpbmcuY2hhckNvZGVBdChpICsgMSkpICYgMHhGQzAwKSA9PT0gMHhEQzAwKSB7XHJcbiAgICAgICAgICAgIGMxID0gMHgxMDAwMCArICgoYzEgJiAweDAzRkYpIDw8IDEwKSArIChjMiAmIDB4MDNGRik7XHJcbiAgICAgICAgICAgICsraTtcclxuICAgICAgICAgICAgYnVmZmVyW29mZnNldCsrXSA9IGMxID4+IDE4ICAgICAgfCAyNDA7XHJcbiAgICAgICAgICAgIGJ1ZmZlcltvZmZzZXQrK10gPSBjMSA+PiAxMiAmIDYzIHwgMTI4O1xyXG4gICAgICAgICAgICBidWZmZXJbb2Zmc2V0KytdID0gYzEgPj4gNiAgJiA2MyB8IDEyODtcclxuICAgICAgICAgICAgYnVmZmVyW29mZnNldCsrXSA9IGMxICAgICAgICYgNjMgfCAxMjg7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYnVmZmVyW29mZnNldCsrXSA9IGMxID4+IDEyICAgICAgfCAyMjQ7XHJcbiAgICAgICAgICAgIGJ1ZmZlcltvZmZzZXQrK10gPSBjMSA+PiA2ICAmIDYzIHwgMTI4O1xyXG4gICAgICAgICAgICBidWZmZXJbb2Zmc2V0KytdID0gYzEgICAgICAgJiA2MyB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb2Zmc2V0IC0gc3RhcnQ7XHJcbn07XHJcbiIsICJcInVzZSBzdHJpY3RcIjtcclxubW9kdWxlLmV4cG9ydHMgPSBwb29sO1xyXG5cclxuLyoqXHJcbiAqIEFuIGFsbG9jYXRvciBhcyB1c2VkIGJ5IHtAbGluayB1dGlsLnBvb2x9LlxyXG4gKiBAdHlwZWRlZiBQb29sQWxsb2NhdG9yXHJcbiAqIEB0eXBlIHtmdW5jdGlvbn1cclxuICogQHBhcmFtIHtudW1iZXJ9IHNpemUgQnVmZmVyIHNpemVcclxuICogQHJldHVybnMge1VpbnQ4QXJyYXl9IEJ1ZmZlclxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBBIHNsaWNlciBhcyB1c2VkIGJ5IHtAbGluayB1dGlsLnBvb2x9LlxyXG4gKiBAdHlwZWRlZiBQb29sU2xpY2VyXHJcbiAqIEB0eXBlIHtmdW5jdGlvbn1cclxuICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0IFN0YXJ0IG9mZnNldFxyXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZCBvZmZzZXRcclxuICogQHJldHVybnMge1VpbnQ4QXJyYXl9IEJ1ZmZlciBzbGljZVxyXG4gKiBAdGhpcyB7VWludDhBcnJheX1cclxuICovXHJcblxyXG4vKipcclxuICogQSBnZW5lcmFsIHB1cnBvc2UgYnVmZmVyIHBvb2wuXHJcbiAqIEBtZW1iZXJvZiB1dGlsXHJcbiAqIEBmdW5jdGlvblxyXG4gKiBAcGFyYW0ge1Bvb2xBbGxvY2F0b3J9IGFsbG9jIEFsbG9jYXRvclxyXG4gKiBAcGFyYW0ge1Bvb2xTbGljZXJ9IHNsaWNlIFNsaWNlclxyXG4gKiBAcGFyYW0ge251bWJlcn0gW3NpemU9ODE5Ml0gU2xhYiBzaXplXHJcbiAqIEByZXR1cm5zIHtQb29sQWxsb2NhdG9yfSBQb29sZWQgYWxsb2NhdG9yXHJcbiAqL1xyXG5mdW5jdGlvbiBwb29sKGFsbG9jLCBzbGljZSwgc2l6ZSkge1xyXG4gICAgdmFyIFNJWkUgICA9IHNpemUgfHwgODE5MjtcclxuICAgIHZhciBNQVggICAgPSBTSVpFID4+PiAxO1xyXG4gICAgdmFyIHNsYWIgICA9IG51bGw7XHJcbiAgICB2YXIgb2Zmc2V0ID0gU0laRTtcclxuICAgIHJldHVybiBmdW5jdGlvbiBwb29sX2FsbG9jKHNpemUpIHtcclxuICAgICAgICBpZiAoc2l6ZSA8IDEgfHwgc2l6ZSA+IE1BWClcclxuICAgICAgICAgICAgcmV0dXJuIGFsbG9jKHNpemUpO1xyXG4gICAgICAgIGlmIChvZmZzZXQgKyBzaXplID4gU0laRSkge1xyXG4gICAgICAgICAgICBzbGFiID0gYWxsb2MoU0laRSk7XHJcbiAgICAgICAgICAgIG9mZnNldCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBidWYgPSBzbGljZS5jYWxsKHNsYWIsIG9mZnNldCwgb2Zmc2V0ICs9IHNpemUpO1xyXG4gICAgICAgIGlmIChvZmZzZXQgJiA3KSAvLyBhbGlnbiB0byAzMiBiaXRcclxuICAgICAgICAgICAgb2Zmc2V0ID0gKG9mZnNldCB8IDcpICsgMTtcclxuICAgICAgICByZXR1cm4gYnVmO1xyXG4gICAgfTtcclxufVxyXG4iLCAiXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IExvbmdCaXRzO1xuXG52YXIgdXRpbCA9IHJlcXVpcmUoXCIuLi91dGlsL21pbmltYWxcIik7XG5cbi8qKlxuICogQ29uc3RydWN0cyBuZXcgbG9uZyBiaXRzLlxuICogQGNsYXNzZGVzYyBIZWxwZXIgY2xhc3MgZm9yIHdvcmtpbmcgd2l0aCB0aGUgbG93IGFuZCBoaWdoIGJpdHMgb2YgYSA2NCBiaXQgdmFsdWUuXG4gKiBAbWVtYmVyb2YgdXRpbFxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge251bWJlcn0gbG8gTG93IDMyIGJpdHMsIHVuc2lnbmVkXG4gKiBAcGFyYW0ge251bWJlcn0gaGkgSGlnaCAzMiBiaXRzLCB1bnNpZ25lZFxuICovXG5mdW5jdGlvbiBMb25nQml0cyhsbywgaGkpIHtcblxuICAgIC8vIG5vdGUgdGhhdCB0aGUgY2FzdHMgYmVsb3cgYXJlIHRoZW9yZXRpY2FsbHkgdW5uZWNlc3NhcnkgYXMgb2YgdG9kYXksIGJ1dCBvbGRlciBzdGF0aWNhbGx5XG4gICAgLy8gZ2VuZXJhdGVkIGNvbnZlcnRlciBjb2RlIG1pZ2h0IHN0aWxsIGNhbGwgdGhlIGN0b3Igd2l0aCBzaWduZWQgMzJiaXRzLiBrZXB0IGZvciBjb21wYXQuXG5cbiAgICAvKipcbiAgICAgKiBMb3cgYml0cy5cbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMubG8gPSBsbyA+Pj4gMDtcblxuICAgIC8qKlxuICAgICAqIEhpZ2ggYml0cy5cbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuaGkgPSBoaSA+Pj4gMDtcbn1cblxuLyoqXG4gKiBaZXJvIGJpdHMuXG4gKiBAbWVtYmVyb2YgdXRpbC5Mb25nQml0c1xuICogQHR5cGUge3V0aWwuTG9uZ0JpdHN9XG4gKi9cbnZhciB6ZXJvID0gTG9uZ0JpdHMuemVybyA9IG5ldyBMb25nQml0cygwLCAwKTtcblxuemVyby50b051bWJlciA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcbnplcm8uenpFbmNvZGUgPSB6ZXJvLnp6RGVjb2RlID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9O1xuemVyby5sZW5ndGggPSBmdW5jdGlvbigpIHsgcmV0dXJuIDE7IH07XG5cbi8qKlxuICogWmVybyBoYXNoLlxuICogQG1lbWJlcm9mIHV0aWwuTG9uZ0JpdHNcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbnZhciB6ZXJvSGFzaCA9IExvbmdCaXRzLnplcm9IYXNoID0gXCJcXDBcXDBcXDBcXDBcXDBcXDBcXDBcXDBcIjtcblxuLyoqXG4gKiBDb25zdHJ1Y3RzIG5ldyBsb25nIGJpdHMgZnJvbSB0aGUgc3BlY2lmaWVkIG51bWJlci5cbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSBWYWx1ZVxuICogQHJldHVybnMge3V0aWwuTG9uZ0JpdHN9IEluc3RhbmNlXG4gKi9cbkxvbmdCaXRzLmZyb21OdW1iZXIgPSBmdW5jdGlvbiBmcm9tTnVtYmVyKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlID09PSAwKVxuICAgICAgICByZXR1cm4gemVybztcbiAgICB2YXIgc2lnbiA9IHZhbHVlIDwgMDtcbiAgICBpZiAoc2lnbilcbiAgICAgICAgdmFsdWUgPSAtdmFsdWU7XG4gICAgdmFyIGxvID0gdmFsdWUgPj4+IDAsXG4gICAgICAgIGhpID0gKHZhbHVlIC0gbG8pIC8gNDI5NDk2NzI5NiA+Pj4gMDtcbiAgICBpZiAoc2lnbikge1xuICAgICAgICBoaSA9IH5oaSA+Pj4gMDtcbiAgICAgICAgbG8gPSB+bG8gPj4+IDA7XG4gICAgICAgIGlmICgrK2xvID4gNDI5NDk2NzI5NSkge1xuICAgICAgICAgICAgbG8gPSAwO1xuICAgICAgICAgICAgaWYgKCsraGkgPiA0Mjk0OTY3Mjk1KVxuICAgICAgICAgICAgICAgIGhpID0gMDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbmV3IExvbmdCaXRzKGxvLCBoaSk7XG59O1xuXG4vKipcbiAqIENvbnN0cnVjdHMgbmV3IGxvbmcgYml0cyBmcm9tIGEgbnVtYmVyLCBsb25nIG9yIHN0cmluZy5cbiAqIEBwYXJhbSB7TG9uZ3xudW1iZXJ8c3RyaW5nfSB2YWx1ZSBWYWx1ZVxuICogQHJldHVybnMge3V0aWwuTG9uZ0JpdHN9IEluc3RhbmNlXG4gKi9cbkxvbmdCaXRzLmZyb20gPSBmdW5jdGlvbiBmcm9tKHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgcmV0dXJuIExvbmdCaXRzLmZyb21OdW1iZXIodmFsdWUpO1xuICAgIGlmICh1dGlsLmlzU3RyaW5nKHZhbHVlKSkge1xuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICAgICAgICBpZiAodXRpbC5Mb25nKVxuICAgICAgICAgICAgdmFsdWUgPSB1dGlsLkxvbmcuZnJvbVN0cmluZyh2YWx1ZSk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJldHVybiBMb25nQml0cy5mcm9tTnVtYmVyKHBhcnNlSW50KHZhbHVlLCAxMCkpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWUubG93IHx8IHZhbHVlLmhpZ2ggPyBuZXcgTG9uZ0JpdHModmFsdWUubG93ID4+PiAwLCB2YWx1ZS5oaWdoID4+PiAwKSA6IHplcm87XG59O1xuXG4vKipcbiAqIENvbnZlcnRzIHRoaXMgbG9uZyBiaXRzIHRvIGEgcG9zc2libHkgdW5zYWZlIEphdmFTY3JpcHQgbnVtYmVyLlxuICogQHBhcmFtIHtib29sZWFufSBbdW5zaWduZWQ9ZmFsc2VdIFdoZXRoZXIgdW5zaWduZWQgb3Igbm90XG4gKiBAcmV0dXJucyB7bnVtYmVyfSBQb3NzaWJseSB1bnNhZmUgbnVtYmVyXG4gKi9cbkxvbmdCaXRzLnByb3RvdHlwZS50b051bWJlciA9IGZ1bmN0aW9uIHRvTnVtYmVyKHVuc2lnbmVkKSB7XG4gICAgaWYgKCF1bnNpZ25lZCAmJiB0aGlzLmhpID4+PiAzMSkge1xuICAgICAgICB2YXIgbG8gPSB+dGhpcy5sbyArIDEgPj4+IDAsXG4gICAgICAgICAgICBoaSA9IH50aGlzLmhpICAgICA+Pj4gMDtcbiAgICAgICAgaWYgKCFsbylcbiAgICAgICAgICAgIGhpID0gaGkgKyAxID4+PiAwO1xuICAgICAgICByZXR1cm4gLShsbyArIGhpICogNDI5NDk2NzI5Nik7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmxvICsgdGhpcy5oaSAqIDQyOTQ5NjcyOTY7XG59O1xuXG4vKipcbiAqIENvbnZlcnRzIHRoaXMgbG9uZyBiaXRzIHRvIGEgbG9uZy5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW3Vuc2lnbmVkPWZhbHNlXSBXaGV0aGVyIHVuc2lnbmVkIG9yIG5vdFxuICogQHJldHVybnMge0xvbmd9IExvbmdcbiAqL1xuTG9uZ0JpdHMucHJvdG90eXBlLnRvTG9uZyA9IGZ1bmN0aW9uIHRvTG9uZyh1bnNpZ25lZCkge1xuICAgIHJldHVybiB1dGlsLkxvbmdcbiAgICAgICAgPyBuZXcgdXRpbC5Mb25nKHRoaXMubG8gfCAwLCB0aGlzLmhpIHwgMCwgQm9vbGVhbih1bnNpZ25lZCkpXG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgICAgIDogeyBsb3c6IHRoaXMubG8gfCAwLCBoaWdoOiB0aGlzLmhpIHwgMCwgdW5zaWduZWQ6IEJvb2xlYW4odW5zaWduZWQpIH07XG59O1xuXG52YXIgY2hhckNvZGVBdCA9IFN0cmluZy5wcm90b3R5cGUuY2hhckNvZGVBdDtcblxuLyoqXG4gKiBDb25zdHJ1Y3RzIG5ldyBsb25nIGJpdHMgZnJvbSB0aGUgc3BlY2lmaWVkIDggY2hhcmFjdGVycyBsb25nIGhhc2guXG4gKiBAcGFyYW0ge3N0cmluZ30gaGFzaCBIYXNoXG4gKiBAcmV0dXJucyB7dXRpbC5Mb25nQml0c30gQml0c1xuICovXG5Mb25nQml0cy5mcm9tSGFzaCA9IGZ1bmN0aW9uIGZyb21IYXNoKGhhc2gpIHtcbiAgICBpZiAoaGFzaCA9PT0gemVyb0hhc2gpXG4gICAgICAgIHJldHVybiB6ZXJvO1xuICAgIHJldHVybiBuZXcgTG9uZ0JpdHMoXG4gICAgICAgICggY2hhckNvZGVBdC5jYWxsKGhhc2gsIDApXG4gICAgICAgIHwgY2hhckNvZGVBdC5jYWxsKGhhc2gsIDEpIDw8IDhcbiAgICAgICAgfCBjaGFyQ29kZUF0LmNhbGwoaGFzaCwgMikgPDwgMTZcbiAgICAgICAgfCBjaGFyQ29kZUF0LmNhbGwoaGFzaCwgMykgPDwgMjQpID4+PiAwXG4gICAgLFxuICAgICAgICAoIGNoYXJDb2RlQXQuY2FsbChoYXNoLCA0KVxuICAgICAgICB8IGNoYXJDb2RlQXQuY2FsbChoYXNoLCA1KSA8PCA4XG4gICAgICAgIHwgY2hhckNvZGVBdC5jYWxsKGhhc2gsIDYpIDw8IDE2XG4gICAgICAgIHwgY2hhckNvZGVBdC5jYWxsKGhhc2gsIDcpIDw8IDI0KSA+Pj4gMFxuICAgICk7XG59O1xuXG4vKipcbiAqIENvbnZlcnRzIHRoaXMgbG9uZyBiaXRzIHRvIGEgOCBjaGFyYWN0ZXJzIGxvbmcgaGFzaC5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IEhhc2hcbiAqL1xuTG9uZ0JpdHMucHJvdG90eXBlLnRvSGFzaCA9IGZ1bmN0aW9uIHRvSGFzaCgpIHtcbiAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShcbiAgICAgICAgdGhpcy5sbyAgICAgICAgJiAyNTUsXG4gICAgICAgIHRoaXMubG8gPj4+IDggICYgMjU1LFxuICAgICAgICB0aGlzLmxvID4+PiAxNiAmIDI1NSxcbiAgICAgICAgdGhpcy5sbyA+Pj4gMjQgICAgICAsXG4gICAgICAgIHRoaXMuaGkgICAgICAgICYgMjU1LFxuICAgICAgICB0aGlzLmhpID4+PiA4ICAmIDI1NSxcbiAgICAgICAgdGhpcy5oaSA+Pj4gMTYgJiAyNTUsXG4gICAgICAgIHRoaXMuaGkgPj4+IDI0XG4gICAgKTtcbn07XG5cbi8qKlxuICogWmlnLXphZyBlbmNvZGVzIHRoaXMgbG9uZyBiaXRzLlxuICogQHJldHVybnMge3V0aWwuTG9uZ0JpdHN9IGB0aGlzYFxuICovXG5Mb25nQml0cy5wcm90b3R5cGUuenpFbmNvZGUgPSBmdW5jdGlvbiB6ekVuY29kZSgpIHtcbiAgICB2YXIgbWFzayA9ICAgdGhpcy5oaSA+PiAzMTtcbiAgICB0aGlzLmhpICA9ICgodGhpcy5oaSA8PCAxIHwgdGhpcy5sbyA+Pj4gMzEpIF4gbWFzaykgPj4+IDA7XG4gICAgdGhpcy5sbyAgPSAoIHRoaXMubG8gPDwgMSAgICAgICAgICAgICAgICAgICBeIG1hc2spID4+PiAwO1xuICAgIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBaaWctemFnIGRlY29kZXMgdGhpcyBsb25nIGJpdHMuXG4gKiBAcmV0dXJucyB7dXRpbC5Mb25nQml0c30gYHRoaXNgXG4gKi9cbkxvbmdCaXRzLnByb3RvdHlwZS56ekRlY29kZSA9IGZ1bmN0aW9uIHp6RGVjb2RlKCkge1xuICAgIHZhciBtYXNrID0gLSh0aGlzLmxvICYgMSk7XG4gICAgdGhpcy5sbyAgPSAoKHRoaXMubG8gPj4+IDEgfCB0aGlzLmhpIDw8IDMxKSBeIG1hc2spID4+PiAwO1xuICAgIHRoaXMuaGkgID0gKCB0aGlzLmhpID4+PiAxICAgICAgICAgICAgICAgICAgXiBtYXNrKSA+Pj4gMDtcbiAgICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgbGVuZ3RoIG9mIHRoaXMgbG9uZ2JpdHMgd2hlbiBlbmNvZGVkIGFzIGEgdmFyaW50LlxuICogQHJldHVybnMge251bWJlcn0gTGVuZ3RoXG4gKi9cbkxvbmdCaXRzLnByb3RvdHlwZS5sZW5ndGggPSBmdW5jdGlvbiBsZW5ndGgoKSB7XG4gICAgdmFyIHBhcnQwID0gIHRoaXMubG8sXG4gICAgICAgIHBhcnQxID0gKHRoaXMubG8gPj4+IDI4IHwgdGhpcy5oaSA8PCA0KSA+Pj4gMCxcbiAgICAgICAgcGFydDIgPSAgdGhpcy5oaSA+Pj4gMjQ7XG4gICAgcmV0dXJuIHBhcnQyID09PSAwXG4gICAgICAgICA/IHBhcnQxID09PSAwXG4gICAgICAgICAgID8gcGFydDAgPCAxNjM4NFxuICAgICAgICAgICAgID8gcGFydDAgPCAxMjggPyAxIDogMlxuICAgICAgICAgICAgIDogcGFydDAgPCAyMDk3MTUyID8gMyA6IDRcbiAgICAgICAgICAgOiBwYXJ0MSA8IDE2Mzg0XG4gICAgICAgICAgICAgPyBwYXJ0MSA8IDEyOCA/IDUgOiA2XG4gICAgICAgICAgICAgOiBwYXJ0MSA8IDIwOTcxNTIgPyA3IDogOFxuICAgICAgICAgOiBwYXJ0MiA8IDEyOCA/IDkgOiAxMDtcbn07XG4iLCAiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgdXRpbCA9IGV4cG9ydHM7XG5cbi8vIHVzZWQgdG8gcmV0dXJuIGEgUHJvbWlzZSB3aGVyZSBjYWxsYmFjayBpcyBvbWl0dGVkXG51dGlsLmFzUHJvbWlzZSA9IHJlcXVpcmUoXCJAcHJvdG9idWZqcy9hc3Byb21pc2VcIik7XG5cbi8vIGNvbnZlcnRzIHRvIC8gZnJvbSBiYXNlNjQgZW5jb2RlZCBzdHJpbmdzXG51dGlsLmJhc2U2NCA9IHJlcXVpcmUoXCJAcHJvdG9idWZqcy9iYXNlNjRcIik7XG5cbi8vIGJhc2UgY2xhc3Mgb2YgcnBjLlNlcnZpY2VcbnV0aWwuRXZlbnRFbWl0dGVyID0gcmVxdWlyZShcIkBwcm90b2J1ZmpzL2V2ZW50ZW1pdHRlclwiKTtcblxuLy8gZmxvYXQgaGFuZGxpbmcgYWNjcm9zcyBicm93c2Vyc1xudXRpbC5mbG9hdCA9IHJlcXVpcmUoXCJAcHJvdG9idWZqcy9mbG9hdFwiKTtcblxuLy8gcmVxdWlyZXMgbW9kdWxlcyBvcHRpb25hbGx5IGFuZCBoaWRlcyB0aGUgY2FsbCBmcm9tIGJ1bmRsZXJzXG51dGlsLmlucXVpcmUgPSByZXF1aXJlKFwiQHByb3RvYnVmanMvaW5xdWlyZVwiKTtcblxuLy8gY29udmVydHMgdG8gLyBmcm9tIHV0ZjggZW5jb2RlZCBzdHJpbmdzXG51dGlsLnV0ZjggPSByZXF1aXJlKFwiQHByb3RvYnVmanMvdXRmOFwiKTtcblxuLy8gcHJvdmlkZXMgYSBub2RlLWxpa2UgYnVmZmVyIHBvb2wgaW4gdGhlIGJyb3dzZXJcbnV0aWwucG9vbCA9IHJlcXVpcmUoXCJAcHJvdG9idWZqcy9wb29sXCIpO1xuXG4vLyB1dGlsaXR5IHRvIHdvcmsgd2l0aCB0aGUgbG93IGFuZCBoaWdoIGJpdHMgb2YgYSA2NCBiaXQgdmFsdWVcbnV0aWwuTG9uZ0JpdHMgPSByZXF1aXJlKFwiLi9sb25nYml0c1wiKTtcblxuLyoqXG4gKiBXaGV0aGVyIHJ1bm5pbmcgd2l0aGluIG5vZGUgb3Igbm90LlxuICogQG1lbWJlcm9mIHV0aWxcbiAqIEB0eXBlIHtib29sZWFufVxuICovXG51dGlsLmlzTm9kZSA9IEJvb2xlYW4odHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIlxuICAgICAgICAgICAgICAgICAgICYmIGdsb2JhbFxuICAgICAgICAgICAgICAgICAgICYmIGdsb2JhbC5wcm9jZXNzXG4gICAgICAgICAgICAgICAgICAgJiYgZ2xvYmFsLnByb2Nlc3MudmVyc2lvbnNcbiAgICAgICAgICAgICAgICAgICAmJiBnbG9iYWwucHJvY2Vzcy52ZXJzaW9ucy5ub2RlKTtcblxuLyoqXG4gKiBHbG9iYWwgb2JqZWN0IHJlZmVyZW5jZS5cbiAqIEBtZW1iZXJvZiB1dGlsXG4gKiBAdHlwZSB7T2JqZWN0fVxuICovXG51dGlsLmdsb2JhbCA9IHV0aWwuaXNOb2RlICYmIGdsb2JhbFxuICAgICAgICAgICB8fCB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHdpbmRvd1xuICAgICAgICAgICB8fCB0eXBlb2Ygc2VsZiAgICE9PSBcInVuZGVmaW5lZFwiICYmIHNlbGZcbiAgICAgICAgICAgfHwgdGhpczsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1pbnZhbGlkLXRoaXNcblxuLyoqXG4gKiBBbiBpbW11YWJsZSBlbXB0eSBhcnJheS5cbiAqIEBtZW1iZXJvZiB1dGlsXG4gKiBAdHlwZSB7QXJyYXkuPCo+fVxuICogQGNvbnN0XG4gKi9cbnV0aWwuZW1wdHlBcnJheSA9IE9iamVjdC5mcmVlemUgPyBPYmplY3QuZnJlZXplKFtdKSA6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIFtdOyAvLyB1c2VkIG9uIHByb3RvdHlwZXNcblxuLyoqXG4gKiBBbiBpbW11dGFibGUgZW1wdHkgb2JqZWN0LlxuICogQHR5cGUge09iamVjdH1cbiAqIEBjb25zdFxuICovXG51dGlsLmVtcHR5T2JqZWN0ID0gT2JqZWN0LmZyZWV6ZSA/IE9iamVjdC5mcmVlemUoe30pIDogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8ge307IC8vIHVzZWQgb24gcHJvdG90eXBlc1xuXG4vKipcbiAqIFRlc3RzIGlmIHRoZSBzcGVjaWZpZWQgdmFsdWUgaXMgYW4gaW50ZWdlci5cbiAqIEBmdW5jdGlvblxuICogQHBhcmFtIHsqfSB2YWx1ZSBWYWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gYHRydWVgIGlmIHRoZSB2YWx1ZSBpcyBhbiBpbnRlZ2VyXG4gKi9cbnV0aWwuaXNJbnRlZ2VyID0gTnVtYmVyLmlzSW50ZWdlciB8fCAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbiBpc0ludGVnZXIodmFsdWUpIHtcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSBcIm51bWJlclwiICYmIGlzRmluaXRlKHZhbHVlKSAmJiBNYXRoLmZsb29yKHZhbHVlKSA9PT0gdmFsdWU7XG59O1xuXG4vKipcbiAqIFRlc3RzIGlmIHRoZSBzcGVjaWZpZWQgdmFsdWUgaXMgYSBzdHJpbmcuXG4gKiBAcGFyYW0geyp9IHZhbHVlIFZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBgdHJ1ZWAgaWYgdGhlIHZhbHVlIGlzIGEgc3RyaW5nXG4gKi9cbnV0aWwuaXNTdHJpbmcgPSBmdW5jdGlvbiBpc1N0cmluZyh2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgfHwgdmFsdWUgaW5zdGFuY2VvZiBTdHJpbmc7XG59O1xuXG4vKipcbiAqIFRlc3RzIGlmIHRoZSBzcGVjaWZpZWQgdmFsdWUgaXMgYSBub24tbnVsbCBvYmplY3QuXG4gKiBAcGFyYW0geyp9IHZhbHVlIFZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBgdHJ1ZWAgaWYgdGhlIHZhbHVlIGlzIGEgbm9uLW51bGwgb2JqZWN0XG4gKi9cbnV0aWwuaXNPYmplY3QgPSBmdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCI7XG59O1xuXG4vKipcbiAqIENoZWNrcyBpZiBhIHByb3BlcnR5IG9uIGEgbWVzc2FnZSBpcyBjb25zaWRlcmVkIHRvIGJlIHByZXNlbnQuXG4gKiBUaGlzIGlzIGFuIGFsaWFzIG9mIHtAbGluayB1dGlsLmlzU2V0fS5cbiAqIEBmdW5jdGlvblxuICogQHBhcmFtIHtPYmplY3R9IG9iaiBQbGFpbiBvYmplY3Qgb3IgbWVzc2FnZSBpbnN0YW5jZVxuICogQHBhcmFtIHtzdHJpbmd9IHByb3AgUHJvcGVydHkgbmFtZVxuICogQHJldHVybnMge2Jvb2xlYW59IGB0cnVlYCBpZiBjb25zaWRlcmVkIHRvIGJlIHByZXNlbnQsIG90aGVyd2lzZSBgZmFsc2VgXG4gKi9cbnV0aWwuaXNzZXQgPVxuXG4vKipcbiAqIENoZWNrcyBpZiBhIHByb3BlcnR5IG9uIGEgbWVzc2FnZSBpcyBjb25zaWRlcmVkIHRvIGJlIHByZXNlbnQuXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqIFBsYWluIG9iamVjdCBvciBtZXNzYWdlIGluc3RhbmNlXG4gKiBAcGFyYW0ge3N0cmluZ30gcHJvcCBQcm9wZXJ0eSBuYW1lXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gYHRydWVgIGlmIGNvbnNpZGVyZWQgdG8gYmUgcHJlc2VudCwgb3RoZXJ3aXNlIGBmYWxzZWBcbiAqL1xudXRpbC5pc1NldCA9IGZ1bmN0aW9uIGlzU2V0KG9iaiwgcHJvcCkge1xuICAgIHZhciB2YWx1ZSA9IG9ialtwcm9wXTtcbiAgICBpZiAodmFsdWUgIT0gbnVsbCAmJiBvYmouaGFzT3duUHJvcGVydHkocHJvcCkpIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgZXFlcWVxLCBuby1wcm90b3R5cGUtYnVpbHRpbnNcbiAgICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSAhPT0gXCJvYmplY3RcIiB8fCAoQXJyYXkuaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZS5sZW5ndGggOiBPYmplY3Qua2V5cyh2YWx1ZSkubGVuZ3RoKSA+IDA7XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcblxuLyoqXG4gKiBBbnkgY29tcGF0aWJsZSBCdWZmZXIgaW5zdGFuY2UuXG4gKiBUaGlzIGlzIGEgbWluaW1hbCBzdGFuZC1hbG9uZSBkZWZpbml0aW9uIG9mIGEgQnVmZmVyIGluc3RhbmNlLiBUaGUgYWN0dWFsIHR5cGUgaXMgdGhhdCBleHBvcnRlZCBieSBub2RlJ3MgdHlwaW5ncy5cbiAqIEBpbnRlcmZhY2UgQnVmZmVyXG4gKiBAZXh0ZW5kcyBVaW50OEFycmF5XG4gKi9cblxuLyoqXG4gKiBOb2RlJ3MgQnVmZmVyIGNsYXNzIGlmIGF2YWlsYWJsZS5cbiAqIEB0eXBlIHtDb25zdHJ1Y3RvcjxCdWZmZXI+fVxuICovXG51dGlsLkJ1ZmZlciA9IChmdW5jdGlvbigpIHtcbiAgICB0cnkge1xuICAgICAgICB2YXIgQnVmZmVyID0gdXRpbC5pbnF1aXJlKFwiYnVmZmVyXCIpLkJ1ZmZlcjtcbiAgICAgICAgLy8gcmVmdXNlIHRvIHVzZSBub24tbm9kZSBidWZmZXJzIGlmIG5vdCBleHBsaWNpdGx5IGFzc2lnbmVkIChwZXJmIHJlYXNvbnMpOlxuICAgICAgICByZXR1cm4gQnVmZmVyLnByb3RvdHlwZS51dGY4V3JpdGUgPyBCdWZmZXIgOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBudWxsO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufSkoKTtcblxuLy8gSW50ZXJuYWwgYWxpYXMgb2Ygb3IgcG9seWZ1bGwgZm9yIEJ1ZmZlci5mcm9tLlxudXRpbC5fQnVmZmVyX2Zyb20gPSBudWxsO1xuXG4vLyBJbnRlcm5hbCBhbGlhcyBvZiBvciBwb2x5ZmlsbCBmb3IgQnVmZmVyLmFsbG9jVW5zYWZlLlxudXRpbC5fQnVmZmVyX2FsbG9jVW5zYWZlID0gbnVsbDtcblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGJ1ZmZlciBvZiB3aGF0ZXZlciB0eXBlIHN1cHBvcnRlZCBieSB0aGUgZW52aXJvbm1lbnQuXG4gKiBAcGFyYW0ge251bWJlcnxudW1iZXJbXX0gW3NpemVPckFycmF5PTBdIEJ1ZmZlciBzaXplIG9yIG51bWJlciBhcnJheVxuICogQHJldHVybnMge1VpbnQ4QXJyYXl8QnVmZmVyfSBCdWZmZXJcbiAqL1xudXRpbC5uZXdCdWZmZXIgPSBmdW5jdGlvbiBuZXdCdWZmZXIoc2l6ZU9yQXJyYXkpIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIHJldHVybiB0eXBlb2Ygc2l6ZU9yQXJyYXkgPT09IFwibnVtYmVyXCJcbiAgICAgICAgPyB1dGlsLkJ1ZmZlclxuICAgICAgICAgICAgPyB1dGlsLl9CdWZmZXJfYWxsb2NVbnNhZmUoc2l6ZU9yQXJyYXkpXG4gICAgICAgICAgICA6IG5ldyB1dGlsLkFycmF5KHNpemVPckFycmF5KVxuICAgICAgICA6IHV0aWwuQnVmZmVyXG4gICAgICAgICAgICA/IHV0aWwuX0J1ZmZlcl9mcm9tKHNpemVPckFycmF5KVxuICAgICAgICAgICAgOiB0eXBlb2YgVWludDhBcnJheSA9PT0gXCJ1bmRlZmluZWRcIlxuICAgICAgICAgICAgICAgID8gc2l6ZU9yQXJyYXlcbiAgICAgICAgICAgICAgICA6IG5ldyBVaW50OEFycmF5KHNpemVPckFycmF5KTtcbn07XG5cbi8qKlxuICogQXJyYXkgaW1wbGVtZW50YXRpb24gdXNlZCBpbiB0aGUgYnJvd3Nlci4gYFVpbnQ4QXJyYXlgIGlmIHN1cHBvcnRlZCwgb3RoZXJ3aXNlIGBBcnJheWAuXG4gKiBAdHlwZSB7Q29uc3RydWN0b3I8VWludDhBcnJheT59XG4gKi9cbnV0aWwuQXJyYXkgPSB0eXBlb2YgVWludDhBcnJheSAhPT0gXCJ1bmRlZmluZWRcIiA/IFVpbnQ4QXJyYXkgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gOiBBcnJheTtcblxuLyoqXG4gKiBBbnkgY29tcGF0aWJsZSBMb25nIGluc3RhbmNlLlxuICogVGhpcyBpcyBhIG1pbmltYWwgc3RhbmQtYWxvbmUgZGVmaW5pdGlvbiBvZiBhIExvbmcgaW5zdGFuY2UuIFRoZSBhY3R1YWwgdHlwZSBpcyB0aGF0IGV4cG9ydGVkIGJ5IGxvbmcuanMuXG4gKiBAaW50ZXJmYWNlIExvbmdcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBsb3cgTG93IGJpdHNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBoaWdoIEhpZ2ggYml0c1xuICogQHByb3BlcnR5IHtib29sZWFufSB1bnNpZ25lZCBXaGV0aGVyIHVuc2lnbmVkIG9yIG5vdFxuICovXG5cbi8qKlxuICogTG9uZy5qcydzIExvbmcgY2xhc3MgaWYgYXZhaWxhYmxlLlxuICogQHR5cGUge0NvbnN0cnVjdG9yPExvbmc+fVxuICovXG51dGlsLkxvbmcgPSAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyB1dGlsLmdsb2JhbC5kY29kZUlPICYmIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIHV0aWwuZ2xvYmFsLmRjb2RlSU8uTG9uZ1xuICAgICAgICAgfHwgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gdXRpbC5nbG9iYWwuTG9uZ1xuICAgICAgICAgfHwgdXRpbC5pbnF1aXJlKFwibG9uZ1wiKTtcblxuLyoqXG4gKiBSZWd1bGFyIGV4cHJlc3Npb24gdXNlZCB0byB2ZXJpZnkgMiBiaXQgKGBib29sYCkgbWFwIGtleXMuXG4gKiBAdHlwZSB7UmVnRXhwfVxuICogQGNvbnN0XG4gKi9cbnV0aWwua2V5MlJlID0gL150cnVlfGZhbHNlfDB8MSQvO1xuXG4vKipcbiAqIFJlZ3VsYXIgZXhwcmVzc2lvbiB1c2VkIHRvIHZlcmlmeSAzMiBiaXQgKGBpbnQzMmAgZXRjLikgbWFwIGtleXMuXG4gKiBAdHlwZSB7UmVnRXhwfVxuICogQGNvbnN0XG4gKi9cbnV0aWwua2V5MzJSZSA9IC9eLT8oPzowfFsxLTldWzAtOV0qKSQvO1xuXG4vKipcbiAqIFJlZ3VsYXIgZXhwcmVzc2lvbiB1c2VkIHRvIHZlcmlmeSA2NCBiaXQgKGBpbnQ2NGAgZXRjLikgbWFwIGtleXMuXG4gKiBAdHlwZSB7UmVnRXhwfVxuICogQGNvbnN0XG4gKi9cbnV0aWwua2V5NjRSZSA9IC9eKD86W1xcXFx4MDAtXFxcXHhmZl17OH18LT8oPzowfFsxLTldWzAtOV0qKSkkLztcblxuLyoqXG4gKiBDb252ZXJ0cyBhIG51bWJlciBvciBsb25nIHRvIGFuIDggY2hhcmFjdGVycyBsb25nIGhhc2ggc3RyaW5nLlxuICogQHBhcmFtIHtMb25nfG51bWJlcn0gdmFsdWUgVmFsdWUgdG8gY29udmVydFxuICogQHJldHVybnMge3N0cmluZ30gSGFzaFxuICovXG51dGlsLmxvbmdUb0hhc2ggPSBmdW5jdGlvbiBsb25nVG9IYXNoKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlXG4gICAgICAgID8gdXRpbC5Mb25nQml0cy5mcm9tKHZhbHVlKS50b0hhc2goKVxuICAgICAgICA6IHV0aWwuTG9uZ0JpdHMuemVyb0hhc2g7XG59O1xuXG4vKipcbiAqIENvbnZlcnRzIGFuIDggY2hhcmFjdGVycyBsb25nIGhhc2ggc3RyaW5nIHRvIGEgbG9uZyBvciBudW1iZXIuXG4gKiBAcGFyYW0ge3N0cmluZ30gaGFzaCBIYXNoXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFt1bnNpZ25lZD1mYWxzZV0gV2hldGhlciB1bnNpZ25lZCBvciBub3RcbiAqIEByZXR1cm5zIHtMb25nfG51bWJlcn0gT3JpZ2luYWwgdmFsdWVcbiAqL1xudXRpbC5sb25nRnJvbUhhc2ggPSBmdW5jdGlvbiBsb25nRnJvbUhhc2goaGFzaCwgdW5zaWduZWQpIHtcbiAgICB2YXIgYml0cyA9IHV0aWwuTG9uZ0JpdHMuZnJvbUhhc2goaGFzaCk7XG4gICAgaWYgKHV0aWwuTG9uZylcbiAgICAgICAgcmV0dXJuIHV0aWwuTG9uZy5mcm9tQml0cyhiaXRzLmxvLCBiaXRzLmhpLCB1bnNpZ25lZCk7XG4gICAgcmV0dXJuIGJpdHMudG9OdW1iZXIoQm9vbGVhbih1bnNpZ25lZCkpO1xufTtcblxuLyoqXG4gKiBNZXJnZXMgdGhlIHByb3BlcnRpZXMgb2YgdGhlIHNvdXJjZSBvYmplY3QgaW50byB0aGUgZGVzdGluYXRpb24gb2JqZWN0LlxuICogQG1lbWJlcm9mIHV0aWxcbiAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IGRzdCBEZXN0aW5hdGlvbiBvYmplY3RcbiAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IHNyYyBTb3VyY2Ugb2JqZWN0XG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtpZk5vdFNldD1mYWxzZV0gTWVyZ2VzIG9ubHkgaWYgdGhlIGtleSBpcyBub3QgYWxyZWFkeSBzZXRcbiAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gRGVzdGluYXRpb24gb2JqZWN0XG4gKi9cbmZ1bmN0aW9uIG1lcmdlKGRzdCwgc3JjLCBpZk5vdFNldCkgeyAvLyB1c2VkIGJ5IGNvbnZlcnRlcnNcbiAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMoc3JjKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICBpZiAoZHN0W2tleXNbaV1dID09PSB1bmRlZmluZWQgfHwgIWlmTm90U2V0KVxuICAgICAgICAgICAgZHN0W2tleXNbaV1dID0gc3JjW2tleXNbaV1dO1xuICAgIHJldHVybiBkc3Q7XG59XG5cbnV0aWwubWVyZ2UgPSBtZXJnZTtcblxuLyoqXG4gKiBDb252ZXJ0cyB0aGUgZmlyc3QgY2hhcmFjdGVyIG9mIGEgc3RyaW5nIHRvIGxvd2VyIGNhc2UuXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyIFN0cmluZyB0byBjb252ZXJ0XG4gKiBAcmV0dXJucyB7c3RyaW5nfSBDb252ZXJ0ZWQgc3RyaW5nXG4gKi9cbnV0aWwubGNGaXJzdCA9IGZ1bmN0aW9uIGxjRmlyc3Qoc3RyKSB7XG4gICAgcmV0dXJuIHN0ci5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKSArIHN0ci5zdWJzdHJpbmcoMSk7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBjdXN0b20gZXJyb3IgY29uc3RydWN0b3IuXG4gKiBAbWVtYmVyb2YgdXRpbFxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgRXJyb3IgbmFtZVxuICogQHJldHVybnMge0NvbnN0cnVjdG9yPEVycm9yPn0gQ3VzdG9tIGVycm9yIGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIG5ld0Vycm9yKG5hbWUpIHtcblxuICAgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKG1lc3NhZ2UsIHByb3BlcnRpZXMpIHtcblxuICAgICAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgQ3VzdG9tRXJyb3IpKVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBDdXN0b21FcnJvcihtZXNzYWdlLCBwcm9wZXJ0aWVzKTtcblxuICAgICAgICAvLyBFcnJvci5jYWxsKHRoaXMsIG1lc3NhZ2UpO1xuICAgICAgICAvLyBeIGp1c3QgcmV0dXJucyBhIG5ldyBlcnJvciBpbnN0YW5jZSBiZWNhdXNlIHRoZSBjdG9yIGNhbiBiZSBjYWxsZWQgYXMgYSBmdW5jdGlvblxuXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1lc3NhZ2VcIiwgeyBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbWVzc2FnZTsgfSB9KTtcblxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgICAgICBpZiAoRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UpIC8vIG5vZGVcbiAgICAgICAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIEN1c3RvbUVycm9yKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic3RhY2tcIiwgeyB2YWx1ZTogbmV3IEVycm9yKCkuc3RhY2sgfHwgXCJcIiB9KTtcblxuICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgIG1lcmdlKHRoaXMsIHByb3BlcnRpZXMpO1xuICAgIH1cblxuICAgIEN1c3RvbUVycm9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlLCB7XG4gICAgICAgIGNvbnN0cnVjdG9yOiB7XG4gICAgICAgICAgICB2YWx1ZTogQ3VzdG9tRXJyb3IsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICBuYW1lOiB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsgcmV0dXJuIG5hbWU7IH0sXG4gICAgICAgICAgICBzZXQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgLy8gY29uZmlndXJhYmxlOiBmYWxzZSB3b3VsZCBhY2N1cmF0ZWx5IHByZXNlcnZlIHRoZSBiZWhhdmlvciBvZlxuICAgICAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBidXQgSSdtIGd1ZXNzaW5nIHRoYXQgd2FzIG5vdCBpbnRlbnRpb25hbC5cbiAgICAgICAgICAgIC8vIEZvciBhbiBhY3R1YWwgZXJyb3Igc3ViY2xhc3MsIHRoaXMgcHJvcGVydHkgd291bGRcbiAgICAgICAgICAgIC8vIGJlIGNvbmZpZ3VyYWJsZS5cbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgdG9TdHJpbmc6IHtcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiB2YWx1ZSgpIHsgcmV0dXJuIHRoaXMubmFtZSArIFwiOiBcIiArIHRoaXMubWVzc2FnZTsgfSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgIH0sXG4gICAgfSk7XG5cbiAgICByZXR1cm4gQ3VzdG9tRXJyb3I7XG59XG5cbnV0aWwubmV3RXJyb3IgPSBuZXdFcnJvcjtcblxuLyoqXG4gKiBDb25zdHJ1Y3RzIGEgbmV3IHByb3RvY29sIGVycm9yLlxuICogQGNsYXNzZGVzYyBFcnJvciBzdWJjbGFzcyBpbmRpY2F0aW5nIGEgcHJvdG9jb2wgc3BlY2lmYyBlcnJvci5cbiAqIEBtZW1iZXJvZiB1dGlsXG4gKiBAZXh0ZW5kcyBFcnJvclxuICogQHRlbXBsYXRlIFQgZXh0ZW5kcyBNZXNzYWdlPFQ+XG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIEVycm9yIG1lc3NhZ2VcbiAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IFtwcm9wZXJ0aWVzXSBBZGRpdGlvbmFsIHByb3BlcnRpZXNcbiAqIEBleGFtcGxlXG4gKiB0cnkge1xuICogICAgIE15TWVzc2FnZS5kZWNvZGUoc29tZUJ1ZmZlcik7IC8vIHRocm93cyBpZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAqIH0gY2F0Y2ggKGUpIHtcbiAqICAgICBpZiAoZSBpbnN0YW5jZW9mIFByb3RvY29sRXJyb3IgJiYgZS5pbnN0YW5jZSlcbiAqICAgICAgICAgY29uc29sZS5sb2coXCJkZWNvZGVkIHNvIGZhcjogXCIgKyBKU09OLnN0cmluZ2lmeShlLmluc3RhbmNlKSk7XG4gKiB9XG4gKi9cbnV0aWwuUHJvdG9jb2xFcnJvciA9IG5ld0Vycm9yKFwiUHJvdG9jb2xFcnJvclwiKTtcblxuLyoqXG4gKiBTbyBmYXIgZGVjb2RlZCBtZXNzYWdlIGluc3RhbmNlLlxuICogQG5hbWUgdXRpbC5Qcm90b2NvbEVycm9yI2luc3RhbmNlXG4gKiBAdHlwZSB7TWVzc2FnZTxUPn1cbiAqL1xuXG4vKipcbiAqIEEgT25lT2YgZ2V0dGVyIGFzIHJldHVybmVkIGJ5IHtAbGluayB1dGlsLm9uZU9mR2V0dGVyfS5cbiAqIEB0eXBlZGVmIE9uZU9mR2V0dGVyXG4gKiBAdHlwZSB7ZnVuY3Rpb259XG4gKiBAcmV0dXJucyB7c3RyaW5nfHVuZGVmaW5lZH0gU2V0IGZpZWxkIG5hbWUsIGlmIGFueVxuICovXG5cbi8qKlxuICogQnVpbGRzIGEgZ2V0dGVyIGZvciBhIG9uZW9mJ3MgcHJlc2VudCBmaWVsZCBuYW1lLlxuICogQHBhcmFtIHtzdHJpbmdbXX0gZmllbGROYW1lcyBGaWVsZCBuYW1lc1xuICogQHJldHVybnMge09uZU9mR2V0dGVyfSBVbmJvdW5kIGdldHRlclxuICovXG51dGlsLm9uZU9mR2V0dGVyID0gZnVuY3Rpb24gZ2V0T25lT2YoZmllbGROYW1lcykge1xuICAgIHZhciBmaWVsZE1hcCA9IHt9O1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmllbGROYW1lcy5sZW5ndGg7ICsraSlcbiAgICAgICAgZmllbGRNYXBbZmllbGROYW1lc1tpXV0gPSAxO1xuXG4gICAgLyoqXG4gICAgICogQHJldHVybnMge3N0cmluZ3x1bmRlZmluZWR9IFNldCBmaWVsZCBuYW1lLCBpZiBhbnlcbiAgICAgKiBAdGhpcyBPYmplY3RcbiAgICAgKiBAaWdub3JlXG4gICAgICovXG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGNvbnNpc3RlbnQtcmV0dXJuXG4gICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyh0aGlzKSwgaSA9IGtleXMubGVuZ3RoIC0gMTsgaSA+IC0xOyAtLWkpXG4gICAgICAgICAgICBpZiAoZmllbGRNYXBba2V5c1tpXV0gPT09IDEgJiYgdGhpc1trZXlzW2ldXSAhPT0gdW5kZWZpbmVkICYmIHRoaXNba2V5c1tpXV0gIT09IG51bGwpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGtleXNbaV07XG4gICAgfTtcbn07XG5cbi8qKlxuICogQSBPbmVPZiBzZXR0ZXIgYXMgcmV0dXJuZWQgYnkge0BsaW5rIHV0aWwub25lT2ZTZXR0ZXJ9LlxuICogQHR5cGVkZWYgT25lT2ZTZXR0ZXJcbiAqIEB0eXBlIHtmdW5jdGlvbn1cbiAqIEBwYXJhbSB7c3RyaW5nfHVuZGVmaW5lZH0gdmFsdWUgRmllbGQgbmFtZVxuICogQHJldHVybnMge3VuZGVmaW5lZH1cbiAqL1xuXG4vKipcbiAqIEJ1aWxkcyBhIHNldHRlciBmb3IgYSBvbmVvZidzIHByZXNlbnQgZmllbGQgbmFtZS5cbiAqIEBwYXJhbSB7c3RyaW5nW119IGZpZWxkTmFtZXMgRmllbGQgbmFtZXNcbiAqIEByZXR1cm5zIHtPbmVPZlNldHRlcn0gVW5ib3VuZCBzZXR0ZXJcbiAqL1xudXRpbC5vbmVPZlNldHRlciA9IGZ1bmN0aW9uIHNldE9uZU9mKGZpZWxkTmFtZXMpIHtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIEZpZWxkIG5hbWVcbiAgICAgKiBAcmV0dXJucyB7dW5kZWZpbmVkfVxuICAgICAqIEB0aGlzIE9iamVjdFxuICAgICAqIEBpZ25vcmVcbiAgICAgKi9cbiAgICByZXR1cm4gZnVuY3Rpb24obmFtZSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZpZWxkTmFtZXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICBpZiAoZmllbGROYW1lc1tpXSAhPT0gbmFtZSlcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpc1tmaWVsZE5hbWVzW2ldXTtcbiAgICB9O1xufTtcblxuLyoqXG4gKiBEZWZhdWx0IGNvbnZlcnNpb24gb3B0aW9ucyB1c2VkIGZvciB7QGxpbmsgTWVzc2FnZSN0b0pTT059IGltcGxlbWVudGF0aW9ucy5cbiAqXG4gKiBUaGVzZSBvcHRpb25zIGFyZSBjbG9zZSB0byBwcm90bzMncyBKU09OIG1hcHBpbmcgd2l0aCB0aGUgZXhjZXB0aW9uIHRoYXQgaW50ZXJuYWwgdHlwZXMgbGlrZSBBbnkgYXJlIGhhbmRsZWQganVzdCBsaWtlIG1lc3NhZ2VzLiBNb3JlIHByZWNpc2VseTpcbiAqXG4gKiAtIExvbmdzIGJlY29tZSBzdHJpbmdzXG4gKiAtIEVudW1zIGJlY29tZSBzdHJpbmcga2V5c1xuICogLSBCeXRlcyBiZWNvbWUgYmFzZTY0IGVuY29kZWQgc3RyaW5nc1xuICogLSAoU3ViLSlNZXNzYWdlcyBiZWNvbWUgcGxhaW4gb2JqZWN0c1xuICogLSBNYXBzIGJlY29tZSBwbGFpbiBvYmplY3RzIHdpdGggYWxsIHN0cmluZyBrZXlzXG4gKiAtIFJlcGVhdGVkIGZpZWxkcyBiZWNvbWUgYXJyYXlzXG4gKiAtIE5hTiBhbmQgSW5maW5pdHkgZm9yIGZsb2F0IGFuZCBkb3VibGUgZmllbGRzIGJlY29tZSBzdHJpbmdzXG4gKlxuICogQHR5cGUge0lDb252ZXJzaW9uT3B0aW9uc31cbiAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vcHJvdG9jb2wtYnVmZmVycy9kb2NzL3Byb3RvMz9obD1lbiNqc29uXG4gKi9cbnV0aWwudG9KU09OT3B0aW9ucyA9IHtcbiAgICBsb25nczogU3RyaW5nLFxuICAgIGVudW1zOiBTdHJpbmcsXG4gICAgYnl0ZXM6IFN0cmluZyxcbiAgICBqc29uOiB0cnVlXG59O1xuXG4vLyBTZXRzIHVwIGJ1ZmZlciB1dGlsaXR5IGFjY29yZGluZyB0byB0aGUgZW52aXJvbm1lbnQgKGNhbGxlZCBpbiBpbmRleC1taW5pbWFsKVxudXRpbC5fY29uZmlndXJlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIEJ1ZmZlciA9IHV0aWwuQnVmZmVyO1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmICghQnVmZmVyKSB7XG4gICAgICAgIHV0aWwuX0J1ZmZlcl9mcm9tID0gdXRpbC5fQnVmZmVyX2FsbG9jVW5zYWZlID0gbnVsbDtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBiZWNhdXNlIG5vZGUgNC54IGJ1ZmZlcnMgYXJlIGluY29tcGF0aWJsZSAmIGltbXV0YWJsZVxuICAgIC8vIHNlZTogaHR0cHM6Ly9naXRodWIuY29tL2Rjb2RlSU8vcHJvdG9idWYuanMvcHVsbC82NjVcbiAgICB1dGlsLl9CdWZmZXJfZnJvbSA9IEJ1ZmZlci5mcm9tICE9PSBVaW50OEFycmF5LmZyb20gJiYgQnVmZmVyLmZyb20gfHxcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAgICAgZnVuY3Rpb24gQnVmZmVyX2Zyb20odmFsdWUsIGVuY29kaW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEJ1ZmZlcih2YWx1ZSwgZW5jb2RpbmcpO1xuICAgICAgICB9O1xuICAgIHV0aWwuX0J1ZmZlcl9hbGxvY1Vuc2FmZSA9IEJ1ZmZlci5hbGxvY1Vuc2FmZSB8fFxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgICAgICBmdW5jdGlvbiBCdWZmZXJfYWxsb2NVbnNhZmUoc2l6ZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBCdWZmZXIoc2l6ZSk7XG4gICAgICAgIH07XG59O1xuIiwgIlwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBXcml0ZXI7XG5cbnZhciB1dGlsICAgICAgPSByZXF1aXJlKFwiLi91dGlsL21pbmltYWxcIik7XG5cbnZhciBCdWZmZXJXcml0ZXI7IC8vIGN5Y2xpY1xuXG52YXIgTG9uZ0JpdHMgID0gdXRpbC5Mb25nQml0cyxcbiAgICBiYXNlNjQgICAgPSB1dGlsLmJhc2U2NCxcbiAgICB1dGY4ICAgICAgPSB1dGlsLnV0Zjg7XG5cbi8qKlxuICogQ29uc3RydWN0cyBhIG5ldyB3cml0ZXIgb3BlcmF0aW9uIGluc3RhbmNlLlxuICogQGNsYXNzZGVzYyBTY2hlZHVsZWQgd3JpdGVyIG9wZXJhdGlvbi5cbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtmdW5jdGlvbigqLCBVaW50OEFycmF5LCBudW1iZXIpfSBmbiBGdW5jdGlvbiB0byBjYWxsXG4gKiBAcGFyYW0ge251bWJlcn0gbGVuIFZhbHVlIGJ5dGUgbGVuZ3RoXG4gKiBAcGFyYW0geyp9IHZhbCBWYWx1ZSB0byB3cml0ZVxuICogQGlnbm9yZVxuICovXG5mdW5jdGlvbiBPcChmbiwgbGVuLCB2YWwpIHtcblxuICAgIC8qKlxuICAgICAqIEZ1bmN0aW9uIHRvIGNhbGwuXG4gICAgICogQHR5cGUge2Z1bmN0aW9uKFVpbnQ4QXJyYXksIG51bWJlciwgKil9XG4gICAgICovXG4gICAgdGhpcy5mbiA9IGZuO1xuXG4gICAgLyoqXG4gICAgICogVmFsdWUgYnl0ZSBsZW5ndGguXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmxlbiA9IGxlbjtcblxuICAgIC8qKlxuICAgICAqIE5leHQgb3BlcmF0aW9uLlxuICAgICAqIEB0eXBlIHtXcml0ZXIuT3B8dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHRoaXMubmV4dCA9IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIFZhbHVlIHRvIHdyaXRlLlxuICAgICAqIEB0eXBlIHsqfVxuICAgICAqL1xuICAgIHRoaXMudmFsID0gdmFsOyAvLyB0eXBlIHZhcmllc1xufVxuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZnVuY3Rpb24gbm9vcCgpIHt9IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tZW1wdHktZnVuY3Rpb25cblxuLyoqXG4gKiBDb25zdHJ1Y3RzIGEgbmV3IHdyaXRlciBzdGF0ZSBpbnN0YW5jZS5cbiAqIEBjbGFzc2Rlc2MgQ29waWVkIHdyaXRlciBzdGF0ZS5cbiAqIEBtZW1iZXJvZiBXcml0ZXJcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtXcml0ZXJ9IHdyaXRlciBXcml0ZXIgdG8gY29weSBzdGF0ZSBmcm9tXG4gKiBAaWdub3JlXG4gKi9cbmZ1bmN0aW9uIFN0YXRlKHdyaXRlcikge1xuXG4gICAgLyoqXG4gICAgICogQ3VycmVudCBoZWFkLlxuICAgICAqIEB0eXBlIHtXcml0ZXIuT3B9XG4gICAgICovXG4gICAgdGhpcy5oZWFkID0gd3JpdGVyLmhlYWQ7XG5cbiAgICAvKipcbiAgICAgKiBDdXJyZW50IHRhaWwuXG4gICAgICogQHR5cGUge1dyaXRlci5PcH1cbiAgICAgKi9cbiAgICB0aGlzLnRhaWwgPSB3cml0ZXIudGFpbDtcblxuICAgIC8qKlxuICAgICAqIEN1cnJlbnQgYnVmZmVyIGxlbmd0aC5cbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMubGVuID0gd3JpdGVyLmxlbjtcblxuICAgIC8qKlxuICAgICAqIE5leHQgc3RhdGUuXG4gICAgICogQHR5cGUge1N0YXRlfG51bGx9XG4gICAgICovXG4gICAgdGhpcy5uZXh0ID0gd3JpdGVyLnN0YXRlcztcbn1cblxuLyoqXG4gKiBDb25zdHJ1Y3RzIGEgbmV3IHdyaXRlciBpbnN0YW5jZS5cbiAqIEBjbGFzc2Rlc2MgV2lyZSBmb3JtYXQgd3JpdGVyIHVzaW5nIGBVaW50OEFycmF5YCBpZiBhdmFpbGFibGUsIG90aGVyd2lzZSBgQXJyYXlgLlxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIFdyaXRlcigpIHtcblxuICAgIC8qKlxuICAgICAqIEN1cnJlbnQgbGVuZ3RoLlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5sZW4gPSAwO1xuXG4gICAgLyoqXG4gICAgICogT3BlcmF0aW9ucyBoZWFkLlxuICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICovXG4gICAgdGhpcy5oZWFkID0gbmV3IE9wKG5vb3AsIDAsIDApO1xuXG4gICAgLyoqXG4gICAgICogT3BlcmF0aW9ucyB0YWlsXG4gICAgICogQHR5cGUge09iamVjdH1cbiAgICAgKi9cbiAgICB0aGlzLnRhaWwgPSB0aGlzLmhlYWQ7XG5cbiAgICAvKipcbiAgICAgKiBMaW5rZWQgZm9ya2VkIHN0YXRlcy5cbiAgICAgKiBAdHlwZSB7T2JqZWN0fG51bGx9XG4gICAgICovXG4gICAgdGhpcy5zdGF0ZXMgPSBudWxsO1xuXG4gICAgLy8gV2hlbiBhIHZhbHVlIGlzIHdyaXR0ZW4sIHRoZSB3cml0ZXIgY2FsY3VsYXRlcyBpdHMgYnl0ZSBsZW5ndGggYW5kIHB1dHMgaXQgaW50byBhIGxpbmtlZFxuICAgIC8vIGxpc3Qgb2Ygb3BlcmF0aW9ucyB0byBwZXJmb3JtIHdoZW4gZmluaXNoKCkgaXMgY2FsbGVkLiBUaGlzIGJvdGggYWxsb3dzIHVzIHRvIGFsbG9jYXRlXG4gICAgLy8gYnVmZmVycyBvZiB0aGUgZXhhY3QgcmVxdWlyZWQgc2l6ZSBhbmQgcmVkdWNlcyB0aGUgYW1vdW50IG9mIHdvcmsgd2UgaGF2ZSB0byBkbyBjb21wYXJlZFxuICAgIC8vIHRvIGZpcnN0IGNhbGN1bGF0aW5nIG92ZXIgb2JqZWN0cyBhbmQgdGhlbiBlbmNvZGluZyBvdmVyIG9iamVjdHMuIEluIG91ciBjYXNlLCB0aGUgZW5jb2RpbmdcbiAgICAvLyBwYXJ0IGlzIGp1c3QgYSBsaW5rZWQgbGlzdCB3YWxrIGNhbGxpbmcgb3BlcmF0aW9ucyB3aXRoIGFscmVhZHkgcHJlcGFyZWQgdmFsdWVzLlxufVxuXG52YXIgY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKCkge1xuICAgIHJldHVybiB1dGlsLkJ1ZmZlclxuICAgICAgICA/IGZ1bmN0aW9uIGNyZWF0ZV9idWZmZXJfc2V0dXAoKSB7XG4gICAgICAgICAgICByZXR1cm4gKFdyaXRlci5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGVfYnVmZmVyKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQnVmZmVyV3JpdGVyKCk7XG4gICAgICAgICAgICB9KSgpO1xuICAgICAgICB9XG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgICAgIDogZnVuY3Rpb24gY3JlYXRlX2FycmF5KCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBXcml0ZXIoKTtcbiAgICAgICAgfTtcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyB3cml0ZXIuXG4gKiBAZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtCdWZmZXJXcml0ZXJ8V3JpdGVyfSBBIHtAbGluayBCdWZmZXJXcml0ZXJ9IHdoZW4gQnVmZmVycyBhcmUgc3VwcG9ydGVkLCBvdGhlcndpc2UgYSB7QGxpbmsgV3JpdGVyfVxuICovXG5Xcml0ZXIuY3JlYXRlID0gY3JlYXRlKCk7XG5cbi8qKlxuICogQWxsb2NhdGVzIGEgYnVmZmVyIG9mIHRoZSBzcGVjaWZpZWQgc2l6ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzaXplIEJ1ZmZlciBzaXplXG4gKiBAcmV0dXJucyB7VWludDhBcnJheX0gQnVmZmVyXG4gKi9cbldyaXRlci5hbGxvYyA9IGZ1bmN0aW9uIGFsbG9jKHNpemUpIHtcbiAgICByZXR1cm4gbmV3IHV0aWwuQXJyYXkoc2l6ZSk7XG59O1xuXG4vLyBVc2UgVWludDhBcnJheSBidWZmZXIgcG9vbCBpbiB0aGUgYnJvd3NlciwganVzdCBsaWtlIG5vZGUgZG9lcyB3aXRoIGJ1ZmZlcnNcbi8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG5pZiAodXRpbC5BcnJheSAhPT0gQXJyYXkpXG4gICAgV3JpdGVyLmFsbG9jID0gdXRpbC5wb29sKFdyaXRlci5hbGxvYywgdXRpbC5BcnJheS5wcm90b3R5cGUuc3ViYXJyYXkpO1xuXG4vKipcbiAqIFB1c2hlcyBhIG5ldyBvcGVyYXRpb24gdG8gdGhlIHF1ZXVlLlxuICogQHBhcmFtIHtmdW5jdGlvbihVaW50OEFycmF5LCBudW1iZXIsICopfSBmbiBGdW5jdGlvbiB0byBjYWxsXG4gKiBAcGFyYW0ge251bWJlcn0gbGVuIFZhbHVlIGJ5dGUgbGVuZ3RoXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsIFZhbHVlIHRvIHdyaXRlXG4gKiBAcmV0dXJucyB7V3JpdGVyfSBgdGhpc2BcbiAqIEBwcml2YXRlXG4gKi9cbldyaXRlci5wcm90b3R5cGUuX3B1c2ggPSBmdW5jdGlvbiBwdXNoKGZuLCBsZW4sIHZhbCkge1xuICAgIHRoaXMudGFpbCA9IHRoaXMudGFpbC5uZXh0ID0gbmV3IE9wKGZuLCBsZW4sIHZhbCk7XG4gICAgdGhpcy5sZW4gKz0gbGVuO1xuICAgIHJldHVybiB0aGlzO1xufTtcblxuZnVuY3Rpb24gd3JpdGVCeXRlKHZhbCwgYnVmLCBwb3MpIHtcbiAgICBidWZbcG9zXSA9IHZhbCAmIDI1NTtcbn1cblxuZnVuY3Rpb24gd3JpdGVWYXJpbnQzMih2YWwsIGJ1ZiwgcG9zKSB7XG4gICAgd2hpbGUgKHZhbCA+IDEyNykge1xuICAgICAgICBidWZbcG9zKytdID0gdmFsICYgMTI3IHwgMTI4O1xuICAgICAgICB2YWwgPj4+PSA3O1xuICAgIH1cbiAgICBidWZbcG9zXSA9IHZhbDtcbn1cblxuLyoqXG4gKiBDb25zdHJ1Y3RzIGEgbmV3IHZhcmludCB3cml0ZXIgb3BlcmF0aW9uIGluc3RhbmNlLlxuICogQGNsYXNzZGVzYyBTY2hlZHVsZWQgdmFyaW50IHdyaXRlciBvcGVyYXRpb24uXG4gKiBAZXh0ZW5kcyBPcFxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge251bWJlcn0gbGVuIFZhbHVlIGJ5dGUgbGVuZ3RoXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsIFZhbHVlIHRvIHdyaXRlXG4gKiBAaWdub3JlXG4gKi9cbmZ1bmN0aW9uIFZhcmludE9wKGxlbiwgdmFsKSB7XG4gICAgdGhpcy5sZW4gPSBsZW47XG4gICAgdGhpcy5uZXh0ID0gdW5kZWZpbmVkO1xuICAgIHRoaXMudmFsID0gdmFsO1xufVxuXG5WYXJpbnRPcC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKE9wLnByb3RvdHlwZSk7XG5WYXJpbnRPcC5wcm90b3R5cGUuZm4gPSB3cml0ZVZhcmludDMyO1xuXG4vKipcbiAqIFdyaXRlcyBhbiB1bnNpZ25lZCAzMiBiaXQgdmFsdWUgYXMgYSB2YXJpbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgVmFsdWUgdG8gd3JpdGVcbiAqIEByZXR1cm5zIHtXcml0ZXJ9IGB0aGlzYFxuICovXG5Xcml0ZXIucHJvdG90eXBlLnVpbnQzMiA9IGZ1bmN0aW9uIHdyaXRlX3VpbnQzMih2YWx1ZSkge1xuICAgIC8vIGhlcmUsIHRoZSBjYWxsIHRvIHRoaXMucHVzaCBoYXMgYmVlbiBpbmxpbmVkIGFuZCBhIHZhcmludCBzcGVjaWZpYyBPcCBzdWJjbGFzcyBpcyB1c2VkLlxuICAgIC8vIHVpbnQzMiBpcyBieSBmYXIgdGhlIG1vc3QgZnJlcXVlbnRseSB1c2VkIG9wZXJhdGlvbiBhbmQgYmVuZWZpdHMgc2lnbmlmaWNhbnRseSBmcm9tIHRoaXMuXG4gICAgdGhpcy5sZW4gKz0gKHRoaXMudGFpbCA9IHRoaXMudGFpbC5uZXh0ID0gbmV3IFZhcmludE9wKFxuICAgICAgICAodmFsdWUgPSB2YWx1ZSA+Pj4gMClcbiAgICAgICAgICAgICAgICA8IDEyOCAgICAgICA/IDFcbiAgICAgICAgOiB2YWx1ZSA8IDE2Mzg0ICAgICA/IDJcbiAgICAgICAgOiB2YWx1ZSA8IDIwOTcxNTIgICA/IDNcbiAgICAgICAgOiB2YWx1ZSA8IDI2ODQzNTQ1NiA/IDRcbiAgICAgICAgOiAgICAgICAgICAgICAgICAgICAgIDUsXG4gICAgdmFsdWUpKS5sZW47XG4gICAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFdyaXRlcyBhIHNpZ25lZCAzMiBiaXQgdmFsdWUgYXMgYSB2YXJpbnQuXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSBWYWx1ZSB0byB3cml0ZVxuICogQHJldHVybnMge1dyaXRlcn0gYHRoaXNgXG4gKi9cbldyaXRlci5wcm90b3R5cGUuaW50MzIgPSBmdW5jdGlvbiB3cml0ZV9pbnQzMih2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSA8IDBcbiAgICAgICAgPyB0aGlzLl9wdXNoKHdyaXRlVmFyaW50NjQsIDEwLCBMb25nQml0cy5mcm9tTnVtYmVyKHZhbHVlKSkgLy8gMTAgYnl0ZXMgcGVyIHNwZWNcbiAgICAgICAgOiB0aGlzLnVpbnQzMih2YWx1ZSk7XG59O1xuXG4vKipcbiAqIFdyaXRlcyBhIDMyIGJpdCB2YWx1ZSBhcyBhIHZhcmludCwgemlnLXphZyBlbmNvZGVkLlxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIFZhbHVlIHRvIHdyaXRlXG4gKiBAcmV0dXJucyB7V3JpdGVyfSBgdGhpc2BcbiAqL1xuV3JpdGVyLnByb3RvdHlwZS5zaW50MzIgPSBmdW5jdGlvbiB3cml0ZV9zaW50MzIodmFsdWUpIHtcbiAgICByZXR1cm4gdGhpcy51aW50MzIoKHZhbHVlIDw8IDEgXiB2YWx1ZSA+PiAzMSkgPj4+IDApO1xufTtcblxuZnVuY3Rpb24gd3JpdGVWYXJpbnQ2NCh2YWwsIGJ1ZiwgcG9zKSB7XG4gICAgd2hpbGUgKHZhbC5oaSkge1xuICAgICAgICBidWZbcG9zKytdID0gdmFsLmxvICYgMTI3IHwgMTI4O1xuICAgICAgICB2YWwubG8gPSAodmFsLmxvID4+PiA3IHwgdmFsLmhpIDw8IDI1KSA+Pj4gMDtcbiAgICAgICAgdmFsLmhpID4+Pj0gNztcbiAgICB9XG4gICAgd2hpbGUgKHZhbC5sbyA+IDEyNykge1xuICAgICAgICBidWZbcG9zKytdID0gdmFsLmxvICYgMTI3IHwgMTI4O1xuICAgICAgICB2YWwubG8gPSB2YWwubG8gPj4+IDc7XG4gICAgfVxuICAgIGJ1Zltwb3MrK10gPSB2YWwubG87XG59XG5cbi8qKlxuICogV3JpdGVzIGFuIHVuc2lnbmVkIDY0IGJpdCB2YWx1ZSBhcyBhIHZhcmludC5cbiAqIEBwYXJhbSB7TG9uZ3xudW1iZXJ8c3RyaW5nfSB2YWx1ZSBWYWx1ZSB0byB3cml0ZVxuICogQHJldHVybnMge1dyaXRlcn0gYHRoaXNgXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IElmIGB2YWx1ZWAgaXMgYSBzdHJpbmcgYW5kIG5vIGxvbmcgbGlicmFyeSBpcyBwcmVzZW50LlxuICovXG5Xcml0ZXIucHJvdG90eXBlLnVpbnQ2NCA9IGZ1bmN0aW9uIHdyaXRlX3VpbnQ2NCh2YWx1ZSkge1xuICAgIHZhciBiaXRzID0gTG9uZ0JpdHMuZnJvbSh2YWx1ZSk7XG4gICAgcmV0dXJuIHRoaXMuX3B1c2god3JpdGVWYXJpbnQ2NCwgYml0cy5sZW5ndGgoKSwgYml0cyk7XG59O1xuXG4vKipcbiAqIFdyaXRlcyBhIHNpZ25lZCA2NCBiaXQgdmFsdWUgYXMgYSB2YXJpbnQuXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSB7TG9uZ3xudW1iZXJ8c3RyaW5nfSB2YWx1ZSBWYWx1ZSB0byB3cml0ZVxuICogQHJldHVybnMge1dyaXRlcn0gYHRoaXNgXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IElmIGB2YWx1ZWAgaXMgYSBzdHJpbmcgYW5kIG5vIGxvbmcgbGlicmFyeSBpcyBwcmVzZW50LlxuICovXG5Xcml0ZXIucHJvdG90eXBlLmludDY0ID0gV3JpdGVyLnByb3RvdHlwZS51aW50NjQ7XG5cbi8qKlxuICogV3JpdGVzIGEgc2lnbmVkIDY0IGJpdCB2YWx1ZSBhcyBhIHZhcmludCwgemlnLXphZyBlbmNvZGVkLlxuICogQHBhcmFtIHtMb25nfG51bWJlcnxzdHJpbmd9IHZhbHVlIFZhbHVlIHRvIHdyaXRlXG4gKiBAcmV0dXJucyB7V3JpdGVyfSBgdGhpc2BcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gSWYgYHZhbHVlYCBpcyBhIHN0cmluZyBhbmQgbm8gbG9uZyBsaWJyYXJ5IGlzIHByZXNlbnQuXG4gKi9cbldyaXRlci5wcm90b3R5cGUuc2ludDY0ID0gZnVuY3Rpb24gd3JpdGVfc2ludDY0KHZhbHVlKSB7XG4gICAgdmFyIGJpdHMgPSBMb25nQml0cy5mcm9tKHZhbHVlKS56ekVuY29kZSgpO1xuICAgIHJldHVybiB0aGlzLl9wdXNoKHdyaXRlVmFyaW50NjQsIGJpdHMubGVuZ3RoKCksIGJpdHMpO1xufTtcblxuLyoqXG4gKiBXcml0ZXMgYSBib29saXNoIHZhbHVlIGFzIGEgdmFyaW50LlxuICogQHBhcmFtIHtib29sZWFufSB2YWx1ZSBWYWx1ZSB0byB3cml0ZVxuICogQHJldHVybnMge1dyaXRlcn0gYHRoaXNgXG4gKi9cbldyaXRlci5wcm90b3R5cGUuYm9vbCA9IGZ1bmN0aW9uIHdyaXRlX2Jvb2wodmFsdWUpIHtcbiAgICByZXR1cm4gdGhpcy5fcHVzaCh3cml0ZUJ5dGUsIDEsIHZhbHVlID8gMSA6IDApO1xufTtcblxuZnVuY3Rpb24gd3JpdGVGaXhlZDMyKHZhbCwgYnVmLCBwb3MpIHtcbiAgICBidWZbcG9zICAgIF0gPSAgdmFsICAgICAgICAgJiAyNTU7XG4gICAgYnVmW3BvcyArIDFdID0gIHZhbCA+Pj4gOCAgICYgMjU1O1xuICAgIGJ1Zltwb3MgKyAyXSA9ICB2YWwgPj4+IDE2ICAmIDI1NTtcbiAgICBidWZbcG9zICsgM10gPSAgdmFsID4+PiAyNDtcbn1cblxuLyoqXG4gKiBXcml0ZXMgYW4gdW5zaWduZWQgMzIgYml0IHZhbHVlIGFzIGZpeGVkIDMyIGJpdHMuXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgVmFsdWUgdG8gd3JpdGVcbiAqIEByZXR1cm5zIHtXcml0ZXJ9IGB0aGlzYFxuICovXG5Xcml0ZXIucHJvdG90eXBlLmZpeGVkMzIgPSBmdW5jdGlvbiB3cml0ZV9maXhlZDMyKHZhbHVlKSB7XG4gICAgcmV0dXJuIHRoaXMuX3B1c2god3JpdGVGaXhlZDMyLCA0LCB2YWx1ZSA+Pj4gMCk7XG59O1xuXG4vKipcbiAqIFdyaXRlcyBhIHNpZ25lZCAzMiBiaXQgdmFsdWUgYXMgZml4ZWQgMzIgYml0cy5cbiAqIEBmdW5jdGlvblxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIFZhbHVlIHRvIHdyaXRlXG4gKiBAcmV0dXJucyB7V3JpdGVyfSBgdGhpc2BcbiAqL1xuV3JpdGVyLnByb3RvdHlwZS5zZml4ZWQzMiA9IFdyaXRlci5wcm90b3R5cGUuZml4ZWQzMjtcblxuLyoqXG4gKiBXcml0ZXMgYW4gdW5zaWduZWQgNjQgYml0IHZhbHVlIGFzIGZpeGVkIDY0IGJpdHMuXG4gKiBAcGFyYW0ge0xvbmd8bnVtYmVyfHN0cmluZ30gdmFsdWUgVmFsdWUgdG8gd3JpdGVcbiAqIEByZXR1cm5zIHtXcml0ZXJ9IGB0aGlzYFxuICogQHRocm93cyB7VHlwZUVycm9yfSBJZiBgdmFsdWVgIGlzIGEgc3RyaW5nIGFuZCBubyBsb25nIGxpYnJhcnkgaXMgcHJlc2VudC5cbiAqL1xuV3JpdGVyLnByb3RvdHlwZS5maXhlZDY0ID0gZnVuY3Rpb24gd3JpdGVfZml4ZWQ2NCh2YWx1ZSkge1xuICAgIHZhciBiaXRzID0gTG9uZ0JpdHMuZnJvbSh2YWx1ZSk7XG4gICAgcmV0dXJuIHRoaXMuX3B1c2god3JpdGVGaXhlZDMyLCA0LCBiaXRzLmxvKS5fcHVzaCh3cml0ZUZpeGVkMzIsIDQsIGJpdHMuaGkpO1xufTtcblxuLyoqXG4gKiBXcml0ZXMgYSBzaWduZWQgNjQgYml0IHZhbHVlIGFzIGZpeGVkIDY0IGJpdHMuXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSB7TG9uZ3xudW1iZXJ8c3RyaW5nfSB2YWx1ZSBWYWx1ZSB0byB3cml0ZVxuICogQHJldHVybnMge1dyaXRlcn0gYHRoaXNgXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IElmIGB2YWx1ZWAgaXMgYSBzdHJpbmcgYW5kIG5vIGxvbmcgbGlicmFyeSBpcyBwcmVzZW50LlxuICovXG5Xcml0ZXIucHJvdG90eXBlLnNmaXhlZDY0ID0gV3JpdGVyLnByb3RvdHlwZS5maXhlZDY0O1xuXG4vKipcbiAqIFdyaXRlcyBhIGZsb2F0ICgzMiBiaXQpLlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgVmFsdWUgdG8gd3JpdGVcbiAqIEByZXR1cm5zIHtXcml0ZXJ9IGB0aGlzYFxuICovXG5Xcml0ZXIucHJvdG90eXBlLmZsb2F0ID0gZnVuY3Rpb24gd3JpdGVfZmxvYXQodmFsdWUpIHtcbiAgICByZXR1cm4gdGhpcy5fcHVzaCh1dGlsLmZsb2F0LndyaXRlRmxvYXRMRSwgNCwgdmFsdWUpO1xufTtcblxuLyoqXG4gKiBXcml0ZXMgYSBkb3VibGUgKDY0IGJpdCBmbG9hdCkuXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSBWYWx1ZSB0byB3cml0ZVxuICogQHJldHVybnMge1dyaXRlcn0gYHRoaXNgXG4gKi9cbldyaXRlci5wcm90b3R5cGUuZG91YmxlID0gZnVuY3Rpb24gd3JpdGVfZG91YmxlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHRoaXMuX3B1c2godXRpbC5mbG9hdC53cml0ZURvdWJsZUxFLCA4LCB2YWx1ZSk7XG59O1xuXG52YXIgd3JpdGVCeXRlcyA9IHV0aWwuQXJyYXkucHJvdG90eXBlLnNldFxuICAgID8gZnVuY3Rpb24gd3JpdGVCeXRlc19zZXQodmFsLCBidWYsIHBvcykge1xuICAgICAgICBidWYuc2V0KHZhbCwgcG9zKTsgLy8gYWxzbyB3b3JrcyBmb3IgcGxhaW4gYXJyYXkgdmFsdWVzXG4gICAgfVxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgOiBmdW5jdGlvbiB3cml0ZUJ5dGVzX2Zvcih2YWwsIGJ1ZiwgcG9zKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmFsLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgYnVmW3BvcyArIGldID0gdmFsW2ldO1xuICAgIH07XG5cbi8qKlxuICogV3JpdGVzIGEgc2VxdWVuY2Ugb2YgYnl0ZXMuXG4gKiBAcGFyYW0ge1VpbnQ4QXJyYXl8c3RyaW5nfSB2YWx1ZSBCdWZmZXIgb3IgYmFzZTY0IGVuY29kZWQgc3RyaW5nIHRvIHdyaXRlXG4gKiBAcmV0dXJucyB7V3JpdGVyfSBgdGhpc2BcbiAqL1xuV3JpdGVyLnByb3RvdHlwZS5ieXRlcyA9IGZ1bmN0aW9uIHdyaXRlX2J5dGVzKHZhbHVlKSB7XG4gICAgdmFyIGxlbiA9IHZhbHVlLmxlbmd0aCA+Pj4gMDtcbiAgICBpZiAoIWxlbilcbiAgICAgICAgcmV0dXJuIHRoaXMuX3B1c2god3JpdGVCeXRlLCAxLCAwKTtcbiAgICBpZiAodXRpbC5pc1N0cmluZyh2YWx1ZSkpIHtcbiAgICAgICAgdmFyIGJ1ZiA9IFdyaXRlci5hbGxvYyhsZW4gPSBiYXNlNjQubGVuZ3RoKHZhbHVlKSk7XG4gICAgICAgIGJhc2U2NC5kZWNvZGUodmFsdWUsIGJ1ZiwgMCk7XG4gICAgICAgIHZhbHVlID0gYnVmO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy51aW50MzIobGVuKS5fcHVzaCh3cml0ZUJ5dGVzLCBsZW4sIHZhbHVlKTtcbn07XG5cbi8qKlxuICogV3JpdGVzIGEgc3RyaW5nLlxuICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIFZhbHVlIHRvIHdyaXRlXG4gKiBAcmV0dXJucyB7V3JpdGVyfSBgdGhpc2BcbiAqL1xuV3JpdGVyLnByb3RvdHlwZS5zdHJpbmcgPSBmdW5jdGlvbiB3cml0ZV9zdHJpbmcodmFsdWUpIHtcbiAgICB2YXIgbGVuID0gdXRmOC5sZW5ndGgodmFsdWUpO1xuICAgIHJldHVybiBsZW5cbiAgICAgICAgPyB0aGlzLnVpbnQzMihsZW4pLl9wdXNoKHV0Zjgud3JpdGUsIGxlbiwgdmFsdWUpXG4gICAgICAgIDogdGhpcy5fcHVzaCh3cml0ZUJ5dGUsIDEsIDApO1xufTtcblxuLyoqXG4gKiBGb3JrcyB0aGlzIHdyaXRlcidzIHN0YXRlIGJ5IHB1c2hpbmcgaXQgdG8gYSBzdGFjay5cbiAqIENhbGxpbmcge0BsaW5rIFdyaXRlciNyZXNldHxyZXNldH0gb3Ige0BsaW5rIFdyaXRlciNsZGVsaW18bGRlbGltfSByZXNldHMgdGhlIHdyaXRlciB0byB0aGUgcHJldmlvdXMgc3RhdGUuXG4gKiBAcmV0dXJucyB7V3JpdGVyfSBgdGhpc2BcbiAqL1xuV3JpdGVyLnByb3RvdHlwZS5mb3JrID0gZnVuY3Rpb24gZm9yaygpIHtcbiAgICB0aGlzLnN0YXRlcyA9IG5ldyBTdGF0ZSh0aGlzKTtcbiAgICB0aGlzLmhlYWQgPSB0aGlzLnRhaWwgPSBuZXcgT3Aobm9vcCwgMCwgMCk7XG4gICAgdGhpcy5sZW4gPSAwO1xuICAgIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBSZXNldHMgdGhpcyBpbnN0YW5jZSB0byB0aGUgbGFzdCBzdGF0ZS5cbiAqIEByZXR1cm5zIHtXcml0ZXJ9IGB0aGlzYFxuICovXG5Xcml0ZXIucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gcmVzZXQoKSB7XG4gICAgaWYgKHRoaXMuc3RhdGVzKSB7XG4gICAgICAgIHRoaXMuaGVhZCAgID0gdGhpcy5zdGF0ZXMuaGVhZDtcbiAgICAgICAgdGhpcy50YWlsICAgPSB0aGlzLnN0YXRlcy50YWlsO1xuICAgICAgICB0aGlzLmxlbiAgICA9IHRoaXMuc3RhdGVzLmxlbjtcbiAgICAgICAgdGhpcy5zdGF0ZXMgPSB0aGlzLnN0YXRlcy5uZXh0O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuaGVhZCA9IHRoaXMudGFpbCA9IG5ldyBPcChub29wLCAwLCAwKTtcbiAgICAgICAgdGhpcy5sZW4gID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFJlc2V0cyB0byB0aGUgbGFzdCBzdGF0ZSBhbmQgYXBwZW5kcyB0aGUgZm9yayBzdGF0ZSdzIGN1cnJlbnQgd3JpdGUgbGVuZ3RoIGFzIGEgdmFyaW50IGZvbGxvd2VkIGJ5IGl0cyBvcGVyYXRpb25zLlxuICogQHJldHVybnMge1dyaXRlcn0gYHRoaXNgXG4gKi9cbldyaXRlci5wcm90b3R5cGUubGRlbGltID0gZnVuY3Rpb24gbGRlbGltKCkge1xuICAgIHZhciBoZWFkID0gdGhpcy5oZWFkLFxuICAgICAgICB0YWlsID0gdGhpcy50YWlsLFxuICAgICAgICBsZW4gID0gdGhpcy5sZW47XG4gICAgdGhpcy5yZXNldCgpLnVpbnQzMihsZW4pO1xuICAgIGlmIChsZW4pIHtcbiAgICAgICAgdGhpcy50YWlsLm5leHQgPSBoZWFkLm5leHQ7IC8vIHNraXAgbm9vcFxuICAgICAgICB0aGlzLnRhaWwgPSB0YWlsO1xuICAgICAgICB0aGlzLmxlbiArPSBsZW47XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBGaW5pc2hlcyB0aGUgd3JpdGUgb3BlcmF0aW9uLlxuICogQHJldHVybnMge1VpbnQ4QXJyYXl9IEZpbmlzaGVkIGJ1ZmZlclxuICovXG5Xcml0ZXIucHJvdG90eXBlLmZpbmlzaCA9IGZ1bmN0aW9uIGZpbmlzaCgpIHtcbiAgICB2YXIgaGVhZCA9IHRoaXMuaGVhZC5uZXh0LCAvLyBza2lwIG5vb3BcbiAgICAgICAgYnVmICA9IHRoaXMuY29uc3RydWN0b3IuYWxsb2ModGhpcy5sZW4pLFxuICAgICAgICBwb3MgID0gMDtcbiAgICB3aGlsZSAoaGVhZCkge1xuICAgICAgICBoZWFkLmZuKGhlYWQudmFsLCBidWYsIHBvcyk7XG4gICAgICAgIHBvcyArPSBoZWFkLmxlbjtcbiAgICAgICAgaGVhZCA9IGhlYWQubmV4dDtcbiAgICB9XG4gICAgLy8gdGhpcy5oZWFkID0gdGhpcy50YWlsID0gbnVsbDtcbiAgICByZXR1cm4gYnVmO1xufTtcblxuV3JpdGVyLl9jb25maWd1cmUgPSBmdW5jdGlvbihCdWZmZXJXcml0ZXJfKSB7XG4gICAgQnVmZmVyV3JpdGVyID0gQnVmZmVyV3JpdGVyXztcbiAgICBXcml0ZXIuY3JlYXRlID0gY3JlYXRlKCk7XG4gICAgQnVmZmVyV3JpdGVyLl9jb25maWd1cmUoKTtcbn07XG4iLCAiXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IEJ1ZmZlcldyaXRlcjtcblxuLy8gZXh0ZW5kcyBXcml0ZXJcbnZhciBXcml0ZXIgPSByZXF1aXJlKFwiLi93cml0ZXJcIik7XG4oQnVmZmVyV3JpdGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoV3JpdGVyLnByb3RvdHlwZSkpLmNvbnN0cnVjdG9yID0gQnVmZmVyV3JpdGVyO1xuXG52YXIgdXRpbCA9IHJlcXVpcmUoXCIuL3V0aWwvbWluaW1hbFwiKTtcblxuLyoqXG4gKiBDb25zdHJ1Y3RzIGEgbmV3IGJ1ZmZlciB3cml0ZXIgaW5zdGFuY2UuXG4gKiBAY2xhc3NkZXNjIFdpcmUgZm9ybWF0IHdyaXRlciB1c2luZyBub2RlIGJ1ZmZlcnMuXG4gKiBAZXh0ZW5kcyBXcml0ZXJcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBCdWZmZXJXcml0ZXIoKSB7XG4gICAgV3JpdGVyLmNhbGwodGhpcyk7XG59XG5cbkJ1ZmZlcldyaXRlci5fY29uZmlndXJlID0gZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEFsbG9jYXRlcyBhIGJ1ZmZlciBvZiB0aGUgc3BlY2lmaWVkIHNpemUuXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNpemUgQnVmZmVyIHNpemVcbiAgICAgKiBAcmV0dXJucyB7QnVmZmVyfSBCdWZmZXJcbiAgICAgKi9cbiAgICBCdWZmZXJXcml0ZXIuYWxsb2MgPSB1dGlsLl9CdWZmZXJfYWxsb2NVbnNhZmU7XG5cbiAgICBCdWZmZXJXcml0ZXIud3JpdGVCeXRlc0J1ZmZlciA9IHV0aWwuQnVmZmVyICYmIHV0aWwuQnVmZmVyLnByb3RvdHlwZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgJiYgdXRpbC5CdWZmZXIucHJvdG90eXBlLnNldC5uYW1lID09PSBcInNldFwiXG4gICAgICAgID8gZnVuY3Rpb24gd3JpdGVCeXRlc0J1ZmZlcl9zZXQodmFsLCBidWYsIHBvcykge1xuICAgICAgICAgIGJ1Zi5zZXQodmFsLCBwb3MpOyAvLyBmYXN0ZXIgdGhhbiBjb3B5IChyZXF1aXJlcyBub2RlID49IDQgd2hlcmUgQnVmZmVycyBleHRlbmQgVWludDhBcnJheSBhbmQgc2V0IGlzIHByb3Blcmx5IGluaGVyaXRlZClcbiAgICAgICAgICAvLyBhbHNvIHdvcmtzIGZvciBwbGFpbiBhcnJheSB2YWx1ZXNcbiAgICAgICAgfVxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgICAgICA6IGZ1bmN0aW9uIHdyaXRlQnl0ZXNCdWZmZXJfY29weSh2YWwsIGJ1ZiwgcG9zKSB7XG4gICAgICAgICAgaWYgKHZhbC5jb3B5KSAvLyBCdWZmZXIgdmFsdWVzXG4gICAgICAgICAgICB2YWwuY29weShidWYsIHBvcywgMCwgdmFsLmxlbmd0aCk7XG4gICAgICAgICAgZWxzZSBmb3IgKHZhciBpID0gMDsgaSA8IHZhbC5sZW5ndGg7KSAvLyBwbGFpbiBhcnJheSB2YWx1ZXNcbiAgICAgICAgICAgIGJ1Zltwb3MrK10gPSB2YWxbaSsrXTtcbiAgICAgICAgfTtcbn07XG5cblxuLyoqXG4gKiBAb3ZlcnJpZGVcbiAqL1xuQnVmZmVyV3JpdGVyLnByb3RvdHlwZS5ieXRlcyA9IGZ1bmN0aW9uIHdyaXRlX2J5dGVzX2J1ZmZlcih2YWx1ZSkge1xuICAgIGlmICh1dGlsLmlzU3RyaW5nKHZhbHVlKSlcbiAgICAgICAgdmFsdWUgPSB1dGlsLl9CdWZmZXJfZnJvbSh2YWx1ZSwgXCJiYXNlNjRcIik7XG4gICAgdmFyIGxlbiA9IHZhbHVlLmxlbmd0aCA+Pj4gMDtcbiAgICB0aGlzLnVpbnQzMihsZW4pO1xuICAgIGlmIChsZW4pXG4gICAgICAgIHRoaXMuX3B1c2goQnVmZmVyV3JpdGVyLndyaXRlQnl0ZXNCdWZmZXIsIGxlbiwgdmFsdWUpO1xuICAgIHJldHVybiB0aGlzO1xufTtcblxuZnVuY3Rpb24gd3JpdGVTdHJpbmdCdWZmZXIodmFsLCBidWYsIHBvcykge1xuICAgIGlmICh2YWwubGVuZ3RoIDwgNDApIC8vIHBsYWluIGpzIGlzIGZhc3RlciBmb3Igc2hvcnQgc3RyaW5ncyAocHJvYmFibHkgZHVlIHRvIHJlZHVuZGFudCBhc3NlcnRpb25zKVxuICAgICAgICB1dGlsLnV0Zjgud3JpdGUodmFsLCBidWYsIHBvcyk7XG4gICAgZWxzZSBpZiAoYnVmLnV0ZjhXcml0ZSlcbiAgICAgICAgYnVmLnV0ZjhXcml0ZSh2YWwsIHBvcyk7XG4gICAgZWxzZVxuICAgICAgICBidWYud3JpdGUodmFsLCBwb3MpO1xufVxuXG4vKipcbiAqIEBvdmVycmlkZVxuICovXG5CdWZmZXJXcml0ZXIucHJvdG90eXBlLnN0cmluZyA9IGZ1bmN0aW9uIHdyaXRlX3N0cmluZ19idWZmZXIodmFsdWUpIHtcbiAgICB2YXIgbGVuID0gdXRpbC5CdWZmZXIuYnl0ZUxlbmd0aCh2YWx1ZSk7XG4gICAgdGhpcy51aW50MzIobGVuKTtcbiAgICBpZiAobGVuKVxuICAgICAgICB0aGlzLl9wdXNoKHdyaXRlU3RyaW5nQnVmZmVyLCBsZW4sIHZhbHVlKTtcbiAgICByZXR1cm4gdGhpcztcbn07XG5cblxuLyoqXG4gKiBGaW5pc2hlcyB0aGUgd3JpdGUgb3BlcmF0aW9uLlxuICogQG5hbWUgQnVmZmVyV3JpdGVyI2ZpbmlzaFxuICogQGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7QnVmZmVyfSBGaW5pc2hlZCBidWZmZXJcbiAqL1xuXG5CdWZmZXJXcml0ZXIuX2NvbmZpZ3VyZSgpO1xuIiwgIlwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBSZWFkZXI7XG5cbnZhciB1dGlsICAgICAgPSByZXF1aXJlKFwiLi91dGlsL21pbmltYWxcIik7XG5cbnZhciBCdWZmZXJSZWFkZXI7IC8vIGN5Y2xpY1xuXG52YXIgTG9uZ0JpdHMgID0gdXRpbC5Mb25nQml0cyxcbiAgICB1dGY4ICAgICAgPSB1dGlsLnV0Zjg7XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5mdW5jdGlvbiBpbmRleE91dE9mUmFuZ2UocmVhZGVyLCB3cml0ZUxlbmd0aCkge1xuICAgIHJldHVybiBSYW5nZUVycm9yKFwiaW5kZXggb3V0IG9mIHJhbmdlOiBcIiArIHJlYWRlci5wb3MgKyBcIiArIFwiICsgKHdyaXRlTGVuZ3RoIHx8IDEpICsgXCIgPiBcIiArIHJlYWRlci5sZW4pO1xufVxuXG4vKipcbiAqIENvbnN0cnVjdHMgYSBuZXcgcmVhZGVyIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgYnVmZmVyLlxuICogQGNsYXNzZGVzYyBXaXJlIGZvcm1hdCByZWFkZXIgdXNpbmcgYFVpbnQ4QXJyYXlgIGlmIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIGBBcnJheWAuXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7VWludDhBcnJheX0gYnVmZmVyIEJ1ZmZlciB0byByZWFkIGZyb21cbiAqL1xuZnVuY3Rpb24gUmVhZGVyKGJ1ZmZlcikge1xuXG4gICAgLyoqXG4gICAgICogUmVhZCBidWZmZXIuXG4gICAgICogQHR5cGUge1VpbnQ4QXJyYXl9XG4gICAgICovXG4gICAgdGhpcy5idWYgPSBidWZmZXI7XG5cbiAgICAvKipcbiAgICAgKiBSZWFkIGJ1ZmZlciBwb3NpdGlvbi5cbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMucG9zID0gMDtcblxuICAgIC8qKlxuICAgICAqIFJlYWQgYnVmZmVyIGxlbmd0aC5cbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMubGVuID0gYnVmZmVyLmxlbmd0aDtcbn1cblxudmFyIGNyZWF0ZV9hcnJheSA9IHR5cGVvZiBVaW50OEFycmF5ICE9PSBcInVuZGVmaW5lZFwiXG4gICAgPyBmdW5jdGlvbiBjcmVhdGVfdHlwZWRfYXJyYXkoYnVmZmVyKSB7XG4gICAgICAgIGlmIChidWZmZXIgaW5zdGFuY2VvZiBVaW50OEFycmF5IHx8IEFycmF5LmlzQXJyYXkoYnVmZmVyKSlcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVhZGVyKGJ1ZmZlcik7XG4gICAgICAgIHRocm93IEVycm9yKFwiaWxsZWdhbCBidWZmZXJcIik7XG4gICAgfVxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgOiBmdW5jdGlvbiBjcmVhdGVfYXJyYXkoYnVmZmVyKSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGJ1ZmZlcikpXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlYWRlcihidWZmZXIpO1xuICAgICAgICB0aHJvdyBFcnJvcihcImlsbGVnYWwgYnVmZmVyXCIpO1xuICAgIH07XG5cbnZhciBjcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUoKSB7XG4gICAgcmV0dXJuIHV0aWwuQnVmZmVyXG4gICAgICAgID8gZnVuY3Rpb24gY3JlYXRlX2J1ZmZlcl9zZXR1cChidWZmZXIpIHtcbiAgICAgICAgICAgIHJldHVybiAoUmVhZGVyLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZV9idWZmZXIoYnVmZmVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHV0aWwuQnVmZmVyLmlzQnVmZmVyKGJ1ZmZlcilcbiAgICAgICAgICAgICAgICAgICAgPyBuZXcgQnVmZmVyUmVhZGVyKGJ1ZmZlcilcbiAgICAgICAgICAgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAgICAgICAgICAgICAgICAgOiBjcmVhdGVfYXJyYXkoYnVmZmVyKTtcbiAgICAgICAgICAgIH0pKGJ1ZmZlcik7XG4gICAgICAgIH1cbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAgICAgOiBjcmVhdGVfYXJyYXk7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgcmVhZGVyIHVzaW5nIHRoZSBzcGVjaWZpZWQgYnVmZmVyLlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0ge1VpbnQ4QXJyYXl8QnVmZmVyfSBidWZmZXIgQnVmZmVyIHRvIHJlYWQgZnJvbVxuICogQHJldHVybnMge1JlYWRlcnxCdWZmZXJSZWFkZXJ9IEEge0BsaW5rIEJ1ZmZlclJlYWRlcn0gaWYgYGJ1ZmZlcmAgaXMgYSBCdWZmZXIsIG90aGVyd2lzZSBhIHtAbGluayBSZWFkZXJ9XG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgYGJ1ZmZlcmAgaXMgbm90IGEgdmFsaWQgYnVmZmVyXG4gKi9cblJlYWRlci5jcmVhdGUgPSBjcmVhdGUoKTtcblxuUmVhZGVyLnByb3RvdHlwZS5fc2xpY2UgPSB1dGlsLkFycmF5LnByb3RvdHlwZS5zdWJhcnJheSB8fCAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyB1dGlsLkFycmF5LnByb3RvdHlwZS5zbGljZTtcblxuLyoqXG4gKiBSZWFkcyBhIHZhcmludCBhcyBhbiB1bnNpZ25lZCAzMiBiaXQgdmFsdWUuXG4gKiBAZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtudW1iZXJ9IFZhbHVlIHJlYWRcbiAqL1xuUmVhZGVyLnByb3RvdHlwZS51aW50MzIgPSAoZnVuY3Rpb24gcmVhZF91aW50MzJfc2V0dXAoKSB7XG4gICAgdmFyIHZhbHVlID0gNDI5NDk2NzI5NTsgLy8gb3B0aW1pemVyIHR5cGUtaGludCwgdGVuZHMgdG8gZGVvcHQgb3RoZXJ3aXNlICg/ISlcbiAgICByZXR1cm4gZnVuY3Rpb24gcmVhZF91aW50MzIoKSB7XG4gICAgICAgIHZhbHVlID0gKCAgICAgICAgIHRoaXMuYnVmW3RoaXMucG9zXSAmIDEyNyAgICAgICApID4+PiAwOyBpZiAodGhpcy5idWZbdGhpcy5wb3MrK10gPCAxMjgpIHJldHVybiB2YWx1ZTtcbiAgICAgICAgdmFsdWUgPSAodmFsdWUgfCAodGhpcy5idWZbdGhpcy5wb3NdICYgMTI3KSA8PCAgNykgPj4+IDA7IGlmICh0aGlzLmJ1Zlt0aGlzLnBvcysrXSA8IDEyOCkgcmV0dXJuIHZhbHVlO1xuICAgICAgICB2YWx1ZSA9ICh2YWx1ZSB8ICh0aGlzLmJ1Zlt0aGlzLnBvc10gJiAxMjcpIDw8IDE0KSA+Pj4gMDsgaWYgKHRoaXMuYnVmW3RoaXMucG9zKytdIDwgMTI4KSByZXR1cm4gdmFsdWU7XG4gICAgICAgIHZhbHVlID0gKHZhbHVlIHwgKHRoaXMuYnVmW3RoaXMucG9zXSAmIDEyNykgPDwgMjEpID4+PiAwOyBpZiAodGhpcy5idWZbdGhpcy5wb3MrK10gPCAxMjgpIHJldHVybiB2YWx1ZTtcbiAgICAgICAgdmFsdWUgPSAodmFsdWUgfCAodGhpcy5idWZbdGhpcy5wb3NdICYgIDE1KSA8PCAyOCkgPj4+IDA7IGlmICh0aGlzLmJ1Zlt0aGlzLnBvcysrXSA8IDEyOCkgcmV0dXJuIHZhbHVlO1xuXG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgICBpZiAoKHRoaXMucG9zICs9IDUpID4gdGhpcy5sZW4pIHtcbiAgICAgICAgICAgIHRoaXMucG9zID0gdGhpcy5sZW47XG4gICAgICAgICAgICB0aHJvdyBpbmRleE91dE9mUmFuZ2UodGhpcywgMTApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9O1xufSkoKTtcblxuLyoqXG4gKiBSZWFkcyBhIHZhcmludCBhcyBhIHNpZ25lZCAzMiBiaXQgdmFsdWUuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBWYWx1ZSByZWFkXG4gKi9cblJlYWRlci5wcm90b3R5cGUuaW50MzIgPSBmdW5jdGlvbiByZWFkX2ludDMyKCkge1xuICAgIHJldHVybiB0aGlzLnVpbnQzMigpIHwgMDtcbn07XG5cbi8qKlxuICogUmVhZHMgYSB6aWctemFnIGVuY29kZWQgdmFyaW50IGFzIGEgc2lnbmVkIDMyIGJpdCB2YWx1ZS5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IFZhbHVlIHJlYWRcbiAqL1xuUmVhZGVyLnByb3RvdHlwZS5zaW50MzIgPSBmdW5jdGlvbiByZWFkX3NpbnQzMigpIHtcbiAgICB2YXIgdmFsdWUgPSB0aGlzLnVpbnQzMigpO1xuICAgIHJldHVybiB2YWx1ZSA+Pj4gMSBeIC0odmFsdWUgJiAxKSB8IDA7XG59O1xuXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1pbnZhbGlkLXRoaXMgKi9cblxuZnVuY3Rpb24gcmVhZExvbmdWYXJpbnQoKSB7XG4gICAgLy8gdGVuZHMgdG8gZGVvcHQgd2l0aCBsb2NhbCB2YXJzIGZvciBvY3RldCBldGMuXG4gICAgdmFyIGJpdHMgPSBuZXcgTG9uZ0JpdHMoMCwgMCk7XG4gICAgdmFyIGkgPSAwO1xuICAgIGlmICh0aGlzLmxlbiAtIHRoaXMucG9zID4gNCkgeyAvLyBmYXN0IHJvdXRlIChsbylcbiAgICAgICAgZm9yICg7IGkgPCA0OyArK2kpIHtcbiAgICAgICAgICAgIC8vIDFzdC4uNHRoXG4gICAgICAgICAgICBiaXRzLmxvID0gKGJpdHMubG8gfCAodGhpcy5idWZbdGhpcy5wb3NdICYgMTI3KSA8PCBpICogNykgPj4+IDA7XG4gICAgICAgICAgICBpZiAodGhpcy5idWZbdGhpcy5wb3MrK10gPCAxMjgpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGJpdHM7XG4gICAgICAgIH1cbiAgICAgICAgLy8gNXRoXG4gICAgICAgIGJpdHMubG8gPSAoYml0cy5sbyB8ICh0aGlzLmJ1Zlt0aGlzLnBvc10gJiAxMjcpIDw8IDI4KSA+Pj4gMDtcbiAgICAgICAgYml0cy5oaSA9IChiaXRzLmhpIHwgKHRoaXMuYnVmW3RoaXMucG9zXSAmIDEyNykgPj4gIDQpID4+PiAwO1xuICAgICAgICBpZiAodGhpcy5idWZbdGhpcy5wb3MrK10gPCAxMjgpXG4gICAgICAgICAgICByZXR1cm4gYml0cztcbiAgICAgICAgaSA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZm9yICg7IGkgPCAzOyArK2kpIHtcbiAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgICAgICAgaWYgKHRoaXMucG9zID49IHRoaXMubGVuKVxuICAgICAgICAgICAgICAgIHRocm93IGluZGV4T3V0T2ZSYW5nZSh0aGlzKTtcbiAgICAgICAgICAgIC8vIDFzdC4uM3RoXG4gICAgICAgICAgICBiaXRzLmxvID0gKGJpdHMubG8gfCAodGhpcy5idWZbdGhpcy5wb3NdICYgMTI3KSA8PCBpICogNykgPj4+IDA7XG4gICAgICAgICAgICBpZiAodGhpcy5idWZbdGhpcy5wb3MrK10gPCAxMjgpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGJpdHM7XG4gICAgICAgIH1cbiAgICAgICAgLy8gNHRoXG4gICAgICAgIGJpdHMubG8gPSAoYml0cy5sbyB8ICh0aGlzLmJ1Zlt0aGlzLnBvcysrXSAmIDEyNykgPDwgaSAqIDcpID4+PiAwO1xuICAgICAgICByZXR1cm4gYml0cztcbiAgICB9XG4gICAgaWYgKHRoaXMubGVuIC0gdGhpcy5wb3MgPiA0KSB7IC8vIGZhc3Qgcm91dGUgKGhpKVxuICAgICAgICBmb3IgKDsgaSA8IDU7ICsraSkge1xuICAgICAgICAgICAgLy8gNnRoLi4xMHRoXG4gICAgICAgICAgICBiaXRzLmhpID0gKGJpdHMuaGkgfCAodGhpcy5idWZbdGhpcy5wb3NdICYgMTI3KSA8PCBpICogNyArIDMpID4+PiAwO1xuICAgICAgICAgICAgaWYgKHRoaXMuYnVmW3RoaXMucG9zKytdIDwgMTI4KVxuICAgICAgICAgICAgICAgIHJldHVybiBiaXRzO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZm9yICg7IGkgPCA1OyArK2kpIHtcbiAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgICAgICAgaWYgKHRoaXMucG9zID49IHRoaXMubGVuKVxuICAgICAgICAgICAgICAgIHRocm93IGluZGV4T3V0T2ZSYW5nZSh0aGlzKTtcbiAgICAgICAgICAgIC8vIDZ0aC4uMTB0aFxuICAgICAgICAgICAgYml0cy5oaSA9IChiaXRzLmhpIHwgKHRoaXMuYnVmW3RoaXMucG9zXSAmIDEyNykgPDwgaSAqIDcgKyAzKSA+Pj4gMDtcbiAgICAgICAgICAgIGlmICh0aGlzLmJ1Zlt0aGlzLnBvcysrXSA8IDEyOClcbiAgICAgICAgICAgICAgICByZXR1cm4gYml0cztcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIHRocm93IEVycm9yKFwiaW52YWxpZCB2YXJpbnQgZW5jb2RpbmdcIik7XG59XG5cbi8qIGVzbGludC1lbmFibGUgbm8taW52YWxpZC10aGlzICovXG5cbi8qKlxuICogUmVhZHMgYSB2YXJpbnQgYXMgYSBzaWduZWQgNjQgYml0IHZhbHVlLlxuICogQG5hbWUgUmVhZGVyI2ludDY0XG4gKiBAZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtMb25nfSBWYWx1ZSByZWFkXG4gKi9cblxuLyoqXG4gKiBSZWFkcyBhIHZhcmludCBhcyBhbiB1bnNpZ25lZCA2NCBiaXQgdmFsdWUuXG4gKiBAbmFtZSBSZWFkZXIjdWludDY0XG4gKiBAZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtMb25nfSBWYWx1ZSByZWFkXG4gKi9cblxuLyoqXG4gKiBSZWFkcyBhIHppZy16YWcgZW5jb2RlZCB2YXJpbnQgYXMgYSBzaWduZWQgNjQgYml0IHZhbHVlLlxuICogQG5hbWUgUmVhZGVyI3NpbnQ2NFxuICogQGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7TG9uZ30gVmFsdWUgcmVhZFxuICovXG5cbi8qKlxuICogUmVhZHMgYSB2YXJpbnQgYXMgYSBib29sZWFuLlxuICogQHJldHVybnMge2Jvb2xlYW59IFZhbHVlIHJlYWRcbiAqL1xuUmVhZGVyLnByb3RvdHlwZS5ib29sID0gZnVuY3Rpb24gcmVhZF9ib29sKCkge1xuICAgIHJldHVybiB0aGlzLnVpbnQzMigpICE9PSAwO1xufTtcblxuZnVuY3Rpb24gcmVhZEZpeGVkMzJfZW5kKGJ1ZiwgZW5kKSB7IC8vIG5vdGUgdGhhdCB0aGlzIHVzZXMgYGVuZGAsIG5vdCBgcG9zYFxuICAgIHJldHVybiAoYnVmW2VuZCAtIDRdXG4gICAgICAgICAgfCBidWZbZW5kIC0gM10gPDwgOFxuICAgICAgICAgIHwgYnVmW2VuZCAtIDJdIDw8IDE2XG4gICAgICAgICAgfCBidWZbZW5kIC0gMV0gPDwgMjQpID4+PiAwO1xufVxuXG4vKipcbiAqIFJlYWRzIGZpeGVkIDMyIGJpdHMgYXMgYW4gdW5zaWduZWQgMzIgYml0IGludGVnZXIuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBWYWx1ZSByZWFkXG4gKi9cblJlYWRlci5wcm90b3R5cGUuZml4ZWQzMiA9IGZ1bmN0aW9uIHJlYWRfZml4ZWQzMigpIHtcblxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmICh0aGlzLnBvcyArIDQgPiB0aGlzLmxlbilcbiAgICAgICAgdGhyb3cgaW5kZXhPdXRPZlJhbmdlKHRoaXMsIDQpO1xuXG4gICAgcmV0dXJuIHJlYWRGaXhlZDMyX2VuZCh0aGlzLmJ1ZiwgdGhpcy5wb3MgKz0gNCk7XG59O1xuXG4vKipcbiAqIFJlYWRzIGZpeGVkIDMyIGJpdHMgYXMgYSBzaWduZWQgMzIgYml0IGludGVnZXIuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBWYWx1ZSByZWFkXG4gKi9cblJlYWRlci5wcm90b3R5cGUuc2ZpeGVkMzIgPSBmdW5jdGlvbiByZWFkX3NmaXhlZDMyKCkge1xuXG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKHRoaXMucG9zICsgNCA+IHRoaXMubGVuKVxuICAgICAgICB0aHJvdyBpbmRleE91dE9mUmFuZ2UodGhpcywgNCk7XG5cbiAgICByZXR1cm4gcmVhZEZpeGVkMzJfZW5kKHRoaXMuYnVmLCB0aGlzLnBvcyArPSA0KSB8IDA7XG59O1xuXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1pbnZhbGlkLXRoaXMgKi9cblxuZnVuY3Rpb24gcmVhZEZpeGVkNjQoLyogdGhpczogUmVhZGVyICovKSB7XG5cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAodGhpcy5wb3MgKyA4ID4gdGhpcy5sZW4pXG4gICAgICAgIHRocm93IGluZGV4T3V0T2ZSYW5nZSh0aGlzLCA4KTtcblxuICAgIHJldHVybiBuZXcgTG9uZ0JpdHMocmVhZEZpeGVkMzJfZW5kKHRoaXMuYnVmLCB0aGlzLnBvcyArPSA0KSwgcmVhZEZpeGVkMzJfZW5kKHRoaXMuYnVmLCB0aGlzLnBvcyArPSA0KSk7XG59XG5cbi8qIGVzbGludC1lbmFibGUgbm8taW52YWxpZC10aGlzICovXG5cbi8qKlxuICogUmVhZHMgZml4ZWQgNjQgYml0cy5cbiAqIEBuYW1lIFJlYWRlciNmaXhlZDY0XG4gKiBAZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtMb25nfSBWYWx1ZSByZWFkXG4gKi9cblxuLyoqXG4gKiBSZWFkcyB6aWctemFnIGVuY29kZWQgZml4ZWQgNjQgYml0cy5cbiAqIEBuYW1lIFJlYWRlciNzZml4ZWQ2NFxuICogQGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7TG9uZ30gVmFsdWUgcmVhZFxuICovXG5cbi8qKlxuICogUmVhZHMgYSBmbG9hdCAoMzIgYml0KSBhcyBhIG51bWJlci5cbiAqIEBmdW5jdGlvblxuICogQHJldHVybnMge251bWJlcn0gVmFsdWUgcmVhZFxuICovXG5SZWFkZXIucHJvdG90eXBlLmZsb2F0ID0gZnVuY3Rpb24gcmVhZF9mbG9hdCgpIHtcblxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmICh0aGlzLnBvcyArIDQgPiB0aGlzLmxlbilcbiAgICAgICAgdGhyb3cgaW5kZXhPdXRPZlJhbmdlKHRoaXMsIDQpO1xuXG4gICAgdmFyIHZhbHVlID0gdXRpbC5mbG9hdC5yZWFkRmxvYXRMRSh0aGlzLmJ1ZiwgdGhpcy5wb3MpO1xuICAgIHRoaXMucG9zICs9IDQ7XG4gICAgcmV0dXJuIHZhbHVlO1xufTtcblxuLyoqXG4gKiBSZWFkcyBhIGRvdWJsZSAoNjQgYml0IGZsb2F0KSBhcyBhIG51bWJlci5cbiAqIEBmdW5jdGlvblxuICogQHJldHVybnMge251bWJlcn0gVmFsdWUgcmVhZFxuICovXG5SZWFkZXIucHJvdG90eXBlLmRvdWJsZSA9IGZ1bmN0aW9uIHJlYWRfZG91YmxlKCkge1xuXG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKHRoaXMucG9zICsgOCA+IHRoaXMubGVuKVxuICAgICAgICB0aHJvdyBpbmRleE91dE9mUmFuZ2UodGhpcywgNCk7XG5cbiAgICB2YXIgdmFsdWUgPSB1dGlsLmZsb2F0LnJlYWREb3VibGVMRSh0aGlzLmJ1ZiwgdGhpcy5wb3MpO1xuICAgIHRoaXMucG9zICs9IDg7XG4gICAgcmV0dXJuIHZhbHVlO1xufTtcblxuLyoqXG4gKiBSZWFkcyBhIHNlcXVlbmNlIG9mIGJ5dGVzIHByZWNlZWRlZCBieSBpdHMgbGVuZ3RoIGFzIGEgdmFyaW50LlxuICogQHJldHVybnMge1VpbnQ4QXJyYXl9IFZhbHVlIHJlYWRcbiAqL1xuUmVhZGVyLnByb3RvdHlwZS5ieXRlcyA9IGZ1bmN0aW9uIHJlYWRfYnl0ZXMoKSB7XG4gICAgdmFyIGxlbmd0aCA9IHRoaXMudWludDMyKCksXG4gICAgICAgIHN0YXJ0ICA9IHRoaXMucG9zLFxuICAgICAgICBlbmQgICAgPSB0aGlzLnBvcyArIGxlbmd0aDtcblxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmIChlbmQgPiB0aGlzLmxlbilcbiAgICAgICAgdGhyb3cgaW5kZXhPdXRPZlJhbmdlKHRoaXMsIGxlbmd0aCk7XG5cbiAgICB0aGlzLnBvcyArPSBsZW5ndGg7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkodGhpcy5idWYpKSAvLyBwbGFpbiBhcnJheVxuICAgICAgICByZXR1cm4gdGhpcy5idWYuc2xpY2Uoc3RhcnQsIGVuZCk7XG5cbiAgICBpZiAoc3RhcnQgPT09IGVuZCkgeyAvLyBmaXggZm9yIElFIDEwL1dpbjggYW5kIG90aGVycycgc3ViYXJyYXkgcmV0dXJuaW5nIGFycmF5IG9mIHNpemUgMVxuICAgICAgICB2YXIgbmF0aXZlQnVmZmVyID0gdXRpbC5CdWZmZXI7XG4gICAgICAgIHJldHVybiBuYXRpdmVCdWZmZXJcbiAgICAgICAgICAgID8gbmF0aXZlQnVmZmVyLmFsbG9jKDApXG4gICAgICAgICAgICA6IG5ldyB0aGlzLmJ1Zi5jb25zdHJ1Y3RvcigwKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3NsaWNlLmNhbGwodGhpcy5idWYsIHN0YXJ0LCBlbmQpO1xufTtcblxuLyoqXG4gKiBSZWFkcyBhIHN0cmluZyBwcmVjZWVkZWQgYnkgaXRzIGJ5dGUgbGVuZ3RoIGFzIGEgdmFyaW50LlxuICogQHJldHVybnMge3N0cmluZ30gVmFsdWUgcmVhZFxuICovXG5SZWFkZXIucHJvdG90eXBlLnN0cmluZyA9IGZ1bmN0aW9uIHJlYWRfc3RyaW5nKCkge1xuICAgIHZhciBieXRlcyA9IHRoaXMuYnl0ZXMoKTtcbiAgICByZXR1cm4gdXRmOC5yZWFkKGJ5dGVzLCAwLCBieXRlcy5sZW5ndGgpO1xufTtcblxuLyoqXG4gKiBTa2lwcyB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiBieXRlcyBpZiBzcGVjaWZpZWQsIG90aGVyd2lzZSBza2lwcyBhIHZhcmludC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBMZW5ndGggaWYga25vd24sIG90aGVyd2lzZSBhIHZhcmludCBpcyBhc3N1bWVkXG4gKiBAcmV0dXJucyB7UmVhZGVyfSBgdGhpc2BcbiAqL1xuUmVhZGVyLnByb3RvdHlwZS5za2lwID0gZnVuY3Rpb24gc2tpcChsZW5ndGgpIHtcbiAgICBpZiAodHlwZW9mIGxlbmd0aCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKHRoaXMucG9zICsgbGVuZ3RoID4gdGhpcy5sZW4pXG4gICAgICAgICAgICB0aHJvdyBpbmRleE91dE9mUmFuZ2UodGhpcywgbGVuZ3RoKTtcbiAgICAgICAgdGhpcy5wb3MgKz0gbGVuZ3RoO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGRvIHtcbiAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgICAgICAgaWYgKHRoaXMucG9zID49IHRoaXMubGVuKVxuICAgICAgICAgICAgICAgIHRocm93IGluZGV4T3V0T2ZSYW5nZSh0aGlzKTtcbiAgICAgICAgfSB3aGlsZSAodGhpcy5idWZbdGhpcy5wb3MrK10gJiAxMjgpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogU2tpcHMgdGhlIG5leHQgZWxlbWVudCBvZiB0aGUgc3BlY2lmaWVkIHdpcmUgdHlwZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB3aXJlVHlwZSBXaXJlIHR5cGUgcmVjZWl2ZWRcbiAqIEByZXR1cm5zIHtSZWFkZXJ9IGB0aGlzYFxuICovXG5SZWFkZXIucHJvdG90eXBlLnNraXBUeXBlID0gZnVuY3Rpb24od2lyZVR5cGUpIHtcbiAgICBzd2l0Y2ggKHdpcmVUeXBlKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIHRoaXMuc2tpcCgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHRoaXMuc2tpcCg4KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICB0aGlzLnNraXAodGhpcy51aW50MzIoKSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgd2hpbGUgKCh3aXJlVHlwZSA9IHRoaXMudWludDMyKCkgJiA3KSAhPT0gNCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2tpcFR5cGUod2lyZVR5cGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgIHRoaXMuc2tpcCg0KTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcImludmFsaWQgd2lyZSB0eXBlIFwiICsgd2lyZVR5cGUgKyBcIiBhdCBvZmZzZXQgXCIgKyB0aGlzLnBvcyk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xufTtcblxuUmVhZGVyLl9jb25maWd1cmUgPSBmdW5jdGlvbihCdWZmZXJSZWFkZXJfKSB7XG4gICAgQnVmZmVyUmVhZGVyID0gQnVmZmVyUmVhZGVyXztcbiAgICBSZWFkZXIuY3JlYXRlID0gY3JlYXRlKCk7XG4gICAgQnVmZmVyUmVhZGVyLl9jb25maWd1cmUoKTtcblxuICAgIHZhciBmbiA9IHV0aWwuTG9uZyA/IFwidG9Mb25nXCIgOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBcInRvTnVtYmVyXCI7XG4gICAgdXRpbC5tZXJnZShSZWFkZXIucHJvdG90eXBlLCB7XG5cbiAgICAgICAgaW50NjQ6IGZ1bmN0aW9uIHJlYWRfaW50NjQoKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVhZExvbmdWYXJpbnQuY2FsbCh0aGlzKVtmbl0oZmFsc2UpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHVpbnQ2NDogZnVuY3Rpb24gcmVhZF91aW50NjQoKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVhZExvbmdWYXJpbnQuY2FsbCh0aGlzKVtmbl0odHJ1ZSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2ludDY0OiBmdW5jdGlvbiByZWFkX3NpbnQ2NCgpIHtcbiAgICAgICAgICAgIHJldHVybiByZWFkTG9uZ1ZhcmludC5jYWxsKHRoaXMpLnp6RGVjb2RlKClbZm5dKGZhbHNlKTtcbiAgICAgICAgfSxcblxuICAgICAgICBmaXhlZDY0OiBmdW5jdGlvbiByZWFkX2ZpeGVkNjQoKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVhZEZpeGVkNjQuY2FsbCh0aGlzKVtmbl0odHJ1ZSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2ZpeGVkNjQ6IGZ1bmN0aW9uIHJlYWRfc2ZpeGVkNjQoKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVhZEZpeGVkNjQuY2FsbCh0aGlzKVtmbl0oZmFsc2UpO1xuICAgICAgICB9XG5cbiAgICB9KTtcbn07XG4iLCAiXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IEJ1ZmZlclJlYWRlcjtcblxuLy8gZXh0ZW5kcyBSZWFkZXJcbnZhciBSZWFkZXIgPSByZXF1aXJlKFwiLi9yZWFkZXJcIik7XG4oQnVmZmVyUmVhZGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoUmVhZGVyLnByb3RvdHlwZSkpLmNvbnN0cnVjdG9yID0gQnVmZmVyUmVhZGVyO1xuXG52YXIgdXRpbCA9IHJlcXVpcmUoXCIuL3V0aWwvbWluaW1hbFwiKTtcblxuLyoqXG4gKiBDb25zdHJ1Y3RzIGEgbmV3IGJ1ZmZlciByZWFkZXIgaW5zdGFuY2UuXG4gKiBAY2xhc3NkZXNjIFdpcmUgZm9ybWF0IHJlYWRlciB1c2luZyBub2RlIGJ1ZmZlcnMuXG4gKiBAZXh0ZW5kcyBSZWFkZXJcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtCdWZmZXJ9IGJ1ZmZlciBCdWZmZXIgdG8gcmVhZCBmcm9tXG4gKi9cbmZ1bmN0aW9uIEJ1ZmZlclJlYWRlcihidWZmZXIpIHtcbiAgICBSZWFkZXIuY2FsbCh0aGlzLCBidWZmZXIpO1xuXG4gICAgLyoqXG4gICAgICogUmVhZCBidWZmZXIuXG4gICAgICogQG5hbWUgQnVmZmVyUmVhZGVyI2J1ZlxuICAgICAqIEB0eXBlIHtCdWZmZXJ9XG4gICAgICovXG59XG5cbkJ1ZmZlclJlYWRlci5fY29uZmlndXJlID0gZnVuY3Rpb24gKCkge1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gICAgaWYgKHV0aWwuQnVmZmVyKVxuICAgICAgICBCdWZmZXJSZWFkZXIucHJvdG90eXBlLl9zbGljZSA9IHV0aWwuQnVmZmVyLnByb3RvdHlwZS5zbGljZTtcbn07XG5cblxuLyoqXG4gKiBAb3ZlcnJpZGVcbiAqL1xuQnVmZmVyUmVhZGVyLnByb3RvdHlwZS5zdHJpbmcgPSBmdW5jdGlvbiByZWFkX3N0cmluZ19idWZmZXIoKSB7XG4gICAgdmFyIGxlbiA9IHRoaXMudWludDMyKCk7IC8vIG1vZGlmaWVzIHBvc1xuICAgIHJldHVybiB0aGlzLmJ1Zi51dGY4U2xpY2VcbiAgICAgICAgPyB0aGlzLmJ1Zi51dGY4U2xpY2UodGhpcy5wb3MsIHRoaXMucG9zID0gTWF0aC5taW4odGhpcy5wb3MgKyBsZW4sIHRoaXMubGVuKSlcbiAgICAgICAgOiB0aGlzLmJ1Zi50b1N0cmluZyhcInV0Zi04XCIsIHRoaXMucG9zLCB0aGlzLnBvcyA9IE1hdGgubWluKHRoaXMucG9zICsgbGVuLCB0aGlzLmxlbikpO1xufTtcblxuLyoqXG4gKiBSZWFkcyBhIHNlcXVlbmNlIG9mIGJ5dGVzIHByZWNlZWRlZCBieSBpdHMgbGVuZ3RoIGFzIGEgdmFyaW50LlxuICogQG5hbWUgQnVmZmVyUmVhZGVyI2J5dGVzXG4gKiBAZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtCdWZmZXJ9IFZhbHVlIHJlYWRcbiAqL1xuXG5CdWZmZXJSZWFkZXIuX2NvbmZpZ3VyZSgpO1xuIiwgIlwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBTZXJ2aWNlO1xuXG52YXIgdXRpbCA9IHJlcXVpcmUoXCIuLi91dGlsL21pbmltYWxcIik7XG5cbi8vIEV4dGVuZHMgRXZlbnRFbWl0dGVyXG4oU2VydmljZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHV0aWwuRXZlbnRFbWl0dGVyLnByb3RvdHlwZSkpLmNvbnN0cnVjdG9yID0gU2VydmljZTtcblxuLyoqXG4gKiBBIHNlcnZpY2UgbWV0aG9kIGNhbGxiYWNrIGFzIHVzZWQgYnkge0BsaW5rIHJwYy5TZXJ2aWNlTWV0aG9kfFNlcnZpY2VNZXRob2R9LlxuICpcbiAqIERpZmZlcnMgZnJvbSB7QGxpbmsgUlBDSW1wbENhbGxiYWNrfSBpbiB0aGF0IGl0IGlzIGFuIGFjdHVhbCBjYWxsYmFjayBvZiBhIHNlcnZpY2UgbWV0aG9kIHdoaWNoIG1heSBub3QgcmV0dXJuIGByZXNwb25zZSA9IG51bGxgLlxuICogQHR5cGVkZWYgcnBjLlNlcnZpY2VNZXRob2RDYWxsYmFja1xuICogQHRlbXBsYXRlIFRSZXMgZXh0ZW5kcyBNZXNzYWdlPFRSZXM+XG4gKiBAdHlwZSB7ZnVuY3Rpb259XG4gKiBAcGFyYW0ge0Vycm9yfG51bGx9IGVycm9yIEVycm9yLCBpZiBhbnlcbiAqIEBwYXJhbSB7VFJlc30gW3Jlc3BvbnNlXSBSZXNwb25zZSBtZXNzYWdlXG4gKiBAcmV0dXJucyB7dW5kZWZpbmVkfVxuICovXG5cbi8qKlxuICogQSBzZXJ2aWNlIG1ldGhvZCBwYXJ0IG9mIGEge0BsaW5rIHJwYy5TZXJ2aWNlfSBhcyBjcmVhdGVkIGJ5IHtAbGluayBTZXJ2aWNlLmNyZWF0ZX0uXG4gKiBAdHlwZWRlZiBycGMuU2VydmljZU1ldGhvZFxuICogQHRlbXBsYXRlIFRSZXEgZXh0ZW5kcyBNZXNzYWdlPFRSZXE+XG4gKiBAdGVtcGxhdGUgVFJlcyBleHRlbmRzIE1lc3NhZ2U8VFJlcz5cbiAqIEB0eXBlIHtmdW5jdGlvbn1cbiAqIEBwYXJhbSB7VFJlcXxQcm9wZXJ0aWVzPFRSZXE+fSByZXF1ZXN0IFJlcXVlc3QgbWVzc2FnZSBvciBwbGFpbiBvYmplY3RcbiAqIEBwYXJhbSB7cnBjLlNlcnZpY2VNZXRob2RDYWxsYmFjazxUUmVzPn0gW2NhbGxiYWNrXSBOb2RlLXN0eWxlIGNhbGxiYWNrIGNhbGxlZCB3aXRoIHRoZSBlcnJvciwgaWYgYW55LCBhbmQgdGhlIHJlc3BvbnNlIG1lc3NhZ2VcbiAqIEByZXR1cm5zIHtQcm9taXNlPE1lc3NhZ2U8VFJlcz4+fSBQcm9taXNlIGlmIGBjYWxsYmFja2AgaGFzIGJlZW4gb21pdHRlZCwgb3RoZXJ3aXNlIGB1bmRlZmluZWRgXG4gKi9cblxuLyoqXG4gKiBDb25zdHJ1Y3RzIGEgbmV3IFJQQyBzZXJ2aWNlIGluc3RhbmNlLlxuICogQGNsYXNzZGVzYyBBbiBSUEMgc2VydmljZSBhcyByZXR1cm5lZCBieSB7QGxpbmsgU2VydmljZSNjcmVhdGV9LlxuICogQGV4cG9ydHMgcnBjLlNlcnZpY2VcbiAqIEBleHRlbmRzIHV0aWwuRXZlbnRFbWl0dGVyXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7UlBDSW1wbH0gcnBjSW1wbCBSUEMgaW1wbGVtZW50YXRpb25cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW3JlcXVlc3REZWxpbWl0ZWQ9ZmFsc2VdIFdoZXRoZXIgcmVxdWVzdHMgYXJlIGxlbmd0aC1kZWxpbWl0ZWRcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW3Jlc3BvbnNlRGVsaW1pdGVkPWZhbHNlXSBXaGV0aGVyIHJlc3BvbnNlcyBhcmUgbGVuZ3RoLWRlbGltaXRlZFxuICovXG5mdW5jdGlvbiBTZXJ2aWNlKHJwY0ltcGwsIHJlcXVlc3REZWxpbWl0ZWQsIHJlc3BvbnNlRGVsaW1pdGVkKSB7XG5cbiAgICBpZiAodHlwZW9mIHJwY0ltcGwgIT09IFwiZnVuY3Rpb25cIilcbiAgICAgICAgdGhyb3cgVHlwZUVycm9yKFwicnBjSW1wbCBtdXN0IGJlIGEgZnVuY3Rpb25cIik7XG5cbiAgICB1dGlsLkV2ZW50RW1pdHRlci5jYWxsKHRoaXMpO1xuXG4gICAgLyoqXG4gICAgICogUlBDIGltcGxlbWVudGF0aW9uLiBCZWNvbWVzIGBudWxsYCBvbmNlIHRoZSBzZXJ2aWNlIGlzIGVuZGVkLlxuICAgICAqIEB0eXBlIHtSUENJbXBsfG51bGx9XG4gICAgICovXG4gICAgdGhpcy5ycGNJbXBsID0gcnBjSW1wbDtcblxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgcmVxdWVzdHMgYXJlIGxlbmd0aC1kZWxpbWl0ZWQuXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5yZXF1ZXN0RGVsaW1pdGVkID0gQm9vbGVhbihyZXF1ZXN0RGVsaW1pdGVkKTtcblxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgcmVzcG9uc2VzIGFyZSBsZW5ndGgtZGVsaW1pdGVkLlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMucmVzcG9uc2VEZWxpbWl0ZWQgPSBCb29sZWFuKHJlc3BvbnNlRGVsaW1pdGVkKTtcbn1cblxuLyoqXG4gKiBDYWxscyBhIHNlcnZpY2UgbWV0aG9kIHRocm91Z2gge0BsaW5rIHJwYy5TZXJ2aWNlI3JwY0ltcGx8cnBjSW1wbH0uXG4gKiBAcGFyYW0ge01ldGhvZHxycGMuU2VydmljZU1ldGhvZDxUUmVxLFRSZXM+fSBtZXRob2QgUmVmbGVjdGVkIG9yIHN0YXRpYyBtZXRob2RcbiAqIEBwYXJhbSB7Q29uc3RydWN0b3I8VFJlcT59IHJlcXVlc3RDdG9yIFJlcXVlc3QgY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7Q29uc3RydWN0b3I8VFJlcz59IHJlc3BvbnNlQ3RvciBSZXNwb25zZSBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtUUmVxfFByb3BlcnRpZXM8VFJlcT59IHJlcXVlc3QgUmVxdWVzdCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdFxuICogQHBhcmFtIHtycGMuU2VydmljZU1ldGhvZENhbGxiYWNrPFRSZXM+fSBjYWxsYmFjayBTZXJ2aWNlIGNhbGxiYWNrXG4gKiBAcmV0dXJucyB7dW5kZWZpbmVkfVxuICogQHRlbXBsYXRlIFRSZXEgZXh0ZW5kcyBNZXNzYWdlPFRSZXE+XG4gKiBAdGVtcGxhdGUgVFJlcyBleHRlbmRzIE1lc3NhZ2U8VFJlcz5cbiAqL1xuU2VydmljZS5wcm90b3R5cGUucnBjQ2FsbCA9IGZ1bmN0aW9uIHJwY0NhbGwobWV0aG9kLCByZXF1ZXN0Q3RvciwgcmVzcG9uc2VDdG9yLCByZXF1ZXN0LCBjYWxsYmFjaykge1xuXG4gICAgaWYgKCFyZXF1ZXN0KVxuICAgICAgICB0aHJvdyBUeXBlRXJyb3IoXCJyZXF1ZXN0IG11c3QgYmUgc3BlY2lmaWVkXCIpO1xuXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIGlmICghY2FsbGJhY2spXG4gICAgICAgIHJldHVybiB1dGlsLmFzUHJvbWlzZShycGNDYWxsLCBzZWxmLCBtZXRob2QsIHJlcXVlc3RDdG9yLCByZXNwb25zZUN0b3IsIHJlcXVlc3QpO1xuXG4gICAgaWYgKCFzZWxmLnJwY0ltcGwpIHtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsgY2FsbGJhY2soRXJyb3IoXCJhbHJlYWR5IGVuZGVkXCIpKTsgfSwgMCk7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHNlbGYucnBjSW1wbChcbiAgICAgICAgICAgIG1ldGhvZCxcbiAgICAgICAgICAgIHJlcXVlc3RDdG9yW3NlbGYucmVxdWVzdERlbGltaXRlZCA/IFwiZW5jb2RlRGVsaW1pdGVkXCIgOiBcImVuY29kZVwiXShyZXF1ZXN0KS5maW5pc2goKSxcbiAgICAgICAgICAgIGZ1bmN0aW9uIHJwY0NhbGxiYWNrKGVyciwgcmVzcG9uc2UpIHtcblxuICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5lbWl0KFwiZXJyb3JcIiwgZXJyLCBtZXRob2QpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5lbmQoLyogZW5kZWRCeVJQQyAqLyB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoIShyZXNwb25zZSBpbnN0YW5jZW9mIHJlc3BvbnNlQ3RvcikpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gcmVzcG9uc2VDdG9yW3NlbGYucmVzcG9uc2VEZWxpbWl0ZWQgPyBcImRlY29kZURlbGltaXRlZFwiIDogXCJkZWNvZGVcIl0ocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZW1pdChcImVycm9yXCIsIGVyciwgbWV0aG9kKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhlcnIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgc2VsZi5lbWl0KFwiZGF0YVwiLCByZXNwb25zZSwgbWV0aG9kKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgcmVzcG9uc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBzZWxmLmVtaXQoXCJlcnJvclwiLCBlcnIsIG1ldGhvZCk7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IGNhbGxiYWNrKGVycik7IH0sIDApO1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbn07XG5cbi8qKlxuICogRW5kcyB0aGlzIHNlcnZpY2UgYW5kIGVtaXRzIHRoZSBgZW5kYCBldmVudC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW2VuZGVkQnlSUEM9ZmFsc2VdIFdoZXRoZXIgdGhlIHNlcnZpY2UgaGFzIGJlZW4gZW5kZWQgYnkgdGhlIFJQQyBpbXBsZW1lbnRhdGlvbi5cbiAqIEByZXR1cm5zIHtycGMuU2VydmljZX0gYHRoaXNgXG4gKi9cblNlcnZpY2UucHJvdG90eXBlLmVuZCA9IGZ1bmN0aW9uIGVuZChlbmRlZEJ5UlBDKSB7XG4gICAgaWYgKHRoaXMucnBjSW1wbCkge1xuICAgICAgICBpZiAoIWVuZGVkQnlSUEMpIC8vIHNpZ25hbCBlbmQgdG8gcnBjSW1wbFxuICAgICAgICAgICAgdGhpcy5ycGNJbXBsKG51bGwsIG51bGwsIG51bGwpO1xuICAgICAgICB0aGlzLnJwY0ltcGwgPSBudWxsO1xuICAgICAgICB0aGlzLmVtaXQoXCJlbmRcIikub2ZmKCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xufTtcbiIsICJcInVzZSBzdHJpY3RcIjtcblxuLyoqXG4gKiBTdHJlYW1pbmcgUlBDIGhlbHBlcnMuXG4gKiBAbmFtZXNwYWNlXG4gKi9cbnZhciBycGMgPSBleHBvcnRzO1xuXG4vKipcbiAqIFJQQyBpbXBsZW1lbnRhdGlvbiBwYXNzZWQgdG8ge0BsaW5rIFNlcnZpY2UjY3JlYXRlfSBwZXJmb3JtaW5nIGEgc2VydmljZSByZXF1ZXN0IG9uIG5ldHdvcmsgbGV2ZWwsIGkuZS4gYnkgdXRpbGl6aW5nIGh0dHAgcmVxdWVzdHMgb3Igd2Vic29ja2V0cy5cbiAqIEB0eXBlZGVmIFJQQ0ltcGxcbiAqIEB0eXBlIHtmdW5jdGlvbn1cbiAqIEBwYXJhbSB7TWV0aG9kfHJwYy5TZXJ2aWNlTWV0aG9kPE1lc3NhZ2U8e30+LE1lc3NhZ2U8e30+Pn0gbWV0aG9kIFJlZmxlY3RlZCBvciBzdGF0aWMgbWV0aG9kIGJlaW5nIGNhbGxlZFxuICogQHBhcmFtIHtVaW50OEFycmF5fSByZXF1ZXN0RGF0YSBSZXF1ZXN0IGRhdGFcbiAqIEBwYXJhbSB7UlBDSW1wbENhbGxiYWNrfSBjYWxsYmFjayBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge3VuZGVmaW5lZH1cbiAqIEBleGFtcGxlXG4gKiBmdW5jdGlvbiBycGNJbXBsKG1ldGhvZCwgcmVxdWVzdERhdGEsIGNhbGxiYWNrKSB7XG4gKiAgICAgaWYgKHByb3RvYnVmLnV0aWwubGNGaXJzdChtZXRob2QubmFtZSkgIT09IFwibXlNZXRob2RcIikgLy8gY29tcGF0aWJsZSB3aXRoIHN0YXRpYyBjb2RlXG4gKiAgICAgICAgIHRocm93IEVycm9yKFwibm8gc3VjaCBtZXRob2RcIik7XG4gKiAgICAgYXN5bmNocm9ub3VzbHlPYnRhaW5BUmVzcG9uc2UocmVxdWVzdERhdGEsIGZ1bmN0aW9uKGVyciwgcmVzcG9uc2VEYXRhKSB7XG4gKiAgICAgICAgIGNhbGxiYWNrKGVyciwgcmVzcG9uc2VEYXRhKTtcbiAqICAgICB9KTtcbiAqIH1cbiAqL1xuXG4vKipcbiAqIE5vZGUtc3R5bGUgY2FsbGJhY2sgYXMgdXNlZCBieSB7QGxpbmsgUlBDSW1wbH0uXG4gKiBAdHlwZWRlZiBSUENJbXBsQ2FsbGJhY2tcbiAqIEB0eXBlIHtmdW5jdGlvbn1cbiAqIEBwYXJhbSB7RXJyb3J8bnVsbH0gZXJyb3IgRXJyb3IsIGlmIGFueSwgb3RoZXJ3aXNlIGBudWxsYFxuICogQHBhcmFtIHtVaW50OEFycmF5fG51bGx9IFtyZXNwb25zZV0gUmVzcG9uc2UgZGF0YSBvciBgbnVsbGAgdG8gc2lnbmFsIGVuZCBvZiBzdHJlYW0sIGlmIHRoZXJlIGhhc24ndCBiZWVuIGFuIGVycm9yXG4gKiBAcmV0dXJucyB7dW5kZWZpbmVkfVxuICovXG5cbnJwYy5TZXJ2aWNlID0gcmVxdWlyZShcIi4vcnBjL3NlcnZpY2VcIik7XG4iLCAiXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vKipcbiAqIE5hbWVkIHJvb3RzLlxuICogVGhpcyBpcyB3aGVyZSBwYmpzIHN0b3JlcyBnZW5lcmF0ZWQgc3RydWN0dXJlcyAodGhlIG9wdGlvbiBgLXIsIC0tcm9vdGAgc3BlY2lmaWVzIGEgbmFtZSkuXG4gKiBDYW4gYWxzbyBiZSB1c2VkIG1hbnVhbGx5IHRvIG1ha2Ugcm9vdHMgYXZhaWxhYmxlIGFjcm9zcyBtb2R1bGVzLlxuICogQG5hbWUgcm9vdHNcbiAqIEB0eXBlIHtPYmplY3QuPHN0cmluZyxSb290Pn1cbiAqIEBleGFtcGxlXG4gKiAvLyBwYmpzIC1yIG15cm9vdCAtbyBjb21waWxlZC5qcyAuLi5cbiAqXG4gKiAvLyBpbiBhbm90aGVyIG1vZHVsZTpcbiAqIHJlcXVpcmUoXCIuL2NvbXBpbGVkLmpzXCIpO1xuICpcbiAqIC8vIGluIGFueSBzdWJzZXF1ZW50IG1vZHVsZTpcbiAqIHZhciByb290ID0gcHJvdG9idWYucm9vdHNbXCJteXJvb3RcIl07XG4gKi9cbiIsICJcInVzZSBzdHJpY3RcIjtcbnZhciBwcm90b2J1ZiA9IGV4cG9ydHM7XG5cbi8qKlxuICogQnVpbGQgdHlwZSwgb25lIG9mIGBcImZ1bGxcImAsIGBcImxpZ2h0XCJgIG9yIGBcIm1pbmltYWxcImAuXG4gKiBAbmFtZSBidWlsZFxuICogQHR5cGUge3N0cmluZ31cbiAqIEBjb25zdFxuICovXG5wcm90b2J1Zi5idWlsZCA9IFwibWluaW1hbFwiO1xuXG4vLyBTZXJpYWxpemF0aW9uXG5wcm90b2J1Zi5Xcml0ZXIgICAgICAgPSByZXF1aXJlKFwiLi93cml0ZXJcIik7XG5wcm90b2J1Zi5CdWZmZXJXcml0ZXIgPSByZXF1aXJlKFwiLi93cml0ZXJfYnVmZmVyXCIpO1xucHJvdG9idWYuUmVhZGVyICAgICAgID0gcmVxdWlyZShcIi4vcmVhZGVyXCIpO1xucHJvdG9idWYuQnVmZmVyUmVhZGVyID0gcmVxdWlyZShcIi4vcmVhZGVyX2J1ZmZlclwiKTtcblxuLy8gVXRpbGl0eVxucHJvdG9idWYudXRpbCAgICAgICAgID0gcmVxdWlyZShcIi4vdXRpbC9taW5pbWFsXCIpO1xucHJvdG9idWYucnBjICAgICAgICAgID0gcmVxdWlyZShcIi4vcnBjXCIpO1xucHJvdG9idWYucm9vdHMgICAgICAgID0gcmVxdWlyZShcIi4vcm9vdHNcIik7XG5wcm90b2J1Zi5jb25maWd1cmUgICAgPSBjb25maWd1cmU7XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4vKipcbiAqIFJlY29uZmlndXJlcyB0aGUgbGlicmFyeSBhY2NvcmRpbmcgdG8gdGhlIGVudmlyb25tZW50LlxuICogQHJldHVybnMge3VuZGVmaW5lZH1cbiAqL1xuZnVuY3Rpb24gY29uZmlndXJlKCkge1xuICAgIHByb3RvYnVmLnV0aWwuX2NvbmZpZ3VyZSgpO1xuICAgIHByb3RvYnVmLldyaXRlci5fY29uZmlndXJlKHByb3RvYnVmLkJ1ZmZlcldyaXRlcik7XG4gICAgcHJvdG9idWYuUmVhZGVyLl9jb25maWd1cmUocHJvdG9idWYuQnVmZmVyUmVhZGVyKTtcbn1cblxuLy8gU2V0IHVwIGJ1ZmZlciB1dGlsaXR5IGFjY29yZGluZyB0byB0aGUgZW52aXJvbm1lbnRcbmNvbmZpZ3VyZSgpO1xuIiwgIi8vIG1pbmltYWwgbGlicmFyeSBlbnRyeSBwb2ludC5cblxuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuL3NyYy9pbmRleC1taW5pbWFsXCIpO1xuIiwgIi8qZXNsaW50LWRpc2FibGUgYmxvY2stc2NvcGVkLXZhciwgaWQtbGVuZ3RoLCBuby1jb250cm9sLXJlZ2V4LCBuby1tYWdpYy1udW1iZXJzLCBuby1wcm90b3R5cGUtYnVpbHRpbnMsIG5vLXJlZGVjbGFyZSwgbm8tc2hhZG93LCBuby12YXIsIHNvcnQtdmFycyovXG5cInVzZSBzdHJpY3RcIjtcblxudmFyICRwcm90b2J1ZiA9IHJlcXVpcmUoXCJwcm90b2J1ZmpzL21pbmltYWxcIik7XG5cbi8vIENvbW1vbiBhbGlhc2VzXG52YXIgJFJlYWRlciA9ICRwcm90b2J1Zi5SZWFkZXIsICRXcml0ZXIgPSAkcHJvdG9idWYuV3JpdGVyLCAkdXRpbCA9ICRwcm90b2J1Zi51dGlsO1xuXG4vLyBFeHBvcnRlZCByb290IG5hbWVzcGFjZVxudmFyICRyb290ID0gJHByb3RvYnVmLnJvb3RzW1wiZGVmYXVsdFwiXSB8fCAoJHByb3RvYnVmLnJvb3RzW1wiZGVmYXVsdFwiXSA9IHt9KTtcblxuJHJvb3QudHJhbnNpdF9yZWFsdGltZSA9IChmdW5jdGlvbigpIHtcblxuICAgIC8qKlxuICAgICAqIE5hbWVzcGFjZSB0cmFuc2l0X3JlYWx0aW1lLlxuICAgICAqIEBleHBvcnRzIHRyYW5zaXRfcmVhbHRpbWVcbiAgICAgKiBAbmFtZXNwYWNlXG4gICAgICovXG4gICAgdmFyIHRyYW5zaXRfcmVhbHRpbWUgPSB7fTtcblxuICAgIHRyYW5zaXRfcmVhbHRpbWUuRmVlZE1lc3NhZ2UgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBGZWVkTWVzc2FnZS5cbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWVcbiAgICAgICAgICogQGludGVyZmFjZSBJRmVlZE1lc3NhZ2VcbiAgICAgICAgICogQHByb3BlcnR5IHt0cmFuc2l0X3JlYWx0aW1lLklGZWVkSGVhZGVyfSBoZWFkZXIgRmVlZE1lc3NhZ2UgaGVhZGVyXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7QXJyYXkuPHRyYW5zaXRfcmVhbHRpbWUuSUZlZWRFbnRpdHk+fG51bGx9IFtlbnRpdHldIEZlZWRNZXNzYWdlIGVudGl0eVxuICAgICAgICAgKi9cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBGZWVkTWVzc2FnZS5cbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWVcbiAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgRmVlZE1lc3NhZ2UuXG4gICAgICAgICAqIEBpbXBsZW1lbnRzIElGZWVkTWVzc2FnZVxuICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICogQHBhcmFtIHt0cmFuc2l0X3JlYWx0aW1lLklGZWVkTWVzc2FnZT19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gRmVlZE1lc3NhZ2UocHJvcGVydGllcykge1xuICAgICAgICAgICAgdGhpcy5lbnRpdHkgPSBbXTtcbiAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogRmVlZE1lc3NhZ2UgaGVhZGVyLlxuICAgICAgICAgKiBAbWVtYmVyIHt0cmFuc2l0X3JlYWx0aW1lLklGZWVkSGVhZGVyfSBoZWFkZXJcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuRmVlZE1lc3NhZ2VcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBGZWVkTWVzc2FnZS5wcm90b3R5cGUuaGVhZGVyID0gbnVsbDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRmVlZE1lc3NhZ2UgZW50aXR5LlxuICAgICAgICAgKiBAbWVtYmVyIHtBcnJheS48dHJhbnNpdF9yZWFsdGltZS5JRmVlZEVudGl0eT59IGVudGl0eVxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5GZWVkTWVzc2FnZVxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIEZlZWRNZXNzYWdlLnByb3RvdHlwZS5lbnRpdHkgPSAkdXRpbC5lbXB0eUFycmF5O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IEZlZWRNZXNzYWdlIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGNyZWF0ZVxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5GZWVkTWVzc2FnZVxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7dHJhbnNpdF9yZWFsdGltZS5JRmVlZE1lc3NhZ2U9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICogQHJldHVybnMge3RyYW5zaXRfcmVhbHRpbWUuRmVlZE1lc3NhZ2V9IEZlZWRNZXNzYWdlIGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBGZWVkTWVzc2FnZS5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUocHJvcGVydGllcykge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBGZWVkTWVzc2FnZShwcm9wZXJ0aWVzKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIEZlZWRNZXNzYWdlIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIHRyYW5zaXRfcmVhbHRpbWUuRmVlZE1lc3NhZ2UudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuRmVlZE1lc3NhZ2VcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuSUZlZWRNZXNzYWdlfSBtZXNzYWdlIEZlZWRNZXNzYWdlIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgKi9cbiAgICAgICAgRmVlZE1lc3NhZ2UuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICRyb290LnRyYW5zaXRfcmVhbHRpbWUuRmVlZEhlYWRlci5lbmNvZGUobWVzc2FnZS5oZWFkZXIsIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmVudGl0eSAhPSBudWxsICYmIG1lc3NhZ2UuZW50aXR5Lmxlbmd0aClcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1lc3NhZ2UuZW50aXR5Lmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLkZlZWRFbnRpdHkuZW5jb2RlKG1lc3NhZ2UuZW50aXR5W2ldLCB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgRmVlZE1lc3NhZ2UgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgdHJhbnNpdF9yZWFsdGltZS5GZWVkTWVzc2FnZS52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZFxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5GZWVkTWVzc2FnZVxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7dHJhbnNpdF9yZWFsdGltZS5JRmVlZE1lc3NhZ2V9IG1lc3NhZ2UgRmVlZE1lc3NhZ2UgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAqL1xuICAgICAgICBGZWVkTWVzc2FnZS5lbmNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGUobWVzc2FnZSwgd3JpdGVyKS5sZGVsaW0oKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRGVjb2RlcyBhIEZlZWRNZXNzYWdlIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuRmVlZE1lc3NhZ2VcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICogQHJldHVybnMge3RyYW5zaXRfcmVhbHRpbWUuRmVlZE1lc3NhZ2V9IEZlZWRNZXNzYWdlXG4gICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgKi9cbiAgICAgICAgRmVlZE1lc3NhZ2UuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoLCBlcnJvcikge1xuICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuRmVlZE1lc3NhZ2UoKTtcbiAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICBpZiAodGFnID09PSBlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuaGVhZGVyID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5GZWVkSGVhZGVyLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgMjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEobWVzc2FnZS5lbnRpdHkgJiYgbWVzc2FnZS5lbnRpdHkubGVuZ3RoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVudGl0eSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbnRpdHkucHVzaCgkcm9vdC50cmFuc2l0X3JlYWx0aW1lLkZlZWRFbnRpdHkuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFtZXNzYWdlLmhhc093blByb3BlcnR5KFwiaGVhZGVyXCIpKVxuICAgICAgICAgICAgICAgIHRocm93ICR1dGlsLlByb3RvY29sRXJyb3IoXCJtaXNzaW5nIHJlcXVpcmVkICdoZWFkZXInXCIsIHsgaW5zdGFuY2U6IG1lc3NhZ2UgfSk7XG4gICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRGVjb2RlcyBhIEZlZWRNZXNzYWdlIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuXG4gICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWRcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuRmVlZE1lc3NhZ2VcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICogQHJldHVybnMge3RyYW5zaXRfcmVhbHRpbWUuRmVlZE1lc3NhZ2V9IEZlZWRNZXNzYWdlXG4gICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgKi9cbiAgICAgICAgRmVlZE1lc3NhZ2UuZGVjb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkKHJlYWRlcikge1xuICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgcmVhZGVyID0gbmV3ICRSZWFkZXIocmVhZGVyKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFZlcmlmaWVzIGEgRmVlZE1lc3NhZ2UgbWVzc2FnZS5cbiAgICAgICAgICogQGZ1bmN0aW9uIHZlcmlmeVxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5GZWVkTWVzc2FnZVxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeVxuICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9IGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdFxuICAgICAgICAgKi9cbiAgICAgICAgRmVlZE1lc3NhZ2UudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSAhPT0gXCJvYmplY3RcIiB8fCBtZXNzYWdlID09PSBudWxsKVxuICAgICAgICAgICAgICAgIHJldHVybiBcIm9iamVjdCBleHBlY3RlZFwiO1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHZhciBlcnJvciA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuRmVlZEhlYWRlci52ZXJpZnkobWVzc2FnZS5oZWFkZXIpO1xuICAgICAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiaGVhZGVyLlwiICsgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5lbnRpdHkgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiZW50aXR5XCIpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KG1lc3NhZ2UuZW50aXR5KSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiZW50aXR5OiBhcnJheSBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVzc2FnZS5lbnRpdHkubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5GZWVkRW50aXR5LnZlcmlmeShtZXNzYWdlLmVudGl0eVtpXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcImVudGl0eS5cIiArIGVycm9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDcmVhdGVzIGEgRmVlZE1lc3NhZ2UgbWVzc2FnZSBmcm9tIGEgcGxhaW4gb2JqZWN0LiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byB0aGVpciByZXNwZWN0aXZlIGludGVybmFsIHR5cGVzLlxuICAgICAgICAgKiBAZnVuY3Rpb24gZnJvbU9iamVjdFxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5GZWVkTWVzc2FnZVxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG9iamVjdCBQbGFpbiBvYmplY3RcbiAgICAgICAgICogQHJldHVybnMge3RyYW5zaXRfcmVhbHRpbWUuRmVlZE1lc3NhZ2V9IEZlZWRNZXNzYWdlXG4gICAgICAgICAqL1xuICAgICAgICBGZWVkTWVzc2FnZS5mcm9tT2JqZWN0ID0gZnVuY3Rpb24gZnJvbU9iamVjdChvYmplY3QpIHtcbiAgICAgICAgICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLkZlZWRNZXNzYWdlKVxuICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICAgICAgICB2YXIgbWVzc2FnZSA9IG5ldyAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLkZlZWRNZXNzYWdlKCk7XG4gICAgICAgICAgICBpZiAob2JqZWN0LmhlYWRlciAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmplY3QuaGVhZGVyICE9PSBcIm9iamVjdFwiKVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoXCIudHJhbnNpdF9yZWFsdGltZS5GZWVkTWVzc2FnZS5oZWFkZXI6IG9iamVjdCBleHBlY3RlZFwiKTtcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmhlYWRlciA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuRmVlZEhlYWRlci5mcm9tT2JqZWN0KG9iamVjdC5oZWFkZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9iamVjdC5lbnRpdHkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkob2JqZWN0LmVudGl0eSkpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcihcIi50cmFuc2l0X3JlYWx0aW1lLkZlZWRNZXNzYWdlLmVudGl0eTogYXJyYXkgZXhwZWN0ZWRcIik7XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5lbnRpdHkgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9iamVjdC5lbnRpdHkubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmplY3QuZW50aXR5W2ldICE9PSBcIm9iamVjdFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgVHlwZUVycm9yKFwiLnRyYW5zaXRfcmVhbHRpbWUuRmVlZE1lc3NhZ2UuZW50aXR5OiBvYmplY3QgZXhwZWN0ZWRcIik7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW50aXR5W2ldID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5GZWVkRW50aXR5LmZyb21PYmplY3Qob2JqZWN0LmVudGl0eVtpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIEZlZWRNZXNzYWdlIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC5cbiAgICAgICAgICogQGZ1bmN0aW9uIHRvT2JqZWN0XG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLkZlZWRNZXNzYWdlXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHt0cmFuc2l0X3JlYWx0aW1lLkZlZWRNZXNzYWdlfSBtZXNzYWdlIEZlZWRNZXNzYWdlXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9uc30gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9uc1xuICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxuICAgICAgICAgKi9cbiAgICAgICAgRmVlZE1lc3NhZ2UudG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdChtZXNzYWdlLCBvcHRpb25zKSB7XG4gICAgICAgICAgICBpZiAoIW9wdGlvbnMpXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgICAgICAgdmFyIG9iamVjdCA9IHt9O1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuYXJyYXlzIHx8IG9wdGlvbnMuZGVmYXVsdHMpXG4gICAgICAgICAgICAgICAgb2JqZWN0LmVudGl0eSA9IFtdO1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGVmYXVsdHMpXG4gICAgICAgICAgICAgICAgb2JqZWN0LmhlYWRlciA9IG51bGw7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5oZWFkZXIgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiaGVhZGVyXCIpKVxuICAgICAgICAgICAgICAgIG9iamVjdC5oZWFkZXIgPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLkZlZWRIZWFkZXIudG9PYmplY3QobWVzc2FnZS5oZWFkZXIsIG9wdGlvbnMpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZW50aXR5ICYmIG1lc3NhZ2UuZW50aXR5Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIG9iamVjdC5lbnRpdHkgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1lc3NhZ2UuZW50aXR5Lmxlbmd0aDsgKytqKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3QuZW50aXR5W2pdID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5GZWVkRW50aXR5LnRvT2JqZWN0KG1lc3NhZ2UuZW50aXR5W2pdLCBvcHRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbnZlcnRzIHRoaXMgRmVlZE1lc3NhZ2UgdG8gSlNPTi5cbiAgICAgICAgICogQGZ1bmN0aW9uIHRvSlNPTlxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5GZWVkTWVzc2FnZVxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBKU09OIG9iamVjdFxuICAgICAgICAgKi9cbiAgICAgICAgRmVlZE1lc3NhZ2UucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsICRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXRzIHRoZSBkZWZhdWx0IHR5cGUgdXJsIGZvciBGZWVkTWVzc2FnZVxuICAgICAgICAgKiBAZnVuY3Rpb24gZ2V0VHlwZVVybFxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5GZWVkTWVzc2FnZVxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbdHlwZVVybFByZWZpeF0geW91ciBjdXN0b20gdHlwZVVybFByZWZpeChkZWZhdWx0IFwidHlwZS5nb29nbGVhcGlzLmNvbVwiKVxuICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgZGVmYXVsdCB0eXBlIHVybFxuICAgICAgICAgKi9cbiAgICAgICAgRmVlZE1lc3NhZ2UuZ2V0VHlwZVVybCA9IGZ1bmN0aW9uIGdldFR5cGVVcmwodHlwZVVybFByZWZpeCkge1xuICAgICAgICAgICAgaWYgKHR5cGVVcmxQcmVmaXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHR5cGVVcmxQcmVmaXggPSBcInR5cGUuZ29vZ2xlYXBpcy5jb21cIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0eXBlVXJsUHJlZml4ICsgXCIvdHJhbnNpdF9yZWFsdGltZS5GZWVkTWVzc2FnZVwiO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBGZWVkTWVzc2FnZTtcbiAgICB9KSgpO1xuXG4gICAgdHJhbnNpdF9yZWFsdGltZS5GZWVkSGVhZGVyID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgRmVlZEhlYWRlci5cbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWVcbiAgICAgICAgICogQGludGVyZmFjZSBJRmVlZEhlYWRlclxuICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gZ3Rmc19yZWFsdGltZV92ZXJzaW9uIEZlZWRIZWFkZXIgZ3Rmc19yZWFsdGltZV92ZXJzaW9uXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7dHJhbnNpdF9yZWFsdGltZS5GZWVkSGVhZGVyLkluY3JlbWVudGFsaXR5fG51bGx9IFtpbmNyZW1lbnRhbGl0eV0gRmVlZEhlYWRlciBpbmNyZW1lbnRhbGl0eVxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbdGltZXN0YW1wXSBGZWVkSGVhZGVyIHRpbWVzdGFtcFxuICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbZmVlZF92ZXJzaW9uXSBGZWVkSGVhZGVyIGZlZWRfdmVyc2lvblxuICAgICAgICAgKi9cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBGZWVkSGVhZGVyLlxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZVxuICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBGZWVkSGVhZGVyLlxuICAgICAgICAgKiBAaW1wbGVtZW50cyBJRmVlZEhlYWRlclxuICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICogQHBhcmFtIHt0cmFuc2l0X3JlYWx0aW1lLklGZWVkSGVhZGVyPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBGZWVkSGVhZGVyKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogRmVlZEhlYWRlciBndGZzX3JlYWx0aW1lX3ZlcnNpb24uXG4gICAgICAgICAqIEBtZW1iZXIge3N0cmluZ30gZ3Rmc19yZWFsdGltZV92ZXJzaW9uXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLkZlZWRIZWFkZXJcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBGZWVkSGVhZGVyLnByb3RvdHlwZS5ndGZzX3JlYWx0aW1lX3ZlcnNpb24gPSBcIlwiO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGZWVkSGVhZGVyIGluY3JlbWVudGFsaXR5LlxuICAgICAgICAgKiBAbWVtYmVyIHt0cmFuc2l0X3JlYWx0aW1lLkZlZWRIZWFkZXIuSW5jcmVtZW50YWxpdHl9IGluY3JlbWVudGFsaXR5XG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLkZlZWRIZWFkZXJcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBGZWVkSGVhZGVyLnByb3RvdHlwZS5pbmNyZW1lbnRhbGl0eSA9IDA7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZlZWRIZWFkZXIgdGltZXN0YW1wLlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9IHRpbWVzdGFtcFxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5GZWVkSGVhZGVyXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgRmVlZEhlYWRlci5wcm90b3R5cGUudGltZXN0YW1wID0gJHV0aWwuTG9uZyA/ICR1dGlsLkxvbmcuZnJvbUJpdHMoMCwwLHRydWUpIDogMDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRmVlZEhlYWRlciBmZWVkX3ZlcnNpb24uXG4gICAgICAgICAqIEBtZW1iZXIge3N0cmluZ30gZmVlZF92ZXJzaW9uXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLkZlZWRIZWFkZXJcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBGZWVkSGVhZGVyLnByb3RvdHlwZS5mZWVkX3ZlcnNpb24gPSBcIlwiO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IEZlZWRIZWFkZXIgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLlxuICAgICAgICAgKiBAZnVuY3Rpb24gY3JlYXRlXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLkZlZWRIZWFkZXJcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuSUZlZWRIZWFkZXI9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICogQHJldHVybnMge3RyYW5zaXRfcmVhbHRpbWUuRmVlZEhlYWRlcn0gRmVlZEhlYWRlciBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgRmVlZEhlYWRlci5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUocHJvcGVydGllcykge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBGZWVkSGVhZGVyKHByb3BlcnRpZXMpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgRmVlZEhlYWRlciBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayB0cmFuc2l0X3JlYWx0aW1lLkZlZWRIZWFkZXIudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuRmVlZEhlYWRlclxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7dHJhbnNpdF9yZWFsdGltZS5JRmVlZEhlYWRlcn0gbWVzc2FnZSBGZWVkSGVhZGVyIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgKi9cbiAgICAgICAgRmVlZEhlYWRlci5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAyID0qLzEwKS5zdHJpbmcobWVzc2FnZS5ndGZzX3JlYWx0aW1lX3ZlcnNpb24pO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaW5jcmVtZW50YWxpdHkgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImluY3JlbWVudGFsaXR5XCIpKVxuICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMCA9Ki8xNikuaW50MzIobWVzc2FnZS5pbmNyZW1lbnRhbGl0eSk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS50aW1lc3RhbXAgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInRpbWVzdGFtcFwiKSlcbiAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDMsIHdpcmVUeXBlIDAgPSovMjQpLnVpbnQ2NChtZXNzYWdlLnRpbWVzdGFtcCk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5mZWVkX3ZlcnNpb24gIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImZlZWRfdmVyc2lvblwiKSlcbiAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDQsIHdpcmVUeXBlIDIgPSovMzQpLnN0cmluZyhtZXNzYWdlLmZlZWRfdmVyc2lvbik7XG4gICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgRmVlZEhlYWRlciBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayB0cmFuc2l0X3JlYWx0aW1lLkZlZWRIZWFkZXIudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuRmVlZEhlYWRlclxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7dHJhbnNpdF9yZWFsdGltZS5JRmVlZEhlYWRlcn0gbWVzc2FnZSBGZWVkSGVhZGVyIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgKi9cbiAgICAgICAgRmVlZEhlYWRlci5lbmNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGUobWVzc2FnZSwgd3JpdGVyKS5sZGVsaW0oKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRGVjb2RlcyBhIEZlZWRIZWFkZXIgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5GZWVkSGVhZGVyXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAqIEByZXR1cm5zIHt0cmFuc2l0X3JlYWx0aW1lLkZlZWRIZWFkZXJ9IEZlZWRIZWFkZXJcbiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAqL1xuICAgICAgICBGZWVkSGVhZGVyLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCwgZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLkZlZWRIZWFkZXIoKTtcbiAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICBpZiAodGFnID09PSBlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZ3Rmc19yZWFsdGltZV92ZXJzaW9uID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIDI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuaW5jcmVtZW50YWxpdHkgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnRpbWVzdGFtcCA9IHJlYWRlci51aW50NjQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSA0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmZlZWRfdmVyc2lvbiA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIW1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJndGZzX3JlYWx0aW1lX3ZlcnNpb25cIikpXG4gICAgICAgICAgICAgICAgdGhyb3cgJHV0aWwuUHJvdG9jb2xFcnJvcihcIm1pc3NpbmcgcmVxdWlyZWQgJ2d0ZnNfcmVhbHRpbWVfdmVyc2lvbidcIiwgeyBpbnN0YW5jZTogbWVzc2FnZSB9KTtcbiAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWNvZGVzIGEgRmVlZEhlYWRlciBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLlxuICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLkZlZWRIZWFkZXJcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICogQHJldHVybnMge3RyYW5zaXRfcmVhbHRpbWUuRmVlZEhlYWRlcn0gRmVlZEhlYWRlclxuICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICovXG4gICAgICAgIEZlZWRIZWFkZXIuZGVjb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkKHJlYWRlcikge1xuICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgcmVhZGVyID0gbmV3ICRSZWFkZXIocmVhZGVyKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFZlcmlmaWVzIGEgRmVlZEhlYWRlciBtZXNzYWdlLlxuICAgICAgICAgKiBAZnVuY3Rpb24gdmVyaWZ5XG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLkZlZWRIZWFkZXJcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnlcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfSBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3RcbiAgICAgICAgICovXG4gICAgICAgIEZlZWRIZWFkZXIudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSAhPT0gXCJvYmplY3RcIiB8fCBtZXNzYWdlID09PSBudWxsKVxuICAgICAgICAgICAgICAgIHJldHVybiBcIm9iamVjdCBleHBlY3RlZFwiO1xuICAgICAgICAgICAgaWYgKCEkdXRpbC5pc1N0cmluZyhtZXNzYWdlLmd0ZnNfcmVhbHRpbWVfdmVyc2lvbikpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiZ3Rmc19yZWFsdGltZV92ZXJzaW9uOiBzdHJpbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmluY3JlbWVudGFsaXR5ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImluY3JlbWVudGFsaXR5XCIpKVxuICAgICAgICAgICAgICAgIHN3aXRjaCAobWVzc2FnZS5pbmNyZW1lbnRhbGl0eSkge1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImluY3JlbWVudGFsaXR5OiBlbnVtIHZhbHVlIGV4cGVjdGVkXCI7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UudGltZXN0YW1wICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInRpbWVzdGFtcFwiKSlcbiAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLnRpbWVzdGFtcCkgJiYgIShtZXNzYWdlLnRpbWVzdGFtcCAmJiAkdXRpbC5pc0ludGVnZXIobWVzc2FnZS50aW1lc3RhbXAubG93KSAmJiAkdXRpbC5pc0ludGVnZXIobWVzc2FnZS50aW1lc3RhbXAuaGlnaCkpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJ0aW1lc3RhbXA6IGludGVnZXJ8TG9uZyBleHBlY3RlZFwiO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZmVlZF92ZXJzaW9uICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImZlZWRfdmVyc2lvblwiKSlcbiAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzU3RyaW5nKG1lc3NhZ2UuZmVlZF92ZXJzaW9uKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiZmVlZF92ZXJzaW9uOiBzdHJpbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDcmVhdGVzIGEgRmVlZEhlYWRlciBtZXNzYWdlIGZyb20gYSBwbGFpbiBvYmplY3QuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIHRoZWlyIHJlc3BlY3RpdmUgaW50ZXJuYWwgdHlwZXMuXG4gICAgICAgICAqIEBmdW5jdGlvbiBmcm9tT2JqZWN0XG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLkZlZWRIZWFkZXJcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBvYmplY3QgUGxhaW4gb2JqZWN0XG4gICAgICAgICAqIEByZXR1cm5zIHt0cmFuc2l0X3JlYWx0aW1lLkZlZWRIZWFkZXJ9IEZlZWRIZWFkZXJcbiAgICAgICAgICovXG4gICAgICAgIEZlZWRIZWFkZXIuZnJvbU9iamVjdCA9IGZ1bmN0aW9uIGZyb21PYmplY3Qob2JqZWN0KSB7XG4gICAgICAgICAgICBpZiAob2JqZWN0IGluc3RhbmNlb2YgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5GZWVkSGVhZGVyKVxuICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICAgICAgICB2YXIgbWVzc2FnZSA9IG5ldyAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLkZlZWRIZWFkZXIoKTtcbiAgICAgICAgICAgIGlmIChvYmplY3QuZ3Rmc19yZWFsdGltZV92ZXJzaW9uICE9IG51bGwpXG4gICAgICAgICAgICAgICAgbWVzc2FnZS5ndGZzX3JlYWx0aW1lX3ZlcnNpb24gPSBTdHJpbmcob2JqZWN0Lmd0ZnNfcmVhbHRpbWVfdmVyc2lvbik7XG4gICAgICAgICAgICBzd2l0Y2ggKG9iamVjdC5pbmNyZW1lbnRhbGl0eSkge1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9iamVjdC5pbmNyZW1lbnRhbGl0eSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmluY3JlbWVudGFsaXR5ID0gb2JqZWN0LmluY3JlbWVudGFsaXR5O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiRlVMTF9EQVRBU0VUXCI6XG4gICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5pbmNyZW1lbnRhbGl0eSA9IDA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiRElGRkVSRU5USUFMXCI6XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5pbmNyZW1lbnRhbGl0eSA9IDE7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob2JqZWN0LnRpbWVzdGFtcCAhPSBudWxsKVxuICAgICAgICAgICAgICAgIGlmICgkdXRpbC5Mb25nKVxuICAgICAgICAgICAgICAgICAgICAobWVzc2FnZS50aW1lc3RhbXAgPSAkdXRpbC5Mb25nLmZyb21WYWx1ZShvYmplY3QudGltZXN0YW1wKSkudW5zaWduZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBvYmplY3QudGltZXN0YW1wID09PSBcInN0cmluZ1wiKVxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnRpbWVzdGFtcCA9IHBhcnNlSW50KG9iamVjdC50aW1lc3RhbXAsIDEwKTtcbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2Ygb2JqZWN0LnRpbWVzdGFtcCA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS50aW1lc3RhbXAgPSBvYmplY3QudGltZXN0YW1wO1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBvYmplY3QudGltZXN0YW1wID09PSBcIm9iamVjdFwiKVxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnRpbWVzdGFtcCA9IG5ldyAkdXRpbC5Mb25nQml0cyhvYmplY3QudGltZXN0YW1wLmxvdyA+Pj4gMCwgb2JqZWN0LnRpbWVzdGFtcC5oaWdoID4+PiAwKS50b051bWJlcih0cnVlKTtcbiAgICAgICAgICAgIGlmIChvYmplY3QuZmVlZF92ZXJzaW9uICE9IG51bGwpXG4gICAgICAgICAgICAgICAgbWVzc2FnZS5mZWVkX3ZlcnNpb24gPSBTdHJpbmcob2JqZWN0LmZlZWRfdmVyc2lvbik7XG4gICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgRmVlZEhlYWRlciBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXG4gICAgICAgICAqIEBmdW5jdGlvbiB0b09iamVjdFxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5GZWVkSGVhZGVyXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHt0cmFuc2l0X3JlYWx0aW1lLkZlZWRIZWFkZXJ9IG1lc3NhZ2UgRmVlZEhlYWRlclxuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcbiAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBQbGFpbiBvYmplY3RcbiAgICAgICAgICovXG4gICAgICAgIEZlZWRIZWFkZXIudG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdChtZXNzYWdlLCBvcHRpb25zKSB7XG4gICAgICAgICAgICBpZiAoIW9wdGlvbnMpXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgICAgICAgdmFyIG9iamVjdCA9IHt9O1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGVmYXVsdHMpIHtcbiAgICAgICAgICAgICAgICBvYmplY3QuZ3Rmc19yZWFsdGltZV92ZXJzaW9uID0gXCJcIjtcbiAgICAgICAgICAgICAgICBvYmplY3QuaW5jcmVtZW50YWxpdHkgPSBvcHRpb25zLmVudW1zID09PSBTdHJpbmcgPyBcIkZVTExfREFUQVNFVFwiIDogMDtcbiAgICAgICAgICAgICAgICBpZiAoJHV0aWwuTG9uZykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbG9uZyA9IG5ldyAkdXRpbC5Mb25nKDAsIDAsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBvYmplY3QudGltZXN0YW1wID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gbG9uZy50b1N0cmluZygpIDogb3B0aW9ucy5sb25ncyA9PT0gTnVtYmVyID8gbG9uZy50b051bWJlcigpIDogbG9uZztcbiAgICAgICAgICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnRpbWVzdGFtcCA9IG9wdGlvbnMubG9uZ3MgPT09IFN0cmluZyA/IFwiMFwiIDogMDtcbiAgICAgICAgICAgICAgICBvYmplY3QuZmVlZF92ZXJzaW9uID0gXCJcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmd0ZnNfcmVhbHRpbWVfdmVyc2lvbiAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJndGZzX3JlYWx0aW1lX3ZlcnNpb25cIikpXG4gICAgICAgICAgICAgICAgb2JqZWN0Lmd0ZnNfcmVhbHRpbWVfdmVyc2lvbiA9IG1lc3NhZ2UuZ3Rmc19yZWFsdGltZV92ZXJzaW9uO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaW5jcmVtZW50YWxpdHkgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiaW5jcmVtZW50YWxpdHlcIikpXG4gICAgICAgICAgICAgICAgb2JqZWN0LmluY3JlbWVudGFsaXR5ID0gb3B0aW9ucy5lbnVtcyA9PT0gU3RyaW5nID8gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5GZWVkSGVhZGVyLkluY3JlbWVudGFsaXR5W21lc3NhZ2UuaW5jcmVtZW50YWxpdHldID09PSB1bmRlZmluZWQgPyBtZXNzYWdlLmluY3JlbWVudGFsaXR5IDogJHJvb3QudHJhbnNpdF9yZWFsdGltZS5GZWVkSGVhZGVyLkluY3JlbWVudGFsaXR5W21lc3NhZ2UuaW5jcmVtZW50YWxpdHldIDogbWVzc2FnZS5pbmNyZW1lbnRhbGl0eTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnRpbWVzdGFtcCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJ0aW1lc3RhbXBcIikpXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlLnRpbWVzdGFtcCA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnRpbWVzdGFtcCA9IG9wdGlvbnMubG9uZ3MgPT09IFN0cmluZyA/IFN0cmluZyhtZXNzYWdlLnRpbWVzdGFtcCkgOiBtZXNzYWdlLnRpbWVzdGFtcDtcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC50aW1lc3RhbXAgPSBvcHRpb25zLmxvbmdzID09PSBTdHJpbmcgPyAkdXRpbC5Mb25nLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG1lc3NhZ2UudGltZXN0YW1wKSA6IG9wdGlvbnMubG9uZ3MgPT09IE51bWJlciA/IG5ldyAkdXRpbC5Mb25nQml0cyhtZXNzYWdlLnRpbWVzdGFtcC5sb3cgPj4+IDAsIG1lc3NhZ2UudGltZXN0YW1wLmhpZ2ggPj4+IDApLnRvTnVtYmVyKHRydWUpIDogbWVzc2FnZS50aW1lc3RhbXA7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5mZWVkX3ZlcnNpb24gIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiZmVlZF92ZXJzaW9uXCIpKVxuICAgICAgICAgICAgICAgIG9iamVjdC5mZWVkX3ZlcnNpb24gPSBtZXNzYWdlLmZlZWRfdmVyc2lvbjtcbiAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbnZlcnRzIHRoaXMgRmVlZEhlYWRlciB0byBKU09OLlxuICAgICAgICAgKiBAZnVuY3Rpb24gdG9KU09OXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLkZlZWRIZWFkZXJcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcbiAgICAgICAgICovXG4gICAgICAgIEZlZWRIZWFkZXIucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsICRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXRzIHRoZSBkZWZhdWx0IHR5cGUgdXJsIGZvciBGZWVkSGVhZGVyXG4gICAgICAgICAqIEBmdW5jdGlvbiBnZXRUeXBlVXJsXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLkZlZWRIZWFkZXJcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3R5cGVVcmxQcmVmaXhdIHlvdXIgY3VzdG9tIHR5cGVVcmxQcmVmaXgoZGVmYXVsdCBcInR5cGUuZ29vZ2xlYXBpcy5jb21cIilcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ30gVGhlIGRlZmF1bHQgdHlwZSB1cmxcbiAgICAgICAgICovXG4gICAgICAgIEZlZWRIZWFkZXIuZ2V0VHlwZVVybCA9IGZ1bmN0aW9uIGdldFR5cGVVcmwodHlwZVVybFByZWZpeCkge1xuICAgICAgICAgICAgaWYgKHR5cGVVcmxQcmVmaXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHR5cGVVcmxQcmVmaXggPSBcInR5cGUuZ29vZ2xlYXBpcy5jb21cIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0eXBlVXJsUHJlZml4ICsgXCIvdHJhbnNpdF9yZWFsdGltZS5GZWVkSGVhZGVyXCI7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluY3JlbWVudGFsaXR5IGVudW0uXG4gICAgICAgICAqIEBuYW1lIHRyYW5zaXRfcmVhbHRpbWUuRmVlZEhlYWRlci5JbmNyZW1lbnRhbGl0eVxuICAgICAgICAgKiBAZW51bSB7bnVtYmVyfVxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gRlVMTF9EQVRBU0VUPTAgRlVMTF9EQVRBU0VUIHZhbHVlXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBESUZGRVJFTlRJQUw9MSBESUZGRVJFTlRJQUwgdmFsdWVcbiAgICAgICAgICovXG4gICAgICAgIEZlZWRIZWFkZXIuSW5jcmVtZW50YWxpdHkgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWVzQnlJZCA9IHt9LCB2YWx1ZXMgPSBPYmplY3QuY3JlYXRlKHZhbHVlc0J5SWQpO1xuICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbMF0gPSBcIkZVTExfREFUQVNFVFwiXSA9IDA7XG4gICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFsxXSA9IFwiRElGRkVSRU5USUFMXCJdID0gMTtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZXM7XG4gICAgICAgIH0pKCk7XG5cbiAgICAgICAgcmV0dXJuIEZlZWRIZWFkZXI7XG4gICAgfSkoKTtcblxuICAgIHRyYW5zaXRfcmVhbHRpbWUuRmVlZEVudGl0eSA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUHJvcGVydGllcyBvZiBhIEZlZWRFbnRpdHkuXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lXG4gICAgICAgICAqIEBpbnRlcmZhY2UgSUZlZWRFbnRpdHlcbiAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd9IGlkIEZlZWRFbnRpdHkgaWRcbiAgICAgICAgICogQHByb3BlcnR5IHtib29sZWFufG51bGx9IFtpc19kZWxldGVkXSBGZWVkRW50aXR5IGlzX2RlbGV0ZWRcbiAgICAgICAgICogQHByb3BlcnR5IHt0cmFuc2l0X3JlYWx0aW1lLklUcmlwVXBkYXRlfG51bGx9IFt0cmlwX3VwZGF0ZV0gRmVlZEVudGl0eSB0cmlwX3VwZGF0ZVxuICAgICAgICAgKiBAcHJvcGVydHkge3RyYW5zaXRfcmVhbHRpbWUuSVZlaGljbGVQb3NpdGlvbnxudWxsfSBbdmVoaWNsZV0gRmVlZEVudGl0eSB2ZWhpY2xlXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7dHJhbnNpdF9yZWFsdGltZS5JQWxlcnR8bnVsbH0gW2FsZXJ0XSBGZWVkRW50aXR5IGFsZXJ0XG4gICAgICAgICAqIEBwcm9wZXJ0eSB7dHJhbnNpdF9yZWFsdGltZS5JU2hhcGV8bnVsbH0gW3NoYXBlXSBGZWVkRW50aXR5IHNoYXBlXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7dHJhbnNpdF9yZWFsdGltZS5JU3RvcHxudWxsfSBbc3RvcF0gRmVlZEVudGl0eSBzdG9wXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7dHJhbnNpdF9yZWFsdGltZS5JVHJpcE1vZGlmaWNhdGlvbnN8bnVsbH0gW3RyaXBfbW9kaWZpY2F0aW9uc10gRmVlZEVudGl0eSB0cmlwX21vZGlmaWNhdGlvbnNcbiAgICAgICAgICovXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgRmVlZEVudGl0eS5cbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWVcbiAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgRmVlZEVudGl0eS5cbiAgICAgICAgICogQGltcGxlbWVudHMgSUZlZWRFbnRpdHlcbiAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAqIEBwYXJhbSB7dHJhbnNpdF9yZWFsdGltZS5JRmVlZEVudGl0eT19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gRmVlZEVudGl0eShwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZlZWRFbnRpdHkgaWQuXG4gICAgICAgICAqIEBtZW1iZXIge3N0cmluZ30gaWRcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuRmVlZEVudGl0eVxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIEZlZWRFbnRpdHkucHJvdG90eXBlLmlkID0gXCJcIjtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRmVlZEVudGl0eSBpc19kZWxldGVkLlxuICAgICAgICAgKiBAbWVtYmVyIHtib29sZWFufSBpc19kZWxldGVkXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLkZlZWRFbnRpdHlcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBGZWVkRW50aXR5LnByb3RvdHlwZS5pc19kZWxldGVkID0gZmFsc2U7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZlZWRFbnRpdHkgdHJpcF91cGRhdGUuXG4gICAgICAgICAqIEBtZW1iZXIge3RyYW5zaXRfcmVhbHRpbWUuSVRyaXBVcGRhdGV8bnVsbHx1bmRlZmluZWR9IHRyaXBfdXBkYXRlXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLkZlZWRFbnRpdHlcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBGZWVkRW50aXR5LnByb3RvdHlwZS50cmlwX3VwZGF0ZSA9IG51bGw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZlZWRFbnRpdHkgdmVoaWNsZS5cbiAgICAgICAgICogQG1lbWJlciB7dHJhbnNpdF9yZWFsdGltZS5JVmVoaWNsZVBvc2l0aW9ufG51bGx8dW5kZWZpbmVkfSB2ZWhpY2xlXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLkZlZWRFbnRpdHlcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBGZWVkRW50aXR5LnByb3RvdHlwZS52ZWhpY2xlID0gbnVsbDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRmVlZEVudGl0eSBhbGVydC5cbiAgICAgICAgICogQG1lbWJlciB7dHJhbnNpdF9yZWFsdGltZS5JQWxlcnR8bnVsbHx1bmRlZmluZWR9IGFsZXJ0XG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLkZlZWRFbnRpdHlcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBGZWVkRW50aXR5LnByb3RvdHlwZS5hbGVydCA9IG51bGw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZlZWRFbnRpdHkgc2hhcGUuXG4gICAgICAgICAqIEBtZW1iZXIge3RyYW5zaXRfcmVhbHRpbWUuSVNoYXBlfG51bGx8dW5kZWZpbmVkfSBzaGFwZVxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5GZWVkRW50aXR5XG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgRmVlZEVudGl0eS5wcm90b3R5cGUuc2hhcGUgPSBudWxsO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGZWVkRW50aXR5IHN0b3AuXG4gICAgICAgICAqIEBtZW1iZXIge3RyYW5zaXRfcmVhbHRpbWUuSVN0b3B8bnVsbHx1bmRlZmluZWR9IHN0b3BcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuRmVlZEVudGl0eVxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIEZlZWRFbnRpdHkucHJvdG90eXBlLnN0b3AgPSBudWxsO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGZWVkRW50aXR5IHRyaXBfbW9kaWZpY2F0aW9ucy5cbiAgICAgICAgICogQG1lbWJlciB7dHJhbnNpdF9yZWFsdGltZS5JVHJpcE1vZGlmaWNhdGlvbnN8bnVsbHx1bmRlZmluZWR9IHRyaXBfbW9kaWZpY2F0aW9uc1xuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5GZWVkRW50aXR5XG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgRmVlZEVudGl0eS5wcm90b3R5cGUudHJpcF9tb2RpZmljYXRpb25zID0gbnVsbDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBGZWVkRW50aXR5IGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGNyZWF0ZVxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5GZWVkRW50aXR5XG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHt0cmFuc2l0X3JlYWx0aW1lLklGZWVkRW50aXR5PX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAqIEByZXR1cm5zIHt0cmFuc2l0X3JlYWx0aW1lLkZlZWRFbnRpdHl9IEZlZWRFbnRpdHkgaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIEZlZWRFbnRpdHkuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRmVlZEVudGl0eShwcm9wZXJ0aWVzKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIEZlZWRFbnRpdHkgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgdHJhbnNpdF9yZWFsdGltZS5GZWVkRW50aXR5LnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLkZlZWRFbnRpdHlcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuSUZlZWRFbnRpdHl9IG1lc3NhZ2UgRmVlZEVudGl0eSBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICovXG4gICAgICAgIEZlZWRFbnRpdHkuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuc3RyaW5nKG1lc3NhZ2UuaWQpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaXNfZGVsZXRlZCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiaXNfZGVsZXRlZFwiKSlcbiAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDAgPSovMTYpLmJvb2wobWVzc2FnZS5pc19kZWxldGVkKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnRyaXBfdXBkYXRlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJ0cmlwX3VwZGF0ZVwiKSlcbiAgICAgICAgICAgICAgICAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuZW5jb2RlKG1lc3NhZ2UudHJpcF91cGRhdGUsIHdyaXRlci51aW50MzIoLyogaWQgMywgd2lyZVR5cGUgMiA9Ki8yNikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnZlaGljbGUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInZlaGljbGVcIikpXG4gICAgICAgICAgICAgICAgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlUG9zaXRpb24uZW5jb2RlKG1lc3NhZ2UudmVoaWNsZSwgd3JpdGVyLnVpbnQzMigvKiBpZCA0LCB3aXJlVHlwZSAyID0qLzM0KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuYWxlcnQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImFsZXJ0XCIpKVxuICAgICAgICAgICAgICAgICRyb290LnRyYW5zaXRfcmVhbHRpbWUuQWxlcnQuZW5jb2RlKG1lc3NhZ2UuYWxlcnQsIHdyaXRlci51aW50MzIoLyogaWQgNSwgd2lyZVR5cGUgMiA9Ki80MikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnNoYXBlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJzaGFwZVwiKSlcbiAgICAgICAgICAgICAgICAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlNoYXBlLmVuY29kZShtZXNzYWdlLnNoYXBlLCB3cml0ZXIudWludDMyKC8qIGlkIDYsIHdpcmVUeXBlIDIgPSovNTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5zdG9wICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJzdG9wXCIpKVxuICAgICAgICAgICAgICAgICRyb290LnRyYW5zaXRfcmVhbHRpbWUuU3RvcC5lbmNvZGUobWVzc2FnZS5zdG9wLCB3cml0ZXIudWludDMyKC8qIGlkIDcsIHdpcmVUeXBlIDIgPSovNTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS50cmlwX21vZGlmaWNhdGlvbnMgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInRyaXBfbW9kaWZpY2F0aW9uc1wiKSlcbiAgICAgICAgICAgICAgICAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyaXBNb2RpZmljYXRpb25zLmVuY29kZShtZXNzYWdlLnRyaXBfbW9kaWZpY2F0aW9ucywgd3JpdGVyLnVpbnQzMigvKiBpZCA4LCB3aXJlVHlwZSAyID0qLzY2KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIEZlZWRFbnRpdHkgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgdHJhbnNpdF9yZWFsdGltZS5GZWVkRW50aXR5LnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLkZlZWRFbnRpdHlcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuSUZlZWRFbnRpdHl9IG1lc3NhZ2UgRmVlZEVudGl0eSBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICovXG4gICAgICAgIEZlZWRFbnRpdHkuZW5jb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikubGRlbGltKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlY29kZXMgYSBGZWVkRW50aXR5IG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuRmVlZEVudGl0eVxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAgICAgKiBAcmV0dXJucyB7dHJhbnNpdF9yZWFsdGltZS5GZWVkRW50aXR5fSBGZWVkRW50aXR5XG4gICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgKi9cbiAgICAgICAgRmVlZEVudGl0eS5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgsIGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5GZWVkRW50aXR5KCk7XG4gICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgaWYgKHRhZyA9PT0gZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmlkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIDI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuaXNfZGVsZXRlZCA9IHJlYWRlci5ib29sKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgMzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS50cmlwX3VwZGF0ZSA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIDQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudmVoaWNsZSA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVmVoaWNsZVBvc2l0aW9uLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgNToge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5hbGVydCA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuQWxlcnQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSA2OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnNoYXBlID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5TaGFwZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIDc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3RvcCA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuU3RvcC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIDg6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudHJpcF9tb2RpZmljYXRpb25zID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmlwTW9kaWZpY2F0aW9ucy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImlkXCIpKVxuICAgICAgICAgICAgICAgIHRocm93ICR1dGlsLlByb3RvY29sRXJyb3IoXCJtaXNzaW5nIHJlcXVpcmVkICdpZCdcIiwgeyBpbnN0YW5jZTogbWVzc2FnZSB9KTtcbiAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWNvZGVzIGEgRmVlZEVudGl0eSBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLlxuICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLkZlZWRFbnRpdHlcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICogQHJldHVybnMge3RyYW5zaXRfcmVhbHRpbWUuRmVlZEVudGl0eX0gRmVlZEVudGl0eVxuICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICovXG4gICAgICAgIEZlZWRFbnRpdHkuZGVjb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkKHJlYWRlcikge1xuICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgcmVhZGVyID0gbmV3ICRSZWFkZXIocmVhZGVyKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFZlcmlmaWVzIGEgRmVlZEVudGl0eSBtZXNzYWdlLlxuICAgICAgICAgKiBAZnVuY3Rpb24gdmVyaWZ5XG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLkZlZWRFbnRpdHlcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnlcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfSBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3RcbiAgICAgICAgICovXG4gICAgICAgIEZlZWRFbnRpdHkudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSAhPT0gXCJvYmplY3RcIiB8fCBtZXNzYWdlID09PSBudWxsKVxuICAgICAgICAgICAgICAgIHJldHVybiBcIm9iamVjdCBleHBlY3RlZFwiO1xuICAgICAgICAgICAgaWYgKCEkdXRpbC5pc1N0cmluZyhtZXNzYWdlLmlkKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJpZDogc3RyaW5nIGV4cGVjdGVkXCI7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5pc19kZWxldGVkICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImlzX2RlbGV0ZWRcIikpXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlLmlzX2RlbGV0ZWQgIT09IFwiYm9vbGVhblwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJpc19kZWxldGVkOiBib29sZWFuIGV4cGVjdGVkXCI7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS50cmlwX3VwZGF0ZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJ0cmlwX3VwZGF0ZVwiKSkge1xuICAgICAgICAgICAgICAgIHZhciBlcnJvciA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS52ZXJpZnkobWVzc2FnZS50cmlwX3VwZGF0ZSk7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJ0cmlwX3VwZGF0ZS5cIiArIGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UudmVoaWNsZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJ2ZWhpY2xlXCIpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlUG9zaXRpb24udmVyaWZ5KG1lc3NhZ2UudmVoaWNsZSk7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJ2ZWhpY2xlLlwiICsgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5hbGVydCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJhbGVydFwiKSkge1xuICAgICAgICAgICAgICAgIHZhciBlcnJvciA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuQWxlcnQudmVyaWZ5KG1lc3NhZ2UuYWxlcnQpO1xuICAgICAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiYWxlcnQuXCIgKyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnNoYXBlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInNoYXBlXCIpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5TaGFwZS52ZXJpZnkobWVzc2FnZS5zaGFwZSk7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJzaGFwZS5cIiArIGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc3RvcCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzdG9wXCIpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5TdG9wLnZlcmlmeShtZXNzYWdlLnN0b3ApO1xuICAgICAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwic3RvcC5cIiArIGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UudHJpcF9tb2RpZmljYXRpb25zICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInRyaXBfbW9kaWZpY2F0aW9uc1wiKSkge1xuICAgICAgICAgICAgICAgIHZhciBlcnJvciA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJpcE1vZGlmaWNhdGlvbnMudmVyaWZ5KG1lc3NhZ2UudHJpcF9tb2RpZmljYXRpb25zKTtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcInRyaXBfbW9kaWZpY2F0aW9ucy5cIiArIGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYSBGZWVkRW50aXR5IG1lc3NhZ2UgZnJvbSBhIHBsYWluIG9iamVjdC4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBpbnRlcm5hbCB0eXBlcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGZyb21PYmplY3RcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuRmVlZEVudGl0eVxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG9iamVjdCBQbGFpbiBvYmplY3RcbiAgICAgICAgICogQHJldHVybnMge3RyYW5zaXRfcmVhbHRpbWUuRmVlZEVudGl0eX0gRmVlZEVudGl0eVxuICAgICAgICAgKi9cbiAgICAgICAgRmVlZEVudGl0eS5mcm9tT2JqZWN0ID0gZnVuY3Rpb24gZnJvbU9iamVjdChvYmplY3QpIHtcbiAgICAgICAgICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLkZlZWRFbnRpdHkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICAgICAgICAgIHZhciBtZXNzYWdlID0gbmV3ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuRmVlZEVudGl0eSgpO1xuICAgICAgICAgICAgaWYgKG9iamVjdC5pZCAhPSBudWxsKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UuaWQgPSBTdHJpbmcob2JqZWN0LmlkKTtcbiAgICAgICAgICAgIGlmIChvYmplY3QuaXNfZGVsZXRlZCAhPSBudWxsKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UuaXNfZGVsZXRlZCA9IEJvb2xlYW4ob2JqZWN0LmlzX2RlbGV0ZWQpO1xuICAgICAgICAgICAgaWYgKG9iamVjdC50cmlwX3VwZGF0ZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmplY3QudHJpcF91cGRhdGUgIT09IFwib2JqZWN0XCIpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcihcIi50cmFuc2l0X3JlYWx0aW1lLkZlZWRFbnRpdHkudHJpcF91cGRhdGU6IG9iamVjdCBleHBlY3RlZFwiKTtcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnRyaXBfdXBkYXRlID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLmZyb21PYmplY3Qob2JqZWN0LnRyaXBfdXBkYXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvYmplY3QudmVoaWNsZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmplY3QudmVoaWNsZSAhPT0gXCJvYmplY3RcIilcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgVHlwZUVycm9yKFwiLnRyYW5zaXRfcmVhbHRpbWUuRmVlZEVudGl0eS52ZWhpY2xlOiBvYmplY3QgZXhwZWN0ZWRcIik7XG4gICAgICAgICAgICAgICAgbWVzc2FnZS52ZWhpY2xlID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlUG9zaXRpb24uZnJvbU9iamVjdChvYmplY3QudmVoaWNsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob2JqZWN0LmFsZXJ0ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9iamVjdC5hbGVydCAhPT0gXCJvYmplY3RcIilcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgVHlwZUVycm9yKFwiLnRyYW5zaXRfcmVhbHRpbWUuRmVlZEVudGl0eS5hbGVydDogb2JqZWN0IGV4cGVjdGVkXCIpO1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UuYWxlcnQgPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLkFsZXJ0LmZyb21PYmplY3Qob2JqZWN0LmFsZXJ0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvYmplY3Quc2hhcGUgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqZWN0LnNoYXBlICE9PSBcIm9iamVjdFwiKVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoXCIudHJhbnNpdF9yZWFsdGltZS5GZWVkRW50aXR5LnNoYXBlOiBvYmplY3QgZXhwZWN0ZWRcIik7XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5zaGFwZSA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuU2hhcGUuZnJvbU9iamVjdChvYmplY3Quc2hhcGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9iamVjdC5zdG9wICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9iamVjdC5zdG9wICE9PSBcIm9iamVjdFwiKVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoXCIudHJhbnNpdF9yZWFsdGltZS5GZWVkRW50aXR5LnN0b3A6IG9iamVjdCBleHBlY3RlZFwiKTtcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnN0b3AgPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlN0b3AuZnJvbU9iamVjdChvYmplY3Quc3RvcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob2JqZWN0LnRyaXBfbW9kaWZpY2F0aW9ucyAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmplY3QudHJpcF9tb2RpZmljYXRpb25zICE9PSBcIm9iamVjdFwiKVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoXCIudHJhbnNpdF9yZWFsdGltZS5GZWVkRW50aXR5LnRyaXBfbW9kaWZpY2F0aW9uczogb2JqZWN0IGV4cGVjdGVkXCIpO1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UudHJpcF9tb2RpZmljYXRpb25zID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmlwTW9kaWZpY2F0aW9ucy5mcm9tT2JqZWN0KG9iamVjdC50cmlwX21vZGlmaWNhdGlvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIEZlZWRFbnRpdHkgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLlxuICAgICAgICAgKiBAZnVuY3Rpb24gdG9PYmplY3RcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuRmVlZEVudGl0eVxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7dHJhbnNpdF9yZWFsdGltZS5GZWVkRW50aXR5fSBtZXNzYWdlIEZlZWRFbnRpdHlcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuSUNvbnZlcnNpb25PcHRpb25zfSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zXG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gUGxhaW4gb2JqZWN0XG4gICAgICAgICAqL1xuICAgICAgICBGZWVkRW50aXR5LnRvT2JqZWN0ID0gZnVuY3Rpb24gdG9PYmplY3QobWVzc2FnZSwgb3B0aW9ucykge1xuICAgICAgICAgICAgaWYgKCFvcHRpb25zKVxuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgICAgIHZhciBvYmplY3QgPSB7fTtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmRlZmF1bHRzKSB7XG4gICAgICAgICAgICAgICAgb2JqZWN0LmlkID0gXCJcIjtcbiAgICAgICAgICAgICAgICBvYmplY3QuaXNfZGVsZXRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIG9iamVjdC50cmlwX3VwZGF0ZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgb2JqZWN0LnZlaGljbGUgPSBudWxsO1xuICAgICAgICAgICAgICAgIG9iamVjdC5hbGVydCA9IG51bGw7XG4gICAgICAgICAgICAgICAgb2JqZWN0LnNoYXBlID0gbnVsbDtcbiAgICAgICAgICAgICAgICBvYmplY3Quc3RvcCA9IG51bGw7XG4gICAgICAgICAgICAgICAgb2JqZWN0LnRyaXBfbW9kaWZpY2F0aW9ucyA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5pZCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJpZFwiKSlcbiAgICAgICAgICAgICAgICBvYmplY3QuaWQgPSBtZXNzYWdlLmlkO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaXNfZGVsZXRlZCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJpc19kZWxldGVkXCIpKVxuICAgICAgICAgICAgICAgIG9iamVjdC5pc19kZWxldGVkID0gbWVzc2FnZS5pc19kZWxldGVkO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UudHJpcF91cGRhdGUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwidHJpcF91cGRhdGVcIikpXG4gICAgICAgICAgICAgICAgb2JqZWN0LnRyaXBfdXBkYXRlID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLnRvT2JqZWN0KG1lc3NhZ2UudHJpcF91cGRhdGUsIG9wdGlvbnMpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UudmVoaWNsZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJ2ZWhpY2xlXCIpKVxuICAgICAgICAgICAgICAgIG9iamVjdC52ZWhpY2xlID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlUG9zaXRpb24udG9PYmplY3QobWVzc2FnZS52ZWhpY2xlLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmFsZXJ0ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImFsZXJ0XCIpKVxuICAgICAgICAgICAgICAgIG9iamVjdC5hbGVydCA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuQWxlcnQudG9PYmplY3QobWVzc2FnZS5hbGVydCwgb3B0aW9ucyk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5zaGFwZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzaGFwZVwiKSlcbiAgICAgICAgICAgICAgICBvYmplY3Quc2hhcGUgPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlNoYXBlLnRvT2JqZWN0KG1lc3NhZ2Uuc2hhcGUsIG9wdGlvbnMpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc3RvcCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzdG9wXCIpKVxuICAgICAgICAgICAgICAgIG9iamVjdC5zdG9wID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5TdG9wLnRvT2JqZWN0KG1lc3NhZ2Uuc3RvcCwgb3B0aW9ucyk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS50cmlwX21vZGlmaWNhdGlvbnMgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwidHJpcF9tb2RpZmljYXRpb25zXCIpKVxuICAgICAgICAgICAgICAgIG9iamVjdC50cmlwX21vZGlmaWNhdGlvbnMgPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyaXBNb2RpZmljYXRpb25zLnRvT2JqZWN0KG1lc3NhZ2UudHJpcF9tb2RpZmljYXRpb25zLCBvcHRpb25zKTtcbiAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbnZlcnRzIHRoaXMgRmVlZEVudGl0eSB0byBKU09OLlxuICAgICAgICAgKiBAZnVuY3Rpb24gdG9KU09OXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLkZlZWRFbnRpdHlcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcbiAgICAgICAgICovXG4gICAgICAgIEZlZWRFbnRpdHkucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsICRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXRzIHRoZSBkZWZhdWx0IHR5cGUgdXJsIGZvciBGZWVkRW50aXR5XG4gICAgICAgICAqIEBmdW5jdGlvbiBnZXRUeXBlVXJsXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLkZlZWRFbnRpdHlcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3R5cGVVcmxQcmVmaXhdIHlvdXIgY3VzdG9tIHR5cGVVcmxQcmVmaXgoZGVmYXVsdCBcInR5cGUuZ29vZ2xlYXBpcy5jb21cIilcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ30gVGhlIGRlZmF1bHQgdHlwZSB1cmxcbiAgICAgICAgICovXG4gICAgICAgIEZlZWRFbnRpdHkuZ2V0VHlwZVVybCA9IGZ1bmN0aW9uIGdldFR5cGVVcmwodHlwZVVybFByZWZpeCkge1xuICAgICAgICAgICAgaWYgKHR5cGVVcmxQcmVmaXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHR5cGVVcmxQcmVmaXggPSBcInR5cGUuZ29vZ2xlYXBpcy5jb21cIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0eXBlVXJsUHJlZml4ICsgXCIvdHJhbnNpdF9yZWFsdGltZS5GZWVkRW50aXR5XCI7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIEZlZWRFbnRpdHk7XG4gICAgfSkoKTtcblxuICAgIHRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZSA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUHJvcGVydGllcyBvZiBhIFRyaXBVcGRhdGUuXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lXG4gICAgICAgICAqIEBpbnRlcmZhY2UgSVRyaXBVcGRhdGVcbiAgICAgICAgICogQHByb3BlcnR5IHt0cmFuc2l0X3JlYWx0aW1lLklUcmlwRGVzY3JpcHRvcn0gdHJpcCBUcmlwVXBkYXRlIHRyaXBcbiAgICAgICAgICogQHByb3BlcnR5IHt0cmFuc2l0X3JlYWx0aW1lLklWZWhpY2xlRGVzY3JpcHRvcnxudWxsfSBbdmVoaWNsZV0gVHJpcFVwZGF0ZSB2ZWhpY2xlXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7QXJyYXkuPHRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5JU3RvcFRpbWVVcGRhdGU+fG51bGx9IFtzdG9wX3RpbWVfdXBkYXRlXSBUcmlwVXBkYXRlIHN0b3BfdGltZV91cGRhdGVcbiAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ8bnVsbH0gW3RpbWVzdGFtcF0gVHJpcFVwZGF0ZSB0aW1lc3RhbXBcbiAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ8bnVsbH0gW2RlbGF5XSBUcmlwVXBkYXRlIGRlbGF5XG4gICAgICAgICAqIEBwcm9wZXJ0eSB7dHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLklUcmlwUHJvcGVydGllc3xudWxsfSBbdHJpcF9wcm9wZXJ0aWVzXSBUcmlwVXBkYXRlIHRyaXBfcHJvcGVydGllc1xuICAgICAgICAgKi9cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBUcmlwVXBkYXRlLlxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZVxuICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBUcmlwVXBkYXRlLlxuICAgICAgICAgKiBAaW1wbGVtZW50cyBJVHJpcFVwZGF0ZVxuICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICogQHBhcmFtIHt0cmFuc2l0X3JlYWx0aW1lLklUcmlwVXBkYXRlPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBUcmlwVXBkYXRlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIHRoaXMuc3RvcF90aW1lX3VwZGF0ZSA9IFtdO1xuICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUcmlwVXBkYXRlIHRyaXAuXG4gICAgICAgICAqIEBtZW1iZXIge3RyYW5zaXRfcmVhbHRpbWUuSVRyaXBEZXNjcmlwdG9yfSB0cmlwXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGVcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBUcmlwVXBkYXRlLnByb3RvdHlwZS50cmlwID0gbnVsbDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVHJpcFVwZGF0ZSB2ZWhpY2xlLlxuICAgICAgICAgKiBAbWVtYmVyIHt0cmFuc2l0X3JlYWx0aW1lLklWZWhpY2xlRGVzY3JpcHRvcnxudWxsfHVuZGVmaW5lZH0gdmVoaWNsZVxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgVHJpcFVwZGF0ZS5wcm90b3R5cGUudmVoaWNsZSA9IG51bGw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRyaXBVcGRhdGUgc3RvcF90aW1lX3VwZGF0ZS5cbiAgICAgICAgICogQG1lbWJlciB7QXJyYXkuPHRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5JU3RvcFRpbWVVcGRhdGU+fSBzdG9wX3RpbWVfdXBkYXRlXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGVcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBUcmlwVXBkYXRlLnByb3RvdHlwZS5zdG9wX3RpbWVfdXBkYXRlID0gJHV0aWwuZW1wdHlBcnJheTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVHJpcFVwZGF0ZSB0aW1lc3RhbXAuXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn0gdGltZXN0YW1wXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGVcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBUcmlwVXBkYXRlLnByb3RvdHlwZS50aW1lc3RhbXAgPSAkdXRpbC5Mb25nID8gJHV0aWwuTG9uZy5mcm9tQml0cygwLDAsdHJ1ZSkgOiAwO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUcmlwVXBkYXRlIGRlbGF5LlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9IGRlbGF5XG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGVcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBUcmlwVXBkYXRlLnByb3RvdHlwZS5kZWxheSA9IDA7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRyaXBVcGRhdGUgdHJpcF9wcm9wZXJ0aWVzLlxuICAgICAgICAgKiBAbWVtYmVyIHt0cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuSVRyaXBQcm9wZXJ0aWVzfG51bGx8dW5kZWZpbmVkfSB0cmlwX3Byb3BlcnRpZXNcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZVxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIFRyaXBVcGRhdGUucHJvdG90eXBlLnRyaXBfcHJvcGVydGllcyA9IG51bGw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYSBuZXcgVHJpcFVwZGF0ZSBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuXG4gICAgICAgICAqIEBmdW5jdGlvbiBjcmVhdGVcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZVxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7dHJhbnNpdF9yZWFsdGltZS5JVHJpcFVwZGF0ZT19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgKiBAcmV0dXJucyB7dHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlfSBUcmlwVXBkYXRlIGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBUcmlwVXBkYXRlLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFRyaXBVcGRhdGUocHJvcGVydGllcyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBUcmlwVXBkYXRlIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIHRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHt0cmFuc2l0X3JlYWx0aW1lLklUcmlwVXBkYXRlfSBtZXNzYWdlIFRyaXBVcGRhdGUgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAqL1xuICAgICAgICBUcmlwVXBkYXRlLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyaXBEZXNjcmlwdG9yLmVuY29kZShtZXNzYWdlLnRyaXAsIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnN0b3BfdGltZV91cGRhdGUgIT0gbnVsbCAmJiBtZXNzYWdlLnN0b3BfdGltZV91cGRhdGUubGVuZ3RoKVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVzc2FnZS5zdG9wX3RpbWVfdXBkYXRlLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuU3RvcFRpbWVVcGRhdGUuZW5jb2RlKG1lc3NhZ2Uuc3RvcF90aW1lX3VwZGF0ZVtpXSwgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAyID0qLzE4KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UudmVoaWNsZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwidmVoaWNsZVwiKSlcbiAgICAgICAgICAgICAgICAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVEZXNjcmlwdG9yLmVuY29kZShtZXNzYWdlLnZlaGljbGUsIHdyaXRlci51aW50MzIoLyogaWQgMywgd2lyZVR5cGUgMiA9Ki8yNikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnRpbWVzdGFtcCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwidGltZXN0YW1wXCIpKVxuICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgNCwgd2lyZVR5cGUgMCA9Ki8zMikudWludDY0KG1lc3NhZ2UudGltZXN0YW1wKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmRlbGF5ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJkZWxheVwiKSlcbiAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDUsIHdpcmVUeXBlIDAgPSovNDApLmludDMyKG1lc3NhZ2UuZGVsYXkpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UudHJpcF9wcm9wZXJ0aWVzICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJ0cmlwX3Byb3BlcnRpZXNcIikpXG4gICAgICAgICAgICAgICAgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLlRyaXBQcm9wZXJ0aWVzLmVuY29kZShtZXNzYWdlLnRyaXBfcHJvcGVydGllcywgd3JpdGVyLnVpbnQzMigvKiBpZCA2LCB3aXJlVHlwZSAyID0qLzUwKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFRyaXBVcGRhdGUgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgdHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGVcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuSVRyaXBVcGRhdGV9IG1lc3NhZ2UgVHJpcFVwZGF0ZSBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICovXG4gICAgICAgIFRyaXBVcGRhdGUuZW5jb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikubGRlbGltKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlY29kZXMgYSBUcmlwVXBkYXRlIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZVxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAgICAgKiBAcmV0dXJucyB7dHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlfSBUcmlwVXBkYXRlXG4gICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgKi9cbiAgICAgICAgVHJpcFVwZGF0ZS5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgsIGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlKCk7XG4gICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgaWYgKHRhZyA9PT0gZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnRyaXAgPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyaXBEZXNjcmlwdG9yLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgMzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS52ZWhpY2xlID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlRGVzY3JpcHRvci5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIDI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKG1lc3NhZ2Uuc3RvcF90aW1lX3VwZGF0ZSAmJiBtZXNzYWdlLnN0b3BfdGltZV91cGRhdGUubGVuZ3RoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnN0b3BfdGltZV91cGRhdGUgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3RvcF90aW1lX3VwZGF0ZS5wdXNoKCRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5TdG9wVGltZVVwZGF0ZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSA0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnRpbWVzdGFtcCA9IHJlYWRlci51aW50NjQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSA1OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmRlbGF5ID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgNjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS50cmlwX3Byb3BlcnRpZXMgPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuVHJpcFByb3BlcnRpZXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIW1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJ0cmlwXCIpKVxuICAgICAgICAgICAgICAgIHRocm93ICR1dGlsLlByb3RvY29sRXJyb3IoXCJtaXNzaW5nIHJlcXVpcmVkICd0cmlwJ1wiLCB7IGluc3RhbmNlOiBtZXNzYWdlIH0pO1xuICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlY29kZXMgYSBUcmlwVXBkYXRlIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuXG4gICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWRcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZVxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgKiBAcmV0dXJucyB7dHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlfSBUcmlwVXBkYXRlXG4gICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgKi9cbiAgICAgICAgVHJpcFVwZGF0ZS5kZWNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyKSB7XG4gICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICByZWFkZXIgPSBuZXcgJFJlYWRlcihyZWFkZXIpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVmVyaWZpZXMgYSBUcmlwVXBkYXRlIG1lc3NhZ2UuXG4gICAgICAgICAqIEBmdW5jdGlvbiB2ZXJpZnlcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZVxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeVxuICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9IGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdFxuICAgICAgICAgKi9cbiAgICAgICAgVHJpcFVwZGF0ZS52ZXJpZnkgPSBmdW5jdGlvbiB2ZXJpZnkobWVzc2FnZSkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwib2JqZWN0IGV4cGVjdGVkXCI7XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmlwRGVzY3JpcHRvci52ZXJpZnkobWVzc2FnZS50cmlwKTtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcInRyaXAuXCIgKyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnZlaGljbGUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwidmVoaWNsZVwiKSkge1xuICAgICAgICAgICAgICAgIHZhciBlcnJvciA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVmVoaWNsZURlc2NyaXB0b3IudmVyaWZ5KG1lc3NhZ2UudmVoaWNsZSk7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJ2ZWhpY2xlLlwiICsgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5zdG9wX3RpbWVfdXBkYXRlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInN0b3BfdGltZV91cGRhdGVcIikpIHtcbiAgICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkobWVzc2FnZS5zdG9wX3RpbWVfdXBkYXRlKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwic3RvcF90aW1lX3VwZGF0ZTogYXJyYXkgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1lc3NhZ2Uuc3RvcF90aW1lX3VwZGF0ZS5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZXJyb3IgPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuU3RvcFRpbWVVcGRhdGUudmVyaWZ5KG1lc3NhZ2Uuc3RvcF90aW1lX3VwZGF0ZVtpXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInN0b3BfdGltZV91cGRhdGUuXCIgKyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS50aW1lc3RhbXAgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwidGltZXN0YW1wXCIpKVxuICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2UudGltZXN0YW1wKSAmJiAhKG1lc3NhZ2UudGltZXN0YW1wICYmICR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLnRpbWVzdGFtcC5sb3cpICYmICR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLnRpbWVzdGFtcC5oaWdoKSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcInRpbWVzdGFtcDogaW50ZWdlcnxMb25nIGV4cGVjdGVkXCI7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5kZWxheSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJkZWxheVwiKSlcbiAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLmRlbGF5KSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiZGVsYXk6IGludGVnZXIgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnRyaXBfcHJvcGVydGllcyAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJ0cmlwX3Byb3BlcnRpZXNcIikpIHtcbiAgICAgICAgICAgICAgICB2YXIgZXJyb3IgPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuVHJpcFByb3BlcnRpZXMudmVyaWZ5KG1lc3NhZ2UudHJpcF9wcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcInRyaXBfcHJvcGVydGllcy5cIiArIGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYSBUcmlwVXBkYXRlIG1lc3NhZ2UgZnJvbSBhIHBsYWluIG9iamVjdC4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBpbnRlcm5hbCB0eXBlcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGZyb21PYmplY3RcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZVxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG9iamVjdCBQbGFpbiBvYmplY3RcbiAgICAgICAgICogQHJldHVybnMge3RyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZX0gVHJpcFVwZGF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgVHJpcFVwZGF0ZS5mcm9tT2JqZWN0ID0gZnVuY3Rpb24gZnJvbU9iamVjdChvYmplY3QpIHtcbiAgICAgICAgICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICAgICAgICAgIHZhciBtZXNzYWdlID0gbmV3ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZSgpO1xuICAgICAgICAgICAgaWYgKG9iamVjdC50cmlwICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9iamVjdC50cmlwICE9PSBcIm9iamVjdFwiKVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoXCIudHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLnRyaXA6IG9iamVjdCBleHBlY3RlZFwiKTtcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnRyaXAgPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyaXBEZXNjcmlwdG9yLmZyb21PYmplY3Qob2JqZWN0LnRyaXApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9iamVjdC52ZWhpY2xlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9iamVjdC52ZWhpY2xlICE9PSBcIm9iamVjdFwiKVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoXCIudHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLnZlaGljbGU6IG9iamVjdCBleHBlY3RlZFwiKTtcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnZlaGljbGUgPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVEZXNjcmlwdG9yLmZyb21PYmplY3Qob2JqZWN0LnZlaGljbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9iamVjdC5zdG9wX3RpbWVfdXBkYXRlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KG9iamVjdC5zdG9wX3RpbWVfdXBkYXRlKSlcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgVHlwZUVycm9yKFwiLnRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5zdG9wX3RpbWVfdXBkYXRlOiBhcnJheSBleHBlY3RlZFwiKTtcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnN0b3BfdGltZV91cGRhdGUgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9iamVjdC5zdG9wX3RpbWVfdXBkYXRlLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqZWN0LnN0b3BfdGltZV91cGRhdGVbaV0gIT09IFwib2JqZWN0XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoXCIudHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLnN0b3BfdGltZV91cGRhdGU6IG9iamVjdCBleHBlY3RlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zdG9wX3RpbWVfdXBkYXRlW2ldID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLlN0b3BUaW1lVXBkYXRlLmZyb21PYmplY3Qob2JqZWN0LnN0b3BfdGltZV91cGRhdGVbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvYmplY3QudGltZXN0YW1wICE9IG51bGwpXG4gICAgICAgICAgICAgICAgaWYgKCR1dGlsLkxvbmcpXG4gICAgICAgICAgICAgICAgICAgIChtZXNzYWdlLnRpbWVzdGFtcCA9ICR1dGlsLkxvbmcuZnJvbVZhbHVlKG9iamVjdC50aW1lc3RhbXApKS51bnNpZ25lZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIG9iamVjdC50aW1lc3RhbXAgPT09IFwic3RyaW5nXCIpXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudGltZXN0YW1wID0gcGFyc2VJbnQob2JqZWN0LnRpbWVzdGFtcCwgMTApO1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBvYmplY3QudGltZXN0YW1wID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnRpbWVzdGFtcCA9IG9iamVjdC50aW1lc3RhbXA7XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIG9iamVjdC50aW1lc3RhbXAgPT09IFwib2JqZWN0XCIpXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudGltZXN0YW1wID0gbmV3ICR1dGlsLkxvbmdCaXRzKG9iamVjdC50aW1lc3RhbXAubG93ID4+PiAwLCBvYmplY3QudGltZXN0YW1wLmhpZ2ggPj4+IDApLnRvTnVtYmVyKHRydWUpO1xuICAgICAgICAgICAgaWYgKG9iamVjdC5kZWxheSAhPSBudWxsKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UuZGVsYXkgPSBvYmplY3QuZGVsYXkgfCAwO1xuICAgICAgICAgICAgaWYgKG9iamVjdC50cmlwX3Byb3BlcnRpZXMgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqZWN0LnRyaXBfcHJvcGVydGllcyAhPT0gXCJvYmplY3RcIilcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgVHlwZUVycm9yKFwiLnRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS50cmlwX3Byb3BlcnRpZXM6IG9iamVjdCBleHBlY3RlZFwiKTtcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnRyaXBfcHJvcGVydGllcyA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5UcmlwUHJvcGVydGllcy5mcm9tT2JqZWN0KG9iamVjdC50cmlwX3Byb3BlcnRpZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIFRyaXBVcGRhdGUgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLlxuICAgICAgICAgKiBAZnVuY3Rpb24gdG9PYmplY3RcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZVxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7dHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlfSBtZXNzYWdlIFRyaXBVcGRhdGVcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuSUNvbnZlcnNpb25PcHRpb25zfSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zXG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gUGxhaW4gb2JqZWN0XG4gICAgICAgICAqL1xuICAgICAgICBUcmlwVXBkYXRlLnRvT2JqZWN0ID0gZnVuY3Rpb24gdG9PYmplY3QobWVzc2FnZSwgb3B0aW9ucykge1xuICAgICAgICAgICAgaWYgKCFvcHRpb25zKVxuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgICAgIHZhciBvYmplY3QgPSB7fTtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmFycmF5cyB8fCBvcHRpb25zLmRlZmF1bHRzKVxuICAgICAgICAgICAgICAgIG9iamVjdC5zdG9wX3RpbWVfdXBkYXRlID0gW107XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5kZWZhdWx0cykge1xuICAgICAgICAgICAgICAgIG9iamVjdC50cmlwID0gbnVsbDtcbiAgICAgICAgICAgICAgICBvYmplY3QudmVoaWNsZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgaWYgKCR1dGlsLkxvbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxvbmcgPSBuZXcgJHV0aWwuTG9uZygwLCAwLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnRpbWVzdGFtcCA9IG9wdGlvbnMubG9uZ3MgPT09IFN0cmluZyA/IGxvbmcudG9TdHJpbmcoKSA6IG9wdGlvbnMubG9uZ3MgPT09IE51bWJlciA/IGxvbmcudG9OdW1iZXIoKSA6IGxvbmc7XG4gICAgICAgICAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC50aW1lc3RhbXAgPSBvcHRpb25zLmxvbmdzID09PSBTdHJpbmcgPyBcIjBcIiA6IDA7XG4gICAgICAgICAgICAgICAgb2JqZWN0LmRlbGF5ID0gMDtcbiAgICAgICAgICAgICAgICBvYmplY3QudHJpcF9wcm9wZXJ0aWVzID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnRyaXAgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwidHJpcFwiKSlcbiAgICAgICAgICAgICAgICBvYmplY3QudHJpcCA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJpcERlc2NyaXB0b3IudG9PYmplY3QobWVzc2FnZS50cmlwLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnN0b3BfdGltZV91cGRhdGUgJiYgbWVzc2FnZS5zdG9wX3RpbWVfdXBkYXRlLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIG9iamVjdC5zdG9wX3RpbWVfdXBkYXRlID0gW107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBtZXNzYWdlLnN0b3BfdGltZV91cGRhdGUubGVuZ3RoOyArK2opXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5zdG9wX3RpbWVfdXBkYXRlW2pdID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLlN0b3BUaW1lVXBkYXRlLnRvT2JqZWN0KG1lc3NhZ2Uuc3RvcF90aW1lX3VwZGF0ZVtqXSwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS52ZWhpY2xlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInZlaGljbGVcIikpXG4gICAgICAgICAgICAgICAgb2JqZWN0LnZlaGljbGUgPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVEZXNjcmlwdG9yLnRvT2JqZWN0KG1lc3NhZ2UudmVoaWNsZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS50aW1lc3RhbXAgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwidGltZXN0YW1wXCIpKVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZS50aW1lc3RhbXAgPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC50aW1lc3RhbXAgPSBvcHRpb25zLmxvbmdzID09PSBTdHJpbmcgPyBTdHJpbmcobWVzc2FnZS50aW1lc3RhbXApIDogbWVzc2FnZS50aW1lc3RhbXA7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBvYmplY3QudGltZXN0YW1wID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gJHV0aWwuTG9uZy5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChtZXNzYWdlLnRpbWVzdGFtcCkgOiBvcHRpb25zLmxvbmdzID09PSBOdW1iZXIgPyBuZXcgJHV0aWwuTG9uZ0JpdHMobWVzc2FnZS50aW1lc3RhbXAubG93ID4+PiAwLCBtZXNzYWdlLnRpbWVzdGFtcC5oaWdoID4+PiAwKS50b051bWJlcih0cnVlKSA6IG1lc3NhZ2UudGltZXN0YW1wO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZGVsYXkgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiZGVsYXlcIikpXG4gICAgICAgICAgICAgICAgb2JqZWN0LmRlbGF5ID0gbWVzc2FnZS5kZWxheTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnRyaXBfcHJvcGVydGllcyAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJ0cmlwX3Byb3BlcnRpZXNcIikpXG4gICAgICAgICAgICAgICAgb2JqZWN0LnRyaXBfcHJvcGVydGllcyA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5UcmlwUHJvcGVydGllcy50b09iamVjdChtZXNzYWdlLnRyaXBfcHJvcGVydGllcywgb3B0aW9ucyk7XG4gICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIFRyaXBVcGRhdGUgdG8gSlNPTi5cbiAgICAgICAgICogQGZ1bmN0aW9uIHRvSlNPTlxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IEpTT04gb2JqZWN0XG4gICAgICAgICAqL1xuICAgICAgICBUcmlwVXBkYXRlLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogR2V0cyB0aGUgZGVmYXVsdCB0eXBlIHVybCBmb3IgVHJpcFVwZGF0ZVxuICAgICAgICAgKiBAZnVuY3Rpb24gZ2V0VHlwZVVybFxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFt0eXBlVXJsUHJlZml4XSB5b3VyIGN1c3RvbSB0eXBlVXJsUHJlZml4KGRlZmF1bHQgXCJ0eXBlLmdvb2dsZWFwaXMuY29tXCIpXG4gICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBkZWZhdWx0IHR5cGUgdXJsXG4gICAgICAgICAqL1xuICAgICAgICBUcmlwVXBkYXRlLmdldFR5cGVVcmwgPSBmdW5jdGlvbiBnZXRUeXBlVXJsKHR5cGVVcmxQcmVmaXgpIHtcbiAgICAgICAgICAgIGlmICh0eXBlVXJsUHJlZml4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0eXBlVXJsUHJlZml4ID0gXCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHlwZVVybFByZWZpeCArIFwiL3RyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZVwiO1xuICAgICAgICB9O1xuXG4gICAgICAgIFRyaXBVcGRhdGUuU3RvcFRpbWVFdmVudCA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgU3RvcFRpbWVFdmVudC5cbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGVcbiAgICAgICAgICAgICAqIEBpbnRlcmZhY2UgSVN0b3BUaW1lRXZlbnRcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfG51bGx9IFtkZWxheV0gU3RvcFRpbWVFdmVudCBkZWxheVxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ8bnVsbH0gW3RpbWVdIFN0b3BUaW1lRXZlbnQgdGltZVxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ8bnVsbH0gW3VuY2VydGFpbnR5XSBTdG9wVGltZUV2ZW50IHVuY2VydGFpbnR5XG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbc2NoZWR1bGVkX3RpbWVdIFN0b3BUaW1lRXZlbnQgc2NoZWR1bGVkX3RpbWVcbiAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgU3RvcFRpbWVFdmVudC5cbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGVcbiAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIFN0b3BUaW1lRXZlbnQuXG4gICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJU3RvcFRpbWVFdmVudFxuICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5JU3RvcFRpbWVFdmVudD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmdW5jdGlvbiBTdG9wVGltZUV2ZW50KHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFN0b3BUaW1lRXZlbnQgZGVsYXkuXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9IGRlbGF5XG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLlN0b3BUaW1lRXZlbnRcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBTdG9wVGltZUV2ZW50LnByb3RvdHlwZS5kZWxheSA9IDA7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogU3RvcFRpbWVFdmVudCB0aW1lLlxuICAgICAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfSB0aW1lXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLlN0b3BUaW1lRXZlbnRcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBTdG9wVGltZUV2ZW50LnByb3RvdHlwZS50aW1lID0gJHV0aWwuTG9uZyA/ICR1dGlsLkxvbmcuZnJvbUJpdHMoMCwwLGZhbHNlKSA6IDA7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogU3RvcFRpbWVFdmVudCB1bmNlcnRhaW50eS5cbiAgICAgICAgICAgICAqIEBtZW1iZXIge251bWJlcn0gdW5jZXJ0YWludHlcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuU3RvcFRpbWVFdmVudFxuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFN0b3BUaW1lRXZlbnQucHJvdG90eXBlLnVuY2VydGFpbnR5ID0gMDtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBTdG9wVGltZUV2ZW50IHNjaGVkdWxlZF90aW1lLlxuICAgICAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfSBzY2hlZHVsZWRfdGltZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5TdG9wVGltZUV2ZW50XG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgU3RvcFRpbWVFdmVudC5wcm90b3R5cGUuc2NoZWR1bGVkX3RpbWUgPSAkdXRpbC5Mb25nID8gJHV0aWwuTG9uZy5mcm9tQml0cygwLDAsZmFsc2UpIDogMDtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IFN0b3BUaW1lRXZlbnQgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGNyZWF0ZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5TdG9wVGltZUV2ZW50XG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5JU3RvcFRpbWVFdmVudD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICogQHJldHVybnMge3RyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5TdG9wVGltZUV2ZW50fSBTdG9wVGltZUV2ZW50IGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFN0b3BUaW1lRXZlbnQuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFN0b3BUaW1lRXZlbnQocHJvcGVydGllcyk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBTdG9wVGltZUV2ZW50IG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIHRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5TdG9wVGltZUV2ZW50LnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5TdG9wVGltZUV2ZW50XG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5JU3RvcFRpbWVFdmVudH0gbWVzc2FnZSBTdG9wVGltZUV2ZW50IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFN0b3BUaW1lRXZlbnQuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmRlbGF5ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJkZWxheVwiKSlcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAwID0qLzgpLmludDMyKG1lc3NhZ2UuZGVsYXkpO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnRpbWUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInRpbWVcIikpXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMCA9Ki8xNikuaW50NjQobWVzc2FnZS50aW1lKTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS51bmNlcnRhaW50eSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwidW5jZXJ0YWludHlcIikpXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMywgd2lyZVR5cGUgMCA9Ki8yNCkuaW50MzIobWVzc2FnZS51bmNlcnRhaW50eSk7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc2NoZWR1bGVkX3RpbWUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInNjaGVkdWxlZF90aW1lXCIpKVxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDQsIHdpcmVUeXBlIDAgPSovMzIpLmludDY0KG1lc3NhZ2Uuc2NoZWR1bGVkX3RpbWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBTdG9wVGltZUV2ZW50IG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIHRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5TdG9wVGltZUV2ZW50LnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5TdG9wVGltZUV2ZW50XG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5JU3RvcFRpbWVFdmVudH0gbWVzc2FnZSBTdG9wVGltZUV2ZW50IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFN0b3BUaW1lRXZlbnQuZW5jb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVuY29kZShtZXNzYWdlLCB3cml0ZXIpLmxkZWxpbSgpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBEZWNvZGVzIGEgU3RvcFRpbWVFdmVudCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5TdG9wVGltZUV2ZW50XG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7dHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLlN0b3BUaW1lRXZlbnR9IFN0b3BUaW1lRXZlbnRcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgU3RvcFRpbWVFdmVudC5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLlN0b3BUaW1lRXZlbnQoKTtcbiAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGFnID09PSBlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmRlbGF5ID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudGltZSA9IHJlYWRlci5pbnQ2NCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnVuY2VydGFpbnR5ID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2NoZWR1bGVkX3RpbWUgPSByZWFkZXIuaW50NjQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBEZWNvZGVzIGEgU3RvcFRpbWVFdmVudCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5TdG9wVGltZUV2ZW50XG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAqIEByZXR1cm5zIHt0cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuU3RvcFRpbWVFdmVudH0gU3RvcFRpbWVFdmVudFxuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBTdG9wVGltZUV2ZW50LmRlY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZChyZWFkZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gbmV3ICRSZWFkZXIocmVhZGVyKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBWZXJpZmllcyBhIFN0b3BUaW1lRXZlbnQgbWVzc2FnZS5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB2ZXJpZnlcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuU3RvcFRpbWVFdmVudFxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5XG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9IGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBTdG9wVGltZUV2ZW50LnZlcmlmeSA9IGZ1bmN0aW9uIHZlcmlmeShtZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm9iamVjdCBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmRlbGF5ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImRlbGF5XCIpKVxuICAgICAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLmRlbGF5KSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcImRlbGF5OiBpbnRlZ2VyIGV4cGVjdGVkXCI7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudGltZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJ0aW1lXCIpKVxuICAgICAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLnRpbWUpICYmICEobWVzc2FnZS50aW1lICYmICR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLnRpbWUubG93KSAmJiAkdXRpbC5pc0ludGVnZXIobWVzc2FnZS50aW1lLmhpZ2gpKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInRpbWU6IGludGVnZXJ8TG9uZyBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnVuY2VydGFpbnR5ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInVuY2VydGFpbnR5XCIpKVxuICAgICAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLnVuY2VydGFpbnR5KSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInVuY2VydGFpbnR5OiBpbnRlZ2VyIGV4cGVjdGVkXCI7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc2NoZWR1bGVkX3RpbWUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwic2NoZWR1bGVkX3RpbWVcIikpXG4gICAgICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2Uuc2NoZWR1bGVkX3RpbWUpICYmICEobWVzc2FnZS5zY2hlZHVsZWRfdGltZSAmJiAkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5zY2hlZHVsZWRfdGltZS5sb3cpICYmICR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLnNjaGVkdWxlZF90aW1lLmhpZ2gpKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInNjaGVkdWxlZF90aW1lOiBpbnRlZ2VyfExvbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIFN0b3BUaW1lRXZlbnQgbWVzc2FnZSBmcm9tIGEgcGxhaW4gb2JqZWN0LiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byB0aGVpciByZXNwZWN0aXZlIGludGVybmFsIHR5cGVzLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGZyb21PYmplY3RcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuU3RvcFRpbWVFdmVudFxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gb2JqZWN0IFBsYWluIG9iamVjdFxuICAgICAgICAgICAgICogQHJldHVybnMge3RyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5TdG9wVGltZUV2ZW50fSBTdG9wVGltZUV2ZW50XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFN0b3BUaW1lRXZlbnQuZnJvbU9iamVjdCA9IGZ1bmN0aW9uIGZyb21PYmplY3Qob2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdCBpbnN0YW5jZW9mICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5TdG9wVGltZUV2ZW50KVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gbmV3ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5TdG9wVGltZUV2ZW50KCk7XG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC5kZWxheSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmRlbGF5ID0gb2JqZWN0LmRlbGF5IHwgMDtcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0LnRpbWUgIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgaWYgKCR1dGlsLkxvbmcpXG4gICAgICAgICAgICAgICAgICAgICAgICAobWVzc2FnZS50aW1lID0gJHV0aWwuTG9uZy5mcm9tVmFsdWUob2JqZWN0LnRpbWUpKS51bnNpZ25lZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2Ygb2JqZWN0LnRpbWUgPT09IFwic3RyaW5nXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnRpbWUgPSBwYXJzZUludChvYmplY3QudGltZSwgMTApO1xuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2Ygb2JqZWN0LnRpbWUgPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnRpbWUgPSBvYmplY3QudGltZTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIG9iamVjdC50aW1lID09PSBcIm9iamVjdFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS50aW1lID0gbmV3ICR1dGlsLkxvbmdCaXRzKG9iamVjdC50aW1lLmxvdyA+Pj4gMCwgb2JqZWN0LnRpbWUuaGlnaCA+Pj4gMCkudG9OdW1iZXIoKTtcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0LnVuY2VydGFpbnR5ICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudW5jZXJ0YWludHkgPSBvYmplY3QudW5jZXJ0YWludHkgfCAwO1xuICAgICAgICAgICAgICAgIGlmIChvYmplY3Quc2NoZWR1bGVkX3RpbWUgIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgaWYgKCR1dGlsLkxvbmcpXG4gICAgICAgICAgICAgICAgICAgICAgICAobWVzc2FnZS5zY2hlZHVsZWRfdGltZSA9ICR1dGlsLkxvbmcuZnJvbVZhbHVlKG9iamVjdC5zY2hlZHVsZWRfdGltZSkpLnVuc2lnbmVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBvYmplY3Quc2NoZWR1bGVkX3RpbWUgPT09IFwic3RyaW5nXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnNjaGVkdWxlZF90aW1lID0gcGFyc2VJbnQob2JqZWN0LnNjaGVkdWxlZF90aW1lLCAxMCk7XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBvYmplY3Quc2NoZWR1bGVkX3RpbWUgPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnNjaGVkdWxlZF90aW1lID0gb2JqZWN0LnNjaGVkdWxlZF90aW1lO1xuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2Ygb2JqZWN0LnNjaGVkdWxlZF90aW1lID09PSBcIm9iamVjdFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zY2hlZHVsZWRfdGltZSA9IG5ldyAkdXRpbC5Mb25nQml0cyhvYmplY3Quc2NoZWR1bGVkX3RpbWUubG93ID4+PiAwLCBvYmplY3Quc2NoZWR1bGVkX3RpbWUuaGlnaCA+Pj4gMCkudG9OdW1iZXIoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgU3RvcFRpbWVFdmVudCBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdG9PYmplY3RcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuU3RvcFRpbWVFdmVudFxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHt0cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuU3RvcFRpbWVFdmVudH0gbWVzc2FnZSBTdG9wVGltZUV2ZW50XG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gUGxhaW4gb2JqZWN0XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFN0b3BUaW1lRXZlbnQudG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdChtZXNzYWdlLCBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFvcHRpb25zKVxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgICAgICAgICAgdmFyIG9iamVjdCA9IHt9O1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmRlZmF1bHRzKSB7XG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5kZWxheSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGlmICgkdXRpbC5Mb25nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbG9uZyA9IG5ldyAkdXRpbC5Mb25nKDAsIDAsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC50aW1lID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gbG9uZy50b1N0cmluZygpIDogb3B0aW9ucy5sb25ncyA9PT0gTnVtYmVyID8gbG9uZy50b051bWJlcigpIDogbG9uZztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QudGltZSA9IG9wdGlvbnMubG9uZ3MgPT09IFN0cmluZyA/IFwiMFwiIDogMDtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnVuY2VydGFpbnR5ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCR1dGlsLkxvbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsb25nID0gbmV3ICR1dGlsLkxvbmcoMCwgMCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnNjaGVkdWxlZF90aW1lID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gbG9uZy50b1N0cmluZygpIDogb3B0aW9ucy5sb25ncyA9PT0gTnVtYmVyID8gbG9uZy50b051bWJlcigpIDogbG9uZztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmplY3Quc2NoZWR1bGVkX3RpbWUgPSBvcHRpb25zLmxvbmdzID09PSBTdHJpbmcgPyBcIjBcIiA6IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmRlbGF5ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImRlbGF5XCIpKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3QuZGVsYXkgPSBtZXNzYWdlLmRlbGF5O1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnRpbWUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwidGltZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlLnRpbWUgPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QudGltZSA9IG9wdGlvbnMubG9uZ3MgPT09IFN0cmluZyA/IFN0cmluZyhtZXNzYWdlLnRpbWUpIDogbWVzc2FnZS50aW1lO1xuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QudGltZSA9IG9wdGlvbnMubG9uZ3MgPT09IFN0cmluZyA/ICR1dGlsLkxvbmcucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobWVzc2FnZS50aW1lKSA6IG9wdGlvbnMubG9uZ3MgPT09IE51bWJlciA/IG5ldyAkdXRpbC5Mb25nQml0cyhtZXNzYWdlLnRpbWUubG93ID4+PiAwLCBtZXNzYWdlLnRpbWUuaGlnaCA+Pj4gMCkudG9OdW1iZXIoKSA6IG1lc3NhZ2UudGltZTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS51bmNlcnRhaW50eSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJ1bmNlcnRhaW50eVwiKSlcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnVuY2VydGFpbnR5ID0gbWVzc2FnZS51bmNlcnRhaW50eTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5zY2hlZHVsZWRfdGltZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzY2hlZHVsZWRfdGltZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlLnNjaGVkdWxlZF90aW1lID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnNjaGVkdWxlZF90aW1lID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gU3RyaW5nKG1lc3NhZ2Uuc2NoZWR1bGVkX3RpbWUpIDogbWVzc2FnZS5zY2hlZHVsZWRfdGltZTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnNjaGVkdWxlZF90aW1lID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gJHV0aWwuTG9uZy5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChtZXNzYWdlLnNjaGVkdWxlZF90aW1lKSA6IG9wdGlvbnMubG9uZ3MgPT09IE51bWJlciA/IG5ldyAkdXRpbC5Mb25nQml0cyhtZXNzYWdlLnNjaGVkdWxlZF90aW1lLmxvdyA+Pj4gMCwgbWVzc2FnZS5zY2hlZHVsZWRfdGltZS5oaWdoID4+PiAwKS50b051bWJlcigpIDogbWVzc2FnZS5zY2hlZHVsZWRfdGltZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIFN0b3BUaW1lRXZlbnQgdG8gSlNPTi5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b0pTT05cbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuU3RvcFRpbWVFdmVudFxuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IEpTT04gb2JqZWN0XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFN0b3BUaW1lRXZlbnQucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogR2V0cyB0aGUgZGVmYXVsdCB0eXBlIHVybCBmb3IgU3RvcFRpbWVFdmVudFxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGdldFR5cGVVcmxcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuU3RvcFRpbWVFdmVudFxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFt0eXBlVXJsUHJlZml4XSB5b3VyIGN1c3RvbSB0eXBlVXJsUHJlZml4KGRlZmF1bHQgXCJ0eXBlLmdvb2dsZWFwaXMuY29tXCIpXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgZGVmYXVsdCB0eXBlIHVybFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBTdG9wVGltZUV2ZW50LmdldFR5cGVVcmwgPSBmdW5jdGlvbiBnZXRUeXBlVXJsKHR5cGVVcmxQcmVmaXgpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZVVybFByZWZpeCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGVVcmxQcmVmaXggPSBcInR5cGUuZ29vZ2xlYXBpcy5jb21cIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVVcmxQcmVmaXggKyBcIi90cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuU3RvcFRpbWVFdmVudFwiO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmV0dXJuIFN0b3BUaW1lRXZlbnQ7XG4gICAgICAgIH0pKCk7XG5cbiAgICAgICAgVHJpcFVwZGF0ZS5TdG9wVGltZVVwZGF0ZSA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgU3RvcFRpbWVVcGRhdGUuXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlXG4gICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElTdG9wVGltZVVwZGF0ZVxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ8bnVsbH0gW3N0b3Bfc2VxdWVuY2VdIFN0b3BUaW1lVXBkYXRlIHN0b3Bfc2VxdWVuY2VcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfG51bGx9IFtzdG9wX2lkXSBTdG9wVGltZVVwZGF0ZSBzdG9wX2lkXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge3RyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5JU3RvcFRpbWVFdmVudHxudWxsfSBbYXJyaXZhbF0gU3RvcFRpbWVVcGRhdGUgYXJyaXZhbFxuICAgICAgICAgICAgICogQHByb3BlcnR5IHt0cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuSVN0b3BUaW1lRXZlbnR8bnVsbH0gW2RlcGFydHVyZV0gU3RvcFRpbWVVcGRhdGUgZGVwYXJ0dXJlXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge3RyYW5zaXRfcmVhbHRpbWUuVmVoaWNsZVBvc2l0aW9uLk9jY3VwYW5jeVN0YXR1c3xudWxsfSBbZGVwYXJ0dXJlX29jY3VwYW5jeV9zdGF0dXNdIFN0b3BUaW1lVXBkYXRlIGRlcGFydHVyZV9vY2N1cGFuY3lfc3RhdHVzXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge3RyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5TdG9wVGltZVVwZGF0ZS5TY2hlZHVsZVJlbGF0aW9uc2hpcHxudWxsfSBbc2NoZWR1bGVfcmVsYXRpb25zaGlwXSBTdG9wVGltZVVwZGF0ZSBzY2hlZHVsZV9yZWxhdGlvbnNoaXBcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7dHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLlN0b3BUaW1lVXBkYXRlLklTdG9wVGltZVByb3BlcnRpZXN8bnVsbH0gW3N0b3BfdGltZV9wcm9wZXJ0aWVzXSBTdG9wVGltZVVwZGF0ZSBzdG9wX3RpbWVfcHJvcGVydGllc1xuICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBTdG9wVGltZVVwZGF0ZS5cbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGVcbiAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIFN0b3BUaW1lVXBkYXRlLlxuICAgICAgICAgICAgICogQGltcGxlbWVudHMgSVN0b3BUaW1lVXBkYXRlXG4gICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICAgICAqIEBwYXJhbSB7dHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLklTdG9wVGltZVVwZGF0ZT19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmdW5jdGlvbiBTdG9wVGltZVVwZGF0ZShwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBTdG9wVGltZVVwZGF0ZSBzdG9wX3NlcXVlbmNlLlxuICAgICAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfSBzdG9wX3NlcXVlbmNlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLlN0b3BUaW1lVXBkYXRlXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgU3RvcFRpbWVVcGRhdGUucHJvdG90eXBlLnN0b3Bfc2VxdWVuY2UgPSAwO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFN0b3BUaW1lVXBkYXRlIHN0b3BfaWQuXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IHN0b3BfaWRcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuU3RvcFRpbWVVcGRhdGVcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBTdG9wVGltZVVwZGF0ZS5wcm90b3R5cGUuc3RvcF9pZCA9IFwiXCI7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogU3RvcFRpbWVVcGRhdGUgYXJyaXZhbC5cbiAgICAgICAgICAgICAqIEBtZW1iZXIge3RyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5JU3RvcFRpbWVFdmVudHxudWxsfHVuZGVmaW5lZH0gYXJyaXZhbFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5TdG9wVGltZVVwZGF0ZVxuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFN0b3BUaW1lVXBkYXRlLnByb3RvdHlwZS5hcnJpdmFsID0gbnVsbDtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBTdG9wVGltZVVwZGF0ZSBkZXBhcnR1cmUuXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHt0cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuSVN0b3BUaW1lRXZlbnR8bnVsbHx1bmRlZmluZWR9IGRlcGFydHVyZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5TdG9wVGltZVVwZGF0ZVxuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFN0b3BUaW1lVXBkYXRlLnByb3RvdHlwZS5kZXBhcnR1cmUgPSBudWxsO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFN0b3BUaW1lVXBkYXRlIGRlcGFydHVyZV9vY2N1cGFuY3lfc3RhdHVzLlxuICAgICAgICAgICAgICogQG1lbWJlciB7dHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlUG9zaXRpb24uT2NjdXBhbmN5U3RhdHVzfSBkZXBhcnR1cmVfb2NjdXBhbmN5X3N0YXR1c1xuICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5TdG9wVGltZVVwZGF0ZVxuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFN0b3BUaW1lVXBkYXRlLnByb3RvdHlwZS5kZXBhcnR1cmVfb2NjdXBhbmN5X3N0YXR1cyA9IDA7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogU3RvcFRpbWVVcGRhdGUgc2NoZWR1bGVfcmVsYXRpb25zaGlwLlxuICAgICAgICAgICAgICogQG1lbWJlciB7dHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLlN0b3BUaW1lVXBkYXRlLlNjaGVkdWxlUmVsYXRpb25zaGlwfSBzY2hlZHVsZV9yZWxhdGlvbnNoaXBcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuU3RvcFRpbWVVcGRhdGVcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBTdG9wVGltZVVwZGF0ZS5wcm90b3R5cGUuc2NoZWR1bGVfcmVsYXRpb25zaGlwID0gMDtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBTdG9wVGltZVVwZGF0ZSBzdG9wX3RpbWVfcHJvcGVydGllcy5cbiAgICAgICAgICAgICAqIEBtZW1iZXIge3RyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5TdG9wVGltZVVwZGF0ZS5JU3RvcFRpbWVQcm9wZXJ0aWVzfG51bGx8dW5kZWZpbmVkfSBzdG9wX3RpbWVfcHJvcGVydGllc1xuICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5TdG9wVGltZVVwZGF0ZVxuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFN0b3BUaW1lVXBkYXRlLnByb3RvdHlwZS5zdG9wX3RpbWVfcHJvcGVydGllcyA9IG51bGw7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBTdG9wVGltZVVwZGF0ZSBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gY3JlYXRlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLlN0b3BUaW1lVXBkYXRlXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5JU3RvcFRpbWVVcGRhdGU9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHt0cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuU3RvcFRpbWVVcGRhdGV9IFN0b3BUaW1lVXBkYXRlIGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFN0b3BUaW1lVXBkYXRlLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBTdG9wVGltZVVwZGF0ZShwcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFN0b3BUaW1lVXBkYXRlIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIHRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5TdG9wVGltZVVwZGF0ZS52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuU3RvcFRpbWVVcGRhdGVcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7dHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLklTdG9wVGltZVVwZGF0ZX0gbWVzc2FnZSBTdG9wVGltZVVwZGF0ZSBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBTdG9wVGltZVVwZGF0ZS5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc3RvcF9zZXF1ZW5jZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwic3RvcF9zZXF1ZW5jZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAwID0qLzgpLnVpbnQzMihtZXNzYWdlLnN0b3Bfc2VxdWVuY2UpO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmFycml2YWwgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImFycml2YWxcIikpXG4gICAgICAgICAgICAgICAgICAgICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5TdG9wVGltZUV2ZW50LmVuY29kZShtZXNzYWdlLmFycml2YWwsIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMiA9Ki8xOCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5kZXBhcnR1cmUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImRlcGFydHVyZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLlN0b3BUaW1lRXZlbnQuZW5jb2RlKG1lc3NhZ2UuZGVwYXJ0dXJlLCB3cml0ZXIudWludDMyKC8qIGlkIDMsIHdpcmVUeXBlIDIgPSovMjYpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc3RvcF9pZCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwic3RvcF9pZFwiKSlcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCA0LCB3aXJlVHlwZSAyID0qLzM0KS5zdHJpbmcobWVzc2FnZS5zdG9wX2lkKTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5zY2hlZHVsZV9yZWxhdGlvbnNoaXAgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInNjaGVkdWxlX3JlbGF0aW9uc2hpcFwiKSlcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCA1LCB3aXJlVHlwZSAwID0qLzQwKS5pbnQzMihtZXNzYWdlLnNjaGVkdWxlX3JlbGF0aW9uc2hpcCk7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc3RvcF90aW1lX3Byb3BlcnRpZXMgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInN0b3BfdGltZV9wcm9wZXJ0aWVzXCIpKVxuICAgICAgICAgICAgICAgICAgICAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuU3RvcFRpbWVVcGRhdGUuU3RvcFRpbWVQcm9wZXJ0aWVzLmVuY29kZShtZXNzYWdlLnN0b3BfdGltZV9wcm9wZXJ0aWVzLCB3cml0ZXIudWludDMyKC8qIGlkIDYsIHdpcmVUeXBlIDIgPSovNTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZGVwYXJ0dXJlX29jY3VwYW5jeV9zdGF0dXMgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImRlcGFydHVyZV9vY2N1cGFuY3lfc3RhdHVzXCIpKVxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDcsIHdpcmVUeXBlIDAgPSovNTYpLmludDMyKG1lc3NhZ2UuZGVwYXJ0dXJlX29jY3VwYW5jeV9zdGF0dXMpO1xuICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBTdG9wVGltZVVwZGF0ZSBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayB0cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuU3RvcFRpbWVVcGRhdGUudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLlN0b3BUaW1lVXBkYXRlXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5JU3RvcFRpbWVVcGRhdGV9IG1lc3NhZ2UgU3RvcFRpbWVVcGRhdGUgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgU3RvcFRpbWVVcGRhdGUuZW5jb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVuY29kZShtZXNzYWdlLCB3cml0ZXIpLmxkZWxpbSgpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBEZWNvZGVzIGEgU3RvcFRpbWVVcGRhdGUgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuU3RvcFRpbWVVcGRhdGVcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHt0cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuU3RvcFRpbWVVcGRhdGV9IFN0b3BUaW1lVXBkYXRlXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFN0b3BUaW1lVXBkYXRlLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCwgZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuU3RvcFRpbWVVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGFnID09PSBlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnN0b3Bfc2VxdWVuY2UgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3RvcF9pZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5hcnJpdmFsID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLlN0b3BUaW1lRXZlbnQuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5kZXBhcnR1cmUgPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuU3RvcFRpbWVFdmVudC5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIDc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmRlcGFydHVyZV9vY2N1cGFuY3lfc3RhdHVzID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2NoZWR1bGVfcmVsYXRpb25zaGlwID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3RvcF90aW1lX3Byb3BlcnRpZXMgPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuU3RvcFRpbWVVcGRhdGUuU3RvcFRpbWVQcm9wZXJ0aWVzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRGVjb2RlcyBhIFN0b3BUaW1lVXBkYXRlIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLlN0b3BUaW1lVXBkYXRlXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAqIEByZXR1cm5zIHt0cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuU3RvcFRpbWVVcGRhdGV9IFN0b3BUaW1lVXBkYXRlXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFN0b3BUaW1lVXBkYXRlLmRlY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZChyZWFkZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gbmV3ICRSZWFkZXIocmVhZGVyKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBWZXJpZmllcyBhIFN0b3BUaW1lVXBkYXRlIG1lc3NhZ2UuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdmVyaWZ5XG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLlN0b3BUaW1lVXBkYXRlXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnlcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH0gYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFN0b3BUaW1lVXBkYXRlLnZlcmlmeSA9IGZ1bmN0aW9uIHZlcmlmeShtZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm9iamVjdCBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnN0b3Bfc2VxdWVuY2UgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwic3RvcF9zZXF1ZW5jZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5zdG9wX3NlcXVlbmNlKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInN0b3Bfc2VxdWVuY2U6IGludGVnZXIgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5zdG9wX2lkICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInN0b3BfaWRcIikpXG4gICAgICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNTdHJpbmcobWVzc2FnZS5zdG9wX2lkKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInN0b3BfaWQ6IHN0cmluZyBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmFycml2YWwgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiYXJyaXZhbFwiKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZXJyb3IgPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuU3RvcFRpbWVFdmVudC52ZXJpZnkobWVzc2FnZS5hcnJpdmFsKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiYXJyaXZhbC5cIiArIGVycm9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5kZXBhcnR1cmUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiZGVwYXJ0dXJlXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlcnJvciA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5TdG9wVGltZUV2ZW50LnZlcmlmeShtZXNzYWdlLmRlcGFydHVyZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcImRlcGFydHVyZS5cIiArIGVycm9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5kZXBhcnR1cmVfb2NjdXBhbmN5X3N0YXR1cyAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJkZXBhcnR1cmVfb2NjdXBhbmN5X3N0YXR1c1wiKSlcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChtZXNzYWdlLmRlcGFydHVyZV9vY2N1cGFuY3lfc3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJkZXBhcnR1cmVfb2NjdXBhbmN5X3N0YXR1czogZW51bSB2YWx1ZSBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5zY2hlZHVsZV9yZWxhdGlvbnNoaXAgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwic2NoZWR1bGVfcmVsYXRpb25zaGlwXCIpKVxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1lc3NhZ2Uuc2NoZWR1bGVfcmVsYXRpb25zaGlwKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJzY2hlZHVsZV9yZWxhdGlvbnNoaXA6IGVudW0gdmFsdWUgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5zdG9wX3RpbWVfcHJvcGVydGllcyAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzdG9wX3RpbWVfcHJvcGVydGllc1wiKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZXJyb3IgPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuU3RvcFRpbWVVcGRhdGUuU3RvcFRpbWVQcm9wZXJ0aWVzLnZlcmlmeShtZXNzYWdlLnN0b3BfdGltZV9wcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwic3RvcF90aW1lX3Byb3BlcnRpZXMuXCIgKyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBTdG9wVGltZVVwZGF0ZSBtZXNzYWdlIGZyb20gYSBwbGFpbiBvYmplY3QuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIHRoZWlyIHJlc3BlY3RpdmUgaW50ZXJuYWwgdHlwZXMuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZnJvbU9iamVjdFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5TdG9wVGltZVVwZGF0ZVxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gb2JqZWN0IFBsYWluIG9iamVjdFxuICAgICAgICAgICAgICogQHJldHVybnMge3RyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5TdG9wVGltZVVwZGF0ZX0gU3RvcFRpbWVVcGRhdGVcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgU3RvcFRpbWVVcGRhdGUuZnJvbU9iamVjdCA9IGZ1bmN0aW9uIGZyb21PYmplY3Qob2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdCBpbnN0YW5jZW9mICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5TdG9wVGltZVVwZGF0ZSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IG5ldyAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuU3RvcFRpbWVVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0LnN0b3Bfc2VxdWVuY2UgIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zdG9wX3NlcXVlbmNlID0gb2JqZWN0LnN0b3Bfc2VxdWVuY2UgPj4+IDA7XG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC5zdG9wX2lkICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3RvcF9pZCA9IFN0cmluZyhvYmplY3Quc3RvcF9pZCk7XG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC5hcnJpdmFsICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmplY3QuYXJyaXZhbCAhPT0gXCJvYmplY3RcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcihcIi50cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuU3RvcFRpbWVVcGRhdGUuYXJyaXZhbDogb2JqZWN0IGV4cGVjdGVkXCIpO1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmFycml2YWwgPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuU3RvcFRpbWVFdmVudC5mcm9tT2JqZWN0KG9iamVjdC5hcnJpdmFsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC5kZXBhcnR1cmUgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9iamVjdC5kZXBhcnR1cmUgIT09IFwib2JqZWN0XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoXCIudHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLlN0b3BUaW1lVXBkYXRlLmRlcGFydHVyZTogb2JqZWN0IGV4cGVjdGVkXCIpO1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmRlcGFydHVyZSA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5TdG9wVGltZUV2ZW50LmZyb21PYmplY3Qob2JqZWN0LmRlcGFydHVyZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHN3aXRjaCAob2JqZWN0LmRlcGFydHVyZV9vY2N1cGFuY3lfc3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmplY3QuZGVwYXJ0dXJlX29jY3VwYW5jeV9zdGF0dXMgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZGVwYXJ0dXJlX29jY3VwYW5jeV9zdGF0dXMgPSBvYmplY3QuZGVwYXJ0dXJlX29jY3VwYW5jeV9zdGF0dXM7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiRU1QVFlcIjpcbiAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZGVwYXJ0dXJlX29jY3VwYW5jeV9zdGF0dXMgPSAwO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiTUFOWV9TRUFUU19BVkFJTEFCTEVcIjpcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZGVwYXJ0dXJlX29jY3VwYW5jeV9zdGF0dXMgPSAxO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiRkVXX1NFQVRTX0FWQUlMQUJMRVwiOlxuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5kZXBhcnR1cmVfb2NjdXBhbmN5X3N0YXR1cyA9IDI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJTVEFORElOR19ST09NX09OTFlcIjpcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZGVwYXJ0dXJlX29jY3VwYW5jeV9zdGF0dXMgPSAzO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiQ1JVU0hFRF9TVEFORElOR19ST09NX09OTFlcIjpcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZGVwYXJ0dXJlX29jY3VwYW5jeV9zdGF0dXMgPSA0O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiRlVMTFwiOlxuICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5kZXBhcnR1cmVfb2NjdXBhbmN5X3N0YXR1cyA9IDU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJOT1RfQUNDRVBUSU5HX1BBU1NFTkdFUlNcIjpcbiAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZGVwYXJ0dXJlX29jY3VwYW5jeV9zdGF0dXMgPSA2O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiTk9fREFUQV9BVkFJTEFCTEVcIjpcbiAgICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZGVwYXJ0dXJlX29jY3VwYW5jeV9zdGF0dXMgPSA3O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiTk9UX0JPQVJEQUJMRVwiOlxuICAgICAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5kZXBhcnR1cmVfb2NjdXBhbmN5X3N0YXR1cyA9IDg7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG9iamVjdC5zY2hlZHVsZV9yZWxhdGlvbnNoaXApIHtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9iamVjdC5zY2hlZHVsZV9yZWxhdGlvbnNoaXAgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2NoZWR1bGVfcmVsYXRpb25zaGlwID0gb2JqZWN0LnNjaGVkdWxlX3JlbGF0aW9uc2hpcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJTQ0hFRFVMRURcIjpcbiAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2NoZWR1bGVfcmVsYXRpb25zaGlwID0gMDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIlNLSVBQRURcIjpcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2NoZWR1bGVfcmVsYXRpb25zaGlwID0gMTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIk5PX0RBVEFcIjpcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2NoZWR1bGVfcmVsYXRpb25zaGlwID0gMjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIlVOU0NIRURVTEVEXCI6XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnNjaGVkdWxlX3JlbGF0aW9uc2hpcCA9IDM7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0LnN0b3BfdGltZV9wcm9wZXJ0aWVzICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmplY3Quc3RvcF90aW1lX3Byb3BlcnRpZXMgIT09IFwib2JqZWN0XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoXCIudHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLlN0b3BUaW1lVXBkYXRlLnN0b3BfdGltZV9wcm9wZXJ0aWVzOiBvYmplY3QgZXhwZWN0ZWRcIik7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3RvcF90aW1lX3Byb3BlcnRpZXMgPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuU3RvcFRpbWVVcGRhdGUuU3RvcFRpbWVQcm9wZXJ0aWVzLmZyb21PYmplY3Qob2JqZWN0LnN0b3BfdGltZV9wcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIFN0b3BUaW1lVXBkYXRlIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b09iamVjdFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5TdG9wVGltZVVwZGF0ZVxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHt0cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuU3RvcFRpbWVVcGRhdGV9IG1lc3NhZ2UgU3RvcFRpbWVVcGRhdGVcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9uc30gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9uc1xuICAgICAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBQbGFpbiBvYmplY3RcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgU3RvcFRpbWVVcGRhdGUudG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdChtZXNzYWdlLCBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFvcHRpb25zKVxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgICAgICAgICAgdmFyIG9iamVjdCA9IHt9O1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmRlZmF1bHRzKSB7XG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5zdG9wX3NlcXVlbmNlID0gMDtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmFycml2YWwgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBvYmplY3QuZGVwYXJ0dXJlID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnN0b3BfaWQgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICBvYmplY3Quc2NoZWR1bGVfcmVsYXRpb25zaGlwID0gb3B0aW9ucy5lbnVtcyA9PT0gU3RyaW5nID8gXCJTQ0hFRFVMRURcIiA6IDA7XG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5zdG9wX3RpbWVfcHJvcGVydGllcyA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5kZXBhcnR1cmVfb2NjdXBhbmN5X3N0YXR1cyA9IG9wdGlvbnMuZW51bXMgPT09IFN0cmluZyA/IFwiRU1QVFlcIiA6IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnN0b3Bfc2VxdWVuY2UgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwic3RvcF9zZXF1ZW5jZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnN0b3Bfc2VxdWVuY2UgPSBtZXNzYWdlLnN0b3Bfc2VxdWVuY2U7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuYXJyaXZhbCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJhcnJpdmFsXCIpKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3QuYXJyaXZhbCA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5TdG9wVGltZUV2ZW50LnRvT2JqZWN0KG1lc3NhZ2UuYXJyaXZhbCwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZGVwYXJ0dXJlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImRlcGFydHVyZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmRlcGFydHVyZSA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5TdG9wVGltZUV2ZW50LnRvT2JqZWN0KG1lc3NhZ2UuZGVwYXJ0dXJlLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5zdG9wX2lkICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInN0b3BfaWRcIikpXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5zdG9wX2lkID0gbWVzc2FnZS5zdG9wX2lkO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnNjaGVkdWxlX3JlbGF0aW9uc2hpcCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzY2hlZHVsZV9yZWxhdGlvbnNoaXBcIikpXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5zY2hlZHVsZV9yZWxhdGlvbnNoaXAgPSBvcHRpb25zLmVudW1zID09PSBTdHJpbmcgPyAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuU3RvcFRpbWVVcGRhdGUuU2NoZWR1bGVSZWxhdGlvbnNoaXBbbWVzc2FnZS5zY2hlZHVsZV9yZWxhdGlvbnNoaXBdID09PSB1bmRlZmluZWQgPyBtZXNzYWdlLnNjaGVkdWxlX3JlbGF0aW9uc2hpcCA6ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5TdG9wVGltZVVwZGF0ZS5TY2hlZHVsZVJlbGF0aW9uc2hpcFttZXNzYWdlLnNjaGVkdWxlX3JlbGF0aW9uc2hpcF0gOiBtZXNzYWdlLnNjaGVkdWxlX3JlbGF0aW9uc2hpcDtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5zdG9wX3RpbWVfcHJvcGVydGllcyAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzdG9wX3RpbWVfcHJvcGVydGllc1wiKSlcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnN0b3BfdGltZV9wcm9wZXJ0aWVzID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLlN0b3BUaW1lVXBkYXRlLlN0b3BUaW1lUHJvcGVydGllcy50b09iamVjdChtZXNzYWdlLnN0b3BfdGltZV9wcm9wZXJ0aWVzLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5kZXBhcnR1cmVfb2NjdXBhbmN5X3N0YXR1cyAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJkZXBhcnR1cmVfb2NjdXBhbmN5X3N0YXR1c1wiKSlcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmRlcGFydHVyZV9vY2N1cGFuY3lfc3RhdHVzID0gb3B0aW9ucy5lbnVtcyA9PT0gU3RyaW5nID8gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlUG9zaXRpb24uT2NjdXBhbmN5U3RhdHVzW21lc3NhZ2UuZGVwYXJ0dXJlX29jY3VwYW5jeV9zdGF0dXNdID09PSB1bmRlZmluZWQgPyBtZXNzYWdlLmRlcGFydHVyZV9vY2N1cGFuY3lfc3RhdHVzIDogJHJvb3QudHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlUG9zaXRpb24uT2NjdXBhbmN5U3RhdHVzW21lc3NhZ2UuZGVwYXJ0dXJlX29jY3VwYW5jeV9zdGF0dXNdIDogbWVzc2FnZS5kZXBhcnR1cmVfb2NjdXBhbmN5X3N0YXR1cztcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIFN0b3BUaW1lVXBkYXRlIHRvIEpTT04uXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdG9KU09OXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLlN0b3BUaW1lVXBkYXRlXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgU3RvcFRpbWVVcGRhdGUucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogR2V0cyB0aGUgZGVmYXVsdCB0eXBlIHVybCBmb3IgU3RvcFRpbWVVcGRhdGVcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBnZXRUeXBlVXJsXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLlN0b3BUaW1lVXBkYXRlXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3R5cGVVcmxQcmVmaXhdIHlvdXIgY3VzdG9tIHR5cGVVcmxQcmVmaXgoZGVmYXVsdCBcInR5cGUuZ29vZ2xlYXBpcy5jb21cIilcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBkZWZhdWx0IHR5cGUgdXJsXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFN0b3BUaW1lVXBkYXRlLmdldFR5cGVVcmwgPSBmdW5jdGlvbiBnZXRUeXBlVXJsKHR5cGVVcmxQcmVmaXgpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZVVybFByZWZpeCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGVVcmxQcmVmaXggPSBcInR5cGUuZ29vZ2xlYXBpcy5jb21cIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVVcmxQcmVmaXggKyBcIi90cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuU3RvcFRpbWVVcGRhdGVcIjtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogU2NoZWR1bGVSZWxhdGlvbnNoaXAgZW51bS5cbiAgICAgICAgICAgICAqIEBuYW1lIHRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5TdG9wVGltZVVwZGF0ZS5TY2hlZHVsZVJlbGF0aW9uc2hpcFxuICAgICAgICAgICAgICogQGVudW0ge251bWJlcn1cbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBTQ0hFRFVMRUQ9MCBTQ0hFRFVMRUQgdmFsdWVcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBTS0lQUEVEPTEgU0tJUFBFRCB2YWx1ZVxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IE5PX0RBVEE9MiBOT19EQVRBIHZhbHVlXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gVU5TQ0hFRFVMRUQ9MyBVTlNDSEVEVUxFRCB2YWx1ZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBTdG9wVGltZVVwZGF0ZS5TY2hlZHVsZVJlbGF0aW9uc2hpcCA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWVzQnlJZCA9IHt9LCB2YWx1ZXMgPSBPYmplY3QuY3JlYXRlKHZhbHVlc0J5SWQpO1xuICAgICAgICAgICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzBdID0gXCJTQ0hFRFVMRURcIl0gPSAwO1xuICAgICAgICAgICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzFdID0gXCJTS0lQUEVEXCJdID0gMTtcbiAgICAgICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFsyXSA9IFwiTk9fREFUQVwiXSA9IDI7XG4gICAgICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbM10gPSBcIlVOU0NIRURVTEVEXCJdID0gMztcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWVzO1xuICAgICAgICAgICAgfSkoKTtcblxuICAgICAgICAgICAgU3RvcFRpbWVVcGRhdGUuU3RvcFRpbWVQcm9wZXJ0aWVzID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIFN0b3BUaW1lUHJvcGVydGllcy5cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLlN0b3BUaW1lVXBkYXRlXG4gICAgICAgICAgICAgICAgICogQGludGVyZmFjZSBJU3RvcFRpbWVQcm9wZXJ0aWVzXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW2Fzc2lnbmVkX3N0b3BfaWRdIFN0b3BUaW1lUHJvcGVydGllcyBhc3NpZ25lZF9zdG9wX2lkXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW3N0b3BfaGVhZHNpZ25dIFN0b3BUaW1lUHJvcGVydGllcyBzdG9wX2hlYWRzaWduXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHt0cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuU3RvcFRpbWVVcGRhdGUuU3RvcFRpbWVQcm9wZXJ0aWVzLkRyb3BPZmZQaWNrdXBUeXBlfG51bGx9IFtwaWNrdXBfdHlwZV0gU3RvcFRpbWVQcm9wZXJ0aWVzIHBpY2t1cF90eXBlXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHt0cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuU3RvcFRpbWVVcGRhdGUuU3RvcFRpbWVQcm9wZXJ0aWVzLkRyb3BPZmZQaWNrdXBUeXBlfG51bGx9IFtkcm9wX29mZl90eXBlXSBTdG9wVGltZVByb3BlcnRpZXMgZHJvcF9vZmZfdHlwZVxuICAgICAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBTdG9wVGltZVByb3BlcnRpZXMuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5TdG9wVGltZVVwZGF0ZVxuICAgICAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIFN0b3BUaW1lUHJvcGVydGllcy5cbiAgICAgICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJU3RvcFRpbWVQcm9wZXJ0aWVzXG4gICAgICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHt0cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuU3RvcFRpbWVVcGRhdGUuSVN0b3BUaW1lUHJvcGVydGllcz19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFN0b3BUaW1lUHJvcGVydGllcyhwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogU3RvcFRpbWVQcm9wZXJ0aWVzIGFzc2lnbmVkX3N0b3BfaWQuXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfSBhc3NpZ25lZF9zdG9wX2lkXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5TdG9wVGltZVVwZGF0ZS5TdG9wVGltZVByb3BlcnRpZXNcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBTdG9wVGltZVByb3BlcnRpZXMucHJvdG90eXBlLmFzc2lnbmVkX3N0b3BfaWQgPSBcIlwiO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogU3RvcFRpbWVQcm9wZXJ0aWVzIHN0b3BfaGVhZHNpZ24uXG4gICAgICAgICAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfSBzdG9wX2hlYWRzaWduXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5TdG9wVGltZVVwZGF0ZS5TdG9wVGltZVByb3BlcnRpZXNcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBTdG9wVGltZVByb3BlcnRpZXMucHJvdG90eXBlLnN0b3BfaGVhZHNpZ24gPSBcIlwiO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogU3RvcFRpbWVQcm9wZXJ0aWVzIHBpY2t1cF90eXBlLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge3RyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5TdG9wVGltZVVwZGF0ZS5TdG9wVGltZVByb3BlcnRpZXMuRHJvcE9mZlBpY2t1cFR5cGV9IHBpY2t1cF90eXBlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5TdG9wVGltZVVwZGF0ZS5TdG9wVGltZVByb3BlcnRpZXNcbiAgICAgICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBTdG9wVGltZVByb3BlcnRpZXMucHJvdG90eXBlLnBpY2t1cF90eXBlID0gMDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFN0b3BUaW1lUHJvcGVydGllcyBkcm9wX29mZl90eXBlLlxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXIge3RyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5TdG9wVGltZVVwZGF0ZS5TdG9wVGltZVByb3BlcnRpZXMuRHJvcE9mZlBpY2t1cFR5cGV9IGRyb3Bfb2ZmX3R5cGVcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLlN0b3BUaW1lVXBkYXRlLlN0b3BUaW1lUHJvcGVydGllc1xuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFN0b3BUaW1lUHJvcGVydGllcy5wcm90b3R5cGUuZHJvcF9vZmZfdHlwZSA9IDA7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IFN0b3BUaW1lUHJvcGVydGllcyBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGNyZWF0ZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuU3RvcFRpbWVVcGRhdGUuU3RvcFRpbWVQcm9wZXJ0aWVzXG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7dHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLlN0b3BUaW1lVXBkYXRlLklTdG9wVGltZVByb3BlcnRpZXM9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7dHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLlN0b3BUaW1lVXBkYXRlLlN0b3BUaW1lUHJvcGVydGllc30gU3RvcFRpbWVQcm9wZXJ0aWVzIGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgU3RvcFRpbWVQcm9wZXJ0aWVzLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgU3RvcFRpbWVQcm9wZXJ0aWVzKHByb3BlcnRpZXMpO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgU3RvcFRpbWVQcm9wZXJ0aWVzIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIHRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5TdG9wVGltZVVwZGF0ZS5TdG9wVGltZVByb3BlcnRpZXMudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuU3RvcFRpbWVVcGRhdGUuU3RvcFRpbWVQcm9wZXJ0aWVzXG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7dHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLlN0b3BUaW1lVXBkYXRlLklTdG9wVGltZVByb3BlcnRpZXN9IG1lc3NhZ2UgU3RvcFRpbWVQcm9wZXJ0aWVzIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBTdG9wVGltZVByb3BlcnRpZXMuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmFzc2lnbmVkX3N0b3BfaWQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImFzc2lnbmVkX3N0b3BfaWRcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLnN0cmluZyhtZXNzYWdlLmFzc2lnbmVkX3N0b3BfaWQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5zdG9wX2hlYWRzaWduICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJzdG9wX2hlYWRzaWduXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAyID0qLzE4KS5zdHJpbmcobWVzc2FnZS5zdG9wX2hlYWRzaWduKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UucGlja3VwX3R5cGUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInBpY2t1cF90eXBlXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAzLCB3aXJlVHlwZSAwID0qLzI0KS5pbnQzMihtZXNzYWdlLnBpY2t1cF90eXBlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZHJvcF9vZmZfdHlwZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiZHJvcF9vZmZfdHlwZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgNCwgd2lyZVR5cGUgMCA9Ki8zMikuaW50MzIobWVzc2FnZS5kcm9wX29mZl90eXBlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFN0b3BUaW1lUHJvcGVydGllcyBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayB0cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuU3RvcFRpbWVVcGRhdGUuU3RvcFRpbWVQcm9wZXJ0aWVzLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLlN0b3BUaW1lVXBkYXRlLlN0b3BUaW1lUHJvcGVydGllc1xuICAgICAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5TdG9wVGltZVVwZGF0ZS5JU3RvcFRpbWVQcm9wZXJ0aWVzfSBtZXNzYWdlIFN0b3BUaW1lUHJvcGVydGllcyBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgU3RvcFRpbWVQcm9wZXJ0aWVzLmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIERlY29kZXMgYSBTdG9wVGltZVByb3BlcnRpZXMgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5TdG9wVGltZVVwZGF0ZS5TdG9wVGltZVByb3BlcnRpZXNcbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7dHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLlN0b3BUaW1lVXBkYXRlLlN0b3BUaW1lUHJvcGVydGllc30gU3RvcFRpbWVQcm9wZXJ0aWVzXG4gICAgICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBTdG9wVGltZVByb3BlcnRpZXMuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoLCBlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5TdG9wVGltZVVwZGF0ZS5TdG9wVGltZVByb3BlcnRpZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGFnID09PSBlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5hc3NpZ25lZF9zdG9wX2lkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zdG9wX2hlYWRzaWduID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5waWNrdXBfdHlwZSA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5kcm9wX29mZl90eXBlID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBEZWNvZGVzIGEgU3RvcFRpbWVQcm9wZXJ0aWVzIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuXG4gICAgICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuU3RvcFRpbWVVcGRhdGUuU3RvcFRpbWVQcm9wZXJ0aWVzXG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHt0cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuU3RvcFRpbWVVcGRhdGUuU3RvcFRpbWVQcm9wZXJ0aWVzfSBTdG9wVGltZVByb3BlcnRpZXNcbiAgICAgICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFN0b3BUaW1lUHJvcGVydGllcy5kZWNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gbmV3ICRSZWFkZXIocmVhZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVmVyaWZpZXMgYSBTdG9wVGltZVByb3BlcnRpZXMgbWVzc2FnZS5cbiAgICAgICAgICAgICAgICAgKiBAZnVuY3Rpb24gdmVyaWZ5XG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5TdG9wVGltZVVwZGF0ZS5TdG9wVGltZVByb3BlcnRpZXNcbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5XG4gICAgICAgICAgICAgICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfSBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3RcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBTdG9wVGltZVByb3BlcnRpZXMudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJvYmplY3QgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuYXNzaWduZWRfc3RvcF9pZCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJhc3NpZ25lZF9zdG9wX2lkXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc1N0cmluZyhtZXNzYWdlLmFzc2lnbmVkX3N0b3BfaWQpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcImFzc2lnbmVkX3N0b3BfaWQ6IHN0cmluZyBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5zdG9wX2hlYWRzaWduICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInN0b3BfaGVhZHNpZ25cIikpXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzU3RyaW5nKG1lc3NhZ2Uuc3RvcF9oZWFkc2lnbikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwic3RvcF9oZWFkc2lnbjogc3RyaW5nIGV4cGVjdGVkXCI7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnBpY2t1cF90eXBlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInBpY2t1cF90eXBlXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChtZXNzYWdlLnBpY2t1cF90eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInBpY2t1cF90eXBlOiBlbnVtIHZhbHVlIGV4cGVjdGVkXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmRyb3Bfb2ZmX3R5cGUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiZHJvcF9vZmZfdHlwZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAobWVzc2FnZS5kcm9wX29mZl90eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcImRyb3Bfb2ZmX3R5cGU6IGVudW0gdmFsdWUgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENyZWF0ZXMgYSBTdG9wVGltZVByb3BlcnRpZXMgbWVzc2FnZSBmcm9tIGEgcGxhaW4gb2JqZWN0LiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byB0aGVpciByZXNwZWN0aXZlIGludGVybmFsIHR5cGVzLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBmcm9tT2JqZWN0XG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5TdG9wVGltZVVwZGF0ZS5TdG9wVGltZVByb3BlcnRpZXNcbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gb2JqZWN0IFBsYWluIG9iamVjdFxuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHt0cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuU3RvcFRpbWVVcGRhdGUuU3RvcFRpbWVQcm9wZXJ0aWVzfSBTdG9wVGltZVByb3BlcnRpZXNcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBTdG9wVGltZVByb3BlcnRpZXMuZnJvbU9iamVjdCA9IGZ1bmN0aW9uIGZyb21PYmplY3Qob2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuU3RvcFRpbWVVcGRhdGUuU3RvcFRpbWVQcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBuZXcgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLlN0b3BUaW1lVXBkYXRlLlN0b3BUaW1lUHJvcGVydGllcygpO1xuICAgICAgICAgICAgICAgICAgICBpZiAob2JqZWN0LmFzc2lnbmVkX3N0b3BfaWQgIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYXNzaWduZWRfc3RvcF9pZCA9IFN0cmluZyhvYmplY3QuYXNzaWduZWRfc3RvcF9pZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvYmplY3Quc3RvcF9oZWFkc2lnbiAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zdG9wX2hlYWRzaWduID0gU3RyaW5nKG9iamVjdC5zdG9wX2hlYWRzaWduKTtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChvYmplY3QucGlja3VwX3R5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqZWN0LnBpY2t1cF90eXBlID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5waWNrdXBfdHlwZSA9IG9iamVjdC5waWNrdXBfdHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiUkVHVUxBUlwiOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnBpY2t1cF90eXBlID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiTk9ORVwiOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnBpY2t1cF90eXBlID0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiUEhPTkVfQUdFTkNZXCI6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucGlja3VwX3R5cGUgPSAyO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJDT09SRElOQVRFX1dJVEhfRFJJVkVSXCI6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucGlja3VwX3R5cGUgPSAzO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChvYmplY3QuZHJvcF9vZmZfdHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmplY3QuZHJvcF9vZmZfdHlwZSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZHJvcF9vZmZfdHlwZSA9IG9iamVjdC5kcm9wX29mZl90eXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJSRUdVTEFSXCI6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZHJvcF9vZmZfdHlwZSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIk5PTkVcIjpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5kcm9wX29mZl90eXBlID0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiUEhPTkVfQUdFTkNZXCI6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZHJvcF9vZmZfdHlwZSA9IDI7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkNPT1JESU5BVEVfV0lUSF9EUklWRVJcIjpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5kcm9wX29mZl90eXBlID0gMztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBTdG9wVGltZVByb3BlcnRpZXMgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b09iamVjdFxuICAgICAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuU3RvcFRpbWVVcGRhdGUuU3RvcFRpbWVQcm9wZXJ0aWVzXG4gICAgICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7dHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLlN0b3BUaW1lVXBkYXRlLlN0b3BUaW1lUHJvcGVydGllc30gbWVzc2FnZSBTdG9wVGltZVByb3BlcnRpZXNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFN0b3BUaW1lUHJvcGVydGllcy50b09iamVjdCA9IGZ1bmN0aW9uIHRvT2JqZWN0KG1lc3NhZ2UsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFvcHRpb25zKVxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0ge307XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmRlZmF1bHRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QuYXNzaWduZWRfc3RvcF9pZCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBvYmplY3Quc3RvcF9oZWFkc2lnbiA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QucGlja3VwX3R5cGUgPSBvcHRpb25zLmVudW1zID09PSBTdHJpbmcgPyBcIlJFR1VMQVJcIiA6IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QuZHJvcF9vZmZfdHlwZSA9IG9wdGlvbnMuZW51bXMgPT09IFN0cmluZyA/IFwiUkVHVUxBUlwiIDogMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5hc3NpZ25lZF9zdG9wX2lkICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImFzc2lnbmVkX3N0b3BfaWRcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QuYXNzaWduZWRfc3RvcF9pZCA9IG1lc3NhZ2UuYXNzaWduZWRfc3RvcF9pZDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc3RvcF9oZWFkc2lnbiAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzdG9wX2hlYWRzaWduXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnN0b3BfaGVhZHNpZ24gPSBtZXNzYWdlLnN0b3BfaGVhZHNpZ247XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnBpY2t1cF90eXBlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInBpY2t1cF90eXBlXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnBpY2t1cF90eXBlID0gb3B0aW9ucy5lbnVtcyA9PT0gU3RyaW5nID8gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLlN0b3BUaW1lVXBkYXRlLlN0b3BUaW1lUHJvcGVydGllcy5Ecm9wT2ZmUGlja3VwVHlwZVttZXNzYWdlLnBpY2t1cF90eXBlXSA9PT0gdW5kZWZpbmVkID8gbWVzc2FnZS5waWNrdXBfdHlwZSA6ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5TdG9wVGltZVVwZGF0ZS5TdG9wVGltZVByb3BlcnRpZXMuRHJvcE9mZlBpY2t1cFR5cGVbbWVzc2FnZS5waWNrdXBfdHlwZV0gOiBtZXNzYWdlLnBpY2t1cF90eXBlO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5kcm9wX29mZl90eXBlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImRyb3Bfb2ZmX3R5cGVcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QuZHJvcF9vZmZfdHlwZSA9IG9wdGlvbnMuZW51bXMgPT09IFN0cmluZyA/ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5TdG9wVGltZVVwZGF0ZS5TdG9wVGltZVByb3BlcnRpZXMuRHJvcE9mZlBpY2t1cFR5cGVbbWVzc2FnZS5kcm9wX29mZl90eXBlXSA9PT0gdW5kZWZpbmVkID8gbWVzc2FnZS5kcm9wX29mZl90eXBlIDogJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLlN0b3BUaW1lVXBkYXRlLlN0b3BUaW1lUHJvcGVydGllcy5Ecm9wT2ZmUGlja3VwVHlwZVttZXNzYWdlLmRyb3Bfb2ZmX3R5cGVdIDogbWVzc2FnZS5kcm9wX29mZl90eXBlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIFN0b3BUaW1lUHJvcGVydGllcyB0byBKU09OLlxuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b0pTT05cbiAgICAgICAgICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLlN0b3BUaW1lVXBkYXRlLlN0b3BUaW1lUHJvcGVydGllc1xuICAgICAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBTdG9wVGltZVByb3BlcnRpZXMucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcywgJHByb3RvYnVmLnV0aWwudG9KU09OT3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEdldHMgdGhlIGRlZmF1bHQgdHlwZSB1cmwgZm9yIFN0b3BUaW1lUHJvcGVydGllc1xuICAgICAgICAgICAgICAgICAqIEBmdW5jdGlvbiBnZXRUeXBlVXJsXG4gICAgICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5TdG9wVGltZVVwZGF0ZS5TdG9wVGltZVByb3BlcnRpZXNcbiAgICAgICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFt0eXBlVXJsUHJlZml4XSB5b3VyIGN1c3RvbSB0eXBlVXJsUHJlZml4KGRlZmF1bHQgXCJ0eXBlLmdvb2dsZWFwaXMuY29tXCIpXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMge3N0cmluZ30gVGhlIGRlZmF1bHQgdHlwZSB1cmxcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBTdG9wVGltZVByb3BlcnRpZXMuZ2V0VHlwZVVybCA9IGZ1bmN0aW9uIGdldFR5cGVVcmwodHlwZVVybFByZWZpeCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZVVybFByZWZpeCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlVXJsUHJlZml4ID0gXCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVVcmxQcmVmaXggKyBcIi90cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuU3RvcFRpbWVVcGRhdGUuU3RvcFRpbWVQcm9wZXJ0aWVzXCI7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIERyb3BPZmZQaWNrdXBUeXBlIGVudW0uXG4gICAgICAgICAgICAgICAgICogQG5hbWUgdHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLlN0b3BUaW1lVXBkYXRlLlN0b3BUaW1lUHJvcGVydGllcy5Ecm9wT2ZmUGlja3VwVHlwZVxuICAgICAgICAgICAgICAgICAqIEBlbnVtIHtudW1iZXJ9XG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IFJFR1VMQVI9MCBSRUdVTEFSIHZhbHVlXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IE5PTkU9MSBOT05FIHZhbHVlXG4gICAgICAgICAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IFBIT05FX0FHRU5DWT0yIFBIT05FX0FHRU5DWSB2YWx1ZVxuICAgICAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBDT09SRElOQVRFX1dJVEhfRFJJVkVSPTMgQ09PUkRJTkFURV9XSVRIX0RSSVZFUiB2YWx1ZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIFN0b3BUaW1lUHJvcGVydGllcy5Ecm9wT2ZmUGlja3VwVHlwZSA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlc0J5SWQgPSB7fSwgdmFsdWVzID0gT2JqZWN0LmNyZWF0ZSh2YWx1ZXNCeUlkKTtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbMF0gPSBcIlJFR1VMQVJcIl0gPSAwO1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFsxXSA9IFwiTk9ORVwiXSA9IDE7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzJdID0gXCJQSE9ORV9BR0VOQ1lcIl0gPSAyO1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFszXSA9IFwiQ09PUkRJTkFURV9XSVRIX0RSSVZFUlwiXSA9IDM7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZXM7XG4gICAgICAgICAgICAgICAgfSkoKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBTdG9wVGltZVByb3BlcnRpZXM7XG4gICAgICAgICAgICB9KSgpO1xuXG4gICAgICAgICAgICByZXR1cm4gU3RvcFRpbWVVcGRhdGU7XG4gICAgICAgIH0pKCk7XG5cbiAgICAgICAgVHJpcFVwZGF0ZS5UcmlwUHJvcGVydGllcyA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgVHJpcFByb3BlcnRpZXMuXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlXG4gICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElUcmlwUHJvcGVydGllc1xuICAgICAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW3RyaXBfaWRdIFRyaXBQcm9wZXJ0aWVzIHRyaXBfaWRcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfG51bGx9IFtzdGFydF9kYXRlXSBUcmlwUHJvcGVydGllcyBzdGFydF9kYXRlXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbc3RhcnRfdGltZV0gVHJpcFByb3BlcnRpZXMgc3RhcnRfdGltZVxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW3NoYXBlX2lkXSBUcmlwUHJvcGVydGllcyBzaGFwZV9pZFxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW3RyaXBfaGVhZHNpZ25dIFRyaXBQcm9wZXJ0aWVzIHRyaXBfaGVhZHNpZ25cbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfG51bGx9IFt0cmlwX3Nob3J0X25hbWVdIFRyaXBQcm9wZXJ0aWVzIHRyaXBfc2hvcnRfbmFtZVxuICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBUcmlwUHJvcGVydGllcy5cbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGVcbiAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIFRyaXBQcm9wZXJ0aWVzLlxuICAgICAgICAgICAgICogQGltcGxlbWVudHMgSVRyaXBQcm9wZXJ0aWVzXG4gICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICAgICAqIEBwYXJhbSB7dHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLklUcmlwUHJvcGVydGllcz19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmdW5jdGlvbiBUcmlwUHJvcGVydGllcyhwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBUcmlwUHJvcGVydGllcyB0cmlwX2lkLlxuICAgICAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfSB0cmlwX2lkXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLlRyaXBQcm9wZXJ0aWVzXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgVHJpcFByb3BlcnRpZXMucHJvdG90eXBlLnRyaXBfaWQgPSBcIlwiO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFRyaXBQcm9wZXJ0aWVzIHN0YXJ0X2RhdGUuXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IHN0YXJ0X2RhdGVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuVHJpcFByb3BlcnRpZXNcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBUcmlwUHJvcGVydGllcy5wcm90b3R5cGUuc3RhcnRfZGF0ZSA9IFwiXCI7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVHJpcFByb3BlcnRpZXMgc3RhcnRfdGltZS5cbiAgICAgICAgICAgICAqIEBtZW1iZXIge3N0cmluZ30gc3RhcnRfdGltZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5UcmlwUHJvcGVydGllc1xuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFRyaXBQcm9wZXJ0aWVzLnByb3RvdHlwZS5zdGFydF90aW1lID0gXCJcIjtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBUcmlwUHJvcGVydGllcyBzaGFwZV9pZC5cbiAgICAgICAgICAgICAqIEBtZW1iZXIge3N0cmluZ30gc2hhcGVfaWRcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuVHJpcFByb3BlcnRpZXNcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBUcmlwUHJvcGVydGllcy5wcm90b3R5cGUuc2hhcGVfaWQgPSBcIlwiO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFRyaXBQcm9wZXJ0aWVzIHRyaXBfaGVhZHNpZ24uXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IHRyaXBfaGVhZHNpZ25cbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuVHJpcFByb3BlcnRpZXNcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBUcmlwUHJvcGVydGllcy5wcm90b3R5cGUudHJpcF9oZWFkc2lnbiA9IFwiXCI7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVHJpcFByb3BlcnRpZXMgdHJpcF9zaG9ydF9uYW1lLlxuICAgICAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfSB0cmlwX3Nob3J0X25hbWVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuVHJpcFByb3BlcnRpZXNcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBUcmlwUHJvcGVydGllcy5wcm90b3R5cGUudHJpcF9zaG9ydF9uYW1lID0gXCJcIjtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IFRyaXBQcm9wZXJ0aWVzIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBjcmVhdGVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuVHJpcFByb3BlcnRpZXNcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7dHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLklUcmlwUHJvcGVydGllcz19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICogQHJldHVybnMge3RyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5UcmlwUHJvcGVydGllc30gVHJpcFByb3BlcnRpZXMgaW5zdGFuY2VcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgVHJpcFByb3BlcnRpZXMuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFRyaXBQcm9wZXJ0aWVzKHByb3BlcnRpZXMpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgVHJpcFByb3BlcnRpZXMgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgdHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLlRyaXBQcm9wZXJ0aWVzLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5UcmlwUHJvcGVydGllc1xuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHt0cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuSVRyaXBQcm9wZXJ0aWVzfSBtZXNzYWdlIFRyaXBQcm9wZXJ0aWVzIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFRyaXBQcm9wZXJ0aWVzLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS50cmlwX2lkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJ0cmlwX2lkXCIpKVxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLnN0cmluZyhtZXNzYWdlLnRyaXBfaWQpO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnN0YXJ0X2RhdGUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInN0YXJ0X2RhdGVcIikpXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMiA9Ki8xOCkuc3RyaW5nKG1lc3NhZ2Uuc3RhcnRfZGF0ZSk7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc3RhcnRfdGltZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwic3RhcnRfdGltZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAzLCB3aXJlVHlwZSAyID0qLzI2KS5zdHJpbmcobWVzc2FnZS5zdGFydF90aW1lKTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5zaGFwZV9pZCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwic2hhcGVfaWRcIikpXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgNCwgd2lyZVR5cGUgMiA9Ki8zNCkuc3RyaW5nKG1lc3NhZ2Uuc2hhcGVfaWQpO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnRyaXBfaGVhZHNpZ24gIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInRyaXBfaGVhZHNpZ25cIikpXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgNSwgd2lyZVR5cGUgMiA9Ki80Mikuc3RyaW5nKG1lc3NhZ2UudHJpcF9oZWFkc2lnbik7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudHJpcF9zaG9ydF9uYW1lICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJ0cmlwX3Nob3J0X25hbWVcIikpXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgNiwgd2lyZVR5cGUgMiA9Ki81MCkuc3RyaW5nKG1lc3NhZ2UudHJpcF9zaG9ydF9uYW1lKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgVHJpcFByb3BlcnRpZXMgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgdHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLlRyaXBQcm9wZXJ0aWVzLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5UcmlwUHJvcGVydGllc1xuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHt0cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuSVRyaXBQcm9wZXJ0aWVzfSBtZXNzYWdlIFRyaXBQcm9wZXJ0aWVzIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFRyaXBQcm9wZXJ0aWVzLmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGUobWVzc2FnZSwgd3JpdGVyKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRGVjb2RlcyBhIFRyaXBQcm9wZXJ0aWVzIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLlRyaXBQcm9wZXJ0aWVzXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7dHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLlRyaXBQcm9wZXJ0aWVzfSBUcmlwUHJvcGVydGllc1xuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBUcmlwUHJvcGVydGllcy5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLlRyaXBQcm9wZXJ0aWVzKCk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhZyA9PT0gZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS50cmlwX2lkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnN0YXJ0X2RhdGUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3RhcnRfdGltZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zaGFwZV9pZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS50cmlwX2hlYWRzaWduID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnRyaXBfc2hvcnRfbmFtZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBEZWNvZGVzIGEgVHJpcFByb3BlcnRpZXMgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWRcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuVHJpcFByb3BlcnRpZXNcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICogQHJldHVybnMge3RyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5UcmlwUHJvcGVydGllc30gVHJpcFByb3BlcnRpZXNcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgVHJpcFByb3BlcnRpZXMuZGVjb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkKHJlYWRlcikge1xuICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSBuZXcgJFJlYWRlcihyZWFkZXIpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFZlcmlmaWVzIGEgVHJpcFByb3BlcnRpZXMgbWVzc2FnZS5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB2ZXJpZnlcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuVHJpcFByb3BlcnRpZXNcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeVxuICAgICAgICAgICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfSBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3RcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgVHJpcFByb3BlcnRpZXMudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgIT09IFwib2JqZWN0XCIgfHwgbWVzc2FnZSA9PT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwib2JqZWN0IGV4cGVjdGVkXCI7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudHJpcF9pZCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJ0cmlwX2lkXCIpKVxuICAgICAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzU3RyaW5nKG1lc3NhZ2UudHJpcF9pZCkpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJ0cmlwX2lkOiBzdHJpbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5zdGFydF9kYXRlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInN0YXJ0X2RhdGVcIikpXG4gICAgICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNTdHJpbmcobWVzc2FnZS5zdGFydF9kYXRlKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInN0YXJ0X2RhdGU6IHN0cmluZyBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnN0YXJ0X3RpbWUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwic3RhcnRfdGltZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc1N0cmluZyhtZXNzYWdlLnN0YXJ0X3RpbWUpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwic3RhcnRfdGltZTogc3RyaW5nIGV4cGVjdGVkXCI7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc2hhcGVfaWQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwic2hhcGVfaWRcIikpXG4gICAgICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNTdHJpbmcobWVzc2FnZS5zaGFwZV9pZCkpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJzaGFwZV9pZDogc3RyaW5nIGV4cGVjdGVkXCI7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudHJpcF9oZWFkc2lnbiAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJ0cmlwX2hlYWRzaWduXCIpKVxuICAgICAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzU3RyaW5nKG1lc3NhZ2UudHJpcF9oZWFkc2lnbikpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJ0cmlwX2hlYWRzaWduOiBzdHJpbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS50cmlwX3Nob3J0X25hbWUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwidHJpcF9zaG9ydF9uYW1lXCIpKVxuICAgICAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzU3RyaW5nKG1lc3NhZ2UudHJpcF9zaG9ydF9uYW1lKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInRyaXBfc2hvcnRfbmFtZTogc3RyaW5nIGV4cGVjdGVkXCI7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBUcmlwUHJvcGVydGllcyBtZXNzYWdlIGZyb20gYSBwbGFpbiBvYmplY3QuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIHRoZWlyIHJlc3BlY3RpdmUgaW50ZXJuYWwgdHlwZXMuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZnJvbU9iamVjdFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5UcmlwUHJvcGVydGllc1xuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gb2JqZWN0IFBsYWluIG9iamVjdFxuICAgICAgICAgICAgICogQHJldHVybnMge3RyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5UcmlwUHJvcGVydGllc30gVHJpcFByb3BlcnRpZXNcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgVHJpcFByb3BlcnRpZXMuZnJvbU9iamVjdCA9IGZ1bmN0aW9uIGZyb21PYmplY3Qob2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdCBpbnN0YW5jZW9mICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5UcmlwUHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IG5ldyAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyaXBVcGRhdGUuVHJpcFByb3BlcnRpZXMoKTtcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0LnRyaXBfaWQgIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS50cmlwX2lkID0gU3RyaW5nKG9iamVjdC50cmlwX2lkKTtcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0LnN0YXJ0X2RhdGUgIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zdGFydF9kYXRlID0gU3RyaW5nKG9iamVjdC5zdGFydF9kYXRlKTtcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0LnN0YXJ0X3RpbWUgIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zdGFydF90aW1lID0gU3RyaW5nKG9iamVjdC5zdGFydF90aW1lKTtcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0LnNoYXBlX2lkICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2hhcGVfaWQgPSBTdHJpbmcob2JqZWN0LnNoYXBlX2lkKTtcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0LnRyaXBfaGVhZHNpZ24gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS50cmlwX2hlYWRzaWduID0gU3RyaW5nKG9iamVjdC50cmlwX2hlYWRzaWduKTtcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0LnRyaXBfc2hvcnRfbmFtZSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnRyaXBfc2hvcnRfbmFtZSA9IFN0cmluZyhvYmplY3QudHJpcF9zaG9ydF9uYW1lKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgVHJpcFByb3BlcnRpZXMgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHRvT2JqZWN0XG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLlRyaXBQcm9wZXJ0aWVzXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5UcmlwUHJvcGVydGllc30gbWVzc2FnZSBUcmlwUHJvcGVydGllc1xuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuSUNvbnZlcnNpb25PcHRpb25zfSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBUcmlwUHJvcGVydGllcy50b09iamVjdCA9IGZ1bmN0aW9uIHRvT2JqZWN0KG1lc3NhZ2UsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW9wdGlvbnMpXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0ge307XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGVmYXVsdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnRyaXBfaWQgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICBvYmplY3Quc3RhcnRfZGF0ZSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5zdGFydF90aW1lID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnNoYXBlX2lkID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnRyaXBfaGVhZHNpZ24gPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICBvYmplY3QudHJpcF9zaG9ydF9uYW1lID0gXCJcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudHJpcF9pZCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJ0cmlwX2lkXCIpKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3QudHJpcF9pZCA9IG1lc3NhZ2UudHJpcF9pZDtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5zdGFydF9kYXRlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInN0YXJ0X2RhdGVcIikpXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5zdGFydF9kYXRlID0gbWVzc2FnZS5zdGFydF9kYXRlO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnN0YXJ0X3RpbWUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwic3RhcnRfdGltZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnN0YXJ0X3RpbWUgPSBtZXNzYWdlLnN0YXJ0X3RpbWU7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc2hhcGVfaWQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwic2hhcGVfaWRcIikpXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5zaGFwZV9pZCA9IG1lc3NhZ2Uuc2hhcGVfaWQ7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudHJpcF9oZWFkc2lnbiAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJ0cmlwX2hlYWRzaWduXCIpKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3QudHJpcF9oZWFkc2lnbiA9IG1lc3NhZ2UudHJpcF9oZWFkc2lnbjtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS50cmlwX3Nob3J0X25hbWUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwidHJpcF9zaG9ydF9uYW1lXCIpKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3QudHJpcF9zaG9ydF9uYW1lID0gbWVzc2FnZS50cmlwX3Nob3J0X25hbWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ29udmVydHMgdGhpcyBUcmlwUHJvcGVydGllcyB0byBKU09OLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHRvSlNPTlxuICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5UcmlwUHJvcGVydGllc1xuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IEpTT04gb2JqZWN0XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFRyaXBQcm9wZXJ0aWVzLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcywgJHByb3RvYnVmLnV0aWwudG9KU09OT3B0aW9ucyk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEdldHMgdGhlIGRlZmF1bHQgdHlwZSB1cmwgZm9yIFRyaXBQcm9wZXJ0aWVzXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZ2V0VHlwZVVybFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcFVwZGF0ZS5UcmlwUHJvcGVydGllc1xuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFt0eXBlVXJsUHJlZml4XSB5b3VyIGN1c3RvbSB0eXBlVXJsUHJlZml4KGRlZmF1bHQgXCJ0eXBlLmdvb2dsZWFwaXMuY29tXCIpXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgZGVmYXVsdCB0eXBlIHVybFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBUcmlwUHJvcGVydGllcy5nZXRUeXBlVXJsID0gZnVuY3Rpb24gZ2V0VHlwZVVybCh0eXBlVXJsUHJlZml4KSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVVcmxQcmVmaXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB0eXBlVXJsUHJlZml4ID0gXCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0eXBlVXJsUHJlZml4ICsgXCIvdHJhbnNpdF9yZWFsdGltZS5UcmlwVXBkYXRlLlRyaXBQcm9wZXJ0aWVzXCI7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXR1cm4gVHJpcFByb3BlcnRpZXM7XG4gICAgICAgIH0pKCk7XG5cbiAgICAgICAgcmV0dXJuIFRyaXBVcGRhdGU7XG4gICAgfSkoKTtcblxuICAgIHRyYW5zaXRfcmVhbHRpbWUuVmVoaWNsZVBvc2l0aW9uID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgVmVoaWNsZVBvc2l0aW9uLlxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZVxuICAgICAgICAgKiBAaW50ZXJmYWNlIElWZWhpY2xlUG9zaXRpb25cbiAgICAgICAgICogQHByb3BlcnR5IHt0cmFuc2l0X3JlYWx0aW1lLklUcmlwRGVzY3JpcHRvcnxudWxsfSBbdHJpcF0gVmVoaWNsZVBvc2l0aW9uIHRyaXBcbiAgICAgICAgICogQHByb3BlcnR5IHt0cmFuc2l0X3JlYWx0aW1lLklWZWhpY2xlRGVzY3JpcHRvcnxudWxsfSBbdmVoaWNsZV0gVmVoaWNsZVBvc2l0aW9uIHZlaGljbGVcbiAgICAgICAgICogQHByb3BlcnR5IHt0cmFuc2l0X3JlYWx0aW1lLklQb3NpdGlvbnxudWxsfSBbcG9zaXRpb25dIFZlaGljbGVQb3NpdGlvbiBwb3NpdGlvblxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbY3VycmVudF9zdG9wX3NlcXVlbmNlXSBWZWhpY2xlUG9zaXRpb24gY3VycmVudF9zdG9wX3NlcXVlbmNlXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfG51bGx9IFtzdG9wX2lkXSBWZWhpY2xlUG9zaXRpb24gc3RvcF9pZFxuICAgICAgICAgKiBAcHJvcGVydHkge3RyYW5zaXRfcmVhbHRpbWUuVmVoaWNsZVBvc2l0aW9uLlZlaGljbGVTdG9wU3RhdHVzfG51bGx9IFtjdXJyZW50X3N0YXR1c10gVmVoaWNsZVBvc2l0aW9uIGN1cnJlbnRfc3RhdHVzXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfG51bGx9IFt0aW1lc3RhbXBdIFZlaGljbGVQb3NpdGlvbiB0aW1lc3RhbXBcbiAgICAgICAgICogQHByb3BlcnR5IHt0cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVQb3NpdGlvbi5Db25nZXN0aW9uTGV2ZWx8bnVsbH0gW2Nvbmdlc3Rpb25fbGV2ZWxdIFZlaGljbGVQb3NpdGlvbiBjb25nZXN0aW9uX2xldmVsXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7dHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlUG9zaXRpb24uT2NjdXBhbmN5U3RhdHVzfG51bGx9IFtvY2N1cGFuY3lfc3RhdHVzXSBWZWhpY2xlUG9zaXRpb24gb2NjdXBhbmN5X3N0YXR1c1xuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbb2NjdXBhbmN5X3BlcmNlbnRhZ2VdIFZlaGljbGVQb3NpdGlvbiBvY2N1cGFuY3lfcGVyY2VudGFnZVxuICAgICAgICAgKiBAcHJvcGVydHkge0FycmF5Ljx0cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVQb3NpdGlvbi5JQ2FycmlhZ2VEZXRhaWxzPnxudWxsfSBbbXVsdGlfY2FycmlhZ2VfZGV0YWlsc10gVmVoaWNsZVBvc2l0aW9uIG11bHRpX2NhcnJpYWdlX2RldGFpbHNcbiAgICAgICAgICovXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgVmVoaWNsZVBvc2l0aW9uLlxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZVxuICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBWZWhpY2xlUG9zaXRpb24uXG4gICAgICAgICAqIEBpbXBsZW1lbnRzIElWZWhpY2xlUG9zaXRpb25cbiAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAqIEBwYXJhbSB7dHJhbnNpdF9yZWFsdGltZS5JVmVoaWNsZVBvc2l0aW9uPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBWZWhpY2xlUG9zaXRpb24ocHJvcGVydGllcykge1xuICAgICAgICAgICAgdGhpcy5tdWx0aV9jYXJyaWFnZV9kZXRhaWxzID0gW107XG4gICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFZlaGljbGVQb3NpdGlvbiB0cmlwLlxuICAgICAgICAgKiBAbWVtYmVyIHt0cmFuc2l0X3JlYWx0aW1lLklUcmlwRGVzY3JpcHRvcnxudWxsfHVuZGVmaW5lZH0gdHJpcFxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlUG9zaXRpb25cbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBWZWhpY2xlUG9zaXRpb24ucHJvdG90eXBlLnRyaXAgPSBudWxsO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBWZWhpY2xlUG9zaXRpb24gdmVoaWNsZS5cbiAgICAgICAgICogQG1lbWJlciB7dHJhbnNpdF9yZWFsdGltZS5JVmVoaWNsZURlc2NyaXB0b3J8bnVsbHx1bmRlZmluZWR9IHZlaGljbGVcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVmVoaWNsZVBvc2l0aW9uXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgVmVoaWNsZVBvc2l0aW9uLnByb3RvdHlwZS52ZWhpY2xlID0gbnVsbDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVmVoaWNsZVBvc2l0aW9uIHBvc2l0aW9uLlxuICAgICAgICAgKiBAbWVtYmVyIHt0cmFuc2l0X3JlYWx0aW1lLklQb3NpdGlvbnxudWxsfHVuZGVmaW5lZH0gcG9zaXRpb25cbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVmVoaWNsZVBvc2l0aW9uXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgVmVoaWNsZVBvc2l0aW9uLnByb3RvdHlwZS5wb3NpdGlvbiA9IG51bGw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFZlaGljbGVQb3NpdGlvbiBjdXJyZW50X3N0b3Bfc2VxdWVuY2UuXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn0gY3VycmVudF9zdG9wX3NlcXVlbmNlXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVQb3NpdGlvblxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIFZlaGljbGVQb3NpdGlvbi5wcm90b3R5cGUuY3VycmVudF9zdG9wX3NlcXVlbmNlID0gMDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVmVoaWNsZVBvc2l0aW9uIHN0b3BfaWQuXG4gICAgICAgICAqIEBtZW1iZXIge3N0cmluZ30gc3RvcF9pZFxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlUG9zaXRpb25cbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBWZWhpY2xlUG9zaXRpb24ucHJvdG90eXBlLnN0b3BfaWQgPSBcIlwiO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBWZWhpY2xlUG9zaXRpb24gY3VycmVudF9zdGF0dXMuXG4gICAgICAgICAqIEBtZW1iZXIge3RyYW5zaXRfcmVhbHRpbWUuVmVoaWNsZVBvc2l0aW9uLlZlaGljbGVTdG9wU3RhdHVzfSBjdXJyZW50X3N0YXR1c1xuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlUG9zaXRpb25cbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBWZWhpY2xlUG9zaXRpb24ucHJvdG90eXBlLmN1cnJlbnRfc3RhdHVzID0gMjtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVmVoaWNsZVBvc2l0aW9uIHRpbWVzdGFtcC5cbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfSB0aW1lc3RhbXBcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVmVoaWNsZVBvc2l0aW9uXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgVmVoaWNsZVBvc2l0aW9uLnByb3RvdHlwZS50aW1lc3RhbXAgPSAkdXRpbC5Mb25nID8gJHV0aWwuTG9uZy5mcm9tQml0cygwLDAsdHJ1ZSkgOiAwO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBWZWhpY2xlUG9zaXRpb24gY29uZ2VzdGlvbl9sZXZlbC5cbiAgICAgICAgICogQG1lbWJlciB7dHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlUG9zaXRpb24uQ29uZ2VzdGlvbkxldmVsfSBjb25nZXN0aW9uX2xldmVsXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVQb3NpdGlvblxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIFZlaGljbGVQb3NpdGlvbi5wcm90b3R5cGUuY29uZ2VzdGlvbl9sZXZlbCA9IDA7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFZlaGljbGVQb3NpdGlvbiBvY2N1cGFuY3lfc3RhdHVzLlxuICAgICAgICAgKiBAbWVtYmVyIHt0cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVQb3NpdGlvbi5PY2N1cGFuY3lTdGF0dXN9IG9jY3VwYW5jeV9zdGF0dXNcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVmVoaWNsZVBvc2l0aW9uXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgVmVoaWNsZVBvc2l0aW9uLnByb3RvdHlwZS5vY2N1cGFuY3lfc3RhdHVzID0gMDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVmVoaWNsZVBvc2l0aW9uIG9jY3VwYW5jeV9wZXJjZW50YWdlLlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9IG9jY3VwYW5jeV9wZXJjZW50YWdlXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVQb3NpdGlvblxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIFZlaGljbGVQb3NpdGlvbi5wcm90b3R5cGUub2NjdXBhbmN5X3BlcmNlbnRhZ2UgPSAwO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBWZWhpY2xlUG9zaXRpb24gbXVsdGlfY2FycmlhZ2VfZGV0YWlscy5cbiAgICAgICAgICogQG1lbWJlciB7QXJyYXkuPHRyYW5zaXRfcmVhbHRpbWUuVmVoaWNsZVBvc2l0aW9uLklDYXJyaWFnZURldGFpbHM+fSBtdWx0aV9jYXJyaWFnZV9kZXRhaWxzXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVQb3NpdGlvblxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIFZlaGljbGVQb3NpdGlvbi5wcm90b3R5cGUubXVsdGlfY2FycmlhZ2VfZGV0YWlscyA9ICR1dGlsLmVtcHR5QXJyYXk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYSBuZXcgVmVoaWNsZVBvc2l0aW9uIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGNyZWF0ZVxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlUG9zaXRpb25cbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuSVZlaGljbGVQb3NpdGlvbj19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgKiBAcmV0dXJucyB7dHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlUG9zaXRpb259IFZlaGljbGVQb3NpdGlvbiBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgVmVoaWNsZVBvc2l0aW9uLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFZlaGljbGVQb3NpdGlvbihwcm9wZXJ0aWVzKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFZlaGljbGVQb3NpdGlvbiBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayB0cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVQb3NpdGlvbi52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlUG9zaXRpb25cbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuSVZlaGljbGVQb3NpdGlvbn0gbWVzc2FnZSBWZWhpY2xlUG9zaXRpb24gbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAqL1xuICAgICAgICBWZWhpY2xlUG9zaXRpb24uZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnRyaXAgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInRyaXBcIikpXG4gICAgICAgICAgICAgICAgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmlwRGVzY3JpcHRvci5lbmNvZGUobWVzc2FnZS50cmlwLCB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5wb3NpdGlvbiAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicG9zaXRpb25cIikpXG4gICAgICAgICAgICAgICAgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5Qb3NpdGlvbi5lbmNvZGUobWVzc2FnZS5wb3NpdGlvbiwgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAyID0qLzE4KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuY3VycmVudF9zdG9wX3NlcXVlbmNlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJjdXJyZW50X3N0b3Bfc2VxdWVuY2VcIikpXG4gICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAzLCB3aXJlVHlwZSAwID0qLzI0KS51aW50MzIobWVzc2FnZS5jdXJyZW50X3N0b3Bfc2VxdWVuY2UpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuY3VycmVudF9zdGF0dXMgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImN1cnJlbnRfc3RhdHVzXCIpKVxuICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgNCwgd2lyZVR5cGUgMCA9Ki8zMikuaW50MzIobWVzc2FnZS5jdXJyZW50X3N0YXR1cyk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS50aW1lc3RhbXAgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInRpbWVzdGFtcFwiKSlcbiAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDUsIHdpcmVUeXBlIDAgPSovNDApLnVpbnQ2NChtZXNzYWdlLnRpbWVzdGFtcCk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5jb25nZXN0aW9uX2xldmVsICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJjb25nZXN0aW9uX2xldmVsXCIpKVxuICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgNiwgd2lyZVR5cGUgMCA9Ki80OCkuaW50MzIobWVzc2FnZS5jb25nZXN0aW9uX2xldmVsKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnN0b3BfaWQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInN0b3BfaWRcIikpXG4gICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCA3LCB3aXJlVHlwZSAyID0qLzU4KS5zdHJpbmcobWVzc2FnZS5zdG9wX2lkKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnZlaGljbGUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInZlaGljbGVcIikpXG4gICAgICAgICAgICAgICAgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlRGVzY3JpcHRvci5lbmNvZGUobWVzc2FnZS52ZWhpY2xlLCB3cml0ZXIudWludDMyKC8qIGlkIDgsIHdpcmVUeXBlIDIgPSovNjYpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5vY2N1cGFuY3lfc3RhdHVzICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJvY2N1cGFuY3lfc3RhdHVzXCIpKVxuICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgOSwgd2lyZVR5cGUgMCA9Ki83MikuaW50MzIobWVzc2FnZS5vY2N1cGFuY3lfc3RhdHVzKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLm9jY3VwYW5jeV9wZXJjZW50YWdlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJvY2N1cGFuY3lfcGVyY2VudGFnZVwiKSlcbiAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEwLCB3aXJlVHlwZSAwID0qLzgwKS51aW50MzIobWVzc2FnZS5vY2N1cGFuY3lfcGVyY2VudGFnZSk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5tdWx0aV9jYXJyaWFnZV9kZXRhaWxzICE9IG51bGwgJiYgbWVzc2FnZS5tdWx0aV9jYXJyaWFnZV9kZXRhaWxzLmxlbmd0aClcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1lc3NhZ2UubXVsdGlfY2FycmlhZ2VfZGV0YWlscy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlUG9zaXRpb24uQ2FycmlhZ2VEZXRhaWxzLmVuY29kZShtZXNzYWdlLm11bHRpX2NhcnJpYWdlX2RldGFpbHNbaV0sIHdyaXRlci51aW50MzIoLyogaWQgMTEsIHdpcmVUeXBlIDIgPSovOTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgVmVoaWNsZVBvc2l0aW9uIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIHRyYW5zaXRfcmVhbHRpbWUuVmVoaWNsZVBvc2l0aW9uLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVQb3NpdGlvblxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7dHJhbnNpdF9yZWFsdGltZS5JVmVoaWNsZVBvc2l0aW9ufSBtZXNzYWdlIFZlaGljbGVQb3NpdGlvbiBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICovXG4gICAgICAgIFZlaGljbGVQb3NpdGlvbi5lbmNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGUobWVzc2FnZSwgd3JpdGVyKS5sZGVsaW0oKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRGVjb2RlcyBhIFZlaGljbGVQb3NpdGlvbiBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVQb3NpdGlvblxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAgICAgKiBAcmV0dXJucyB7dHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlUG9zaXRpb259IFZlaGljbGVQb3NpdGlvblxuICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICovXG4gICAgICAgIFZlaGljbGVQb3NpdGlvbi5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgsIGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlUG9zaXRpb24oKTtcbiAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICBpZiAodGFnID09PSBlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudHJpcCA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJpcERlc2NyaXB0b3IuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSA4OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnZlaGljbGUgPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVEZXNjcmlwdG9yLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgMjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5wb3NpdGlvbiA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuUG9zaXRpb24uZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmN1cnJlbnRfc3RvcF9zZXF1ZW5jZSA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSA3OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnN0b3BfaWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgNDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5jdXJyZW50X3N0YXR1cyA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIDU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudGltZXN0YW1wID0gcmVhZGVyLnVpbnQ2NCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIDY6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuY29uZ2VzdGlvbl9sZXZlbCA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIDk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uub2NjdXBhbmN5X3N0YXR1cyA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIDEwOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm9jY3VwYW5jeV9wZXJjZW50YWdlID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIDExOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShtZXNzYWdlLm11bHRpX2NhcnJpYWdlX2RldGFpbHMgJiYgbWVzc2FnZS5tdWx0aV9jYXJyaWFnZV9kZXRhaWxzLmxlbmd0aCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5tdWx0aV9jYXJyaWFnZV9kZXRhaWxzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm11bHRpX2NhcnJpYWdlX2RldGFpbHMucHVzaCgkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVQb3NpdGlvbi5DYXJyaWFnZURldGFpbHMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlY29kZXMgYSBWZWhpY2xlUG9zaXRpb24gbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC5cbiAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZFxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlUG9zaXRpb25cbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICogQHJldHVybnMge3RyYW5zaXRfcmVhbHRpbWUuVmVoaWNsZVBvc2l0aW9ufSBWZWhpY2xlUG9zaXRpb25cbiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAqL1xuICAgICAgICBWZWhpY2xlUG9zaXRpb24uZGVjb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkKHJlYWRlcikge1xuICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgcmVhZGVyID0gbmV3ICRSZWFkZXIocmVhZGVyKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFZlcmlmaWVzIGEgVmVoaWNsZVBvc2l0aW9uIG1lc3NhZ2UuXG4gICAgICAgICAqIEBmdW5jdGlvbiB2ZXJpZnlcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVmVoaWNsZVBvc2l0aW9uXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5XG4gICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH0gYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90XG4gICAgICAgICAqL1xuICAgICAgICBWZWhpY2xlUG9zaXRpb24udmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSAhPT0gXCJvYmplY3RcIiB8fCBtZXNzYWdlID09PSBudWxsKVxuICAgICAgICAgICAgICAgIHJldHVybiBcIm9iamVjdCBleHBlY3RlZFwiO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UudHJpcCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJ0cmlwXCIpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmlwRGVzY3JpcHRvci52ZXJpZnkobWVzc2FnZS50cmlwKTtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcInRyaXAuXCIgKyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnZlaGljbGUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwidmVoaWNsZVwiKSkge1xuICAgICAgICAgICAgICAgIHZhciBlcnJvciA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVmVoaWNsZURlc2NyaXB0b3IudmVyaWZ5KG1lc3NhZ2UudmVoaWNsZSk7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJ2ZWhpY2xlLlwiICsgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5wb3NpdGlvbiAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJwb3NpdGlvblwiKSkge1xuICAgICAgICAgICAgICAgIHZhciBlcnJvciA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuUG9zaXRpb24udmVyaWZ5KG1lc3NhZ2UucG9zaXRpb24pO1xuICAgICAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwicG9zaXRpb24uXCIgKyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmN1cnJlbnRfc3RvcF9zZXF1ZW5jZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJjdXJyZW50X3N0b3Bfc2VxdWVuY2VcIikpXG4gICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5jdXJyZW50X3N0b3Bfc2VxdWVuY2UpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJjdXJyZW50X3N0b3Bfc2VxdWVuY2U6IGludGVnZXIgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnN0b3BfaWQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwic3RvcF9pZFwiKSlcbiAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzU3RyaW5nKG1lc3NhZ2Uuc3RvcF9pZCkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcInN0b3BfaWQ6IHN0cmluZyBleHBlY3RlZFwiO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuY3VycmVudF9zdGF0dXMgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiY3VycmVudF9zdGF0dXNcIikpXG4gICAgICAgICAgICAgICAgc3dpdGNoIChtZXNzYWdlLmN1cnJlbnRfc3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiY3VycmVudF9zdGF0dXM6IGVudW0gdmFsdWUgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UudGltZXN0YW1wICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInRpbWVzdGFtcFwiKSlcbiAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLnRpbWVzdGFtcCkgJiYgIShtZXNzYWdlLnRpbWVzdGFtcCAmJiAkdXRpbC5pc0ludGVnZXIobWVzc2FnZS50aW1lc3RhbXAubG93KSAmJiAkdXRpbC5pc0ludGVnZXIobWVzc2FnZS50aW1lc3RhbXAuaGlnaCkpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJ0aW1lc3RhbXA6IGludGVnZXJ8TG9uZyBleHBlY3RlZFwiO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuY29uZ2VzdGlvbl9sZXZlbCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJjb25nZXN0aW9uX2xldmVsXCIpKVxuICAgICAgICAgICAgICAgIHN3aXRjaCAobWVzc2FnZS5jb25nZXN0aW9uX2xldmVsKSB7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiY29uZ2VzdGlvbl9sZXZlbDogZW51bSB2YWx1ZSBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLm9jY3VwYW5jeV9zdGF0dXMgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwib2NjdXBhbmN5X3N0YXR1c1wiKSlcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG1lc3NhZ2Uub2NjdXBhbmN5X3N0YXR1cykge1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm9jY3VwYW5jeV9zdGF0dXM6IGVudW0gdmFsdWUgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uub2NjdXBhbmN5X3BlcmNlbnRhZ2UgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwib2NjdXBhbmN5X3BlcmNlbnRhZ2VcIikpXG4gICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5vY2N1cGFuY3lfcGVyY2VudGFnZSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm9jY3VwYW5jeV9wZXJjZW50YWdlOiBpbnRlZ2VyIGV4cGVjdGVkXCI7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5tdWx0aV9jYXJyaWFnZV9kZXRhaWxzICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcIm11bHRpX2NhcnJpYWdlX2RldGFpbHNcIikpIHtcbiAgICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkobWVzc2FnZS5tdWx0aV9jYXJyaWFnZV9kZXRhaWxzKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwibXVsdGlfY2FycmlhZ2VfZGV0YWlsczogYXJyYXkgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1lc3NhZ2UubXVsdGlfY2FycmlhZ2VfZGV0YWlscy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZXJyb3IgPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVQb3NpdGlvbi5DYXJyaWFnZURldGFpbHMudmVyaWZ5KG1lc3NhZ2UubXVsdGlfY2FycmlhZ2VfZGV0YWlsc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm11bHRpX2NhcnJpYWdlX2RldGFpbHMuXCIgKyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlcyBhIFZlaGljbGVQb3NpdGlvbiBtZXNzYWdlIGZyb20gYSBwbGFpbiBvYmplY3QuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIHRoZWlyIHJlc3BlY3RpdmUgaW50ZXJuYWwgdHlwZXMuXG4gICAgICAgICAqIEBmdW5jdGlvbiBmcm9tT2JqZWN0XG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVQb3NpdGlvblxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG9iamVjdCBQbGFpbiBvYmplY3RcbiAgICAgICAgICogQHJldHVybnMge3RyYW5zaXRfcmVhbHRpbWUuVmVoaWNsZVBvc2l0aW9ufSBWZWhpY2xlUG9zaXRpb25cbiAgICAgICAgICovXG4gICAgICAgIFZlaGljbGVQb3NpdGlvbi5mcm9tT2JqZWN0ID0gZnVuY3Rpb24gZnJvbU9iamVjdChvYmplY3QpIHtcbiAgICAgICAgICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVQb3NpdGlvbilcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBuZXcgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlUG9zaXRpb24oKTtcbiAgICAgICAgICAgIGlmIChvYmplY3QudHJpcCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmplY3QudHJpcCAhPT0gXCJvYmplY3RcIilcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgVHlwZUVycm9yKFwiLnRyYW5zaXRfcmVhbHRpbWUuVmVoaWNsZVBvc2l0aW9uLnRyaXA6IG9iamVjdCBleHBlY3RlZFwiKTtcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnRyaXAgPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyaXBEZXNjcmlwdG9yLmZyb21PYmplY3Qob2JqZWN0LnRyaXApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9iamVjdC52ZWhpY2xlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9iamVjdC52ZWhpY2xlICE9PSBcIm9iamVjdFwiKVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoXCIudHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlUG9zaXRpb24udmVoaWNsZTogb2JqZWN0IGV4cGVjdGVkXCIpO1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UudmVoaWNsZSA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVmVoaWNsZURlc2NyaXB0b3IuZnJvbU9iamVjdChvYmplY3QudmVoaWNsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob2JqZWN0LnBvc2l0aW9uICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9iamVjdC5wb3NpdGlvbiAhPT0gXCJvYmplY3RcIilcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgVHlwZUVycm9yKFwiLnRyYW5zaXRfcmVhbHRpbWUuVmVoaWNsZVBvc2l0aW9uLnBvc2l0aW9uOiBvYmplY3QgZXhwZWN0ZWRcIik7XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5wb3NpdGlvbiA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuUG9zaXRpb24uZnJvbU9iamVjdChvYmplY3QucG9zaXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9iamVjdC5jdXJyZW50X3N0b3Bfc2VxdWVuY2UgIT0gbnVsbClcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmN1cnJlbnRfc3RvcF9zZXF1ZW5jZSA9IG9iamVjdC5jdXJyZW50X3N0b3Bfc2VxdWVuY2UgPj4+IDA7XG4gICAgICAgICAgICBpZiAob2JqZWN0LnN0b3BfaWQgIT0gbnVsbClcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnN0b3BfaWQgPSBTdHJpbmcob2JqZWN0LnN0b3BfaWQpO1xuICAgICAgICAgICAgc3dpdGNoIChvYmplY3QuY3VycmVudF9zdGF0dXMpIHtcbiAgICAgICAgICAgIGNhc2UgXCJJTkNPTUlOR19BVFwiOlxuICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgIG1lc3NhZ2UuY3VycmVudF9zdGF0dXMgPSAwO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIlNUT1BQRURfQVRcIjpcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmN1cnJlbnRfc3RhdHVzID0gMTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmplY3QuY3VycmVudF9zdGF0dXMgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5jdXJyZW50X3N0YXR1cyA9IG9iamVjdC5jdXJyZW50X3N0YXR1cztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIklOX1RSQU5TSVRfVE9cIjpcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmN1cnJlbnRfc3RhdHVzID0gMjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvYmplY3QudGltZXN0YW1wICE9IG51bGwpXG4gICAgICAgICAgICAgICAgaWYgKCR1dGlsLkxvbmcpXG4gICAgICAgICAgICAgICAgICAgIChtZXNzYWdlLnRpbWVzdGFtcCA9ICR1dGlsLkxvbmcuZnJvbVZhbHVlKG9iamVjdC50aW1lc3RhbXApKS51bnNpZ25lZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIG9iamVjdC50aW1lc3RhbXAgPT09IFwic3RyaW5nXCIpXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudGltZXN0YW1wID0gcGFyc2VJbnQob2JqZWN0LnRpbWVzdGFtcCwgMTApO1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBvYmplY3QudGltZXN0YW1wID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnRpbWVzdGFtcCA9IG9iamVjdC50aW1lc3RhbXA7XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIG9iamVjdC50aW1lc3RhbXAgPT09IFwib2JqZWN0XCIpXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudGltZXN0YW1wID0gbmV3ICR1dGlsLkxvbmdCaXRzKG9iamVjdC50aW1lc3RhbXAubG93ID4+PiAwLCBvYmplY3QudGltZXN0YW1wLmhpZ2ggPj4+IDApLnRvTnVtYmVyKHRydWUpO1xuICAgICAgICAgICAgc3dpdGNoIChvYmplY3QuY29uZ2VzdGlvbl9sZXZlbCkge1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9iamVjdC5jb25nZXN0aW9uX2xldmVsID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuY29uZ2VzdGlvbl9sZXZlbCA9IG9iamVjdC5jb25nZXN0aW9uX2xldmVsO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiVU5LTk9XTl9DT05HRVNUSU9OX0xFVkVMXCI6XG4gICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5jb25nZXN0aW9uX2xldmVsID0gMDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJSVU5OSU5HX1NNT09USExZXCI6XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5jb25nZXN0aW9uX2xldmVsID0gMTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJTVE9QX0FORF9HT1wiOlxuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgIG1lc3NhZ2UuY29uZ2VzdGlvbl9sZXZlbCA9IDI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ09OR0VTVElPTlwiOlxuICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgIG1lc3NhZ2UuY29uZ2VzdGlvbl9sZXZlbCA9IDM7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiU0VWRVJFX0NPTkdFU1RJT05cIjpcbiAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmNvbmdlc3Rpb25fbGV2ZWwgPSA0O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3dpdGNoIChvYmplY3Qub2NjdXBhbmN5X3N0YXR1cykge1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9iamVjdC5vY2N1cGFuY3lfc3RhdHVzID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uub2NjdXBhbmN5X3N0YXR1cyA9IG9iamVjdC5vY2N1cGFuY3lfc3RhdHVzO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiRU1QVFlcIjpcbiAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLm9jY3VwYW5jeV9zdGF0dXMgPSAwO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIk1BTllfU0VBVFNfQVZBSUxBQkxFXCI6XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5vY2N1cGFuY3lfc3RhdHVzID0gMTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJGRVdfU0VBVFNfQVZBSUxBQkxFXCI6XG4gICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5vY2N1cGFuY3lfc3RhdHVzID0gMjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJTVEFORElOR19ST09NX09OTFlcIjpcbiAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLm9jY3VwYW5jeV9zdGF0dXMgPSAzO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkNSVVNIRURfU1RBTkRJTkdfUk9PTV9PTkxZXCI6XG4gICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5vY2N1cGFuY3lfc3RhdHVzID0gNDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJGVUxMXCI6XG4gICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5vY2N1cGFuY3lfc3RhdHVzID0gNTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJOT1RfQUNDRVBUSU5HX1BBU1NFTkdFUlNcIjpcbiAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLm9jY3VwYW5jeV9zdGF0dXMgPSA2O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIk5PX0RBVEFfQVZBSUxBQkxFXCI6XG4gICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5vY2N1cGFuY3lfc3RhdHVzID0gNztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJOT1RfQk9BUkRBQkxFXCI6XG4gICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5vY2N1cGFuY3lfc3RhdHVzID0gODtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvYmplY3Qub2NjdXBhbmN5X3BlcmNlbnRhZ2UgIT0gbnVsbClcbiAgICAgICAgICAgICAgICBtZXNzYWdlLm9jY3VwYW5jeV9wZXJjZW50YWdlID0gb2JqZWN0Lm9jY3VwYW5jeV9wZXJjZW50YWdlID4+PiAwO1xuICAgICAgICAgICAgaWYgKG9iamVjdC5tdWx0aV9jYXJyaWFnZV9kZXRhaWxzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KG9iamVjdC5tdWx0aV9jYXJyaWFnZV9kZXRhaWxzKSlcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgVHlwZUVycm9yKFwiLnRyYW5zaXRfcmVhbHRpbWUuVmVoaWNsZVBvc2l0aW9uLm11bHRpX2NhcnJpYWdlX2RldGFpbHM6IGFycmF5IGV4cGVjdGVkXCIpO1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UubXVsdGlfY2FycmlhZ2VfZGV0YWlscyA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2JqZWN0Lm11bHRpX2NhcnJpYWdlX2RldGFpbHMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmplY3QubXVsdGlfY2FycmlhZ2VfZGV0YWlsc1tpXSAhPT0gXCJvYmplY3RcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcihcIi50cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVQb3NpdGlvbi5tdWx0aV9jYXJyaWFnZV9kZXRhaWxzOiBvYmplY3QgZXhwZWN0ZWRcIik7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubXVsdGlfY2FycmlhZ2VfZGV0YWlsc1tpXSA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVmVoaWNsZVBvc2l0aW9uLkNhcnJpYWdlRGV0YWlscy5mcm9tT2JqZWN0KG9iamVjdC5tdWx0aV9jYXJyaWFnZV9kZXRhaWxzW2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgVmVoaWNsZVBvc2l0aW9uIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC5cbiAgICAgICAgICogQGZ1bmN0aW9uIHRvT2JqZWN0XG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVQb3NpdGlvblxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7dHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlUG9zaXRpb259IG1lc3NhZ2UgVmVoaWNsZVBvc2l0aW9uXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9uc30gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9uc1xuICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxuICAgICAgICAgKi9cbiAgICAgICAgVmVoaWNsZVBvc2l0aW9uLnRvT2JqZWN0ID0gZnVuY3Rpb24gdG9PYmplY3QobWVzc2FnZSwgb3B0aW9ucykge1xuICAgICAgICAgICAgaWYgKCFvcHRpb25zKVxuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgICAgIHZhciBvYmplY3QgPSB7fTtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmFycmF5cyB8fCBvcHRpb25zLmRlZmF1bHRzKVxuICAgICAgICAgICAgICAgIG9iamVjdC5tdWx0aV9jYXJyaWFnZV9kZXRhaWxzID0gW107XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5kZWZhdWx0cykge1xuICAgICAgICAgICAgICAgIG9iamVjdC50cmlwID0gbnVsbDtcbiAgICAgICAgICAgICAgICBvYmplY3QucG9zaXRpb24gPSBudWxsO1xuICAgICAgICAgICAgICAgIG9iamVjdC5jdXJyZW50X3N0b3Bfc2VxdWVuY2UgPSAwO1xuICAgICAgICAgICAgICAgIG9iamVjdC5jdXJyZW50X3N0YXR1cyA9IG9wdGlvbnMuZW51bXMgPT09IFN0cmluZyA/IFwiSU5fVFJBTlNJVF9UT1wiIDogMjtcbiAgICAgICAgICAgICAgICBpZiAoJHV0aWwuTG9uZykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbG9uZyA9IG5ldyAkdXRpbC5Mb25nKDAsIDAsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBvYmplY3QudGltZXN0YW1wID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gbG9uZy50b1N0cmluZygpIDogb3B0aW9ucy5sb25ncyA9PT0gTnVtYmVyID8gbG9uZy50b051bWJlcigpIDogbG9uZztcbiAgICAgICAgICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnRpbWVzdGFtcCA9IG9wdGlvbnMubG9uZ3MgPT09IFN0cmluZyA/IFwiMFwiIDogMDtcbiAgICAgICAgICAgICAgICBvYmplY3QuY29uZ2VzdGlvbl9sZXZlbCA9IG9wdGlvbnMuZW51bXMgPT09IFN0cmluZyA/IFwiVU5LTk9XTl9DT05HRVNUSU9OX0xFVkVMXCIgOiAwO1xuICAgICAgICAgICAgICAgIG9iamVjdC5zdG9wX2lkID0gXCJcIjtcbiAgICAgICAgICAgICAgICBvYmplY3QudmVoaWNsZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgb2JqZWN0Lm9jY3VwYW5jeV9zdGF0dXMgPSBvcHRpb25zLmVudW1zID09PSBTdHJpbmcgPyBcIkVNUFRZXCIgOiAwO1xuICAgICAgICAgICAgICAgIG9iamVjdC5vY2N1cGFuY3lfcGVyY2VudGFnZSA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS50cmlwICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInRyaXBcIikpXG4gICAgICAgICAgICAgICAgb2JqZWN0LnRyaXAgPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyaXBEZXNjcmlwdG9yLnRvT2JqZWN0KG1lc3NhZ2UudHJpcCwgb3B0aW9ucyk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5wb3NpdGlvbiAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJwb3NpdGlvblwiKSlcbiAgICAgICAgICAgICAgICBvYmplY3QucG9zaXRpb24gPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlBvc2l0aW9uLnRvT2JqZWN0KG1lc3NhZ2UucG9zaXRpb24sIG9wdGlvbnMpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuY3VycmVudF9zdG9wX3NlcXVlbmNlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImN1cnJlbnRfc3RvcF9zZXF1ZW5jZVwiKSlcbiAgICAgICAgICAgICAgICBvYmplY3QuY3VycmVudF9zdG9wX3NlcXVlbmNlID0gbWVzc2FnZS5jdXJyZW50X3N0b3Bfc2VxdWVuY2U7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5jdXJyZW50X3N0YXR1cyAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJjdXJyZW50X3N0YXR1c1wiKSlcbiAgICAgICAgICAgICAgICBvYmplY3QuY3VycmVudF9zdGF0dXMgPSBvcHRpb25zLmVudW1zID09PSBTdHJpbmcgPyAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVQb3NpdGlvbi5WZWhpY2xlU3RvcFN0YXR1c1ttZXNzYWdlLmN1cnJlbnRfc3RhdHVzXSA9PT0gdW5kZWZpbmVkID8gbWVzc2FnZS5jdXJyZW50X3N0YXR1cyA6ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVmVoaWNsZVBvc2l0aW9uLlZlaGljbGVTdG9wU3RhdHVzW21lc3NhZ2UuY3VycmVudF9zdGF0dXNdIDogbWVzc2FnZS5jdXJyZW50X3N0YXR1cztcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnRpbWVzdGFtcCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJ0aW1lc3RhbXBcIikpXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlLnRpbWVzdGFtcCA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnRpbWVzdGFtcCA9IG9wdGlvbnMubG9uZ3MgPT09IFN0cmluZyA/IFN0cmluZyhtZXNzYWdlLnRpbWVzdGFtcCkgOiBtZXNzYWdlLnRpbWVzdGFtcDtcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC50aW1lc3RhbXAgPSBvcHRpb25zLmxvbmdzID09PSBTdHJpbmcgPyAkdXRpbC5Mb25nLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG1lc3NhZ2UudGltZXN0YW1wKSA6IG9wdGlvbnMubG9uZ3MgPT09IE51bWJlciA/IG5ldyAkdXRpbC5Mb25nQml0cyhtZXNzYWdlLnRpbWVzdGFtcC5sb3cgPj4+IDAsIG1lc3NhZ2UudGltZXN0YW1wLmhpZ2ggPj4+IDApLnRvTnVtYmVyKHRydWUpIDogbWVzc2FnZS50aW1lc3RhbXA7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5jb25nZXN0aW9uX2xldmVsICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImNvbmdlc3Rpb25fbGV2ZWxcIikpXG4gICAgICAgICAgICAgICAgb2JqZWN0LmNvbmdlc3Rpb25fbGV2ZWwgPSBvcHRpb25zLmVudW1zID09PSBTdHJpbmcgPyAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVQb3NpdGlvbi5Db25nZXN0aW9uTGV2ZWxbbWVzc2FnZS5jb25nZXN0aW9uX2xldmVsXSA9PT0gdW5kZWZpbmVkID8gbWVzc2FnZS5jb25nZXN0aW9uX2xldmVsIDogJHJvb3QudHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlUG9zaXRpb24uQ29uZ2VzdGlvbkxldmVsW21lc3NhZ2UuY29uZ2VzdGlvbl9sZXZlbF0gOiBtZXNzYWdlLmNvbmdlc3Rpb25fbGV2ZWw7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5zdG9wX2lkICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInN0b3BfaWRcIikpXG4gICAgICAgICAgICAgICAgb2JqZWN0LnN0b3BfaWQgPSBtZXNzYWdlLnN0b3BfaWQ7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS52ZWhpY2xlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInZlaGljbGVcIikpXG4gICAgICAgICAgICAgICAgb2JqZWN0LnZlaGljbGUgPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVEZXNjcmlwdG9yLnRvT2JqZWN0KG1lc3NhZ2UudmVoaWNsZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5vY2N1cGFuY3lfc3RhdHVzICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcIm9jY3VwYW5jeV9zdGF0dXNcIikpXG4gICAgICAgICAgICAgICAgb2JqZWN0Lm9jY3VwYW5jeV9zdGF0dXMgPSBvcHRpb25zLmVudW1zID09PSBTdHJpbmcgPyAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVQb3NpdGlvbi5PY2N1cGFuY3lTdGF0dXNbbWVzc2FnZS5vY2N1cGFuY3lfc3RhdHVzXSA9PT0gdW5kZWZpbmVkID8gbWVzc2FnZS5vY2N1cGFuY3lfc3RhdHVzIDogJHJvb3QudHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlUG9zaXRpb24uT2NjdXBhbmN5U3RhdHVzW21lc3NhZ2Uub2NjdXBhbmN5X3N0YXR1c10gOiBtZXNzYWdlLm9jY3VwYW5jeV9zdGF0dXM7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5vY2N1cGFuY3lfcGVyY2VudGFnZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJvY2N1cGFuY3lfcGVyY2VudGFnZVwiKSlcbiAgICAgICAgICAgICAgICBvYmplY3Qub2NjdXBhbmN5X3BlcmNlbnRhZ2UgPSBtZXNzYWdlLm9jY3VwYW5jeV9wZXJjZW50YWdlO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UubXVsdGlfY2FycmlhZ2VfZGV0YWlscyAmJiBtZXNzYWdlLm11bHRpX2NhcnJpYWdlX2RldGFpbHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgb2JqZWN0Lm11bHRpX2NhcnJpYWdlX2RldGFpbHMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1lc3NhZ2UubXVsdGlfY2FycmlhZ2VfZGV0YWlscy5sZW5ndGg7ICsrailcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0Lm11bHRpX2NhcnJpYWdlX2RldGFpbHNbal0gPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVQb3NpdGlvbi5DYXJyaWFnZURldGFpbHMudG9PYmplY3QobWVzc2FnZS5tdWx0aV9jYXJyaWFnZV9kZXRhaWxzW2pdLCBvcHRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbnZlcnRzIHRoaXMgVmVoaWNsZVBvc2l0aW9uIHRvIEpTT04uXG4gICAgICAgICAqIEBmdW5jdGlvbiB0b0pTT05cbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVmVoaWNsZVBvc2l0aW9uXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IEpTT04gb2JqZWN0XG4gICAgICAgICAqL1xuICAgICAgICBWZWhpY2xlUG9zaXRpb24ucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsICRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXRzIHRoZSBkZWZhdWx0IHR5cGUgdXJsIGZvciBWZWhpY2xlUG9zaXRpb25cbiAgICAgICAgICogQGZ1bmN0aW9uIGdldFR5cGVVcmxcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVmVoaWNsZVBvc2l0aW9uXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFt0eXBlVXJsUHJlZml4XSB5b3VyIGN1c3RvbSB0eXBlVXJsUHJlZml4KGRlZmF1bHQgXCJ0eXBlLmdvb2dsZWFwaXMuY29tXCIpXG4gICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBkZWZhdWx0IHR5cGUgdXJsXG4gICAgICAgICAqL1xuICAgICAgICBWZWhpY2xlUG9zaXRpb24uZ2V0VHlwZVVybCA9IGZ1bmN0aW9uIGdldFR5cGVVcmwodHlwZVVybFByZWZpeCkge1xuICAgICAgICAgICAgaWYgKHR5cGVVcmxQcmVmaXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHR5cGVVcmxQcmVmaXggPSBcInR5cGUuZ29vZ2xlYXBpcy5jb21cIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0eXBlVXJsUHJlZml4ICsgXCIvdHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlUG9zaXRpb25cIjtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVmVoaWNsZVN0b3BTdGF0dXMgZW51bS5cbiAgICAgICAgICogQG5hbWUgdHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlUG9zaXRpb24uVmVoaWNsZVN0b3BTdGF0dXNcbiAgICAgICAgICogQGVudW0ge251bWJlcn1cbiAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IElOQ09NSU5HX0FUPTAgSU5DT01JTkdfQVQgdmFsdWVcbiAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IFNUT1BQRURfQVQ9MSBTVE9QUEVEX0FUIHZhbHVlXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBJTl9UUkFOU0lUX1RPPTIgSU5fVFJBTlNJVF9UTyB2YWx1ZVxuICAgICAgICAgKi9cbiAgICAgICAgVmVoaWNsZVBvc2l0aW9uLlZlaGljbGVTdG9wU3RhdHVzID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHZhbHVlc0J5SWQgPSB7fSwgdmFsdWVzID0gT2JqZWN0LmNyZWF0ZSh2YWx1ZXNCeUlkKTtcbiAgICAgICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzBdID0gXCJJTkNPTUlOR19BVFwiXSA9IDA7XG4gICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFsxXSA9IFwiU1RPUFBFRF9BVFwiXSA9IDE7XG4gICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFsyXSA9IFwiSU5fVFJBTlNJVF9UT1wiXSA9IDI7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWVzO1xuICAgICAgICB9KSgpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb25nZXN0aW9uTGV2ZWwgZW51bS5cbiAgICAgICAgICogQG5hbWUgdHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlUG9zaXRpb24uQ29uZ2VzdGlvbkxldmVsXG4gICAgICAgICAqIEBlbnVtIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBVTktOT1dOX0NPTkdFU1RJT05fTEVWRUw9MCBVTktOT1dOX0NPTkdFU1RJT05fTEVWRUwgdmFsdWVcbiAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IFJVTk5JTkdfU01PT1RITFk9MSBSVU5OSU5HX1NNT09USExZIHZhbHVlXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBTVE9QX0FORF9HTz0yIFNUT1BfQU5EX0dPIHZhbHVlXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBDT05HRVNUSU9OPTMgQ09OR0VTVElPTiB2YWx1ZVxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gU0VWRVJFX0NPTkdFU1RJT049NCBTRVZFUkVfQ09OR0VTVElPTiB2YWx1ZVxuICAgICAgICAgKi9cbiAgICAgICAgVmVoaWNsZVBvc2l0aW9uLkNvbmdlc3Rpb25MZXZlbCA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZXNCeUlkID0ge30sIHZhbHVlcyA9IE9iamVjdC5jcmVhdGUodmFsdWVzQnlJZCk7XG4gICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFswXSA9IFwiVU5LTk9XTl9DT05HRVNUSU9OX0xFVkVMXCJdID0gMDtcbiAgICAgICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzFdID0gXCJSVU5OSU5HX1NNT09USExZXCJdID0gMTtcbiAgICAgICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzJdID0gXCJTVE9QX0FORF9HT1wiXSA9IDI7XG4gICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFszXSA9IFwiQ09OR0VTVElPTlwiXSA9IDM7XG4gICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFs0XSA9IFwiU0VWRVJFX0NPTkdFU1RJT05cIl0gPSA0O1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlcztcbiAgICAgICAgfSkoKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogT2NjdXBhbmN5U3RhdHVzIGVudW0uXG4gICAgICAgICAqIEBuYW1lIHRyYW5zaXRfcmVhbHRpbWUuVmVoaWNsZVBvc2l0aW9uLk9jY3VwYW5jeVN0YXR1c1xuICAgICAgICAgKiBAZW51bSB7bnVtYmVyfVxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gRU1QVFk9MCBFTVBUWSB2YWx1ZVxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gTUFOWV9TRUFUU19BVkFJTEFCTEU9MSBNQU5ZX1NFQVRTX0FWQUlMQUJMRSB2YWx1ZVxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gRkVXX1NFQVRTX0FWQUlMQUJMRT0yIEZFV19TRUFUU19BVkFJTEFCTEUgdmFsdWVcbiAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IFNUQU5ESU5HX1JPT01fT05MWT0zIFNUQU5ESU5HX1JPT01fT05MWSB2YWx1ZVxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gQ1JVU0hFRF9TVEFORElOR19ST09NX09OTFk9NCBDUlVTSEVEX1NUQU5ESU5HX1JPT01fT05MWSB2YWx1ZVxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gRlVMTD01IEZVTEwgdmFsdWVcbiAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IE5PVF9BQ0NFUFRJTkdfUEFTU0VOR0VSUz02IE5PVF9BQ0NFUFRJTkdfUEFTU0VOR0VSUyB2YWx1ZVxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gTk9fREFUQV9BVkFJTEFCTEU9NyBOT19EQVRBX0FWQUlMQUJMRSB2YWx1ZVxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gTk9UX0JPQVJEQUJMRT04IE5PVF9CT0FSREFCTEUgdmFsdWVcbiAgICAgICAgICovXG4gICAgICAgIFZlaGljbGVQb3NpdGlvbi5PY2N1cGFuY3lTdGF0dXMgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWVzQnlJZCA9IHt9LCB2YWx1ZXMgPSBPYmplY3QuY3JlYXRlKHZhbHVlc0J5SWQpO1xuICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbMF0gPSBcIkVNUFRZXCJdID0gMDtcbiAgICAgICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzFdID0gXCJNQU5ZX1NFQVRTX0FWQUlMQUJMRVwiXSA9IDE7XG4gICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFsyXSA9IFwiRkVXX1NFQVRTX0FWQUlMQUJMRVwiXSA9IDI7XG4gICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFszXSA9IFwiU1RBTkRJTkdfUk9PTV9PTkxZXCJdID0gMztcbiAgICAgICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzRdID0gXCJDUlVTSEVEX1NUQU5ESU5HX1JPT01fT05MWVwiXSA9IDQ7XG4gICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFs1XSA9IFwiRlVMTFwiXSA9IDU7XG4gICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFs2XSA9IFwiTk9UX0FDQ0VQVElOR19QQVNTRU5HRVJTXCJdID0gNjtcbiAgICAgICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzddID0gXCJOT19EQVRBX0FWQUlMQUJMRVwiXSA9IDc7XG4gICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFs4XSA9IFwiTk9UX0JPQVJEQUJMRVwiXSA9IDg7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWVzO1xuICAgICAgICB9KSgpO1xuXG4gICAgICAgIFZlaGljbGVQb3NpdGlvbi5DYXJyaWFnZURldGFpbHMgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIENhcnJpYWdlRGV0YWlscy5cbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVQb3NpdGlvblxuICAgICAgICAgICAgICogQGludGVyZmFjZSBJQ2FycmlhZ2VEZXRhaWxzXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbaWRdIENhcnJpYWdlRGV0YWlscyBpZFxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW2xhYmVsXSBDYXJyaWFnZURldGFpbHMgbGFiZWxcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7dHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlUG9zaXRpb24uT2NjdXBhbmN5U3RhdHVzfG51bGx9IFtvY2N1cGFuY3lfc3RhdHVzXSBDYXJyaWFnZURldGFpbHMgb2NjdXBhbmN5X3N0YXR1c1xuICAgICAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ8bnVsbH0gW29jY3VwYW5jeV9wZXJjZW50YWdlXSBDYXJyaWFnZURldGFpbHMgb2NjdXBhbmN5X3BlcmNlbnRhZ2VcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfG51bGx9IFtjYXJyaWFnZV9zZXF1ZW5jZV0gQ2FycmlhZ2VEZXRhaWxzIGNhcnJpYWdlX3NlcXVlbmNlXG4gICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IENhcnJpYWdlRGV0YWlscy5cbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVQb3NpdGlvblxuICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgQ2FycmlhZ2VEZXRhaWxzLlxuICAgICAgICAgICAgICogQGltcGxlbWVudHMgSUNhcnJpYWdlRGV0YWlsc1xuICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuVmVoaWNsZVBvc2l0aW9uLklDYXJyaWFnZURldGFpbHM9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZnVuY3Rpb24gQ2FycmlhZ2VEZXRhaWxzKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENhcnJpYWdlRGV0YWlscyBpZC5cbiAgICAgICAgICAgICAqIEBtZW1iZXIge3N0cmluZ30gaWRcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVQb3NpdGlvbi5DYXJyaWFnZURldGFpbHNcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBDYXJyaWFnZURldGFpbHMucHJvdG90eXBlLmlkID0gXCJcIjtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDYXJyaWFnZURldGFpbHMgbGFiZWwuXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IGxhYmVsXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlUG9zaXRpb24uQ2FycmlhZ2VEZXRhaWxzXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgQ2FycmlhZ2VEZXRhaWxzLnByb3RvdHlwZS5sYWJlbCA9IFwiXCI7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ2FycmlhZ2VEZXRhaWxzIG9jY3VwYW5jeV9zdGF0dXMuXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHt0cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVQb3NpdGlvbi5PY2N1cGFuY3lTdGF0dXN9IG9jY3VwYW5jeV9zdGF0dXNcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVQb3NpdGlvbi5DYXJyaWFnZURldGFpbHNcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBDYXJyaWFnZURldGFpbHMucHJvdG90eXBlLm9jY3VwYW5jeV9zdGF0dXMgPSA3O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENhcnJpYWdlRGV0YWlscyBvY2N1cGFuY3lfcGVyY2VudGFnZS5cbiAgICAgICAgICAgICAqIEBtZW1iZXIge251bWJlcn0gb2NjdXBhbmN5X3BlcmNlbnRhZ2VcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVQb3NpdGlvbi5DYXJyaWFnZURldGFpbHNcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBDYXJyaWFnZURldGFpbHMucHJvdG90eXBlLm9jY3VwYW5jeV9wZXJjZW50YWdlID0gLTE7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ2FycmlhZ2VEZXRhaWxzIGNhcnJpYWdlX3NlcXVlbmNlLlxuICAgICAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfSBjYXJyaWFnZV9zZXF1ZW5jZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVmVoaWNsZVBvc2l0aW9uLkNhcnJpYWdlRGV0YWlsc1xuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIENhcnJpYWdlRGV0YWlscy5wcm90b3R5cGUuY2FycmlhZ2Vfc2VxdWVuY2UgPSAwO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBuZXcgQ2FycmlhZ2VEZXRhaWxzIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBjcmVhdGVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVQb3NpdGlvbi5DYXJyaWFnZURldGFpbHNcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7dHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlUG9zaXRpb24uSUNhcnJpYWdlRGV0YWlscz19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICogQHJldHVybnMge3RyYW5zaXRfcmVhbHRpbWUuVmVoaWNsZVBvc2l0aW9uLkNhcnJpYWdlRGV0YWlsc30gQ2FycmlhZ2VEZXRhaWxzIGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIENhcnJpYWdlRGV0YWlscy5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ2FycmlhZ2VEZXRhaWxzKHByb3BlcnRpZXMpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgQ2FycmlhZ2VEZXRhaWxzIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIHRyYW5zaXRfcmVhbHRpbWUuVmVoaWNsZVBvc2l0aW9uLkNhcnJpYWdlRGV0YWlscy52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVQb3NpdGlvbi5DYXJyaWFnZURldGFpbHNcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7dHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlUG9zaXRpb24uSUNhcnJpYWdlRGV0YWlsc30gbWVzc2FnZSBDYXJyaWFnZURldGFpbHMgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgQ2FycmlhZ2VEZXRhaWxzLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5pZCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiaWRcIikpXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuc3RyaW5nKG1lc3NhZ2UuaWQpO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmxhYmVsICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJsYWJlbFwiKSlcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAyID0qLzE4KS5zdHJpbmcobWVzc2FnZS5sYWJlbCk7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uub2NjdXBhbmN5X3N0YXR1cyAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwib2NjdXBhbmN5X3N0YXR1c1wiKSlcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAzLCB3aXJlVHlwZSAwID0qLzI0KS5pbnQzMihtZXNzYWdlLm9jY3VwYW5jeV9zdGF0dXMpO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLm9jY3VwYW5jeV9wZXJjZW50YWdlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJvY2N1cGFuY3lfcGVyY2VudGFnZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCA0LCB3aXJlVHlwZSAwID0qLzMyKS5pbnQzMihtZXNzYWdlLm9jY3VwYW5jeV9wZXJjZW50YWdlKTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5jYXJyaWFnZV9zZXF1ZW5jZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiY2FycmlhZ2Vfc2VxdWVuY2VcIikpXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgNSwgd2lyZVR5cGUgMCA9Ki80MCkudWludDMyKG1lc3NhZ2UuY2FycmlhZ2Vfc2VxdWVuY2UpO1xuICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBDYXJyaWFnZURldGFpbHMgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgdHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlUG9zaXRpb24uQ2FycmlhZ2VEZXRhaWxzLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVmVoaWNsZVBvc2l0aW9uLkNhcnJpYWdlRGV0YWlsc1xuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHt0cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVQb3NpdGlvbi5JQ2FycmlhZ2VEZXRhaWxzfSBtZXNzYWdlIENhcnJpYWdlRGV0YWlscyBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBDYXJyaWFnZURldGFpbHMuZW5jb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVuY29kZShtZXNzYWdlLCB3cml0ZXIpLmxkZWxpbSgpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBEZWNvZGVzIGEgQ2FycmlhZ2VEZXRhaWxzIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlUG9zaXRpb24uQ2FycmlhZ2VEZXRhaWxzXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7dHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlUG9zaXRpb24uQ2FycmlhZ2VEZXRhaWxzfSBDYXJyaWFnZURldGFpbHNcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgQ2FycmlhZ2VEZXRhaWxzLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCwgZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVQb3NpdGlvbi5DYXJyaWFnZURldGFpbHMoKTtcbiAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGFnID09PSBlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmlkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmxhYmVsID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm9jY3VwYW5jeV9zdGF0dXMgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5vY2N1cGFuY3lfcGVyY2VudGFnZSA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmNhcnJpYWdlX3NlcXVlbmNlID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBDYXJyaWFnZURldGFpbHMgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWRcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVQb3NpdGlvbi5DYXJyaWFnZURldGFpbHNcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICogQHJldHVybnMge3RyYW5zaXRfcmVhbHRpbWUuVmVoaWNsZVBvc2l0aW9uLkNhcnJpYWdlRGV0YWlsc30gQ2FycmlhZ2VEZXRhaWxzXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIENhcnJpYWdlRGV0YWlscy5kZWNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9IG5ldyAkUmVhZGVyKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVmVyaWZpZXMgYSBDYXJyaWFnZURldGFpbHMgbWVzc2FnZS5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB2ZXJpZnlcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVQb3NpdGlvbi5DYXJyaWFnZURldGFpbHNcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeVxuICAgICAgICAgICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfSBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3RcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgQ2FycmlhZ2VEZXRhaWxzLnZlcmlmeSA9IGZ1bmN0aW9uIHZlcmlmeShtZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm9iamVjdCBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmlkICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImlkXCIpKVxuICAgICAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzU3RyaW5nKG1lc3NhZ2UuaWQpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiaWQ6IHN0cmluZyBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmxhYmVsICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImxhYmVsXCIpKVxuICAgICAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzU3RyaW5nKG1lc3NhZ2UubGFiZWwpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwibGFiZWw6IHN0cmluZyBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLm9jY3VwYW5jeV9zdGF0dXMgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwib2NjdXBhbmN5X3N0YXR1c1wiKSlcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChtZXNzYWdlLm9jY3VwYW5jeV9zdGF0dXMpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm9jY3VwYW5jeV9zdGF0dXM6IGVudW0gdmFsdWUgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uub2NjdXBhbmN5X3BlcmNlbnRhZ2UgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwib2NjdXBhbmN5X3BlcmNlbnRhZ2VcIikpXG4gICAgICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2Uub2NjdXBhbmN5X3BlcmNlbnRhZ2UpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwib2NjdXBhbmN5X3BlcmNlbnRhZ2U6IGludGVnZXIgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5jYXJyaWFnZV9zZXF1ZW5jZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJjYXJyaWFnZV9zZXF1ZW5jZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5jYXJyaWFnZV9zZXF1ZW5jZSkpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJjYXJyaWFnZV9zZXF1ZW5jZTogaW50ZWdlciBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgQ2FycmlhZ2VEZXRhaWxzIG1lc3NhZ2UgZnJvbSBhIHBsYWluIG9iamVjdC4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBpbnRlcm5hbCB0eXBlcy5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBmcm9tT2JqZWN0XG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlUG9zaXRpb24uQ2FycmlhZ2VEZXRhaWxzXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBvYmplY3QgUGxhaW4gb2JqZWN0XG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7dHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlUG9zaXRpb24uQ2FycmlhZ2VEZXRhaWxzfSBDYXJyaWFnZURldGFpbHNcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgQ2FycmlhZ2VEZXRhaWxzLmZyb21PYmplY3QgPSBmdW5jdGlvbiBmcm9tT2JqZWN0KG9iamVjdCkge1xuICAgICAgICAgICAgICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVQb3NpdGlvbi5DYXJyaWFnZURldGFpbHMpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBuZXcgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlUG9zaXRpb24uQ2FycmlhZ2VEZXRhaWxzKCk7XG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC5pZCAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmlkID0gU3RyaW5nKG9iamVjdC5pZCk7XG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC5sYWJlbCAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmxhYmVsID0gU3RyaW5nKG9iamVjdC5sYWJlbCk7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChvYmplY3Qub2NjdXBhbmN5X3N0YXR1cykge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJFTVBUWVwiOlxuICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5vY2N1cGFuY3lfc3RhdHVzID0gMDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIk1BTllfU0VBVFNfQVZBSUxBQkxFXCI6XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm9jY3VwYW5jeV9zdGF0dXMgPSAxO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiRkVXX1NFQVRTX0FWQUlMQUJMRVwiOlxuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5vY2N1cGFuY3lfc3RhdHVzID0gMjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIlNUQU5ESU5HX1JPT01fT05MWVwiOlxuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5vY2N1cGFuY3lfc3RhdHVzID0gMztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIkNSVVNIRURfU1RBTkRJTkdfUk9PTV9PTkxZXCI6XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm9jY3VwYW5jeV9zdGF0dXMgPSA0O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiRlVMTFwiOlxuICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5vY2N1cGFuY3lfc3RhdHVzID0gNTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIk5PVF9BQ0NFUFRJTkdfUEFTU0VOR0VSU1wiOlxuICAgICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5vY2N1cGFuY3lfc3RhdHVzID0gNjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmplY3Qub2NjdXBhbmN5X3N0YXR1cyA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5vY2N1cGFuY3lfc3RhdHVzID0gb2JqZWN0Lm9jY3VwYW5jeV9zdGF0dXM7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiTk9fREFUQV9BVkFJTEFCTEVcIjpcbiAgICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uub2NjdXBhbmN5X3N0YXR1cyA9IDc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJOT1RfQk9BUkRBQkxFXCI6XG4gICAgICAgICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm9jY3VwYW5jeV9zdGF0dXMgPSA4O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC5vY2N1cGFuY3lfcGVyY2VudGFnZSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm9jY3VwYW5jeV9wZXJjZW50YWdlID0gb2JqZWN0Lm9jY3VwYW5jeV9wZXJjZW50YWdlIHwgMDtcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0LmNhcnJpYWdlX3NlcXVlbmNlICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuY2FycmlhZ2Vfc2VxdWVuY2UgPSBvYmplY3QuY2FycmlhZ2Vfc2VxdWVuY2UgPj4+IDA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIENhcnJpYWdlRGV0YWlscyBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdG9PYmplY3RcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVQb3NpdGlvbi5DYXJyaWFnZURldGFpbHNcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7dHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlUG9zaXRpb24uQ2FycmlhZ2VEZXRhaWxzfSBtZXNzYWdlIENhcnJpYWdlRGV0YWlsc1xuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuSUNvbnZlcnNpb25PcHRpb25zfSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBDYXJyaWFnZURldGFpbHMudG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdChtZXNzYWdlLCBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFvcHRpb25zKVxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgICAgICAgICAgdmFyIG9iamVjdCA9IHt9O1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmRlZmF1bHRzKSB7XG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5pZCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5sYWJlbCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5vY2N1cGFuY3lfc3RhdHVzID0gb3B0aW9ucy5lbnVtcyA9PT0gU3RyaW5nID8gXCJOT19EQVRBX0FWQUlMQUJMRVwiIDogNztcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0Lm9jY3VwYW5jeV9wZXJjZW50YWdlID0gLTE7XG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5jYXJyaWFnZV9zZXF1ZW5jZSA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmlkICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImlkXCIpKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3QuaWQgPSBtZXNzYWdlLmlkO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmxhYmVsICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImxhYmVsXCIpKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3QubGFiZWwgPSBtZXNzYWdlLmxhYmVsO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLm9jY3VwYW5jeV9zdGF0dXMgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwib2NjdXBhbmN5X3N0YXR1c1wiKSlcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0Lm9jY3VwYW5jeV9zdGF0dXMgPSBvcHRpb25zLmVudW1zID09PSBTdHJpbmcgPyAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVQb3NpdGlvbi5PY2N1cGFuY3lTdGF0dXNbbWVzc2FnZS5vY2N1cGFuY3lfc3RhdHVzXSA9PT0gdW5kZWZpbmVkID8gbWVzc2FnZS5vY2N1cGFuY3lfc3RhdHVzIDogJHJvb3QudHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlUG9zaXRpb24uT2NjdXBhbmN5U3RhdHVzW21lc3NhZ2Uub2NjdXBhbmN5X3N0YXR1c10gOiBtZXNzYWdlLm9jY3VwYW5jeV9zdGF0dXM7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uub2NjdXBhbmN5X3BlcmNlbnRhZ2UgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwib2NjdXBhbmN5X3BlcmNlbnRhZ2VcIikpXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5vY2N1cGFuY3lfcGVyY2VudGFnZSA9IG1lc3NhZ2Uub2NjdXBhbmN5X3BlcmNlbnRhZ2U7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuY2FycmlhZ2Vfc2VxdWVuY2UgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiY2FycmlhZ2Vfc2VxdWVuY2VcIikpXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5jYXJyaWFnZV9zZXF1ZW5jZSA9IG1lc3NhZ2UuY2FycmlhZ2Vfc2VxdWVuY2U7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ29udmVydHMgdGhpcyBDYXJyaWFnZURldGFpbHMgdG8gSlNPTi5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b0pTT05cbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVQb3NpdGlvbi5DYXJyaWFnZURldGFpbHNcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBKU09OIG9iamVjdFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBDYXJyaWFnZURldGFpbHMucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogR2V0cyB0aGUgZGVmYXVsdCB0eXBlIHVybCBmb3IgQ2FycmlhZ2VEZXRhaWxzXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZ2V0VHlwZVVybFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVmVoaWNsZVBvc2l0aW9uLkNhcnJpYWdlRGV0YWlsc1xuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFt0eXBlVXJsUHJlZml4XSB5b3VyIGN1c3RvbSB0eXBlVXJsUHJlZml4KGRlZmF1bHQgXCJ0eXBlLmdvb2dsZWFwaXMuY29tXCIpXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgZGVmYXVsdCB0eXBlIHVybFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBDYXJyaWFnZURldGFpbHMuZ2V0VHlwZVVybCA9IGZ1bmN0aW9uIGdldFR5cGVVcmwodHlwZVVybFByZWZpeCkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlVXJsUHJlZml4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZVVybFByZWZpeCA9IFwidHlwZS5nb29nbGVhcGlzLmNvbVwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdHlwZVVybFByZWZpeCArIFwiL3RyYW5zaXRfcmVhbHRpbWUuVmVoaWNsZVBvc2l0aW9uLkNhcnJpYWdlRGV0YWlsc1wiO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmV0dXJuIENhcnJpYWdlRGV0YWlscztcbiAgICAgICAgfSkoKTtcblxuICAgICAgICByZXR1cm4gVmVoaWNsZVBvc2l0aW9uO1xuICAgIH0pKCk7XG5cbiAgICB0cmFuc2l0X3JlYWx0aW1lLkFsZXJ0ID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGFuIEFsZXJ0LlxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZVxuICAgICAgICAgKiBAaW50ZXJmYWNlIElBbGVydFxuICAgICAgICAgKiBAcHJvcGVydHkge0FycmF5Ljx0cmFuc2l0X3JlYWx0aW1lLklUaW1lUmFuZ2U+fG51bGx9IFthY3RpdmVfcGVyaW9kXSBBbGVydCBhY3RpdmVfcGVyaW9kXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7QXJyYXkuPHRyYW5zaXRfcmVhbHRpbWUuSUVudGl0eVNlbGVjdG9yPnxudWxsfSBbaW5mb3JtZWRfZW50aXR5XSBBbGVydCBpbmZvcm1lZF9lbnRpdHlcbiAgICAgICAgICogQHByb3BlcnR5IHt0cmFuc2l0X3JlYWx0aW1lLkFsZXJ0LkNhdXNlfG51bGx9IFtjYXVzZV0gQWxlcnQgY2F1c2VcbiAgICAgICAgICogQHByb3BlcnR5IHt0cmFuc2l0X3JlYWx0aW1lLkFsZXJ0LkVmZmVjdHxudWxsfSBbZWZmZWN0XSBBbGVydCBlZmZlY3RcbiAgICAgICAgICogQHByb3BlcnR5IHt0cmFuc2l0X3JlYWx0aW1lLklUcmFuc2xhdGVkU3RyaW5nfG51bGx9IFt1cmxdIEFsZXJ0IHVybFxuICAgICAgICAgKiBAcHJvcGVydHkge3RyYW5zaXRfcmVhbHRpbWUuSVRyYW5zbGF0ZWRTdHJpbmd8bnVsbH0gW2hlYWRlcl90ZXh0XSBBbGVydCBoZWFkZXJfdGV4dFxuICAgICAgICAgKiBAcHJvcGVydHkge3RyYW5zaXRfcmVhbHRpbWUuSVRyYW5zbGF0ZWRTdHJpbmd8bnVsbH0gW2Rlc2NyaXB0aW9uX3RleHRdIEFsZXJ0IGRlc2NyaXB0aW9uX3RleHRcbiAgICAgICAgICogQHByb3BlcnR5IHt0cmFuc2l0X3JlYWx0aW1lLklUcmFuc2xhdGVkU3RyaW5nfG51bGx9IFt0dHNfaGVhZGVyX3RleHRdIEFsZXJ0IHR0c19oZWFkZXJfdGV4dFxuICAgICAgICAgKiBAcHJvcGVydHkge3RyYW5zaXRfcmVhbHRpbWUuSVRyYW5zbGF0ZWRTdHJpbmd8bnVsbH0gW3R0c19kZXNjcmlwdGlvbl90ZXh0XSBBbGVydCB0dHNfZGVzY3JpcHRpb25fdGV4dFxuICAgICAgICAgKiBAcHJvcGVydHkge3RyYW5zaXRfcmVhbHRpbWUuQWxlcnQuU2V2ZXJpdHlMZXZlbHxudWxsfSBbc2V2ZXJpdHlfbGV2ZWxdIEFsZXJ0IHNldmVyaXR5X2xldmVsXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7dHJhbnNpdF9yZWFsdGltZS5JVHJhbnNsYXRlZEltYWdlfG51bGx9IFtpbWFnZV0gQWxlcnQgaW1hZ2VcbiAgICAgICAgICogQHByb3BlcnR5IHt0cmFuc2l0X3JlYWx0aW1lLklUcmFuc2xhdGVkU3RyaW5nfG51bGx9IFtpbWFnZV9hbHRlcm5hdGl2ZV90ZXh0XSBBbGVydCBpbWFnZV9hbHRlcm5hdGl2ZV90ZXh0XG4gICAgICAgICAqIEBwcm9wZXJ0eSB7dHJhbnNpdF9yZWFsdGltZS5JVHJhbnNsYXRlZFN0cmluZ3xudWxsfSBbY2F1c2VfZGV0YWlsXSBBbGVydCBjYXVzZV9kZXRhaWxcbiAgICAgICAgICogQHByb3BlcnR5IHt0cmFuc2l0X3JlYWx0aW1lLklUcmFuc2xhdGVkU3RyaW5nfG51bGx9IFtlZmZlY3RfZGV0YWlsXSBBbGVydCBlZmZlY3RfZGV0YWlsXG4gICAgICAgICAqL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IEFsZXJ0LlxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZVxuICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYW4gQWxlcnQuXG4gICAgICAgICAqIEBpbXBsZW1lbnRzIElBbGVydFxuICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICogQHBhcmFtIHt0cmFuc2l0X3JlYWx0aW1lLklBbGVydD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gQWxlcnQocHJvcGVydGllcykge1xuICAgICAgICAgICAgdGhpcy5hY3RpdmVfcGVyaW9kID0gW107XG4gICAgICAgICAgICB0aGlzLmluZm9ybWVkX2VudGl0eSA9IFtdO1xuICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBbGVydCBhY3RpdmVfcGVyaW9kLlxuICAgICAgICAgKiBAbWVtYmVyIHtBcnJheS48dHJhbnNpdF9yZWFsdGltZS5JVGltZVJhbmdlPn0gYWN0aXZlX3BlcmlvZFxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5BbGVydFxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIEFsZXJ0LnByb3RvdHlwZS5hY3RpdmVfcGVyaW9kID0gJHV0aWwuZW1wdHlBcnJheTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQWxlcnQgaW5mb3JtZWRfZW50aXR5LlxuICAgICAgICAgKiBAbWVtYmVyIHtBcnJheS48dHJhbnNpdF9yZWFsdGltZS5JRW50aXR5U2VsZWN0b3I+fSBpbmZvcm1lZF9lbnRpdHlcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuQWxlcnRcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBBbGVydC5wcm90b3R5cGUuaW5mb3JtZWRfZW50aXR5ID0gJHV0aWwuZW1wdHlBcnJheTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQWxlcnQgY2F1c2UuXG4gICAgICAgICAqIEBtZW1iZXIge3RyYW5zaXRfcmVhbHRpbWUuQWxlcnQuQ2F1c2V9IGNhdXNlXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLkFsZXJ0XG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgQWxlcnQucHJvdG90eXBlLmNhdXNlID0gMTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQWxlcnQgZWZmZWN0LlxuICAgICAgICAgKiBAbWVtYmVyIHt0cmFuc2l0X3JlYWx0aW1lLkFsZXJ0LkVmZmVjdH0gZWZmZWN0XG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLkFsZXJ0XG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgQWxlcnQucHJvdG90eXBlLmVmZmVjdCA9IDg7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFsZXJ0IHVybC5cbiAgICAgICAgICogQG1lbWJlciB7dHJhbnNpdF9yZWFsdGltZS5JVHJhbnNsYXRlZFN0cmluZ3xudWxsfHVuZGVmaW5lZH0gdXJsXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLkFsZXJ0XG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgQWxlcnQucHJvdG90eXBlLnVybCA9IG51bGw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFsZXJ0IGhlYWRlcl90ZXh0LlxuICAgICAgICAgKiBAbWVtYmVyIHt0cmFuc2l0X3JlYWx0aW1lLklUcmFuc2xhdGVkU3RyaW5nfG51bGx8dW5kZWZpbmVkfSBoZWFkZXJfdGV4dFxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5BbGVydFxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIEFsZXJ0LnByb3RvdHlwZS5oZWFkZXJfdGV4dCA9IG51bGw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFsZXJ0IGRlc2NyaXB0aW9uX3RleHQuXG4gICAgICAgICAqIEBtZW1iZXIge3RyYW5zaXRfcmVhbHRpbWUuSVRyYW5zbGF0ZWRTdHJpbmd8bnVsbHx1bmRlZmluZWR9IGRlc2NyaXB0aW9uX3RleHRcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuQWxlcnRcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBBbGVydC5wcm90b3R5cGUuZGVzY3JpcHRpb25fdGV4dCA9IG51bGw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFsZXJ0IHR0c19oZWFkZXJfdGV4dC5cbiAgICAgICAgICogQG1lbWJlciB7dHJhbnNpdF9yZWFsdGltZS5JVHJhbnNsYXRlZFN0cmluZ3xudWxsfHVuZGVmaW5lZH0gdHRzX2hlYWRlcl90ZXh0XG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLkFsZXJ0XG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgQWxlcnQucHJvdG90eXBlLnR0c19oZWFkZXJfdGV4dCA9IG51bGw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFsZXJ0IHR0c19kZXNjcmlwdGlvbl90ZXh0LlxuICAgICAgICAgKiBAbWVtYmVyIHt0cmFuc2l0X3JlYWx0aW1lLklUcmFuc2xhdGVkU3RyaW5nfG51bGx8dW5kZWZpbmVkfSB0dHNfZGVzY3JpcHRpb25fdGV4dFxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5BbGVydFxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIEFsZXJ0LnByb3RvdHlwZS50dHNfZGVzY3JpcHRpb25fdGV4dCA9IG51bGw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFsZXJ0IHNldmVyaXR5X2xldmVsLlxuICAgICAgICAgKiBAbWVtYmVyIHt0cmFuc2l0X3JlYWx0aW1lLkFsZXJ0LlNldmVyaXR5TGV2ZWx9IHNldmVyaXR5X2xldmVsXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLkFsZXJ0XG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgQWxlcnQucHJvdG90eXBlLnNldmVyaXR5X2xldmVsID0gMTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQWxlcnQgaW1hZ2UuXG4gICAgICAgICAqIEBtZW1iZXIge3RyYW5zaXRfcmVhbHRpbWUuSVRyYW5zbGF0ZWRJbWFnZXxudWxsfHVuZGVmaW5lZH0gaW1hZ2VcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuQWxlcnRcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBBbGVydC5wcm90b3R5cGUuaW1hZ2UgPSBudWxsO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBbGVydCBpbWFnZV9hbHRlcm5hdGl2ZV90ZXh0LlxuICAgICAgICAgKiBAbWVtYmVyIHt0cmFuc2l0X3JlYWx0aW1lLklUcmFuc2xhdGVkU3RyaW5nfG51bGx8dW5kZWZpbmVkfSBpbWFnZV9hbHRlcm5hdGl2ZV90ZXh0XG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLkFsZXJ0XG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgQWxlcnQucHJvdG90eXBlLmltYWdlX2FsdGVybmF0aXZlX3RleHQgPSBudWxsO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBbGVydCBjYXVzZV9kZXRhaWwuXG4gICAgICAgICAqIEBtZW1iZXIge3RyYW5zaXRfcmVhbHRpbWUuSVRyYW5zbGF0ZWRTdHJpbmd8bnVsbHx1bmRlZmluZWR9IGNhdXNlX2RldGFpbFxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5BbGVydFxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIEFsZXJ0LnByb3RvdHlwZS5jYXVzZV9kZXRhaWwgPSBudWxsO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBbGVydCBlZmZlY3RfZGV0YWlsLlxuICAgICAgICAgKiBAbWVtYmVyIHt0cmFuc2l0X3JlYWx0aW1lLklUcmFuc2xhdGVkU3RyaW5nfG51bGx8dW5kZWZpbmVkfSBlZmZlY3RfZGV0YWlsXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLkFsZXJ0XG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgQWxlcnQucHJvdG90eXBlLmVmZmVjdF9kZXRhaWwgPSBudWxsO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IEFsZXJ0IGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGNyZWF0ZVxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5BbGVydFxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7dHJhbnNpdF9yZWFsdGltZS5JQWxlcnQ9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICogQHJldHVybnMge3RyYW5zaXRfcmVhbHRpbWUuQWxlcnR9IEFsZXJ0IGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBBbGVydC5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUocHJvcGVydGllcykge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBBbGVydChwcm9wZXJ0aWVzKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIEFsZXJ0IG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIHRyYW5zaXRfcmVhbHRpbWUuQWxlcnQudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuQWxlcnRcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuSUFsZXJ0fSBtZXNzYWdlIEFsZXJ0IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgKi9cbiAgICAgICAgQWxlcnQuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmFjdGl2ZV9wZXJpb2QgIT0gbnVsbCAmJiBtZXNzYWdlLmFjdGl2ZV9wZXJpb2QubGVuZ3RoKVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVzc2FnZS5hY3RpdmVfcGVyaW9kLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRpbWVSYW5nZS5lbmNvZGUobWVzc2FnZS5hY3RpdmVfcGVyaW9kW2ldLCB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5pbmZvcm1lZF9lbnRpdHkgIT0gbnVsbCAmJiBtZXNzYWdlLmluZm9ybWVkX2VudGl0eS5sZW5ndGgpXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNzYWdlLmluZm9ybWVkX2VudGl0eS5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5FbnRpdHlTZWxlY3Rvci5lbmNvZGUobWVzc2FnZS5pbmZvcm1lZF9lbnRpdHlbaV0sIHdyaXRlci51aW50MzIoLyogaWQgNSwgd2lyZVR5cGUgMiA9Ki80MikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmNhdXNlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJjYXVzZVwiKSlcbiAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDYsIHdpcmVUeXBlIDAgPSovNDgpLmludDMyKG1lc3NhZ2UuY2F1c2UpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZWZmZWN0ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJlZmZlY3RcIikpXG4gICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCA3LCB3aXJlVHlwZSAwID0qLzU2KS5pbnQzMihtZXNzYWdlLmVmZmVjdCk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS51cmwgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInVybFwiKSlcbiAgICAgICAgICAgICAgICAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRTdHJpbmcuZW5jb2RlKG1lc3NhZ2UudXJsLCB3cml0ZXIudWludDMyKC8qIGlkIDgsIHdpcmVUeXBlIDIgPSovNjYpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5oZWFkZXJfdGV4dCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiaGVhZGVyX3RleHRcIikpXG4gICAgICAgICAgICAgICAgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nLmVuY29kZShtZXNzYWdlLmhlYWRlcl90ZXh0LCB3cml0ZXIudWludDMyKC8qIGlkIDEwLCB3aXJlVHlwZSAyID0qLzgyKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZGVzY3JpcHRpb25fdGV4dCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiZGVzY3JpcHRpb25fdGV4dFwiKSlcbiAgICAgICAgICAgICAgICAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRTdHJpbmcuZW5jb2RlKG1lc3NhZ2UuZGVzY3JpcHRpb25fdGV4dCwgd3JpdGVyLnVpbnQzMigvKiBpZCAxMSwgd2lyZVR5cGUgMiA9Ki85MCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnR0c19oZWFkZXJfdGV4dCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwidHRzX2hlYWRlcl90ZXh0XCIpKVxuICAgICAgICAgICAgICAgICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZFN0cmluZy5lbmNvZGUobWVzc2FnZS50dHNfaGVhZGVyX3RleHQsIHdyaXRlci51aW50MzIoLyogaWQgMTIsIHdpcmVUeXBlIDIgPSovOTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS50dHNfZGVzY3JpcHRpb25fdGV4dCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwidHRzX2Rlc2NyaXB0aW9uX3RleHRcIikpXG4gICAgICAgICAgICAgICAgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nLmVuY29kZShtZXNzYWdlLnR0c19kZXNjcmlwdGlvbl90ZXh0LCB3cml0ZXIudWludDMyKC8qIGlkIDEzLCB3aXJlVHlwZSAyID0qLzEwNikuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnNldmVyaXR5X2xldmVsICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJzZXZlcml0eV9sZXZlbFwiKSlcbiAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDE0LCB3aXJlVHlwZSAwID0qLzExMikuaW50MzIobWVzc2FnZS5zZXZlcml0eV9sZXZlbCk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5pbWFnZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiaW1hZ2VcIikpXG4gICAgICAgICAgICAgICAgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkSW1hZ2UuZW5jb2RlKG1lc3NhZ2UuaW1hZ2UsIHdyaXRlci51aW50MzIoLyogaWQgMTUsIHdpcmVUeXBlIDIgPSovMTIyKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaW1hZ2VfYWx0ZXJuYXRpdmVfdGV4dCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiaW1hZ2VfYWx0ZXJuYXRpdmVfdGV4dFwiKSlcbiAgICAgICAgICAgICAgICAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRTdHJpbmcuZW5jb2RlKG1lc3NhZ2UuaW1hZ2VfYWx0ZXJuYXRpdmVfdGV4dCwgd3JpdGVyLnVpbnQzMigvKiBpZCAxNiwgd2lyZVR5cGUgMiA9Ki8xMzApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5jYXVzZV9kZXRhaWwgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImNhdXNlX2RldGFpbFwiKSlcbiAgICAgICAgICAgICAgICAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRTdHJpbmcuZW5jb2RlKG1lc3NhZ2UuY2F1c2VfZGV0YWlsLCB3cml0ZXIudWludDMyKC8qIGlkIDE3LCB3aXJlVHlwZSAyID0qLzEzOCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmVmZmVjdF9kZXRhaWwgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImVmZmVjdF9kZXRhaWxcIikpXG4gICAgICAgICAgICAgICAgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nLmVuY29kZShtZXNzYWdlLmVmZmVjdF9kZXRhaWwsIHdyaXRlci51aW50MzIoLyogaWQgMTgsIHdpcmVUeXBlIDIgPSovMTQ2KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIEFsZXJ0IG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIHRyYW5zaXRfcmVhbHRpbWUuQWxlcnQudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuQWxlcnRcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuSUFsZXJ0fSBtZXNzYWdlIEFsZXJ0IG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgKi9cbiAgICAgICAgQWxlcnQuZW5jb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikubGRlbGltKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlY29kZXMgYW4gQWxlcnQgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5BbGVydFxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAgICAgKiBAcmV0dXJucyB7dHJhbnNpdF9yZWFsdGltZS5BbGVydH0gQWxlcnRcbiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAqL1xuICAgICAgICBBbGVydC5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgsIGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5BbGVydCgpO1xuICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgIGlmICh0YWcgPT09IGVycm9yKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMToge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEobWVzc2FnZS5hY3RpdmVfcGVyaW9kICYmIG1lc3NhZ2UuYWN0aXZlX3BlcmlvZC5sZW5ndGgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYWN0aXZlX3BlcmlvZCA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5hY3RpdmVfcGVyaW9kLnB1c2goJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UaW1lUmFuZ2UuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgNToge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEobWVzc2FnZS5pbmZvcm1lZF9lbnRpdHkgJiYgbWVzc2FnZS5pbmZvcm1lZF9lbnRpdHkubGVuZ3RoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmluZm9ybWVkX2VudGl0eSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5pbmZvcm1lZF9lbnRpdHkucHVzaCgkcm9vdC50cmFuc2l0X3JlYWx0aW1lLkVudGl0eVNlbGVjdG9yLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIDY6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuY2F1c2UgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSA3OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVmZmVjdCA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIDg6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudXJsID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgMTA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuaGVhZGVyX3RleHQgPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRTdHJpbmcuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAxMToge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5kZXNjcmlwdGlvbl90ZXh0ID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgMTI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudHRzX2hlYWRlcl90ZXh0ID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgMTM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudHRzX2Rlc2NyaXB0aW9uX3RleHQgPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRTdHJpbmcuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAxNDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zZXZlcml0eV9sZXZlbCA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIDE1OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmltYWdlID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkSW1hZ2UuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAxNjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5pbWFnZV9hbHRlcm5hdGl2ZV90ZXh0ID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgMTc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuY2F1c2VfZGV0YWlsID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgMTg6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZWZmZWN0X2RldGFpbCA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZFN0cmluZy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWNvZGVzIGFuIEFsZXJ0IG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuXG4gICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWRcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuQWxlcnRcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICogQHJldHVybnMge3RyYW5zaXRfcmVhbHRpbWUuQWxlcnR9IEFsZXJ0XG4gICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgKi9cbiAgICAgICAgQWxlcnQuZGVjb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkKHJlYWRlcikge1xuICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgcmVhZGVyID0gbmV3ICRSZWFkZXIocmVhZGVyKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFZlcmlmaWVzIGFuIEFsZXJ0IG1lc3NhZ2UuXG4gICAgICAgICAqIEBmdW5jdGlvbiB2ZXJpZnlcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuQWxlcnRcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnlcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfSBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3RcbiAgICAgICAgICovXG4gICAgICAgIEFsZXJ0LnZlcmlmeSA9IGZ1bmN0aW9uIHZlcmlmeShtZXNzYWdlKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgIT09IFwib2JqZWN0XCIgfHwgbWVzc2FnZSA9PT0gbnVsbClcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJvYmplY3QgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmFjdGl2ZV9wZXJpb2QgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiYWN0aXZlX3BlcmlvZFwiKSkge1xuICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShtZXNzYWdlLmFjdGl2ZV9wZXJpb2QpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJhY3RpdmVfcGVyaW9kOiBhcnJheSBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVzc2FnZS5hY3RpdmVfcGVyaW9kLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlcnJvciA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVGltZVJhbmdlLnZlcmlmeShtZXNzYWdlLmFjdGl2ZV9wZXJpb2RbaV0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJhY3RpdmVfcGVyaW9kLlwiICsgZXJyb3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaW5mb3JtZWRfZW50aXR5ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImluZm9ybWVkX2VudGl0eVwiKSkge1xuICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShtZXNzYWdlLmluZm9ybWVkX2VudGl0eSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImluZm9ybWVkX2VudGl0eTogYXJyYXkgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1lc3NhZ2UuaW5mb3JtZWRfZW50aXR5Lmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlcnJvciA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuRW50aXR5U2VsZWN0b3IudmVyaWZ5KG1lc3NhZ2UuaW5mb3JtZWRfZW50aXR5W2ldKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiaW5mb3JtZWRfZW50aXR5LlwiICsgZXJyb3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuY2F1c2UgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiY2F1c2VcIikpXG4gICAgICAgICAgICAgICAgc3dpdGNoIChtZXNzYWdlLmNhdXNlKSB7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiY2F1c2U6IGVudW0gdmFsdWUgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgICAgICBjYXNlIDEwOlxuICAgICAgICAgICAgICAgIGNhc2UgMTE6XG4gICAgICAgICAgICAgICAgY2FzZSAxMjpcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZWZmZWN0ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImVmZmVjdFwiKSlcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG1lc3NhZ2UuZWZmZWN0KSB7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiZWZmZWN0OiBlbnVtIHZhbHVlIGV4cGVjdGVkXCI7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICAgICAgICBjYXNlIDExOlxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS51cmwgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwidXJsXCIpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nLnZlcmlmeShtZXNzYWdlLnVybCk7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJ1cmwuXCIgKyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmhlYWRlcl90ZXh0ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImhlYWRlcl90ZXh0XCIpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nLnZlcmlmeShtZXNzYWdlLmhlYWRlcl90ZXh0KTtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImhlYWRlcl90ZXh0LlwiICsgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5kZXNjcmlwdGlvbl90ZXh0ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImRlc2NyaXB0aW9uX3RleHRcIikpIHtcbiAgICAgICAgICAgICAgICB2YXIgZXJyb3IgPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRTdHJpbmcudmVyaWZ5KG1lc3NhZ2UuZGVzY3JpcHRpb25fdGV4dCk7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJkZXNjcmlwdGlvbl90ZXh0LlwiICsgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS50dHNfaGVhZGVyX3RleHQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwidHRzX2hlYWRlcl90ZXh0XCIpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nLnZlcmlmeShtZXNzYWdlLnR0c19oZWFkZXJfdGV4dCk7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJ0dHNfaGVhZGVyX3RleHQuXCIgKyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnR0c19kZXNjcmlwdGlvbl90ZXh0ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInR0c19kZXNjcmlwdGlvbl90ZXh0XCIpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nLnZlcmlmeShtZXNzYWdlLnR0c19kZXNjcmlwdGlvbl90ZXh0KTtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcInR0c19kZXNjcmlwdGlvbl90ZXh0LlwiICsgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5zZXZlcml0eV9sZXZlbCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzZXZlcml0eV9sZXZlbFwiKSlcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG1lc3NhZ2Uuc2V2ZXJpdHlfbGV2ZWwpIHtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJzZXZlcml0eV9sZXZlbDogZW51bSB2YWx1ZSBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaW1hZ2UgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiaW1hZ2VcIikpIHtcbiAgICAgICAgICAgICAgICB2YXIgZXJyb3IgPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRJbWFnZS52ZXJpZnkobWVzc2FnZS5pbWFnZSk7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJpbWFnZS5cIiArIGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaW1hZ2VfYWx0ZXJuYXRpdmVfdGV4dCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJpbWFnZV9hbHRlcm5hdGl2ZV90ZXh0XCIpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nLnZlcmlmeShtZXNzYWdlLmltYWdlX2FsdGVybmF0aXZlX3RleHQpO1xuICAgICAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiaW1hZ2VfYWx0ZXJuYXRpdmVfdGV4dC5cIiArIGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuY2F1c2VfZGV0YWlsICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImNhdXNlX2RldGFpbFwiKSkge1xuICAgICAgICAgICAgICAgIHZhciBlcnJvciA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZFN0cmluZy52ZXJpZnkobWVzc2FnZS5jYXVzZV9kZXRhaWwpO1xuICAgICAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiY2F1c2VfZGV0YWlsLlwiICsgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5lZmZlY3RfZGV0YWlsICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImVmZmVjdF9kZXRhaWxcIikpIHtcbiAgICAgICAgICAgICAgICB2YXIgZXJyb3IgPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRTdHJpbmcudmVyaWZ5KG1lc3NhZ2UuZWZmZWN0X2RldGFpbCk7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJlZmZlY3RfZGV0YWlsLlwiICsgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlcyBhbiBBbGVydCBtZXNzYWdlIGZyb20gYSBwbGFpbiBvYmplY3QuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIHRoZWlyIHJlc3BlY3RpdmUgaW50ZXJuYWwgdHlwZXMuXG4gICAgICAgICAqIEBmdW5jdGlvbiBmcm9tT2JqZWN0XG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLkFsZXJ0XG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gb2JqZWN0IFBsYWluIG9iamVjdFxuICAgICAgICAgKiBAcmV0dXJucyB7dHJhbnNpdF9yZWFsdGltZS5BbGVydH0gQWxlcnRcbiAgICAgICAgICovXG4gICAgICAgIEFsZXJ0LmZyb21PYmplY3QgPSBmdW5jdGlvbiBmcm9tT2JqZWN0KG9iamVjdCkge1xuICAgICAgICAgICAgaWYgKG9iamVjdCBpbnN0YW5jZW9mICRyb290LnRyYW5zaXRfcmVhbHRpbWUuQWxlcnQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICAgICAgICAgIHZhciBtZXNzYWdlID0gbmV3ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuQWxlcnQoKTtcbiAgICAgICAgICAgIGlmIChvYmplY3QuYWN0aXZlX3BlcmlvZCkge1xuICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShvYmplY3QuYWN0aXZlX3BlcmlvZCkpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcihcIi50cmFuc2l0X3JlYWx0aW1lLkFsZXJ0LmFjdGl2ZV9wZXJpb2Q6IGFycmF5IGV4cGVjdGVkXCIpO1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UuYWN0aXZlX3BlcmlvZCA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2JqZWN0LmFjdGl2ZV9wZXJpb2QubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmplY3QuYWN0aXZlX3BlcmlvZFtpXSAhPT0gXCJvYmplY3RcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcihcIi50cmFuc2l0X3JlYWx0aW1lLkFsZXJ0LmFjdGl2ZV9wZXJpb2Q6IG9iamVjdCBleHBlY3RlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5hY3RpdmVfcGVyaW9kW2ldID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UaW1lUmFuZ2UuZnJvbU9iamVjdChvYmplY3QuYWN0aXZlX3BlcmlvZFtpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9iamVjdC5pbmZvcm1lZF9lbnRpdHkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkob2JqZWN0LmluZm9ybWVkX2VudGl0eSkpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcihcIi50cmFuc2l0X3JlYWx0aW1lLkFsZXJ0LmluZm9ybWVkX2VudGl0eTogYXJyYXkgZXhwZWN0ZWRcIik7XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5pbmZvcm1lZF9lbnRpdHkgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9iamVjdC5pbmZvcm1lZF9lbnRpdHkubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmplY3QuaW5mb3JtZWRfZW50aXR5W2ldICE9PSBcIm9iamVjdFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgVHlwZUVycm9yKFwiLnRyYW5zaXRfcmVhbHRpbWUuQWxlcnQuaW5mb3JtZWRfZW50aXR5OiBvYmplY3QgZXhwZWN0ZWRcIik7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuaW5mb3JtZWRfZW50aXR5W2ldID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5FbnRpdHlTZWxlY3Rvci5mcm9tT2JqZWN0KG9iamVjdC5pbmZvcm1lZF9lbnRpdHlbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN3aXRjaCAob2JqZWN0LmNhdXNlKSB7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqZWN0LmNhdXNlID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuY2F1c2UgPSBvYmplY3QuY2F1c2U7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJVTktOT1dOX0NBVVNFXCI6XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5jYXVzZSA9IDE7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiT1RIRVJfQ0FVU0VcIjpcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmNhdXNlID0gMjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJURUNITklDQUxfUFJPQkxFTVwiOlxuICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgIG1lc3NhZ2UuY2F1c2UgPSAzO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIlNUUklLRVwiOlxuICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgIG1lc3NhZ2UuY2F1c2UgPSA0O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkRFTU9OU1RSQVRJT05cIjpcbiAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmNhdXNlID0gNTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJBQ0NJREVOVFwiOlxuICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgIG1lc3NhZ2UuY2F1c2UgPSA2O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkhPTElEQVlcIjpcbiAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmNhdXNlID0gNztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJXRUFUSEVSXCI6XG4gICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5jYXVzZSA9IDg7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiTUFJTlRFTkFOQ0VcIjpcbiAgICAgICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmNhdXNlID0gOTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJDT05TVFJVQ1RJT05cIjpcbiAgICAgICAgICAgIGNhc2UgMTA6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5jYXVzZSA9IDEwO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIlBPTElDRV9BQ1RJVklUWVwiOlxuICAgICAgICAgICAgY2FzZSAxMTpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmNhdXNlID0gMTE7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiTUVESUNBTF9FTUVSR0VOQ1lcIjpcbiAgICAgICAgICAgIGNhc2UgMTI6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5jYXVzZSA9IDEyO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3dpdGNoIChvYmplY3QuZWZmZWN0KSB7XG4gICAgICAgICAgICBjYXNlIFwiTk9fU0VSVklDRVwiOlxuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIG1lc3NhZ2UuZWZmZWN0ID0gMTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJSRURVQ0VEX1NFUlZJQ0VcIjpcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmVmZmVjdCA9IDI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiU0lHTklGSUNBTlRfREVMQVlTXCI6XG4gICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5lZmZlY3QgPSAzO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkRFVE9VUlwiOlxuICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgIG1lc3NhZ2UuZWZmZWN0ID0gNDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJBRERJVElPTkFMX1NFUlZJQ0VcIjpcbiAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmVmZmVjdCA9IDU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiTU9ESUZJRURfU0VSVklDRVwiOlxuICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgIG1lc3NhZ2UuZWZmZWN0ID0gNjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJPVEhFUl9FRkZFQ1RcIjpcbiAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmVmZmVjdCA9IDc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqZWN0LmVmZmVjdCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVmZmVjdCA9IG9iamVjdC5lZmZlY3Q7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJVTktOT1dOX0VGRkVDVFwiOlxuICAgICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgICAgIG1lc3NhZ2UuZWZmZWN0ID0gODtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJTVE9QX01PVkVEXCI6XG4gICAgICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5lZmZlY3QgPSA5O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIk5PX0VGRkVDVFwiOlxuICAgICAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmVmZmVjdCA9IDEwO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkFDQ0VTU0lCSUxJVFlfSVNTVUVcIjpcbiAgICAgICAgICAgIGNhc2UgMTE6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5lZmZlY3QgPSAxMTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvYmplY3QudXJsICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9iamVjdC51cmwgIT09IFwib2JqZWN0XCIpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcihcIi50cmFuc2l0X3JlYWx0aW1lLkFsZXJ0LnVybDogb2JqZWN0IGV4cGVjdGVkXCIpO1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UudXJsID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nLmZyb21PYmplY3Qob2JqZWN0LnVybCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob2JqZWN0LmhlYWRlcl90ZXh0ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9iamVjdC5oZWFkZXJfdGV4dCAhPT0gXCJvYmplY3RcIilcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgVHlwZUVycm9yKFwiLnRyYW5zaXRfcmVhbHRpbWUuQWxlcnQuaGVhZGVyX3RleHQ6IG9iamVjdCBleHBlY3RlZFwiKTtcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmhlYWRlcl90ZXh0ID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nLmZyb21PYmplY3Qob2JqZWN0LmhlYWRlcl90ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvYmplY3QuZGVzY3JpcHRpb25fdGV4dCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmplY3QuZGVzY3JpcHRpb25fdGV4dCAhPT0gXCJvYmplY3RcIilcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgVHlwZUVycm9yKFwiLnRyYW5zaXRfcmVhbHRpbWUuQWxlcnQuZGVzY3JpcHRpb25fdGV4dDogb2JqZWN0IGV4cGVjdGVkXCIpO1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UuZGVzY3JpcHRpb25fdGV4dCA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZFN0cmluZy5mcm9tT2JqZWN0KG9iamVjdC5kZXNjcmlwdGlvbl90ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvYmplY3QudHRzX2hlYWRlcl90ZXh0ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9iamVjdC50dHNfaGVhZGVyX3RleHQgIT09IFwib2JqZWN0XCIpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcihcIi50cmFuc2l0X3JlYWx0aW1lLkFsZXJ0LnR0c19oZWFkZXJfdGV4dDogb2JqZWN0IGV4cGVjdGVkXCIpO1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UudHRzX2hlYWRlcl90ZXh0ID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nLmZyb21PYmplY3Qob2JqZWN0LnR0c19oZWFkZXJfdGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob2JqZWN0LnR0c19kZXNjcmlwdGlvbl90ZXh0ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9iamVjdC50dHNfZGVzY3JpcHRpb25fdGV4dCAhPT0gXCJvYmplY3RcIilcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgVHlwZUVycm9yKFwiLnRyYW5zaXRfcmVhbHRpbWUuQWxlcnQudHRzX2Rlc2NyaXB0aW9uX3RleHQ6IG9iamVjdCBleHBlY3RlZFwiKTtcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnR0c19kZXNjcmlwdGlvbl90ZXh0ID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nLmZyb21PYmplY3Qob2JqZWN0LnR0c19kZXNjcmlwdGlvbl90ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN3aXRjaCAob2JqZWN0LnNldmVyaXR5X2xldmVsKSB7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqZWN0LnNldmVyaXR5X2xldmVsID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2V2ZXJpdHlfbGV2ZWwgPSBvYmplY3Quc2V2ZXJpdHlfbGV2ZWw7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJVTktOT1dOX1NFVkVSSVRZXCI6XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5zZXZlcml0eV9sZXZlbCA9IDE7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiSU5GT1wiOlxuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2V2ZXJpdHlfbGV2ZWwgPSAyO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIldBUk5JTkdcIjpcbiAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnNldmVyaXR5X2xldmVsID0gMztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJTRVZFUkVcIjpcbiAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnNldmVyaXR5X2xldmVsID0gNDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvYmplY3QuaW1hZ2UgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqZWN0LmltYWdlICE9PSBcIm9iamVjdFwiKVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoXCIudHJhbnNpdF9yZWFsdGltZS5BbGVydC5pbWFnZTogb2JqZWN0IGV4cGVjdGVkXCIpO1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UuaW1hZ2UgPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRJbWFnZS5mcm9tT2JqZWN0KG9iamVjdC5pbWFnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob2JqZWN0LmltYWdlX2FsdGVybmF0aXZlX3RleHQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqZWN0LmltYWdlX2FsdGVybmF0aXZlX3RleHQgIT09IFwib2JqZWN0XCIpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcihcIi50cmFuc2l0X3JlYWx0aW1lLkFsZXJ0LmltYWdlX2FsdGVybmF0aXZlX3RleHQ6IG9iamVjdCBleHBlY3RlZFwiKTtcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmltYWdlX2FsdGVybmF0aXZlX3RleHQgPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRTdHJpbmcuZnJvbU9iamVjdChvYmplY3QuaW1hZ2VfYWx0ZXJuYXRpdmVfdGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob2JqZWN0LmNhdXNlX2RldGFpbCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmplY3QuY2F1c2VfZGV0YWlsICE9PSBcIm9iamVjdFwiKVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoXCIudHJhbnNpdF9yZWFsdGltZS5BbGVydC5jYXVzZV9kZXRhaWw6IG9iamVjdCBleHBlY3RlZFwiKTtcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmNhdXNlX2RldGFpbCA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZFN0cmluZy5mcm9tT2JqZWN0KG9iamVjdC5jYXVzZV9kZXRhaWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9iamVjdC5lZmZlY3RfZGV0YWlsICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9iamVjdC5lZmZlY3RfZGV0YWlsICE9PSBcIm9iamVjdFwiKVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoXCIudHJhbnNpdF9yZWFsdGltZS5BbGVydC5lZmZlY3RfZGV0YWlsOiBvYmplY3QgZXhwZWN0ZWRcIik7XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5lZmZlY3RfZGV0YWlsID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nLmZyb21PYmplY3Qob2JqZWN0LmVmZmVjdF9kZXRhaWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhbiBBbGVydCBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXG4gICAgICAgICAqIEBmdW5jdGlvbiB0b09iamVjdFxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5BbGVydFxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7dHJhbnNpdF9yZWFsdGltZS5BbGVydH0gbWVzc2FnZSBBbGVydFxuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcbiAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBQbGFpbiBvYmplY3RcbiAgICAgICAgICovXG4gICAgICAgIEFsZXJ0LnRvT2JqZWN0ID0gZnVuY3Rpb24gdG9PYmplY3QobWVzc2FnZSwgb3B0aW9ucykge1xuICAgICAgICAgICAgaWYgKCFvcHRpb25zKVxuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgICAgIHZhciBvYmplY3QgPSB7fTtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmFycmF5cyB8fCBvcHRpb25zLmRlZmF1bHRzKSB7XG4gICAgICAgICAgICAgICAgb2JqZWN0LmFjdGl2ZV9wZXJpb2QgPSBbXTtcbiAgICAgICAgICAgICAgICBvYmplY3QuaW5mb3JtZWRfZW50aXR5ID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5kZWZhdWx0cykge1xuICAgICAgICAgICAgICAgIG9iamVjdC5jYXVzZSA9IG9wdGlvbnMuZW51bXMgPT09IFN0cmluZyA/IFwiVU5LTk9XTl9DQVVTRVwiIDogMTtcbiAgICAgICAgICAgICAgICBvYmplY3QuZWZmZWN0ID0gb3B0aW9ucy5lbnVtcyA9PT0gU3RyaW5nID8gXCJVTktOT1dOX0VGRkVDVFwiIDogODtcbiAgICAgICAgICAgICAgICBvYmplY3QudXJsID0gbnVsbDtcbiAgICAgICAgICAgICAgICBvYmplY3QuaGVhZGVyX3RleHQgPSBudWxsO1xuICAgICAgICAgICAgICAgIG9iamVjdC5kZXNjcmlwdGlvbl90ZXh0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICBvYmplY3QudHRzX2hlYWRlcl90ZXh0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICBvYmplY3QudHRzX2Rlc2NyaXB0aW9uX3RleHQgPSBudWxsO1xuICAgICAgICAgICAgICAgIG9iamVjdC5zZXZlcml0eV9sZXZlbCA9IG9wdGlvbnMuZW51bXMgPT09IFN0cmluZyA/IFwiVU5LTk9XTl9TRVZFUklUWVwiIDogMTtcbiAgICAgICAgICAgICAgICBvYmplY3QuaW1hZ2UgPSBudWxsO1xuICAgICAgICAgICAgICAgIG9iamVjdC5pbWFnZV9hbHRlcm5hdGl2ZV90ZXh0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICBvYmplY3QuY2F1c2VfZGV0YWlsID0gbnVsbDtcbiAgICAgICAgICAgICAgICBvYmplY3QuZWZmZWN0X2RldGFpbCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5hY3RpdmVfcGVyaW9kICYmIG1lc3NhZ2UuYWN0aXZlX3BlcmlvZC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBvYmplY3QuYWN0aXZlX3BlcmlvZCA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbWVzc2FnZS5hY3RpdmVfcGVyaW9kLmxlbmd0aDsgKytqKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3QuYWN0aXZlX3BlcmlvZFtqXSA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVGltZVJhbmdlLnRvT2JqZWN0KG1lc3NhZ2UuYWN0aXZlX3BlcmlvZFtqXSwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5pbmZvcm1lZF9lbnRpdHkgJiYgbWVzc2FnZS5pbmZvcm1lZF9lbnRpdHkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgb2JqZWN0LmluZm9ybWVkX2VudGl0eSA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbWVzc2FnZS5pbmZvcm1lZF9lbnRpdHkubGVuZ3RoOyArK2opXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5pbmZvcm1lZF9lbnRpdHlbal0gPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLkVudGl0eVNlbGVjdG9yLnRvT2JqZWN0KG1lc3NhZ2UuaW5mb3JtZWRfZW50aXR5W2pdLCBvcHRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmNhdXNlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImNhdXNlXCIpKVxuICAgICAgICAgICAgICAgIG9iamVjdC5jYXVzZSA9IG9wdGlvbnMuZW51bXMgPT09IFN0cmluZyA/ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuQWxlcnQuQ2F1c2VbbWVzc2FnZS5jYXVzZV0gPT09IHVuZGVmaW5lZCA/IG1lc3NhZ2UuY2F1c2UgOiAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLkFsZXJ0LkNhdXNlW21lc3NhZ2UuY2F1c2VdIDogbWVzc2FnZS5jYXVzZTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmVmZmVjdCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJlZmZlY3RcIikpXG4gICAgICAgICAgICAgICAgb2JqZWN0LmVmZmVjdCA9IG9wdGlvbnMuZW51bXMgPT09IFN0cmluZyA/ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuQWxlcnQuRWZmZWN0W21lc3NhZ2UuZWZmZWN0XSA9PT0gdW5kZWZpbmVkID8gbWVzc2FnZS5lZmZlY3QgOiAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLkFsZXJ0LkVmZmVjdFttZXNzYWdlLmVmZmVjdF0gOiBtZXNzYWdlLmVmZmVjdDtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnVybCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJ1cmxcIikpXG4gICAgICAgICAgICAgICAgb2JqZWN0LnVybCA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZFN0cmluZy50b09iamVjdChtZXNzYWdlLnVybCwgb3B0aW9ucyk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5oZWFkZXJfdGV4dCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJoZWFkZXJfdGV4dFwiKSlcbiAgICAgICAgICAgICAgICBvYmplY3QuaGVhZGVyX3RleHQgPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRTdHJpbmcudG9PYmplY3QobWVzc2FnZS5oZWFkZXJfdGV4dCwgb3B0aW9ucyk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5kZXNjcmlwdGlvbl90ZXh0ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImRlc2NyaXB0aW9uX3RleHRcIikpXG4gICAgICAgICAgICAgICAgb2JqZWN0LmRlc2NyaXB0aW9uX3RleHQgPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRTdHJpbmcudG9PYmplY3QobWVzc2FnZS5kZXNjcmlwdGlvbl90ZXh0LCBvcHRpb25zKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnR0c19oZWFkZXJfdGV4dCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJ0dHNfaGVhZGVyX3RleHRcIikpXG4gICAgICAgICAgICAgICAgb2JqZWN0LnR0c19oZWFkZXJfdGV4dCA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZFN0cmluZy50b09iamVjdChtZXNzYWdlLnR0c19oZWFkZXJfdGV4dCwgb3B0aW9ucyk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS50dHNfZGVzY3JpcHRpb25fdGV4dCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJ0dHNfZGVzY3JpcHRpb25fdGV4dFwiKSlcbiAgICAgICAgICAgICAgICBvYmplY3QudHRzX2Rlc2NyaXB0aW9uX3RleHQgPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRTdHJpbmcudG9PYmplY3QobWVzc2FnZS50dHNfZGVzY3JpcHRpb25fdGV4dCwgb3B0aW9ucyk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5zZXZlcml0eV9sZXZlbCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzZXZlcml0eV9sZXZlbFwiKSlcbiAgICAgICAgICAgICAgICBvYmplY3Quc2V2ZXJpdHlfbGV2ZWwgPSBvcHRpb25zLmVudW1zID09PSBTdHJpbmcgPyAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLkFsZXJ0LlNldmVyaXR5TGV2ZWxbbWVzc2FnZS5zZXZlcml0eV9sZXZlbF0gPT09IHVuZGVmaW5lZCA/IG1lc3NhZ2Uuc2V2ZXJpdHlfbGV2ZWwgOiAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLkFsZXJ0LlNldmVyaXR5TGV2ZWxbbWVzc2FnZS5zZXZlcml0eV9sZXZlbF0gOiBtZXNzYWdlLnNldmVyaXR5X2xldmVsO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaW1hZ2UgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiaW1hZ2VcIikpXG4gICAgICAgICAgICAgICAgb2JqZWN0LmltYWdlID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkSW1hZ2UudG9PYmplY3QobWVzc2FnZS5pbWFnZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5pbWFnZV9hbHRlcm5hdGl2ZV90ZXh0ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImltYWdlX2FsdGVybmF0aXZlX3RleHRcIikpXG4gICAgICAgICAgICAgICAgb2JqZWN0LmltYWdlX2FsdGVybmF0aXZlX3RleHQgPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRTdHJpbmcudG9PYmplY3QobWVzc2FnZS5pbWFnZV9hbHRlcm5hdGl2ZV90ZXh0LCBvcHRpb25zKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmNhdXNlX2RldGFpbCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJjYXVzZV9kZXRhaWxcIikpXG4gICAgICAgICAgICAgICAgb2JqZWN0LmNhdXNlX2RldGFpbCA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZFN0cmluZy50b09iamVjdChtZXNzYWdlLmNhdXNlX2RldGFpbCwgb3B0aW9ucyk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5lZmZlY3RfZGV0YWlsICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImVmZmVjdF9kZXRhaWxcIikpXG4gICAgICAgICAgICAgICAgb2JqZWN0LmVmZmVjdF9kZXRhaWwgPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRTdHJpbmcudG9PYmplY3QobWVzc2FnZS5lZmZlY3RfZGV0YWlsLCBvcHRpb25zKTtcbiAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbnZlcnRzIHRoaXMgQWxlcnQgdG8gSlNPTi5cbiAgICAgICAgICogQGZ1bmN0aW9uIHRvSlNPTlxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5BbGVydFxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBKU09OIG9iamVjdFxuICAgICAgICAgKi9cbiAgICAgICAgQWxlcnQucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsICRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXRzIHRoZSBkZWZhdWx0IHR5cGUgdXJsIGZvciBBbGVydFxuICAgICAgICAgKiBAZnVuY3Rpb24gZ2V0VHlwZVVybFxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5BbGVydFxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbdHlwZVVybFByZWZpeF0geW91ciBjdXN0b20gdHlwZVVybFByZWZpeChkZWZhdWx0IFwidHlwZS5nb29nbGVhcGlzLmNvbVwiKVxuICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgZGVmYXVsdCB0eXBlIHVybFxuICAgICAgICAgKi9cbiAgICAgICAgQWxlcnQuZ2V0VHlwZVVybCA9IGZ1bmN0aW9uIGdldFR5cGVVcmwodHlwZVVybFByZWZpeCkge1xuICAgICAgICAgICAgaWYgKHR5cGVVcmxQcmVmaXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHR5cGVVcmxQcmVmaXggPSBcInR5cGUuZ29vZ2xlYXBpcy5jb21cIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0eXBlVXJsUHJlZml4ICsgXCIvdHJhbnNpdF9yZWFsdGltZS5BbGVydFwiO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYXVzZSBlbnVtLlxuICAgICAgICAgKiBAbmFtZSB0cmFuc2l0X3JlYWx0aW1lLkFsZXJ0LkNhdXNlXG4gICAgICAgICAqIEBlbnVtIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBVTktOT1dOX0NBVVNFPTEgVU5LTk9XTl9DQVVTRSB2YWx1ZVxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gT1RIRVJfQ0FVU0U9MiBPVEhFUl9DQVVTRSB2YWx1ZVxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gVEVDSE5JQ0FMX1BST0JMRU09MyBURUNITklDQUxfUFJPQkxFTSB2YWx1ZVxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gU1RSSUtFPTQgU1RSSUtFIHZhbHVlXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBERU1PTlNUUkFUSU9OPTUgREVNT05TVFJBVElPTiB2YWx1ZVxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gQUNDSURFTlQ9NiBBQ0NJREVOVCB2YWx1ZVxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gSE9MSURBWT03IEhPTElEQVkgdmFsdWVcbiAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IFdFQVRIRVI9OCBXRUFUSEVSIHZhbHVlXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBNQUlOVEVOQU5DRT05IE1BSU5URU5BTkNFIHZhbHVlXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBDT05TVFJVQ1RJT049MTAgQ09OU1RSVUNUSU9OIHZhbHVlXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBQT0xJQ0VfQUNUSVZJVFk9MTEgUE9MSUNFX0FDVElWSVRZIHZhbHVlXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBNRURJQ0FMX0VNRVJHRU5DWT0xMiBNRURJQ0FMX0VNRVJHRU5DWSB2YWx1ZVxuICAgICAgICAgKi9cbiAgICAgICAgQWxlcnQuQ2F1c2UgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWVzQnlJZCA9IHt9LCB2YWx1ZXMgPSBPYmplY3QuY3JlYXRlKHZhbHVlc0J5SWQpO1xuICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbMV0gPSBcIlVOS05PV05fQ0FVU0VcIl0gPSAxO1xuICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbMl0gPSBcIk9USEVSX0NBVVNFXCJdID0gMjtcbiAgICAgICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzNdID0gXCJURUNITklDQUxfUFJPQkxFTVwiXSA9IDM7XG4gICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFs0XSA9IFwiU1RSSUtFXCJdID0gNDtcbiAgICAgICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzVdID0gXCJERU1PTlNUUkFUSU9OXCJdID0gNTtcbiAgICAgICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzZdID0gXCJBQ0NJREVOVFwiXSA9IDY7XG4gICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFs3XSA9IFwiSE9MSURBWVwiXSA9IDc7XG4gICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFs4XSA9IFwiV0VBVEhFUlwiXSA9IDg7XG4gICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFs5XSA9IFwiTUFJTlRFTkFOQ0VcIl0gPSA5O1xuICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbMTBdID0gXCJDT05TVFJVQ1RJT05cIl0gPSAxMDtcbiAgICAgICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzExXSA9IFwiUE9MSUNFX0FDVElWSVRZXCJdID0gMTE7XG4gICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFsxMl0gPSBcIk1FRElDQUxfRU1FUkdFTkNZXCJdID0gMTI7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWVzO1xuICAgICAgICB9KSgpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFZmZlY3QgZW51bS5cbiAgICAgICAgICogQG5hbWUgdHJhbnNpdF9yZWFsdGltZS5BbGVydC5FZmZlY3RcbiAgICAgICAgICogQGVudW0ge251bWJlcn1cbiAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IE5PX1NFUlZJQ0U9MSBOT19TRVJWSUNFIHZhbHVlXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBSRURVQ0VEX1NFUlZJQ0U9MiBSRURVQ0VEX1NFUlZJQ0UgdmFsdWVcbiAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IFNJR05JRklDQU5UX0RFTEFZUz0zIFNJR05JRklDQU5UX0RFTEFZUyB2YWx1ZVxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gREVUT1VSPTQgREVUT1VSIHZhbHVlXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBBRERJVElPTkFMX1NFUlZJQ0U9NSBBRERJVElPTkFMX1NFUlZJQ0UgdmFsdWVcbiAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IE1PRElGSUVEX1NFUlZJQ0U9NiBNT0RJRklFRF9TRVJWSUNFIHZhbHVlXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBPVEhFUl9FRkZFQ1Q9NyBPVEhFUl9FRkZFQ1QgdmFsdWVcbiAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IFVOS05PV05fRUZGRUNUPTggVU5LTk9XTl9FRkZFQ1QgdmFsdWVcbiAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IFNUT1BfTU9WRUQ9OSBTVE9QX01PVkVEIHZhbHVlXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBOT19FRkZFQ1Q9MTAgTk9fRUZGRUNUIHZhbHVlXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBBQ0NFU1NJQklMSVRZX0lTU1VFPTExIEFDQ0VTU0lCSUxJVFlfSVNTVUUgdmFsdWVcbiAgICAgICAgICovXG4gICAgICAgIEFsZXJ0LkVmZmVjdCA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZXNCeUlkID0ge30sIHZhbHVlcyA9IE9iamVjdC5jcmVhdGUodmFsdWVzQnlJZCk7XG4gICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFsxXSA9IFwiTk9fU0VSVklDRVwiXSA9IDE7XG4gICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFsyXSA9IFwiUkVEVUNFRF9TRVJWSUNFXCJdID0gMjtcbiAgICAgICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzNdID0gXCJTSUdOSUZJQ0FOVF9ERUxBWVNcIl0gPSAzO1xuICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbNF0gPSBcIkRFVE9VUlwiXSA9IDQ7XG4gICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFs1XSA9IFwiQURESVRJT05BTF9TRVJWSUNFXCJdID0gNTtcbiAgICAgICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzZdID0gXCJNT0RJRklFRF9TRVJWSUNFXCJdID0gNjtcbiAgICAgICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzddID0gXCJPVEhFUl9FRkZFQ1RcIl0gPSA3O1xuICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbOF0gPSBcIlVOS05PV05fRUZGRUNUXCJdID0gODtcbiAgICAgICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzldID0gXCJTVE9QX01PVkVEXCJdID0gOTtcbiAgICAgICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzEwXSA9IFwiTk9fRUZGRUNUXCJdID0gMTA7XG4gICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFsxMV0gPSBcIkFDQ0VTU0lCSUxJVFlfSVNTVUVcIl0gPSAxMTtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZXM7XG4gICAgICAgIH0pKCk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldmVyaXR5TGV2ZWwgZW51bS5cbiAgICAgICAgICogQG5hbWUgdHJhbnNpdF9yZWFsdGltZS5BbGVydC5TZXZlcml0eUxldmVsXG4gICAgICAgICAqIEBlbnVtIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBVTktOT1dOX1NFVkVSSVRZPTEgVU5LTk9XTl9TRVZFUklUWSB2YWx1ZVxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gSU5GTz0yIElORk8gdmFsdWVcbiAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IFdBUk5JTkc9MyBXQVJOSU5HIHZhbHVlXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBTRVZFUkU9NCBTRVZFUkUgdmFsdWVcbiAgICAgICAgICovXG4gICAgICAgIEFsZXJ0LlNldmVyaXR5TGV2ZWwgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWVzQnlJZCA9IHt9LCB2YWx1ZXMgPSBPYmplY3QuY3JlYXRlKHZhbHVlc0J5SWQpO1xuICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbMV0gPSBcIlVOS05PV05fU0VWRVJJVFlcIl0gPSAxO1xuICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbMl0gPSBcIklORk9cIl0gPSAyO1xuICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbM10gPSBcIldBUk5JTkdcIl0gPSAzO1xuICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbNF0gPSBcIlNFVkVSRVwiXSA9IDQ7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWVzO1xuICAgICAgICB9KSgpO1xuXG4gICAgICAgIHJldHVybiBBbGVydDtcbiAgICB9KSgpO1xuXG4gICAgdHJhbnNpdF9yZWFsdGltZS5UaW1lUmFuZ2UgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBUaW1lUmFuZ2UuXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lXG4gICAgICAgICAqIEBpbnRlcmZhY2UgSVRpbWVSYW5nZVxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbc3RhcnRdIFRpbWVSYW5nZSBzdGFydFxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbZW5kXSBUaW1lUmFuZ2UgZW5kXG4gICAgICAgICAqL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFRpbWVSYW5nZS5cbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWVcbiAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgVGltZVJhbmdlLlxuICAgICAgICAgKiBAaW1wbGVtZW50cyBJVGltZVJhbmdlXG4gICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuSVRpbWVSYW5nZT19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gVGltZVJhbmdlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogVGltZVJhbmdlIHN0YXJ0LlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9IHN0YXJ0XG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRpbWVSYW5nZVxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIFRpbWVSYW5nZS5wcm90b3R5cGUuc3RhcnQgPSAkdXRpbC5Mb25nID8gJHV0aWwuTG9uZy5mcm9tQml0cygwLDAsdHJ1ZSkgOiAwO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaW1lUmFuZ2UgZW5kLlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9IGVuZFxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UaW1lUmFuZ2VcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBUaW1lUmFuZ2UucHJvdG90eXBlLmVuZCA9ICR1dGlsLkxvbmcgPyAkdXRpbC5Mb25nLmZyb21CaXRzKDAsMCx0cnVlKSA6IDA7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYSBuZXcgVGltZVJhbmdlIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGNyZWF0ZVxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UaW1lUmFuZ2VcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuSVRpbWVSYW5nZT19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgKiBAcmV0dXJucyB7dHJhbnNpdF9yZWFsdGltZS5UaW1lUmFuZ2V9IFRpbWVSYW5nZSBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgVGltZVJhbmdlLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFRpbWVSYW5nZShwcm9wZXJ0aWVzKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFRpbWVSYW5nZSBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayB0cmFuc2l0X3JlYWx0aW1lLlRpbWVSYW5nZS52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UaW1lUmFuZ2VcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuSVRpbWVSYW5nZX0gbWVzc2FnZSBUaW1lUmFuZ2UgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAqL1xuICAgICAgICBUaW1lUmFuZ2UuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnN0YXJ0ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJzdGFydFwiKSlcbiAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDAgPSovOCkudWludDY0KG1lc3NhZ2Uuc3RhcnQpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZW5kICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJlbmRcIikpXG4gICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAwID0qLzE2KS51aW50NjQobWVzc2FnZS5lbmQpO1xuICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFRpbWVSYW5nZSBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayB0cmFuc2l0X3JlYWx0aW1lLlRpbWVSYW5nZS52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZFxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UaW1lUmFuZ2VcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuSVRpbWVSYW5nZX0gbWVzc2FnZSBUaW1lUmFuZ2UgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAqL1xuICAgICAgICBUaW1lUmFuZ2UuZW5jb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikubGRlbGltKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlY29kZXMgYSBUaW1lUmFuZ2UgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UaW1lUmFuZ2VcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICogQHJldHVybnMge3RyYW5zaXRfcmVhbHRpbWUuVGltZVJhbmdlfSBUaW1lUmFuZ2VcbiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAqL1xuICAgICAgICBUaW1lUmFuZ2UuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoLCBlcnJvcikge1xuICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVGltZVJhbmdlKCk7XG4gICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgaWYgKHRhZyA9PT0gZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnN0YXJ0ID0gcmVhZGVyLnVpbnQ2NCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIDI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kID0gcmVhZGVyLnVpbnQ2NCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWNvZGVzIGEgVGltZVJhbmdlIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuXG4gICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWRcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVGltZVJhbmdlXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAqIEByZXR1cm5zIHt0cmFuc2l0X3JlYWx0aW1lLlRpbWVSYW5nZX0gVGltZVJhbmdlXG4gICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgKi9cbiAgICAgICAgVGltZVJhbmdlLmRlY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZChyZWFkZXIpIHtcbiAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgIHJlYWRlciA9IG5ldyAkUmVhZGVyKHJlYWRlcik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBWZXJpZmllcyBhIFRpbWVSYW5nZSBtZXNzYWdlLlxuICAgICAgICAgKiBAZnVuY3Rpb24gdmVyaWZ5XG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRpbWVSYW5nZVxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeVxuICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9IGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdFxuICAgICAgICAgKi9cbiAgICAgICAgVGltZVJhbmdlLnZlcmlmeSA9IGZ1bmN0aW9uIHZlcmlmeShtZXNzYWdlKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgIT09IFwib2JqZWN0XCIgfHwgbWVzc2FnZSA9PT0gbnVsbClcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJvYmplY3QgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnN0YXJ0ICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInN0YXJ0XCIpKVxuICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2Uuc3RhcnQpICYmICEobWVzc2FnZS5zdGFydCAmJiAkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5zdGFydC5sb3cpICYmICR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLnN0YXJ0LmhpZ2gpKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwic3RhcnQ6IGludGVnZXJ8TG9uZyBleHBlY3RlZFwiO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZW5kICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImVuZFwiKSlcbiAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLmVuZCkgJiYgIShtZXNzYWdlLmVuZCAmJiAkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5lbmQubG93KSAmJiAkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5lbmQuaGlnaCkpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJlbmQ6IGludGVnZXJ8TG9uZyBleHBlY3RlZFwiO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYSBUaW1lUmFuZ2UgbWVzc2FnZSBmcm9tIGEgcGxhaW4gb2JqZWN0LiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byB0aGVpciByZXNwZWN0aXZlIGludGVybmFsIHR5cGVzLlxuICAgICAgICAgKiBAZnVuY3Rpb24gZnJvbU9iamVjdFxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UaW1lUmFuZ2VcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBvYmplY3QgUGxhaW4gb2JqZWN0XG4gICAgICAgICAqIEByZXR1cm5zIHt0cmFuc2l0X3JlYWx0aW1lLlRpbWVSYW5nZX0gVGltZVJhbmdlXG4gICAgICAgICAqL1xuICAgICAgICBUaW1lUmFuZ2UuZnJvbU9iamVjdCA9IGZ1bmN0aW9uIGZyb21PYmplY3Qob2JqZWN0KSB7XG4gICAgICAgICAgICBpZiAob2JqZWN0IGluc3RhbmNlb2YgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UaW1lUmFuZ2UpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICAgICAgICAgIHZhciBtZXNzYWdlID0gbmV3ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVGltZVJhbmdlKCk7XG4gICAgICAgICAgICBpZiAob2JqZWN0LnN0YXJ0ICE9IG51bGwpXG4gICAgICAgICAgICAgICAgaWYgKCR1dGlsLkxvbmcpXG4gICAgICAgICAgICAgICAgICAgIChtZXNzYWdlLnN0YXJ0ID0gJHV0aWwuTG9uZy5mcm9tVmFsdWUob2JqZWN0LnN0YXJ0KSkudW5zaWduZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBvYmplY3Quc3RhcnQgPT09IFwic3RyaW5nXCIpXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3RhcnQgPSBwYXJzZUludChvYmplY3Quc3RhcnQsIDEwKTtcbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2Ygb2JqZWN0LnN0YXJ0ID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnN0YXJ0ID0gb2JqZWN0LnN0YXJ0O1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBvYmplY3Quc3RhcnQgPT09IFwib2JqZWN0XCIpXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3RhcnQgPSBuZXcgJHV0aWwuTG9uZ0JpdHMob2JqZWN0LnN0YXJ0LmxvdyA+Pj4gMCwgb2JqZWN0LnN0YXJ0LmhpZ2ggPj4+IDApLnRvTnVtYmVyKHRydWUpO1xuICAgICAgICAgICAgaWYgKG9iamVjdC5lbmQgIT0gbnVsbClcbiAgICAgICAgICAgICAgICBpZiAoJHV0aWwuTG9uZylcbiAgICAgICAgICAgICAgICAgICAgKG1lc3NhZ2UuZW5kID0gJHV0aWwuTG9uZy5mcm9tVmFsdWUob2JqZWN0LmVuZCkpLnVuc2lnbmVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2Ygb2JqZWN0LmVuZCA9PT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmQgPSBwYXJzZUludChvYmplY3QuZW5kLCAxMCk7XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIG9iamVjdC5lbmQgPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5kID0gb2JqZWN0LmVuZDtcbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2Ygb2JqZWN0LmVuZCA9PT0gXCJvYmplY3RcIilcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmQgPSBuZXcgJHV0aWwuTG9uZ0JpdHMob2JqZWN0LmVuZC5sb3cgPj4+IDAsIG9iamVjdC5lbmQuaGlnaCA+Pj4gMCkudG9OdW1iZXIodHJ1ZSk7XG4gICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgVGltZVJhbmdlIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC5cbiAgICAgICAgICogQGZ1bmN0aW9uIHRvT2JqZWN0XG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRpbWVSYW5nZVxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7dHJhbnNpdF9yZWFsdGltZS5UaW1lUmFuZ2V9IG1lc3NhZ2UgVGltZVJhbmdlXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9uc30gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9uc1xuICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxuICAgICAgICAgKi9cbiAgICAgICAgVGltZVJhbmdlLnRvT2JqZWN0ID0gZnVuY3Rpb24gdG9PYmplY3QobWVzc2FnZSwgb3B0aW9ucykge1xuICAgICAgICAgICAgaWYgKCFvcHRpb25zKVxuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgICAgIHZhciBvYmplY3QgPSB7fTtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmRlZmF1bHRzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCR1dGlsLkxvbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxvbmcgPSBuZXcgJHV0aWwuTG9uZygwLCAwLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnN0YXJ0ID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gbG9uZy50b1N0cmluZygpIDogb3B0aW9ucy5sb25ncyA9PT0gTnVtYmVyID8gbG9uZy50b051bWJlcigpIDogbG9uZztcbiAgICAgICAgICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnN0YXJ0ID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gXCIwXCIgOiAwO1xuICAgICAgICAgICAgICAgIGlmICgkdXRpbC5Mb25nKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsb25nID0gbmV3ICR1dGlsLkxvbmcoMCwgMCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5lbmQgPSBvcHRpb25zLmxvbmdzID09PSBTdHJpbmcgPyBsb25nLnRvU3RyaW5nKCkgOiBvcHRpb25zLmxvbmdzID09PSBOdW1iZXIgPyBsb25nLnRvTnVtYmVyKCkgOiBsb25nO1xuICAgICAgICAgICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgICAgICAgICBvYmplY3QuZW5kID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gXCIwXCIgOiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc3RhcnQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwic3RhcnRcIikpXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlLnN0YXJ0ID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3Quc3RhcnQgPSBvcHRpb25zLmxvbmdzID09PSBTdHJpbmcgPyBTdHJpbmcobWVzc2FnZS5zdGFydCkgOiBtZXNzYWdlLnN0YXJ0O1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnN0YXJ0ID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gJHV0aWwuTG9uZy5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChtZXNzYWdlLnN0YXJ0KSA6IG9wdGlvbnMubG9uZ3MgPT09IE51bWJlciA/IG5ldyAkdXRpbC5Mb25nQml0cyhtZXNzYWdlLnN0YXJ0LmxvdyA+Pj4gMCwgbWVzc2FnZS5zdGFydC5oaWdoID4+PiAwKS50b051bWJlcih0cnVlKSA6IG1lc3NhZ2Uuc3RhcnQ7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5lbmQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiZW5kXCIpKVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZS5lbmQgPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5lbmQgPSBvcHRpb25zLmxvbmdzID09PSBTdHJpbmcgPyBTdHJpbmcobWVzc2FnZS5lbmQpIDogbWVzc2FnZS5lbmQ7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBvYmplY3QuZW5kID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gJHV0aWwuTG9uZy5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChtZXNzYWdlLmVuZCkgOiBvcHRpb25zLmxvbmdzID09PSBOdW1iZXIgPyBuZXcgJHV0aWwuTG9uZ0JpdHMobWVzc2FnZS5lbmQubG93ID4+PiAwLCBtZXNzYWdlLmVuZC5oaWdoID4+PiAwKS50b051bWJlcih0cnVlKSA6IG1lc3NhZ2UuZW5kO1xuICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ29udmVydHMgdGhpcyBUaW1lUmFuZ2UgdG8gSlNPTi5cbiAgICAgICAgICogQGZ1bmN0aW9uIHRvSlNPTlxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UaW1lUmFuZ2VcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcbiAgICAgICAgICovXG4gICAgICAgIFRpbWVSYW5nZS5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcywgJHByb3RvYnVmLnV0aWwudG9KU09OT3B0aW9ucyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdldHMgdGhlIGRlZmF1bHQgdHlwZSB1cmwgZm9yIFRpbWVSYW5nZVxuICAgICAgICAgKiBAZnVuY3Rpb24gZ2V0VHlwZVVybFxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UaW1lUmFuZ2VcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3R5cGVVcmxQcmVmaXhdIHlvdXIgY3VzdG9tIHR5cGVVcmxQcmVmaXgoZGVmYXVsdCBcInR5cGUuZ29vZ2xlYXBpcy5jb21cIilcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ30gVGhlIGRlZmF1bHQgdHlwZSB1cmxcbiAgICAgICAgICovXG4gICAgICAgIFRpbWVSYW5nZS5nZXRUeXBlVXJsID0gZnVuY3Rpb24gZ2V0VHlwZVVybCh0eXBlVXJsUHJlZml4KSB7XG4gICAgICAgICAgICBpZiAodHlwZVVybFByZWZpeCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdHlwZVVybFByZWZpeCA9IFwidHlwZS5nb29nbGVhcGlzLmNvbVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHR5cGVVcmxQcmVmaXggKyBcIi90cmFuc2l0X3JlYWx0aW1lLlRpbWVSYW5nZVwiO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBUaW1lUmFuZ2U7XG4gICAgfSkoKTtcblxuICAgIHRyYW5zaXRfcmVhbHRpbWUuUG9zaXRpb24gPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBQb3NpdGlvbi5cbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWVcbiAgICAgICAgICogQGludGVyZmFjZSBJUG9zaXRpb25cbiAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IGxhdGl0dWRlIFBvc2l0aW9uIGxhdGl0dWRlXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBsb25naXR1ZGUgUG9zaXRpb24gbG9uZ2l0dWRlXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfG51bGx9IFtiZWFyaW5nXSBQb3NpdGlvbiBiZWFyaW5nXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfG51bGx9IFtvZG9tZXRlcl0gUG9zaXRpb24gb2RvbWV0ZXJcbiAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ8bnVsbH0gW3NwZWVkXSBQb3NpdGlvbiBzcGVlZFxuICAgICAgICAgKi9cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBQb3NpdGlvbi5cbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWVcbiAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgUG9zaXRpb24uXG4gICAgICAgICAqIEBpbXBsZW1lbnRzIElQb3NpdGlvblxuICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICogQHBhcmFtIHt0cmFuc2l0X3JlYWx0aW1lLklQb3NpdGlvbj19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gUG9zaXRpb24ocHJvcGVydGllcykge1xuICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQb3NpdGlvbiBsYXRpdHVkZS5cbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfSBsYXRpdHVkZVxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5Qb3NpdGlvblxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIFBvc2l0aW9uLnByb3RvdHlwZS5sYXRpdHVkZSA9IDA7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFBvc2l0aW9uIGxvbmdpdHVkZS5cbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfSBsb25naXR1ZGVcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuUG9zaXRpb25cbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBQb3NpdGlvbi5wcm90b3R5cGUubG9uZ2l0dWRlID0gMDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUG9zaXRpb24gYmVhcmluZy5cbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfSBiZWFyaW5nXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlBvc2l0aW9uXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgUG9zaXRpb24ucHJvdG90eXBlLmJlYXJpbmcgPSAwO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQb3NpdGlvbiBvZG9tZXRlci5cbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfSBvZG9tZXRlclxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5Qb3NpdGlvblxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIFBvc2l0aW9uLnByb3RvdHlwZS5vZG9tZXRlciA9IDA7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFBvc2l0aW9uIHNwZWVkLlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9IHNwZWVkXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlBvc2l0aW9uXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgUG9zaXRpb24ucHJvdG90eXBlLnNwZWVkID0gMDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBQb3NpdGlvbiBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuXG4gICAgICAgICAqIEBmdW5jdGlvbiBjcmVhdGVcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuUG9zaXRpb25cbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuSVBvc2l0aW9uPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAqIEByZXR1cm5zIHt0cmFuc2l0X3JlYWx0aW1lLlBvc2l0aW9ufSBQb3NpdGlvbiBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgUG9zaXRpb24uY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUG9zaXRpb24ocHJvcGVydGllcyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBQb3NpdGlvbiBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayB0cmFuc2l0X3JlYWx0aW1lLlBvc2l0aW9uLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlBvc2l0aW9uXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHt0cmFuc2l0X3JlYWx0aW1lLklQb3NpdGlvbn0gbWVzc2FnZSBQb3NpdGlvbiBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICovXG4gICAgICAgIFBvc2l0aW9uLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDUgPSovMTMpLmZsb2F0KG1lc3NhZ2UubGF0aXR1ZGUpO1xuICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSA1ID0qLzIxKS5mbG9hdChtZXNzYWdlLmxvbmdpdHVkZSk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5iZWFyaW5nICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJiZWFyaW5nXCIpKVxuICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMywgd2lyZVR5cGUgNSA9Ki8yOSkuZmxvYXQobWVzc2FnZS5iZWFyaW5nKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLm9kb21ldGVyICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJvZG9tZXRlclwiKSlcbiAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDQsIHdpcmVUeXBlIDEgPSovMzMpLmRvdWJsZShtZXNzYWdlLm9kb21ldGVyKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnNwZWVkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJzcGVlZFwiKSlcbiAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDUsIHdpcmVUeXBlIDUgPSovNDUpLmZsb2F0KG1lc3NhZ2Uuc3BlZWQpO1xuICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFBvc2l0aW9uIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIHRyYW5zaXRfcmVhbHRpbWUuUG9zaXRpb24udmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuUG9zaXRpb25cbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuSVBvc2l0aW9ufSBtZXNzYWdlIFBvc2l0aW9uIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgKi9cbiAgICAgICAgUG9zaXRpb24uZW5jb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikubGRlbGltKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlY29kZXMgYSBQb3NpdGlvbiBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlBvc2l0aW9uXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAqIEByZXR1cm5zIHt0cmFuc2l0X3JlYWx0aW1lLlBvc2l0aW9ufSBQb3NpdGlvblxuICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICovXG4gICAgICAgIFBvc2l0aW9uLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCwgZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlBvc2l0aW9uKCk7XG4gICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgaWYgKHRhZyA9PT0gZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmxhdGl0dWRlID0gcmVhZGVyLmZsb2F0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgMjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5sb25naXR1ZGUgPSByZWFkZXIuZmxvYXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmJlYXJpbmcgPSByZWFkZXIuZmxvYXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSA0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm9kb21ldGVyID0gcmVhZGVyLmRvdWJsZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIDU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3BlZWQgPSByZWFkZXIuZmxvYXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIW1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJsYXRpdHVkZVwiKSlcbiAgICAgICAgICAgICAgICB0aHJvdyAkdXRpbC5Qcm90b2NvbEVycm9yKFwibWlzc2luZyByZXF1aXJlZCAnbGF0aXR1ZGUnXCIsIHsgaW5zdGFuY2U6IG1lc3NhZ2UgfSk7XG4gICAgICAgICAgICBpZiAoIW1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJsb25naXR1ZGVcIikpXG4gICAgICAgICAgICAgICAgdGhyb3cgJHV0aWwuUHJvdG9jb2xFcnJvcihcIm1pc3NpbmcgcmVxdWlyZWQgJ2xvbmdpdHVkZSdcIiwgeyBpbnN0YW5jZTogbWVzc2FnZSB9KTtcbiAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWNvZGVzIGEgUG9zaXRpb24gbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC5cbiAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZFxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5Qb3NpdGlvblxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgKiBAcmV0dXJucyB7dHJhbnNpdF9yZWFsdGltZS5Qb3NpdGlvbn0gUG9zaXRpb25cbiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAqL1xuICAgICAgICBQb3NpdGlvbi5kZWNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyKSB7XG4gICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICByZWFkZXIgPSBuZXcgJFJlYWRlcihyZWFkZXIpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVmVyaWZpZXMgYSBQb3NpdGlvbiBtZXNzYWdlLlxuICAgICAgICAgKiBAZnVuY3Rpb24gdmVyaWZ5XG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlBvc2l0aW9uXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5XG4gICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH0gYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90XG4gICAgICAgICAqL1xuICAgICAgICBQb3NpdGlvbi52ZXJpZnkgPSBmdW5jdGlvbiB2ZXJpZnkobWVzc2FnZSkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwib2JqZWN0IGV4cGVjdGVkXCI7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UubGF0aXR1ZGUgIT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwibGF0aXR1ZGU6IG51bWJlciBleHBlY3RlZFwiO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlLmxvbmdpdHVkZSAhPT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJsb25naXR1ZGU6IG51bWJlciBleHBlY3RlZFwiO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuYmVhcmluZyAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJiZWFyaW5nXCIpKVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZS5iZWFyaW5nICE9PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJiZWFyaW5nOiBudW1iZXIgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLm9kb21ldGVyICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcIm9kb21ldGVyXCIpKVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZS5vZG9tZXRlciAhPT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwib2RvbWV0ZXI6IG51bWJlciBleHBlY3RlZFwiO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc3BlZWQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwic3BlZWRcIikpXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlLnNwZWVkICE9PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJzcGVlZDogbnVtYmVyIGV4cGVjdGVkXCI7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlcyBhIFBvc2l0aW9uIG1lc3NhZ2UgZnJvbSBhIHBsYWluIG9iamVjdC4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBpbnRlcm5hbCB0eXBlcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGZyb21PYmplY3RcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuUG9zaXRpb25cbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBvYmplY3QgUGxhaW4gb2JqZWN0XG4gICAgICAgICAqIEByZXR1cm5zIHt0cmFuc2l0X3JlYWx0aW1lLlBvc2l0aW9ufSBQb3NpdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgUG9zaXRpb24uZnJvbU9iamVjdCA9IGZ1bmN0aW9uIGZyb21PYmplY3Qob2JqZWN0KSB7XG4gICAgICAgICAgICBpZiAob2JqZWN0IGluc3RhbmNlb2YgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5Qb3NpdGlvbilcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBuZXcgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5Qb3NpdGlvbigpO1xuICAgICAgICAgICAgaWYgKG9iamVjdC5sYXRpdHVkZSAhPSBudWxsKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UubGF0aXR1ZGUgPSBOdW1iZXIob2JqZWN0LmxhdGl0dWRlKTtcbiAgICAgICAgICAgIGlmIChvYmplY3QubG9uZ2l0dWRlICE9IG51bGwpXG4gICAgICAgICAgICAgICAgbWVzc2FnZS5sb25naXR1ZGUgPSBOdW1iZXIob2JqZWN0LmxvbmdpdHVkZSk7XG4gICAgICAgICAgICBpZiAob2JqZWN0LmJlYXJpbmcgIT0gbnVsbClcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmJlYXJpbmcgPSBOdW1iZXIob2JqZWN0LmJlYXJpbmcpO1xuICAgICAgICAgICAgaWYgKG9iamVjdC5vZG9tZXRlciAhPSBudWxsKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2Uub2RvbWV0ZXIgPSBOdW1iZXIob2JqZWN0Lm9kb21ldGVyKTtcbiAgICAgICAgICAgIGlmIChvYmplY3Quc3BlZWQgIT0gbnVsbClcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnNwZWVkID0gTnVtYmVyKG9iamVjdC5zcGVlZCk7XG4gICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgUG9zaXRpb24gbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLlxuICAgICAgICAgKiBAZnVuY3Rpb24gdG9PYmplY3RcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuUG9zaXRpb25cbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuUG9zaXRpb259IG1lc3NhZ2UgUG9zaXRpb25cbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuSUNvbnZlcnNpb25PcHRpb25zfSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zXG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gUGxhaW4gb2JqZWN0XG4gICAgICAgICAqL1xuICAgICAgICBQb3NpdGlvbi50b09iamVjdCA9IGZ1bmN0aW9uIHRvT2JqZWN0KG1lc3NhZ2UsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIGlmICghb3B0aW9ucylcbiAgICAgICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgICAgICB2YXIgb2JqZWN0ID0ge307XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5kZWZhdWx0cykge1xuICAgICAgICAgICAgICAgIG9iamVjdC5sYXRpdHVkZSA9IDA7XG4gICAgICAgICAgICAgICAgb2JqZWN0LmxvbmdpdHVkZSA9IDA7XG4gICAgICAgICAgICAgICAgb2JqZWN0LmJlYXJpbmcgPSAwO1xuICAgICAgICAgICAgICAgIG9iamVjdC5vZG9tZXRlciA9IDA7XG4gICAgICAgICAgICAgICAgb2JqZWN0LnNwZWVkID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmxhdGl0dWRlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImxhdGl0dWRlXCIpKVxuICAgICAgICAgICAgICAgIG9iamVjdC5sYXRpdHVkZSA9IG9wdGlvbnMuanNvbiAmJiAhaXNGaW5pdGUobWVzc2FnZS5sYXRpdHVkZSkgPyBTdHJpbmcobWVzc2FnZS5sYXRpdHVkZSkgOiBtZXNzYWdlLmxhdGl0dWRlO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UubG9uZ2l0dWRlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImxvbmdpdHVkZVwiKSlcbiAgICAgICAgICAgICAgICBvYmplY3QubG9uZ2l0dWRlID0gb3B0aW9ucy5qc29uICYmICFpc0Zpbml0ZShtZXNzYWdlLmxvbmdpdHVkZSkgPyBTdHJpbmcobWVzc2FnZS5sb25naXR1ZGUpIDogbWVzc2FnZS5sb25naXR1ZGU7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5iZWFyaW5nICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImJlYXJpbmdcIikpXG4gICAgICAgICAgICAgICAgb2JqZWN0LmJlYXJpbmcgPSBvcHRpb25zLmpzb24gJiYgIWlzRmluaXRlKG1lc3NhZ2UuYmVhcmluZykgPyBTdHJpbmcobWVzc2FnZS5iZWFyaW5nKSA6IG1lc3NhZ2UuYmVhcmluZztcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLm9kb21ldGVyICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcIm9kb21ldGVyXCIpKVxuICAgICAgICAgICAgICAgIG9iamVjdC5vZG9tZXRlciA9IG9wdGlvbnMuanNvbiAmJiAhaXNGaW5pdGUobWVzc2FnZS5vZG9tZXRlcikgPyBTdHJpbmcobWVzc2FnZS5vZG9tZXRlcikgOiBtZXNzYWdlLm9kb21ldGVyO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc3BlZWQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwic3BlZWRcIikpXG4gICAgICAgICAgICAgICAgb2JqZWN0LnNwZWVkID0gb3B0aW9ucy5qc29uICYmICFpc0Zpbml0ZShtZXNzYWdlLnNwZWVkKSA/IFN0cmluZyhtZXNzYWdlLnNwZWVkKSA6IG1lc3NhZ2Uuc3BlZWQ7XG4gICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIFBvc2l0aW9uIHRvIEpTT04uXG4gICAgICAgICAqIEBmdW5jdGlvbiB0b0pTT05cbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuUG9zaXRpb25cbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcbiAgICAgICAgICovXG4gICAgICAgIFBvc2l0aW9uLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogR2V0cyB0aGUgZGVmYXVsdCB0eXBlIHVybCBmb3IgUG9zaXRpb25cbiAgICAgICAgICogQGZ1bmN0aW9uIGdldFR5cGVVcmxcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuUG9zaXRpb25cbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3R5cGVVcmxQcmVmaXhdIHlvdXIgY3VzdG9tIHR5cGVVcmxQcmVmaXgoZGVmYXVsdCBcInR5cGUuZ29vZ2xlYXBpcy5jb21cIilcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ30gVGhlIGRlZmF1bHQgdHlwZSB1cmxcbiAgICAgICAgICovXG4gICAgICAgIFBvc2l0aW9uLmdldFR5cGVVcmwgPSBmdW5jdGlvbiBnZXRUeXBlVXJsKHR5cGVVcmxQcmVmaXgpIHtcbiAgICAgICAgICAgIGlmICh0eXBlVXJsUHJlZml4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0eXBlVXJsUHJlZml4ID0gXCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHlwZVVybFByZWZpeCArIFwiL3RyYW5zaXRfcmVhbHRpbWUuUG9zaXRpb25cIjtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gUG9zaXRpb247XG4gICAgfSkoKTtcblxuICAgIHRyYW5zaXRfcmVhbHRpbWUuVHJpcERlc2NyaXB0b3IgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBUcmlwRGVzY3JpcHRvci5cbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWVcbiAgICAgICAgICogQGludGVyZmFjZSBJVHJpcERlc2NyaXB0b3JcbiAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW3RyaXBfaWRdIFRyaXBEZXNjcmlwdG9yIHRyaXBfaWRcbiAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW3JvdXRlX2lkXSBUcmlwRGVzY3JpcHRvciByb3V0ZV9pZFxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbZGlyZWN0aW9uX2lkXSBUcmlwRGVzY3JpcHRvciBkaXJlY3Rpb25faWRcbiAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW3N0YXJ0X3RpbWVdIFRyaXBEZXNjcmlwdG9yIHN0YXJ0X3RpbWVcbiAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW3N0YXJ0X2RhdGVdIFRyaXBEZXNjcmlwdG9yIHN0YXJ0X2RhdGVcbiAgICAgICAgICogQHByb3BlcnR5IHt0cmFuc2l0X3JlYWx0aW1lLlRyaXBEZXNjcmlwdG9yLlNjaGVkdWxlUmVsYXRpb25zaGlwfG51bGx9IFtzY2hlZHVsZV9yZWxhdGlvbnNoaXBdIFRyaXBEZXNjcmlwdG9yIHNjaGVkdWxlX3JlbGF0aW9uc2hpcFxuICAgICAgICAgKiBAcHJvcGVydHkge3RyYW5zaXRfcmVhbHRpbWUuVHJpcERlc2NyaXB0b3IuSU1vZGlmaWVkVHJpcFNlbGVjdG9yfG51bGx9IFttb2RpZmllZF90cmlwXSBUcmlwRGVzY3JpcHRvciBtb2RpZmllZF90cmlwXG4gICAgICAgICAqL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFRyaXBEZXNjcmlwdG9yLlxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZVxuICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBUcmlwRGVzY3JpcHRvci5cbiAgICAgICAgICogQGltcGxlbWVudHMgSVRyaXBEZXNjcmlwdG9yXG4gICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuSVRyaXBEZXNjcmlwdG9yPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBUcmlwRGVzY3JpcHRvcihwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICBpZiAocHJvcGVydGllcylcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNba2V5c1tpXV0gPSBwcm9wZXJ0aWVzW2tleXNbaV1dO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRyaXBEZXNjcmlwdG9yIHRyaXBfaWQuXG4gICAgICAgICAqIEBtZW1iZXIge3N0cmluZ30gdHJpcF9pZFxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwRGVzY3JpcHRvclxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIFRyaXBEZXNjcmlwdG9yLnByb3RvdHlwZS50cmlwX2lkID0gXCJcIjtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVHJpcERlc2NyaXB0b3Igcm91dGVfaWQuXG4gICAgICAgICAqIEBtZW1iZXIge3N0cmluZ30gcm91dGVfaWRcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcERlc2NyaXB0b3JcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBUcmlwRGVzY3JpcHRvci5wcm90b3R5cGUucm91dGVfaWQgPSBcIlwiO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUcmlwRGVzY3JpcHRvciBkaXJlY3Rpb25faWQuXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn0gZGlyZWN0aW9uX2lkXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBEZXNjcmlwdG9yXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgVHJpcERlc2NyaXB0b3IucHJvdG90eXBlLmRpcmVjdGlvbl9pZCA9IDA7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRyaXBEZXNjcmlwdG9yIHN0YXJ0X3RpbWUuXG4gICAgICAgICAqIEBtZW1iZXIge3N0cmluZ30gc3RhcnRfdGltZVxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwRGVzY3JpcHRvclxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIFRyaXBEZXNjcmlwdG9yLnByb3RvdHlwZS5zdGFydF90aW1lID0gXCJcIjtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVHJpcERlc2NyaXB0b3Igc3RhcnRfZGF0ZS5cbiAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfSBzdGFydF9kYXRlXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBEZXNjcmlwdG9yXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgVHJpcERlc2NyaXB0b3IucHJvdG90eXBlLnN0YXJ0X2RhdGUgPSBcIlwiO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUcmlwRGVzY3JpcHRvciBzY2hlZHVsZV9yZWxhdGlvbnNoaXAuXG4gICAgICAgICAqIEBtZW1iZXIge3RyYW5zaXRfcmVhbHRpbWUuVHJpcERlc2NyaXB0b3IuU2NoZWR1bGVSZWxhdGlvbnNoaXB9IHNjaGVkdWxlX3JlbGF0aW9uc2hpcFxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwRGVzY3JpcHRvclxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIFRyaXBEZXNjcmlwdG9yLnByb3RvdHlwZS5zY2hlZHVsZV9yZWxhdGlvbnNoaXAgPSAwO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUcmlwRGVzY3JpcHRvciBtb2RpZmllZF90cmlwLlxuICAgICAgICAgKiBAbWVtYmVyIHt0cmFuc2l0X3JlYWx0aW1lLlRyaXBEZXNjcmlwdG9yLklNb2RpZmllZFRyaXBTZWxlY3RvcnxudWxsfHVuZGVmaW5lZH0gbW9kaWZpZWRfdHJpcFxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwRGVzY3JpcHRvclxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIFRyaXBEZXNjcmlwdG9yLnByb3RvdHlwZS5tb2RpZmllZF90cmlwID0gbnVsbDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBUcmlwRGVzY3JpcHRvciBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuXG4gICAgICAgICAqIEBmdW5jdGlvbiBjcmVhdGVcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcERlc2NyaXB0b3JcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuSVRyaXBEZXNjcmlwdG9yPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAqIEByZXR1cm5zIHt0cmFuc2l0X3JlYWx0aW1lLlRyaXBEZXNjcmlwdG9yfSBUcmlwRGVzY3JpcHRvciBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgVHJpcERlc2NyaXB0b3IuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVHJpcERlc2NyaXB0b3IocHJvcGVydGllcyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBUcmlwRGVzY3JpcHRvciBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayB0cmFuc2l0X3JlYWx0aW1lLlRyaXBEZXNjcmlwdG9yLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBEZXNjcmlwdG9yXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHt0cmFuc2l0X3JlYWx0aW1lLklUcmlwRGVzY3JpcHRvcn0gbWVzc2FnZSBUcmlwRGVzY3JpcHRvciBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICovXG4gICAgICAgIFRyaXBEZXNjcmlwdG9yLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS50cmlwX2lkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJ0cmlwX2lkXCIpKVxuICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuc3RyaW5nKG1lc3NhZ2UudHJpcF9pZCk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5zdGFydF90aW1lICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJzdGFydF90aW1lXCIpKVxuICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMiA9Ki8xOCkuc3RyaW5nKG1lc3NhZ2Uuc3RhcnRfdGltZSk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5zdGFydF9kYXRlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJzdGFydF9kYXRlXCIpKVxuICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMywgd2lyZVR5cGUgMiA9Ki8yNikuc3RyaW5nKG1lc3NhZ2Uuc3RhcnRfZGF0ZSk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5zY2hlZHVsZV9yZWxhdGlvbnNoaXAgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInNjaGVkdWxlX3JlbGF0aW9uc2hpcFwiKSlcbiAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDQsIHdpcmVUeXBlIDAgPSovMzIpLmludDMyKG1lc3NhZ2Uuc2NoZWR1bGVfcmVsYXRpb25zaGlwKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnJvdXRlX2lkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJyb3V0ZV9pZFwiKSlcbiAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDUsIHdpcmVUeXBlIDIgPSovNDIpLnN0cmluZyhtZXNzYWdlLnJvdXRlX2lkKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmRpcmVjdGlvbl9pZCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiZGlyZWN0aW9uX2lkXCIpKVxuICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgNiwgd2lyZVR5cGUgMCA9Ki80OCkudWludDMyKG1lc3NhZ2UuZGlyZWN0aW9uX2lkKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLm1vZGlmaWVkX3RyaXAgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcIm1vZGlmaWVkX3RyaXBcIikpXG4gICAgICAgICAgICAgICAgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmlwRGVzY3JpcHRvci5Nb2RpZmllZFRyaXBTZWxlY3Rvci5lbmNvZGUobWVzc2FnZS5tb2RpZmllZF90cmlwLCB3cml0ZXIudWludDMyKC8qIGlkIDcsIHdpcmVUeXBlIDIgPSovNTgpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgVHJpcERlc2NyaXB0b3IgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgdHJhbnNpdF9yZWFsdGltZS5UcmlwRGVzY3JpcHRvci52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZFxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwRGVzY3JpcHRvclxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7dHJhbnNpdF9yZWFsdGltZS5JVHJpcERlc2NyaXB0b3J9IG1lc3NhZ2UgVHJpcERlc2NyaXB0b3IgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAqL1xuICAgICAgICBUcmlwRGVzY3JpcHRvci5lbmNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGUobWVzc2FnZSwgd3JpdGVyKS5sZGVsaW0oKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRGVjb2RlcyBhIFRyaXBEZXNjcmlwdG9yIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcERlc2NyaXB0b3JcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICogQHJldHVybnMge3RyYW5zaXRfcmVhbHRpbWUuVHJpcERlc2NyaXB0b3J9IFRyaXBEZXNjcmlwdG9yXG4gICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgKi9cbiAgICAgICAgVHJpcERlc2NyaXB0b3IuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoLCBlcnJvcikge1xuICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJpcERlc2NyaXB0b3IoKTtcbiAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICBpZiAodGFnID09PSBlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudHJpcF9pZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSA1OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJvdXRlX2lkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIDY6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZGlyZWN0aW9uX2lkID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIDI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3RhcnRfdGltZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnN0YXJ0X2RhdGUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgNDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zY2hlZHVsZV9yZWxhdGlvbnNoaXAgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSA3OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm1vZGlmaWVkX3RyaXAgPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyaXBEZXNjcmlwdG9yLk1vZGlmaWVkVHJpcFNlbGVjdG9yLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlY29kZXMgYSBUcmlwRGVzY3JpcHRvciBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLlxuICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBEZXNjcmlwdG9yXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAqIEByZXR1cm5zIHt0cmFuc2l0X3JlYWx0aW1lLlRyaXBEZXNjcmlwdG9yfSBUcmlwRGVzY3JpcHRvclxuICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICovXG4gICAgICAgIFRyaXBEZXNjcmlwdG9yLmRlY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZChyZWFkZXIpIHtcbiAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgIHJlYWRlciA9IG5ldyAkUmVhZGVyKHJlYWRlcik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBWZXJpZmllcyBhIFRyaXBEZXNjcmlwdG9yIG1lc3NhZ2UuXG4gICAgICAgICAqIEBmdW5jdGlvbiB2ZXJpZnlcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcERlc2NyaXB0b3JcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnlcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfSBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3RcbiAgICAgICAgICovXG4gICAgICAgIFRyaXBEZXNjcmlwdG9yLnZlcmlmeSA9IGZ1bmN0aW9uIHZlcmlmeShtZXNzYWdlKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgIT09IFwib2JqZWN0XCIgfHwgbWVzc2FnZSA9PT0gbnVsbClcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJvYmplY3QgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnRyaXBfaWQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwidHJpcF9pZFwiKSlcbiAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzU3RyaW5nKG1lc3NhZ2UudHJpcF9pZCkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcInRyaXBfaWQ6IHN0cmluZyBleHBlY3RlZFwiO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uucm91dGVfaWQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicm91dGVfaWRcIikpXG4gICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc1N0cmluZyhtZXNzYWdlLnJvdXRlX2lkKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwicm91dGVfaWQ6IHN0cmluZyBleHBlY3RlZFwiO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZGlyZWN0aW9uX2lkICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImRpcmVjdGlvbl9pZFwiKSlcbiAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLmRpcmVjdGlvbl9pZCkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImRpcmVjdGlvbl9pZDogaW50ZWdlciBleHBlY3RlZFwiO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc3RhcnRfdGltZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzdGFydF90aW1lXCIpKVxuICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNTdHJpbmcobWVzc2FnZS5zdGFydF90aW1lKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwic3RhcnRfdGltZTogc3RyaW5nIGV4cGVjdGVkXCI7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5zdGFydF9kYXRlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInN0YXJ0X2RhdGVcIikpXG4gICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc1N0cmluZyhtZXNzYWdlLnN0YXJ0X2RhdGUpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJzdGFydF9kYXRlOiBzdHJpbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnNjaGVkdWxlX3JlbGF0aW9uc2hpcCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzY2hlZHVsZV9yZWxhdGlvbnNoaXBcIikpXG4gICAgICAgICAgICAgICAgc3dpdGNoIChtZXNzYWdlLnNjaGVkdWxlX3JlbGF0aW9uc2hpcCkge1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcInNjaGVkdWxlX3JlbGF0aW9uc2hpcDogZW51bSB2YWx1ZSBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLm1vZGlmaWVkX3RyaXAgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwibW9kaWZpZWRfdHJpcFwiKSkge1xuICAgICAgICAgICAgICAgIHZhciBlcnJvciA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJpcERlc2NyaXB0b3IuTW9kaWZpZWRUcmlwU2VsZWN0b3IudmVyaWZ5KG1lc3NhZ2UubW9kaWZpZWRfdHJpcCk7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJtb2RpZmllZF90cmlwLlwiICsgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlcyBhIFRyaXBEZXNjcmlwdG9yIG1lc3NhZ2UgZnJvbSBhIHBsYWluIG9iamVjdC4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBpbnRlcm5hbCB0eXBlcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGZyb21PYmplY3RcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcERlc2NyaXB0b3JcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBvYmplY3QgUGxhaW4gb2JqZWN0XG4gICAgICAgICAqIEByZXR1cm5zIHt0cmFuc2l0X3JlYWx0aW1lLlRyaXBEZXNjcmlwdG9yfSBUcmlwRGVzY3JpcHRvclxuICAgICAgICAgKi9cbiAgICAgICAgVHJpcERlc2NyaXB0b3IuZnJvbU9iamVjdCA9IGZ1bmN0aW9uIGZyb21PYmplY3Qob2JqZWN0KSB7XG4gICAgICAgICAgICBpZiAob2JqZWN0IGluc3RhbmNlb2YgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmlwRGVzY3JpcHRvcilcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBuZXcgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmlwRGVzY3JpcHRvcigpO1xuICAgICAgICAgICAgaWYgKG9iamVjdC50cmlwX2lkICE9IG51bGwpXG4gICAgICAgICAgICAgICAgbWVzc2FnZS50cmlwX2lkID0gU3RyaW5nKG9iamVjdC50cmlwX2lkKTtcbiAgICAgICAgICAgIGlmIChvYmplY3Qucm91dGVfaWQgIT0gbnVsbClcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnJvdXRlX2lkID0gU3RyaW5nKG9iamVjdC5yb3V0ZV9pZCk7XG4gICAgICAgICAgICBpZiAob2JqZWN0LmRpcmVjdGlvbl9pZCAhPSBudWxsKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UuZGlyZWN0aW9uX2lkID0gb2JqZWN0LmRpcmVjdGlvbl9pZCA+Pj4gMDtcbiAgICAgICAgICAgIGlmIChvYmplY3Quc3RhcnRfdGltZSAhPSBudWxsKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3RhcnRfdGltZSA9IFN0cmluZyhvYmplY3Quc3RhcnRfdGltZSk7XG4gICAgICAgICAgICBpZiAob2JqZWN0LnN0YXJ0X2RhdGUgIT0gbnVsbClcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnN0YXJ0X2RhdGUgPSBTdHJpbmcob2JqZWN0LnN0YXJ0X2RhdGUpO1xuICAgICAgICAgICAgc3dpdGNoIChvYmplY3Quc2NoZWR1bGVfcmVsYXRpb25zaGlwKSB7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqZWN0LnNjaGVkdWxlX3JlbGF0aW9uc2hpcCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnNjaGVkdWxlX3JlbGF0aW9uc2hpcCA9IG9iamVjdC5zY2hlZHVsZV9yZWxhdGlvbnNoaXA7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJTQ0hFRFVMRURcIjpcbiAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnNjaGVkdWxlX3JlbGF0aW9uc2hpcCA9IDA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQURERURcIjpcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnNjaGVkdWxlX3JlbGF0aW9uc2hpcCA9IDE7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiVU5TQ0hFRFVMRURcIjpcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnNjaGVkdWxlX3JlbGF0aW9uc2hpcCA9IDI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ0FOQ0VMRURcIjpcbiAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnNjaGVkdWxlX3JlbGF0aW9uc2hpcCA9IDM7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiUkVQTEFDRU1FTlRcIjpcbiAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnNjaGVkdWxlX3JlbGF0aW9uc2hpcCA9IDU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiRFVQTElDQVRFRFwiOlxuICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2NoZWR1bGVfcmVsYXRpb25zaGlwID0gNjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJERUxFVEVEXCI6XG4gICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5zY2hlZHVsZV9yZWxhdGlvbnNoaXAgPSA3O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIk5FV1wiOlxuICAgICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2NoZWR1bGVfcmVsYXRpb25zaGlwID0gODtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvYmplY3QubW9kaWZpZWRfdHJpcCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmplY3QubW9kaWZpZWRfdHJpcCAhPT0gXCJvYmplY3RcIilcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgVHlwZUVycm9yKFwiLnRyYW5zaXRfcmVhbHRpbWUuVHJpcERlc2NyaXB0b3IubW9kaWZpZWRfdHJpcDogb2JqZWN0IGV4cGVjdGVkXCIpO1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UubW9kaWZpZWRfdHJpcCA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJpcERlc2NyaXB0b3IuTW9kaWZpZWRUcmlwU2VsZWN0b3IuZnJvbU9iamVjdChvYmplY3QubW9kaWZpZWRfdHJpcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgVHJpcERlc2NyaXB0b3IgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLlxuICAgICAgICAgKiBAZnVuY3Rpb24gdG9PYmplY3RcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcERlc2NyaXB0b3JcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuVHJpcERlc2NyaXB0b3J9IG1lc3NhZ2UgVHJpcERlc2NyaXB0b3JcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuSUNvbnZlcnNpb25PcHRpb25zfSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zXG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gUGxhaW4gb2JqZWN0XG4gICAgICAgICAqL1xuICAgICAgICBUcmlwRGVzY3JpcHRvci50b09iamVjdCA9IGZ1bmN0aW9uIHRvT2JqZWN0KG1lc3NhZ2UsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIGlmICghb3B0aW9ucylcbiAgICAgICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgICAgICB2YXIgb2JqZWN0ID0ge307XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5kZWZhdWx0cykge1xuICAgICAgICAgICAgICAgIG9iamVjdC50cmlwX2lkID0gXCJcIjtcbiAgICAgICAgICAgICAgICBvYmplY3Quc3RhcnRfdGltZSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgb2JqZWN0LnN0YXJ0X2RhdGUgPSBcIlwiO1xuICAgICAgICAgICAgICAgIG9iamVjdC5zY2hlZHVsZV9yZWxhdGlvbnNoaXAgPSBvcHRpb25zLmVudW1zID09PSBTdHJpbmcgPyBcIlNDSEVEVUxFRFwiIDogMDtcbiAgICAgICAgICAgICAgICBvYmplY3Qucm91dGVfaWQgPSBcIlwiO1xuICAgICAgICAgICAgICAgIG9iamVjdC5kaXJlY3Rpb25faWQgPSAwO1xuICAgICAgICAgICAgICAgIG9iamVjdC5tb2RpZmllZF90cmlwID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnRyaXBfaWQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwidHJpcF9pZFwiKSlcbiAgICAgICAgICAgICAgICBvYmplY3QudHJpcF9pZCA9IG1lc3NhZ2UudHJpcF9pZDtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnN0YXJ0X3RpbWUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwic3RhcnRfdGltZVwiKSlcbiAgICAgICAgICAgICAgICBvYmplY3Quc3RhcnRfdGltZSA9IG1lc3NhZ2Uuc3RhcnRfdGltZTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnN0YXJ0X2RhdGUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwic3RhcnRfZGF0ZVwiKSlcbiAgICAgICAgICAgICAgICBvYmplY3Quc3RhcnRfZGF0ZSA9IG1lc3NhZ2Uuc3RhcnRfZGF0ZTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnNjaGVkdWxlX3JlbGF0aW9uc2hpcCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzY2hlZHVsZV9yZWxhdGlvbnNoaXBcIikpXG4gICAgICAgICAgICAgICAgb2JqZWN0LnNjaGVkdWxlX3JlbGF0aW9uc2hpcCA9IG9wdGlvbnMuZW51bXMgPT09IFN0cmluZyA/ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJpcERlc2NyaXB0b3IuU2NoZWR1bGVSZWxhdGlvbnNoaXBbbWVzc2FnZS5zY2hlZHVsZV9yZWxhdGlvbnNoaXBdID09PSB1bmRlZmluZWQgPyBtZXNzYWdlLnNjaGVkdWxlX3JlbGF0aW9uc2hpcCA6ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJpcERlc2NyaXB0b3IuU2NoZWR1bGVSZWxhdGlvbnNoaXBbbWVzc2FnZS5zY2hlZHVsZV9yZWxhdGlvbnNoaXBdIDogbWVzc2FnZS5zY2hlZHVsZV9yZWxhdGlvbnNoaXA7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5yb3V0ZV9pZCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJyb3V0ZV9pZFwiKSlcbiAgICAgICAgICAgICAgICBvYmplY3Qucm91dGVfaWQgPSBtZXNzYWdlLnJvdXRlX2lkO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZGlyZWN0aW9uX2lkICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImRpcmVjdGlvbl9pZFwiKSlcbiAgICAgICAgICAgICAgICBvYmplY3QuZGlyZWN0aW9uX2lkID0gbWVzc2FnZS5kaXJlY3Rpb25faWQ7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5tb2RpZmllZF90cmlwICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcIm1vZGlmaWVkX3RyaXBcIikpXG4gICAgICAgICAgICAgICAgb2JqZWN0Lm1vZGlmaWVkX3RyaXAgPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyaXBEZXNjcmlwdG9yLk1vZGlmaWVkVHJpcFNlbGVjdG9yLnRvT2JqZWN0KG1lc3NhZ2UubW9kaWZpZWRfdHJpcCwgb3B0aW9ucyk7XG4gICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIFRyaXBEZXNjcmlwdG9yIHRvIEpTT04uXG4gICAgICAgICAqIEBmdW5jdGlvbiB0b0pTT05cbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcERlc2NyaXB0b3JcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcbiAgICAgICAgICovXG4gICAgICAgIFRyaXBEZXNjcmlwdG9yLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogR2V0cyB0aGUgZGVmYXVsdCB0eXBlIHVybCBmb3IgVHJpcERlc2NyaXB0b3JcbiAgICAgICAgICogQGZ1bmN0aW9uIGdldFR5cGVVcmxcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcERlc2NyaXB0b3JcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3R5cGVVcmxQcmVmaXhdIHlvdXIgY3VzdG9tIHR5cGVVcmxQcmVmaXgoZGVmYXVsdCBcInR5cGUuZ29vZ2xlYXBpcy5jb21cIilcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ30gVGhlIGRlZmF1bHQgdHlwZSB1cmxcbiAgICAgICAgICovXG4gICAgICAgIFRyaXBEZXNjcmlwdG9yLmdldFR5cGVVcmwgPSBmdW5jdGlvbiBnZXRUeXBlVXJsKHR5cGVVcmxQcmVmaXgpIHtcbiAgICAgICAgICAgIGlmICh0eXBlVXJsUHJlZml4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0eXBlVXJsUHJlZml4ID0gXCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHlwZVVybFByZWZpeCArIFwiL3RyYW5zaXRfcmVhbHRpbWUuVHJpcERlc2NyaXB0b3JcIjtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogU2NoZWR1bGVSZWxhdGlvbnNoaXAgZW51bS5cbiAgICAgICAgICogQG5hbWUgdHJhbnNpdF9yZWFsdGltZS5UcmlwRGVzY3JpcHRvci5TY2hlZHVsZVJlbGF0aW9uc2hpcFxuICAgICAgICAgKiBAZW51bSB7bnVtYmVyfVxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gU0NIRURVTEVEPTAgU0NIRURVTEVEIHZhbHVlXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBBRERFRD0xIEFEREVEIHZhbHVlXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBVTlNDSEVEVUxFRD0yIFVOU0NIRURVTEVEIHZhbHVlXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBDQU5DRUxFRD0zIENBTkNFTEVEIHZhbHVlXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBSRVBMQUNFTUVOVD01IFJFUExBQ0VNRU5UIHZhbHVlXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBEVVBMSUNBVEVEPTYgRFVQTElDQVRFRCB2YWx1ZVxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gREVMRVRFRD03IERFTEVURUQgdmFsdWVcbiAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IE5FVz04IE5FVyB2YWx1ZVxuICAgICAgICAgKi9cbiAgICAgICAgVHJpcERlc2NyaXB0b3IuU2NoZWR1bGVSZWxhdGlvbnNoaXAgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWVzQnlJZCA9IHt9LCB2YWx1ZXMgPSBPYmplY3QuY3JlYXRlKHZhbHVlc0J5SWQpO1xuICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbMF0gPSBcIlNDSEVEVUxFRFwiXSA9IDA7XG4gICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFsxXSA9IFwiQURERURcIl0gPSAxO1xuICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbMl0gPSBcIlVOU0NIRURVTEVEXCJdID0gMjtcbiAgICAgICAgICAgIHZhbHVlc1t2YWx1ZXNCeUlkWzNdID0gXCJDQU5DRUxFRFwiXSA9IDM7XG4gICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFs1XSA9IFwiUkVQTEFDRU1FTlRcIl0gPSA1O1xuICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbNl0gPSBcIkRVUExJQ0FURURcIl0gPSA2O1xuICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbN10gPSBcIkRFTEVURURcIl0gPSA3O1xuICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbOF0gPSBcIk5FV1wiXSA9IDg7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWVzO1xuICAgICAgICB9KSgpO1xuXG4gICAgICAgIFRyaXBEZXNjcmlwdG9yLk1vZGlmaWVkVHJpcFNlbGVjdG9yID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBNb2RpZmllZFRyaXBTZWxlY3Rvci5cbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBEZXNjcmlwdG9yXG4gICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElNb2RpZmllZFRyaXBTZWxlY3RvclxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW21vZGlmaWNhdGlvbnNfaWRdIE1vZGlmaWVkVHJpcFNlbGVjdG9yIG1vZGlmaWNhdGlvbnNfaWRcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfG51bGx9IFthZmZlY3RlZF90cmlwX2lkXSBNb2RpZmllZFRyaXBTZWxlY3RvciBhZmZlY3RlZF90cmlwX2lkXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbc3RhcnRfdGltZV0gTW9kaWZpZWRUcmlwU2VsZWN0b3Igc3RhcnRfdGltZVxuICAgICAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW3N0YXJ0X2RhdGVdIE1vZGlmaWVkVHJpcFNlbGVjdG9yIHN0YXJ0X2RhdGVcbiAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgTW9kaWZpZWRUcmlwU2VsZWN0b3IuXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwRGVzY3JpcHRvclxuICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgTW9kaWZpZWRUcmlwU2VsZWN0b3IuXG4gICAgICAgICAgICAgKiBAaW1wbGVtZW50cyBJTW9kaWZpZWRUcmlwU2VsZWN0b3JcbiAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICogQHBhcmFtIHt0cmFuc2l0X3JlYWx0aW1lLlRyaXBEZXNjcmlwdG9yLklNb2RpZmllZFRyaXBTZWxlY3Rvcj19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmdW5jdGlvbiBNb2RpZmllZFRyaXBTZWxlY3Rvcihwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBNb2RpZmllZFRyaXBTZWxlY3RvciBtb2RpZmljYXRpb25zX2lkLlxuICAgICAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfSBtb2RpZmljYXRpb25zX2lkXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwRGVzY3JpcHRvci5Nb2RpZmllZFRyaXBTZWxlY3RvclxuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIE1vZGlmaWVkVHJpcFNlbGVjdG9yLnByb3RvdHlwZS5tb2RpZmljYXRpb25zX2lkID0gXCJcIjtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBNb2RpZmllZFRyaXBTZWxlY3RvciBhZmZlY3RlZF90cmlwX2lkLlxuICAgICAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfSBhZmZlY3RlZF90cmlwX2lkXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwRGVzY3JpcHRvci5Nb2RpZmllZFRyaXBTZWxlY3RvclxuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIE1vZGlmaWVkVHJpcFNlbGVjdG9yLnByb3RvdHlwZS5hZmZlY3RlZF90cmlwX2lkID0gXCJcIjtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBNb2RpZmllZFRyaXBTZWxlY3RvciBzdGFydF90aW1lLlxuICAgICAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfSBzdGFydF90aW1lXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwRGVzY3JpcHRvci5Nb2RpZmllZFRyaXBTZWxlY3RvclxuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIE1vZGlmaWVkVHJpcFNlbGVjdG9yLnByb3RvdHlwZS5zdGFydF90aW1lID0gXCJcIjtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBNb2RpZmllZFRyaXBTZWxlY3RvciBzdGFydF9kYXRlLlxuICAgICAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfSBzdGFydF9kYXRlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwRGVzY3JpcHRvci5Nb2RpZmllZFRyaXBTZWxlY3RvclxuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIE1vZGlmaWVkVHJpcFNlbGVjdG9yLnByb3RvdHlwZS5zdGFydF9kYXRlID0gXCJcIjtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IE1vZGlmaWVkVHJpcFNlbGVjdG9yIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBjcmVhdGVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBEZXNjcmlwdG9yLk1vZGlmaWVkVHJpcFNlbGVjdG9yXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuVHJpcERlc2NyaXB0b3IuSU1vZGlmaWVkVHJpcFNlbGVjdG9yPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7dHJhbnNpdF9yZWFsdGltZS5UcmlwRGVzY3JpcHRvci5Nb2RpZmllZFRyaXBTZWxlY3Rvcn0gTW9kaWZpZWRUcmlwU2VsZWN0b3IgaW5zdGFuY2VcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgTW9kaWZpZWRUcmlwU2VsZWN0b3IuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE1vZGlmaWVkVHJpcFNlbGVjdG9yKHByb3BlcnRpZXMpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgTW9kaWZpZWRUcmlwU2VsZWN0b3IgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgdHJhbnNpdF9yZWFsdGltZS5UcmlwRGVzY3JpcHRvci5Nb2RpZmllZFRyaXBTZWxlY3Rvci52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBEZXNjcmlwdG9yLk1vZGlmaWVkVHJpcFNlbGVjdG9yXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuVHJpcERlc2NyaXB0b3IuSU1vZGlmaWVkVHJpcFNlbGVjdG9yfSBtZXNzYWdlIE1vZGlmaWVkVHJpcFNlbGVjdG9yIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIE1vZGlmaWVkVHJpcFNlbGVjdG9yLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5tb2RpZmljYXRpb25zX2lkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJtb2RpZmljYXRpb25zX2lkXCIpKVxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLnN0cmluZyhtZXNzYWdlLm1vZGlmaWNhdGlvbnNfaWQpO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmFmZmVjdGVkX3RyaXBfaWQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImFmZmVjdGVkX3RyaXBfaWRcIikpXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMiA9Ki8xOCkuc3RyaW5nKG1lc3NhZ2UuYWZmZWN0ZWRfdHJpcF9pZCk7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc3RhcnRfdGltZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwic3RhcnRfdGltZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAzLCB3aXJlVHlwZSAyID0qLzI2KS5zdHJpbmcobWVzc2FnZS5zdGFydF90aW1lKTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5zdGFydF9kYXRlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJzdGFydF9kYXRlXCIpKVxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDQsIHdpcmVUeXBlIDIgPSovMzQpLnN0cmluZyhtZXNzYWdlLnN0YXJ0X2RhdGUpO1xuICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBNb2RpZmllZFRyaXBTZWxlY3RvciBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayB0cmFuc2l0X3JlYWx0aW1lLlRyaXBEZXNjcmlwdG9yLk1vZGlmaWVkVHJpcFNlbGVjdG9yLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcERlc2NyaXB0b3IuTW9kaWZpZWRUcmlwU2VsZWN0b3JcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7dHJhbnNpdF9yZWFsdGltZS5UcmlwRGVzY3JpcHRvci5JTW9kaWZpZWRUcmlwU2VsZWN0b3J9IG1lc3NhZ2UgTW9kaWZpZWRUcmlwU2VsZWN0b3IgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgTW9kaWZpZWRUcmlwU2VsZWN0b3IuZW5jb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVuY29kZShtZXNzYWdlLCB3cml0ZXIpLmxkZWxpbSgpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBEZWNvZGVzIGEgTW9kaWZpZWRUcmlwU2VsZWN0b3IgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBEZXNjcmlwdG9yLk1vZGlmaWVkVHJpcFNlbGVjdG9yXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7dHJhbnNpdF9yZWFsdGltZS5UcmlwRGVzY3JpcHRvci5Nb2RpZmllZFRyaXBTZWxlY3Rvcn0gTW9kaWZpZWRUcmlwU2VsZWN0b3JcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgTW9kaWZpZWRUcmlwU2VsZWN0b3IuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoLCBlcnJvcikge1xuICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJpcERlc2NyaXB0b3IuTW9kaWZpZWRUcmlwU2VsZWN0b3IoKTtcbiAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGFnID09PSBlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm1vZGlmaWNhdGlvbnNfaWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYWZmZWN0ZWRfdHJpcF9pZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zdGFydF90aW1lID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnN0YXJ0X2RhdGUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRGVjb2RlcyBhIE1vZGlmaWVkVHJpcFNlbGVjdG9yIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwRGVzY3JpcHRvci5Nb2RpZmllZFRyaXBTZWxlY3RvclxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7dHJhbnNpdF9yZWFsdGltZS5UcmlwRGVzY3JpcHRvci5Nb2RpZmllZFRyaXBTZWxlY3Rvcn0gTW9kaWZpZWRUcmlwU2VsZWN0b3JcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgTW9kaWZpZWRUcmlwU2VsZWN0b3IuZGVjb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkKHJlYWRlcikge1xuICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSBuZXcgJFJlYWRlcihyZWFkZXIpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFZlcmlmaWVzIGEgTW9kaWZpZWRUcmlwU2VsZWN0b3IgbWVzc2FnZS5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB2ZXJpZnlcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBEZXNjcmlwdG9yLk1vZGlmaWVkVHJpcFNlbGVjdG9yXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnlcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH0gYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIE1vZGlmaWVkVHJpcFNlbGVjdG9yLnZlcmlmeSA9IGZ1bmN0aW9uIHZlcmlmeShtZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm9iamVjdCBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLm1vZGlmaWNhdGlvbnNfaWQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwibW9kaWZpY2F0aW9uc19pZFwiKSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc1N0cmluZyhtZXNzYWdlLm1vZGlmaWNhdGlvbnNfaWQpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwibW9kaWZpY2F0aW9uc19pZDogc3RyaW5nIGV4cGVjdGVkXCI7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuYWZmZWN0ZWRfdHJpcF9pZCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJhZmZlY3RlZF90cmlwX2lkXCIpKVxuICAgICAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzU3RyaW5nKG1lc3NhZ2UuYWZmZWN0ZWRfdHJpcF9pZCkpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJhZmZlY3RlZF90cmlwX2lkOiBzdHJpbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5zdGFydF90aW1lICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInN0YXJ0X3RpbWVcIikpXG4gICAgICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNTdHJpbmcobWVzc2FnZS5zdGFydF90aW1lKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInN0YXJ0X3RpbWU6IHN0cmluZyBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnN0YXJ0X2RhdGUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwic3RhcnRfZGF0ZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc1N0cmluZyhtZXNzYWdlLnN0YXJ0X2RhdGUpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwic3RhcnRfZGF0ZTogc3RyaW5nIGV4cGVjdGVkXCI7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBNb2RpZmllZFRyaXBTZWxlY3RvciBtZXNzYWdlIGZyb20gYSBwbGFpbiBvYmplY3QuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIHRoZWlyIHJlc3BlY3RpdmUgaW50ZXJuYWwgdHlwZXMuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZnJvbU9iamVjdFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcERlc2NyaXB0b3IuTW9kaWZpZWRUcmlwU2VsZWN0b3JcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG9iamVjdCBQbGFpbiBvYmplY3RcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHt0cmFuc2l0X3JlYWx0aW1lLlRyaXBEZXNjcmlwdG9yLk1vZGlmaWVkVHJpcFNlbGVjdG9yfSBNb2RpZmllZFRyaXBTZWxlY3RvclxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBNb2RpZmllZFRyaXBTZWxlY3Rvci5mcm9tT2JqZWN0ID0gZnVuY3Rpb24gZnJvbU9iamVjdChvYmplY3QpIHtcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0IGluc3RhbmNlb2YgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmlwRGVzY3JpcHRvci5Nb2RpZmllZFRyaXBTZWxlY3RvcilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IG5ldyAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyaXBEZXNjcmlwdG9yLk1vZGlmaWVkVHJpcFNlbGVjdG9yKCk7XG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC5tb2RpZmljYXRpb25zX2lkICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubW9kaWZpY2F0aW9uc19pZCA9IFN0cmluZyhvYmplY3QubW9kaWZpY2F0aW9uc19pZCk7XG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC5hZmZlY3RlZF90cmlwX2lkICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuYWZmZWN0ZWRfdHJpcF9pZCA9IFN0cmluZyhvYmplY3QuYWZmZWN0ZWRfdHJpcF9pZCk7XG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC5zdGFydF90aW1lICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3RhcnRfdGltZSA9IFN0cmluZyhvYmplY3Quc3RhcnRfdGltZSk7XG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC5zdGFydF9kYXRlICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3RhcnRfZGF0ZSA9IFN0cmluZyhvYmplY3Quc3RhcnRfZGF0ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIE1vZGlmaWVkVHJpcFNlbGVjdG9yIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b09iamVjdFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcERlc2NyaXB0b3IuTW9kaWZpZWRUcmlwU2VsZWN0b3JcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7dHJhbnNpdF9yZWFsdGltZS5UcmlwRGVzY3JpcHRvci5Nb2RpZmllZFRyaXBTZWxlY3Rvcn0gbWVzc2FnZSBNb2RpZmllZFRyaXBTZWxlY3RvclxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuSUNvbnZlcnNpb25PcHRpb25zfSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBNb2RpZmllZFRyaXBTZWxlY3Rvci50b09iamVjdCA9IGZ1bmN0aW9uIHRvT2JqZWN0KG1lc3NhZ2UsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW9wdGlvbnMpXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0ge307XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGVmYXVsdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0Lm1vZGlmaWNhdGlvbnNfaWQgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICBvYmplY3QuYWZmZWN0ZWRfdHJpcF9pZCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5zdGFydF90aW1lID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnN0YXJ0X2RhdGUgPSBcIlwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5tb2RpZmljYXRpb25zX2lkICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcIm1vZGlmaWNhdGlvbnNfaWRcIikpXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5tb2RpZmljYXRpb25zX2lkID0gbWVzc2FnZS5tb2RpZmljYXRpb25zX2lkO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmFmZmVjdGVkX3RyaXBfaWQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiYWZmZWN0ZWRfdHJpcF9pZFwiKSlcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmFmZmVjdGVkX3RyaXBfaWQgPSBtZXNzYWdlLmFmZmVjdGVkX3RyaXBfaWQ7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc3RhcnRfdGltZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzdGFydF90aW1lXCIpKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3Quc3RhcnRfdGltZSA9IG1lc3NhZ2Uuc3RhcnRfdGltZTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5zdGFydF9kYXRlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInN0YXJ0X2RhdGVcIikpXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5zdGFydF9kYXRlID0gbWVzc2FnZS5zdGFydF9kYXRlO1xuICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENvbnZlcnRzIHRoaXMgTW9kaWZpZWRUcmlwU2VsZWN0b3IgdG8gSlNPTi5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b0pTT05cbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBEZXNjcmlwdG9yLk1vZGlmaWVkVHJpcFNlbGVjdG9yXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgTW9kaWZpZWRUcmlwU2VsZWN0b3IucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogR2V0cyB0aGUgZGVmYXVsdCB0eXBlIHVybCBmb3IgTW9kaWZpZWRUcmlwU2VsZWN0b3JcbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBnZXRUeXBlVXJsXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwRGVzY3JpcHRvci5Nb2RpZmllZFRyaXBTZWxlY3RvclxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFt0eXBlVXJsUHJlZml4XSB5b3VyIGN1c3RvbSB0eXBlVXJsUHJlZml4KGRlZmF1bHQgXCJ0eXBlLmdvb2dsZWFwaXMuY29tXCIpXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgZGVmYXVsdCB0eXBlIHVybFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBNb2RpZmllZFRyaXBTZWxlY3Rvci5nZXRUeXBlVXJsID0gZnVuY3Rpb24gZ2V0VHlwZVVybCh0eXBlVXJsUHJlZml4KSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVVcmxQcmVmaXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB0eXBlVXJsUHJlZml4ID0gXCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0eXBlVXJsUHJlZml4ICsgXCIvdHJhbnNpdF9yZWFsdGltZS5UcmlwRGVzY3JpcHRvci5Nb2RpZmllZFRyaXBTZWxlY3RvclwiO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmV0dXJuIE1vZGlmaWVkVHJpcFNlbGVjdG9yO1xuICAgICAgICB9KSgpO1xuXG4gICAgICAgIHJldHVybiBUcmlwRGVzY3JpcHRvcjtcbiAgICB9KSgpO1xuXG4gICAgdHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlRGVzY3JpcHRvciA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUHJvcGVydGllcyBvZiBhIFZlaGljbGVEZXNjcmlwdG9yLlxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZVxuICAgICAgICAgKiBAaW50ZXJmYWNlIElWZWhpY2xlRGVzY3JpcHRvclxuICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbaWRdIFZlaGljbGVEZXNjcmlwdG9yIGlkXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfG51bGx9IFtsYWJlbF0gVmVoaWNsZURlc2NyaXB0b3IgbGFiZWxcbiAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW2xpY2Vuc2VfcGxhdGVdIFZlaGljbGVEZXNjcmlwdG9yIGxpY2Vuc2VfcGxhdGVcbiAgICAgICAgICogQHByb3BlcnR5IHt0cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVEZXNjcmlwdG9yLldoZWVsY2hhaXJBY2Nlc3NpYmxlfG51bGx9IFt3aGVlbGNoYWlyX2FjY2Vzc2libGVdIFZlaGljbGVEZXNjcmlwdG9yIHdoZWVsY2hhaXJfYWNjZXNzaWJsZVxuICAgICAgICAgKi9cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBWZWhpY2xlRGVzY3JpcHRvci5cbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWVcbiAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgVmVoaWNsZURlc2NyaXB0b3IuXG4gICAgICAgICAqIEBpbXBsZW1lbnRzIElWZWhpY2xlRGVzY3JpcHRvclxuICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICogQHBhcmFtIHt0cmFuc2l0X3JlYWx0aW1lLklWZWhpY2xlRGVzY3JpcHRvcj19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gVmVoaWNsZURlc2NyaXB0b3IocHJvcGVydGllcykge1xuICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBWZWhpY2xlRGVzY3JpcHRvciBpZC5cbiAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfSBpZFxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlRGVzY3JpcHRvclxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIFZlaGljbGVEZXNjcmlwdG9yLnByb3RvdHlwZS5pZCA9IFwiXCI7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFZlaGljbGVEZXNjcmlwdG9yIGxhYmVsLlxuICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IGxhYmVsXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVEZXNjcmlwdG9yXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgVmVoaWNsZURlc2NyaXB0b3IucHJvdG90eXBlLmxhYmVsID0gXCJcIjtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVmVoaWNsZURlc2NyaXB0b3IgbGljZW5zZV9wbGF0ZS5cbiAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfSBsaWNlbnNlX3BsYXRlXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVEZXNjcmlwdG9yXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgVmVoaWNsZURlc2NyaXB0b3IucHJvdG90eXBlLmxpY2Vuc2VfcGxhdGUgPSBcIlwiO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBWZWhpY2xlRGVzY3JpcHRvciB3aGVlbGNoYWlyX2FjY2Vzc2libGUuXG4gICAgICAgICAqIEBtZW1iZXIge3RyYW5zaXRfcmVhbHRpbWUuVmVoaWNsZURlc2NyaXB0b3IuV2hlZWxjaGFpckFjY2Vzc2libGV9IHdoZWVsY2hhaXJfYWNjZXNzaWJsZVxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlRGVzY3JpcHRvclxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIFZlaGljbGVEZXNjcmlwdG9yLnByb3RvdHlwZS53aGVlbGNoYWlyX2FjY2Vzc2libGUgPSAwO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IFZlaGljbGVEZXNjcmlwdG9yIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGNyZWF0ZVxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlRGVzY3JpcHRvclxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7dHJhbnNpdF9yZWFsdGltZS5JVmVoaWNsZURlc2NyaXB0b3I9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICogQHJldHVybnMge3RyYW5zaXRfcmVhbHRpbWUuVmVoaWNsZURlc2NyaXB0b3J9IFZlaGljbGVEZXNjcmlwdG9yIGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBWZWhpY2xlRGVzY3JpcHRvci5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUocHJvcGVydGllcykge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWhpY2xlRGVzY3JpcHRvcihwcm9wZXJ0aWVzKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFZlaGljbGVEZXNjcmlwdG9yIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIHRyYW5zaXRfcmVhbHRpbWUuVmVoaWNsZURlc2NyaXB0b3IudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVmVoaWNsZURlc2NyaXB0b3JcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuSVZlaGljbGVEZXNjcmlwdG9yfSBtZXNzYWdlIFZlaGljbGVEZXNjcmlwdG9yIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgKi9cbiAgICAgICAgVmVoaWNsZURlc2NyaXB0b3IuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmlkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJpZFwiKSlcbiAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLnN0cmluZyhtZXNzYWdlLmlkKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmxhYmVsICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJsYWJlbFwiKSlcbiAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLnN0cmluZyhtZXNzYWdlLmxhYmVsKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmxpY2Vuc2VfcGxhdGUgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImxpY2Vuc2VfcGxhdGVcIikpXG4gICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAzLCB3aXJlVHlwZSAyID0qLzI2KS5zdHJpbmcobWVzc2FnZS5saWNlbnNlX3BsYXRlKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLndoZWVsY2hhaXJfYWNjZXNzaWJsZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwid2hlZWxjaGFpcl9hY2Nlc3NpYmxlXCIpKVxuICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgNCwgd2lyZVR5cGUgMCA9Ki8zMikuaW50MzIobWVzc2FnZS53aGVlbGNoYWlyX2FjY2Vzc2libGUpO1xuICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFZlaGljbGVEZXNjcmlwdG9yIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIHRyYW5zaXRfcmVhbHRpbWUuVmVoaWNsZURlc2NyaXB0b3IudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVmVoaWNsZURlc2NyaXB0b3JcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuSVZlaGljbGVEZXNjcmlwdG9yfSBtZXNzYWdlIFZlaGljbGVEZXNjcmlwdG9yIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgKi9cbiAgICAgICAgVmVoaWNsZURlc2NyaXB0b3IuZW5jb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikubGRlbGltKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlY29kZXMgYSBWZWhpY2xlRGVzY3JpcHRvciBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVEZXNjcmlwdG9yXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAqIEByZXR1cm5zIHt0cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVEZXNjcmlwdG9yfSBWZWhpY2xlRGVzY3JpcHRvclxuICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICovXG4gICAgICAgIFZlaGljbGVEZXNjcmlwdG9yLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCwgZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVEZXNjcmlwdG9yKCk7XG4gICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgaWYgKHRhZyA9PT0gZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmlkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIDI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubGFiZWwgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgMzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5saWNlbnNlX3BsYXRlID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIDQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uud2hlZWxjaGFpcl9hY2Nlc3NpYmxlID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlY29kZXMgYSBWZWhpY2xlRGVzY3JpcHRvciBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLlxuICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVEZXNjcmlwdG9yXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAqIEByZXR1cm5zIHt0cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVEZXNjcmlwdG9yfSBWZWhpY2xlRGVzY3JpcHRvclxuICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICovXG4gICAgICAgIFZlaGljbGVEZXNjcmlwdG9yLmRlY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZChyZWFkZXIpIHtcbiAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgIHJlYWRlciA9IG5ldyAkUmVhZGVyKHJlYWRlcik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBWZXJpZmllcyBhIFZlaGljbGVEZXNjcmlwdG9yIG1lc3NhZ2UuXG4gICAgICAgICAqIEBmdW5jdGlvbiB2ZXJpZnlcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVmVoaWNsZURlc2NyaXB0b3JcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnlcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfSBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3RcbiAgICAgICAgICovXG4gICAgICAgIFZlaGljbGVEZXNjcmlwdG9yLnZlcmlmeSA9IGZ1bmN0aW9uIHZlcmlmeShtZXNzYWdlKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgIT09IFwib2JqZWN0XCIgfHwgbWVzc2FnZSA9PT0gbnVsbClcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJvYmplY3QgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmlkICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImlkXCIpKVxuICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNTdHJpbmcobWVzc2FnZS5pZCkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImlkOiBzdHJpbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmxhYmVsICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImxhYmVsXCIpKVxuICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNTdHJpbmcobWVzc2FnZS5sYWJlbCkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImxhYmVsOiBzdHJpbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmxpY2Vuc2VfcGxhdGUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwibGljZW5zZV9wbGF0ZVwiKSlcbiAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzU3RyaW5nKG1lc3NhZ2UubGljZW5zZV9wbGF0ZSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImxpY2Vuc2VfcGxhdGU6IHN0cmluZyBleHBlY3RlZFwiO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uud2hlZWxjaGFpcl9hY2Nlc3NpYmxlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcIndoZWVsY2hhaXJfYWNjZXNzaWJsZVwiKSlcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG1lc3NhZ2Uud2hlZWxjaGFpcl9hY2Nlc3NpYmxlKSB7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwid2hlZWxjaGFpcl9hY2Nlc3NpYmxlOiBlbnVtIHZhbHVlIGV4cGVjdGVkXCI7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlcyBhIFZlaGljbGVEZXNjcmlwdG9yIG1lc3NhZ2UgZnJvbSBhIHBsYWluIG9iamVjdC4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBpbnRlcm5hbCB0eXBlcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGZyb21PYmplY3RcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVmVoaWNsZURlc2NyaXB0b3JcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBvYmplY3QgUGxhaW4gb2JqZWN0XG4gICAgICAgICAqIEByZXR1cm5zIHt0cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVEZXNjcmlwdG9yfSBWZWhpY2xlRGVzY3JpcHRvclxuICAgICAgICAgKi9cbiAgICAgICAgVmVoaWNsZURlc2NyaXB0b3IuZnJvbU9iamVjdCA9IGZ1bmN0aW9uIGZyb21PYmplY3Qob2JqZWN0KSB7XG4gICAgICAgICAgICBpZiAob2JqZWN0IGluc3RhbmNlb2YgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlRGVzY3JpcHRvcilcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBuZXcgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlRGVzY3JpcHRvcigpO1xuICAgICAgICAgICAgaWYgKG9iamVjdC5pZCAhPSBudWxsKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UuaWQgPSBTdHJpbmcob2JqZWN0LmlkKTtcbiAgICAgICAgICAgIGlmIChvYmplY3QubGFiZWwgIT0gbnVsbClcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmxhYmVsID0gU3RyaW5nKG9iamVjdC5sYWJlbCk7XG4gICAgICAgICAgICBpZiAob2JqZWN0LmxpY2Vuc2VfcGxhdGUgIT0gbnVsbClcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmxpY2Vuc2VfcGxhdGUgPSBTdHJpbmcob2JqZWN0LmxpY2Vuc2VfcGxhdGUpO1xuICAgICAgICAgICAgc3dpdGNoIChvYmplY3Qud2hlZWxjaGFpcl9hY2Nlc3NpYmxlKSB7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqZWN0LndoZWVsY2hhaXJfYWNjZXNzaWJsZSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLndoZWVsY2hhaXJfYWNjZXNzaWJsZSA9IG9iamVjdC53aGVlbGNoYWlyX2FjY2Vzc2libGU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJOT19WQUxVRVwiOlxuICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgIG1lc3NhZ2Uud2hlZWxjaGFpcl9hY2Nlc3NpYmxlID0gMDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJVTktOT1dOXCI6XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgbWVzc2FnZS53aGVlbGNoYWlyX2FjY2Vzc2libGUgPSAxO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIldIRUVMQ0hBSVJfQUNDRVNTSUJMRVwiOlxuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgIG1lc3NhZ2Uud2hlZWxjaGFpcl9hY2Nlc3NpYmxlID0gMjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJXSEVFTENIQUlSX0lOQUNDRVNTSUJMRVwiOlxuICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgIG1lc3NhZ2Uud2hlZWxjaGFpcl9hY2Nlc3NpYmxlID0gMztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBWZWhpY2xlRGVzY3JpcHRvciBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXG4gICAgICAgICAqIEBmdW5jdGlvbiB0b09iamVjdFxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlRGVzY3JpcHRvclxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7dHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlRGVzY3JpcHRvcn0gbWVzc2FnZSBWZWhpY2xlRGVzY3JpcHRvclxuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcbiAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBQbGFpbiBvYmplY3RcbiAgICAgICAgICovXG4gICAgICAgIFZlaGljbGVEZXNjcmlwdG9yLnRvT2JqZWN0ID0gZnVuY3Rpb24gdG9PYmplY3QobWVzc2FnZSwgb3B0aW9ucykge1xuICAgICAgICAgICAgaWYgKCFvcHRpb25zKVxuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgICAgIHZhciBvYmplY3QgPSB7fTtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmRlZmF1bHRzKSB7XG4gICAgICAgICAgICAgICAgb2JqZWN0LmlkID0gXCJcIjtcbiAgICAgICAgICAgICAgICBvYmplY3QubGFiZWwgPSBcIlwiO1xuICAgICAgICAgICAgICAgIG9iamVjdC5saWNlbnNlX3BsYXRlID0gXCJcIjtcbiAgICAgICAgICAgICAgICBvYmplY3Qud2hlZWxjaGFpcl9hY2Nlc3NpYmxlID0gb3B0aW9ucy5lbnVtcyA9PT0gU3RyaW5nID8gXCJOT19WQUxVRVwiIDogMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmlkICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImlkXCIpKVxuICAgICAgICAgICAgICAgIG9iamVjdC5pZCA9IG1lc3NhZ2UuaWQ7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5sYWJlbCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJsYWJlbFwiKSlcbiAgICAgICAgICAgICAgICBvYmplY3QubGFiZWwgPSBtZXNzYWdlLmxhYmVsO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UubGljZW5zZV9wbGF0ZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJsaWNlbnNlX3BsYXRlXCIpKVxuICAgICAgICAgICAgICAgIG9iamVjdC5saWNlbnNlX3BsYXRlID0gbWVzc2FnZS5saWNlbnNlX3BsYXRlO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uud2hlZWxjaGFpcl9hY2Nlc3NpYmxlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcIndoZWVsY2hhaXJfYWNjZXNzaWJsZVwiKSlcbiAgICAgICAgICAgICAgICBvYmplY3Qud2hlZWxjaGFpcl9hY2Nlc3NpYmxlID0gb3B0aW9ucy5lbnVtcyA9PT0gU3RyaW5nID8gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlRGVzY3JpcHRvci5XaGVlbGNoYWlyQWNjZXNzaWJsZVttZXNzYWdlLndoZWVsY2hhaXJfYWNjZXNzaWJsZV0gPT09IHVuZGVmaW5lZCA/IG1lc3NhZ2Uud2hlZWxjaGFpcl9hY2Nlc3NpYmxlIDogJHJvb3QudHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlRGVzY3JpcHRvci5XaGVlbGNoYWlyQWNjZXNzaWJsZVttZXNzYWdlLndoZWVsY2hhaXJfYWNjZXNzaWJsZV0gOiBtZXNzYWdlLndoZWVsY2hhaXJfYWNjZXNzaWJsZTtcbiAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbnZlcnRzIHRoaXMgVmVoaWNsZURlc2NyaXB0b3IgdG8gSlNPTi5cbiAgICAgICAgICogQGZ1bmN0aW9uIHRvSlNPTlxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlRGVzY3JpcHRvclxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBKU09OIG9iamVjdFxuICAgICAgICAgKi9cbiAgICAgICAgVmVoaWNsZURlc2NyaXB0b3IucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsICRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXRzIHRoZSBkZWZhdWx0IHR5cGUgdXJsIGZvciBWZWhpY2xlRGVzY3JpcHRvclxuICAgICAgICAgKiBAZnVuY3Rpb24gZ2V0VHlwZVVybFxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlRGVzY3JpcHRvclxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbdHlwZVVybFByZWZpeF0geW91ciBjdXN0b20gdHlwZVVybFByZWZpeChkZWZhdWx0IFwidHlwZS5nb29nbGVhcGlzLmNvbVwiKVxuICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgZGVmYXVsdCB0eXBlIHVybFxuICAgICAgICAgKi9cbiAgICAgICAgVmVoaWNsZURlc2NyaXB0b3IuZ2V0VHlwZVVybCA9IGZ1bmN0aW9uIGdldFR5cGVVcmwodHlwZVVybFByZWZpeCkge1xuICAgICAgICAgICAgaWYgKHR5cGVVcmxQcmVmaXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHR5cGVVcmxQcmVmaXggPSBcInR5cGUuZ29vZ2xlYXBpcy5jb21cIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0eXBlVXJsUHJlZml4ICsgXCIvdHJhbnNpdF9yZWFsdGltZS5WZWhpY2xlRGVzY3JpcHRvclwiO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGVlbGNoYWlyQWNjZXNzaWJsZSBlbnVtLlxuICAgICAgICAgKiBAbmFtZSB0cmFuc2l0X3JlYWx0aW1lLlZlaGljbGVEZXNjcmlwdG9yLldoZWVsY2hhaXJBY2Nlc3NpYmxlXG4gICAgICAgICAqIEBlbnVtIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBOT19WQUxVRT0wIE5PX1ZBTFVFIHZhbHVlXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBVTktOT1dOPTEgVU5LTk9XTiB2YWx1ZVxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gV0hFRUxDSEFJUl9BQ0NFU1NJQkxFPTIgV0hFRUxDSEFJUl9BQ0NFU1NJQkxFIHZhbHVlXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBXSEVFTENIQUlSX0lOQUNDRVNTSUJMRT0zIFdIRUVMQ0hBSVJfSU5BQ0NFU1NJQkxFIHZhbHVlXG4gICAgICAgICAqL1xuICAgICAgICBWZWhpY2xlRGVzY3JpcHRvci5XaGVlbGNoYWlyQWNjZXNzaWJsZSA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZXNCeUlkID0ge30sIHZhbHVlcyA9IE9iamVjdC5jcmVhdGUodmFsdWVzQnlJZCk7XG4gICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFswXSA9IFwiTk9fVkFMVUVcIl0gPSAwO1xuICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbMV0gPSBcIlVOS05PV05cIl0gPSAxO1xuICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbMl0gPSBcIldIRUVMQ0hBSVJfQUNDRVNTSUJMRVwiXSA9IDI7XG4gICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFszXSA9IFwiV0hFRUxDSEFJUl9JTkFDQ0VTU0lCTEVcIl0gPSAzO1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlcztcbiAgICAgICAgfSkoKTtcblxuICAgICAgICByZXR1cm4gVmVoaWNsZURlc2NyaXB0b3I7XG4gICAgfSkoKTtcblxuICAgIHRyYW5zaXRfcmVhbHRpbWUuRW50aXR5U2VsZWN0b3IgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFByb3BlcnRpZXMgb2YgYW4gRW50aXR5U2VsZWN0b3IuXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lXG4gICAgICAgICAqIEBpbnRlcmZhY2UgSUVudGl0eVNlbGVjdG9yXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfG51bGx9IFthZ2VuY3lfaWRdIEVudGl0eVNlbGVjdG9yIGFnZW5jeV9pZFxuICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbcm91dGVfaWRdIEVudGl0eVNlbGVjdG9yIHJvdXRlX2lkXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfG51bGx9IFtyb3V0ZV90eXBlXSBFbnRpdHlTZWxlY3RvciByb3V0ZV90eXBlXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7dHJhbnNpdF9yZWFsdGltZS5JVHJpcERlc2NyaXB0b3J8bnVsbH0gW3RyaXBdIEVudGl0eVNlbGVjdG9yIHRyaXBcbiAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW3N0b3BfaWRdIEVudGl0eVNlbGVjdG9yIHN0b3BfaWRcbiAgICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ8bnVsbH0gW2RpcmVjdGlvbl9pZF0gRW50aXR5U2VsZWN0b3IgZGlyZWN0aW9uX2lkXG4gICAgICAgICAqL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IEVudGl0eVNlbGVjdG9yLlxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZVxuICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYW4gRW50aXR5U2VsZWN0b3IuXG4gICAgICAgICAqIEBpbXBsZW1lbnRzIElFbnRpdHlTZWxlY3RvclxuICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICogQHBhcmFtIHt0cmFuc2l0X3JlYWx0aW1lLklFbnRpdHlTZWxlY3Rvcj19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gRW50aXR5U2VsZWN0b3IocHJvcGVydGllcykge1xuICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFbnRpdHlTZWxlY3RvciBhZ2VuY3lfaWQuXG4gICAgICAgICAqIEBtZW1iZXIge3N0cmluZ30gYWdlbmN5X2lkXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLkVudGl0eVNlbGVjdG9yXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgRW50aXR5U2VsZWN0b3IucHJvdG90eXBlLmFnZW5jeV9pZCA9IFwiXCI7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVudGl0eVNlbGVjdG9yIHJvdXRlX2lkLlxuICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IHJvdXRlX2lkXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLkVudGl0eVNlbGVjdG9yXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgRW50aXR5U2VsZWN0b3IucHJvdG90eXBlLnJvdXRlX2lkID0gXCJcIjtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRW50aXR5U2VsZWN0b3Igcm91dGVfdHlwZS5cbiAgICAgICAgICogQG1lbWJlciB7bnVtYmVyfSByb3V0ZV90eXBlXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLkVudGl0eVNlbGVjdG9yXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgRW50aXR5U2VsZWN0b3IucHJvdG90eXBlLnJvdXRlX3R5cGUgPSAwO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFbnRpdHlTZWxlY3RvciB0cmlwLlxuICAgICAgICAgKiBAbWVtYmVyIHt0cmFuc2l0X3JlYWx0aW1lLklUcmlwRGVzY3JpcHRvcnxudWxsfHVuZGVmaW5lZH0gdHJpcFxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5FbnRpdHlTZWxlY3RvclxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIEVudGl0eVNlbGVjdG9yLnByb3RvdHlwZS50cmlwID0gbnVsbDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRW50aXR5U2VsZWN0b3Igc3RvcF9pZC5cbiAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfSBzdG9wX2lkXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLkVudGl0eVNlbGVjdG9yXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgRW50aXR5U2VsZWN0b3IucHJvdG90eXBlLnN0b3BfaWQgPSBcIlwiO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFbnRpdHlTZWxlY3RvciBkaXJlY3Rpb25faWQuXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn0gZGlyZWN0aW9uX2lkXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLkVudGl0eVNlbGVjdG9yXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgRW50aXR5U2VsZWN0b3IucHJvdG90eXBlLmRpcmVjdGlvbl9pZCA9IDA7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYSBuZXcgRW50aXR5U2VsZWN0b3IgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLlxuICAgICAgICAgKiBAZnVuY3Rpb24gY3JlYXRlXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLkVudGl0eVNlbGVjdG9yXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHt0cmFuc2l0X3JlYWx0aW1lLklFbnRpdHlTZWxlY3Rvcj19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgKiBAcmV0dXJucyB7dHJhbnNpdF9yZWFsdGltZS5FbnRpdHlTZWxlY3Rvcn0gRW50aXR5U2VsZWN0b3IgaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIEVudGl0eVNlbGVjdG9yLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEVudGl0eVNlbGVjdG9yKHByb3BlcnRpZXMpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgRW50aXR5U2VsZWN0b3IgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgdHJhbnNpdF9yZWFsdGltZS5FbnRpdHlTZWxlY3Rvci52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5FbnRpdHlTZWxlY3RvclxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7dHJhbnNpdF9yZWFsdGltZS5JRW50aXR5U2VsZWN0b3J9IG1lc3NhZ2UgRW50aXR5U2VsZWN0b3IgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAqL1xuICAgICAgICBFbnRpdHlTZWxlY3Rvci5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuYWdlbmN5X2lkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJhZ2VuY3lfaWRcIikpXG4gICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAyID0qLzEwKS5zdHJpbmcobWVzc2FnZS5hZ2VuY3lfaWQpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uucm91dGVfaWQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInJvdXRlX2lkXCIpKVxuICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMiA9Ki8xOCkuc3RyaW5nKG1lc3NhZ2Uucm91dGVfaWQpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uucm91dGVfdHlwZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicm91dGVfdHlwZVwiKSlcbiAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDMsIHdpcmVUeXBlIDAgPSovMjQpLmludDMyKG1lc3NhZ2Uucm91dGVfdHlwZSk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS50cmlwICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJ0cmlwXCIpKVxuICAgICAgICAgICAgICAgICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJpcERlc2NyaXB0b3IuZW5jb2RlKG1lc3NhZ2UudHJpcCwgd3JpdGVyLnVpbnQzMigvKiBpZCA0LCB3aXJlVHlwZSAyID0qLzM0KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc3RvcF9pZCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwic3RvcF9pZFwiKSlcbiAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDUsIHdpcmVUeXBlIDIgPSovNDIpLnN0cmluZyhtZXNzYWdlLnN0b3BfaWQpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZGlyZWN0aW9uX2lkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJkaXJlY3Rpb25faWRcIikpXG4gICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCA2LCB3aXJlVHlwZSAwID0qLzQ4KS51aW50MzIobWVzc2FnZS5kaXJlY3Rpb25faWQpO1xuICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIEVudGl0eVNlbGVjdG9yIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIHRyYW5zaXRfcmVhbHRpbWUuRW50aXR5U2VsZWN0b3IudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuRW50aXR5U2VsZWN0b3JcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuSUVudGl0eVNlbGVjdG9yfSBtZXNzYWdlIEVudGl0eVNlbGVjdG9yIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgKi9cbiAgICAgICAgRW50aXR5U2VsZWN0b3IuZW5jb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikubGRlbGltKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlY29kZXMgYW4gRW50aXR5U2VsZWN0b3IgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5FbnRpdHlTZWxlY3RvclxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAgICAgKiBAcmV0dXJucyB7dHJhbnNpdF9yZWFsdGltZS5FbnRpdHlTZWxlY3Rvcn0gRW50aXR5U2VsZWN0b3JcbiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAqL1xuICAgICAgICBFbnRpdHlTZWxlY3Rvci5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgsIGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5FbnRpdHlTZWxlY3RvcigpO1xuICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgIGlmICh0YWcgPT09IGVycm9yKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMToge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5hZ2VuY3lfaWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgMjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yb3V0ZV9pZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJvdXRlX3R5cGUgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSA0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnRyaXAgPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyaXBEZXNjcmlwdG9yLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgNToge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zdG9wX2lkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIDY6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZGlyZWN0aW9uX2lkID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWNvZGVzIGFuIEVudGl0eVNlbGVjdG9yIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuXG4gICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWRcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuRW50aXR5U2VsZWN0b3JcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICogQHJldHVybnMge3RyYW5zaXRfcmVhbHRpbWUuRW50aXR5U2VsZWN0b3J9IEVudGl0eVNlbGVjdG9yXG4gICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgKi9cbiAgICAgICAgRW50aXR5U2VsZWN0b3IuZGVjb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkKHJlYWRlcikge1xuICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgcmVhZGVyID0gbmV3ICRSZWFkZXIocmVhZGVyKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFZlcmlmaWVzIGFuIEVudGl0eVNlbGVjdG9yIG1lc3NhZ2UuXG4gICAgICAgICAqIEBmdW5jdGlvbiB2ZXJpZnlcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuRW50aXR5U2VsZWN0b3JcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnlcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfSBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3RcbiAgICAgICAgICovXG4gICAgICAgIEVudGl0eVNlbGVjdG9yLnZlcmlmeSA9IGZ1bmN0aW9uIHZlcmlmeShtZXNzYWdlKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgIT09IFwib2JqZWN0XCIgfHwgbWVzc2FnZSA9PT0gbnVsbClcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJvYmplY3QgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmFnZW5jeV9pZCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJhZ2VuY3lfaWRcIikpXG4gICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc1N0cmluZyhtZXNzYWdlLmFnZW5jeV9pZCkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImFnZW5jeV9pZDogc3RyaW5nIGV4cGVjdGVkXCI7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5yb3V0ZV9pZCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJyb3V0ZV9pZFwiKSlcbiAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzU3RyaW5nKG1lc3NhZ2Uucm91dGVfaWQpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJyb3V0ZV9pZDogc3RyaW5nIGV4cGVjdGVkXCI7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5yb3V0ZV90eXBlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInJvdXRlX3R5cGVcIikpXG4gICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc0ludGVnZXIobWVzc2FnZS5yb3V0ZV90eXBlKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwicm91dGVfdHlwZTogaW50ZWdlciBleHBlY3RlZFwiO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UudHJpcCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJ0cmlwXCIpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmlwRGVzY3JpcHRvci52ZXJpZnkobWVzc2FnZS50cmlwKTtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcInRyaXAuXCIgKyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnN0b3BfaWQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwic3RvcF9pZFwiKSlcbiAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzU3RyaW5nKG1lc3NhZ2Uuc3RvcF9pZCkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcInN0b3BfaWQ6IHN0cmluZyBleHBlY3RlZFwiO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZGlyZWN0aW9uX2lkICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImRpcmVjdGlvbl9pZFwiKSlcbiAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLmRpcmVjdGlvbl9pZCkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImRpcmVjdGlvbl9pZDogaW50ZWdlciBleHBlY3RlZFwiO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYW4gRW50aXR5U2VsZWN0b3IgbWVzc2FnZSBmcm9tIGEgcGxhaW4gb2JqZWN0LiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byB0aGVpciByZXNwZWN0aXZlIGludGVybmFsIHR5cGVzLlxuICAgICAgICAgKiBAZnVuY3Rpb24gZnJvbU9iamVjdFxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5FbnRpdHlTZWxlY3RvclxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG9iamVjdCBQbGFpbiBvYmplY3RcbiAgICAgICAgICogQHJldHVybnMge3RyYW5zaXRfcmVhbHRpbWUuRW50aXR5U2VsZWN0b3J9IEVudGl0eVNlbGVjdG9yXG4gICAgICAgICAqL1xuICAgICAgICBFbnRpdHlTZWxlY3Rvci5mcm9tT2JqZWN0ID0gZnVuY3Rpb24gZnJvbU9iamVjdChvYmplY3QpIHtcbiAgICAgICAgICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLkVudGl0eVNlbGVjdG9yKVxuICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICAgICAgICB2YXIgbWVzc2FnZSA9IG5ldyAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLkVudGl0eVNlbGVjdG9yKCk7XG4gICAgICAgICAgICBpZiAob2JqZWN0LmFnZW5jeV9pZCAhPSBudWxsKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UuYWdlbmN5X2lkID0gU3RyaW5nKG9iamVjdC5hZ2VuY3lfaWQpO1xuICAgICAgICAgICAgaWYgKG9iamVjdC5yb3V0ZV9pZCAhPSBudWxsKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2Uucm91dGVfaWQgPSBTdHJpbmcob2JqZWN0LnJvdXRlX2lkKTtcbiAgICAgICAgICAgIGlmIChvYmplY3Qucm91dGVfdHlwZSAhPSBudWxsKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2Uucm91dGVfdHlwZSA9IG9iamVjdC5yb3V0ZV90eXBlIHwgMDtcbiAgICAgICAgICAgIGlmIChvYmplY3QudHJpcCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmplY3QudHJpcCAhPT0gXCJvYmplY3RcIilcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgVHlwZUVycm9yKFwiLnRyYW5zaXRfcmVhbHRpbWUuRW50aXR5U2VsZWN0b3IudHJpcDogb2JqZWN0IGV4cGVjdGVkXCIpO1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UudHJpcCA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJpcERlc2NyaXB0b3IuZnJvbU9iamVjdChvYmplY3QudHJpcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob2JqZWN0LnN0b3BfaWQgIT0gbnVsbClcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnN0b3BfaWQgPSBTdHJpbmcob2JqZWN0LnN0b3BfaWQpO1xuICAgICAgICAgICAgaWYgKG9iamVjdC5kaXJlY3Rpb25faWQgIT0gbnVsbClcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmRpcmVjdGlvbl9pZCA9IG9iamVjdC5kaXJlY3Rpb25faWQgPj4+IDA7XG4gICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGFuIEVudGl0eVNlbGVjdG9yIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC5cbiAgICAgICAgICogQGZ1bmN0aW9uIHRvT2JqZWN0XG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLkVudGl0eVNlbGVjdG9yXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHt0cmFuc2l0X3JlYWx0aW1lLkVudGl0eVNlbGVjdG9yfSBtZXNzYWdlIEVudGl0eVNlbGVjdG9yXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9uc30gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9uc1xuICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxuICAgICAgICAgKi9cbiAgICAgICAgRW50aXR5U2VsZWN0b3IudG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdChtZXNzYWdlLCBvcHRpb25zKSB7XG4gICAgICAgICAgICBpZiAoIW9wdGlvbnMpXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgICAgICAgdmFyIG9iamVjdCA9IHt9O1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGVmYXVsdHMpIHtcbiAgICAgICAgICAgICAgICBvYmplY3QuYWdlbmN5X2lkID0gXCJcIjtcbiAgICAgICAgICAgICAgICBvYmplY3Qucm91dGVfaWQgPSBcIlwiO1xuICAgICAgICAgICAgICAgIG9iamVjdC5yb3V0ZV90eXBlID0gMDtcbiAgICAgICAgICAgICAgICBvYmplY3QudHJpcCA9IG51bGw7XG4gICAgICAgICAgICAgICAgb2JqZWN0LnN0b3BfaWQgPSBcIlwiO1xuICAgICAgICAgICAgICAgIG9iamVjdC5kaXJlY3Rpb25faWQgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuYWdlbmN5X2lkICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImFnZW5jeV9pZFwiKSlcbiAgICAgICAgICAgICAgICBvYmplY3QuYWdlbmN5X2lkID0gbWVzc2FnZS5hZ2VuY3lfaWQ7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5yb3V0ZV9pZCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJyb3V0ZV9pZFwiKSlcbiAgICAgICAgICAgICAgICBvYmplY3Qucm91dGVfaWQgPSBtZXNzYWdlLnJvdXRlX2lkO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uucm91dGVfdHlwZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJyb3V0ZV90eXBlXCIpKVxuICAgICAgICAgICAgICAgIG9iamVjdC5yb3V0ZV90eXBlID0gbWVzc2FnZS5yb3V0ZV90eXBlO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UudHJpcCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJ0cmlwXCIpKVxuICAgICAgICAgICAgICAgIG9iamVjdC50cmlwID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmlwRGVzY3JpcHRvci50b09iamVjdChtZXNzYWdlLnRyaXAsIG9wdGlvbnMpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc3RvcF9pZCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzdG9wX2lkXCIpKVxuICAgICAgICAgICAgICAgIG9iamVjdC5zdG9wX2lkID0gbWVzc2FnZS5zdG9wX2lkO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZGlyZWN0aW9uX2lkICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImRpcmVjdGlvbl9pZFwiKSlcbiAgICAgICAgICAgICAgICBvYmplY3QuZGlyZWN0aW9uX2lkID0gbWVzc2FnZS5kaXJlY3Rpb25faWQ7XG4gICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIEVudGl0eVNlbGVjdG9yIHRvIEpTT04uXG4gICAgICAgICAqIEBmdW5jdGlvbiB0b0pTT05cbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuRW50aXR5U2VsZWN0b3JcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcbiAgICAgICAgICovXG4gICAgICAgIEVudGl0eVNlbGVjdG9yLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogR2V0cyB0aGUgZGVmYXVsdCB0eXBlIHVybCBmb3IgRW50aXR5U2VsZWN0b3JcbiAgICAgICAgICogQGZ1bmN0aW9uIGdldFR5cGVVcmxcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuRW50aXR5U2VsZWN0b3JcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3R5cGVVcmxQcmVmaXhdIHlvdXIgY3VzdG9tIHR5cGVVcmxQcmVmaXgoZGVmYXVsdCBcInR5cGUuZ29vZ2xlYXBpcy5jb21cIilcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ30gVGhlIGRlZmF1bHQgdHlwZSB1cmxcbiAgICAgICAgICovXG4gICAgICAgIEVudGl0eVNlbGVjdG9yLmdldFR5cGVVcmwgPSBmdW5jdGlvbiBnZXRUeXBlVXJsKHR5cGVVcmxQcmVmaXgpIHtcbiAgICAgICAgICAgIGlmICh0eXBlVXJsUHJlZml4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0eXBlVXJsUHJlZml4ID0gXCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHlwZVVybFByZWZpeCArIFwiL3RyYW5zaXRfcmVhbHRpbWUuRW50aXR5U2VsZWN0b3JcIjtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gRW50aXR5U2VsZWN0b3I7XG4gICAgfSkoKTtcblxuICAgIHRyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZFN0cmluZyA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUHJvcGVydGllcyBvZiBhIFRyYW5zbGF0ZWRTdHJpbmcuXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lXG4gICAgICAgICAqIEBpbnRlcmZhY2UgSVRyYW5zbGF0ZWRTdHJpbmdcbiAgICAgICAgICogQHByb3BlcnR5IHtBcnJheS48dHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nLklUcmFuc2xhdGlvbj58bnVsbH0gW3RyYW5zbGF0aW9uXSBUcmFuc2xhdGVkU3RyaW5nIHRyYW5zbGF0aW9uXG4gICAgICAgICAqL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFRyYW5zbGF0ZWRTdHJpbmcuXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lXG4gICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIFRyYW5zbGF0ZWRTdHJpbmcuXG4gICAgICAgICAqIEBpbXBsZW1lbnRzIElUcmFuc2xhdGVkU3RyaW5nXG4gICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuSVRyYW5zbGF0ZWRTdHJpbmc9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIFRyYW5zbGF0ZWRTdHJpbmcocHJvcGVydGllcykge1xuICAgICAgICAgICAgdGhpcy50cmFuc2xhdGlvbiA9IFtdO1xuICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgZm9yICh2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUcmFuc2xhdGVkU3RyaW5nIHRyYW5zbGF0aW9uLlxuICAgICAgICAgKiBAbWVtYmVyIHtBcnJheS48dHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nLklUcmFuc2xhdGlvbj59IHRyYW5zbGF0aW9uXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRTdHJpbmdcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBUcmFuc2xhdGVkU3RyaW5nLnByb3RvdHlwZS50cmFuc2xhdGlvbiA9ICR1dGlsLmVtcHR5QXJyYXk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYSBuZXcgVHJhbnNsYXRlZFN0cmluZyBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuXG4gICAgICAgICAqIEBmdW5jdGlvbiBjcmVhdGVcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZFN0cmluZ1xuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7dHJhbnNpdF9yZWFsdGltZS5JVHJhbnNsYXRlZFN0cmluZz19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgKiBAcmV0dXJucyB7dHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nfSBUcmFuc2xhdGVkU3RyaW5nIGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBUcmFuc2xhdGVkU3RyaW5nLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFRyYW5zbGF0ZWRTdHJpbmcocHJvcGVydGllcyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBUcmFuc2xhdGVkU3RyaW5nIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIHRyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZFN0cmluZy52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHt0cmFuc2l0X3JlYWx0aW1lLklUcmFuc2xhdGVkU3RyaW5nfSBtZXNzYWdlIFRyYW5zbGF0ZWRTdHJpbmcgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAqL1xuICAgICAgICBUcmFuc2xhdGVkU3RyaW5nLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS50cmFuc2xhdGlvbiAhPSBudWxsICYmIG1lc3NhZ2UudHJhbnNsYXRpb24ubGVuZ3RoKVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVzc2FnZS50cmFuc2xhdGlvbi5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nLlRyYW5zbGF0aW9uLmVuY29kZShtZXNzYWdlLnRyYW5zbGF0aW9uW2ldLCB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgVHJhbnNsYXRlZFN0cmluZyBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayB0cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRTdHJpbmcudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZFN0cmluZ1xuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7dHJhbnNpdF9yZWFsdGltZS5JVHJhbnNsYXRlZFN0cmluZ30gbWVzc2FnZSBUcmFuc2xhdGVkU3RyaW5nIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgKi9cbiAgICAgICAgVHJhbnNsYXRlZFN0cmluZy5lbmNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGUobWVzc2FnZSwgd3JpdGVyKS5sZGVsaW0oKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRGVjb2RlcyBhIFRyYW5zbGF0ZWRTdHJpbmcgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAqIEByZXR1cm5zIHt0cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRTdHJpbmd9IFRyYW5zbGF0ZWRTdHJpbmdcbiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAqL1xuICAgICAgICBUcmFuc2xhdGVkU3RyaW5nLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCwgZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRTdHJpbmcoKTtcbiAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICBpZiAodGFnID09PSBlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKG1lc3NhZ2UudHJhbnNsYXRpb24gJiYgbWVzc2FnZS50cmFuc2xhdGlvbi5sZW5ndGgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudHJhbnNsYXRpb24gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudHJhbnNsYXRpb24ucHVzaCgkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRTdHJpbmcuVHJhbnNsYXRpb24uZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlY29kZXMgYSBUcmFuc2xhdGVkU3RyaW5nIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuXG4gICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWRcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZFN0cmluZ1xuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgKiBAcmV0dXJucyB7dHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nfSBUcmFuc2xhdGVkU3RyaW5nXG4gICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgKi9cbiAgICAgICAgVHJhbnNsYXRlZFN0cmluZy5kZWNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyKSB7XG4gICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICByZWFkZXIgPSBuZXcgJFJlYWRlcihyZWFkZXIpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVmVyaWZpZXMgYSBUcmFuc2xhdGVkU3RyaW5nIG1lc3NhZ2UuXG4gICAgICAgICAqIEBmdW5jdGlvbiB2ZXJpZnlcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZFN0cmluZ1xuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeVxuICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9IGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdFxuICAgICAgICAgKi9cbiAgICAgICAgVHJhbnNsYXRlZFN0cmluZy52ZXJpZnkgPSBmdW5jdGlvbiB2ZXJpZnkobWVzc2FnZSkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwib2JqZWN0IGV4cGVjdGVkXCI7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS50cmFuc2xhdGlvbiAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJ0cmFuc2xhdGlvblwiKSkge1xuICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShtZXNzYWdlLnRyYW5zbGF0aW9uKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwidHJhbnNsYXRpb246IGFycmF5IGV4cGVjdGVkXCI7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNzYWdlLnRyYW5zbGF0aW9uLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlcnJvciA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZFN0cmluZy5UcmFuc2xhdGlvbi52ZXJpZnkobWVzc2FnZS50cmFuc2xhdGlvbltpXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInRyYW5zbGF0aW9uLlwiICsgZXJyb3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYSBUcmFuc2xhdGVkU3RyaW5nIG1lc3NhZ2UgZnJvbSBhIHBsYWluIG9iamVjdC4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBpbnRlcm5hbCB0eXBlcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGZyb21PYmplY3RcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZFN0cmluZ1xuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG9iamVjdCBQbGFpbiBvYmplY3RcbiAgICAgICAgICogQHJldHVybnMge3RyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZFN0cmluZ30gVHJhbnNsYXRlZFN0cmluZ1xuICAgICAgICAgKi9cbiAgICAgICAgVHJhbnNsYXRlZFN0cmluZy5mcm9tT2JqZWN0ID0gZnVuY3Rpb24gZnJvbU9iamVjdChvYmplY3QpIHtcbiAgICAgICAgICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRTdHJpbmcpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICAgICAgICAgIHZhciBtZXNzYWdlID0gbmV3ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZFN0cmluZygpO1xuICAgICAgICAgICAgaWYgKG9iamVjdC50cmFuc2xhdGlvbikge1xuICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShvYmplY3QudHJhbnNsYXRpb24pKVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoXCIudHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nLnRyYW5zbGF0aW9uOiBhcnJheSBleHBlY3RlZFwiKTtcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnRyYW5zbGF0aW9uID0gW107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvYmplY3QudHJhbnNsYXRpb24ubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmplY3QudHJhbnNsYXRpb25baV0gIT09IFwib2JqZWN0XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoXCIudHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nLnRyYW5zbGF0aW9uOiBvYmplY3QgZXhwZWN0ZWRcIik7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudHJhbnNsYXRpb25baV0gPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRTdHJpbmcuVHJhbnNsYXRpb24uZnJvbU9iamVjdChvYmplY3QudHJhbnNsYXRpb25baV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBUcmFuc2xhdGVkU3RyaW5nIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC5cbiAgICAgICAgICogQGZ1bmN0aW9uIHRvT2JqZWN0XG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRTdHJpbmdcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZFN0cmluZ30gbWVzc2FnZSBUcmFuc2xhdGVkU3RyaW5nXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9uc30gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9uc1xuICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxuICAgICAgICAgKi9cbiAgICAgICAgVHJhbnNsYXRlZFN0cmluZy50b09iamVjdCA9IGZ1bmN0aW9uIHRvT2JqZWN0KG1lc3NhZ2UsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIGlmICghb3B0aW9ucylcbiAgICAgICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgICAgICB2YXIgb2JqZWN0ID0ge307XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5hcnJheXMgfHwgb3B0aW9ucy5kZWZhdWx0cylcbiAgICAgICAgICAgICAgICBvYmplY3QudHJhbnNsYXRpb24gPSBbXTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnRyYW5zbGF0aW9uICYmIG1lc3NhZ2UudHJhbnNsYXRpb24ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgb2JqZWN0LnRyYW5zbGF0aW9uID0gW107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBtZXNzYWdlLnRyYW5zbGF0aW9uLmxlbmd0aDsgKytqKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3QudHJhbnNsYXRpb25bal0gPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRTdHJpbmcuVHJhbnNsYXRpb24udG9PYmplY3QobWVzc2FnZS50cmFuc2xhdGlvbltqXSwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIFRyYW5zbGF0ZWRTdHJpbmcgdG8gSlNPTi5cbiAgICAgICAgICogQGZ1bmN0aW9uIHRvSlNPTlxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IEpTT04gb2JqZWN0XG4gICAgICAgICAqL1xuICAgICAgICBUcmFuc2xhdGVkU3RyaW5nLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogR2V0cyB0aGUgZGVmYXVsdCB0eXBlIHVybCBmb3IgVHJhbnNsYXRlZFN0cmluZ1xuICAgICAgICAgKiBAZnVuY3Rpb24gZ2V0VHlwZVVybFxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFt0eXBlVXJsUHJlZml4XSB5b3VyIGN1c3RvbSB0eXBlVXJsUHJlZml4KGRlZmF1bHQgXCJ0eXBlLmdvb2dsZWFwaXMuY29tXCIpXG4gICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBkZWZhdWx0IHR5cGUgdXJsXG4gICAgICAgICAqL1xuICAgICAgICBUcmFuc2xhdGVkU3RyaW5nLmdldFR5cGVVcmwgPSBmdW5jdGlvbiBnZXRUeXBlVXJsKHR5cGVVcmxQcmVmaXgpIHtcbiAgICAgICAgICAgIGlmICh0eXBlVXJsUHJlZml4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0eXBlVXJsUHJlZml4ID0gXCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHlwZVVybFByZWZpeCArIFwiL3RyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZFN0cmluZ1wiO1xuICAgICAgICB9O1xuXG4gICAgICAgIFRyYW5zbGF0ZWRTdHJpbmcuVHJhbnNsYXRpb24gPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIFRyYW5zbGF0aW9uLlxuICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZFN0cmluZ1xuICAgICAgICAgICAgICogQGludGVyZmFjZSBJVHJhbnNsYXRpb25cbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB0ZXh0IFRyYW5zbGF0aW9uIHRleHRcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfG51bGx9IFtsYW5ndWFnZV0gVHJhbnNsYXRpb24gbGFuZ3VhZ2VcbiAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgVHJhbnNsYXRpb24uXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nXG4gICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBUcmFuc2xhdGlvbi5cbiAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElUcmFuc2xhdGlvblxuICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZFN0cmluZy5JVHJhbnNsYXRpb249fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZnVuY3Rpb24gVHJhbnNsYXRpb24ocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllcyksIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzW2tleXNbaV1dICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVHJhbnNsYXRpb24gdGV4dC5cbiAgICAgICAgICAgICAqIEBtZW1iZXIge3N0cmluZ30gdGV4dFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZFN0cmluZy5UcmFuc2xhdGlvblxuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFRyYW5zbGF0aW9uLnByb3RvdHlwZS50ZXh0ID0gXCJcIjtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBUcmFuc2xhdGlvbiBsYW5ndWFnZS5cbiAgICAgICAgICAgICAqIEBtZW1iZXIge3N0cmluZ30gbGFuZ3VhZ2VcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRTdHJpbmcuVHJhbnNsYXRpb25cbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBUcmFuc2xhdGlvbi5wcm90b3R5cGUubGFuZ3VhZ2UgPSBcIlwiO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBuZXcgVHJhbnNsYXRpb24gaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGNyZWF0ZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZFN0cmluZy5UcmFuc2xhdGlvblxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHt0cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRTdHJpbmcuSVRyYW5zbGF0aW9uPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7dHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nLlRyYW5zbGF0aW9ufSBUcmFuc2xhdGlvbiBpbnN0YW5jZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBUcmFuc2xhdGlvbi5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVHJhbnNsYXRpb24ocHJvcGVydGllcyk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBUcmFuc2xhdGlvbiBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayB0cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRTdHJpbmcuVHJhbnNsYXRpb24udmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nLlRyYW5zbGF0aW9uXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZFN0cmluZy5JVHJhbnNsYXRpb259IG1lc3NhZ2UgVHJhbnNsYXRpb24gbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgVHJhbnNsYXRpb24uZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgIGlmICghd3JpdGVyKVxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuc3RyaW5nKG1lc3NhZ2UudGV4dCk7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UubGFuZ3VhZ2UgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImxhbmd1YWdlXCIpKVxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLnN0cmluZyhtZXNzYWdlLmxhbmd1YWdlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgVHJhbnNsYXRpb24gbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgdHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nLlRyYW5zbGF0aW9uLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZFN0cmluZy5UcmFuc2xhdGlvblxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHt0cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRTdHJpbmcuSVRyYW5zbGF0aW9ufSBtZXNzYWdlIFRyYW5zbGF0aW9uIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFRyYW5zbGF0aW9uLmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGUobWVzc2FnZSwgd3JpdGVyKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRGVjb2RlcyBhIFRyYW5zbGF0aW9uIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nLlRyYW5zbGF0aW9uXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7dHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nLlRyYW5zbGF0aW9ufSBUcmFuc2xhdGlvblxuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBUcmFuc2xhdGlvbi5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nLlRyYW5zbGF0aW9uKCk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhZyA9PT0gZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS50ZXh0ID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmxhbmd1YWdlID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFtZXNzYWdlLmhhc093blByb3BlcnR5KFwidGV4dFwiKSlcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgJHV0aWwuUHJvdG9jb2xFcnJvcihcIm1pc3NpbmcgcmVxdWlyZWQgJ3RleHQnXCIsIHsgaW5zdGFuY2U6IG1lc3NhZ2UgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIERlY29kZXMgYSBUcmFuc2xhdGlvbiBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZFN0cmluZy5UcmFuc2xhdGlvblxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7dHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nLlRyYW5zbGF0aW9ufSBUcmFuc2xhdGlvblxuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBUcmFuc2xhdGlvbi5kZWNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9IG5ldyAkUmVhZGVyKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVmVyaWZpZXMgYSBUcmFuc2xhdGlvbiBtZXNzYWdlLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHZlcmlmeVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZFN0cmluZy5UcmFuc2xhdGlvblxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5XG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9IGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBUcmFuc2xhdGlvbi52ZXJpZnkgPSBmdW5jdGlvbiB2ZXJpZnkobWVzc2FnZSkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSAhPT0gXCJvYmplY3RcIiB8fCBtZXNzYWdlID09PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJvYmplY3QgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzU3RyaW5nKG1lc3NhZ2UudGV4dCkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcInRleHQ6IHN0cmluZyBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmxhbmd1YWdlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImxhbmd1YWdlXCIpKVxuICAgICAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzU3RyaW5nKG1lc3NhZ2UubGFuZ3VhZ2UpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwibGFuZ3VhZ2U6IHN0cmluZyBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgVHJhbnNsYXRpb24gbWVzc2FnZSBmcm9tIGEgcGxhaW4gb2JqZWN0LiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byB0aGVpciByZXNwZWN0aXZlIGludGVybmFsIHR5cGVzLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGZyb21PYmplY3RcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRTdHJpbmcuVHJhbnNsYXRpb25cbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG9iamVjdCBQbGFpbiBvYmplY3RcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHt0cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRTdHJpbmcuVHJhbnNsYXRpb259IFRyYW5zbGF0aW9uXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFRyYW5zbGF0aW9uLmZyb21PYmplY3QgPSBmdW5jdGlvbiBmcm9tT2JqZWN0KG9iamVjdCkge1xuICAgICAgICAgICAgICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRTdHJpbmcuVHJhbnNsYXRpb24pXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBuZXcgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nLlRyYW5zbGF0aW9uKCk7XG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC50ZXh0ICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudGV4dCA9IFN0cmluZyhvYmplY3QudGV4dCk7XG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC5sYW5ndWFnZSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmxhbmd1YWdlID0gU3RyaW5nKG9iamVjdC5sYW5ndWFnZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIFRyYW5zbGF0aW9uIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b09iamVjdFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZFN0cmluZy5UcmFuc2xhdGlvblxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHt0cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRTdHJpbmcuVHJhbnNsYXRpb259IG1lc3NhZ2UgVHJhbnNsYXRpb25cbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9uc30gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9uc1xuICAgICAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBQbGFpbiBvYmplY3RcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgVHJhbnNsYXRpb24udG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdChtZXNzYWdlLCBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFvcHRpb25zKVxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgICAgICAgICAgdmFyIG9iamVjdCA9IHt9O1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmRlZmF1bHRzKSB7XG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC50ZXh0ID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0Lmxhbmd1YWdlID0gXCJcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudGV4dCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJ0ZXh0XCIpKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3QudGV4dCA9IG1lc3NhZ2UudGV4dDtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5sYW5ndWFnZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJsYW5ndWFnZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0Lmxhbmd1YWdlID0gbWVzc2FnZS5sYW5ndWFnZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIFRyYW5zbGF0aW9uIHRvIEpTT04uXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdG9KU09OXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nLlRyYW5zbGF0aW9uXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgVHJhbnNsYXRpb24ucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogR2V0cyB0aGUgZGVmYXVsdCB0eXBlIHVybCBmb3IgVHJhbnNsYXRpb25cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBnZXRUeXBlVXJsXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nLlRyYW5zbGF0aW9uXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3R5cGVVcmxQcmVmaXhdIHlvdXIgY3VzdG9tIHR5cGVVcmxQcmVmaXgoZGVmYXVsdCBcInR5cGUuZ29vZ2xlYXBpcy5jb21cIilcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBkZWZhdWx0IHR5cGUgdXJsXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFRyYW5zbGF0aW9uLmdldFR5cGVVcmwgPSBmdW5jdGlvbiBnZXRUeXBlVXJsKHR5cGVVcmxQcmVmaXgpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZVVybFByZWZpeCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGVVcmxQcmVmaXggPSBcInR5cGUuZ29vZ2xlYXBpcy5jb21cIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVVcmxQcmVmaXggKyBcIi90cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRTdHJpbmcuVHJhbnNsYXRpb25cIjtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJldHVybiBUcmFuc2xhdGlvbjtcbiAgICAgICAgfSkoKTtcblxuICAgICAgICByZXR1cm4gVHJhbnNsYXRlZFN0cmluZztcbiAgICB9KSgpO1xuXG4gICAgdHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkSW1hZ2UgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBUcmFuc2xhdGVkSW1hZ2UuXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lXG4gICAgICAgICAqIEBpbnRlcmZhY2UgSVRyYW5zbGF0ZWRJbWFnZVxuICAgICAgICAgKiBAcHJvcGVydHkge0FycmF5Ljx0cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRJbWFnZS5JTG9jYWxpemVkSW1hZ2U+fG51bGx9IFtsb2NhbGl6ZWRfaW1hZ2VdIFRyYW5zbGF0ZWRJbWFnZSBsb2NhbGl6ZWRfaW1hZ2VcbiAgICAgICAgICovXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgVHJhbnNsYXRlZEltYWdlLlxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZVxuICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBUcmFuc2xhdGVkSW1hZ2UuXG4gICAgICAgICAqIEBpbXBsZW1lbnRzIElUcmFuc2xhdGVkSW1hZ2VcbiAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAqIEBwYXJhbSB7dHJhbnNpdF9yZWFsdGltZS5JVHJhbnNsYXRlZEltYWdlPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBUcmFuc2xhdGVkSW1hZ2UocHJvcGVydGllcykge1xuICAgICAgICAgICAgdGhpcy5sb2NhbGl6ZWRfaW1hZ2UgPSBbXTtcbiAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogVHJhbnNsYXRlZEltYWdlIGxvY2FsaXplZF9pbWFnZS5cbiAgICAgICAgICogQG1lbWJlciB7QXJyYXkuPHRyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZEltYWdlLklMb2NhbGl6ZWRJbWFnZT59IGxvY2FsaXplZF9pbWFnZVxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkSW1hZ2VcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBUcmFuc2xhdGVkSW1hZ2UucHJvdG90eXBlLmxvY2FsaXplZF9pbWFnZSA9ICR1dGlsLmVtcHR5QXJyYXk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYSBuZXcgVHJhbnNsYXRlZEltYWdlIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGNyZWF0ZVxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkSW1hZ2VcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuSVRyYW5zbGF0ZWRJbWFnZT19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgKiBAcmV0dXJucyB7dHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkSW1hZ2V9IFRyYW5zbGF0ZWRJbWFnZSBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgVHJhbnNsYXRlZEltYWdlLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFRyYW5zbGF0ZWRJbWFnZShwcm9wZXJ0aWVzKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFRyYW5zbGF0ZWRJbWFnZSBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayB0cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRJbWFnZS52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkSW1hZ2VcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuSVRyYW5zbGF0ZWRJbWFnZX0gbWVzc2FnZSBUcmFuc2xhdGVkSW1hZ2UgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAqL1xuICAgICAgICBUcmFuc2xhdGVkSW1hZ2UuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmxvY2FsaXplZF9pbWFnZSAhPSBudWxsICYmIG1lc3NhZ2UubG9jYWxpemVkX2ltYWdlLmxlbmd0aClcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1lc3NhZ2UubG9jYWxpemVkX2ltYWdlLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRJbWFnZS5Mb2NhbGl6ZWRJbWFnZS5lbmNvZGUobWVzc2FnZS5sb2NhbGl6ZWRfaW1hZ2VbaV0sIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBUcmFuc2xhdGVkSW1hZ2UgbWVzc2FnZSwgbGVuZ3RoIGRlbGltaXRlZC4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgdHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkSW1hZ2UudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZEltYWdlXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHt0cmFuc2l0X3JlYWx0aW1lLklUcmFuc2xhdGVkSW1hZ2V9IG1lc3NhZ2UgVHJhbnNsYXRlZEltYWdlIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgKi9cbiAgICAgICAgVHJhbnNsYXRlZEltYWdlLmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVuY29kZShtZXNzYWdlLCB3cml0ZXIpLmxkZWxpbSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWNvZGVzIGEgVHJhbnNsYXRlZEltYWdlIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIuXG4gICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZEltYWdlXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAqIEByZXR1cm5zIHt0cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRJbWFnZX0gVHJhbnNsYXRlZEltYWdlXG4gICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgKi9cbiAgICAgICAgVHJhbnNsYXRlZEltYWdlLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCwgZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRJbWFnZSgpO1xuICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgIGlmICh0YWcgPT09IGVycm9yKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMToge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEobWVzc2FnZS5sb2NhbGl6ZWRfaW1hZ2UgJiYgbWVzc2FnZS5sb2NhbGl6ZWRfaW1hZ2UubGVuZ3RoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmxvY2FsaXplZF9pbWFnZSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5sb2NhbGl6ZWRfaW1hZ2UucHVzaCgkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRJbWFnZS5Mb2NhbGl6ZWRJbWFnZS5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRGVjb2RlcyBhIFRyYW5zbGF0ZWRJbWFnZSBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLlxuICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRJbWFnZVxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgKiBAcmV0dXJucyB7dHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkSW1hZ2V9IFRyYW5zbGF0ZWRJbWFnZVxuICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICovXG4gICAgICAgIFRyYW5zbGF0ZWRJbWFnZS5kZWNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyKSB7XG4gICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICByZWFkZXIgPSBuZXcgJFJlYWRlcihyZWFkZXIpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVmVyaWZpZXMgYSBUcmFuc2xhdGVkSW1hZ2UgbWVzc2FnZS5cbiAgICAgICAgICogQGZ1bmN0aW9uIHZlcmlmeVxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkSW1hZ2VcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnlcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfSBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3RcbiAgICAgICAgICovXG4gICAgICAgIFRyYW5zbGF0ZWRJbWFnZS52ZXJpZnkgPSBmdW5jdGlvbiB2ZXJpZnkobWVzc2FnZSkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwib2JqZWN0IGV4cGVjdGVkXCI7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5sb2NhbGl6ZWRfaW1hZ2UgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwibG9jYWxpemVkX2ltYWdlXCIpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KG1lc3NhZ2UubG9jYWxpemVkX2ltYWdlKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwibG9jYWxpemVkX2ltYWdlOiBhcnJheSBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVzc2FnZS5sb2NhbGl6ZWRfaW1hZ2UubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkSW1hZ2UuTG9jYWxpemVkSW1hZ2UudmVyaWZ5KG1lc3NhZ2UubG9jYWxpemVkX2ltYWdlW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwibG9jYWxpemVkX2ltYWdlLlwiICsgZXJyb3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYSBUcmFuc2xhdGVkSW1hZ2UgbWVzc2FnZSBmcm9tIGEgcGxhaW4gb2JqZWN0LiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byB0aGVpciByZXNwZWN0aXZlIGludGVybmFsIHR5cGVzLlxuICAgICAgICAgKiBAZnVuY3Rpb24gZnJvbU9iamVjdFxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkSW1hZ2VcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBvYmplY3QgUGxhaW4gb2JqZWN0XG4gICAgICAgICAqIEByZXR1cm5zIHt0cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRJbWFnZX0gVHJhbnNsYXRlZEltYWdlXG4gICAgICAgICAqL1xuICAgICAgICBUcmFuc2xhdGVkSW1hZ2UuZnJvbU9iamVjdCA9IGZ1bmN0aW9uIGZyb21PYmplY3Qob2JqZWN0KSB7XG4gICAgICAgICAgICBpZiAob2JqZWN0IGluc3RhbmNlb2YgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkSW1hZ2UpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICAgICAgICAgIHZhciBtZXNzYWdlID0gbmV3ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZEltYWdlKCk7XG4gICAgICAgICAgICBpZiAob2JqZWN0LmxvY2FsaXplZF9pbWFnZSkge1xuICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShvYmplY3QubG9jYWxpemVkX2ltYWdlKSlcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgVHlwZUVycm9yKFwiLnRyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZEltYWdlLmxvY2FsaXplZF9pbWFnZTogYXJyYXkgZXhwZWN0ZWRcIik7XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5sb2NhbGl6ZWRfaW1hZ2UgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9iamVjdC5sb2NhbGl6ZWRfaW1hZ2UubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmplY3QubG9jYWxpemVkX2ltYWdlW2ldICE9PSBcIm9iamVjdFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgVHlwZUVycm9yKFwiLnRyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZEltYWdlLmxvY2FsaXplZF9pbWFnZTogb2JqZWN0IGV4cGVjdGVkXCIpO1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmxvY2FsaXplZF9pbWFnZVtpXSA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZEltYWdlLkxvY2FsaXplZEltYWdlLmZyb21PYmplY3Qob2JqZWN0LmxvY2FsaXplZF9pbWFnZVtpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIFRyYW5zbGF0ZWRJbWFnZSBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXG4gICAgICAgICAqIEBmdW5jdGlvbiB0b09iamVjdFxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkSW1hZ2VcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZEltYWdlfSBtZXNzYWdlIFRyYW5zbGF0ZWRJbWFnZVxuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcbiAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBQbGFpbiBvYmplY3RcbiAgICAgICAgICovXG4gICAgICAgIFRyYW5zbGF0ZWRJbWFnZS50b09iamVjdCA9IGZ1bmN0aW9uIHRvT2JqZWN0KG1lc3NhZ2UsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIGlmICghb3B0aW9ucylcbiAgICAgICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgICAgICB2YXIgb2JqZWN0ID0ge307XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5hcnJheXMgfHwgb3B0aW9ucy5kZWZhdWx0cylcbiAgICAgICAgICAgICAgICBvYmplY3QubG9jYWxpemVkX2ltYWdlID0gW107XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5sb2NhbGl6ZWRfaW1hZ2UgJiYgbWVzc2FnZS5sb2NhbGl6ZWRfaW1hZ2UubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgb2JqZWN0LmxvY2FsaXplZF9pbWFnZSA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbWVzc2FnZS5sb2NhbGl6ZWRfaW1hZ2UubGVuZ3RoOyArK2opXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5sb2NhbGl6ZWRfaW1hZ2Vbal0gPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRJbWFnZS5Mb2NhbGl6ZWRJbWFnZS50b09iamVjdChtZXNzYWdlLmxvY2FsaXplZF9pbWFnZVtqXSwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIFRyYW5zbGF0ZWRJbWFnZSB0byBKU09OLlxuICAgICAgICAgKiBAZnVuY3Rpb24gdG9KU09OXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRJbWFnZVxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBKU09OIG9iamVjdFxuICAgICAgICAgKi9cbiAgICAgICAgVHJhbnNsYXRlZEltYWdlLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogR2V0cyB0aGUgZGVmYXVsdCB0eXBlIHVybCBmb3IgVHJhbnNsYXRlZEltYWdlXG4gICAgICAgICAqIEBmdW5jdGlvbiBnZXRUeXBlVXJsXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRJbWFnZVxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbdHlwZVVybFByZWZpeF0geW91ciBjdXN0b20gdHlwZVVybFByZWZpeChkZWZhdWx0IFwidHlwZS5nb29nbGVhcGlzLmNvbVwiKVxuICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgZGVmYXVsdCB0eXBlIHVybFxuICAgICAgICAgKi9cbiAgICAgICAgVHJhbnNsYXRlZEltYWdlLmdldFR5cGVVcmwgPSBmdW5jdGlvbiBnZXRUeXBlVXJsKHR5cGVVcmxQcmVmaXgpIHtcbiAgICAgICAgICAgIGlmICh0eXBlVXJsUHJlZml4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0eXBlVXJsUHJlZml4ID0gXCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHlwZVVybFByZWZpeCArIFwiL3RyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZEltYWdlXCI7XG4gICAgICAgIH07XG5cbiAgICAgICAgVHJhbnNsYXRlZEltYWdlLkxvY2FsaXplZEltYWdlID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBMb2NhbGl6ZWRJbWFnZS5cbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRJbWFnZVxuICAgICAgICAgICAgICogQGludGVyZmFjZSBJTG9jYWxpemVkSW1hZ2VcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB1cmwgTG9jYWxpemVkSW1hZ2UgdXJsXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gbWVkaWFfdHlwZSBMb2NhbGl6ZWRJbWFnZSBtZWRpYV90eXBlXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbbGFuZ3VhZ2VdIExvY2FsaXplZEltYWdlIGxhbmd1YWdlXG4gICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IExvY2FsaXplZEltYWdlLlxuICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZEltYWdlXG4gICAgICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBMb2NhbGl6ZWRJbWFnZS5cbiAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElMb2NhbGl6ZWRJbWFnZVxuICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZEltYWdlLklMb2NhbGl6ZWRJbWFnZT19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmdW5jdGlvbiBMb2NhbGl6ZWRJbWFnZShwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBMb2NhbGl6ZWRJbWFnZSB1cmwuXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IHVybFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZEltYWdlLkxvY2FsaXplZEltYWdlXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgTG9jYWxpemVkSW1hZ2UucHJvdG90eXBlLnVybCA9IFwiXCI7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogTG9jYWxpemVkSW1hZ2UgbWVkaWFfdHlwZS5cbiAgICAgICAgICAgICAqIEBtZW1iZXIge3N0cmluZ30gbWVkaWFfdHlwZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZEltYWdlLkxvY2FsaXplZEltYWdlXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgTG9jYWxpemVkSW1hZ2UucHJvdG90eXBlLm1lZGlhX3R5cGUgPSBcIlwiO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIExvY2FsaXplZEltYWdlIGxhbmd1YWdlLlxuICAgICAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfSBsYW5ndWFnZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZEltYWdlLkxvY2FsaXplZEltYWdlXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgTG9jYWxpemVkSW1hZ2UucHJvdG90eXBlLmxhbmd1YWdlID0gXCJcIjtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IExvY2FsaXplZEltYWdlIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBjcmVhdGVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRJbWFnZS5Mb2NhbGl6ZWRJbWFnZVxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHt0cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRJbWFnZS5JTG9jYWxpemVkSW1hZ2U9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHt0cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRJbWFnZS5Mb2NhbGl6ZWRJbWFnZX0gTG9jYWxpemVkSW1hZ2UgaW5zdGFuY2VcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgTG9jYWxpemVkSW1hZ2UuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IExvY2FsaXplZEltYWdlKHByb3BlcnRpZXMpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgTG9jYWxpemVkSW1hZ2UgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgdHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkSW1hZ2UuTG9jYWxpemVkSW1hZ2UudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkSW1hZ2UuTG9jYWxpemVkSW1hZ2VcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7dHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkSW1hZ2UuSUxvY2FsaXplZEltYWdlfSBtZXNzYWdlIExvY2FsaXplZEltYWdlIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIExvY2FsaXplZEltYWdlLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLnN0cmluZyhtZXNzYWdlLnVybCk7XG4gICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAyID0qLzE4KS5zdHJpbmcobWVzc2FnZS5tZWRpYV90eXBlKTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5sYW5ndWFnZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwibGFuZ3VhZ2VcIikpXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMywgd2lyZVR5cGUgMiA9Ki8yNikuc3RyaW5nKG1lc3NhZ2UubGFuZ3VhZ2UpO1xuICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBMb2NhbGl6ZWRJbWFnZSBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayB0cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRJbWFnZS5Mb2NhbGl6ZWRJbWFnZS52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRJbWFnZS5Mb2NhbGl6ZWRJbWFnZVxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHt0cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRJbWFnZS5JTG9jYWxpemVkSW1hZ2V9IG1lc3NhZ2UgTG9jYWxpemVkSW1hZ2UgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgTG9jYWxpemVkSW1hZ2UuZW5jb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVuY29kZShtZXNzYWdlLCB3cml0ZXIpLmxkZWxpbSgpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBEZWNvZGVzIGEgTG9jYWxpemVkSW1hZ2UgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRJbWFnZS5Mb2NhbGl6ZWRJbWFnZVxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAgICAgICAgICogQHJldHVybnMge3RyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZEltYWdlLkxvY2FsaXplZEltYWdlfSBMb2NhbGl6ZWRJbWFnZVxuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBMb2NhbGl6ZWRJbWFnZS5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkSW1hZ2UuTG9jYWxpemVkSW1hZ2UoKTtcbiAgICAgICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGFnID09PSBlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnVybCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5tZWRpYV90eXBlID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmxhbmd1YWdlID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFtZXNzYWdlLmhhc093blByb3BlcnR5KFwidXJsXCIpKVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyAkdXRpbC5Qcm90b2NvbEVycm9yKFwibWlzc2luZyByZXF1aXJlZCAndXJsJ1wiLCB7IGluc3RhbmNlOiBtZXNzYWdlIH0pO1xuICAgICAgICAgICAgICAgIGlmICghbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcIm1lZGlhX3R5cGVcIikpXG4gICAgICAgICAgICAgICAgICAgIHRocm93ICR1dGlsLlByb3RvY29sRXJyb3IoXCJtaXNzaW5nIHJlcXVpcmVkICdtZWRpYV90eXBlJ1wiLCB7IGluc3RhbmNlOiBtZXNzYWdlIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBEZWNvZGVzIGEgTG9jYWxpemVkSW1hZ2UgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWRcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRJbWFnZS5Mb2NhbGl6ZWRJbWFnZVxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7dHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkSW1hZ2UuTG9jYWxpemVkSW1hZ2V9IExvY2FsaXplZEltYWdlXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIExvY2FsaXplZEltYWdlLmRlY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZChyZWFkZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gbmV3ICRSZWFkZXIocmVhZGVyKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBWZXJpZmllcyBhIExvY2FsaXplZEltYWdlIG1lc3NhZ2UuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdmVyaWZ5XG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkSW1hZ2UuTG9jYWxpemVkSW1hZ2VcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeVxuICAgICAgICAgICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfSBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3RcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgTG9jYWxpemVkSW1hZ2UudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgIT09IFwib2JqZWN0XCIgfHwgbWVzc2FnZSA9PT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwib2JqZWN0IGV4cGVjdGVkXCI7XG4gICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc1N0cmluZyhtZXNzYWdlLnVybCkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcInVybDogc3RyaW5nIGV4cGVjdGVkXCI7XG4gICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc1N0cmluZyhtZXNzYWdlLm1lZGlhX3R5cGUpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJtZWRpYV90eXBlOiBzdHJpbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5sYW5ndWFnZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJsYW5ndWFnZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc1N0cmluZyhtZXNzYWdlLmxhbmd1YWdlKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcImxhbmd1YWdlOiBzdHJpbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIExvY2FsaXplZEltYWdlIG1lc3NhZ2UgZnJvbSBhIHBsYWluIG9iamVjdC4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBpbnRlcm5hbCB0eXBlcy5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBmcm9tT2JqZWN0XG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkSW1hZ2UuTG9jYWxpemVkSW1hZ2VcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG9iamVjdCBQbGFpbiBvYmplY3RcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHt0cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRJbWFnZS5Mb2NhbGl6ZWRJbWFnZX0gTG9jYWxpemVkSW1hZ2VcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgTG9jYWxpemVkSW1hZ2UuZnJvbU9iamVjdCA9IGZ1bmN0aW9uIGZyb21PYmplY3Qob2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdCBpbnN0YW5jZW9mICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZEltYWdlLkxvY2FsaXplZEltYWdlKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gbmV3ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZEltYWdlLkxvY2FsaXplZEltYWdlKCk7XG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC51cmwgIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS51cmwgPSBTdHJpbmcob2JqZWN0LnVybCk7XG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC5tZWRpYV90eXBlICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubWVkaWFfdHlwZSA9IFN0cmluZyhvYmplY3QubWVkaWFfdHlwZSk7XG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC5sYW5ndWFnZSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmxhbmd1YWdlID0gU3RyaW5nKG9iamVjdC5sYW5ndWFnZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIExvY2FsaXplZEltYWdlIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b09iamVjdFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZEltYWdlLkxvY2FsaXplZEltYWdlXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZEltYWdlLkxvY2FsaXplZEltYWdlfSBtZXNzYWdlIExvY2FsaXplZEltYWdlXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gUGxhaW4gb2JqZWN0XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIExvY2FsaXplZEltYWdlLnRvT2JqZWN0ID0gZnVuY3Rpb24gdG9PYmplY3QobWVzc2FnZSwgb3B0aW9ucykge1xuICAgICAgICAgICAgICAgIGlmICghb3B0aW9ucylcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgICAgICAgICAgIHZhciBvYmplY3QgPSB7fTtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5kZWZhdWx0cykge1xuICAgICAgICAgICAgICAgICAgICBvYmplY3QudXJsID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0Lm1lZGlhX3R5cGUgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICBvYmplY3QubGFuZ3VhZ2UgPSBcIlwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS51cmwgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwidXJsXCIpKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3QudXJsID0gbWVzc2FnZS51cmw7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UubWVkaWFfdHlwZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJtZWRpYV90eXBlXCIpKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3QubWVkaWFfdHlwZSA9IG1lc3NhZ2UubWVkaWFfdHlwZTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5sYW5ndWFnZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJsYW5ndWFnZVwiKSlcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0Lmxhbmd1YWdlID0gbWVzc2FnZS5sYW5ndWFnZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIExvY2FsaXplZEltYWdlIHRvIEpTT04uXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdG9KU09OXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkSW1hZ2UuTG9jYWxpemVkSW1hZ2VcbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBKU09OIG9iamVjdFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBMb2NhbGl6ZWRJbWFnZS5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsICRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBHZXRzIHRoZSBkZWZhdWx0IHR5cGUgdXJsIGZvciBMb2NhbGl6ZWRJbWFnZVxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGdldFR5cGVVcmxcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRJbWFnZS5Mb2NhbGl6ZWRJbWFnZVxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFt0eXBlVXJsUHJlZml4XSB5b3VyIGN1c3RvbSB0eXBlVXJsUHJlZml4KGRlZmF1bHQgXCJ0eXBlLmdvb2dsZWFwaXMuY29tXCIpXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgZGVmYXVsdCB0eXBlIHVybFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBMb2NhbGl6ZWRJbWFnZS5nZXRUeXBlVXJsID0gZnVuY3Rpb24gZ2V0VHlwZVVybCh0eXBlVXJsUHJlZml4KSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVVcmxQcmVmaXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB0eXBlVXJsUHJlZml4ID0gXCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0eXBlVXJsUHJlZml4ICsgXCIvdHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkSW1hZ2UuTG9jYWxpemVkSW1hZ2VcIjtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJldHVybiBMb2NhbGl6ZWRJbWFnZTtcbiAgICAgICAgfSkoKTtcblxuICAgICAgICByZXR1cm4gVHJhbnNsYXRlZEltYWdlO1xuICAgIH0pKCk7XG5cbiAgICB0cmFuc2l0X3JlYWx0aW1lLlNoYXBlID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgU2hhcGUuXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lXG4gICAgICAgICAqIEBpbnRlcmZhY2UgSVNoYXBlXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfG51bGx9IFtzaGFwZV9pZF0gU2hhcGUgc2hhcGVfaWRcbiAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW2VuY29kZWRfcG9seWxpbmVdIFNoYXBlIGVuY29kZWRfcG9seWxpbmVcbiAgICAgICAgICovXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgU2hhcGUuXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lXG4gICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIFNoYXBlLlxuICAgICAgICAgKiBAaW1wbGVtZW50cyBJU2hhcGVcbiAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAqIEBwYXJhbSB7dHJhbnNpdF9yZWFsdGltZS5JU2hhcGU9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIFNoYXBlKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogU2hhcGUgc2hhcGVfaWQuXG4gICAgICAgICAqIEBtZW1iZXIge3N0cmluZ30gc2hhcGVfaWRcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuU2hhcGVcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBTaGFwZS5wcm90b3R5cGUuc2hhcGVfaWQgPSBcIlwiO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTaGFwZSBlbmNvZGVkX3BvbHlsaW5lLlxuICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IGVuY29kZWRfcG9seWxpbmVcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuU2hhcGVcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBTaGFwZS5wcm90b3R5cGUuZW5jb2RlZF9wb2x5bGluZSA9IFwiXCI7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYSBuZXcgU2hhcGUgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLlxuICAgICAgICAgKiBAZnVuY3Rpb24gY3JlYXRlXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlNoYXBlXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHt0cmFuc2l0X3JlYWx0aW1lLklTaGFwZT19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgKiBAcmV0dXJucyB7dHJhbnNpdF9yZWFsdGltZS5TaGFwZX0gU2hhcGUgaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIFNoYXBlLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFNoYXBlKHByb3BlcnRpZXMpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgU2hhcGUgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgdHJhbnNpdF9yZWFsdGltZS5TaGFwZS52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5TaGFwZVxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7dHJhbnNpdF9yZWFsdGltZS5JU2hhcGV9IG1lc3NhZ2UgU2hhcGUgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAqL1xuICAgICAgICBTaGFwZS5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc2hhcGVfaWQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInNoYXBlX2lkXCIpKVxuICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuc3RyaW5nKG1lc3NhZ2Uuc2hhcGVfaWQpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZW5jb2RlZF9wb2x5bGluZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwiZW5jb2RlZF9wb2x5bGluZVwiKSlcbiAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLnN0cmluZyhtZXNzYWdlLmVuY29kZWRfcG9seWxpbmUpO1xuICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFNoYXBlIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIHRyYW5zaXRfcmVhbHRpbWUuU2hhcGUudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuU2hhcGVcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuSVNoYXBlfSBtZXNzYWdlIFNoYXBlIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgKi9cbiAgICAgICAgU2hhcGUuZW5jb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikubGRlbGltKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlY29kZXMgYSBTaGFwZSBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlNoYXBlXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAqIEByZXR1cm5zIHt0cmFuc2l0X3JlYWx0aW1lLlNoYXBlfSBTaGFwZVxuICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICovXG4gICAgICAgIFNoYXBlLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCwgZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlNoYXBlKCk7XG4gICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgaWYgKHRhZyA9PT0gZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnNoYXBlX2lkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIDI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5jb2RlZF9wb2x5bGluZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRGVjb2RlcyBhIFNoYXBlIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuXG4gICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWRcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuU2hhcGVcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICogQHJldHVybnMge3RyYW5zaXRfcmVhbHRpbWUuU2hhcGV9IFNoYXBlXG4gICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgKi9cbiAgICAgICAgU2hhcGUuZGVjb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkKHJlYWRlcikge1xuICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgcmVhZGVyID0gbmV3ICRSZWFkZXIocmVhZGVyKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFZlcmlmaWVzIGEgU2hhcGUgbWVzc2FnZS5cbiAgICAgICAgICogQGZ1bmN0aW9uIHZlcmlmeVxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5TaGFwZVxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeVxuICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9IGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdFxuICAgICAgICAgKi9cbiAgICAgICAgU2hhcGUudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSAhPT0gXCJvYmplY3RcIiB8fCBtZXNzYWdlID09PSBudWxsKVxuICAgICAgICAgICAgICAgIHJldHVybiBcIm9iamVjdCBleHBlY3RlZFwiO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc2hhcGVfaWQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwic2hhcGVfaWRcIikpXG4gICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc1N0cmluZyhtZXNzYWdlLnNoYXBlX2lkKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwic2hhcGVfaWQ6IHN0cmluZyBleHBlY3RlZFwiO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZW5jb2RlZF9wb2x5bGluZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJlbmNvZGVkX3BvbHlsaW5lXCIpKVxuICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNTdHJpbmcobWVzc2FnZS5lbmNvZGVkX3BvbHlsaW5lKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiZW5jb2RlZF9wb2x5bGluZTogc3RyaW5nIGV4cGVjdGVkXCI7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlcyBhIFNoYXBlIG1lc3NhZ2UgZnJvbSBhIHBsYWluIG9iamVjdC4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBpbnRlcm5hbCB0eXBlcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGZyb21PYmplY3RcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuU2hhcGVcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBvYmplY3QgUGxhaW4gb2JqZWN0XG4gICAgICAgICAqIEByZXR1cm5zIHt0cmFuc2l0X3JlYWx0aW1lLlNoYXBlfSBTaGFwZVxuICAgICAgICAgKi9cbiAgICAgICAgU2hhcGUuZnJvbU9iamVjdCA9IGZ1bmN0aW9uIGZyb21PYmplY3Qob2JqZWN0KSB7XG4gICAgICAgICAgICBpZiAob2JqZWN0IGluc3RhbmNlb2YgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5TaGFwZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBuZXcgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5TaGFwZSgpO1xuICAgICAgICAgICAgaWYgKG9iamVjdC5zaGFwZV9pZCAhPSBudWxsKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2hhcGVfaWQgPSBTdHJpbmcob2JqZWN0LnNoYXBlX2lkKTtcbiAgICAgICAgICAgIGlmIChvYmplY3QuZW5jb2RlZF9wb2x5bGluZSAhPSBudWxsKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UuZW5jb2RlZF9wb2x5bGluZSA9IFN0cmluZyhvYmplY3QuZW5jb2RlZF9wb2x5bGluZSk7XG4gICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgU2hhcGUgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLlxuICAgICAgICAgKiBAZnVuY3Rpb24gdG9PYmplY3RcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuU2hhcGVcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuU2hhcGV9IG1lc3NhZ2UgU2hhcGVcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuSUNvbnZlcnNpb25PcHRpb25zfSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zXG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gUGxhaW4gb2JqZWN0XG4gICAgICAgICAqL1xuICAgICAgICBTaGFwZS50b09iamVjdCA9IGZ1bmN0aW9uIHRvT2JqZWN0KG1lc3NhZ2UsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIGlmICghb3B0aW9ucylcbiAgICAgICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgICAgICB2YXIgb2JqZWN0ID0ge307XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5kZWZhdWx0cykge1xuICAgICAgICAgICAgICAgIG9iamVjdC5zaGFwZV9pZCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgb2JqZWN0LmVuY29kZWRfcG9seWxpbmUgPSBcIlwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc2hhcGVfaWQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwic2hhcGVfaWRcIikpXG4gICAgICAgICAgICAgICAgb2JqZWN0LnNoYXBlX2lkID0gbWVzc2FnZS5zaGFwZV9pZDtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmVuY29kZWRfcG9seWxpbmUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiZW5jb2RlZF9wb2x5bGluZVwiKSlcbiAgICAgICAgICAgICAgICBvYmplY3QuZW5jb2RlZF9wb2x5bGluZSA9IG1lc3NhZ2UuZW5jb2RlZF9wb2x5bGluZTtcbiAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbnZlcnRzIHRoaXMgU2hhcGUgdG8gSlNPTi5cbiAgICAgICAgICogQGZ1bmN0aW9uIHRvSlNPTlxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5TaGFwZVxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBKU09OIG9iamVjdFxuICAgICAgICAgKi9cbiAgICAgICAgU2hhcGUucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsICRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXRzIHRoZSBkZWZhdWx0IHR5cGUgdXJsIGZvciBTaGFwZVxuICAgICAgICAgKiBAZnVuY3Rpb24gZ2V0VHlwZVVybFxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5TaGFwZVxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbdHlwZVVybFByZWZpeF0geW91ciBjdXN0b20gdHlwZVVybFByZWZpeChkZWZhdWx0IFwidHlwZS5nb29nbGVhcGlzLmNvbVwiKVxuICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgZGVmYXVsdCB0eXBlIHVybFxuICAgICAgICAgKi9cbiAgICAgICAgU2hhcGUuZ2V0VHlwZVVybCA9IGZ1bmN0aW9uIGdldFR5cGVVcmwodHlwZVVybFByZWZpeCkge1xuICAgICAgICAgICAgaWYgKHR5cGVVcmxQcmVmaXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHR5cGVVcmxQcmVmaXggPSBcInR5cGUuZ29vZ2xlYXBpcy5jb21cIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0eXBlVXJsUHJlZml4ICsgXCIvdHJhbnNpdF9yZWFsdGltZS5TaGFwZVwiO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBTaGFwZTtcbiAgICB9KSgpO1xuXG4gICAgdHJhbnNpdF9yZWFsdGltZS5TdG9wID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgU3RvcC5cbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWVcbiAgICAgICAgICogQGludGVyZmFjZSBJU3RvcFxuICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbc3RvcF9pZF0gU3RvcCBzdG9wX2lkXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7dHJhbnNpdF9yZWFsdGltZS5JVHJhbnNsYXRlZFN0cmluZ3xudWxsfSBbc3RvcF9jb2RlXSBTdG9wIHN0b3BfY29kZVxuICAgICAgICAgKiBAcHJvcGVydHkge3RyYW5zaXRfcmVhbHRpbWUuSVRyYW5zbGF0ZWRTdHJpbmd8bnVsbH0gW3N0b3BfbmFtZV0gU3RvcCBzdG9wX25hbWVcbiAgICAgICAgICogQHByb3BlcnR5IHt0cmFuc2l0X3JlYWx0aW1lLklUcmFuc2xhdGVkU3RyaW5nfG51bGx9IFt0dHNfc3RvcF9uYW1lXSBTdG9wIHR0c19zdG9wX25hbWVcbiAgICAgICAgICogQHByb3BlcnR5IHt0cmFuc2l0X3JlYWx0aW1lLklUcmFuc2xhdGVkU3RyaW5nfG51bGx9IFtzdG9wX2Rlc2NdIFN0b3Agc3RvcF9kZXNjXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfG51bGx9IFtzdG9wX2xhdF0gU3RvcCBzdG9wX2xhdFxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbc3RvcF9sb25dIFN0b3Agc3RvcF9sb25cbiAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW3pvbmVfaWRdIFN0b3Agem9uZV9pZFxuICAgICAgICAgKiBAcHJvcGVydHkge3RyYW5zaXRfcmVhbHRpbWUuSVRyYW5zbGF0ZWRTdHJpbmd8bnVsbH0gW3N0b3BfdXJsXSBTdG9wIHN0b3BfdXJsXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfG51bGx9IFtwYXJlbnRfc3RhdGlvbl0gU3RvcCBwYXJlbnRfc3RhdGlvblxuICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbc3RvcF90aW1lem9uZV0gU3RvcCBzdG9wX3RpbWV6b25lXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7dHJhbnNpdF9yZWFsdGltZS5TdG9wLldoZWVsY2hhaXJCb2FyZGluZ3xudWxsfSBbd2hlZWxjaGFpcl9ib2FyZGluZ10gU3RvcCB3aGVlbGNoYWlyX2JvYXJkaW5nXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfG51bGx9IFtsZXZlbF9pZF0gU3RvcCBsZXZlbF9pZFxuICAgICAgICAgKiBAcHJvcGVydHkge3RyYW5zaXRfcmVhbHRpbWUuSVRyYW5zbGF0ZWRTdHJpbmd8bnVsbH0gW3BsYXRmb3JtX2NvZGVdIFN0b3AgcGxhdGZvcm1fY29kZVxuICAgICAgICAgKi9cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBTdG9wLlxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZVxuICAgICAgICAgKiBAY2xhc3NkZXNjIFJlcHJlc2VudHMgYSBTdG9wLlxuICAgICAgICAgKiBAaW1wbGVtZW50cyBJU3RvcFxuICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICogQHBhcmFtIHt0cmFuc2l0X3JlYWx0aW1lLklTdG9wPX0gW3Byb3BlcnRpZXNdIFByb3BlcnRpZXMgdG8gc2V0XG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBTdG9wKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogU3RvcCBzdG9wX2lkLlxuICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IHN0b3BfaWRcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuU3RvcFxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIFN0b3AucHJvdG90eXBlLnN0b3BfaWQgPSBcIlwiO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTdG9wIHN0b3BfY29kZS5cbiAgICAgICAgICogQG1lbWJlciB7dHJhbnNpdF9yZWFsdGltZS5JVHJhbnNsYXRlZFN0cmluZ3xudWxsfHVuZGVmaW5lZH0gc3RvcF9jb2RlXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlN0b3BcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBTdG9wLnByb3RvdHlwZS5zdG9wX2NvZGUgPSBudWxsO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTdG9wIHN0b3BfbmFtZS5cbiAgICAgICAgICogQG1lbWJlciB7dHJhbnNpdF9yZWFsdGltZS5JVHJhbnNsYXRlZFN0cmluZ3xudWxsfHVuZGVmaW5lZH0gc3RvcF9uYW1lXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlN0b3BcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBTdG9wLnByb3RvdHlwZS5zdG9wX25hbWUgPSBudWxsO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTdG9wIHR0c19zdG9wX25hbWUuXG4gICAgICAgICAqIEBtZW1iZXIge3RyYW5zaXRfcmVhbHRpbWUuSVRyYW5zbGF0ZWRTdHJpbmd8bnVsbHx1bmRlZmluZWR9IHR0c19zdG9wX25hbWVcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuU3RvcFxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIFN0b3AucHJvdG90eXBlLnR0c19zdG9wX25hbWUgPSBudWxsO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTdG9wIHN0b3BfZGVzYy5cbiAgICAgICAgICogQG1lbWJlciB7dHJhbnNpdF9yZWFsdGltZS5JVHJhbnNsYXRlZFN0cmluZ3xudWxsfHVuZGVmaW5lZH0gc3RvcF9kZXNjXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlN0b3BcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBTdG9wLnByb3RvdHlwZS5zdG9wX2Rlc2MgPSBudWxsO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTdG9wIHN0b3BfbGF0LlxuICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9IHN0b3BfbGF0XG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlN0b3BcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBTdG9wLnByb3RvdHlwZS5zdG9wX2xhdCA9IDA7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFN0b3Agc3RvcF9sb24uXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn0gc3RvcF9sb25cbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuU3RvcFxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIFN0b3AucHJvdG90eXBlLnN0b3BfbG9uID0gMDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogU3RvcCB6b25lX2lkLlxuICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IHpvbmVfaWRcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuU3RvcFxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIFN0b3AucHJvdG90eXBlLnpvbmVfaWQgPSBcIlwiO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTdG9wIHN0b3BfdXJsLlxuICAgICAgICAgKiBAbWVtYmVyIHt0cmFuc2l0X3JlYWx0aW1lLklUcmFuc2xhdGVkU3RyaW5nfG51bGx8dW5kZWZpbmVkfSBzdG9wX3VybFxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5TdG9wXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgU3RvcC5wcm90b3R5cGUuc3RvcF91cmwgPSBudWxsO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTdG9wIHBhcmVudF9zdGF0aW9uLlxuICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IHBhcmVudF9zdGF0aW9uXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlN0b3BcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBTdG9wLnByb3RvdHlwZS5wYXJlbnRfc3RhdGlvbiA9IFwiXCI7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFN0b3Agc3RvcF90aW1lem9uZS5cbiAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfSBzdG9wX3RpbWV6b25lXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlN0b3BcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBTdG9wLnByb3RvdHlwZS5zdG9wX3RpbWV6b25lID0gXCJcIjtcblxuICAgICAgICAvKipcbiAgICAgICAgICogU3RvcCB3aGVlbGNoYWlyX2JvYXJkaW5nLlxuICAgICAgICAgKiBAbWVtYmVyIHt0cmFuc2l0X3JlYWx0aW1lLlN0b3AuV2hlZWxjaGFpckJvYXJkaW5nfSB3aGVlbGNoYWlyX2JvYXJkaW5nXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlN0b3BcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBTdG9wLnByb3RvdHlwZS53aGVlbGNoYWlyX2JvYXJkaW5nID0gMDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogU3RvcCBsZXZlbF9pZC5cbiAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfSBsZXZlbF9pZFxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5TdG9wXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgU3RvcC5wcm90b3R5cGUubGV2ZWxfaWQgPSBcIlwiO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTdG9wIHBsYXRmb3JtX2NvZGUuXG4gICAgICAgICAqIEBtZW1iZXIge3RyYW5zaXRfcmVhbHRpbWUuSVRyYW5zbGF0ZWRTdHJpbmd8bnVsbHx1bmRlZmluZWR9IHBsYXRmb3JtX2NvZGVcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuU3RvcFxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIFN0b3AucHJvdG90eXBlLnBsYXRmb3JtX2NvZGUgPSBudWxsO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IFN0b3AgaW5zdGFuY2UgdXNpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLlxuICAgICAgICAgKiBAZnVuY3Rpb24gY3JlYXRlXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlN0b3BcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuSVN0b3A9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICogQHJldHVybnMge3RyYW5zaXRfcmVhbHRpbWUuU3RvcH0gU3RvcCBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgU3RvcC5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUocHJvcGVydGllcykge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBTdG9wKHByb3BlcnRpZXMpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgU3RvcCBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayB0cmFuc2l0X3JlYWx0aW1lLlN0b3AudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuU3RvcFxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7dHJhbnNpdF9yZWFsdGltZS5JU3RvcH0gbWVzc2FnZSBTdG9wIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgKi9cbiAgICAgICAgU3RvcC5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICB3cml0ZXIgPSAkV3JpdGVyLmNyZWF0ZSgpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc3RvcF9pZCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwic3RvcF9pZFwiKSlcbiAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLnN0cmluZyhtZXNzYWdlLnN0b3BfaWQpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc3RvcF9jb2RlICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJzdG9wX2NvZGVcIikpXG4gICAgICAgICAgICAgICAgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nLmVuY29kZShtZXNzYWdlLnN0b3BfY29kZSwgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAyID0qLzE4KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc3RvcF9uYW1lICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJzdG9wX25hbWVcIikpXG4gICAgICAgICAgICAgICAgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nLmVuY29kZShtZXNzYWdlLnN0b3BfbmFtZSwgd3JpdGVyLnVpbnQzMigvKiBpZCAzLCB3aXJlVHlwZSAyID0qLzI2KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UudHRzX3N0b3BfbmFtZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwidHRzX3N0b3BfbmFtZVwiKSlcbiAgICAgICAgICAgICAgICAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRTdHJpbmcuZW5jb2RlKG1lc3NhZ2UudHRzX3N0b3BfbmFtZSwgd3JpdGVyLnVpbnQzMigvKiBpZCA0LCB3aXJlVHlwZSAyID0qLzM0KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc3RvcF9kZXNjICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJzdG9wX2Rlc2NcIikpXG4gICAgICAgICAgICAgICAgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nLmVuY29kZShtZXNzYWdlLnN0b3BfZGVzYywgd3JpdGVyLnVpbnQzMigvKiBpZCA1LCB3aXJlVHlwZSAyID0qLzQyKS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc3RvcF9sYXQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInN0b3BfbGF0XCIpKVxuICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgNiwgd2lyZVR5cGUgNSA9Ki81MykuZmxvYXQobWVzc2FnZS5zdG9wX2xhdCk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5zdG9wX2xvbiAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwic3RvcF9sb25cIikpXG4gICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCA3LCB3aXJlVHlwZSA1ID0qLzYxKS5mbG9hdChtZXNzYWdlLnN0b3BfbG9uKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnpvbmVfaWQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInpvbmVfaWRcIikpXG4gICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCA4LCB3aXJlVHlwZSAyID0qLzY2KS5zdHJpbmcobWVzc2FnZS56b25lX2lkKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnN0b3BfdXJsICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJzdG9wX3VybFwiKSlcbiAgICAgICAgICAgICAgICAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRTdHJpbmcuZW5jb2RlKG1lc3NhZ2Uuc3RvcF91cmwsIHdyaXRlci51aW50MzIoLyogaWQgOSwgd2lyZVR5cGUgMiA9Ki83NCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnBhcmVudF9zdGF0aW9uICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJwYXJlbnRfc3RhdGlvblwiKSlcbiAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDExLCB3aXJlVHlwZSAyID0qLzkwKS5zdHJpbmcobWVzc2FnZS5wYXJlbnRfc3RhdGlvbik7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5zdG9wX3RpbWV6b25lICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJzdG9wX3RpbWV6b25lXCIpKVxuICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMTIsIHdpcmVUeXBlIDIgPSovOTgpLnN0cmluZyhtZXNzYWdlLnN0b3BfdGltZXpvbmUpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uud2hlZWxjaGFpcl9ib2FyZGluZyAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwid2hlZWxjaGFpcl9ib2FyZGluZ1wiKSlcbiAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDEzLCB3aXJlVHlwZSAwID0qLzEwNCkuaW50MzIobWVzc2FnZS53aGVlbGNoYWlyX2JvYXJkaW5nKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmxldmVsX2lkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJsZXZlbF9pZFwiKSlcbiAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDE0LCB3aXJlVHlwZSAyID0qLzExNCkuc3RyaW5nKG1lc3NhZ2UubGV2ZWxfaWQpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UucGxhdGZvcm1fY29kZSAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwicGxhdGZvcm1fY29kZVwiKSlcbiAgICAgICAgICAgICAgICAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRTdHJpbmcuZW5jb2RlKG1lc3NhZ2UucGxhdGZvcm1fY29kZSwgd3JpdGVyLnVpbnQzMigvKiBpZCAxNSwgd2lyZVR5cGUgMiA9Ki8xMjIpLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgU3RvcCBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayB0cmFuc2l0X3JlYWx0aW1lLlN0b3AudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWRcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuU3RvcFxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7dHJhbnNpdF9yZWFsdGltZS5JU3RvcH0gbWVzc2FnZSBTdG9wIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgKi9cbiAgICAgICAgU3RvcC5lbmNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGUobWVzc2FnZSwgd3JpdGVyKS5sZGVsaW0oKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRGVjb2RlcyBhIFN0b3AgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5TdG9wXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAqIEByZXR1cm5zIHt0cmFuc2l0X3JlYWx0aW1lLlN0b3B9IFN0b3BcbiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAqL1xuICAgICAgICBTdG9wLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShyZWFkZXIsIGxlbmd0aCwgZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICB2YXIgZW5kID0gbGVuZ3RoID09PSB1bmRlZmluZWQgPyByZWFkZXIubGVuIDogcmVhZGVyLnBvcyArIGxlbmd0aCwgbWVzc2FnZSA9IG5ldyAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlN0b3AoKTtcbiAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICBpZiAodGFnID09PSBlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3RvcF9pZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAyOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnN0b3BfY29kZSA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZFN0cmluZy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIDM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3RvcF9uYW1lID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgNDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS50dHNfc3RvcF9uYW1lID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgNToge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zdG9wX2Rlc2MgPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRTdHJpbmcuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSA2OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnN0b3BfbGF0ID0gcmVhZGVyLmZsb2F0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgNzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zdG9wX2xvbiA9IHJlYWRlci5mbG9hdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIDg6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuem9uZV9pZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSA5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnN0b3BfdXJsID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgMTE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucGFyZW50X3N0YXRpb24gPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgMTI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3RvcF90aW1lem9uZSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAxMzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS53aGVlbGNoYWlyX2JvYXJkaW5nID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgMTQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubGV2ZWxfaWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgMTU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucGxhdGZvcm1fY29kZSA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZFN0cmluZy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWNvZGVzIGEgU3RvcCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLlxuICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlN0b3BcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICogQHJldHVybnMge3RyYW5zaXRfcmVhbHRpbWUuU3RvcH0gU3RvcFxuICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICovXG4gICAgICAgIFN0b3AuZGVjb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkKHJlYWRlcikge1xuICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgcmVhZGVyID0gbmV3ICRSZWFkZXIocmVhZGVyKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFZlcmlmaWVzIGEgU3RvcCBtZXNzYWdlLlxuICAgICAgICAgKiBAZnVuY3Rpb24gdmVyaWZ5XG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlN0b3BcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnlcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfSBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3RcbiAgICAgICAgICovXG4gICAgICAgIFN0b3AudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSAhPT0gXCJvYmplY3RcIiB8fCBtZXNzYWdlID09PSBudWxsKVxuICAgICAgICAgICAgICAgIHJldHVybiBcIm9iamVjdCBleHBlY3RlZFwiO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc3RvcF9pZCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzdG9wX2lkXCIpKVxuICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNTdHJpbmcobWVzc2FnZS5zdG9wX2lkKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwic3RvcF9pZDogc3RyaW5nIGV4cGVjdGVkXCI7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5zdG9wX2NvZGUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwic3RvcF9jb2RlXCIpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nLnZlcmlmeShtZXNzYWdlLnN0b3BfY29kZSk7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJzdG9wX2NvZGUuXCIgKyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnN0b3BfbmFtZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzdG9wX25hbWVcIikpIHtcbiAgICAgICAgICAgICAgICB2YXIgZXJyb3IgPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRTdHJpbmcudmVyaWZ5KG1lc3NhZ2Uuc3RvcF9uYW1lKTtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcInN0b3BfbmFtZS5cIiArIGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UudHRzX3N0b3BfbmFtZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJ0dHNfc3RvcF9uYW1lXCIpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVycm9yID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nLnZlcmlmeShtZXNzYWdlLnR0c19zdG9wX25hbWUpO1xuICAgICAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwidHRzX3N0b3BfbmFtZS5cIiArIGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc3RvcF9kZXNjICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInN0b3BfZGVzY1wiKSkge1xuICAgICAgICAgICAgICAgIHZhciBlcnJvciA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZFN0cmluZy52ZXJpZnkobWVzc2FnZS5zdG9wX2Rlc2MpO1xuICAgICAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwic3RvcF9kZXNjLlwiICsgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5zdG9wX2xhdCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzdG9wX2xhdFwiKSlcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2Uuc3RvcF9sYXQgIT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcInN0b3BfbGF0OiBudW1iZXIgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnN0b3BfbG9uICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInN0b3BfbG9uXCIpKVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZS5zdG9wX2xvbiAhPT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwic3RvcF9sb246IG51bWJlciBleHBlY3RlZFwiO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuem9uZV9pZCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJ6b25lX2lkXCIpKVxuICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNTdHJpbmcobWVzc2FnZS56b25lX2lkKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiem9uZV9pZDogc3RyaW5nIGV4cGVjdGVkXCI7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5zdG9wX3VybCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzdG9wX3VybFwiKSkge1xuICAgICAgICAgICAgICAgIHZhciBlcnJvciA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZFN0cmluZy52ZXJpZnkobWVzc2FnZS5zdG9wX3VybCk7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJzdG9wX3VybC5cIiArIGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UucGFyZW50X3N0YXRpb24gIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicGFyZW50X3N0YXRpb25cIikpXG4gICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc1N0cmluZyhtZXNzYWdlLnBhcmVudF9zdGF0aW9uKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwicGFyZW50X3N0YXRpb246IHN0cmluZyBleHBlY3RlZFwiO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc3RvcF90aW1lem9uZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzdG9wX3RpbWV6b25lXCIpKVxuICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNTdHJpbmcobWVzc2FnZS5zdG9wX3RpbWV6b25lKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwic3RvcF90aW1lem9uZTogc3RyaW5nIGV4cGVjdGVkXCI7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS53aGVlbGNoYWlyX2JvYXJkaW5nICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcIndoZWVsY2hhaXJfYm9hcmRpbmdcIikpXG4gICAgICAgICAgICAgICAgc3dpdGNoIChtZXNzYWdlLndoZWVsY2hhaXJfYm9hcmRpbmcpIHtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJ3aGVlbGNoYWlyX2JvYXJkaW5nOiBlbnVtIHZhbHVlIGV4cGVjdGVkXCI7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmxldmVsX2lkICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImxldmVsX2lkXCIpKVxuICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNTdHJpbmcobWVzc2FnZS5sZXZlbF9pZCkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImxldmVsX2lkOiBzdHJpbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnBsYXRmb3JtX2NvZGUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicGxhdGZvcm1fY29kZVwiKSkge1xuICAgICAgICAgICAgICAgIHZhciBlcnJvciA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZFN0cmluZy52ZXJpZnkobWVzc2FnZS5wbGF0Zm9ybV9jb2RlKTtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcInBsYXRmb3JtX2NvZGUuXCIgKyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDcmVhdGVzIGEgU3RvcCBtZXNzYWdlIGZyb20gYSBwbGFpbiBvYmplY3QuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIHRoZWlyIHJlc3BlY3RpdmUgaW50ZXJuYWwgdHlwZXMuXG4gICAgICAgICAqIEBmdW5jdGlvbiBmcm9tT2JqZWN0XG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlN0b3BcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBvYmplY3QgUGxhaW4gb2JqZWN0XG4gICAgICAgICAqIEByZXR1cm5zIHt0cmFuc2l0X3JlYWx0aW1lLlN0b3B9IFN0b3BcbiAgICAgICAgICovXG4gICAgICAgIFN0b3AuZnJvbU9iamVjdCA9IGZ1bmN0aW9uIGZyb21PYmplY3Qob2JqZWN0KSB7XG4gICAgICAgICAgICBpZiAob2JqZWN0IGluc3RhbmNlb2YgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5TdG9wKVxuICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICAgICAgICB2YXIgbWVzc2FnZSA9IG5ldyAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlN0b3AoKTtcbiAgICAgICAgICAgIGlmIChvYmplY3Quc3RvcF9pZCAhPSBudWxsKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3RvcF9pZCA9IFN0cmluZyhvYmplY3Quc3RvcF9pZCk7XG4gICAgICAgICAgICBpZiAob2JqZWN0LnN0b3BfY29kZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmplY3Quc3RvcF9jb2RlICE9PSBcIm9iamVjdFwiKVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoXCIudHJhbnNpdF9yZWFsdGltZS5TdG9wLnN0b3BfY29kZTogb2JqZWN0IGV4cGVjdGVkXCIpO1xuICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3RvcF9jb2RlID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nLmZyb21PYmplY3Qob2JqZWN0LnN0b3BfY29kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob2JqZWN0LnN0b3BfbmFtZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmplY3Quc3RvcF9uYW1lICE9PSBcIm9iamVjdFwiKVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoXCIudHJhbnNpdF9yZWFsdGltZS5TdG9wLnN0b3BfbmFtZTogb2JqZWN0IGV4cGVjdGVkXCIpO1xuICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3RvcF9uYW1lID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nLmZyb21PYmplY3Qob2JqZWN0LnN0b3BfbmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob2JqZWN0LnR0c19zdG9wX25hbWUgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqZWN0LnR0c19zdG9wX25hbWUgIT09IFwib2JqZWN0XCIpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcihcIi50cmFuc2l0X3JlYWx0aW1lLlN0b3AudHRzX3N0b3BfbmFtZTogb2JqZWN0IGV4cGVjdGVkXCIpO1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UudHRzX3N0b3BfbmFtZSA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZFN0cmluZy5mcm9tT2JqZWN0KG9iamVjdC50dHNfc3RvcF9uYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvYmplY3Quc3RvcF9kZXNjICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9iamVjdC5zdG9wX2Rlc2MgIT09IFwib2JqZWN0XCIpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcihcIi50cmFuc2l0X3JlYWx0aW1lLlN0b3Auc3RvcF9kZXNjOiBvYmplY3QgZXhwZWN0ZWRcIik7XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5zdG9wX2Rlc2MgPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRTdHJpbmcuZnJvbU9iamVjdChvYmplY3Quc3RvcF9kZXNjKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvYmplY3Quc3RvcF9sYXQgIT0gbnVsbClcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnN0b3BfbGF0ID0gTnVtYmVyKG9iamVjdC5zdG9wX2xhdCk7XG4gICAgICAgICAgICBpZiAob2JqZWN0LnN0b3BfbG9uICE9IG51bGwpXG4gICAgICAgICAgICAgICAgbWVzc2FnZS5zdG9wX2xvbiA9IE51bWJlcihvYmplY3Quc3RvcF9sb24pO1xuICAgICAgICAgICAgaWYgKG9iamVjdC56b25lX2lkICE9IG51bGwpXG4gICAgICAgICAgICAgICAgbWVzc2FnZS56b25lX2lkID0gU3RyaW5nKG9iamVjdC56b25lX2lkKTtcbiAgICAgICAgICAgIGlmIChvYmplY3Quc3RvcF91cmwgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqZWN0LnN0b3BfdXJsICE9PSBcIm9iamVjdFwiKVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoXCIudHJhbnNpdF9yZWFsdGltZS5TdG9wLnN0b3BfdXJsOiBvYmplY3QgZXhwZWN0ZWRcIik7XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5zdG9wX3VybCA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZFN0cmluZy5mcm9tT2JqZWN0KG9iamVjdC5zdG9wX3VybCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob2JqZWN0LnBhcmVudF9zdGF0aW9uICE9IG51bGwpXG4gICAgICAgICAgICAgICAgbWVzc2FnZS5wYXJlbnRfc3RhdGlvbiA9IFN0cmluZyhvYmplY3QucGFyZW50X3N0YXRpb24pO1xuICAgICAgICAgICAgaWYgKG9iamVjdC5zdG9wX3RpbWV6b25lICE9IG51bGwpXG4gICAgICAgICAgICAgICAgbWVzc2FnZS5zdG9wX3RpbWV6b25lID0gU3RyaW5nKG9iamVjdC5zdG9wX3RpbWV6b25lKTtcbiAgICAgICAgICAgIHN3aXRjaCAob2JqZWN0LndoZWVsY2hhaXJfYm9hcmRpbmcpIHtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmplY3Qud2hlZWxjaGFpcl9ib2FyZGluZyA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLndoZWVsY2hhaXJfYm9hcmRpbmcgPSBvYmplY3Qud2hlZWxjaGFpcl9ib2FyZGluZztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIlVOS05PV05cIjpcbiAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICBtZXNzYWdlLndoZWVsY2hhaXJfYm9hcmRpbmcgPSAwO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkFWQUlMQUJMRVwiOlxuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIG1lc3NhZ2Uud2hlZWxjaGFpcl9ib2FyZGluZyA9IDE7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiTk9UX0FWQUlMQUJMRVwiOlxuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgIG1lc3NhZ2Uud2hlZWxjaGFpcl9ib2FyZGluZyA9IDI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob2JqZWN0LmxldmVsX2lkICE9IG51bGwpXG4gICAgICAgICAgICAgICAgbWVzc2FnZS5sZXZlbF9pZCA9IFN0cmluZyhvYmplY3QubGV2ZWxfaWQpO1xuICAgICAgICAgICAgaWYgKG9iamVjdC5wbGF0Zm9ybV9jb2RlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9iamVjdC5wbGF0Zm9ybV9jb2RlICE9PSBcIm9iamVjdFwiKVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoXCIudHJhbnNpdF9yZWFsdGltZS5TdG9wLnBsYXRmb3JtX2NvZGU6IG9iamVjdCBleHBlY3RlZFwiKTtcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnBsYXRmb3JtX2NvZGUgPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRTdHJpbmcuZnJvbU9iamVjdChvYmplY3QucGxhdGZvcm1fY29kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgU3RvcCBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXG4gICAgICAgICAqIEBmdW5jdGlvbiB0b09iamVjdFxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5TdG9wXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHt0cmFuc2l0X3JlYWx0aW1lLlN0b3B9IG1lc3NhZ2UgU3RvcFxuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcbiAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBQbGFpbiBvYmplY3RcbiAgICAgICAgICovXG4gICAgICAgIFN0b3AudG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdChtZXNzYWdlLCBvcHRpb25zKSB7XG4gICAgICAgICAgICBpZiAoIW9wdGlvbnMpXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgICAgICAgdmFyIG9iamVjdCA9IHt9O1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGVmYXVsdHMpIHtcbiAgICAgICAgICAgICAgICBvYmplY3Quc3RvcF9pZCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgb2JqZWN0LnN0b3BfY29kZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgb2JqZWN0LnN0b3BfbmFtZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgb2JqZWN0LnR0c19zdG9wX25hbWUgPSBudWxsO1xuICAgICAgICAgICAgICAgIG9iamVjdC5zdG9wX2Rlc2MgPSBudWxsO1xuICAgICAgICAgICAgICAgIG9iamVjdC5zdG9wX2xhdCA9IDA7XG4gICAgICAgICAgICAgICAgb2JqZWN0LnN0b3BfbG9uID0gMDtcbiAgICAgICAgICAgICAgICBvYmplY3Quem9uZV9pZCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgb2JqZWN0LnN0b3BfdXJsID0gbnVsbDtcbiAgICAgICAgICAgICAgICBvYmplY3QucGFyZW50X3N0YXRpb24gPSBcIlwiO1xuICAgICAgICAgICAgICAgIG9iamVjdC5zdG9wX3RpbWV6b25lID0gXCJcIjtcbiAgICAgICAgICAgICAgICBvYmplY3Qud2hlZWxjaGFpcl9ib2FyZGluZyA9IG9wdGlvbnMuZW51bXMgPT09IFN0cmluZyA/IFwiVU5LTk9XTlwiIDogMDtcbiAgICAgICAgICAgICAgICBvYmplY3QubGV2ZWxfaWQgPSBcIlwiO1xuICAgICAgICAgICAgICAgIG9iamVjdC5wbGF0Zm9ybV9jb2RlID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnN0b3BfaWQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwic3RvcF9pZFwiKSlcbiAgICAgICAgICAgICAgICBvYmplY3Quc3RvcF9pZCA9IG1lc3NhZ2Uuc3RvcF9pZDtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnN0b3BfY29kZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzdG9wX2NvZGVcIikpXG4gICAgICAgICAgICAgICAgb2JqZWN0LnN0b3BfY29kZSA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZFN0cmluZy50b09iamVjdChtZXNzYWdlLnN0b3BfY29kZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5zdG9wX25hbWUgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwic3RvcF9uYW1lXCIpKVxuICAgICAgICAgICAgICAgIG9iamVjdC5zdG9wX25hbWUgPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRTdHJpbmcudG9PYmplY3QobWVzc2FnZS5zdG9wX25hbWUsIG9wdGlvbnMpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UudHRzX3N0b3BfbmFtZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJ0dHNfc3RvcF9uYW1lXCIpKVxuICAgICAgICAgICAgICAgIG9iamVjdC50dHNfc3RvcF9uYW1lID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmFuc2xhdGVkU3RyaW5nLnRvT2JqZWN0KG1lc3NhZ2UudHRzX3N0b3BfbmFtZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5zdG9wX2Rlc2MgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwic3RvcF9kZXNjXCIpKVxuICAgICAgICAgICAgICAgIG9iamVjdC5zdG9wX2Rlc2MgPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRTdHJpbmcudG9PYmplY3QobWVzc2FnZS5zdG9wX2Rlc2MsIG9wdGlvbnMpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc3RvcF9sYXQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwic3RvcF9sYXRcIikpXG4gICAgICAgICAgICAgICAgb2JqZWN0LnN0b3BfbGF0ID0gb3B0aW9ucy5qc29uICYmICFpc0Zpbml0ZShtZXNzYWdlLnN0b3BfbGF0KSA/IFN0cmluZyhtZXNzYWdlLnN0b3BfbGF0KSA6IG1lc3NhZ2Uuc3RvcF9sYXQ7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5zdG9wX2xvbiAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzdG9wX2xvblwiKSlcbiAgICAgICAgICAgICAgICBvYmplY3Quc3RvcF9sb24gPSBvcHRpb25zLmpzb24gJiYgIWlzRmluaXRlKG1lc3NhZ2Uuc3RvcF9sb24pID8gU3RyaW5nKG1lc3NhZ2Uuc3RvcF9sb24pIDogbWVzc2FnZS5zdG9wX2xvbjtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnpvbmVfaWQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwiem9uZV9pZFwiKSlcbiAgICAgICAgICAgICAgICBvYmplY3Quem9uZV9pZCA9IG1lc3NhZ2Uuem9uZV9pZDtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnN0b3BfdXJsICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInN0b3BfdXJsXCIpKVxuICAgICAgICAgICAgICAgIG9iamVjdC5zdG9wX3VybCA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJhbnNsYXRlZFN0cmluZy50b09iamVjdChtZXNzYWdlLnN0b3BfdXJsLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnBhcmVudF9zdGF0aW9uICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInBhcmVudF9zdGF0aW9uXCIpKVxuICAgICAgICAgICAgICAgIG9iamVjdC5wYXJlbnRfc3RhdGlvbiA9IG1lc3NhZ2UucGFyZW50X3N0YXRpb247XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5zdG9wX3RpbWV6b25lICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInN0b3BfdGltZXpvbmVcIikpXG4gICAgICAgICAgICAgICAgb2JqZWN0LnN0b3BfdGltZXpvbmUgPSBtZXNzYWdlLnN0b3BfdGltZXpvbmU7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS53aGVlbGNoYWlyX2JvYXJkaW5nICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcIndoZWVsY2hhaXJfYm9hcmRpbmdcIikpXG4gICAgICAgICAgICAgICAgb2JqZWN0LndoZWVsY2hhaXJfYm9hcmRpbmcgPSBvcHRpb25zLmVudW1zID09PSBTdHJpbmcgPyAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlN0b3AuV2hlZWxjaGFpckJvYXJkaW5nW21lc3NhZ2Uud2hlZWxjaGFpcl9ib2FyZGluZ10gPT09IHVuZGVmaW5lZCA/IG1lc3NhZ2Uud2hlZWxjaGFpcl9ib2FyZGluZyA6ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuU3RvcC5XaGVlbGNoYWlyQm9hcmRpbmdbbWVzc2FnZS53aGVlbGNoYWlyX2JvYXJkaW5nXSA6IG1lc3NhZ2Uud2hlZWxjaGFpcl9ib2FyZGluZztcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmxldmVsX2lkICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImxldmVsX2lkXCIpKVxuICAgICAgICAgICAgICAgIG9iamVjdC5sZXZlbF9pZCA9IG1lc3NhZ2UubGV2ZWxfaWQ7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5wbGF0Zm9ybV9jb2RlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInBsYXRmb3JtX2NvZGVcIikpXG4gICAgICAgICAgICAgICAgb2JqZWN0LnBsYXRmb3JtX2NvZGUgPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyYW5zbGF0ZWRTdHJpbmcudG9PYmplY3QobWVzc2FnZS5wbGF0Zm9ybV9jb2RlLCBvcHRpb25zKTtcbiAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbnZlcnRzIHRoaXMgU3RvcCB0byBKU09OLlxuICAgICAgICAgKiBAZnVuY3Rpb24gdG9KU09OXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlN0b3BcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcbiAgICAgICAgICovXG4gICAgICAgIFN0b3AucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsICRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXRzIHRoZSBkZWZhdWx0IHR5cGUgdXJsIGZvciBTdG9wXG4gICAgICAgICAqIEBmdW5jdGlvbiBnZXRUeXBlVXJsXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlN0b3BcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3R5cGVVcmxQcmVmaXhdIHlvdXIgY3VzdG9tIHR5cGVVcmxQcmVmaXgoZGVmYXVsdCBcInR5cGUuZ29vZ2xlYXBpcy5jb21cIilcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ30gVGhlIGRlZmF1bHQgdHlwZSB1cmxcbiAgICAgICAgICovXG4gICAgICAgIFN0b3AuZ2V0VHlwZVVybCA9IGZ1bmN0aW9uIGdldFR5cGVVcmwodHlwZVVybFByZWZpeCkge1xuICAgICAgICAgICAgaWYgKHR5cGVVcmxQcmVmaXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHR5cGVVcmxQcmVmaXggPSBcInR5cGUuZ29vZ2xlYXBpcy5jb21cIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0eXBlVXJsUHJlZml4ICsgXCIvdHJhbnNpdF9yZWFsdGltZS5TdG9wXCI7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZWVsY2hhaXJCb2FyZGluZyBlbnVtLlxuICAgICAgICAgKiBAbmFtZSB0cmFuc2l0X3JlYWx0aW1lLlN0b3AuV2hlZWxjaGFpckJvYXJkaW5nXG4gICAgICAgICAqIEBlbnVtIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBVTktOT1dOPTAgVU5LTk9XTiB2YWx1ZVxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcn0gQVZBSUxBQkxFPTEgQVZBSUxBQkxFIHZhbHVlXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBOT1RfQVZBSUxBQkxFPTIgTk9UX0FWQUlMQUJMRSB2YWx1ZVxuICAgICAgICAgKi9cbiAgICAgICAgU3RvcC5XaGVlbGNoYWlyQm9hcmRpbmcgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWVzQnlJZCA9IHt9LCB2YWx1ZXMgPSBPYmplY3QuY3JlYXRlKHZhbHVlc0J5SWQpO1xuICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbMF0gPSBcIlVOS05PV05cIl0gPSAwO1xuICAgICAgICAgICAgdmFsdWVzW3ZhbHVlc0J5SWRbMV0gPSBcIkFWQUlMQUJMRVwiXSA9IDE7XG4gICAgICAgICAgICB2YWx1ZXNbdmFsdWVzQnlJZFsyXSA9IFwiTk9UX0FWQUlMQUJMRVwiXSA9IDI7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWVzO1xuICAgICAgICB9KSgpO1xuXG4gICAgICAgIHJldHVybiBTdG9wO1xuICAgIH0pKCk7XG5cbiAgICB0cmFuc2l0X3JlYWx0aW1lLlRyaXBNb2RpZmljYXRpb25zID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgVHJpcE1vZGlmaWNhdGlvbnMuXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lXG4gICAgICAgICAqIEBpbnRlcmZhY2UgSVRyaXBNb2RpZmljYXRpb25zXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7QXJyYXkuPHRyYW5zaXRfcmVhbHRpbWUuVHJpcE1vZGlmaWNhdGlvbnMuSVNlbGVjdGVkVHJpcHM+fG51bGx9IFtzZWxlY3RlZF90cmlwc10gVHJpcE1vZGlmaWNhdGlvbnMgc2VsZWN0ZWRfdHJpcHNcbiAgICAgICAgICogQHByb3BlcnR5IHtBcnJheS48c3RyaW5nPnxudWxsfSBbc3RhcnRfdGltZXNdIFRyaXBNb2RpZmljYXRpb25zIHN0YXJ0X3RpbWVzXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7QXJyYXkuPHN0cmluZz58bnVsbH0gW3NlcnZpY2VfZGF0ZXNdIFRyaXBNb2RpZmljYXRpb25zIHNlcnZpY2VfZGF0ZXNcbiAgICAgICAgICogQHByb3BlcnR5IHtBcnJheS48dHJhbnNpdF9yZWFsdGltZS5UcmlwTW9kaWZpY2F0aW9ucy5JTW9kaWZpY2F0aW9uPnxudWxsfSBbbW9kaWZpY2F0aW9uc10gVHJpcE1vZGlmaWNhdGlvbnMgbW9kaWZpY2F0aW9uc1xuICAgICAgICAgKi9cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBUcmlwTW9kaWZpY2F0aW9ucy5cbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWVcbiAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgVHJpcE1vZGlmaWNhdGlvbnMuXG4gICAgICAgICAqIEBpbXBsZW1lbnRzIElUcmlwTW9kaWZpY2F0aW9uc1xuICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICogQHBhcmFtIHt0cmFuc2l0X3JlYWx0aW1lLklUcmlwTW9kaWZpY2F0aW9ucz19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gVHJpcE1vZGlmaWNhdGlvbnMocHJvcGVydGllcykge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZF90cmlwcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5zdGFydF90aW1lcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlX2RhdGVzID0gW107XG4gICAgICAgICAgICB0aGlzLm1vZGlmaWNhdGlvbnMgPSBbXTtcbiAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogVHJpcE1vZGlmaWNhdGlvbnMgc2VsZWN0ZWRfdHJpcHMuXG4gICAgICAgICAqIEBtZW1iZXIge0FycmF5Ljx0cmFuc2l0X3JlYWx0aW1lLlRyaXBNb2RpZmljYXRpb25zLklTZWxlY3RlZFRyaXBzPn0gc2VsZWN0ZWRfdHJpcHNcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcE1vZGlmaWNhdGlvbnNcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBUcmlwTW9kaWZpY2F0aW9ucy5wcm90b3R5cGUuc2VsZWN0ZWRfdHJpcHMgPSAkdXRpbC5lbXB0eUFycmF5O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUcmlwTW9kaWZpY2F0aW9ucyBzdGFydF90aW1lcy5cbiAgICAgICAgICogQG1lbWJlciB7QXJyYXkuPHN0cmluZz59IHN0YXJ0X3RpbWVzXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBNb2RpZmljYXRpb25zXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgVHJpcE1vZGlmaWNhdGlvbnMucHJvdG90eXBlLnN0YXJ0X3RpbWVzID0gJHV0aWwuZW1wdHlBcnJheTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVHJpcE1vZGlmaWNhdGlvbnMgc2VydmljZV9kYXRlcy5cbiAgICAgICAgICogQG1lbWJlciB7QXJyYXkuPHN0cmluZz59IHNlcnZpY2VfZGF0ZXNcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcE1vZGlmaWNhdGlvbnNcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBUcmlwTW9kaWZpY2F0aW9ucy5wcm90b3R5cGUuc2VydmljZV9kYXRlcyA9ICR1dGlsLmVtcHR5QXJyYXk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRyaXBNb2RpZmljYXRpb25zIG1vZGlmaWNhdGlvbnMuXG4gICAgICAgICAqIEBtZW1iZXIge0FycmF5Ljx0cmFuc2l0X3JlYWx0aW1lLlRyaXBNb2RpZmljYXRpb25zLklNb2RpZmljYXRpb24+fSBtb2RpZmljYXRpb25zXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBNb2RpZmljYXRpb25zXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgVHJpcE1vZGlmaWNhdGlvbnMucHJvdG90eXBlLm1vZGlmaWNhdGlvbnMgPSAkdXRpbC5lbXB0eUFycmF5O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IFRyaXBNb2RpZmljYXRpb25zIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGNyZWF0ZVxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwTW9kaWZpY2F0aW9uc1xuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7dHJhbnNpdF9yZWFsdGltZS5JVHJpcE1vZGlmaWNhdGlvbnM9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICogQHJldHVybnMge3RyYW5zaXRfcmVhbHRpbWUuVHJpcE1vZGlmaWNhdGlvbnN9IFRyaXBNb2RpZmljYXRpb25zIGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBUcmlwTW9kaWZpY2F0aW9ucy5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUocHJvcGVydGllcykge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBUcmlwTW9kaWZpY2F0aW9ucyhwcm9wZXJ0aWVzKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFRyaXBNb2RpZmljYXRpb25zIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIHRyYW5zaXRfcmVhbHRpbWUuVHJpcE1vZGlmaWNhdGlvbnMudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAqIEBmdW5jdGlvbiBlbmNvZGVcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcE1vZGlmaWNhdGlvbnNcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuSVRyaXBNb2RpZmljYXRpb25zfSBtZXNzYWdlIFRyaXBNb2RpZmljYXRpb25zIG1lc3NhZ2Ugb3IgcGxhaW4gb2JqZWN0IHRvIGVuY29kZVxuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgKi9cbiAgICAgICAgVHJpcE1vZGlmaWNhdGlvbnMuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnNlbGVjdGVkX3RyaXBzICE9IG51bGwgJiYgbWVzc2FnZS5zZWxlY3RlZF90cmlwcy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNzYWdlLnNlbGVjdGVkX3RyaXBzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyaXBNb2RpZmljYXRpb25zLlNlbGVjdGVkVHJpcHMuZW5jb2RlKG1lc3NhZ2Uuc2VsZWN0ZWRfdHJpcHNbaV0sIHdyaXRlci51aW50MzIoLyogaWQgMSwgd2lyZVR5cGUgMiA9Ki8xMCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnN0YXJ0X3RpbWVzICE9IG51bGwgJiYgbWVzc2FnZS5zdGFydF90aW1lcy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNzYWdlLnN0YXJ0X3RpbWVzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLnN0cmluZyhtZXNzYWdlLnN0YXJ0X3RpbWVzW2ldKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnNlcnZpY2VfZGF0ZXMgIT0gbnVsbCAmJiBtZXNzYWdlLnNlcnZpY2VfZGF0ZXMubGVuZ3RoKVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVzc2FnZS5zZXJ2aWNlX2RhdGVzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDMsIHdpcmVUeXBlIDIgPSovMjYpLnN0cmluZyhtZXNzYWdlLnNlcnZpY2VfZGF0ZXNbaV0pO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UubW9kaWZpY2F0aW9ucyAhPSBudWxsICYmIG1lc3NhZ2UubW9kaWZpY2F0aW9ucy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNzYWdlLm1vZGlmaWNhdGlvbnMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJpcE1vZGlmaWNhdGlvbnMuTW9kaWZpY2F0aW9uLmVuY29kZShtZXNzYWdlLm1vZGlmaWNhdGlvbnNbaV0sIHdyaXRlci51aW50MzIoLyogaWQgNCwgd2lyZVR5cGUgMiA9Ki8zNCkuZm9yaygpKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIHJldHVybiB3cml0ZXI7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVuY29kZXMgdGhlIHNwZWNpZmllZCBUcmlwTW9kaWZpY2F0aW9ucyBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayB0cmFuc2l0X3JlYWx0aW1lLlRyaXBNb2RpZmljYXRpb25zLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBNb2RpZmljYXRpb25zXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHt0cmFuc2l0X3JlYWx0aW1lLklUcmlwTW9kaWZpY2F0aW9uc30gbWVzc2FnZSBUcmlwTW9kaWZpY2F0aW9ucyBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICovXG4gICAgICAgIFRyaXBNb2RpZmljYXRpb25zLmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVuY29kZShtZXNzYWdlLCB3cml0ZXIpLmxkZWxpbSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWNvZGVzIGEgVHJpcE1vZGlmaWNhdGlvbnMgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwTW9kaWZpY2F0aW9uc1xuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAgICAgKiBAcmV0dXJucyB7dHJhbnNpdF9yZWFsdGltZS5UcmlwTW9kaWZpY2F0aW9uc30gVHJpcE1vZGlmaWNhdGlvbnNcbiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAqL1xuICAgICAgICBUcmlwTW9kaWZpY2F0aW9ucy5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgsIGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmlwTW9kaWZpY2F0aW9ucygpO1xuICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgICAgICAgIGlmICh0YWcgPT09IGVycm9yKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhZyA+Pj4gMykge1xuICAgICAgICAgICAgICAgIGNhc2UgMToge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEobWVzc2FnZS5zZWxlY3RlZF90cmlwcyAmJiBtZXNzYWdlLnNlbGVjdGVkX3RyaXBzLmxlbmd0aCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zZWxlY3RlZF90cmlwcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zZWxlY3RlZF90cmlwcy5wdXNoKCRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJpcE1vZGlmaWNhdGlvbnMuU2VsZWN0ZWRUcmlwcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAyOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShtZXNzYWdlLnN0YXJ0X3RpbWVzICYmIG1lc3NhZ2Uuc3RhcnRfdGltZXMubGVuZ3RoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnN0YXJ0X3RpbWVzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnN0YXJ0X3RpbWVzLnB1c2gocmVhZGVyLnN0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShtZXNzYWdlLnNlcnZpY2VfZGF0ZXMgJiYgbWVzc2FnZS5zZXJ2aWNlX2RhdGVzLmxlbmd0aCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zZXJ2aWNlX2RhdGVzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnNlcnZpY2VfZGF0ZXMucHVzaChyZWFkZXIuc3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIDQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKG1lc3NhZ2UubW9kaWZpY2F0aW9ucyAmJiBtZXNzYWdlLm1vZGlmaWNhdGlvbnMubGVuZ3RoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm1vZGlmaWNhdGlvbnMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubW9kaWZpY2F0aW9ucy5wdXNoKCRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJpcE1vZGlmaWNhdGlvbnMuTW9kaWZpY2F0aW9uLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWNvZGVzIGEgVHJpcE1vZGlmaWNhdGlvbnMgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlciwgbGVuZ3RoIGRlbGltaXRlZC5cbiAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZFxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwTW9kaWZpY2F0aW9uc1xuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgKiBAcmV0dXJucyB7dHJhbnNpdF9yZWFsdGltZS5UcmlwTW9kaWZpY2F0aW9uc30gVHJpcE1vZGlmaWNhdGlvbnNcbiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAqL1xuICAgICAgICBUcmlwTW9kaWZpY2F0aW9ucy5kZWNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyKSB7XG4gICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICByZWFkZXIgPSBuZXcgJFJlYWRlcihyZWFkZXIpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVmVyaWZpZXMgYSBUcmlwTW9kaWZpY2F0aW9ucyBtZXNzYWdlLlxuICAgICAgICAgKiBAZnVuY3Rpb24gdmVyaWZ5XG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBNb2RpZmljYXRpb25zXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5XG4gICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd8bnVsbH0gYG51bGxgIGlmIHZhbGlkLCBvdGhlcndpc2UgdGhlIHJlYXNvbiB3aHkgaXQgaXMgbm90XG4gICAgICAgICAqL1xuICAgICAgICBUcmlwTW9kaWZpY2F0aW9ucy52ZXJpZnkgPSBmdW5jdGlvbiB2ZXJpZnkobWVzc2FnZSkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwib2JqZWN0IGV4cGVjdGVkXCI7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5zZWxlY3RlZF90cmlwcyAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzZWxlY3RlZF90cmlwc1wiKSkge1xuICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShtZXNzYWdlLnNlbGVjdGVkX3RyaXBzKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwic2VsZWN0ZWRfdHJpcHM6IGFycmF5IGV4cGVjdGVkXCI7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNzYWdlLnNlbGVjdGVkX3RyaXBzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlcnJvciA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJpcE1vZGlmaWNhdGlvbnMuU2VsZWN0ZWRUcmlwcy52ZXJpZnkobWVzc2FnZS5zZWxlY3RlZF90cmlwc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInNlbGVjdGVkX3RyaXBzLlwiICsgZXJyb3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc3RhcnRfdGltZXMgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwic3RhcnRfdGltZXNcIikpIHtcbiAgICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkobWVzc2FnZS5zdGFydF90aW1lcykpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcInN0YXJ0X3RpbWVzOiBhcnJheSBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVzc2FnZS5zdGFydF90aW1lcy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc1N0cmluZyhtZXNzYWdlLnN0YXJ0X3RpbWVzW2ldKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInN0YXJ0X3RpbWVzOiBzdHJpbmdbXSBleHBlY3RlZFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc2VydmljZV9kYXRlcyAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzZXJ2aWNlX2RhdGVzXCIpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KG1lc3NhZ2Uuc2VydmljZV9kYXRlcykpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcInNlcnZpY2VfZGF0ZXM6IGFycmF5IGV4cGVjdGVkXCI7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNzYWdlLnNlcnZpY2VfZGF0ZXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNTdHJpbmcobWVzc2FnZS5zZXJ2aWNlX2RhdGVzW2ldKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInNlcnZpY2VfZGF0ZXM6IHN0cmluZ1tdIGV4cGVjdGVkXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5tb2RpZmljYXRpb25zICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcIm1vZGlmaWNhdGlvbnNcIikpIHtcbiAgICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkobWVzc2FnZS5tb2RpZmljYXRpb25zKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwibW9kaWZpY2F0aW9uczogYXJyYXkgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1lc3NhZ2UubW9kaWZpY2F0aW9ucy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZXJyb3IgPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyaXBNb2RpZmljYXRpb25zLk1vZGlmaWNhdGlvbi52ZXJpZnkobWVzc2FnZS5tb2RpZmljYXRpb25zW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwibW9kaWZpY2F0aW9ucy5cIiArIGVycm9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDcmVhdGVzIGEgVHJpcE1vZGlmaWNhdGlvbnMgbWVzc2FnZSBmcm9tIGEgcGxhaW4gb2JqZWN0LiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byB0aGVpciByZXNwZWN0aXZlIGludGVybmFsIHR5cGVzLlxuICAgICAgICAgKiBAZnVuY3Rpb24gZnJvbU9iamVjdFxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwTW9kaWZpY2F0aW9uc1xuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG9iamVjdCBQbGFpbiBvYmplY3RcbiAgICAgICAgICogQHJldHVybnMge3RyYW5zaXRfcmVhbHRpbWUuVHJpcE1vZGlmaWNhdGlvbnN9IFRyaXBNb2RpZmljYXRpb25zXG4gICAgICAgICAqL1xuICAgICAgICBUcmlwTW9kaWZpY2F0aW9ucy5mcm9tT2JqZWN0ID0gZnVuY3Rpb24gZnJvbU9iamVjdChvYmplY3QpIHtcbiAgICAgICAgICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyaXBNb2RpZmljYXRpb25zKVxuICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICAgICAgICB2YXIgbWVzc2FnZSA9IG5ldyAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlRyaXBNb2RpZmljYXRpb25zKCk7XG4gICAgICAgICAgICBpZiAob2JqZWN0LnNlbGVjdGVkX3RyaXBzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KG9iamVjdC5zZWxlY3RlZF90cmlwcykpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcihcIi50cmFuc2l0X3JlYWx0aW1lLlRyaXBNb2RpZmljYXRpb25zLnNlbGVjdGVkX3RyaXBzOiBhcnJheSBleHBlY3RlZFwiKTtcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnNlbGVjdGVkX3RyaXBzID0gW107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvYmplY3Quc2VsZWN0ZWRfdHJpcHMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmplY3Quc2VsZWN0ZWRfdHJpcHNbaV0gIT09IFwib2JqZWN0XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoXCIudHJhbnNpdF9yZWFsdGltZS5UcmlwTW9kaWZpY2F0aW9ucy5zZWxlY3RlZF90cmlwczogb2JqZWN0IGV4cGVjdGVkXCIpO1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnNlbGVjdGVkX3RyaXBzW2ldID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmlwTW9kaWZpY2F0aW9ucy5TZWxlY3RlZFRyaXBzLmZyb21PYmplY3Qob2JqZWN0LnNlbGVjdGVkX3RyaXBzW2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob2JqZWN0LnN0YXJ0X3RpbWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KG9iamVjdC5zdGFydF90aW1lcykpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcihcIi50cmFuc2l0X3JlYWx0aW1lLlRyaXBNb2RpZmljYXRpb25zLnN0YXJ0X3RpbWVzOiBhcnJheSBleHBlY3RlZFwiKTtcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnN0YXJ0X3RpbWVzID0gW107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvYmplY3Quc3RhcnRfdGltZXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3RhcnRfdGltZXNbaV0gPSBTdHJpbmcob2JqZWN0LnN0YXJ0X3RpbWVzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvYmplY3Quc2VydmljZV9kYXRlcykge1xuICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShvYmplY3Quc2VydmljZV9kYXRlcykpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcihcIi50cmFuc2l0X3JlYWx0aW1lLlRyaXBNb2RpZmljYXRpb25zLnNlcnZpY2VfZGF0ZXM6IGFycmF5IGV4cGVjdGVkXCIpO1xuICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2VydmljZV9kYXRlcyA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2JqZWN0LnNlcnZpY2VfZGF0ZXMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2VydmljZV9kYXRlc1tpXSA9IFN0cmluZyhvYmplY3Quc2VydmljZV9kYXRlc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob2JqZWN0Lm1vZGlmaWNhdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkob2JqZWN0Lm1vZGlmaWNhdGlvbnMpKVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoXCIudHJhbnNpdF9yZWFsdGltZS5UcmlwTW9kaWZpY2F0aW9ucy5tb2RpZmljYXRpb25zOiBhcnJheSBleHBlY3RlZFwiKTtcbiAgICAgICAgICAgICAgICBtZXNzYWdlLm1vZGlmaWNhdGlvbnMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9iamVjdC5tb2RpZmljYXRpb25zLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqZWN0Lm1vZGlmaWNhdGlvbnNbaV0gIT09IFwib2JqZWN0XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoXCIudHJhbnNpdF9yZWFsdGltZS5UcmlwTW9kaWZpY2F0aW9ucy5tb2RpZmljYXRpb25zOiBvYmplY3QgZXhwZWN0ZWRcIik7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubW9kaWZpY2F0aW9uc1tpXSA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJpcE1vZGlmaWNhdGlvbnMuTW9kaWZpY2F0aW9uLmZyb21PYmplY3Qob2JqZWN0Lm1vZGlmaWNhdGlvbnNbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDcmVhdGVzIGEgcGxhaW4gb2JqZWN0IGZyb20gYSBUcmlwTW9kaWZpY2F0aW9ucyBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXG4gICAgICAgICAqIEBmdW5jdGlvbiB0b09iamVjdFxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwTW9kaWZpY2F0aW9uc1xuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7dHJhbnNpdF9yZWFsdGltZS5UcmlwTW9kaWZpY2F0aW9uc30gbWVzc2FnZSBUcmlwTW9kaWZpY2F0aW9uc1xuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcbiAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBQbGFpbiBvYmplY3RcbiAgICAgICAgICovXG4gICAgICAgIFRyaXBNb2RpZmljYXRpb25zLnRvT2JqZWN0ID0gZnVuY3Rpb24gdG9PYmplY3QobWVzc2FnZSwgb3B0aW9ucykge1xuICAgICAgICAgICAgaWYgKCFvcHRpb25zKVxuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgICAgIHZhciBvYmplY3QgPSB7fTtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmFycmF5cyB8fCBvcHRpb25zLmRlZmF1bHRzKSB7XG4gICAgICAgICAgICAgICAgb2JqZWN0LnNlbGVjdGVkX3RyaXBzID0gW107XG4gICAgICAgICAgICAgICAgb2JqZWN0LnN0YXJ0X3RpbWVzID0gW107XG4gICAgICAgICAgICAgICAgb2JqZWN0LnNlcnZpY2VfZGF0ZXMgPSBbXTtcbiAgICAgICAgICAgICAgICBvYmplY3QubW9kaWZpY2F0aW9ucyA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc2VsZWN0ZWRfdHJpcHMgJiYgbWVzc2FnZS5zZWxlY3RlZF90cmlwcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBvYmplY3Quc2VsZWN0ZWRfdHJpcHMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1lc3NhZ2Uuc2VsZWN0ZWRfdHJpcHMubGVuZ3RoOyArK2opXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5zZWxlY3RlZF90cmlwc1tqXSA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJpcE1vZGlmaWNhdGlvbnMuU2VsZWN0ZWRUcmlwcy50b09iamVjdChtZXNzYWdlLnNlbGVjdGVkX3RyaXBzW2pdLCBvcHRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnN0YXJ0X3RpbWVzICYmIG1lc3NhZ2Uuc3RhcnRfdGltZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgb2JqZWN0LnN0YXJ0X3RpbWVzID0gW107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBtZXNzYWdlLnN0YXJ0X3RpbWVzLmxlbmd0aDsgKytqKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3Quc3RhcnRfdGltZXNbal0gPSBtZXNzYWdlLnN0YXJ0X3RpbWVzW2pdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc2VydmljZV9kYXRlcyAmJiBtZXNzYWdlLnNlcnZpY2VfZGF0ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgb2JqZWN0LnNlcnZpY2VfZGF0ZXMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1lc3NhZ2Uuc2VydmljZV9kYXRlcy5sZW5ndGg7ICsrailcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnNlcnZpY2VfZGF0ZXNbal0gPSBtZXNzYWdlLnNlcnZpY2VfZGF0ZXNbal07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5tb2RpZmljYXRpb25zICYmIG1lc3NhZ2UubW9kaWZpY2F0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBvYmplY3QubW9kaWZpY2F0aW9ucyA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbWVzc2FnZS5tb2RpZmljYXRpb25zLmxlbmd0aDsgKytqKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3QubW9kaWZpY2F0aW9uc1tqXSA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJpcE1vZGlmaWNhdGlvbnMuTW9kaWZpY2F0aW9uLnRvT2JqZWN0KG1lc3NhZ2UubW9kaWZpY2F0aW9uc1tqXSwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIFRyaXBNb2RpZmljYXRpb25zIHRvIEpTT04uXG4gICAgICAgICAqIEBmdW5jdGlvbiB0b0pTT05cbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcE1vZGlmaWNhdGlvbnNcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcbiAgICAgICAgICovXG4gICAgICAgIFRyaXBNb2RpZmljYXRpb25zLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogR2V0cyB0aGUgZGVmYXVsdCB0eXBlIHVybCBmb3IgVHJpcE1vZGlmaWNhdGlvbnNcbiAgICAgICAgICogQGZ1bmN0aW9uIGdldFR5cGVVcmxcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcE1vZGlmaWNhdGlvbnNcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3R5cGVVcmxQcmVmaXhdIHlvdXIgY3VzdG9tIHR5cGVVcmxQcmVmaXgoZGVmYXVsdCBcInR5cGUuZ29vZ2xlYXBpcy5jb21cIilcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ30gVGhlIGRlZmF1bHQgdHlwZSB1cmxcbiAgICAgICAgICovXG4gICAgICAgIFRyaXBNb2RpZmljYXRpb25zLmdldFR5cGVVcmwgPSBmdW5jdGlvbiBnZXRUeXBlVXJsKHR5cGVVcmxQcmVmaXgpIHtcbiAgICAgICAgICAgIGlmICh0eXBlVXJsUHJlZml4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0eXBlVXJsUHJlZml4ID0gXCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHlwZVVybFByZWZpeCArIFwiL3RyYW5zaXRfcmVhbHRpbWUuVHJpcE1vZGlmaWNhdGlvbnNcIjtcbiAgICAgICAgfTtcblxuICAgICAgICBUcmlwTW9kaWZpY2F0aW9ucy5Nb2RpZmljYXRpb24gPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogUHJvcGVydGllcyBvZiBhIE1vZGlmaWNhdGlvbi5cbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBNb2RpZmljYXRpb25zXG4gICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElNb2RpZmljYXRpb25cbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7dHJhbnNpdF9yZWFsdGltZS5JU3RvcFNlbGVjdG9yfG51bGx9IFtzdGFydF9zdG9wX3NlbGVjdG9yXSBNb2RpZmljYXRpb24gc3RhcnRfc3RvcF9zZWxlY3RvclxuICAgICAgICAgICAgICogQHByb3BlcnR5IHt0cmFuc2l0X3JlYWx0aW1lLklTdG9wU2VsZWN0b3J8bnVsbH0gW2VuZF9zdG9wX3NlbGVjdG9yXSBNb2RpZmljYXRpb24gZW5kX3N0b3Bfc2VsZWN0b3JcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfG51bGx9IFtwcm9wYWdhdGVkX21vZGlmaWNhdGlvbl9kZWxheV0gTW9kaWZpY2F0aW9uIHByb3BhZ2F0ZWRfbW9kaWZpY2F0aW9uX2RlbGF5XG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge0FycmF5Ljx0cmFuc2l0X3JlYWx0aW1lLklSZXBsYWNlbWVudFN0b3A+fG51bGx9IFtyZXBsYWNlbWVudF9zdG9wc10gTW9kaWZpY2F0aW9uIHJlcGxhY2VtZW50X3N0b3BzXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ3xudWxsfSBbc2VydmljZV9hbGVydF9pZF0gTW9kaWZpY2F0aW9uIHNlcnZpY2VfYWxlcnRfaWRcbiAgICAgICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfG51bGx9IFtsYXN0X21vZGlmaWVkX3RpbWVdIE1vZGlmaWNhdGlvbiBsYXN0X21vZGlmaWVkX3RpbWVcbiAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENvbnN0cnVjdHMgYSBuZXcgTW9kaWZpY2F0aW9uLlxuICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcE1vZGlmaWNhdGlvbnNcbiAgICAgICAgICAgICAqIEBjbGFzc2Rlc2MgUmVwcmVzZW50cyBhIE1vZGlmaWNhdGlvbi5cbiAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElNb2RpZmljYXRpb25cbiAgICAgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICogQHBhcmFtIHt0cmFuc2l0X3JlYWx0aW1lLlRyaXBNb2RpZmljYXRpb25zLklNb2RpZmljYXRpb249fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZnVuY3Rpb24gTW9kaWZpY2F0aW9uKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlcGxhY2VtZW50X3N0b3BzID0gW107XG4gICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBNb2RpZmljYXRpb24gc3RhcnRfc3RvcF9zZWxlY3Rvci5cbiAgICAgICAgICAgICAqIEBtZW1iZXIge3RyYW5zaXRfcmVhbHRpbWUuSVN0b3BTZWxlY3RvcnxudWxsfHVuZGVmaW5lZH0gc3RhcnRfc3RvcF9zZWxlY3RvclxuICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcE1vZGlmaWNhdGlvbnMuTW9kaWZpY2F0aW9uXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgTW9kaWZpY2F0aW9uLnByb3RvdHlwZS5zdGFydF9zdG9wX3NlbGVjdG9yID0gbnVsbDtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBNb2RpZmljYXRpb24gZW5kX3N0b3Bfc2VsZWN0b3IuXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHt0cmFuc2l0X3JlYWx0aW1lLklTdG9wU2VsZWN0b3J8bnVsbHx1bmRlZmluZWR9IGVuZF9zdG9wX3NlbGVjdG9yXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwTW9kaWZpY2F0aW9ucy5Nb2RpZmljYXRpb25cbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBNb2RpZmljYXRpb24ucHJvdG90eXBlLmVuZF9zdG9wX3NlbGVjdG9yID0gbnVsbDtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBNb2RpZmljYXRpb24gcHJvcGFnYXRlZF9tb2RpZmljYXRpb25fZGVsYXkuXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9IHByb3BhZ2F0ZWRfbW9kaWZpY2F0aW9uX2RlbGF5XG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwTW9kaWZpY2F0aW9ucy5Nb2RpZmljYXRpb25cbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBNb2RpZmljYXRpb24ucHJvdG90eXBlLnByb3BhZ2F0ZWRfbW9kaWZpY2F0aW9uX2RlbGF5ID0gMDtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBNb2RpZmljYXRpb24gcmVwbGFjZW1lbnRfc3RvcHMuXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtBcnJheS48dHJhbnNpdF9yZWFsdGltZS5JUmVwbGFjZW1lbnRTdG9wPn0gcmVwbGFjZW1lbnRfc3RvcHNcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBNb2RpZmljYXRpb25zLk1vZGlmaWNhdGlvblxuICAgICAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIE1vZGlmaWNhdGlvbi5wcm90b3R5cGUucmVwbGFjZW1lbnRfc3RvcHMgPSAkdXRpbC5lbXB0eUFycmF5O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIE1vZGlmaWNhdGlvbiBzZXJ2aWNlX2FsZXJ0X2lkLlxuICAgICAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfSBzZXJ2aWNlX2FsZXJ0X2lkXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwTW9kaWZpY2F0aW9ucy5Nb2RpZmljYXRpb25cbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBNb2RpZmljYXRpb24ucHJvdG90eXBlLnNlcnZpY2VfYWxlcnRfaWQgPSBcIlwiO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIE1vZGlmaWNhdGlvbiBsYXN0X21vZGlmaWVkX3RpbWUuXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtudW1iZXJ9IGxhc3RfbW9kaWZpZWRfdGltZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcE1vZGlmaWNhdGlvbnMuTW9kaWZpY2F0aW9uXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgTW9kaWZpY2F0aW9uLnByb3RvdHlwZS5sYXN0X21vZGlmaWVkX3RpbWUgPSAkdXRpbC5Mb25nID8gJHV0aWwuTG9uZy5mcm9tQml0cygwLDAsdHJ1ZSkgOiAwO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBuZXcgTW9kaWZpY2F0aW9uIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBjcmVhdGVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBNb2RpZmljYXRpb25zLk1vZGlmaWNhdGlvblxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHt0cmFuc2l0X3JlYWx0aW1lLlRyaXBNb2RpZmljYXRpb25zLklNb2RpZmljYXRpb249fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHt0cmFuc2l0X3JlYWx0aW1lLlRyaXBNb2RpZmljYXRpb25zLk1vZGlmaWNhdGlvbn0gTW9kaWZpY2F0aW9uIGluc3RhbmNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIE1vZGlmaWNhdGlvbi5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTW9kaWZpY2F0aW9uKHByb3BlcnRpZXMpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgTW9kaWZpY2F0aW9uIG1lc3NhZ2UuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIHRyYW5zaXRfcmVhbHRpbWUuVHJpcE1vZGlmaWNhdGlvbnMuTW9kaWZpY2F0aW9uLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcE1vZGlmaWNhdGlvbnMuTW9kaWZpY2F0aW9uXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuVHJpcE1vZGlmaWNhdGlvbnMuSU1vZGlmaWNhdGlvbn0gbWVzc2FnZSBNb2RpZmljYXRpb24gbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgTW9kaWZpY2F0aW9uLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXdyaXRlcilcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5zdGFydF9zdG9wX3NlbGVjdG9yICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJzdGFydF9zdG9wX3NlbGVjdG9yXCIpKVxuICAgICAgICAgICAgICAgICAgICAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlN0b3BTZWxlY3Rvci5lbmNvZGUobWVzc2FnZS5zdGFydF9zdG9wX3NlbGVjdG9yLCB3cml0ZXIudWludDMyKC8qIGlkIDEsIHdpcmVUeXBlIDIgPSovMTApLmZvcmsoKSkubGRlbGltKCk7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZW5kX3N0b3Bfc2VsZWN0b3IgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcImVuZF9zdG9wX3NlbGVjdG9yXCIpKVxuICAgICAgICAgICAgICAgICAgICAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlN0b3BTZWxlY3Rvci5lbmNvZGUobWVzc2FnZS5lbmRfc3RvcF9zZWxlY3Rvciwgd3JpdGVyLnVpbnQzMigvKiBpZCAyLCB3aXJlVHlwZSAyID0qLzE4KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnByb3BhZ2F0ZWRfbW9kaWZpY2F0aW9uX2RlbGF5ICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJwcm9wYWdhdGVkX21vZGlmaWNhdGlvbl9kZWxheVwiKSlcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAzLCB3aXJlVHlwZSAwID0qLzI0KS5pbnQzMihtZXNzYWdlLnByb3BhZ2F0ZWRfbW9kaWZpY2F0aW9uX2RlbGF5KTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5yZXBsYWNlbWVudF9zdG9wcyAhPSBudWxsICYmIG1lc3NhZ2UucmVwbGFjZW1lbnRfc3RvcHMubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1lc3NhZ2UucmVwbGFjZW1lbnRfc3RvcHMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlJlcGxhY2VtZW50U3RvcC5lbmNvZGUobWVzc2FnZS5yZXBsYWNlbWVudF9zdG9wc1tpXSwgd3JpdGVyLnVpbnQzMigvKiBpZCA0LCB3aXJlVHlwZSAyID0qLzM0KS5mb3JrKCkpLmxkZWxpbSgpO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnNlcnZpY2VfYWxlcnRfaWQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInNlcnZpY2VfYWxlcnRfaWRcIikpXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgNSwgd2lyZVR5cGUgMiA9Ki80Mikuc3RyaW5nKG1lc3NhZ2Uuc2VydmljZV9hbGVydF9pZCk7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UubGFzdF9tb2RpZmllZF90aW1lICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJsYXN0X21vZGlmaWVkX3RpbWVcIikpXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgNiwgd2lyZVR5cGUgMCA9Ki80OCkudWludDY0KG1lc3NhZ2UubGFzdF9tb2RpZmllZF90aW1lKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgTW9kaWZpY2F0aW9uIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIHRyYW5zaXRfcmVhbHRpbWUuVHJpcE1vZGlmaWNhdGlvbnMuTW9kaWZpY2F0aW9uLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcE1vZGlmaWNhdGlvbnMuTW9kaWZpY2F0aW9uXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuVHJpcE1vZGlmaWNhdGlvbnMuSU1vZGlmaWNhdGlvbn0gbWVzc2FnZSBNb2RpZmljYXRpb24gbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgTW9kaWZpY2F0aW9uLmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGUobWVzc2FnZSwgd3JpdGVyKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRGVjb2RlcyBhIE1vZGlmaWNhdGlvbiBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcE1vZGlmaWNhdGlvbnMuTW9kaWZpY2F0aW9uXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoXSBNZXNzYWdlIGxlbmd0aCBpZiBrbm93biBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7dHJhbnNpdF9yZWFsdGltZS5UcmlwTW9kaWZpY2F0aW9ucy5Nb2RpZmljYXRpb259IE1vZGlmaWNhdGlvblxuICAgICAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBNb2RpZmljYXRpb24uZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoLCBlcnJvcikge1xuICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJpcE1vZGlmaWNhdGlvbnMuTW9kaWZpY2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhZyA9PT0gZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zdGFydF9zdG9wX3NlbGVjdG9yID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5TdG9wU2VsZWN0b3IuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lbmRfc3RvcF9zZWxlY3RvciA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuU3RvcFNlbGVjdG9yLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucHJvcGFnYXRlZF9tb2RpZmljYXRpb25fZGVsYXkgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEobWVzc2FnZS5yZXBsYWNlbWVudF9zdG9wcyAmJiBtZXNzYWdlLnJlcGxhY2VtZW50X3N0b3BzLmxlbmd0aCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucmVwbGFjZW1lbnRfc3RvcHMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJlcGxhY2VtZW50X3N0b3BzLnB1c2goJHJvb3QudHJhbnNpdF9yZWFsdGltZS5SZXBsYWNlbWVudFN0b3AuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2VydmljZV9hbGVydF9pZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5sYXN0X21vZGlmaWVkX3RpbWUgPSByZWFkZXIudWludDY0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRGVjb2RlcyBhIE1vZGlmaWNhdGlvbiBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcE1vZGlmaWNhdGlvbnMuTW9kaWZpY2F0aW9uXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICAgICAqIEByZXR1cm5zIHt0cmFuc2l0X3JlYWx0aW1lLlRyaXBNb2RpZmljYXRpb25zLk1vZGlmaWNhdGlvbn0gTW9kaWZpY2F0aW9uXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIE1vZGlmaWNhdGlvbi5kZWNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9IG5ldyAkUmVhZGVyKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVmVyaWZpZXMgYSBNb2RpZmljYXRpb24gbWVzc2FnZS5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB2ZXJpZnlcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBNb2RpZmljYXRpb25zLk1vZGlmaWNhdGlvblxuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5XG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9IGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBNb2RpZmljYXRpb24udmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgIT09IFwib2JqZWN0XCIgfHwgbWVzc2FnZSA9PT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwib2JqZWN0IGV4cGVjdGVkXCI7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc3RhcnRfc3RvcF9zZWxlY3RvciAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzdGFydF9zdG9wX3NlbGVjdG9yXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlcnJvciA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuU3RvcFNlbGVjdG9yLnZlcmlmeShtZXNzYWdlLnN0YXJ0X3N0b3Bfc2VsZWN0b3IpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJzdGFydF9zdG9wX3NlbGVjdG9yLlwiICsgZXJyb3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmVuZF9zdG9wX3NlbGVjdG9yICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcImVuZF9zdG9wX3NlbGVjdG9yXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlcnJvciA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuU3RvcFNlbGVjdG9yLnZlcmlmeShtZXNzYWdlLmVuZF9zdG9wX3NlbGVjdG9yKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiZW5kX3N0b3Bfc2VsZWN0b3IuXCIgKyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UucHJvcGFnYXRlZF9tb2RpZmljYXRpb25fZGVsYXkgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicHJvcGFnYXRlZF9tb2RpZmljYXRpb25fZGVsYXlcIikpXG4gICAgICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2UucHJvcGFnYXRlZF9tb2RpZmljYXRpb25fZGVsYXkpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwicHJvcGFnYXRlZF9tb2RpZmljYXRpb25fZGVsYXk6IGludGVnZXIgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5yZXBsYWNlbWVudF9zdG9wcyAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJyZXBsYWNlbWVudF9zdG9wc1wiKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkobWVzc2FnZS5yZXBsYWNlbWVudF9zdG9wcykpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJyZXBsYWNlbWVudF9zdG9wczogYXJyYXkgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNzYWdlLnJlcGxhY2VtZW50X3N0b3BzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXJyb3IgPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlJlcGxhY2VtZW50U3RvcC52ZXJpZnkobWVzc2FnZS5yZXBsYWNlbWVudF9zdG9wc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwicmVwbGFjZW1lbnRfc3RvcHMuXCIgKyBlcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5zZXJ2aWNlX2FsZXJ0X2lkICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInNlcnZpY2VfYWxlcnRfaWRcIikpXG4gICAgICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNTdHJpbmcobWVzc2FnZS5zZXJ2aWNlX2FsZXJ0X2lkKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInNlcnZpY2VfYWxlcnRfaWQ6IHN0cmluZyBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmxhc3RfbW9kaWZpZWRfdGltZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJsYXN0X21vZGlmaWVkX3RpbWVcIikpXG4gICAgICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNJbnRlZ2VyKG1lc3NhZ2UubGFzdF9tb2RpZmllZF90aW1lKSAmJiAhKG1lc3NhZ2UubGFzdF9tb2RpZmllZF90aW1lICYmICR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLmxhc3RfbW9kaWZpZWRfdGltZS5sb3cpICYmICR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLmxhc3RfbW9kaWZpZWRfdGltZS5oaWdoKSkpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJsYXN0X21vZGlmaWVkX3RpbWU6IGludGVnZXJ8TG9uZyBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgTW9kaWZpY2F0aW9uIG1lc3NhZ2UgZnJvbSBhIHBsYWluIG9iamVjdC4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBpbnRlcm5hbCB0eXBlcy5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBmcm9tT2JqZWN0XG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwTW9kaWZpY2F0aW9ucy5Nb2RpZmljYXRpb25cbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG9iamVjdCBQbGFpbiBvYmplY3RcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHt0cmFuc2l0X3JlYWx0aW1lLlRyaXBNb2RpZmljYXRpb25zLk1vZGlmaWNhdGlvbn0gTW9kaWZpY2F0aW9uXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIE1vZGlmaWNhdGlvbi5mcm9tT2JqZWN0ID0gZnVuY3Rpb24gZnJvbU9iamVjdChvYmplY3QpIHtcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0IGluc3RhbmNlb2YgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmlwTW9kaWZpY2F0aW9ucy5Nb2RpZmljYXRpb24pXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBuZXcgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmlwTW9kaWZpY2F0aW9ucy5Nb2RpZmljYXRpb24oKTtcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0LnN0YXJ0X3N0b3Bfc2VsZWN0b3IgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9iamVjdC5zdGFydF9zdG9wX3NlbGVjdG9yICE9PSBcIm9iamVjdFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgVHlwZUVycm9yKFwiLnRyYW5zaXRfcmVhbHRpbWUuVHJpcE1vZGlmaWNhdGlvbnMuTW9kaWZpY2F0aW9uLnN0YXJ0X3N0b3Bfc2VsZWN0b3I6IG9iamVjdCBleHBlY3RlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zdGFydF9zdG9wX3NlbGVjdG9yID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5TdG9wU2VsZWN0b3IuZnJvbU9iamVjdChvYmplY3Quc3RhcnRfc3RvcF9zZWxlY3Rvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChvYmplY3QuZW5kX3N0b3Bfc2VsZWN0b3IgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9iamVjdC5lbmRfc3RvcF9zZWxlY3RvciAhPT0gXCJvYmplY3RcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcihcIi50cmFuc2l0X3JlYWx0aW1lLlRyaXBNb2RpZmljYXRpb25zLk1vZGlmaWNhdGlvbi5lbmRfc3RvcF9zZWxlY3Rvcjogb2JqZWN0IGV4cGVjdGVkXCIpO1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVuZF9zdG9wX3NlbGVjdG9yID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5TdG9wU2VsZWN0b3IuZnJvbU9iamVjdChvYmplY3QuZW5kX3N0b3Bfc2VsZWN0b3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0LnByb3BhZ2F0ZWRfbW9kaWZpY2F0aW9uX2RlbGF5ICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucHJvcGFnYXRlZF9tb2RpZmljYXRpb25fZGVsYXkgPSBvYmplY3QucHJvcGFnYXRlZF9tb2RpZmljYXRpb25fZGVsYXkgfCAwO1xuICAgICAgICAgICAgICAgIGlmIChvYmplY3QucmVwbGFjZW1lbnRfc3RvcHMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KG9iamVjdC5yZXBsYWNlbWVudF9zdG9wcykpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoXCIudHJhbnNpdF9yZWFsdGltZS5UcmlwTW9kaWZpY2F0aW9ucy5Nb2RpZmljYXRpb24ucmVwbGFjZW1lbnRfc3RvcHM6IGFycmF5IGV4cGVjdGVkXCIpO1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJlcGxhY2VtZW50X3N0b3BzID0gW107XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2JqZWN0LnJlcGxhY2VtZW50X3N0b3BzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9iamVjdC5yZXBsYWNlbWVudF9zdG9wc1tpXSAhPT0gXCJvYmplY3RcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoXCIudHJhbnNpdF9yZWFsdGltZS5UcmlwTW9kaWZpY2F0aW9ucy5Nb2RpZmljYXRpb24ucmVwbGFjZW1lbnRfc3RvcHM6IG9iamVjdCBleHBlY3RlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucmVwbGFjZW1lbnRfc3RvcHNbaV0gPSAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlJlcGxhY2VtZW50U3RvcC5mcm9tT2JqZWN0KG9iamVjdC5yZXBsYWNlbWVudF9zdG9wc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC5zZXJ2aWNlX2FsZXJ0X2lkICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2VydmljZV9hbGVydF9pZCA9IFN0cmluZyhvYmplY3Quc2VydmljZV9hbGVydF9pZCk7XG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC5sYXN0X21vZGlmaWVkX3RpbWUgIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgaWYgKCR1dGlsLkxvbmcpXG4gICAgICAgICAgICAgICAgICAgICAgICAobWVzc2FnZS5sYXN0X21vZGlmaWVkX3RpbWUgPSAkdXRpbC5Mb25nLmZyb21WYWx1ZShvYmplY3QubGFzdF9tb2RpZmllZF90aW1lKSkudW5zaWduZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2Ygb2JqZWN0Lmxhc3RfbW9kaWZpZWRfdGltZSA9PT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubGFzdF9tb2RpZmllZF90aW1lID0gcGFyc2VJbnQob2JqZWN0Lmxhc3RfbW9kaWZpZWRfdGltZSwgMTApO1xuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2Ygb2JqZWN0Lmxhc3RfbW9kaWZpZWRfdGltZSA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubGFzdF9tb2RpZmllZF90aW1lID0gb2JqZWN0Lmxhc3RfbW9kaWZpZWRfdGltZTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIG9iamVjdC5sYXN0X21vZGlmaWVkX3RpbWUgPT09IFwib2JqZWN0XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmxhc3RfbW9kaWZpZWRfdGltZSA9IG5ldyAkdXRpbC5Mb25nQml0cyhvYmplY3QubGFzdF9tb2RpZmllZF90aW1lLmxvdyA+Pj4gMCwgb2JqZWN0Lmxhc3RfbW9kaWZpZWRfdGltZS5oaWdoID4+PiAwKS50b051bWJlcih0cnVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgTW9kaWZpY2F0aW9uIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiB0b09iamVjdFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcE1vZGlmaWNhdGlvbnMuTW9kaWZpY2F0aW9uXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuVHJpcE1vZGlmaWNhdGlvbnMuTW9kaWZpY2F0aW9ufSBtZXNzYWdlIE1vZGlmaWNhdGlvblxuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuSUNvbnZlcnNpb25PcHRpb25zfSBbb3B0aW9uc10gQ29udmVyc2lvbiBvcHRpb25zXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBNb2RpZmljYXRpb24udG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdChtZXNzYWdlLCBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFvcHRpb25zKVxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgICAgICAgICAgdmFyIG9iamVjdCA9IHt9O1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmFycmF5cyB8fCBvcHRpb25zLmRlZmF1bHRzKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3QucmVwbGFjZW1lbnRfc3RvcHMgPSBbXTtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5kZWZhdWx0cykge1xuICAgICAgICAgICAgICAgICAgICBvYmplY3Quc3RhcnRfc3RvcF9zZWxlY3RvciA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5lbmRfc3RvcF9zZWxlY3RvciA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5wcm9wYWdhdGVkX21vZGlmaWNhdGlvbl9kZWxheSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5zZXJ2aWNlX2FsZXJ0X2lkID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCR1dGlsLkxvbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsb25nID0gbmV3ICR1dGlsLkxvbmcoMCwgMCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QubGFzdF9tb2RpZmllZF90aW1lID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gbG9uZy50b1N0cmluZygpIDogb3B0aW9ucy5sb25ncyA9PT0gTnVtYmVyID8gbG9uZy50b051bWJlcigpIDogbG9uZztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QubGFzdF9tb2RpZmllZF90aW1lID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gXCIwXCIgOiAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5zdGFydF9zdG9wX3NlbGVjdG9yICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInN0YXJ0X3N0b3Bfc2VsZWN0b3JcIikpXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5zdGFydF9zdG9wX3NlbGVjdG9yID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5TdG9wU2VsZWN0b3IudG9PYmplY3QobWVzc2FnZS5zdGFydF9zdG9wX3NlbGVjdG9yLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5lbmRfc3RvcF9zZWxlY3RvciAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJlbmRfc3RvcF9zZWxlY3RvclwiKSlcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmVuZF9zdG9wX3NlbGVjdG9yID0gJHJvb3QudHJhbnNpdF9yZWFsdGltZS5TdG9wU2VsZWN0b3IudG9PYmplY3QobWVzc2FnZS5lbmRfc3RvcF9zZWxlY3Rvciwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UucHJvcGFnYXRlZF9tb2RpZmljYXRpb25fZGVsYXkgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwicHJvcGFnYXRlZF9tb2RpZmljYXRpb25fZGVsYXlcIikpXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5wcm9wYWdhdGVkX21vZGlmaWNhdGlvbl9kZWxheSA9IG1lc3NhZ2UucHJvcGFnYXRlZF9tb2RpZmljYXRpb25fZGVsYXk7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UucmVwbGFjZW1lbnRfc3RvcHMgJiYgbWVzc2FnZS5yZXBsYWNlbWVudF9zdG9wcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnJlcGxhY2VtZW50X3N0b3BzID0gW107XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbWVzc2FnZS5yZXBsYWNlbWVudF9zdG9wcy5sZW5ndGg7ICsrailcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5yZXBsYWNlbWVudF9zdG9wc1tqXSA9ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuUmVwbGFjZW1lbnRTdG9wLnRvT2JqZWN0KG1lc3NhZ2UucmVwbGFjZW1lbnRfc3RvcHNbal0sIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5zZXJ2aWNlX2FsZXJ0X2lkICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInNlcnZpY2VfYWxlcnRfaWRcIikpXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5zZXJ2aWNlX2FsZXJ0X2lkID0gbWVzc2FnZS5zZXJ2aWNlX2FsZXJ0X2lkO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLmxhc3RfbW9kaWZpZWRfdGltZSAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJsYXN0X21vZGlmaWVkX3RpbWVcIikpXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZS5sYXN0X21vZGlmaWVkX3RpbWUgPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QubGFzdF9tb2RpZmllZF90aW1lID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gU3RyaW5nKG1lc3NhZ2UubGFzdF9tb2RpZmllZF90aW1lKSA6IG1lc3NhZ2UubGFzdF9tb2RpZmllZF90aW1lO1xuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QubGFzdF9tb2RpZmllZF90aW1lID0gb3B0aW9ucy5sb25ncyA9PT0gU3RyaW5nID8gJHV0aWwuTG9uZy5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChtZXNzYWdlLmxhc3RfbW9kaWZpZWRfdGltZSkgOiBvcHRpb25zLmxvbmdzID09PSBOdW1iZXIgPyBuZXcgJHV0aWwuTG9uZ0JpdHMobWVzc2FnZS5sYXN0X21vZGlmaWVkX3RpbWUubG93ID4+PiAwLCBtZXNzYWdlLmxhc3RfbW9kaWZpZWRfdGltZS5oaWdoID4+PiAwKS50b051bWJlcih0cnVlKSA6IG1lc3NhZ2UubGFzdF9tb2RpZmllZF90aW1lO1xuICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENvbnZlcnRzIHRoaXMgTW9kaWZpY2F0aW9uIHRvIEpTT04uXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdG9KU09OXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwTW9kaWZpY2F0aW9ucy5Nb2RpZmljYXRpb25cbiAgICAgICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBKU09OIG9iamVjdFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBNb2RpZmljYXRpb24ucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogR2V0cyB0aGUgZGVmYXVsdCB0eXBlIHVybCBmb3IgTW9kaWZpY2F0aW9uXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZ2V0VHlwZVVybFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcE1vZGlmaWNhdGlvbnMuTW9kaWZpY2F0aW9uXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3R5cGVVcmxQcmVmaXhdIHlvdXIgY3VzdG9tIHR5cGVVcmxQcmVmaXgoZGVmYXVsdCBcInR5cGUuZ29vZ2xlYXBpcy5jb21cIilcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBkZWZhdWx0IHR5cGUgdXJsXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIE1vZGlmaWNhdGlvbi5nZXRUeXBlVXJsID0gZnVuY3Rpb24gZ2V0VHlwZVVybCh0eXBlVXJsUHJlZml4KSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVVcmxQcmVmaXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB0eXBlVXJsUHJlZml4ID0gXCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0eXBlVXJsUHJlZml4ICsgXCIvdHJhbnNpdF9yZWFsdGltZS5UcmlwTW9kaWZpY2F0aW9ucy5Nb2RpZmljYXRpb25cIjtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJldHVybiBNb2RpZmljYXRpb247XG4gICAgICAgIH0pKCk7XG5cbiAgICAgICAgVHJpcE1vZGlmaWNhdGlvbnMuU2VsZWN0ZWRUcmlwcyA9IChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBQcm9wZXJ0aWVzIG9mIGEgU2VsZWN0ZWRUcmlwcy5cbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBNb2RpZmljYXRpb25zXG4gICAgICAgICAgICAgKiBAaW50ZXJmYWNlIElTZWxlY3RlZFRyaXBzXG4gICAgICAgICAgICAgKiBAcHJvcGVydHkge0FycmF5LjxzdHJpbmc+fG51bGx9IFt0cmlwX2lkc10gU2VsZWN0ZWRUcmlwcyB0cmlwX2lkc1xuICAgICAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW3NoYXBlX2lkXSBTZWxlY3RlZFRyaXBzIHNoYXBlX2lkXG4gICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFNlbGVjdGVkVHJpcHMuXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwTW9kaWZpY2F0aW9uc1xuICAgICAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgU2VsZWN0ZWRUcmlwcy5cbiAgICAgICAgICAgICAqIEBpbXBsZW1lbnRzIElTZWxlY3RlZFRyaXBzXG4gICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICAgICAqIEBwYXJhbSB7dHJhbnNpdF9yZWFsdGltZS5UcmlwTW9kaWZpY2F0aW9ucy5JU2VsZWN0ZWRUcmlwcz19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmdW5jdGlvbiBTZWxlY3RlZFRyaXBzKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRyaXBfaWRzID0gW107XG4gICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNba2V5c1tpXV0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tleXNbaV1dID0gcHJvcGVydGllc1trZXlzW2ldXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBTZWxlY3RlZFRyaXBzIHRyaXBfaWRzLlxuICAgICAgICAgICAgICogQG1lbWJlciB7QXJyYXkuPHN0cmluZz59IHRyaXBfaWRzXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwTW9kaWZpY2F0aW9ucy5TZWxlY3RlZFRyaXBzXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgU2VsZWN0ZWRUcmlwcy5wcm90b3R5cGUudHJpcF9pZHMgPSAkdXRpbC5lbXB0eUFycmF5O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFNlbGVjdGVkVHJpcHMgc2hhcGVfaWQuXG4gICAgICAgICAgICAgKiBAbWVtYmVyIHtzdHJpbmd9IHNoYXBlX2lkXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwTW9kaWZpY2F0aW9ucy5TZWxlY3RlZFRyaXBzXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgU2VsZWN0ZWRUcmlwcy5wcm90b3R5cGUuc2hhcGVfaWQgPSBcIlwiO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBuZXcgU2VsZWN0ZWRUcmlwcyBpbnN0YW5jZSB1c2luZyB0aGUgc3BlY2lmaWVkIHByb3BlcnRpZXMuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gY3JlYXRlXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwTW9kaWZpY2F0aW9ucy5TZWxlY3RlZFRyaXBzXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuVHJpcE1vZGlmaWNhdGlvbnMuSVNlbGVjdGVkVHJpcHM9fSBbcHJvcGVydGllc10gUHJvcGVydGllcyB0byBzZXRcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHt0cmFuc2l0X3JlYWx0aW1lLlRyaXBNb2RpZmljYXRpb25zLlNlbGVjdGVkVHJpcHN9IFNlbGVjdGVkVHJpcHMgaW5zdGFuY2VcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgU2VsZWN0ZWRUcmlwcy5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUocHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgU2VsZWN0ZWRUcmlwcyhwcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFNlbGVjdGVkVHJpcHMgbWVzc2FnZS4gRG9lcyBub3QgaW1wbGljaXRseSB7QGxpbmsgdHJhbnNpdF9yZWFsdGltZS5UcmlwTW9kaWZpY2F0aW9ucy5TZWxlY3RlZFRyaXBzLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcE1vZGlmaWNhdGlvbnMuU2VsZWN0ZWRUcmlwc1xuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHt0cmFuc2l0X3JlYWx0aW1lLlRyaXBNb2RpZmljYXRpb25zLklTZWxlY3RlZFRyaXBzfSBtZXNzYWdlIFNlbGVjdGVkVHJpcHMgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5Xcml0ZXJ9IFt3cml0ZXJdIFdyaXRlciB0byBlbmNvZGUgdG9cbiAgICAgICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgU2VsZWN0ZWRUcmlwcy5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlciA9ICRXcml0ZXIuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudHJpcF9pZHMgIT0gbnVsbCAmJiBtZXNzYWdlLnRyaXBfaWRzLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNzYWdlLnRyaXBfaWRzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAyID0qLzEwKS5zdHJpbmcobWVzc2FnZS50cmlwX2lkc1tpXSk7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc2hhcGVfaWQgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInNoYXBlX2lkXCIpKVxuICAgICAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLnN0cmluZyhtZXNzYWdlLnNoYXBlX2lkKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgU2VsZWN0ZWRUcmlwcyBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayB0cmFuc2l0X3JlYWx0aW1lLlRyaXBNb2RpZmljYXRpb25zLlNlbGVjdGVkVHJpcHMudmVyaWZ5fHZlcmlmeX0gbWVzc2FnZXMuXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwTW9kaWZpY2F0aW9ucy5TZWxlY3RlZFRyaXBzXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuVHJpcE1vZGlmaWNhdGlvbnMuSVNlbGVjdGVkVHJpcHN9IG1lc3NhZ2UgU2VsZWN0ZWRUcmlwcyBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgICAgICogQHJldHVybnMgeyRwcm90b2J1Zi5Xcml0ZXJ9IFdyaXRlclxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBTZWxlY3RlZFRyaXBzLmVuY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZChtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGUobWVzc2FnZSwgd3JpdGVyKS5sZGVsaW0oKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRGVjb2RlcyBhIFNlbGVjdGVkVHJpcHMgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBNb2RpZmljYXRpb25zLlNlbGVjdGVkVHJpcHNcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHt0cmFuc2l0X3JlYWx0aW1lLlRyaXBNb2RpZmljYXRpb25zLlNlbGVjdGVkVHJpcHN9IFNlbGVjdGVkVHJpcHNcbiAgICAgICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgU2VsZWN0ZWRUcmlwcy5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9ICRSZWFkZXIuY3JlYXRlKHJlYWRlcik7XG4gICAgICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmlwTW9kaWZpY2F0aW9ucy5TZWxlY3RlZFRyaXBzKCk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhZyA9PT0gZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEobWVzc2FnZS50cmlwX2lkcyAmJiBtZXNzYWdlLnRyaXBfaWRzLmxlbmd0aCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudHJpcF9pZHMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnRyaXBfaWRzLnB1c2gocmVhZGVyLnN0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zaGFwZV9pZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5za2lwVHlwZSh0YWcgJiA3KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBEZWNvZGVzIGEgU2VsZWN0ZWRUcmlwcyBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcE1vZGlmaWNhdGlvbnMuU2VsZWN0ZWRUcmlwc1xuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7dHJhbnNpdF9yZWFsdGltZS5UcmlwTW9kaWZpY2F0aW9ucy5TZWxlY3RlZFRyaXBzfSBTZWxlY3RlZFRyaXBzXG4gICAgICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFNlbGVjdGVkVHJpcHMuZGVjb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkKHJlYWRlcikge1xuICAgICAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSBuZXcgJFJlYWRlcihyZWFkZXIpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZShyZWFkZXIsIHJlYWRlci51aW50MzIoKSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFZlcmlmaWVzIGEgU2VsZWN0ZWRUcmlwcyBtZXNzYWdlLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHZlcmlmeVxuICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcE1vZGlmaWNhdGlvbnMuU2VsZWN0ZWRUcmlwc1xuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gbWVzc2FnZSBQbGFpbiBvYmplY3QgdG8gdmVyaWZ5XG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9IGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBTZWxlY3RlZFRyaXBzLnZlcmlmeSA9IGZ1bmN0aW9uIHZlcmlmeShtZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm9iamVjdCBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnRyaXBfaWRzICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInRyaXBfaWRzXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShtZXNzYWdlLnRyaXBfaWRzKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInRyaXBfaWRzOiBhcnJheSBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1lc3NhZ2UudHJpcF9pZHMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzU3RyaW5nKG1lc3NhZ2UudHJpcF9pZHNbaV0pKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInRyaXBfaWRzOiBzdHJpbmdbXSBleHBlY3RlZFwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5zaGFwZV9pZCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzaGFwZV9pZFwiKSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc1N0cmluZyhtZXNzYWdlLnNoYXBlX2lkKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInNoYXBlX2lkOiBzdHJpbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIFNlbGVjdGVkVHJpcHMgbWVzc2FnZSBmcm9tIGEgcGxhaW4gb2JqZWN0LiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byB0aGVpciByZXNwZWN0aXZlIGludGVybmFsIHR5cGVzLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIGZyb21PYmplY3RcbiAgICAgICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlRyaXBNb2RpZmljYXRpb25zLlNlbGVjdGVkVHJpcHNcbiAgICAgICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG9iamVjdCBQbGFpbiBvYmplY3RcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHt0cmFuc2l0X3JlYWx0aW1lLlRyaXBNb2RpZmljYXRpb25zLlNlbGVjdGVkVHJpcHN9IFNlbGVjdGVkVHJpcHNcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgU2VsZWN0ZWRUcmlwcy5mcm9tT2JqZWN0ID0gZnVuY3Rpb24gZnJvbU9iamVjdChvYmplY3QpIHtcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0IGluc3RhbmNlb2YgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5UcmlwTW9kaWZpY2F0aW9ucy5TZWxlY3RlZFRyaXBzKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gbmV3ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuVHJpcE1vZGlmaWNhdGlvbnMuU2VsZWN0ZWRUcmlwcygpO1xuICAgICAgICAgICAgICAgIGlmIChvYmplY3QudHJpcF9pZHMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KG9iamVjdC50cmlwX2lkcykpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoXCIudHJhbnNpdF9yZWFsdGltZS5UcmlwTW9kaWZpY2F0aW9ucy5TZWxlY3RlZFRyaXBzLnRyaXBfaWRzOiBhcnJheSBleHBlY3RlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS50cmlwX2lkcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9iamVjdC50cmlwX2lkcy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudHJpcF9pZHNbaV0gPSBTdHJpbmcob2JqZWN0LnRyaXBfaWRzW2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC5zaGFwZV9pZCAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnNoYXBlX2lkID0gU3RyaW5nKG9iamVjdC5zaGFwZV9pZCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIFNlbGVjdGVkVHJpcHMgbWVzc2FnZS4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gb3RoZXIgdHlwZXMgaWYgc3BlY2lmaWVkLlxuICAgICAgICAgICAgICogQGZ1bmN0aW9uIHRvT2JqZWN0XG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwTW9kaWZpY2F0aW9ucy5TZWxlY3RlZFRyaXBzXG4gICAgICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuVHJpcE1vZGlmaWNhdGlvbnMuU2VsZWN0ZWRUcmlwc30gbWVzc2FnZSBTZWxlY3RlZFRyaXBzXG4gICAgICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gUGxhaW4gb2JqZWN0XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFNlbGVjdGVkVHJpcHMudG9PYmplY3QgPSBmdW5jdGlvbiB0b09iamVjdChtZXNzYWdlLCBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFvcHRpb25zKVxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgICAgICAgICAgdmFyIG9iamVjdCA9IHt9O1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmFycmF5cyB8fCBvcHRpb25zLmRlZmF1bHRzKVxuICAgICAgICAgICAgICAgICAgICBvYmplY3QudHJpcF9pZHMgPSBbXTtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5kZWZhdWx0cylcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnNoYXBlX2lkID0gXCJcIjtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS50cmlwX2lkcyAmJiBtZXNzYWdlLnRyaXBfaWRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBvYmplY3QudHJpcF9pZHMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBtZXNzYWdlLnRyaXBfaWRzLmxlbmd0aDsgKytqKVxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnRyaXBfaWRzW2pdID0gbWVzc2FnZS50cmlwX2lkc1tqXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc2hhcGVfaWQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwic2hhcGVfaWRcIikpXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5zaGFwZV9pZCA9IG1lc3NhZ2Uuc2hhcGVfaWQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ29udmVydHMgdGhpcyBTZWxlY3RlZFRyaXBzIHRvIEpTT04uXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gdG9KU09OXG4gICAgICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5UcmlwTW9kaWZpY2F0aW9ucy5TZWxlY3RlZFRyaXBzXG4gICAgICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZywqPn0gSlNPTiBvYmplY3RcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgU2VsZWN0ZWRUcmlwcy5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsICRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBHZXRzIHRoZSBkZWZhdWx0IHR5cGUgdXJsIGZvciBTZWxlY3RlZFRyaXBzXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gZ2V0VHlwZVVybFxuICAgICAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuVHJpcE1vZGlmaWNhdGlvbnMuU2VsZWN0ZWRUcmlwc1xuICAgICAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFt0eXBlVXJsUHJlZml4XSB5b3VyIGN1c3RvbSB0eXBlVXJsUHJlZml4KGRlZmF1bHQgXCJ0eXBlLmdvb2dsZWFwaXMuY29tXCIpXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgZGVmYXVsdCB0eXBlIHVybFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBTZWxlY3RlZFRyaXBzLmdldFR5cGVVcmwgPSBmdW5jdGlvbiBnZXRUeXBlVXJsKHR5cGVVcmxQcmVmaXgpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZVVybFByZWZpeCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGVVcmxQcmVmaXggPSBcInR5cGUuZ29vZ2xlYXBpcy5jb21cIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVVcmxQcmVmaXggKyBcIi90cmFuc2l0X3JlYWx0aW1lLlRyaXBNb2RpZmljYXRpb25zLlNlbGVjdGVkVHJpcHNcIjtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJldHVybiBTZWxlY3RlZFRyaXBzO1xuICAgICAgICB9KSgpO1xuXG4gICAgICAgIHJldHVybiBUcmlwTW9kaWZpY2F0aW9ucztcbiAgICB9KSgpO1xuXG4gICAgdHJhbnNpdF9yZWFsdGltZS5TdG9wU2VsZWN0b3IgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBTdG9wU2VsZWN0b3IuXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lXG4gICAgICAgICAqIEBpbnRlcmZhY2UgSVN0b3BTZWxlY3RvclxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbc3RvcF9zZXF1ZW5jZV0gU3RvcFNlbGVjdG9yIHN0b3Bfc2VxdWVuY2VcbiAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW3N0b3BfaWRdIFN0b3BTZWxlY3RvciBzdG9wX2lkXG4gICAgICAgICAqL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFN0b3BTZWxlY3Rvci5cbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWVcbiAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgU3RvcFNlbGVjdG9yLlxuICAgICAgICAgKiBAaW1wbGVtZW50cyBJU3RvcFNlbGVjdG9yXG4gICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuSVN0b3BTZWxlY3Rvcj19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gU3RvcFNlbGVjdG9yKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogU3RvcFNlbGVjdG9yIHN0b3Bfc2VxdWVuY2UuXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn0gc3RvcF9zZXF1ZW5jZVxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5TdG9wU2VsZWN0b3JcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBTdG9wU2VsZWN0b3IucHJvdG90eXBlLnN0b3Bfc2VxdWVuY2UgPSAwO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTdG9wU2VsZWN0b3Igc3RvcF9pZC5cbiAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfSBzdG9wX2lkXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlN0b3BTZWxlY3RvclxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIFN0b3BTZWxlY3Rvci5wcm90b3R5cGUuc3RvcF9pZCA9IFwiXCI7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYSBuZXcgU3RvcFNlbGVjdG9yIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGNyZWF0ZVxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5TdG9wU2VsZWN0b3JcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuSVN0b3BTZWxlY3Rvcj19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgKiBAcmV0dXJucyB7dHJhbnNpdF9yZWFsdGltZS5TdG9wU2VsZWN0b3J9IFN0b3BTZWxlY3RvciBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgU3RvcFNlbGVjdG9yLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFN0b3BTZWxlY3Rvcihwcm9wZXJ0aWVzKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFN0b3BTZWxlY3RvciBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayB0cmFuc2l0X3JlYWx0aW1lLlN0b3BTZWxlY3Rvci52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5TdG9wU2VsZWN0b3JcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuSVN0b3BTZWxlY3Rvcn0gbWVzc2FnZSBTdG9wU2VsZWN0b3IgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAqL1xuICAgICAgICBTdG9wU2VsZWN0b3IuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnN0b3Bfc2VxdWVuY2UgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInN0b3Bfc2VxdWVuY2VcIikpXG4gICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAwID0qLzgpLnVpbnQzMihtZXNzYWdlLnN0b3Bfc2VxdWVuY2UpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc3RvcF9pZCAhPSBudWxsICYmIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1lc3NhZ2UsIFwic3RvcF9pZFwiKSlcbiAgICAgICAgICAgICAgICB3cml0ZXIudWludDMyKC8qIGlkIDIsIHdpcmVUeXBlIDIgPSovMTgpLnN0cmluZyhtZXNzYWdlLnN0b3BfaWQpO1xuICAgICAgICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFN0b3BTZWxlY3RvciBtZXNzYWdlLCBsZW5ndGggZGVsaW1pdGVkLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayB0cmFuc2l0X3JlYWx0aW1lLlN0b3BTZWxlY3Rvci52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZURlbGltaXRlZFxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5TdG9wU2VsZWN0b3JcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuSVN0b3BTZWxlY3Rvcn0gbWVzc2FnZSBTdG9wU2VsZWN0b3IgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAqL1xuICAgICAgICBTdG9wU2VsZWN0b3IuZW5jb2RlRGVsaW1pdGVkID0gZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikubGRlbGltKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlY29kZXMgYSBTdG9wU2VsZWN0b3IgbWVzc2FnZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVhZGVyIG9yIGJ1ZmZlci5cbiAgICAgICAgICogQGZ1bmN0aW9uIGRlY29kZVxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5TdG9wU2VsZWN0b3JcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5SZWFkZXJ8VWludDhBcnJheX0gcmVhZGVyIFJlYWRlciBvciBidWZmZXIgdG8gZGVjb2RlIGZyb21cbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGhdIE1lc3NhZ2UgbGVuZ3RoIGlmIGtub3duIGJlZm9yZWhhbmRcbiAgICAgICAgICogQHJldHVybnMge3RyYW5zaXRfcmVhbHRpbWUuU3RvcFNlbGVjdG9yfSBTdG9wU2VsZWN0b3JcbiAgICAgICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwYXlsb2FkIGlzIG5vdCBhIHJlYWRlciBvciB2YWxpZCBidWZmZXJcbiAgICAgICAgICogQHRocm93cyB7JHByb3RvYnVmLnV0aWwuUHJvdG9jb2xFcnJvcn0gSWYgcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nXG4gICAgICAgICAqL1xuICAgICAgICBTdG9wU2VsZWN0b3IuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKHJlYWRlciwgbGVuZ3RoLCBlcnJvcikge1xuICAgICAgICAgICAgaWYgKCEocmVhZGVyIGluc3RhbmNlb2YgJFJlYWRlcikpXG4gICAgICAgICAgICAgICAgcmVhZGVyID0gJFJlYWRlci5jcmVhdGUocmVhZGVyKTtcbiAgICAgICAgICAgIHZhciBlbmQgPSBsZW5ndGggPT09IHVuZGVmaW5lZCA/IHJlYWRlci5sZW4gOiByZWFkZXIucG9zICsgbGVuZ3RoLCBtZXNzYWdlID0gbmV3ICRyb290LnRyYW5zaXRfcmVhbHRpbWUuU3RvcFNlbGVjdG9yKCk7XG4gICAgICAgICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgaWYgKHRhZyA9PT0gZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAodGFnID4+PiAzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnN0b3Bfc2VxdWVuY2UgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgMjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zdG9wX2lkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuc2tpcFR5cGUodGFnICYgNyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWNvZGVzIGEgU3RvcFNlbGVjdG9yIG1lc3NhZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIHJlYWRlciBvciBidWZmZXIsIGxlbmd0aCBkZWxpbWl0ZWQuXG4gICAgICAgICAqIEBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWRcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuU3RvcFNlbGVjdG9yXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuUmVhZGVyfFVpbnQ4QXJyYXl9IHJlYWRlciBSZWFkZXIgb3IgYnVmZmVyIHRvIGRlY29kZSBmcm9tXG4gICAgICAgICAqIEByZXR1cm5zIHt0cmFuc2l0X3JlYWx0aW1lLlN0b3BTZWxlY3Rvcn0gU3RvcFNlbGVjdG9yXG4gICAgICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGF5bG9hZCBpcyBub3QgYSByZWFkZXIgb3IgdmFsaWQgYnVmZmVyXG4gICAgICAgICAqIEB0aHJvd3MgeyRwcm90b2J1Zi51dGlsLlByb3RvY29sRXJyb3J9IElmIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZ1xuICAgICAgICAgKi9cbiAgICAgICAgU3RvcFNlbGVjdG9yLmRlY29kZURlbGltaXRlZCA9IGZ1bmN0aW9uIGRlY29kZURlbGltaXRlZChyZWFkZXIpIHtcbiAgICAgICAgICAgIGlmICghKHJlYWRlciBpbnN0YW5jZW9mICRSZWFkZXIpKVxuICAgICAgICAgICAgICAgIHJlYWRlciA9IG5ldyAkUmVhZGVyKHJlYWRlcik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGUocmVhZGVyLCByZWFkZXIudWludDMyKCkpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBWZXJpZmllcyBhIFN0b3BTZWxlY3RvciBtZXNzYWdlLlxuICAgICAgICAgKiBAZnVuY3Rpb24gdmVyaWZ5XG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlN0b3BTZWxlY3RvclxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG1lc3NhZ2UgUGxhaW4gb2JqZWN0IHRvIHZlcmlmeVxuICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9IGBudWxsYCBpZiB2YWxpZCwgb3RoZXJ3aXNlIHRoZSByZWFzb24gd2h5IGl0IGlzIG5vdFxuICAgICAgICAgKi9cbiAgICAgICAgU3RvcFNlbGVjdG9yLnZlcmlmeSA9IGZ1bmN0aW9uIHZlcmlmeShtZXNzYWdlKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgIT09IFwib2JqZWN0XCIgfHwgbWVzc2FnZSA9PT0gbnVsbClcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJvYmplY3QgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnN0b3Bfc2VxdWVuY2UgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwic3RvcF9zZXF1ZW5jZVwiKSlcbiAgICAgICAgICAgICAgICBpZiAoISR1dGlsLmlzSW50ZWdlcihtZXNzYWdlLnN0b3Bfc2VxdWVuY2UpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJzdG9wX3NlcXVlbmNlOiBpbnRlZ2VyIGV4cGVjdGVkXCI7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5zdG9wX2lkICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInN0b3BfaWRcIikpXG4gICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc1N0cmluZyhtZXNzYWdlLnN0b3BfaWQpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJzdG9wX2lkOiBzdHJpbmcgZXhwZWN0ZWRcIjtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDcmVhdGVzIGEgU3RvcFNlbGVjdG9yIG1lc3NhZ2UgZnJvbSBhIHBsYWluIG9iamVjdC4gQWxzbyBjb252ZXJ0cyB2YWx1ZXMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBpbnRlcm5hbCB0eXBlcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGZyb21PYmplY3RcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuU3RvcFNlbGVjdG9yXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywqPn0gb2JqZWN0IFBsYWluIG9iamVjdFxuICAgICAgICAgKiBAcmV0dXJucyB7dHJhbnNpdF9yZWFsdGltZS5TdG9wU2VsZWN0b3J9IFN0b3BTZWxlY3RvclxuICAgICAgICAgKi9cbiAgICAgICAgU3RvcFNlbGVjdG9yLmZyb21PYmplY3QgPSBmdW5jdGlvbiBmcm9tT2JqZWN0KG9iamVjdCkge1xuICAgICAgICAgICAgaWYgKG9iamVjdCBpbnN0YW5jZW9mICRyb290LnRyYW5zaXRfcmVhbHRpbWUuU3RvcFNlbGVjdG9yKVxuICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICAgICAgICB2YXIgbWVzc2FnZSA9IG5ldyAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlN0b3BTZWxlY3RvcigpO1xuICAgICAgICAgICAgaWYgKG9iamVjdC5zdG9wX3NlcXVlbmNlICE9IG51bGwpXG4gICAgICAgICAgICAgICAgbWVzc2FnZS5zdG9wX3NlcXVlbmNlID0gb2JqZWN0LnN0b3Bfc2VxdWVuY2UgPj4+IDA7XG4gICAgICAgICAgICBpZiAob2JqZWN0LnN0b3BfaWQgIT0gbnVsbClcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnN0b3BfaWQgPSBTdHJpbmcob2JqZWN0LnN0b3BfaWQpO1xuICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYSBwbGFpbiBvYmplY3QgZnJvbSBhIFN0b3BTZWxlY3RvciBtZXNzYWdlLiBBbHNvIGNvbnZlcnRzIHZhbHVlcyB0byBvdGhlciB0eXBlcyBpZiBzcGVjaWZpZWQuXG4gICAgICAgICAqIEBmdW5jdGlvbiB0b09iamVjdFxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5TdG9wU2VsZWN0b3JcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuU3RvcFNlbGVjdG9yfSBtZXNzYWdlIFN0b3BTZWxlY3RvclxuICAgICAgICAgKiBAcGFyYW0geyRwcm90b2J1Zi5JQ29udmVyc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBDb252ZXJzaW9uIG9wdGlvbnNcbiAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBQbGFpbiBvYmplY3RcbiAgICAgICAgICovXG4gICAgICAgIFN0b3BTZWxlY3Rvci50b09iamVjdCA9IGZ1bmN0aW9uIHRvT2JqZWN0KG1lc3NhZ2UsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIGlmICghb3B0aW9ucylcbiAgICAgICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgICAgICB2YXIgb2JqZWN0ID0ge307XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5kZWZhdWx0cykge1xuICAgICAgICAgICAgICAgIG9iamVjdC5zdG9wX3NlcXVlbmNlID0gMDtcbiAgICAgICAgICAgICAgICBvYmplY3Quc3RvcF9pZCA9IFwiXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5zdG9wX3NlcXVlbmNlICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInN0b3Bfc2VxdWVuY2VcIikpXG4gICAgICAgICAgICAgICAgb2JqZWN0LnN0b3Bfc2VxdWVuY2UgPSBtZXNzYWdlLnN0b3Bfc2VxdWVuY2U7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5zdG9wX2lkICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInN0b3BfaWRcIikpXG4gICAgICAgICAgICAgICAgb2JqZWN0LnN0b3BfaWQgPSBtZXNzYWdlLnN0b3BfaWQ7XG4gICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIFN0b3BTZWxlY3RvciB0byBKU09OLlxuICAgICAgICAgKiBAZnVuY3Rpb24gdG9KU09OXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlN0b3BTZWxlY3RvclxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICogQHJldHVybnMge09iamVjdC48c3RyaW5nLCo+fSBKU09OIG9iamVjdFxuICAgICAgICAgKi9cbiAgICAgICAgU3RvcFNlbGVjdG9yLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLCAkcHJvdG9idWYudXRpbC50b0pTT05PcHRpb25zKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogR2V0cyB0aGUgZGVmYXVsdCB0eXBlIHVybCBmb3IgU3RvcFNlbGVjdG9yXG4gICAgICAgICAqIEBmdW5jdGlvbiBnZXRUeXBlVXJsXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlN0b3BTZWxlY3RvclxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbdHlwZVVybFByZWZpeF0geW91ciBjdXN0b20gdHlwZVVybFByZWZpeChkZWZhdWx0IFwidHlwZS5nb29nbGVhcGlzLmNvbVwiKVxuICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgZGVmYXVsdCB0eXBlIHVybFxuICAgICAgICAgKi9cbiAgICAgICAgU3RvcFNlbGVjdG9yLmdldFR5cGVVcmwgPSBmdW5jdGlvbiBnZXRUeXBlVXJsKHR5cGVVcmxQcmVmaXgpIHtcbiAgICAgICAgICAgIGlmICh0eXBlVXJsUHJlZml4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0eXBlVXJsUHJlZml4ID0gXCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHlwZVVybFByZWZpeCArIFwiL3RyYW5zaXRfcmVhbHRpbWUuU3RvcFNlbGVjdG9yXCI7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIFN0b3BTZWxlY3RvcjtcbiAgICB9KSgpO1xuXG4gICAgdHJhbnNpdF9yZWFsdGltZS5SZXBsYWNlbWVudFN0b3AgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFByb3BlcnRpZXMgb2YgYSBSZXBsYWNlbWVudFN0b3AuXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lXG4gICAgICAgICAqIEBpbnRlcmZhY2UgSVJlcGxhY2VtZW50U3RvcFxuICAgICAgICAgKiBAcHJvcGVydHkge251bWJlcnxudWxsfSBbdHJhdmVsX3RpbWVfdG9fc3RvcF0gUmVwbGFjZW1lbnRTdG9wIHRyYXZlbF90aW1lX3RvX3N0b3BcbiAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd8bnVsbH0gW3N0b3BfaWRdIFJlcGxhY2VtZW50U3RvcCBzdG9wX2lkXG4gICAgICAgICAqL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFJlcGxhY2VtZW50U3RvcC5cbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWVcbiAgICAgICAgICogQGNsYXNzZGVzYyBSZXByZXNlbnRzIGEgUmVwbGFjZW1lbnRTdG9wLlxuICAgICAgICAgKiBAaW1wbGVtZW50cyBJUmVwbGFjZW1lbnRTdG9wXG4gICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuSVJlcGxhY2VtZW50U3RvcD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gUmVwbGFjZW1lbnRTdG9wKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1trZXlzW2ldXSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trZXlzW2ldXSA9IHByb3BlcnRpZXNba2V5c1tpXV07XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVwbGFjZW1lbnRTdG9wIHRyYXZlbF90aW1lX3RvX3N0b3AuXG4gICAgICAgICAqIEBtZW1iZXIge251bWJlcn0gdHJhdmVsX3RpbWVfdG9fc3RvcFxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5SZXBsYWNlbWVudFN0b3BcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqL1xuICAgICAgICBSZXBsYWNlbWVudFN0b3AucHJvdG90eXBlLnRyYXZlbF90aW1lX3RvX3N0b3AgPSAwO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXBsYWNlbWVudFN0b3Agc3RvcF9pZC5cbiAgICAgICAgICogQG1lbWJlciB7c3RyaW5nfSBzdG9wX2lkXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlJlcGxhY2VtZW50U3RvcFxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICovXG4gICAgICAgIFJlcGxhY2VtZW50U3RvcC5wcm90b3R5cGUuc3RvcF9pZCA9IFwiXCI7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYSBuZXcgUmVwbGFjZW1lbnRTdG9wIGluc3RhbmNlIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJvcGVydGllcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGNyZWF0ZVxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5SZXBsYWNlbWVudFN0b3BcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuSVJlcGxhY2VtZW50U3RvcD19IFtwcm9wZXJ0aWVzXSBQcm9wZXJ0aWVzIHRvIHNldFxuICAgICAgICAgKiBAcmV0dXJucyB7dHJhbnNpdF9yZWFsdGltZS5SZXBsYWNlbWVudFN0b3B9IFJlcGxhY2VtZW50U3RvcCBpbnN0YW5jZVxuICAgICAgICAgKi9cbiAgICAgICAgUmVwbGFjZW1lbnRTdG9wLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlcGxhY2VtZW50U3RvcChwcm9wZXJ0aWVzKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRW5jb2RlcyB0aGUgc3BlY2lmaWVkIFJlcGxhY2VtZW50U3RvcCBtZXNzYWdlLiBEb2VzIG5vdCBpbXBsaWNpdGx5IHtAbGluayB0cmFuc2l0X3JlYWx0aW1lLlJlcGxhY2VtZW50U3RvcC52ZXJpZnl8dmVyaWZ5fSBtZXNzYWdlcy5cbiAgICAgICAgICogQGZ1bmN0aW9uIGVuY29kZVxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5SZXBsYWNlbWVudFN0b3BcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge3RyYW5zaXRfcmVhbHRpbWUuSVJlcGxhY2VtZW50U3RvcH0gbWVzc2FnZSBSZXBsYWNlbWVudFN0b3AgbWVzc2FnZSBvciBwbGFpbiBvYmplY3QgdG8gZW5jb2RlXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLldyaXRlcn0gW3dyaXRlcl0gV3JpdGVyIHRvIGVuY29kZSB0b1xuICAgICAgICAgKiBAcmV0dXJucyB7JHByb3RvYnVmLldyaXRlcn0gV3JpdGVyXG4gICAgICAgICAqL1xuICAgICAgICBSZXBsYWNlbWVudFN0b3AuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKG1lc3NhZ2UsIHdyaXRlcikge1xuICAgICAgICAgICAgaWYgKCF3cml0ZXIpXG4gICAgICAgICAgICAgICAgd3JpdGVyID0gJFdyaXRlci5jcmVhdGUoKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnRyYXZlbF90aW1lX3RvX3N0b3AgIT0gbnVsbCAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtZXNzYWdlLCBcInRyYXZlbF90aW1lX3RvX3N0b3BcIikpXG4gICAgICAgICAgICAgICAgd3JpdGVyLnVpbnQzMigvKiBpZCAxLCB3aXJlVHlwZSAwID0qLzgpLmludDMyKG1lc3NhZ2UudHJhdmVsX3RpbWVfdG9fc3RvcCk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5zdG9wX2lkICE9IG51bGwgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobWVzc2FnZSwgXCJzdG9wX2lkXCIpKVxuICAgICAgICAgICAgICAgIHdyaXRlci51aW50MzIoLyogaWQgMiwgd2lyZVR5cGUgMiA9Ki8xOCkuc3RyaW5nKG1lc3NhZ2Uuc3RvcF9pZCk7XG4gICAgICAgICAgICByZXR1cm4gd3JpdGVyO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFbmNvZGVzIHRoZSBzcGVjaWZpZWQgUmVwbGFjZW1lbnRTdG9wIG1lc3NhZ2UsIGxlbmd0aCBkZWxpbWl0ZWQuIERvZXMgbm90IGltcGxpY2l0bHkge0BsaW5rIHRyYW5zaXRfcmVhbHRpbWUuUmVwbGFjZW1lbnRTdG9wLnZlcmlmeXx2ZXJpZnl9IG1lc3NhZ2VzLlxuICAgICAgICAgKiBAZnVuY3Rpb24gZW5jb2RlRGVsaW1pdGVkXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlJlcGxhY2VtZW50U3RvcFxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7dHJhbnNpdF9yZWFsdGltZS5JUmVwbGFjZW1lbnRTdG9wfSBtZXNzYWdlIFJlcGxhY2VtZW50U3RvcCBtZXNzYWdlIG9yIHBsYWluIG9iamVjdCB0byBlbmNvZGVcbiAgICAgICAgICogQHBhcmFtIHskcHJvdG9idWYuV3JpdGVyfSBbd3JpdGVyXSBXcml0ZXIgdG8gZW5jb2RlIHRvXG4gICAgICAgICAqIEByZXR1cm5zIHskcHJvdG9idWYuV3JpdGVyfSBXcml0ZXJcbiAgICAgICAgICovXG4gICAgICAgIFJlcGxhY2VtZW50U3RvcC5lbmNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBlbmNvZGVEZWxpbWl0ZWQobWVzc2FnZSwgd3JpdGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGUobWVzc2FnZSwgd3JpdGVyKS5sZGVsaW0oKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRGVjb2RlcyBhIFJlcGxhY2VtZW50U3RvcCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLlxuICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlJlcGxhY2VtZW50U3RvcFxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aF0gTWVzc2FnZSBsZW5ndGggaWYga25vd24gYmVmb3JlaGFuZFxuICAgICAgICAgKiBAcmV0dXJucyB7dHJhbnNpdF9yZWFsdGltZS5SZXBsYWNlbWVudFN0b3B9IFJlcGxhY2VtZW50U3RvcFxuICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICovXG4gICAgICAgIFJlcGxhY2VtZW50U3RvcC5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUocmVhZGVyLCBsZW5ndGgsIGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICByZWFkZXIgPSAkUmVhZGVyLmNyZWF0ZShyZWFkZXIpO1xuICAgICAgICAgICAgdmFyIGVuZCA9IGxlbmd0aCA9PT0gdW5kZWZpbmVkID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGgsIG1lc3NhZ2UgPSBuZXcgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5SZXBsYWNlbWVudFN0b3AoKTtcbiAgICAgICAgICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRhZyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICAgICAgICBpZiAodGFnID09PSBlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgc3dpdGNoICh0YWcgPj4+IDMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudHJhdmVsX3RpbWVfdG9fc3RvcCA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIDI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3RvcF9pZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnNraXBUeXBlKHRhZyAmIDcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRGVjb2RlcyBhIFJlcGxhY2VtZW50U3RvcCBtZXNzYWdlIGZyb20gdGhlIHNwZWNpZmllZCByZWFkZXIgb3IgYnVmZmVyLCBsZW5ndGggZGVsaW1pdGVkLlxuICAgICAgICAgKiBAZnVuY3Rpb24gZGVjb2RlRGVsaW1pdGVkXG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlJlcGxhY2VtZW50U3RvcFxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLlJlYWRlcnxVaW50OEFycmF5fSByZWFkZXIgUmVhZGVyIG9yIGJ1ZmZlciB0byBkZWNvZGUgZnJvbVxuICAgICAgICAgKiBAcmV0dXJucyB7dHJhbnNpdF9yZWFsdGltZS5SZXBsYWNlbWVudFN0b3B9IFJlcGxhY2VtZW50U3RvcFxuICAgICAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBheWxvYWQgaXMgbm90IGEgcmVhZGVyIG9yIHZhbGlkIGJ1ZmZlclxuICAgICAgICAgKiBAdGhyb3dzIHskcHJvdG9idWYudXRpbC5Qcm90b2NvbEVycm9yfSBJZiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmdcbiAgICAgICAgICovXG4gICAgICAgIFJlcGxhY2VtZW50U3RvcC5kZWNvZGVEZWxpbWl0ZWQgPSBmdW5jdGlvbiBkZWNvZGVEZWxpbWl0ZWQocmVhZGVyKSB7XG4gICAgICAgICAgICBpZiAoIShyZWFkZXIgaW5zdGFuY2VvZiAkUmVhZGVyKSlcbiAgICAgICAgICAgICAgICByZWFkZXIgPSBuZXcgJFJlYWRlcihyZWFkZXIpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVmVyaWZpZXMgYSBSZXBsYWNlbWVudFN0b3AgbWVzc2FnZS5cbiAgICAgICAgICogQGZ1bmN0aW9uIHZlcmlmeVxuICAgICAgICAgKiBAbWVtYmVyb2YgdHJhbnNpdF9yZWFsdGltZS5SZXBsYWNlbWVudFN0b3BcbiAgICAgICAgICogQHN0YXRpY1xuICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCo+fSBtZXNzYWdlIFBsYWluIG9iamVjdCB0byB2ZXJpZnlcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfSBgbnVsbGAgaWYgdmFsaWQsIG90aGVyd2lzZSB0aGUgcmVhc29uIHdoeSBpdCBpcyBub3RcbiAgICAgICAgICovXG4gICAgICAgIFJlcGxhY2VtZW50U3RvcC52ZXJpZnkgPSBmdW5jdGlvbiB2ZXJpZnkobWVzc2FnZSkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSBcIm9iamVjdFwiIHx8IG1lc3NhZ2UgPT09IG51bGwpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwib2JqZWN0IGV4cGVjdGVkXCI7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS50cmF2ZWxfdGltZV90b19zdG9wICE9IG51bGwgJiYgbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShcInRyYXZlbF90aW1lX3RvX3N0b3BcIikpXG4gICAgICAgICAgICAgICAgaWYgKCEkdXRpbC5pc0ludGVnZXIobWVzc2FnZS50cmF2ZWxfdGltZV90b19zdG9wKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwidHJhdmVsX3RpbWVfdG9fc3RvcDogaW50ZWdlciBleHBlY3RlZFwiO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc3RvcF9pZCAhPSBudWxsICYmIG1lc3NhZ2UuaGFzT3duUHJvcGVydHkoXCJzdG9wX2lkXCIpKVxuICAgICAgICAgICAgICAgIGlmICghJHV0aWwuaXNTdHJpbmcobWVzc2FnZS5zdG9wX2lkKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwic3RvcF9pZDogc3RyaW5nIGV4cGVjdGVkXCI7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlcyBhIFJlcGxhY2VtZW50U3RvcCBtZXNzYWdlIGZyb20gYSBwbGFpbiBvYmplY3QuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIHRoZWlyIHJlc3BlY3RpdmUgaW50ZXJuYWwgdHlwZXMuXG4gICAgICAgICAqIEBmdW5jdGlvbiBmcm9tT2JqZWN0XG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlJlcGxhY2VtZW50U3RvcFxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IG9iamVjdCBQbGFpbiBvYmplY3RcbiAgICAgICAgICogQHJldHVybnMge3RyYW5zaXRfcmVhbHRpbWUuUmVwbGFjZW1lbnRTdG9wfSBSZXBsYWNlbWVudFN0b3BcbiAgICAgICAgICovXG4gICAgICAgIFJlcGxhY2VtZW50U3RvcC5mcm9tT2JqZWN0ID0gZnVuY3Rpb24gZnJvbU9iamVjdChvYmplY3QpIHtcbiAgICAgICAgICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiAkcm9vdC50cmFuc2l0X3JlYWx0aW1lLlJlcGxhY2VtZW50U3RvcClcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBuZXcgJHJvb3QudHJhbnNpdF9yZWFsdGltZS5SZXBsYWNlbWVudFN0b3AoKTtcbiAgICAgICAgICAgIGlmIChvYmplY3QudHJhdmVsX3RpbWVfdG9fc3RvcCAhPSBudWxsKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UudHJhdmVsX3RpbWVfdG9fc3RvcCA9IG9iamVjdC50cmF2ZWxfdGltZV90b19zdG9wIHwgMDtcbiAgICAgICAgICAgIGlmIChvYmplY3Quc3RvcF9pZCAhPSBudWxsKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3RvcF9pZCA9IFN0cmluZyhvYmplY3Quc3RvcF9pZCk7XG4gICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlcyBhIHBsYWluIG9iamVjdCBmcm9tIGEgUmVwbGFjZW1lbnRTdG9wIG1lc3NhZ2UuIEFsc28gY29udmVydHMgdmFsdWVzIHRvIG90aGVyIHR5cGVzIGlmIHNwZWNpZmllZC5cbiAgICAgICAgICogQGZ1bmN0aW9uIHRvT2JqZWN0XG4gICAgICAgICAqIEBtZW1iZXJvZiB0cmFuc2l0X3JlYWx0aW1lLlJlcGxhY2VtZW50U3RvcFxuICAgICAgICAgKiBAc3RhdGljXG4gICAgICAgICAqIEBwYXJhbSB7dHJhbnNpdF9yZWFsdGltZS5SZXBsYWNlbWVudFN0b3B9IG1lc3NhZ2UgUmVwbGFjZW1lbnRTdG9wXG4gICAgICAgICAqIEBwYXJhbSB7JHByb3RvYnVmLklDb252ZXJzaW9uT3B0aW9uc30gW29wdGlvbnNdIENvbnZlcnNpb24gb3B0aW9uc1xuICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IFBsYWluIG9iamVjdFxuICAgICAgICAgKi9cbiAgICAgICAgUmVwbGFjZW1lbnRTdG9wLnRvT2JqZWN0ID0gZnVuY3Rpb24gdG9PYmplY3QobWVzc2FnZSwgb3B0aW9ucykge1xuICAgICAgICAgICAgaWYgKCFvcHRpb25zKVxuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgICAgIHZhciBvYmplY3QgPSB7fTtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmRlZmF1bHRzKSB7XG4gICAgICAgICAgICAgICAgb2JqZWN0LnRyYXZlbF90aW1lX3RvX3N0b3AgPSAwO1xuICAgICAgICAgICAgICAgIG9iamVjdC5zdG9wX2lkID0gXCJcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnRyYXZlbF90aW1lX3RvX3N0b3AgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwidHJhdmVsX3RpbWVfdG9fc3RvcFwiKSlcbiAgICAgICAgICAgICAgICBvYmplY3QudHJhdmVsX3RpbWVfdG9fc3RvcCA9IG1lc3NhZ2UudHJhdmVsX3RpbWVfdG9fc3RvcDtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnN0b3BfaWQgIT0gbnVsbCAmJiBtZXNzYWdlLmhhc093blByb3BlcnR5KFwic3RvcF9pZFwiKSlcbiAgICAgICAgICAgICAgICBvYmplY3Quc3RvcF9pZCA9IG1lc3NhZ2Uuc3RvcF9pZDtcbiAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbnZlcnRzIHRoaXMgUmVwbGFjZW1lbnRTdG9wIHRvIEpTT04uXG4gICAgICAgICAqIEBmdW5jdGlvbiB0b0pTT05cbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuUmVwbGFjZW1lbnRTdG9wXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsKj59IEpTT04gb2JqZWN0XG4gICAgICAgICAqL1xuICAgICAgICBSZXBsYWNlbWVudFN0b3AucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsICRwcm90b2J1Zi51dGlsLnRvSlNPTk9wdGlvbnMpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXRzIHRoZSBkZWZhdWx0IHR5cGUgdXJsIGZvciBSZXBsYWNlbWVudFN0b3BcbiAgICAgICAgICogQGZ1bmN0aW9uIGdldFR5cGVVcmxcbiAgICAgICAgICogQG1lbWJlcm9mIHRyYW5zaXRfcmVhbHRpbWUuUmVwbGFjZW1lbnRTdG9wXG4gICAgICAgICAqIEBzdGF0aWNcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFt0eXBlVXJsUHJlZml4XSB5b3VyIGN1c3RvbSB0eXBlVXJsUHJlZml4KGRlZmF1bHQgXCJ0eXBlLmdvb2dsZWFwaXMuY29tXCIpXG4gICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBkZWZhdWx0IHR5cGUgdXJsXG4gICAgICAgICAqL1xuICAgICAgICBSZXBsYWNlbWVudFN0b3AuZ2V0VHlwZVVybCA9IGZ1bmN0aW9uIGdldFR5cGVVcmwodHlwZVVybFByZWZpeCkge1xuICAgICAgICAgICAgaWYgKHR5cGVVcmxQcmVmaXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHR5cGVVcmxQcmVmaXggPSBcInR5cGUuZ29vZ2xlYXBpcy5jb21cIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0eXBlVXJsUHJlZml4ICsgXCIvdHJhbnNpdF9yZWFsdGltZS5SZXBsYWNlbWVudFN0b3BcIjtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gUmVwbGFjZW1lbnRTdG9wO1xuICAgIH0pKCk7XG5cbiAgICByZXR1cm4gdHJhbnNpdF9yZWFsdGltZTtcbn0pKCk7XG5cbm1vZHVsZS5leHBvcnRzID0gJHJvb3Q7XG4iLCAiJ3VzZSBzdHJpY3QnXG5cbmNvbnN0IHt0cmFuc2l0X3JlYWx0aW1lfSA9IHJlcXVpcmUoJy4vZ3Rmcy1yZWFsdGltZS5wYmYuanMnKVxuXG5tb2R1bGUuZXhwb3J0cyA9IHRyYW5zaXRfcmVhbHRpbWVcbiIsICIhZnVuY3Rpb24odCxlKXtcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz1lKCk6XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShlKToodD1cInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsVGhpcz9nbG9iYWxUaGlzOnR8fHNlbGYpLmRheWpzPWUoKX0odGhpcywoZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjt2YXIgdD0xZTMsZT02ZTQsbj0zNmU1LHI9XCJtaWxsaXNlY29uZFwiLGk9XCJzZWNvbmRcIixzPVwibWludXRlXCIsdT1cImhvdXJcIixhPVwiZGF5XCIsbz1cIndlZWtcIixjPVwibW9udGhcIixmPVwicXVhcnRlclwiLGg9XCJ5ZWFyXCIsZD1cImRhdGVcIixsPVwiSW52YWxpZCBEYXRlXCIsJD0vXihcXGR7NH0pWy0vXT8oXFxkezEsMn0pP1stL10/KFxcZHswLDJ9KVtUdFxcc10qKFxcZHsxLDJ9KT86PyhcXGR7MSwyfSk/Oj8oXFxkezEsMn0pP1suOl0/KFxcZCspPyQvLHk9L1xcWyhbXlxcXV0rKV18WXsxLDR9fE17MSw0fXxEezEsMn18ZHsxLDR9fEh7MSwyfXxoezEsMn18YXxBfG17MSwyfXxzezEsMn18WnsxLDJ9fFNTUy9nLE09e25hbWU6XCJlblwiLHdlZWtkYXlzOlwiU3VuZGF5X01vbmRheV9UdWVzZGF5X1dlZG5lc2RheV9UaHVyc2RheV9GcmlkYXlfU2F0dXJkYXlcIi5zcGxpdChcIl9cIiksbW9udGhzOlwiSmFudWFyeV9GZWJydWFyeV9NYXJjaF9BcHJpbF9NYXlfSnVuZV9KdWx5X0F1Z3VzdF9TZXB0ZW1iZXJfT2N0b2Jlcl9Ob3ZlbWJlcl9EZWNlbWJlclwiLnNwbGl0KFwiX1wiKSxvcmRpbmFsOmZ1bmN0aW9uKHQpe3ZhciBlPVtcInRoXCIsXCJzdFwiLFwibmRcIixcInJkXCJdLG49dCUxMDA7cmV0dXJuXCJbXCIrdCsoZVsobi0yMCklMTBdfHxlW25dfHxlWzBdKStcIl1cIn19LG09ZnVuY3Rpb24odCxlLG4pe3ZhciByPVN0cmluZyh0KTtyZXR1cm4hcnx8ci5sZW5ndGg+PWU/dDpcIlwiK0FycmF5KGUrMS1yLmxlbmd0aCkuam9pbihuKSt0fSx2PXtzOm0sejpmdW5jdGlvbih0KXt2YXIgZT0tdC51dGNPZmZzZXQoKSxuPU1hdGguYWJzKGUpLHI9TWF0aC5mbG9vcihuLzYwKSxpPW4lNjA7cmV0dXJuKGU8PTA/XCIrXCI6XCItXCIpK20ociwyLFwiMFwiKStcIjpcIittKGksMixcIjBcIil9LG06ZnVuY3Rpb24gdChlLG4pe2lmKGUuZGF0ZSgpPG4uZGF0ZSgpKXJldHVybi10KG4sZSk7dmFyIHI9MTIqKG4ueWVhcigpLWUueWVhcigpKSsobi5tb250aCgpLWUubW9udGgoKSksaT1lLmNsb25lKCkuYWRkKHIsYykscz1uLWk8MCx1PWUuY2xvbmUoKS5hZGQocisocz8tMToxKSxjKTtyZXR1cm4rKC0ocisobi1pKS8ocz9pLXU6dS1pKSl8fDApfSxhOmZ1bmN0aW9uKHQpe3JldHVybiB0PDA/TWF0aC5jZWlsKHQpfHwwOk1hdGguZmxvb3IodCl9LHA6ZnVuY3Rpb24odCl7cmV0dXJue006Yyx5OmgsdzpvLGQ6YSxEOmQsaDp1LG06cyxzOmksbXM6cixROmZ9W3RdfHxTdHJpbmcodHx8XCJcIikudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9zJC8sXCJcIil9LHU6ZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMD09PXR9fSxnPVwiZW5cIixEPXt9O0RbZ109TTt2YXIgcD1cIiRpc0RheWpzT2JqZWN0XCIsUz1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIF98fCEoIXR8fCF0W3BdKX0sdz1mdW5jdGlvbiB0KGUsbixyKXt2YXIgaTtpZighZSlyZXR1cm4gZztpZihcInN0cmluZ1wiPT10eXBlb2YgZSl7dmFyIHM9ZS50b0xvd2VyQ2FzZSgpO0Rbc10mJihpPXMpLG4mJihEW3NdPW4saT1zKTt2YXIgdT1lLnNwbGl0KFwiLVwiKTtpZighaSYmdS5sZW5ndGg+MSlyZXR1cm4gdCh1WzBdKX1lbHNle3ZhciBhPWUubmFtZTtEW2FdPWUsaT1hfXJldHVybiFyJiZpJiYoZz1pKSxpfHwhciYmZ30sTz1mdW5jdGlvbih0LGUpe2lmKFModCkpcmV0dXJuIHQuY2xvbmUoKTt2YXIgbj1cIm9iamVjdFwiPT10eXBlb2YgZT9lOnt9O3JldHVybiBuLmRhdGU9dCxuLmFyZ3M9YXJndW1lbnRzLG5ldyBfKG4pfSxiPXY7Yi5sPXcsYi5pPVMsYi53PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIE8odCx7bG9jYWxlOmUuJEwsdXRjOmUuJHUseDplLiR4LCRvZmZzZXQ6ZS4kb2Zmc2V0fSl9O3ZhciBfPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gTSh0KXt0aGlzLiRMPXcodC5sb2NhbGUsbnVsbCwhMCksdGhpcy5wYXJzZSh0KSx0aGlzLiR4PXRoaXMuJHh8fHQueHx8e30sdGhpc1twXT0hMH12YXIgbT1NLnByb3RvdHlwZTtyZXR1cm4gbS5wYXJzZT1mdW5jdGlvbih0KXt0aGlzLiRkPWZ1bmN0aW9uKHQpe3ZhciBlPXQuZGF0ZSxuPXQudXRjO2lmKG51bGw9PT1lKXJldHVybiBuZXcgRGF0ZShOYU4pO2lmKGIudShlKSlyZXR1cm4gbmV3IERhdGU7aWYoZSBpbnN0YW5jZW9mIERhdGUpcmV0dXJuIG5ldyBEYXRlKGUpO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlJiYhL1okL2kudGVzdChlKSl7dmFyIHI9ZS5tYXRjaCgkKTtpZihyKXt2YXIgaT1yWzJdLTF8fDAscz0ocls3XXx8XCIwXCIpLnN1YnN0cmluZygwLDMpO3JldHVybiBuP25ldyBEYXRlKERhdGUuVVRDKHJbMV0saSxyWzNdfHwxLHJbNF18fDAscls1XXx8MCxyWzZdfHwwLHMpKTpuZXcgRGF0ZShyWzFdLGksclszXXx8MSxyWzRdfHwwLHJbNV18fDAscls2XXx8MCxzKX19cmV0dXJuIG5ldyBEYXRlKGUpfSh0KSx0aGlzLmluaXQoKX0sbS5pbml0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy4kZDt0aGlzLiR5PXQuZ2V0RnVsbFllYXIoKSx0aGlzLiRNPXQuZ2V0TW9udGgoKSx0aGlzLiREPXQuZ2V0RGF0ZSgpLHRoaXMuJFc9dC5nZXREYXkoKSx0aGlzLiRIPXQuZ2V0SG91cnMoKSx0aGlzLiRtPXQuZ2V0TWludXRlcygpLHRoaXMuJHM9dC5nZXRTZWNvbmRzKCksdGhpcy4kbXM9dC5nZXRNaWxsaXNlY29uZHMoKX0sbS4kdXRpbHM9ZnVuY3Rpb24oKXtyZXR1cm4gYn0sbS5pc1ZhbGlkPWZ1bmN0aW9uKCl7cmV0dXJuISh0aGlzLiRkLnRvU3RyaW5nKCk9PT1sKX0sbS5pc1NhbWU9ZnVuY3Rpb24odCxlKXt2YXIgbj1PKHQpO3JldHVybiB0aGlzLnN0YXJ0T2YoZSk8PW4mJm48PXRoaXMuZW5kT2YoZSl9LG0uaXNBZnRlcj1mdW5jdGlvbih0LGUpe3JldHVybiBPKHQpPHRoaXMuc3RhcnRPZihlKX0sbS5pc0JlZm9yZT1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmVuZE9mKGUpPE8odCl9LG0uJGc9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBiLnUodCk/dGhpc1tlXTp0aGlzLnNldChuLHQpfSxtLnVuaXg9ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5mbG9vcih0aGlzLnZhbHVlT2YoKS8xZTMpfSxtLnZhbHVlT2Y9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZC5nZXRUaW1lKCl9LG0uc3RhcnRPZj1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMscj0hIWIudShlKXx8ZSxmPWIucCh0KSxsPWZ1bmN0aW9uKHQsZSl7dmFyIGk9Yi53KG4uJHU/RGF0ZS5VVEMobi4keSxlLHQpOm5ldyBEYXRlKG4uJHksZSx0KSxuKTtyZXR1cm4gcj9pOmkuZW5kT2YoYSl9LCQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gYi53KG4udG9EYXRlKClbdF0uYXBwbHkobi50b0RhdGUoXCJzXCIpLChyP1swLDAsMCwwXTpbMjMsNTksNTksOTk5XSkuc2xpY2UoZSkpLG4pfSx5PXRoaXMuJFcsTT10aGlzLiRNLG09dGhpcy4kRCx2PVwic2V0XCIrKHRoaXMuJHU/XCJVVENcIjpcIlwiKTtzd2l0Y2goZil7Y2FzZSBoOnJldHVybiByP2woMSwwKTpsKDMxLDExKTtjYXNlIGM6cmV0dXJuIHI/bCgxLE0pOmwoMCxNKzEpO2Nhc2Ugbzp2YXIgZz10aGlzLiRsb2NhbGUoKS53ZWVrU3RhcnR8fDAsRD0oeTxnP3krNzp5KS1nO3JldHVybiBsKHI/bS1EOm0rKDYtRCksTSk7Y2FzZSBhOmNhc2UgZDpyZXR1cm4gJCh2K1wiSG91cnNcIiwwKTtjYXNlIHU6cmV0dXJuICQoditcIk1pbnV0ZXNcIiwxKTtjYXNlIHM6cmV0dXJuICQoditcIlNlY29uZHNcIiwyKTtjYXNlIGk6cmV0dXJuICQoditcIk1pbGxpc2Vjb25kc1wiLDMpO2RlZmF1bHQ6cmV0dXJuIHRoaXMuY2xvbmUoKX19LG0uZW5kT2Y9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc3RhcnRPZih0LCExKX0sbS4kc2V0PWZ1bmN0aW9uKHQsZSl7dmFyIG4sbz1iLnAodCksZj1cInNldFwiKyh0aGlzLiR1P1wiVVRDXCI6XCJcIiksbD0obj17fSxuW2FdPWYrXCJEYXRlXCIsbltkXT1mK1wiRGF0ZVwiLG5bY109ZitcIk1vbnRoXCIsbltoXT1mK1wiRnVsbFllYXJcIixuW3VdPWYrXCJIb3Vyc1wiLG5bc109ZitcIk1pbnV0ZXNcIixuW2ldPWYrXCJTZWNvbmRzXCIsbltyXT1mK1wiTWlsbGlzZWNvbmRzXCIsbilbb10sJD1vPT09YT90aGlzLiREKyhlLXRoaXMuJFcpOmU7aWYobz09PWN8fG89PT1oKXt2YXIgeT10aGlzLmNsb25lKCkuc2V0KGQsMSk7eS4kZFtsXSgkKSx5LmluaXQoKSx0aGlzLiRkPXkuc2V0KGQsTWF0aC5taW4odGhpcy4kRCx5LmRheXNJbk1vbnRoKCkpKS4kZH1lbHNlIGwmJnRoaXMuJGRbbF0oJCk7cmV0dXJuIHRoaXMuaW5pdCgpLHRoaXN9LG0uc2V0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuY2xvbmUoKS4kc2V0KHQsZSl9LG0uZ2V0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzW2IucCh0KV0oKX0sbS5hZGQ9ZnVuY3Rpb24ocixmKXt2YXIgZCxsPXRoaXM7cj1OdW1iZXIocik7dmFyICQ9Yi5wKGYpLHk9ZnVuY3Rpb24odCl7dmFyIGU9TyhsKTtyZXR1cm4gYi53KGUuZGF0ZShlLmRhdGUoKStNYXRoLnJvdW5kKHQqcikpLGwpfTtpZigkPT09YylyZXR1cm4gdGhpcy5zZXQoYyx0aGlzLiRNK3IpO2lmKCQ9PT1oKXJldHVybiB0aGlzLnNldChoLHRoaXMuJHkrcik7aWYoJD09PWEpcmV0dXJuIHkoMSk7aWYoJD09PW8pcmV0dXJuIHkoNyk7dmFyIE09KGQ9e30sZFtzXT1lLGRbdV09bixkW2ldPXQsZClbJF18fDEsbT10aGlzLiRkLmdldFRpbWUoKStyKk07cmV0dXJuIGIudyhtLHRoaXMpfSxtLnN1YnRyYWN0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuYWRkKC0xKnQsZSl9LG0uZm9ybWF0PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj10aGlzLiRsb2NhbGUoKTtpZighdGhpcy5pc1ZhbGlkKCkpcmV0dXJuIG4uaW52YWxpZERhdGV8fGw7dmFyIHI9dHx8XCJZWVlZLU1NLUREVEhIOm1tOnNzWlwiLGk9Yi56KHRoaXMpLHM9dGhpcy4kSCx1PXRoaXMuJG0sYT10aGlzLiRNLG89bi53ZWVrZGF5cyxjPW4ubW9udGhzLGY9bi5tZXJpZGllbSxoPWZ1bmN0aW9uKHQsbixpLHMpe3JldHVybiB0JiYodFtuXXx8dChlLHIpKXx8aVtuXS5zbGljZSgwLHMpfSxkPWZ1bmN0aW9uKHQpe3JldHVybiBiLnMocyUxMnx8MTIsdCxcIjBcIil9LCQ9Znx8ZnVuY3Rpb24odCxlLG4pe3ZhciByPXQ8MTI/XCJBTVwiOlwiUE1cIjtyZXR1cm4gbj9yLnRvTG93ZXJDYXNlKCk6cn07cmV0dXJuIHIucmVwbGFjZSh5LChmdW5jdGlvbih0LHIpe3JldHVybiByfHxmdW5jdGlvbih0KXtzd2l0Y2godCl7Y2FzZVwiWVlcIjpyZXR1cm4gU3RyaW5nKGUuJHkpLnNsaWNlKC0yKTtjYXNlXCJZWVlZXCI6cmV0dXJuIGIucyhlLiR5LDQsXCIwXCIpO2Nhc2VcIk1cIjpyZXR1cm4gYSsxO2Nhc2VcIk1NXCI6cmV0dXJuIGIucyhhKzEsMixcIjBcIik7Y2FzZVwiTU1NXCI6cmV0dXJuIGgobi5tb250aHNTaG9ydCxhLGMsMyk7Y2FzZVwiTU1NTVwiOnJldHVybiBoKGMsYSk7Y2FzZVwiRFwiOnJldHVybiBlLiREO2Nhc2VcIkREXCI6cmV0dXJuIGIucyhlLiRELDIsXCIwXCIpO2Nhc2VcImRcIjpyZXR1cm4gU3RyaW5nKGUuJFcpO2Nhc2VcImRkXCI6cmV0dXJuIGgobi53ZWVrZGF5c01pbixlLiRXLG8sMik7Y2FzZVwiZGRkXCI6cmV0dXJuIGgobi53ZWVrZGF5c1Nob3J0LGUuJFcsbywzKTtjYXNlXCJkZGRkXCI6cmV0dXJuIG9bZS4kV107Y2FzZVwiSFwiOnJldHVybiBTdHJpbmcocyk7Y2FzZVwiSEhcIjpyZXR1cm4gYi5zKHMsMixcIjBcIik7Y2FzZVwiaFwiOnJldHVybiBkKDEpO2Nhc2VcImhoXCI6cmV0dXJuIGQoMik7Y2FzZVwiYVwiOnJldHVybiAkKHMsdSwhMCk7Y2FzZVwiQVwiOnJldHVybiAkKHMsdSwhMSk7Y2FzZVwibVwiOnJldHVybiBTdHJpbmcodSk7Y2FzZVwibW1cIjpyZXR1cm4gYi5zKHUsMixcIjBcIik7Y2FzZVwic1wiOnJldHVybiBTdHJpbmcoZS4kcyk7Y2FzZVwic3NcIjpyZXR1cm4gYi5zKGUuJHMsMixcIjBcIik7Y2FzZVwiU1NTXCI6cmV0dXJuIGIucyhlLiRtcywzLFwiMFwiKTtjYXNlXCJaXCI6cmV0dXJuIGl9cmV0dXJuIG51bGx9KHQpfHxpLnJlcGxhY2UoXCI6XCIsXCJcIil9KSl9LG0udXRjT2Zmc2V0PWZ1bmN0aW9uKCl7cmV0dXJuIDE1Ki1NYXRoLnJvdW5kKHRoaXMuJGQuZ2V0VGltZXpvbmVPZmZzZXQoKS8xNSl9LG0uZGlmZj1mdW5jdGlvbihyLGQsbCl7dmFyICQseT10aGlzLE09Yi5wKGQpLG09TyhyKSx2PShtLnV0Y09mZnNldCgpLXRoaXMudXRjT2Zmc2V0KCkpKmUsZz10aGlzLW0sRD1mdW5jdGlvbigpe3JldHVybiBiLm0oeSxtKX07c3dpdGNoKE0pe2Nhc2UgaDokPUQoKS8xMjticmVhaztjYXNlIGM6JD1EKCk7YnJlYWs7Y2FzZSBmOiQ9RCgpLzM7YnJlYWs7Y2FzZSBvOiQ9KGctdikvNjA0OGU1O2JyZWFrO2Nhc2UgYTokPShnLXYpLzg2NGU1O2JyZWFrO2Nhc2UgdTokPWcvbjticmVhaztjYXNlIHM6JD1nL2U7YnJlYWs7Y2FzZSBpOiQ9Zy90O2JyZWFrO2RlZmF1bHQ6JD1nfXJldHVybiBsPyQ6Yi5hKCQpfSxtLmRheXNJbk1vbnRoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZW5kT2YoYykuJER9LG0uJGxvY2FsZT1mdW5jdGlvbigpe3JldHVybiBEW3RoaXMuJExdfSxtLmxvY2FsZT1mdW5jdGlvbih0LGUpe2lmKCF0KXJldHVybiB0aGlzLiRMO3ZhciBuPXRoaXMuY2xvbmUoKSxyPXcodCxlLCEwKTtyZXR1cm4gciYmKG4uJEw9ciksbn0sbS5jbG9uZT1mdW5jdGlvbigpe3JldHVybiBiLncodGhpcy4kZCx0aGlzKX0sbS50b0RhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IERhdGUodGhpcy52YWx1ZU9mKCkpfSxtLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzVmFsaWQoKT90aGlzLnRvSVNPU3RyaW5nKCk6bnVsbH0sbS50b0lTT1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRkLnRvSVNPU3RyaW5nKCl9LG0udG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZC50b1VUQ1N0cmluZygpfSxNfSgpLGs9Xy5wcm90b3R5cGU7cmV0dXJuIE8ucHJvdG90eXBlPWssW1tcIiRtc1wiLHJdLFtcIiRzXCIsaV0sW1wiJG1cIixzXSxbXCIkSFwiLHVdLFtcIiRXXCIsYV0sW1wiJE1cIixjXSxbXCIkeVwiLGhdLFtcIiREXCIsZF1dLmZvckVhY2goKGZ1bmN0aW9uKHQpe2tbdFsxXV09ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuJGcoZSx0WzBdLHRbMV0pfX0pKSxPLmV4dGVuZD1mdW5jdGlvbih0LGUpe3JldHVybiB0LiRpfHwodChlLF8sTyksdC4kaT0hMCksT30sTy5sb2NhbGU9dyxPLmlzRGF5anM9UyxPLnVuaXg9ZnVuY3Rpb24odCl7cmV0dXJuIE8oMWUzKnQpfSxPLmVuPURbZ10sTy5Mcz1ELE8ucD17fSxPfSkpOyIsICIhZnVuY3Rpb24ocixlKXtcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz1lKCk6XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShlKToocj1cInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsVGhpcz9nbG9iYWxUaGlzOnJ8fHNlbGYpLmRheWpzX3BsdWdpbl9yZWxhdGl2ZVRpbWU9ZSgpfSh0aGlzLChmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO3JldHVybiBmdW5jdGlvbihyLGUsdCl7cj1yfHx7fTt2YXIgbj1lLnByb3RvdHlwZSxvPXtmdXR1cmU6XCJpbiAlc1wiLHBhc3Q6XCIlcyBhZ29cIixzOlwiYSBmZXcgc2Vjb25kc1wiLG06XCJhIG1pbnV0ZVwiLG1tOlwiJWQgbWludXRlc1wiLGg6XCJhbiBob3VyXCIsaGg6XCIlZCBob3Vyc1wiLGQ6XCJhIGRheVwiLGRkOlwiJWQgZGF5c1wiLE06XCJhIG1vbnRoXCIsTU06XCIlZCBtb250aHNcIix5OlwiYSB5ZWFyXCIseXk6XCIlZCB5ZWFyc1wifTtmdW5jdGlvbiBpKHIsZSx0LG8pe3JldHVybiBuLmZyb21Ub0Jhc2UocixlLHQsbyl9dC5lbi5yZWxhdGl2ZVRpbWU9byxuLmZyb21Ub0Jhc2U9ZnVuY3Rpb24oZSxuLGksZCx1KXtmb3IodmFyIGYsYSxzLGw9aS4kbG9jYWxlKCkucmVsYXRpdmVUaW1lfHxvLGg9ci50aHJlc2hvbGRzfHxbe2w6XCJzXCIscjo0NCxkOlwic2Vjb25kXCJ9LHtsOlwibVwiLHI6ODl9LHtsOlwibW1cIixyOjQ0LGQ6XCJtaW51dGVcIn0se2w6XCJoXCIscjo4OX0se2w6XCJoaFwiLHI6MjEsZDpcImhvdXJcIn0se2w6XCJkXCIscjozNX0se2w6XCJkZFwiLHI6MjUsZDpcImRheVwifSx7bDpcIk1cIixyOjQ1fSx7bDpcIk1NXCIscjoxMCxkOlwibW9udGhcIn0se2w6XCJ5XCIscjoxN30se2w6XCJ5eVwiLGQ6XCJ5ZWFyXCJ9XSxtPWgubGVuZ3RoLGM9MDtjPG07Yys9MSl7dmFyIHk9aFtjXTt5LmQmJihmPWQ/dChlKS5kaWZmKGkseS5kLCEwKTppLmRpZmYoZSx5LmQsITApKTt2YXIgcD0oci5yb3VuZGluZ3x8TWF0aC5yb3VuZCkoTWF0aC5hYnMoZikpO2lmKHM9Zj4wLHA8PXkucnx8IXkucil7cDw9MSYmYz4wJiYoeT1oW2MtMV0pO3ZhciB2PWxbeS5sXTt1JiYocD11KFwiXCIrcCkpLGE9XCJzdHJpbmdcIj09dHlwZW9mIHY/di5yZXBsYWNlKFwiJWRcIixwKTp2KHAsbix5Lmwscyk7YnJlYWt9fWlmKG4pcmV0dXJuIGE7dmFyIE09cz9sLmZ1dHVyZTpsLnBhc3Q7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgTT9NKGEpOk0ucmVwbGFjZShcIiVzXCIsYSl9LG4udG89ZnVuY3Rpb24ocixlKXtyZXR1cm4gaShyLGUsdGhpcywhMCl9LG4uZnJvbT1mdW5jdGlvbihyLGUpe3JldHVybiBpKHIsZSx0aGlzKX07dmFyIGQ9ZnVuY3Rpb24ocil7cmV0dXJuIHIuJHU/dC51dGMoKTp0KCl9O24udG9Ob3c9ZnVuY3Rpb24ocil7cmV0dXJuIHRoaXMudG8oZCh0aGlzKSxyKX0sbi5mcm9tTm93PWZ1bmN0aW9uKHIpe3JldHVybiB0aGlzLmZyb20oZCh0aGlzKSxyKX19fSkpOyIsICIhZnVuY3Rpb24oZSx0KXtcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz10KCk6XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZSh0KTooZT1cInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsVGhpcz9nbG9iYWxUaGlzOmV8fHNlbGYpLmRheWpzX3BsdWdpbl9jdXN0b21QYXJzZUZvcm1hdD10KCl9KHRoaXMsKGZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGU9e0xUUzpcImg6bW06c3MgQVwiLExUOlwiaDptbSBBXCIsTDpcIk1NL0REL1lZWVlcIixMTDpcIk1NTU0gRCwgWVlZWVwiLExMTDpcIk1NTU0gRCwgWVlZWSBoOm1tIEFcIixMTExMOlwiZGRkZCwgTU1NTSBELCBZWVlZIGg6bW0gQVwifSx0PS8oXFxbW15bXSpcXF0pfChbLV86Ly4sKClcXHNdKyl8KEF8YXxRfFlZWVl8WVk/fHd3P3xNTT9NP00/fERvfEREP3xoaD98SEg/fG1tP3xzcz98U3sxLDN9fHp8Wlo/KS9nLG49L1xcZC8scj0vXFxkXFxkLyxpPS9cXGRcXGQ/LyxvPS9cXGQqW14tXzovLCgpXFxzXFxkXSsvLHM9e30sYT1mdW5jdGlvbihlKXtyZXR1cm4oZT0rZSkrKGU+Njg/MTkwMDoyZTMpfTt2YXIgZj1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7dGhpc1tlXT0rdH19LGg9Wy9bKy1dXFxkXFxkOj8oXFxkXFxkKT98Wi8sZnVuY3Rpb24oZSl7KHRoaXMuem9uZXx8KHRoaXMuem9uZT17fSkpLm9mZnNldD1mdW5jdGlvbihlKXtpZighZSlyZXR1cm4gMDtpZihcIlpcIj09PWUpcmV0dXJuIDA7dmFyIHQ9ZS5tYXRjaCgvKFsrLV18XFxkXFxkKS9nKSxuPTYwKnRbMV0rKCt0WzJdfHwwKTtyZXR1cm4gMD09PW4/MDpcIitcIj09PXRbMF0/LW46bn0oZSl9XSx1PWZ1bmN0aW9uKGUpe3ZhciB0PXNbZV07cmV0dXJuIHQmJih0LmluZGV4T2Y/dDp0LnMuY29uY2F0KHQuZikpfSxkPWZ1bmN0aW9uKGUsdCl7dmFyIG4scj1zLm1lcmlkaWVtO2lmKHIpe2Zvcih2YXIgaT0xO2k8PTI0O2krPTEpaWYoZS5pbmRleE9mKHIoaSwwLHQpKT4tMSl7bj1pPjEyO2JyZWFrfX1lbHNlIG49ZT09PSh0P1wicG1cIjpcIlBNXCIpO3JldHVybiBufSxjPXtBOltvLGZ1bmN0aW9uKGUpe3RoaXMuYWZ0ZXJub29uPWQoZSwhMSl9XSxhOltvLGZ1bmN0aW9uKGUpe3RoaXMuYWZ0ZXJub29uPWQoZSwhMCl9XSxROltuLGZ1bmN0aW9uKGUpe3RoaXMubW9udGg9MyooZS0xKSsxfV0sUzpbbixmdW5jdGlvbihlKXt0aGlzLm1pbGxpc2Vjb25kcz0xMDAqK2V9XSxTUzpbcixmdW5jdGlvbihlKXt0aGlzLm1pbGxpc2Vjb25kcz0xMCorZX1dLFNTUzpbL1xcZHszfS8sZnVuY3Rpb24oZSl7dGhpcy5taWxsaXNlY29uZHM9K2V9XSxzOltpLGYoXCJzZWNvbmRzXCIpXSxzczpbaSxmKFwic2Vjb25kc1wiKV0sbTpbaSxmKFwibWludXRlc1wiKV0sbW06W2ksZihcIm1pbnV0ZXNcIildLEg6W2ksZihcImhvdXJzXCIpXSxoOltpLGYoXCJob3Vyc1wiKV0sSEg6W2ksZihcImhvdXJzXCIpXSxoaDpbaSxmKFwiaG91cnNcIildLEQ6W2ksZihcImRheVwiKV0sREQ6W3IsZihcImRheVwiKV0sRG86W28sZnVuY3Rpb24oZSl7dmFyIHQ9cy5vcmRpbmFsLG49ZS5tYXRjaCgvXFxkKy8pO2lmKHRoaXMuZGF5PW5bMF0sdClmb3IodmFyIHI9MTtyPD0zMTtyKz0xKXQocikucmVwbGFjZSgvXFxbfFxcXS9nLFwiXCIpPT09ZSYmKHRoaXMuZGF5PXIpfV0sdzpbaSxmKFwid2Vla1wiKV0sd3c6W3IsZihcIndlZWtcIildLE06W2ksZihcIm1vbnRoXCIpXSxNTTpbcixmKFwibW9udGhcIildLE1NTTpbbyxmdW5jdGlvbihlKXt2YXIgdD11KFwibW9udGhzXCIpLG49KHUoXCJtb250aHNTaG9ydFwiKXx8dC5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlLnNsaWNlKDAsMyl9KSkpLmluZGV4T2YoZSkrMTtpZihuPDEpdGhyb3cgbmV3IEVycm9yO3RoaXMubW9udGg9biUxMnx8bn1dLE1NTU06W28sZnVuY3Rpb24oZSl7dmFyIHQ9dShcIm1vbnRoc1wiKS5pbmRleE9mKGUpKzE7aWYodDwxKXRocm93IG5ldyBFcnJvcjt0aGlzLm1vbnRoPXQlMTJ8fHR9XSxZOlsvWystXT9cXGQrLyxmKFwieWVhclwiKV0sWVk6W3IsZnVuY3Rpb24oZSl7dGhpcy55ZWFyPWEoZSl9XSxZWVlZOlsvXFxkezR9LyxmKFwieWVhclwiKV0sWjpoLFpaOmh9O2Z1bmN0aW9uIGwobil7dmFyIHIsaTtyPW4saT1zJiZzLmZvcm1hdHM7Zm9yKHZhciBvPShuPXIucmVwbGFjZSgvKFxcW1teXFxdXStdKXwoTFRTP3xsezEsNH18THsxLDR9KS9nLChmdW5jdGlvbih0LG4scil7dmFyIG89ciYmci50b1VwcGVyQ2FzZSgpO3JldHVybiBufHxpW3JdfHxlW3JdfHxpW29dLnJlcGxhY2UoLyhcXFtbXlxcXV0rXSl8KE1NTU18TU18RER8ZGRkZCkvZywoZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0fHxuLnNsaWNlKDEpfSkpfSkpKS5tYXRjaCh0KSxhPW8ubGVuZ3RoLGY9MDtmPGE7Zis9MSl7dmFyIGg9b1tmXSx1PWNbaF0sZD11JiZ1WzBdLGw9dSYmdVsxXTtvW2ZdPWw/e3JlZ2V4OmQscGFyc2VyOmx9OmgucmVwbGFjZSgvXlxcW3xcXF0kL2csXCJcIil9cmV0dXJuIGZ1bmN0aW9uKGUpe2Zvcih2YXIgdD17fSxuPTAscj0wO248YTtuKz0xKXt2YXIgaT1vW25dO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBpKXIrPWkubGVuZ3RoO2Vsc2V7dmFyIHM9aS5yZWdleCxmPWkucGFyc2VyLGg9ZS5zbGljZShyKSx1PXMuZXhlYyhoKVswXTtmLmNhbGwodCx1KSxlPWUucmVwbGFjZSh1LFwiXCIpfX1yZXR1cm4gZnVuY3Rpb24oZSl7dmFyIHQ9ZS5hZnRlcm5vb247aWYodm9pZCAwIT09dCl7dmFyIG49ZS5ob3Vyczt0P248MTImJihlLmhvdXJzKz0xMik6MTI9PT1uJiYoZS5ob3Vycz0wKSxkZWxldGUgZS5hZnRlcm5vb259fSh0KSx0fX1yZXR1cm4gZnVuY3Rpb24oZSx0LG4pe24ucC5jdXN0b21QYXJzZUZvcm1hdD0hMCxlJiZlLnBhcnNlVHdvRGlnaXRZZWFyJiYoYT1lLnBhcnNlVHdvRGlnaXRZZWFyKTt2YXIgcj10LnByb3RvdHlwZSxpPXIucGFyc2U7ci5wYXJzZT1mdW5jdGlvbihlKXt2YXIgdD1lLmRhdGUscj1lLnV0YyxvPWUuYXJnczt0aGlzLiR1PXI7dmFyIGE9b1sxXTtpZihcInN0cmluZ1wiPT10eXBlb2YgYSl7dmFyIGY9ITA9PT1vWzJdLGg9ITA9PT1vWzNdLHU9Znx8aCxkPW9bMl07aCYmKGQ9b1syXSkscz10aGlzLiRsb2NhbGUoKSwhZiYmZCYmKHM9bi5Mc1tkXSksdGhpcy4kZD1mdW5jdGlvbihlLHQsbixyKXt0cnl7aWYoW1wieFwiLFwiWFwiXS5pbmRleE9mKHQpPi0xKXJldHVybiBuZXcgRGF0ZSgoXCJYXCI9PT10PzFlMzoxKSplKTt2YXIgaT1sKHQpKGUpLG89aS55ZWFyLHM9aS5tb250aCxhPWkuZGF5LGY9aS5ob3VycyxoPWkubWludXRlcyx1PWkuc2Vjb25kcyxkPWkubWlsbGlzZWNvbmRzLGM9aS56b25lLG09aS53ZWVrLE09bmV3IERhdGUsWT1hfHwob3x8cz8xOk0uZ2V0RGF0ZSgpKSxwPW98fE0uZ2V0RnVsbFllYXIoKSx2PTA7byYmIXN8fCh2PXM+MD9zLTE6TS5nZXRNb250aCgpKTt2YXIgRCx3PWZ8fDAsZz1ofHwwLHk9dXx8MCxMPWR8fDA7cmV0dXJuIGM/bmV3IERhdGUoRGF0ZS5VVEMocCx2LFksdyxnLHksTCs2MCpjLm9mZnNldCoxZTMpKTpuP25ldyBEYXRlKERhdGUuVVRDKHAsdixZLHcsZyx5LEwpKTooRD1uZXcgRGF0ZShwLHYsWSx3LGcseSxMKSxtJiYoRD1yKEQpLndlZWsobSkudG9EYXRlKCkpLEQpfWNhdGNoKGUpe3JldHVybiBuZXcgRGF0ZShcIlwiKX19KHQsYSxyLG4pLHRoaXMuaW5pdCgpLGQmJiEwIT09ZCYmKHRoaXMuJEw9dGhpcy5sb2NhbGUoZCkuJEwpLHUmJnQhPXRoaXMuZm9ybWF0KGEpJiYodGhpcy4kZD1uZXcgRGF0ZShcIlwiKSkscz17fX1lbHNlIGlmKGEgaW5zdGFuY2VvZiBBcnJheSlmb3IodmFyIGM9YS5sZW5ndGgsbT0xO208PWM7bSs9MSl7b1sxXT1hW20tMV07dmFyIE09bi5hcHBseSh0aGlzLG8pO2lmKE0uaXNWYWxpZCgpKXt0aGlzLiRkPU0uJGQsdGhpcy4kTD1NLiRMLHRoaXMuaW5pdCgpO2JyZWFrfW09PT1jJiYodGhpcy4kZD1uZXcgRGF0ZShcIlwiKSl9ZWxzZSBpLmNhbGwodGhpcyxlKX19fSkpOyIsICIhZnVuY3Rpb24odCxpKXtcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz1pKCk6XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShpKToodD1cInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsVGhpcz9nbG9iYWxUaGlzOnR8fHNlbGYpLmRheWpzX3BsdWdpbl91dGM9aSgpfSh0aGlzLChmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO3ZhciB0PVwibWludXRlXCIsaT0vWystXVxcZFxcZCg/Ojo/XFxkXFxkKT8vZyxlPS8oWystXXxcXGRcXGQpL2c7cmV0dXJuIGZ1bmN0aW9uKHMsZixuKXt2YXIgdT1mLnByb3RvdHlwZTtuLnV0Yz1mdW5jdGlvbih0KXt2YXIgaT17ZGF0ZTp0LHV0YzohMCxhcmdzOmFyZ3VtZW50c307cmV0dXJuIG5ldyBmKGkpfSx1LnV0Yz1mdW5jdGlvbihpKXt2YXIgZT1uKHRoaXMudG9EYXRlKCkse2xvY2FsZTp0aGlzLiRMLHV0YzohMH0pO3JldHVybiBpP2UuYWRkKHRoaXMudXRjT2Zmc2V0KCksdCk6ZX0sdS5sb2NhbD1mdW5jdGlvbigpe3JldHVybiBuKHRoaXMudG9EYXRlKCkse2xvY2FsZTp0aGlzLiRMLHV0YzohMX0pfTt2YXIgbz11LnBhcnNlO3UucGFyc2U9ZnVuY3Rpb24odCl7dC51dGMmJih0aGlzLiR1PSEwKSx0aGlzLiR1dGlscygpLnUodC4kb2Zmc2V0KXx8KHRoaXMuJG9mZnNldD10LiRvZmZzZXQpLG8uY2FsbCh0aGlzLHQpfTt2YXIgcj11LmluaXQ7dS5pbml0PWZ1bmN0aW9uKCl7aWYodGhpcy4kdSl7dmFyIHQ9dGhpcy4kZDt0aGlzLiR5PXQuZ2V0VVRDRnVsbFllYXIoKSx0aGlzLiRNPXQuZ2V0VVRDTW9udGgoKSx0aGlzLiREPXQuZ2V0VVRDRGF0ZSgpLHRoaXMuJFc9dC5nZXRVVENEYXkoKSx0aGlzLiRIPXQuZ2V0VVRDSG91cnMoKSx0aGlzLiRtPXQuZ2V0VVRDTWludXRlcygpLHRoaXMuJHM9dC5nZXRVVENTZWNvbmRzKCksdGhpcy4kbXM9dC5nZXRVVENNaWxsaXNlY29uZHMoKX1lbHNlIHIuY2FsbCh0aGlzKX07dmFyIGE9dS51dGNPZmZzZXQ7dS51dGNPZmZzZXQ9ZnVuY3Rpb24ocyxmKXt2YXIgbj10aGlzLiR1dGlscygpLnU7aWYobihzKSlyZXR1cm4gdGhpcy4kdT8wOm4odGhpcy4kb2Zmc2V0KT9hLmNhbGwodGhpcyk6dGhpcy4kb2Zmc2V0O2lmKFwic3RyaW5nXCI9PXR5cGVvZiBzJiYocz1mdW5jdGlvbih0KXt2b2lkIDA9PT10JiYodD1cIlwiKTt2YXIgcz10Lm1hdGNoKGkpO2lmKCFzKXJldHVybiBudWxsO3ZhciBmPShcIlwiK3NbMF0pLm1hdGNoKGUpfHxbXCItXCIsMCwwXSxuPWZbMF0sdT02MCorZlsxXSsgK2ZbMl07cmV0dXJuIDA9PT11PzA6XCIrXCI9PT1uP3U6LXV9KHMpLG51bGw9PT1zKSlyZXR1cm4gdGhpczt2YXIgdT1NYXRoLmFicyhzKTw9MTY/NjAqczpzLG89dGhpcztpZihmKXJldHVybiBvLiRvZmZzZXQ9dSxvLiR1PTA9PT1zLG87aWYoMCE9PXMpe3ZhciByPXRoaXMuJHU/dGhpcy50b0RhdGUoKS5nZXRUaW1lem9uZU9mZnNldCgpOi0xKnRoaXMudXRjT2Zmc2V0KCk7KG89dGhpcy5sb2NhbCgpLmFkZCh1K3IsdCkpLiRvZmZzZXQ9dSxvLiR4LiRsb2NhbE9mZnNldD1yfWVsc2Ugbz10aGlzLnV0YygpO3JldHVybiBvfTt2YXIgaD11LmZvcm1hdDt1LmZvcm1hdD1mdW5jdGlvbih0KXt2YXIgaT10fHwodGhpcy4kdT9cIllZWVktTU0tRERUSEg6bW06c3NbWl1cIjpcIlwiKTtyZXR1cm4gaC5jYWxsKHRoaXMsaSl9LHUudmFsdWVPZj1mdW5jdGlvbigpe3ZhciB0PXRoaXMuJHV0aWxzKCkudSh0aGlzLiRvZmZzZXQpPzA6dGhpcy4kb2Zmc2V0Kyh0aGlzLiR4LiRsb2NhbE9mZnNldHx8dGhpcy4kZC5nZXRUaW1lem9uZU9mZnNldCgpKTtyZXR1cm4gdGhpcy4kZC52YWx1ZU9mKCktNmU0KnR9LHUuaXNVVEM9ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuJHV9LHUudG9JU09TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50b0RhdGUoKS50b0lTT1N0cmluZygpfSx1LnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9EYXRlKCkudG9VVENTdHJpbmcoKX07dmFyIGw9dS50b0RhdGU7dS50b0RhdGU9ZnVuY3Rpb24odCl7cmV0dXJuXCJzXCI9PT10JiZ0aGlzLiRvZmZzZXQ/bih0aGlzLmZvcm1hdChcIllZWVktTU0tREQgSEg6bW06c3M6U1NTXCIpKS50b0RhdGUoKTpsLmNhbGwodGhpcyl9O3ZhciBjPXUuZGlmZjt1LmRpZmY9ZnVuY3Rpb24odCxpLGUpe2lmKHQmJnRoaXMuJHU9PT10LiR1KXJldHVybiBjLmNhbGwodGhpcyx0LGksZSk7dmFyIHM9dGhpcy5sb2NhbCgpLGY9bih0KS5sb2NhbCgpO3JldHVybiBjLmNhbGwocyxmLGksZSl9fX0pKTsiLCAiIWZ1bmN0aW9uKHQsZSl7XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9ZSgpOlwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoZSk6KHQ9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbFRoaXM/Z2xvYmFsVGhpczp0fHxzZWxmKS5kYXlqc19wbHVnaW5fdGltZXpvbmU9ZSgpfSh0aGlzLChmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO3ZhciB0PXt5ZWFyOjAsbW9udGg6MSxkYXk6Mixob3VyOjMsbWludXRlOjQsc2Vjb25kOjV9LGU9e307cmV0dXJuIGZ1bmN0aW9uKG4saSxvKXt2YXIgcixhPWZ1bmN0aW9uKHQsbixpKXt2b2lkIDA9PT1pJiYoaT17fSk7dmFyIG89bmV3IERhdGUodCkscj1mdW5jdGlvbih0LG4pe3ZvaWQgMD09PW4mJihuPXt9KTt2YXIgaT1uLnRpbWVab25lTmFtZXx8XCJzaG9ydFwiLG89dCtcInxcIitpLHI9ZVtvXTtyZXR1cm4gcnx8KHI9bmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoXCJlbi1VU1wiLHtob3VyMTI6ITEsdGltZVpvbmU6dCx5ZWFyOlwibnVtZXJpY1wiLG1vbnRoOlwiMi1kaWdpdFwiLGRheTpcIjItZGlnaXRcIixob3VyOlwiMi1kaWdpdFwiLG1pbnV0ZTpcIjItZGlnaXRcIixzZWNvbmQ6XCIyLWRpZ2l0XCIsdGltZVpvbmVOYW1lOml9KSxlW29dPXIpLHJ9KG4saSk7cmV0dXJuIHIuZm9ybWF0VG9QYXJ0cyhvKX0sdT1mdW5jdGlvbihlLG4pe2Zvcih2YXIgaT1hKGUsbikscj1bXSx1PTA7dTxpLmxlbmd0aDt1Kz0xKXt2YXIgZj1pW3VdLHM9Zi50eXBlLG09Zi52YWx1ZSxjPXRbc107Yz49MCYmKHJbY109cGFyc2VJbnQobSwxMCkpfXZhciBkPXJbM10sbD0yND09PWQ/MDpkLGg9clswXStcIi1cIityWzFdK1wiLVwiK3JbMl0rXCIgXCIrbCtcIjpcIityWzRdK1wiOlwiK3JbNV0rXCI6MDAwXCIsdj0rZTtyZXR1cm4oby51dGMoaCkudmFsdWVPZigpLSh2LT12JTFlMykpLzZlNH0sZj1pLnByb3RvdHlwZTtmLnR6PWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09dCYmKHQ9cik7dmFyIG4saT10aGlzLnV0Y09mZnNldCgpLGE9dGhpcy50b0RhdGUoKSx1PWEudG9Mb2NhbGVTdHJpbmcoXCJlbi1VU1wiLHt0aW1lWm9uZTp0fSksZj1NYXRoLnJvdW5kKChhLW5ldyBEYXRlKHUpKS8xZTMvNjApLHM9MTUqLU1hdGgucm91bmQoYS5nZXRUaW1lem9uZU9mZnNldCgpLzE1KS1mO2lmKCFOdW1iZXIocykpbj10aGlzLnV0Y09mZnNldCgwLGUpO2Vsc2UgaWYobj1vKHUse2xvY2FsZTp0aGlzLiRMfSkuJHNldChcIm1pbGxpc2Vjb25kXCIsdGhpcy4kbXMpLnV0Y09mZnNldChzLCEwKSxlKXt2YXIgbT1uLnV0Y09mZnNldCgpO249bi5hZGQoaS1tLFwibWludXRlXCIpfXJldHVybiBuLiR4LiR0aW1lem9uZT10LG59LGYub2Zmc2V0TmFtZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLiR4LiR0aW1lem9uZXx8by50ei5ndWVzcygpLG49YSh0aGlzLnZhbHVlT2YoKSxlLHt0aW1lWm9uZU5hbWU6dH0pLmZpbmQoKGZ1bmN0aW9uKHQpe3JldHVyblwidGltZXpvbmVuYW1lXCI9PT10LnR5cGUudG9Mb3dlckNhc2UoKX0pKTtyZXR1cm4gbiYmbi52YWx1ZX07dmFyIHM9Zi5zdGFydE9mO2Yuc3RhcnRPZj1mdW5jdGlvbih0LGUpe2lmKCF0aGlzLiR4fHwhdGhpcy4keC4kdGltZXpvbmUpcmV0dXJuIHMuY2FsbCh0aGlzLHQsZSk7dmFyIG49byh0aGlzLmZvcm1hdChcIllZWVktTU0tREQgSEg6bW06c3M6U1NTXCIpLHtsb2NhbGU6dGhpcy4kTH0pO3JldHVybiBzLmNhbGwobix0LGUpLnR6KHRoaXMuJHguJHRpbWV6b25lLCEwKX0sby50ej1mdW5jdGlvbih0LGUsbil7dmFyIGk9biYmZSxhPW58fGV8fHIsZj11KCtvKCksYSk7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIHQpcmV0dXJuIG8odCkudHooYSk7dmFyIHM9ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXQtNjAqZSoxZTMsbz11KGksbik7aWYoZT09PW8pcmV0dXJuW2ksZV07dmFyIHI9dShpLT02MCooby1lKSoxZTMsbik7cmV0dXJuIG89PT1yP1tpLG9dOlt0LTYwKk1hdGgubWluKG8scikqMWUzLE1hdGgubWF4KG8scildfShvLnV0Yyh0LGkpLnZhbHVlT2YoKSxmLGEpLG09c1swXSxjPXNbMV0sZD1vKG0pLnV0Y09mZnNldChjKTtyZXR1cm4gZC4keC4kdGltZXpvbmU9YSxkfSxvLnR6Lmd1ZXNzPWZ1bmN0aW9uKCl7cmV0dXJuIEludGwuRGF0ZVRpbWVGb3JtYXQoKS5yZXNvbHZlZE9wdGlvbnMoKS50aW1lWm9uZX0sby50ei5zZXREZWZhdWx0PWZ1bmN0aW9uKHQpe3I9dH19fSkpOyIsICIvKipcbiAqIFJvdXRlIExvb2t1cCBDb21tYW5kIC0gVmlldyBhY3RpdmUgdmVoaWNsZXMgYW5kIGRlbGF5cyBmb3IgYSBzcGVjaWZpYyByb3V0ZVxuICovXG5cbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7XG4gIEFjdGlvblBhbmVsLFxuICBBY3Rpb24sXG4gIEljb24sXG4gIExpc3QsXG4gIHNob3dUb2FzdCxcbiAgVG9hc3QsXG4gIENvbG9yLFxufSBmcm9tIFwiQHJheWNhc3QvYXBpXCI7XG5pbXBvcnQge1xuICBsb2FkU3RhdGljR1RGUyxcbiAgZ2V0U3RvcHNGb3JSb3V0ZSxcbn0gZnJvbSBcIi4vbGliL2d0ZnNTdGF0aWNcIjtcbmltcG9ydCB7XG4gIGZldGNoUmVhbHRpbWVEYXRhLFxuICBnZXRWZWhpY2xlc0ZvclJvdXRlLFxuICBnZXRUcmlwVXBkYXRlc0ZvclJvdXRlLFxuICBoYXNBY3RpdmVBbGVydHMsXG59IGZyb20gXCIuL2xpYi9yZWFsdGltZVwiO1xuaW1wb3J0IHtcbiAgZm9ybWF0RGVsYXksXG4gIGdldERlbGF5Q29sb3IsXG4gIGZvcm1hdFJlbGF0aXZlVGltZSxcbiAgZm9ybWF0T2NjdXBhbmN5LFxuICBnZXRPY2N1cGFuY3lJY29uLFxuICBmb3JtYXREaXN0YW5jZSxcbiAgY2FsY3VsYXRlRGlzdGFuY2UsXG4gIGdldFJvdXRlQ29sb3IsXG59IGZyb20gXCIuL2xpYi91dGlsc1wiO1xuaW1wb3J0IHtcbiAgU3RhdGljR1RGU0RhdGEsXG4gIFJvdXRlVmVoaWNsZUluZm8sXG4gIFJvdXRlLFxuICBWZWhpY2xlRGF0YSxcbiAgVHJpcFVwZGF0ZURhdGEsXG59IGZyb20gXCIuL3R5cGVzXCI7XG5cbmludGVyZmFjZSBWZWhpY2xlV2l0aERldGFpbHMgZXh0ZW5kcyBSb3V0ZVZlaGljbGVJbmZvIHtcbiAgcm91dGU6IFJvdXRlO1xuICBvY2N1cGFuY3lJY29uOiBzdHJpbmc7XG4gIGRlbGF5Q29sb3I6IENvbG9yO1xuICByb3V0ZUNvbG9yOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFJvdXRlTG9va3VwKCkge1xuICBjb25zdCBbaXNMb2FkaW5nLCBzZXRJc0xvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtyb3V0ZXMsIHNldFJvdXRlc10gPSB1c2VTdGF0ZTxSb3V0ZVtdPihbXSk7XG4gIGNvbnN0IFtzZWxlY3RlZFJvdXRlSWQsIHNldFNlbGVjdGVkUm91dGVJZF0gPSB1c2VTdGF0ZTxzdHJpbmc+KFwiXCIpO1xuICBjb25zdCBbdmVoaWNsZXMsIHNldFZlaGljbGVzXSA9IHVzZVN0YXRlPFZlaGljbGVXaXRoRGV0YWlsc1tdPihbXSk7XG4gIGNvbnN0IFtoYXNBbGVydHMsIHNldEhhc0FsZXJ0c10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtsYXN0VXBkYXRlLCBzZXRMYXN0VXBkYXRlXSA9IHVzZVN0YXRlPERhdGU+KG5ldyBEYXRlKCkpO1xuICBjb25zdCBbc2VhcmNoVGV4dCwgc2V0U2VhcmNoVGV4dF0gPSB1c2VTdGF0ZShcIlwiKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGxvYWRSb3V0ZXMoKTtcbiAgfSwgW10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHNlbGVjdGVkUm91dGVJZCkge1xuICAgICAgbG9hZFZlaGljbGVzKCk7XG4gICAgICAvLyBSZWZyZXNoIGV2ZXJ5IDE1IHNlY29uZHNcbiAgICAgIGNvbnN0IGludGVydmFsID0gc2V0SW50ZXJ2YWwobG9hZFZlaGljbGVzLCAxNTAwMCk7XG4gICAgICByZXR1cm4gKCkgPT4gY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XG4gICAgfVxuICB9LCBbc2VsZWN0ZWRSb3V0ZUlkXSk7XG5cbiAgY29uc3QgbG9hZFJvdXRlcyA9IGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZ3Rmc0RhdGEgPSBhd2FpdCBsb2FkU3RhdGljR1RGUygpO1xuICAgICAgY29uc3QgYWxsUm91dGVzID0gQXJyYXkuZnJvbShndGZzRGF0YS5yb3V0ZXMudmFsdWVzKCkpO1xuICAgICAgXG4gICAgICAvLyBTb3J0IHJvdXRlcyBieSBzaG9ydCBuYW1lXG4gICAgICBhbGxSb3V0ZXMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICBjb25zdCBhTnVtID0gcGFyc2VJbnQoYS5yb3V0ZV9zaG9ydF9uYW1lKTtcbiAgICAgICAgY29uc3QgYk51bSA9IHBhcnNlSW50KGIucm91dGVfc2hvcnRfbmFtZSk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIWlzTmFOKGFOdW0pICYmICFpc05hTihiTnVtKSkge1xuICAgICAgICAgIHJldHVybiBhTnVtIC0gYk51bTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGEucm91dGVfc2hvcnRfbmFtZS5sb2NhbGVDb21wYXJlKGIucm91dGVfc2hvcnRfbmFtZSk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgc2V0Um91dGVzKGFsbFJvdXRlcyk7XG4gICAgICBcbiAgICAgIC8vIEF1dG8tc2VsZWN0IGZpcnN0IHJvdXRlIGlmIGF2YWlsYWJsZVxuICAgICAgaWYgKGFsbFJvdXRlcy5sZW5ndGggPiAwICYmICFzZWxlY3RlZFJvdXRlSWQpIHtcbiAgICAgICAgc2V0U2VsZWN0ZWRSb3V0ZUlkKGFsbFJvdXRlc1swXS5yb3V0ZV9pZCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBsb2FkaW5nIHJvdXRlczpcIiwgZXJyb3IpO1xuICAgICAgc2hvd1RvYXN0KHtcbiAgICAgICAgc3R5bGU6IFRvYXN0LlN0eWxlLkZhaWx1cmUsXG4gICAgICAgIHRpdGxlOiBcIkZhaWxlZCB0byBMb2FkIFJvdXRlc1wiLFxuICAgICAgICBtZXNzYWdlOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvclwiLFxuICAgICAgfSk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGxvYWRWZWhpY2xlcyA9IGFzeW5jICgpID0+IHtcbiAgICBpZiAoIXNlbGVjdGVkUm91dGVJZCkgcmV0dXJuO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIExvYWQgc3RhdGljIEdURlMgZGF0YVxuICAgICAgY29uc3QgZ3Rmc0RhdGEgPSBhd2FpdCBsb2FkU3RhdGljR1RGUygpO1xuXG4gICAgICAvLyBHZXQgcm91dGUgaW5mb1xuICAgICAgY29uc3Qgcm91dGVJbmZvID0gZ3Rmc0RhdGEucm91dGVzLmdldChzZWxlY3RlZFJvdXRlSWQpO1xuICAgICAgaWYgKCFyb3V0ZUluZm8pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBGZXRjaCByZWFsdGltZSBkYXRhXG4gICAgICBjb25zdCByZWFsdGltZURhdGEgPSBhd2FpdCBmZXRjaFJlYWx0aW1lRGF0YSgpO1xuXG4gICAgICAvLyBHZXQgdmVoaWNsZXMgZm9yIHRoaXMgcm91dGVcbiAgICAgIGNvbnN0IHJvdXRlVmVoaWNsZXMgPSBnZXRWZWhpY2xlc0ZvclJvdXRlKHNlbGVjdGVkUm91dGVJZCwgcmVhbHRpbWVEYXRhLnZlaGljbGVzKTtcbiAgICAgIGNvbnN0IHRyaXBVcGRhdGVzID0gZ2V0VHJpcFVwZGF0ZXNGb3JSb3V0ZShzZWxlY3RlZFJvdXRlSWQsIHJlYWx0aW1lRGF0YS50cmlwVXBkYXRlcyk7XG5cbiAgICAgIC8vIENoZWNrIGZvciBhbGVydHNcbiAgICAgIGNvbnN0IGFsZXJ0c0V4aXN0ID0gaGFzQWN0aXZlQWxlcnRzKHNlbGVjdGVkUm91dGVJZCwgcmVhbHRpbWVEYXRhLmFsZXJ0cyk7XG4gICAgICBzZXRIYXNBbGVydHMoYWxlcnRzRXhpc3QpO1xuXG4gICAgICAvLyBCdWlsZCB2ZWhpY2xlIGxpc3Qgd2l0aCBkZXRhaWxzXG4gICAgICBjb25zdCB2ZWhpY2xlRGV0YWlsczogVmVoaWNsZVdpdGhEZXRhaWxzW10gPSBbXTtcblxuICAgICAgZm9yIChjb25zdCB2ZWhpY2xlIG9mIHJvdXRlVmVoaWNsZXMpIHtcbiAgICAgICAgLy8gRmluZCBjb3JyZXNwb25kaW5nIHRyaXAgdXBkYXRlIGZvciBkZWxheSBpbmZvXG4gICAgICAgIGNvbnN0IHRyaXBVcGRhdGUgPSB0cmlwVXBkYXRlcy5maW5kKCh0dSkgPT4gdHUudHJpcElkID09PSB2ZWhpY2xlLnRyaXBJZCk7XG4gICAgICAgIFxuICAgICAgICAvLyBHZXQgdHJpcCBhbmQgc3RvcCBpbmZvXG4gICAgICAgIGNvbnN0IHRyaXAgPSB2ZWhpY2xlLnRyaXBJZCA/IGd0ZnNEYXRhLnRyaXBzLmdldCh2ZWhpY2xlLnRyaXBJZCkgOiBudWxsO1xuICAgICAgICBjb25zdCBjdXJyZW50U3RvcCA9IHZlaGljbGUuc3RvcElkID8gZ3Rmc0RhdGEuc3RvcHMuZ2V0KHZlaGljbGUuc3RvcElkKSA6IG51bGw7XG5cbiAgICAgICAgLy8gQ2FsY3VsYXRlIGRlbGF5IGZyb20gdHJpcCB1cGRhdGUgb3IgdmVoaWNsZSBkYXRhXG4gICAgICAgIGxldCBkZWxheTogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICAgICAgICBpZiAodHJpcFVwZGF0ZSAmJiB0cmlwVXBkYXRlLmRlbGF5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBkZWxheSA9IHRyaXBVcGRhdGUuZGVsYXk7XG4gICAgICAgIH0gZWxzZSBpZiAodHJpcFVwZGF0ZSAmJiB0cmlwVXBkYXRlLnN0b3BUaW1lVXBkYXRlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgLy8gR2V0IGF2ZXJhZ2UgZGVsYXkgZnJvbSBzdG9wIHRpbWUgdXBkYXRlc1xuICAgICAgICAgIGNvbnN0IGRlbGF5cyA9IHRyaXBVcGRhdGUuc3RvcFRpbWVVcGRhdGVzXG4gICAgICAgICAgICAubWFwKChzdHUpID0+IHN0dS5hcnJpdmFsPy5kZWxheSB8fCBzdHUuZGVwYXJ0dXJlPy5kZWxheSlcbiAgICAgICAgICAgIC5maWx0ZXIoKGQpOiBkIGlzIG51bWJlciA9PiBkICE9PSB1bmRlZmluZWQpO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChkZWxheXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgZGVsYXkgPSBNYXRoLnJvdW5kKGRlbGF5cy5yZWR1Y2UoKGEsIGIpID0+IGEgKyBiLCAwKSAvIGRlbGF5cy5sZW5ndGgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZlaGljbGVEZXRhaWxzLnB1c2goe1xuICAgICAgICAgIHJvdXRlOiByb3V0ZUluZm8sXG4gICAgICAgICAgdmVoaWNsZUlkOiB2ZWhpY2xlLnZlaGljbGVJZCxcbiAgICAgICAgICB0cmlwSWQ6IHZlaGljbGUudHJpcElkIHx8IFwiXCIsXG4gICAgICAgICAgY3VycmVudFN0b3BJZDogdmVoaWNsZS5zdG9wSWQsXG4gICAgICAgICAgY3VycmVudFN0b3BOYW1lOiBjdXJyZW50U3RvcD8uc3RvcF9uYW1lLFxuICAgICAgICAgIGxhdGl0dWRlOiB2ZWhpY2xlLmxhdGl0dWRlLFxuICAgICAgICAgIGxvbmdpdHVkZTogdmVoaWNsZS5sb25naXR1ZGUsXG4gICAgICAgICAgYmVhcmluZzogdmVoaWNsZS5iZWFyaW5nLFxuICAgICAgICAgIHNwZWVkOiB2ZWhpY2xlLnNwZWVkLFxuICAgICAgICAgIGRlbGF5LFxuICAgICAgICAgIGxhc3RVcGRhdGVkOiB2ZWhpY2xlLnRpbWVzdGFtcCA/IG5ldyBEYXRlKHZlaGljbGUudGltZXN0YW1wICogMTAwMCkgOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIG9jY3VwYW5jeVN0YXR1czogZm9ybWF0T2NjdXBhbmN5KHZlaGljbGUub2NjdXBhbmN5U3RhdHVzKSxcbiAgICAgICAgICBvY2N1cGFuY3lJY29uOiBnZXRPY2N1cGFuY3lJY29uKHZlaGljbGUub2NjdXBhbmN5U3RhdHVzKSxcbiAgICAgICAgICBkZWxheUNvbG9yOiBnZXREZWxheUNvbG9yKGRlbGF5KSxcbiAgICAgICAgICByb3V0ZUNvbG9yOiBnZXRSb3V0ZUNvbG9yKHJvdXRlSW5mby5yb3V0ZV9zaG9ydF9uYW1lKSxcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIFNvcnQgYnkgdmVoaWNsZSBJRFxuICAgICAgdmVoaWNsZURldGFpbHMuc29ydCgoYSwgYikgPT4gYS52ZWhpY2xlSWQubG9jYWxlQ29tcGFyZShiLnZlaGljbGVJZCkpO1xuXG4gICAgICBzZXRWZWhpY2xlcyh2ZWhpY2xlRGV0YWlscyk7XG4gICAgICBzZXRMYXN0VXBkYXRlKG5ldyBEYXRlKCkpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgbG9hZGluZyB2ZWhpY2xlczpcIiwgZXJyb3IpO1xuICAgIH1cbiAgfTtcblxuICAvLyBGaWx0ZXIgcm91dGVzIGJhc2VkIG9uIHNlYXJjaFxuICBjb25zdCBmaWx0ZXJlZFJvdXRlcyA9IHJvdXRlcy5maWx0ZXIoKHJvdXRlKSA9PiB7XG4gICAgY29uc3Qgc2VhcmNoID0gc2VhcmNoVGV4dC50b0xvd2VyQ2FzZSgpO1xuICAgIHJldHVybiAoXG4gICAgICByb3V0ZS5yb3V0ZV9zaG9ydF9uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoKSB8fFxuICAgICAgcm91dGUucm91dGVfbG9uZ19uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoKVxuICAgICk7XG4gIH0pO1xuXG4gIC8vIEdldCBzZWxlY3RlZCByb3V0ZVxuICBjb25zdCBzZWxlY3RlZFJvdXRlID0gcm91dGVzLmZpbmQoKHIpID0+IHIucm91dGVfaWQgPT09IHNlbGVjdGVkUm91dGVJZCk7XG5cbiAgcmV0dXJuIChcbiAgICA8TGlzdFxuICAgICAgaXNMb2FkaW5nPXtpc0xvYWRpbmd9XG4gICAgICBzZWFyY2hUZXh0PXtzZWFyY2hUZXh0fVxuICAgICAgb25TZWFyY2hUZXh0Q2hhbmdlPXtzZXRTZWFyY2hUZXh0fVxuICAgICAgc2VhcmNoQmFyUGxhY2Vob2xkZXI9XCJTZWFyY2ggcm91dGVzLi4uXCJcbiAgICAgIG5hdmlnYXRpb25UaXRsZT17c2VsZWN0ZWRSb3V0ZSA/IGAke3NlbGVjdGVkUm91dGUucm91dGVfc2hvcnRfbmFtZX0gLSAke3NlbGVjdGVkUm91dGUucm91dGVfbG9uZ19uYW1lfWAgOiBcIlJvdXRlIExvb2t1cFwifVxuICAgID5cbiAgICAgIDxMaXN0LkRyb3Bkb3duXG4gICAgICAgIHRvb2x0aXA9XCJTZWxlY3QgYSByb3V0ZVwiXG4gICAgICAgIHZhbHVlPXtzZWxlY3RlZFJvdXRlSWR9XG4gICAgICAgIG9uQ2hhbmdlPXtzZXRTZWxlY3RlZFJvdXRlSWR9XG4gICAgICA+XG4gICAgICAgIHtmaWx0ZXJlZFJvdXRlcy5tYXAoKHJvdXRlKSA9PiAoXG4gICAgICAgICAgPExpc3QuRHJvcGRvd24uSXRlbVxuICAgICAgICAgICAga2V5PXtyb3V0ZS5yb3V0ZV9pZH1cbiAgICAgICAgICAgIHZhbHVlPXtyb3V0ZS5yb3V0ZV9pZH1cbiAgICAgICAgICAgIHRpdGxlPXtgJHtyb3V0ZS5yb3V0ZV9zaG9ydF9uYW1lfSAtICR7cm91dGUucm91dGVfbG9uZ19uYW1lfWB9XG4gICAgICAgICAgICBpY29uPXt7XG4gICAgICAgICAgICAgIHNvdXJjZTogSWNvbi5DaXJjbGUsXG4gICAgICAgICAgICAgIHRpbnRDb2xvcjogcm91dGUucm91dGVfc2hvcnRfbmFtZSA9PT0gXCJXTFwiIHx8IHJvdXRlLnJvdXRlX3Nob3J0X25hbWUgPT09IFwiV0wgR2FtZWRheVwiXG4gICAgICAgICAgICAgICAgPyBDb2xvci5QcmltYXJ5VGV4dFxuICAgICAgICAgICAgICAgIDogeyBsaWdodDogZ2V0Um91dGVDb2xvcihyb3V0ZS5yb3V0ZV9zaG9ydF9uYW1lKSwgZGFyazogZ2V0Um91dGVDb2xvcihyb3V0ZS5yb3V0ZV9zaG9ydF9uYW1lKSB9LFxuICAgICAgICAgICAgfX1cbiAgICAgICAgICAvPlxuICAgICAgICApKX1cbiAgICAgIDwvTGlzdC5Ecm9wZG93bj5cblxuICAgICAge3NlbGVjdGVkUm91dGUgJiYgKFxuICAgICAgICA8PlxuICAgICAgICAgIDxMaXN0LlNlY3Rpb25cbiAgICAgICAgICAgIHRpdGxlPXtgQWN0aXZlIFZlaGljbGVzICgke3ZlaGljbGVzLmxlbmd0aH0pYH1cbiAgICAgICAgICAgIHN1YnRpdGxlPXtoYXNBbGVydHMgPyBcIlx1MjZBMFx1RkUwRiBTZXJ2aWNlIEFsZXJ0cyBBY3RpdmVcIiA6IGBVcGRhdGVkICR7Zm9ybWF0UmVsYXRpdmVUaW1lKGxhc3RVcGRhdGUpfWB9XG4gICAgICAgICAgPlxuICAgICAgICAgICAge3ZlaGljbGVzLmxlbmd0aCA9PT0gMCA/IChcbiAgICAgICAgICAgICAgPExpc3QuSXRlbVxuICAgICAgICAgICAgICAgIHRpdGxlPVwiTm8gQWN0aXZlIFZlaGljbGVzXCJcbiAgICAgICAgICAgICAgICBzdWJ0aXRsZT1cIlJlYWwtdGltZSBkYXRhIHVuYXZhaWxhYmxlIC0gY2hlY2sgQ0FUQSBzY2hlZHVsZSBmb3Igc2VydmljZSB0aW1lc1wiXG4gICAgICAgICAgICAgICAgaWNvbj17eyBzb3VyY2U6IEljb24uQ2xvY2ssIHRpbnRDb2xvcjogQ29sb3IuU2Vjb25kYXJ5VGV4dCB9fVxuICAgICAgICAgICAgICAgIGFjdGlvbnM9e1xuICAgICAgICAgICAgICAgICAgPEFjdGlvblBhbmVsPlxuICAgICAgICAgICAgICAgICAgICA8QWN0aW9uLk9wZW5JbkJyb3dzZXJcbiAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cIlZpZXcgU2NoZWR1bGVcIlxuICAgICAgICAgICAgICAgICAgICAgIHVybD1cImh0dHBzOi8vY2F0YWJ1cy5jb20vU2NoZWR1bGVzXCJcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPEFjdGlvblxuICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiUmVmcmVzaFwiXG4gICAgICAgICAgICAgICAgICAgICAgaWNvbj17SWNvbi5BcnJvd0Nsb2Nrd2lzZX1cbiAgICAgICAgICAgICAgICAgICAgICBvbkFjdGlvbj17bG9hZFZlaGljbGVzfVxuICAgICAgICAgICAgICAgICAgICAgIHNob3J0Y3V0PXt7IG1vZGlmaWVyczogW1wiY21kXCJdLCBrZXk6IFwiclwiIH19XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICA8L0FjdGlvblBhbmVsPlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIHZlaGljbGVzLm1hcCgodmVoaWNsZSkgPT4gKFxuICAgICAgICAgICAgICAgIDxMaXN0Lkl0ZW1cbiAgICAgICAgICAgICAgICAgIGtleT17dmVoaWNsZS52ZWhpY2xlSWR9XG4gICAgICAgICAgICAgICAgICB0aXRsZT17YFZlaGljbGUgJHt2ZWhpY2xlLnZlaGljbGVJZH1gfVxuICAgICAgICAgICAgICAgICAgc3VidGl0bGU9e3ZlaGljbGUuY3VycmVudFN0b3BOYW1lIHx8IFwiSW4gdHJhbnNpdFwifVxuICAgICAgICAgICAgICAgICAgaWNvbj17eyBzb3VyY2U6IEljb24uQ2FyLCB0aW50Q29sb3I6IHZlaGljbGUuZGVsYXlDb2xvciB9fVxuICAgICAgICAgICAgICAgICAgYWNjZXNzb3JpZXM9e1tcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHZlaGljbGUub2NjdXBhbmN5SWNvbiArIFwiIFwiICsgdmVoaWNsZS5vY2N1cGFuY3lTdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgICAgdG9vbHRpcDogXCJPY2N1cGFuY3lcIixcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGZvcm1hdERlbGF5KHZlaGljbGUuZGVsYXkpLFxuICAgICAgICAgICAgICAgICAgICAgIGljb246IHsgc291cmNlOiBJY29uLkNsb2NrLCB0aW50Q29sb3I6IHZlaGljbGUuZGVsYXlDb2xvciB9LFxuICAgICAgICAgICAgICAgICAgICAgIHRvb2x0aXA6IFwiRGVsYXkgU3RhdHVzXCIsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHZlaGljbGUuc3BlZWQgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBgJHtNYXRoLnJvdW5kKHZlaGljbGUuc3BlZWQgKiAyLjIzNyl9IG1waGAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGljb246IEljb24uR2F1Z2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2x0aXA6IFwiQ3VycmVudCBTcGVlZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIDogbnVsbCxcbiAgICAgICAgICAgICAgICAgIF0uZmlsdGVyKEJvb2xlYW4pIGFzIGFueX1cbiAgICAgICAgICAgICAgICAgIGFjdGlvbnM9e1xuICAgICAgICAgICAgICAgICAgICA8QWN0aW9uUGFuZWw+XG4gICAgICAgICAgICAgICAgICAgICAgPEFjdGlvbi5Db3B5VG9DbGlwYm9hcmRcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiQ29weSBWZWhpY2xlIElEXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9e3ZlaGljbGUudmVoaWNsZUlkfVxuICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAge3ZlaGljbGUudHJpcElkICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxBY3Rpb24uQ29weVRvQ2xpcGJvYXJkXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiQ29weSBUcmlwIElEXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudD17dmVoaWNsZS50cmlwSWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAge3ZlaGljbGUubGF0aXR1ZGUgJiYgdmVoaWNsZS5sb25naXR1ZGUgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgPEFjdGlvbi5PcGVuSW5Ccm93c2VyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiVmlldyBvbiBNYXBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw9e2BodHRwczovL3d3dy5nb29nbGUuY29tL21hcHMvc2VhcmNoLz9hcGk9MSZxdWVyeT0ke3ZlaGljbGUubGF0aXR1ZGV9LCR7dmVoaWNsZS5sb25naXR1ZGV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICA8QWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cIlJlZnJlc2hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgaWNvbj17SWNvbi5BcnJvd0Nsb2Nrd2lzZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQWN0aW9uPXtsb2FkVmVoaWNsZXN9XG4gICAgICAgICAgICAgICAgICAgICAgICBzaG9ydGN1dD17eyBtb2RpZmllcnM6IFtcImNtZFwiXSwga2V5OiBcInJcIiB9fVxuICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvQWN0aW9uUGFuZWw+XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgKSlcbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9MaXN0LlNlY3Rpb24+XG5cbiAgICAgICAgICA8TGlzdC5TZWN0aW9uIHRpdGxlPVwiUm91dGUgSW5mb3JtYXRpb25cIj5cbiAgICAgICAgICAgIDxMaXN0Lkl0ZW1cbiAgICAgICAgICAgICAgdGl0bGU9XCJSb3V0ZSBEZXRhaWxzXCJcbiAgICAgICAgICAgICAgc3VidGl0bGU9e2Ake3NlbGVjdGVkUm91dGUucm91dGVfc2hvcnRfbmFtZX0gLSAke3NlbGVjdGVkUm91dGUucm91dGVfbG9uZ19uYW1lfWB9XG4gICAgICAgICAgICAgIGljb249e3sgXG4gICAgICAgICAgICAgICAgc291cmNlOiBJY29uLkluZm8sIFxuICAgICAgICAgICAgICAgIHRpbnRDb2xvcjogc2VsZWN0ZWRSb3V0ZS5yb3V0ZV9zaG9ydF9uYW1lID09PSBcIldMXCIgfHwgc2VsZWN0ZWRSb3V0ZS5yb3V0ZV9zaG9ydF9uYW1lID09PSBcIldMIEdhbWVkYXlcIlxuICAgICAgICAgICAgICAgICAgPyBDb2xvci5QcmltYXJ5VGV4dFxuICAgICAgICAgICAgICAgICAgOiB7IGxpZ2h0OiBnZXRSb3V0ZUNvbG9yKHNlbGVjdGVkUm91dGUucm91dGVfc2hvcnRfbmFtZSksIGRhcms6IGdldFJvdXRlQ29sb3Ioc2VsZWN0ZWRSb3V0ZS5yb3V0ZV9zaG9ydF9uYW1lKSB9XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIGFjY2Vzc29yaWVzPXtbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgdGV4dDogc2VsZWN0ZWRSb3V0ZS5yb3V0ZV90eXBlID09PSAzID8gXCJCdXNcIiA6IFwiVHJhbnNpdFwiLFxuICAgICAgICAgICAgICAgICAgaWNvbjogSWNvbi5UYWcsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgYWN0aW9ucz17XG4gICAgICAgICAgICAgICAgPEFjdGlvblBhbmVsPlxuICAgICAgICAgICAgICAgICAgPEFjdGlvbi5PcGVuSW5Ccm93c2VyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiVmlldyBSb3V0ZSBNYXBcIlxuICAgICAgICAgICAgICAgICAgICB1cmw9e2BodHRwczovL2NhdGFidXMuY29tL1JvdXRlcy8ke3NlbGVjdGVkUm91dGUucm91dGVfc2hvcnRfbmFtZX1gfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIDxBY3Rpb24uT3BlbkluQnJvd3NlclxuICAgICAgICAgICAgICAgICAgICB0aXRsZT1cIlZpZXcgU2NoZWR1bGVcIlxuICAgICAgICAgICAgICAgICAgICB1cmw9XCJodHRwczovL2NhdGFidXMuY29tL1NjaGVkdWxlc1wiXG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvQWN0aW9uUGFuZWw+XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9MaXN0LlNlY3Rpb24+XG4gICAgICAgIDwvPlxuICAgICAgKX1cbiAgICA8L0xpc3Q+XG4gICk7XG59IiwgIi8qKlxuICogR1RGUyBTdGF0aWMgZGF0YSBwYXJzZXIgYW5kIGNhY2hlIG1hbmFnZXJcbiAqL1xuXG5pbXBvcnQgZnMgZnJvbSBcImZzL3Byb21pc2VzXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IG9zIGZyb20gXCJvc1wiO1xuaW1wb3J0IGZldGNoIGZyb20gXCJub2RlLWZldGNoXCI7XG5pbXBvcnQgQWRtWmlwIGZyb20gXCJhZG0temlwXCI7XG5pbXBvcnQgeyBwYXJzZSB9IGZyb20gXCJjc3YtcGFyc2Uvc3luY1wiO1xuaW1wb3J0IHsgZW52aXJvbm1lbnQgfSBmcm9tIFwiQHJheWNhc3QvYXBpXCI7XG5pbXBvcnQge1xuICBTdG9wLFxuICBSb3V0ZSxcbiAgVHJpcCxcbiAgU3RvcFRpbWUsXG4gIENhbGVuZGFyRGF0ZSxcbiAgU3RhdGljR1RGU0RhdGEsXG4gIENhY2hlRW50cnksXG59IGZyb20gXCIuLi90eXBlc1wiO1xuXG4vLyBDYWNoZSBjb25maWd1cmF0aW9uXG5jb25zdCBDQUNIRV9ESVIgPSBwYXRoLmpvaW4oZW52aXJvbm1lbnQuc3VwcG9ydFBhdGgsIFwiZ3Rmcy1jYWNoZVwiKTtcbmNvbnN0IENBQ0hFX1RUTCA9IDEyICogNjAgKiA2MCAqIDEwMDA7IC8vIDEyIGhvdXJzIGluIG1pbGxpc2Vjb25kc1xuY29uc3QgR1RGU19GRUVEX1VSTCA9IFwiaHR0cHM6Ly9jYXRhYnVzLmNvbS93cC1jb250ZW50L3VwbG9hZHMvZ29vZ2xlX3RyYW5zaXQuemlwXCI7XG5cbi8qKlxuICogRW5zdXJlIGNhY2hlIGRpcmVjdG9yeSBleGlzdHNcbiAqL1xuYXN5bmMgZnVuY3Rpb24gZW5zdXJlQ2FjaGVEaXIoKTogUHJvbWlzZTx2b2lkPiB7XG4gIHRyeSB7XG4gICAgYXdhaXQgZnMubWtkaXIoQ0FDSEVfRElSLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGNyZWF0ZSBjYWNoZSBkaXJlY3Rvcnk6XCIsIGVycm9yKTtcbiAgfVxufVxuXG4vKipcbiAqIEdldCBjYWNoZWQgZGF0YSBpZiB2YWxpZFxuICogQHJldHVybnMgQ2FjaGVkIEdURlMgZGF0YSBvciBudWxsIGlmIGNhY2hlIGlzIGludmFsaWRcbiAqL1xuYXN5bmMgZnVuY3Rpb24gZ2V0Q2FjaGVkRGF0YSgpOiBQcm9taXNlPFN0YXRpY0dURlNEYXRhIHwgbnVsbD4ge1xuICB0cnkge1xuICAgIGNvbnN0IGNhY2hlRmlsZSA9IHBhdGguam9pbihDQUNIRV9ESVIsIFwic3RhdGljLWd0ZnMuanNvblwiKTtcbiAgICBjb25zdCBjYWNoZUV4aXN0cyA9IGF3YWl0IGZzLmFjY2VzcyhjYWNoZUZpbGUpLnRoZW4oKCkgPT4gdHJ1ZSkuY2F0Y2goKCkgPT4gZmFsc2UpO1xuICAgIFxuICAgIGlmICghY2FjaGVFeGlzdHMpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBjYWNoZUNvbnRlbnQgPSBhd2FpdCBmcy5yZWFkRmlsZShjYWNoZUZpbGUsIFwidXRmLThcIik7XG4gICAgY29uc3QgY2FjaGU6IENhY2hlRW50cnk8U3RhdGljR1RGU0RhdGE+ID0gSlNPTi5wYXJzZShjYWNoZUNvbnRlbnQpO1xuICAgIFxuICAgIC8vIENoZWNrIGlmIGNhY2hlIGlzIHN0aWxsIHZhbGlkXG4gICAgaWYgKERhdGUubm93KCkgLSBjYWNoZS50aW1lc3RhbXAgPiBjYWNoZS50dGwpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiR1RGUyBjYWNoZSBleHBpcmVkXCIpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIFxuICAgIC8vIFJlY29uc3RydWN0IE1hcHMgZnJvbSBjYWNoZWQgZGF0YVxuICAgIGNvbnN0IGRhdGEgPSBjYWNoZS5kYXRhO1xuICAgIHJldHVybiB7XG4gICAgICBzdG9wczogbmV3IE1hcChPYmplY3QuZW50cmllcyhkYXRhLnN0b3BzIGFzIGFueSkpLFxuICAgICAgcm91dGVzOiBuZXcgTWFwKE9iamVjdC5lbnRyaWVzKGRhdGEucm91dGVzIGFzIGFueSkpLFxuICAgICAgdHJpcHM6IG5ldyBNYXAoT2JqZWN0LmVudHJpZXMoZGF0YS50cmlwcyBhcyBhbnkpKSxcbiAgICAgIHN0b3BUaW1lczogZGF0YS5zdG9wVGltZXMsXG4gICAgICBjYWxlbmRhckRhdGVzOiBkYXRhLmNhbGVuZGFyRGF0ZXMsXG4gICAgICBsYXN0VXBkYXRlZDogbmV3IERhdGUoZGF0YS5sYXN0VXBkYXRlZCksXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIHJlYWQgY2FjaGU6XCIsIGVycm9yKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vKipcbiAqIFNhdmUgZGF0YSB0byBjYWNoZVxuICogQHBhcmFtIGRhdGEgLSBHVEZTIGRhdGEgdG8gY2FjaGVcbiAqL1xuYXN5bmMgZnVuY3Rpb24gc2F2ZVRvQ2FjaGUoZGF0YTogU3RhdGljR1RGU0RhdGEpOiBQcm9taXNlPHZvaWQ+IHtcbiAgdHJ5IHtcbiAgICBhd2FpdCBlbnN1cmVDYWNoZURpcigpO1xuICAgIFxuICAgIC8vIENvbnZlcnQgTWFwcyB0byBvYmplY3RzIGZvciBKU09OIHNlcmlhbGl6YXRpb25cbiAgICBjb25zdCBzZXJpYWxpemFibGUgPSB7XG4gICAgICBzdG9wczogT2JqZWN0LmZyb21FbnRyaWVzKGRhdGEuc3RvcHMpLFxuICAgICAgcm91dGVzOiBPYmplY3QuZnJvbUVudHJpZXMoZGF0YS5yb3V0ZXMpLFxuICAgICAgdHJpcHM6IE9iamVjdC5mcm9tRW50cmllcyhkYXRhLnRyaXBzKSxcbiAgICAgIHN0b3BUaW1lczogZGF0YS5zdG9wVGltZXMsXG4gICAgICBjYWxlbmRhckRhdGVzOiBkYXRhLmNhbGVuZGFyRGF0ZXMsXG4gICAgICBsYXN0VXBkYXRlZDogZGF0YS5sYXN0VXBkYXRlZCxcbiAgICB9O1xuICAgIFxuICAgIGNvbnN0IGNhY2hlOiBDYWNoZUVudHJ5PGFueT4gPSB7XG4gICAgICBkYXRhOiBzZXJpYWxpemFibGUsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICB0dGw6IENBQ0hFX1RUTCxcbiAgICB9O1xuICAgIFxuICAgIGNvbnN0IGNhY2hlRmlsZSA9IHBhdGguam9pbihDQUNIRV9ESVIsIFwic3RhdGljLWd0ZnMuanNvblwiKTtcbiAgICBhd2FpdCBmcy53cml0ZUZpbGUoY2FjaGVGaWxlLCBKU09OLnN0cmluZ2lmeShjYWNoZSkpO1xuICAgIGNvbnNvbGUubG9nKFwiR1RGUyBkYXRhIGNhY2hlZCBzdWNjZXNzZnVsbHlcIik7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBzYXZlIGNhY2hlOlwiLCBlcnJvcik7XG4gIH1cbn1cblxuLyoqXG4gKiBEb3dubG9hZCBhbmQgZXh0cmFjdCBHVEZTIFpJUCBmaWxlXG4gKiBAcmV0dXJucyBQYXRoIHRvIGV4dHJhY3RlZCBkaXJlY3RvcnlcbiAqL1xuYXN5bmMgZnVuY3Rpb24gZG93bmxvYWRBbmRFeHRyYWN0R1RGUygpOiBQcm9taXNlPHN0cmluZz4ge1xuICBjb25zdCB0ZW1wRGlyID0gcGF0aC5qb2luKG9zLnRtcGRpcigpLCBgZ3Rmcy0ke0RhdGUubm93KCl9YCk7XG4gIGF3YWl0IGZzLm1rZGlyKHRlbXBEaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pO1xuICBcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZyhcIkRvd25sb2FkaW5nIEdURlMgZmVlZCBmcm9tOlwiLCBHVEZTX0ZFRURfVVJMKTtcbiAgICBcbiAgICAvLyBEb3dubG9hZCB0aGUgWklQIGZpbGVcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKEdURlNfRkVFRF9VUkwsIHtcbiAgICAgIHNpZ25hbDogQWJvcnRTaWduYWwudGltZW91dCgzMDAwMCksIC8vIDMwIHNlY29uZCB0aW1lb3V0XG4gICAgfSk7XG4gICAgXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZG93bmxvYWQgR1RGUyBmZWVkOiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgfVxuICAgIFxuICAgIC8vIEdldCB0aGUgWklQIGRhdGEgYXMgYnVmZmVyXG4gICAgY29uc3QgYnVmZmVyID0gYXdhaXQgcmVzcG9uc2UuYXJyYXlCdWZmZXIoKTtcbiAgICBjb25zdCB6aXBCdWZmZXIgPSBCdWZmZXIuZnJvbShidWZmZXIpO1xuICAgIFxuICAgIC8vIEV4dHJhY3QgdGhlIFpJUCBmaWxlIHVzaW5nIGFkbS16aXBcbiAgICBjb25zdCB6aXAgPSBuZXcgQWRtWmlwKHppcEJ1ZmZlcik7XG4gICAgemlwLmV4dHJhY3RBbGxUbyh0ZW1wRGlyLCB0cnVlKTtcbiAgICBcbiAgICBjb25zb2xlLmxvZyhcIkdURlMgZmVlZCBleHRyYWN0ZWQgdG86XCIsIHRlbXBEaXIpO1xuICAgIHJldHVybiB0ZW1wRGlyO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIC8vIENsZWFuIHVwIHRlbXAgZGlyZWN0b3J5IG9uIGVycm9yXG4gICAgYXdhaXQgZnMucm0odGVtcERpciwgeyByZWN1cnNpdmU6IHRydWUsIGZvcmNlOiB0cnVlIH0pLmNhdGNoKCgpID0+IHt9KTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG4vKipcbiAqIFBhcnNlIGEgR1RGUyBDU1YgZmlsZVxuICogQHBhcmFtIGZpbGVQYXRoIC0gUGF0aCB0byB0aGUgQ1NWIGZpbGVcbiAqIEBwYXJhbSByZXF1aXJlZCAtIFdoZXRoZXIgdGhlIGZpbGUgaXMgcmVxdWlyZWRcbiAqIEByZXR1cm5zIFBhcnNlZCByZWNvcmRzIG9yIGVtcHR5IGFycmF5XG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHBhcnNlQ1NWRmlsZTxUPihmaWxlUGF0aDogc3RyaW5nLCByZXF1aXJlZDogYm9vbGVhbiA9IGZhbHNlKTogUHJvbWlzZTxUW10+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgZnMucmVhZEZpbGUoZmlsZVBhdGgsIFwidXRmLThcIik7XG4gICAgcmV0dXJuIHBhcnNlKGNvbnRlbnQsIHtcbiAgICAgIGNvbHVtbnM6IHRydWUsXG4gICAgICBza2lwX2VtcHR5X2xpbmVzOiB0cnVlLFxuICAgICAgdHJpbTogdHJ1ZSxcbiAgICAgIGNhc3Q6ICh2YWx1ZSwgY29udGV4dCkgPT4ge1xuICAgICAgICAvLyBBdXRvLWNhc3QgbnVtYmVyc1xuICAgICAgICBpZiAoY29udGV4dC5oZWFkZXIpIHJldHVybiB2YWx1ZTtcbiAgICAgICAgaWYgKHZhbHVlID09PSBcIlwiKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBudW0gPSBOdW1iZXIodmFsdWUpO1xuICAgICAgICBpZiAoIWlzTmFOKG51bSkgJiYgdmFsdWUubWF0Y2goL14tP1xcZCsoXFwuXFxkKyk/JC8pKSB7XG4gICAgICAgICAgcmV0dXJuIG51bTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9LFxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgaWYgKHJlcXVpcmVkIHx8IGVycm9yLmNvZGUgIT09IFwiRU5PRU5UXCIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBwYXJzZSAke2ZpbGVQYXRofTpgLCBlcnJvcik7XG4gICAgfVxuICAgIHJldHVybiBbXTtcbiAgfVxufVxuXG4vKipcbiAqIExvYWQgYW5kIHBhcnNlIEdURlMgc3RhdGljIGRhdGFcbiAqIEBwYXJhbSBmb3JjZVJlZnJlc2ggLSBGb3JjZSByZWZyZXNoIGV2ZW4gaWYgY2FjaGUgaXMgdmFsaWRcbiAqIEByZXR1cm5zIFBhcnNlZCBHVEZTIGRhdGFcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvYWRTdGF0aWNHVEZTKGZvcmNlUmVmcmVzaDogYm9vbGVhbiA9IGZhbHNlKTogUHJvbWlzZTxTdGF0aWNHVEZTRGF0YT4ge1xuICAvLyBDaGVjayBjYWNoZSBmaXJzdFxuICBpZiAoIWZvcmNlUmVmcmVzaCkge1xuICAgIGNvbnN0IGNhY2hlZCA9IGF3YWl0IGdldENhY2hlZERhdGEoKTtcbiAgICBpZiAoY2FjaGVkKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIlVzaW5nIGNhY2hlZCBHVEZTIGRhdGFcIik7XG4gICAgICByZXR1cm4gY2FjaGVkO1xuICAgIH1cbiAgfVxuICBcbiAgY29uc29sZS5sb2coXCJMb2FkaW5nIGZyZXNoIEdURlMgZGF0YVwiKTtcbiAgbGV0IGV4dHJhY3REaXI6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBcbiAgdHJ5IHtcbiAgICAvLyBEb3dubG9hZCBhbmQgZXh0cmFjdCBHVEZTIGZlZWRcbiAgICBleHRyYWN0RGlyID0gYXdhaXQgZG93bmxvYWRBbmRFeHRyYWN0R1RGUygpO1xuICAgIFxuICAgIC8vIFBhcnNlIHJlcXVpcmVkIGZpbGVzXG4gICAgY29uc3QgW3N0b3BzLCByb3V0ZXMsIHRyaXBzLCBzdG9wVGltZXMsIGNhbGVuZGFyRGF0ZXNdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgcGFyc2VDU1ZGaWxlPFN0b3A+KHBhdGguam9pbihleHRyYWN0RGlyLCBcInN0b3BzLnR4dFwiKSwgdHJ1ZSksXG4gICAgICBwYXJzZUNTVkZpbGU8Um91dGU+KHBhdGguam9pbihleHRyYWN0RGlyLCBcInJvdXRlcy50eHRcIiksIHRydWUpLFxuICAgICAgcGFyc2VDU1ZGaWxlPFRyaXA+KHBhdGguam9pbihleHRyYWN0RGlyLCBcInRyaXBzLnR4dFwiKSwgdHJ1ZSksXG4gICAgICBwYXJzZUNTVkZpbGU8U3RvcFRpbWU+KHBhdGguam9pbihleHRyYWN0RGlyLCBcInN0b3BfdGltZXMudHh0XCIpLCB0cnVlKSxcbiAgICAgIHBhcnNlQ1NWRmlsZTxDYWxlbmRhckRhdGU+KHBhdGguam9pbihleHRyYWN0RGlyLCBcImNhbGVuZGFyX2RhdGVzLnR4dFwiKSwgZmFsc2UpLFxuICAgIF0pO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKGBMb2FkZWQ6ICR7c3RvcHMubGVuZ3RofSBzdG9wcywgJHtyb3V0ZXMubGVuZ3RofSByb3V0ZXMsICR7dHJpcHMubGVuZ3RofSB0cmlwc2ApO1xuICAgIFxuICAgIC8vIENyZWF0ZSBsb29rdXAgbWFwc1xuICAgIGNvbnN0IHN0b3BzTWFwID0gbmV3IE1hcDxzdHJpbmcsIFN0b3A+KCk7XG4gICAgc3RvcHMuZm9yRWFjaCgoc3RvcCkgPT4ge1xuICAgICAgc3RvcHNNYXAuc2V0KHN0b3Auc3RvcF9pZCwgc3RvcCk7XG4gICAgfSk7XG4gICAgXG4gICAgY29uc3Qgcm91dGVzTWFwID0gbmV3IE1hcDxzdHJpbmcsIFJvdXRlPigpO1xuICAgIHJvdXRlcy5mb3JFYWNoKChyb3V0ZSkgPT4ge1xuICAgICAgcm91dGVzTWFwLnNldChyb3V0ZS5yb3V0ZV9pZCwgcm91dGUpO1xuICAgIH0pO1xuICAgIFxuICAgIGNvbnN0IHRyaXBzTWFwID0gbmV3IE1hcDxzdHJpbmcsIFRyaXA+KCk7XG4gICAgdHJpcHMuZm9yRWFjaCgodHJpcCkgPT4ge1xuICAgICAgdHJpcHNNYXAuc2V0KHRyaXAudHJpcF9pZCwgdHJpcCk7XG4gICAgfSk7XG4gICAgXG4gICAgY29uc3QgZGF0YTogU3RhdGljR1RGU0RhdGEgPSB7XG4gICAgICBzdG9wczogc3RvcHNNYXAsXG4gICAgICByb3V0ZXM6IHJvdXRlc01hcCxcbiAgICAgIHRyaXBzOiB0cmlwc01hcCxcbiAgICAgIHN0b3BUaW1lcyxcbiAgICAgIGNhbGVuZGFyRGF0ZXMsXG4gICAgICBsYXN0VXBkYXRlZDogbmV3IERhdGUoKSxcbiAgICB9O1xuICAgIFxuICAgIC8vIFNhdmUgdG8gY2FjaGVcbiAgICBhd2FpdCBzYXZlVG9DYWNoZShkYXRhKTtcbiAgICBcbiAgICByZXR1cm4gZGF0YTtcbiAgfSBmaW5hbGx5IHtcbiAgICAvLyBDbGVhbiB1cCB0ZW1wIGRpcmVjdG9yeVxuICAgIGlmIChleHRyYWN0RGlyKSB7XG4gICAgICBhd2FpdCBmcy5ybShleHRyYWN0RGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSwgZm9yY2U6IHRydWUgfSkuY2F0Y2goKCkgPT4ge30pO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEdldCBzdG9wcyBmb3IgYSBzcGVjaWZpYyByb3V0ZVxuICogQHBhcmFtIHJvdXRlSWQgLSBSb3V0ZSBJRFxuICogQHBhcmFtIHN0YXRpY0RhdGEgLSBTdGF0aWMgR1RGUyBkYXRhXG4gKiBAcmV0dXJucyBBcnJheSBvZiBzdG9wc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3RvcHNGb3JSb3V0ZShyb3V0ZUlkOiBzdHJpbmcsIHN0YXRpY0RhdGE6IFN0YXRpY0dURlNEYXRhKTogU3RvcFtdIHtcbiAgY29uc3Qgc3RvcHMgPSBuZXcgU2V0PFN0b3A+KCk7XG4gIFxuICAvLyBGaW5kIGFsbCB0cmlwcyBmb3IgdGhpcyByb3V0ZVxuICBjb25zdCByb3V0ZVRyaXBzID0gQXJyYXkuZnJvbShzdGF0aWNEYXRhLnRyaXBzLnZhbHVlcygpKS5maWx0ZXIoXG4gICAgKHRyaXApID0+IHRyaXAucm91dGVfaWQgPT09IHJvdXRlSWRcbiAgKTtcbiAgXG4gIC8vIEZpbmQgYWxsIHN0b3AgdGltZXMgZm9yIHRoZXNlIHRyaXBzXG4gIGNvbnN0IHRyaXBJZHMgPSBuZXcgU2V0KHJvdXRlVHJpcHMubWFwKCh0KSA9PiB0LnRyaXBfaWQpKTtcbiAgY29uc3Qgc3RvcElkcyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICBcbiAgc3RhdGljRGF0YS5zdG9wVGltZXMuZm9yRWFjaCgoc3QpID0+IHtcbiAgICBpZiAodHJpcElkcy5oYXMoc3QudHJpcF9pZCkpIHtcbiAgICAgIHN0b3BJZHMuYWRkKHN0LnN0b3BfaWQpO1xuICAgIH1cbiAgfSk7XG4gIFxuICAvLyBHZXQgc3RvcCBkZXRhaWxzXG4gIHN0b3BJZHMuZm9yRWFjaCgoc3RvcElkKSA9PiB7XG4gICAgY29uc3Qgc3RvcCA9IHN0YXRpY0RhdGEuc3RvcHMuZ2V0KHN0b3BJZCk7XG4gICAgaWYgKHN0b3ApIHtcbiAgICAgIHN0b3BzLmFkZChzdG9wKTtcbiAgICB9XG4gIH0pO1xuICBcbiAgcmV0dXJuIEFycmF5LmZyb20oc3RvcHMpO1xufVxuXG4vKipcbiAqIEdldCByb3V0ZXMgZm9yIGEgc3BlY2lmaWMgc3RvcFxuICogQHBhcmFtIHN0b3BJZCAtIFN0b3AgSURcbiAqIEBwYXJhbSBzdGF0aWNEYXRhIC0gU3RhdGljIEdURlMgZGF0YVxuICogQHJldHVybnMgQXJyYXkgb2Ygcm91dGVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRSb3V0ZXNGb3JTdG9wKHN0b3BJZDogc3RyaW5nLCBzdGF0aWNEYXRhOiBTdGF0aWNHVEZTRGF0YSk6IFJvdXRlW10ge1xuICBjb25zdCByb3V0ZXMgPSBuZXcgU2V0PFJvdXRlPigpO1xuICBcbiAgLy8gRmluZCBhbGwgc3RvcCB0aW1lcyBmb3IgdGhpcyBzdG9wXG4gIGNvbnN0IHRyaXBJZHMgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgc3RhdGljRGF0YS5zdG9wVGltZXMuZm9yRWFjaCgoc3QpID0+IHtcbiAgICBpZiAoc3Quc3RvcF9pZCA9PT0gc3RvcElkKSB7XG4gICAgICB0cmlwSWRzLmFkZChzdC50cmlwX2lkKTtcbiAgICB9XG4gIH0pO1xuICBcbiAgLy8gRmluZCByb3V0ZXMgZm9yIHRoZXNlIHRyaXBzXG4gIHRyaXBJZHMuZm9yRWFjaCgodHJpcElkKSA9PiB7XG4gICAgY29uc3QgdHJpcCA9IHN0YXRpY0RhdGEudHJpcHMuZ2V0KHRyaXBJZCk7XG4gICAgaWYgKHRyaXApIHtcbiAgICAgIGNvbnN0IHJvdXRlID0gc3RhdGljRGF0YS5yb3V0ZXMuZ2V0KHRyaXAucm91dGVfaWQpO1xuICAgICAgaWYgKHJvdXRlKSB7XG4gICAgICAgIHJvdXRlcy5hZGQocm91dGUpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG4gIFxuICByZXR1cm4gQXJyYXkuZnJvbShyb3V0ZXMpO1xufVxuXG4vKipcbiAqIEdldCBzY2hlZHVsZWQgZGVwYXJ0dXJlcyBmb3IgYSBzdG9wXG4gKiBAcGFyYW0gc3RvcElkIC0gU3RvcCBJRFxuICogQHBhcmFtIHN0YXRpY0RhdGEgLSBTdGF0aWMgR1RGUyBkYXRhXG4gKiBAcGFyYW0gbGltaXQgLSBNYXhpbXVtIG51bWJlciBvZiBkZXBhcnR1cmVzIHRvIHJldHVyblxuICogQHJldHVybnMgQXJyYXkgb2Ygc2NoZWR1bGVkIGRlcGFydHVyZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFNjaGVkdWxlZERlcGFydHVyZXMoXG4gIHN0b3BJZDogc3RyaW5nLFxuICBzdGF0aWNEYXRhOiBTdGF0aWNHVEZTRGF0YSxcbiAgbGltaXQ6IG51bWJlciA9IDEwXG4pOiBBcnJheTx7XG4gIHRyaXBJZDogc3RyaW5nO1xuICByb3V0ZUlkOiBzdHJpbmc7XG4gIGRlcGFydHVyZVRpbWU6IHN0cmluZztcbiAgaGVhZHNpZ24/OiBzdHJpbmc7XG59PiB7XG4gIGNvbnN0IGRlcGFydHVyZXM6IEFycmF5PHtcbiAgICB0cmlwSWQ6IHN0cmluZztcbiAgICByb3V0ZUlkOiBzdHJpbmc7XG4gICAgZGVwYXJ0dXJlVGltZTogc3RyaW5nO1xuICAgIGhlYWRzaWduPzogc3RyaW5nO1xuICB9PiA9IFtdO1xuICBcbiAgLy8gRmluZCBzdG9wIHRpbWVzIGZvciB0aGlzIHN0b3BcbiAgY29uc3QgcmVsZXZhbnRTdG9wVGltZXMgPSBzdGF0aWNEYXRhLnN0b3BUaW1lcy5maWx0ZXIoKHN0KSA9PiBzdC5zdG9wX2lkID09PSBzdG9wSWQpO1xuICBcbiAgLy8gU29ydCBieSBkZXBhcnR1cmUgdGltZVxuICByZWxldmFudFN0b3BUaW1lcy5zb3J0KChhLCBiKSA9PiB7XG4gICAgcmV0dXJuIGEuZGVwYXJ0dXJlX3RpbWUubG9jYWxlQ29tcGFyZShiLmRlcGFydHVyZV90aW1lKTtcbiAgfSk7XG4gIFxuICAvLyBHZXQgdHJpcCBhbmQgcm91dGUgaW5mb1xuICBmb3IgKGNvbnN0IHN0b3BUaW1lIG9mIHJlbGV2YW50U3RvcFRpbWVzLnNsaWNlKDAsIGxpbWl0KSkge1xuICAgIGNvbnN0IHRyaXAgPSBzdGF0aWNEYXRhLnRyaXBzLmdldChzdG9wVGltZS50cmlwX2lkKTtcbiAgICBpZiAodHJpcCkge1xuICAgICAgZGVwYXJ0dXJlcy5wdXNoKHtcbiAgICAgICAgdHJpcElkOiBzdG9wVGltZS50cmlwX2lkLFxuICAgICAgICByb3V0ZUlkOiB0cmlwLnJvdXRlX2lkLFxuICAgICAgICBkZXBhcnR1cmVUaW1lOiBzdG9wVGltZS5kZXBhcnR1cmVfdGltZSxcbiAgICAgICAgaGVhZHNpZ246IHRyaXAudHJpcF9oZWFkc2lnbiB8fCBzdG9wVGltZS5zdG9wX2hlYWRzaWduLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIFxuICByZXR1cm4gZGVwYXJ0dXJlcztcbn1cblxuLyoqXG4gKiBDbGVhciB0aGUgR1RGUyBjYWNoZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2xlYXJDYWNoZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgdHJ5IHtcbiAgICBhd2FpdCBmcy5ybShDQUNIRV9ESVIsIHsgcmVjdXJzaXZlOiB0cnVlLCBmb3JjZTogdHJ1ZSB9KTtcbiAgICBjb25zb2xlLmxvZyhcIkdURlMgY2FjaGUgY2xlYXJlZFwiKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGNsZWFyIGNhY2hlOlwiLCBlcnJvcik7XG4gIH1cbn0iLCAiLyoqXG4gKiBJbmRleC5qc1xuICpcbiAqIGEgcmVxdWVzdCBBUEkgY29tcGF0aWJsZSB3aXRoIHdpbmRvdy5mZXRjaFxuICpcbiAqIEFsbCBzcGVjIGFsZ29yaXRobSBzdGVwIG51bWJlcnMgYXJlIGJhc2VkIG9uIGh0dHBzOi8vZmV0Y2guc3BlYy53aGF0d2cub3JnL2NvbW1pdC1zbmFwc2hvdHMvYWU3MTY4MjJjYjNhNjE4NDMyMjZjZDA5MGVlZmM2NTg5NDQ2YzFkMi8uXG4gKi9cblxuaW1wb3J0IGh0dHAgZnJvbSAnbm9kZTpodHRwJztcbmltcG9ydCBodHRwcyBmcm9tICdub2RlOmh0dHBzJztcbmltcG9ydCB6bGliIGZyb20gJ25vZGU6emxpYic7XG5pbXBvcnQgU3RyZWFtLCB7UGFzc1Rocm91Z2gsIHBpcGVsaW5lIGFzIHB1bXB9IGZyb20gJ25vZGU6c3RyZWFtJztcbmltcG9ydCB7QnVmZmVyfSBmcm9tICdub2RlOmJ1ZmZlcic7XG5cbmltcG9ydCBkYXRhVXJpVG9CdWZmZXIgZnJvbSAnZGF0YS11cmktdG8tYnVmZmVyJztcblxuaW1wb3J0IHt3cml0ZVRvU3RyZWFtLCBjbG9uZX0gZnJvbSAnLi9ib2R5LmpzJztcbmltcG9ydCBSZXNwb25zZSBmcm9tICcuL3Jlc3BvbnNlLmpzJztcbmltcG9ydCBIZWFkZXJzLCB7ZnJvbVJhd0hlYWRlcnN9IGZyb20gJy4vaGVhZGVycy5qcyc7XG5pbXBvcnQgUmVxdWVzdCwge2dldE5vZGVSZXF1ZXN0T3B0aW9uc30gZnJvbSAnLi9yZXF1ZXN0LmpzJztcbmltcG9ydCB7RmV0Y2hFcnJvcn0gZnJvbSAnLi9lcnJvcnMvZmV0Y2gtZXJyb3IuanMnO1xuaW1wb3J0IHtBYm9ydEVycm9yfSBmcm9tICcuL2Vycm9ycy9hYm9ydC1lcnJvci5qcyc7XG5pbXBvcnQge2lzUmVkaXJlY3R9IGZyb20gJy4vdXRpbHMvaXMtcmVkaXJlY3QuanMnO1xuaW1wb3J0IHtGb3JtRGF0YX0gZnJvbSAnZm9ybWRhdGEtcG9seWZpbGwvZXNtLm1pbi5qcyc7XG5pbXBvcnQge2lzRG9tYWluT3JTdWJkb21haW4sIGlzU2FtZVByb3RvY29sfSBmcm9tICcuL3V0aWxzL2lzLmpzJztcbmltcG9ydCB7cGFyc2VSZWZlcnJlclBvbGljeUZyb21IZWFkZXJ9IGZyb20gJy4vdXRpbHMvcmVmZXJyZXIuanMnO1xuaW1wb3J0IHtcblx0QmxvYixcblx0RmlsZSxcblx0ZmlsZUZyb21TeW5jLFxuXHRmaWxlRnJvbSxcblx0YmxvYkZyb21TeW5jLFxuXHRibG9iRnJvbVxufSBmcm9tICdmZXRjaC1ibG9iL2Zyb20uanMnO1xuXG5leHBvcnQge0Zvcm1EYXRhLCBIZWFkZXJzLCBSZXF1ZXN0LCBSZXNwb25zZSwgRmV0Y2hFcnJvciwgQWJvcnRFcnJvciwgaXNSZWRpcmVjdH07XG5leHBvcnQge0Jsb2IsIEZpbGUsIGZpbGVGcm9tU3luYywgZmlsZUZyb20sIGJsb2JGcm9tU3luYywgYmxvYkZyb219O1xuXG5jb25zdCBzdXBwb3J0ZWRTY2hlbWFzID0gbmV3IFNldChbJ2RhdGE6JywgJ2h0dHA6JywgJ2h0dHBzOiddKTtcblxuLyoqXG4gKiBGZXRjaCBmdW5jdGlvblxuICpcbiAqIEBwYXJhbSAgIHtzdHJpbmcgfCBVUkwgfCBpbXBvcnQoJy4vcmVxdWVzdCcpLmRlZmF1bHR9IHVybCAtIEFic29sdXRlIHVybCBvciBSZXF1ZXN0IGluc3RhbmNlXG4gKiBAcGFyYW0gICB7Kn0gW29wdGlvbnNfXSAtIEZldGNoIG9wdGlvbnNcbiAqIEByZXR1cm4gIHtQcm9taXNlPGltcG9ydCgnLi9yZXNwb25zZScpLmRlZmF1bHQ+fVxuICovXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBmZXRjaCh1cmwsIG9wdGlvbnNfKSB7XG5cdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0Ly8gQnVpbGQgcmVxdWVzdCBvYmplY3Rcblx0XHRjb25zdCByZXF1ZXN0ID0gbmV3IFJlcXVlc3QodXJsLCBvcHRpb25zXyk7XG5cdFx0Y29uc3Qge3BhcnNlZFVSTCwgb3B0aW9uc30gPSBnZXROb2RlUmVxdWVzdE9wdGlvbnMocmVxdWVzdCk7XG5cdFx0aWYgKCFzdXBwb3J0ZWRTY2hlbWFzLmhhcyhwYXJzZWRVUkwucHJvdG9jb2wpKSB7XG5cdFx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKGBub2RlLWZldGNoIGNhbm5vdCBsb2FkICR7dXJsfS4gVVJMIHNjaGVtZSBcIiR7cGFyc2VkVVJMLnByb3RvY29sLnJlcGxhY2UoLzokLywgJycpfVwiIGlzIG5vdCBzdXBwb3J0ZWQuYCk7XG5cdFx0fVxuXG5cdFx0aWYgKHBhcnNlZFVSTC5wcm90b2NvbCA9PT0gJ2RhdGE6Jykge1xuXHRcdFx0Y29uc3QgZGF0YSA9IGRhdGFVcmlUb0J1ZmZlcihyZXF1ZXN0LnVybCk7XG5cdFx0XHRjb25zdCByZXNwb25zZSA9IG5ldyBSZXNwb25zZShkYXRhLCB7aGVhZGVyczogeydDb250ZW50LVR5cGUnOiBkYXRhLnR5cGVGdWxsfX0pO1xuXHRcdFx0cmVzb2x2ZShyZXNwb25zZSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gV3JhcCBodHRwLnJlcXVlc3QgaW50byBmZXRjaFxuXHRcdGNvbnN0IHNlbmQgPSAocGFyc2VkVVJMLnByb3RvY29sID09PSAnaHR0cHM6JyA/IGh0dHBzIDogaHR0cCkucmVxdWVzdDtcblx0XHRjb25zdCB7c2lnbmFsfSA9IHJlcXVlc3Q7XG5cdFx0bGV0IHJlc3BvbnNlID0gbnVsbDtcblxuXHRcdGNvbnN0IGFib3J0ID0gKCkgPT4ge1xuXHRcdFx0Y29uc3QgZXJyb3IgPSBuZXcgQWJvcnRFcnJvcignVGhlIG9wZXJhdGlvbiB3YXMgYWJvcnRlZC4nKTtcblx0XHRcdHJlamVjdChlcnJvcik7XG5cdFx0XHRpZiAocmVxdWVzdC5ib2R5ICYmIHJlcXVlc3QuYm9keSBpbnN0YW5jZW9mIFN0cmVhbS5SZWFkYWJsZSkge1xuXHRcdFx0XHRyZXF1ZXN0LmJvZHkuZGVzdHJveShlcnJvcik7XG5cdFx0XHR9XG5cblx0XHRcdGlmICghcmVzcG9uc2UgfHwgIXJlc3BvbnNlLmJvZHkpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXNwb25zZS5ib2R5LmVtaXQoJ2Vycm9yJywgZXJyb3IpO1xuXHRcdH07XG5cblx0XHRpZiAoc2lnbmFsICYmIHNpZ25hbC5hYm9ydGVkKSB7XG5cdFx0XHRhYm9ydCgpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGNvbnN0IGFib3J0QW5kRmluYWxpemUgPSAoKSA9PiB7XG5cdFx0XHRhYm9ydCgpO1xuXHRcdFx0ZmluYWxpemUoKTtcblx0XHR9O1xuXG5cdFx0Ly8gU2VuZCByZXF1ZXN0XG5cdFx0Y29uc3QgcmVxdWVzdF8gPSBzZW5kKHBhcnNlZFVSTC50b1N0cmluZygpLCBvcHRpb25zKTtcblxuXHRcdGlmIChzaWduYWwpIHtcblx0XHRcdHNpZ25hbC5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsIGFib3J0QW5kRmluYWxpemUpO1xuXHRcdH1cblxuXHRcdGNvbnN0IGZpbmFsaXplID0gKCkgPT4ge1xuXHRcdFx0cmVxdWVzdF8uYWJvcnQoKTtcblx0XHRcdGlmIChzaWduYWwpIHtcblx0XHRcdFx0c2lnbmFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgYWJvcnRBbmRGaW5hbGl6ZSk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdHJlcXVlc3RfLm9uKCdlcnJvcicsIGVycm9yID0+IHtcblx0XHRcdHJlamVjdChuZXcgRmV0Y2hFcnJvcihgcmVxdWVzdCB0byAke3JlcXVlc3QudXJsfSBmYWlsZWQsIHJlYXNvbjogJHtlcnJvci5tZXNzYWdlfWAsICdzeXN0ZW0nLCBlcnJvcikpO1xuXHRcdFx0ZmluYWxpemUoKTtcblx0XHR9KTtcblxuXHRcdGZpeFJlc3BvbnNlQ2h1bmtlZFRyYW5zZmVyQmFkRW5kaW5nKHJlcXVlc3RfLCBlcnJvciA9PiB7XG5cdFx0XHRpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2UuYm9keSkge1xuXHRcdFx0XHRyZXNwb25zZS5ib2R5LmRlc3Ryb3koZXJyb3IpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0LyogYzggaWdub3JlIG5leHQgMTggKi9cblx0XHRpZiAocHJvY2Vzcy52ZXJzaW9uIDwgJ3YxNCcpIHtcblx0XHRcdC8vIEJlZm9yZSBOb2RlLmpzIDE0LCBwaXBlbGluZSgpIGRvZXMgbm90IGZ1bGx5IHN1cHBvcnQgYXN5bmMgaXRlcmF0b3JzIGFuZCBkb2VzIG5vdCBhbHdheXNcblx0XHRcdC8vIHByb3Blcmx5IGhhbmRsZSB3aGVuIHRoZSBzb2NrZXQgY2xvc2UvZW5kIGV2ZW50cyBhcmUgb3V0IG9mIG9yZGVyLlxuXHRcdFx0cmVxdWVzdF8ub24oJ3NvY2tldCcsIHMgPT4ge1xuXHRcdFx0XHRsZXQgZW5kZWRXaXRoRXZlbnRzQ291bnQ7XG5cdFx0XHRcdHMucHJlcGVuZExpc3RlbmVyKCdlbmQnLCAoKSA9PiB7XG5cdFx0XHRcdFx0ZW5kZWRXaXRoRXZlbnRzQ291bnQgPSBzLl9ldmVudHNDb3VudDtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdHMucHJlcGVuZExpc3RlbmVyKCdjbG9zZScsIGhhZEVycm9yID0+IHtcblx0XHRcdFx0XHQvLyBpZiBlbmQgaGFwcGVuZWQgYmVmb3JlIGNsb3NlIGJ1dCB0aGUgc29ja2V0IGRpZG4ndCBlbWl0IGFuIGVycm9yLCBkbyBpdCBub3dcblx0XHRcdFx0XHRpZiAocmVzcG9uc2UgJiYgZW5kZWRXaXRoRXZlbnRzQ291bnQgPCBzLl9ldmVudHNDb3VudCAmJiAhaGFkRXJyb3IpIHtcblx0XHRcdFx0XHRcdGNvbnN0IGVycm9yID0gbmV3IEVycm9yKCdQcmVtYXR1cmUgY2xvc2UnKTtcblx0XHRcdFx0XHRcdGVycm9yLmNvZGUgPSAnRVJSX1NUUkVBTV9QUkVNQVRVUkVfQ0xPU0UnO1xuXHRcdFx0XHRcdFx0cmVzcG9uc2UuYm9keS5lbWl0KCdlcnJvcicsIGVycm9yKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0cmVxdWVzdF8ub24oJ3Jlc3BvbnNlJywgcmVzcG9uc2VfID0+IHtcblx0XHRcdHJlcXVlc3RfLnNldFRpbWVvdXQoMCk7XG5cdFx0XHRjb25zdCBoZWFkZXJzID0gZnJvbVJhd0hlYWRlcnMocmVzcG9uc2VfLnJhd0hlYWRlcnMpO1xuXG5cdFx0XHQvLyBIVFRQIGZldGNoIHN0ZXAgNVxuXHRcdFx0aWYgKGlzUmVkaXJlY3QocmVzcG9uc2VfLnN0YXR1c0NvZGUpKSB7XG5cdFx0XHRcdC8vIEhUVFAgZmV0Y2ggc3RlcCA1LjJcblx0XHRcdFx0Y29uc3QgbG9jYXRpb24gPSBoZWFkZXJzLmdldCgnTG9jYXRpb24nKTtcblxuXHRcdFx0XHQvLyBIVFRQIGZldGNoIHN0ZXAgNS4zXG5cdFx0XHRcdGxldCBsb2NhdGlvblVSTCA9IG51bGw7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0bG9jYXRpb25VUkwgPSBsb2NhdGlvbiA9PT0gbnVsbCA/IG51bGwgOiBuZXcgVVJMKGxvY2F0aW9uLCByZXF1ZXN0LnVybCk7XG5cdFx0XHRcdH0gY2F0Y2gge1xuXHRcdFx0XHRcdC8vIGVycm9yIGhlcmUgY2FuIG9ubHkgYmUgaW52YWxpZCBVUkwgaW4gTG9jYXRpb246IGhlYWRlclxuXHRcdFx0XHRcdC8vIGRvIG5vdCB0aHJvdyB3aGVuIG9wdGlvbnMucmVkaXJlY3QgPT0gbWFudWFsXG5cdFx0XHRcdFx0Ly8gbGV0IHRoZSB1c2VyIGV4dHJhY3QgdGhlIGVycm9ybmVvdXMgcmVkaXJlY3QgVVJMXG5cdFx0XHRcdFx0aWYgKHJlcXVlc3QucmVkaXJlY3QgIT09ICdtYW51YWwnKSB7XG5cdFx0XHRcdFx0XHRyZWplY3QobmV3IEZldGNoRXJyb3IoYHVyaSByZXF1ZXN0ZWQgcmVzcG9uZHMgd2l0aCBhbiBpbnZhbGlkIHJlZGlyZWN0IFVSTDogJHtsb2NhdGlvbn1gLCAnaW52YWxpZC1yZWRpcmVjdCcpKTtcblx0XHRcdFx0XHRcdGZpbmFsaXplKCk7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gSFRUUCBmZXRjaCBzdGVwIDUuNVxuXHRcdFx0XHRzd2l0Y2ggKHJlcXVlc3QucmVkaXJlY3QpIHtcblx0XHRcdFx0XHRjYXNlICdlcnJvcic6XG5cdFx0XHRcdFx0XHRyZWplY3QobmV3IEZldGNoRXJyb3IoYHVyaSByZXF1ZXN0ZWQgcmVzcG9uZHMgd2l0aCBhIHJlZGlyZWN0LCByZWRpcmVjdCBtb2RlIGlzIHNldCB0byBlcnJvcjogJHtyZXF1ZXN0LnVybH1gLCAnbm8tcmVkaXJlY3QnKSk7XG5cdFx0XHRcdFx0XHRmaW5hbGl6ZSgpO1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdGNhc2UgJ21hbnVhbCc6XG5cdFx0XHRcdFx0XHQvLyBOb3RoaW5nIHRvIGRvXG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlICdmb2xsb3cnOiB7XG5cdFx0XHRcdFx0XHQvLyBIVFRQLXJlZGlyZWN0IGZldGNoIHN0ZXAgMlxuXHRcdFx0XHRcdFx0aWYgKGxvY2F0aW9uVVJMID09PSBudWxsKSB7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQvLyBIVFRQLXJlZGlyZWN0IGZldGNoIHN0ZXAgNVxuXHRcdFx0XHRcdFx0aWYgKHJlcXVlc3QuY291bnRlciA+PSByZXF1ZXN0LmZvbGxvdykge1xuXHRcdFx0XHRcdFx0XHRyZWplY3QobmV3IEZldGNoRXJyb3IoYG1heGltdW0gcmVkaXJlY3QgcmVhY2hlZCBhdDogJHtyZXF1ZXN0LnVybH1gLCAnbWF4LXJlZGlyZWN0JykpO1xuXHRcdFx0XHRcdFx0XHRmaW5hbGl6ZSgpO1xuXHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vIEhUVFAtcmVkaXJlY3QgZmV0Y2ggc3RlcCA2IChjb3VudGVyIGluY3JlbWVudClcblx0XHRcdFx0XHRcdC8vIENyZWF0ZSBhIG5ldyBSZXF1ZXN0IG9iamVjdC5cblx0XHRcdFx0XHRcdGNvbnN0IHJlcXVlc3RPcHRpb25zID0ge1xuXHRcdFx0XHRcdFx0XHRoZWFkZXJzOiBuZXcgSGVhZGVycyhyZXF1ZXN0LmhlYWRlcnMpLFxuXHRcdFx0XHRcdFx0XHRmb2xsb3c6IHJlcXVlc3QuZm9sbG93LFxuXHRcdFx0XHRcdFx0XHRjb3VudGVyOiByZXF1ZXN0LmNvdW50ZXIgKyAxLFxuXHRcdFx0XHRcdFx0XHRhZ2VudDogcmVxdWVzdC5hZ2VudCxcblx0XHRcdFx0XHRcdFx0Y29tcHJlc3M6IHJlcXVlc3QuY29tcHJlc3MsXG5cdFx0XHRcdFx0XHRcdG1ldGhvZDogcmVxdWVzdC5tZXRob2QsXG5cdFx0XHRcdFx0XHRcdGJvZHk6IGNsb25lKHJlcXVlc3QpLFxuXHRcdFx0XHRcdFx0XHRzaWduYWw6IHJlcXVlc3Quc2lnbmFsLFxuXHRcdFx0XHRcdFx0XHRzaXplOiByZXF1ZXN0LnNpemUsXG5cdFx0XHRcdFx0XHRcdHJlZmVycmVyOiByZXF1ZXN0LnJlZmVycmVyLFxuXHRcdFx0XHRcdFx0XHRyZWZlcnJlclBvbGljeTogcmVxdWVzdC5yZWZlcnJlclBvbGljeVxuXHRcdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdFx0Ly8gd2hlbiBmb3J3YXJkaW5nIHNlbnNpdGl2ZSBoZWFkZXJzIGxpa2UgXCJBdXRob3JpemF0aW9uXCIsXG5cdFx0XHRcdFx0XHQvLyBcIldXVy1BdXRoZW50aWNhdGVcIiwgYW5kIFwiQ29va2llXCIgdG8gdW50cnVzdGVkIHRhcmdldHMsXG5cdFx0XHRcdFx0XHQvLyBoZWFkZXJzIHdpbGwgYmUgaWdub3JlZCB3aGVuIGZvbGxvd2luZyBhIHJlZGlyZWN0IHRvIGEgZG9tYWluXG5cdFx0XHRcdFx0XHQvLyB0aGF0IGlzIG5vdCBhIHN1YmRvbWFpbiBtYXRjaCBvciBleGFjdCBtYXRjaCBvZiB0aGUgaW5pdGlhbCBkb21haW4uXG5cdFx0XHRcdFx0XHQvLyBGb3IgZXhhbXBsZSwgYSByZWRpcmVjdCBmcm9tIFwiZm9vLmNvbVwiIHRvIGVpdGhlciBcImZvby5jb21cIiBvciBcInN1Yi5mb28uY29tXCJcblx0XHRcdFx0XHRcdC8vIHdpbGwgZm9yd2FyZCB0aGUgc2Vuc2l0aXZlIGhlYWRlcnMsIGJ1dCBhIHJlZGlyZWN0IHRvIFwiYmFyLmNvbVwiIHdpbGwgbm90LlxuXHRcdFx0XHRcdFx0Ly8gaGVhZGVycyB3aWxsIGFsc28gYmUgaWdub3JlZCB3aGVuIGZvbGxvd2luZyBhIHJlZGlyZWN0IHRvIGEgZG9tYWluIHVzaW5nXG5cdFx0XHRcdFx0XHQvLyBhIGRpZmZlcmVudCBwcm90b2NvbC4gRm9yIGV4YW1wbGUsIGEgcmVkaXJlY3QgZnJvbSBcImh0dHBzOi8vZm9vLmNvbVwiIHRvIFwiaHR0cDovL2Zvby5jb21cIlxuXHRcdFx0XHRcdFx0Ly8gd2lsbCBub3QgZm9yd2FyZCB0aGUgc2Vuc2l0aXZlIGhlYWRlcnNcblx0XHRcdFx0XHRcdGlmICghaXNEb21haW5PclN1YmRvbWFpbihyZXF1ZXN0LnVybCwgbG9jYXRpb25VUkwpIHx8ICFpc1NhbWVQcm90b2NvbChyZXF1ZXN0LnVybCwgbG9jYXRpb25VUkwpKSB7XG5cdFx0XHRcdFx0XHRcdGZvciAoY29uc3QgbmFtZSBvZiBbJ2F1dGhvcml6YXRpb24nLCAnd3d3LWF1dGhlbnRpY2F0ZScsICdjb29raWUnLCAnY29va2llMiddKSB7XG5cdFx0XHRcdFx0XHRcdFx0cmVxdWVzdE9wdGlvbnMuaGVhZGVycy5kZWxldGUobmFtZSk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Ly8gSFRUUC1yZWRpcmVjdCBmZXRjaCBzdGVwIDlcblx0XHRcdFx0XHRcdGlmIChyZXNwb25zZV8uc3RhdHVzQ29kZSAhPT0gMzAzICYmIHJlcXVlc3QuYm9keSAmJiBvcHRpb25zXy5ib2R5IGluc3RhbmNlb2YgU3RyZWFtLlJlYWRhYmxlKSB7XG5cdFx0XHRcdFx0XHRcdHJlamVjdChuZXcgRmV0Y2hFcnJvcignQ2Fubm90IGZvbGxvdyByZWRpcmVjdCB3aXRoIGJvZHkgYmVpbmcgYSByZWFkYWJsZSBzdHJlYW0nLCAndW5zdXBwb3J0ZWQtcmVkaXJlY3QnKSk7XG5cdFx0XHRcdFx0XHRcdGZpbmFsaXplKCk7XG5cdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Ly8gSFRUUC1yZWRpcmVjdCBmZXRjaCBzdGVwIDExXG5cdFx0XHRcdFx0XHRpZiAocmVzcG9uc2VfLnN0YXR1c0NvZGUgPT09IDMwMyB8fCAoKHJlc3BvbnNlXy5zdGF0dXNDb2RlID09PSAzMDEgfHwgcmVzcG9uc2VfLnN0YXR1c0NvZGUgPT09IDMwMikgJiYgcmVxdWVzdC5tZXRob2QgPT09ICdQT1NUJykpIHtcblx0XHRcdFx0XHRcdFx0cmVxdWVzdE9wdGlvbnMubWV0aG9kID0gJ0dFVCc7XG5cdFx0XHRcdFx0XHRcdHJlcXVlc3RPcHRpb25zLmJvZHkgPSB1bmRlZmluZWQ7XG5cdFx0XHRcdFx0XHRcdHJlcXVlc3RPcHRpb25zLmhlYWRlcnMuZGVsZXRlKCdjb250ZW50LWxlbmd0aCcpO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQvLyBIVFRQLXJlZGlyZWN0IGZldGNoIHN0ZXAgMTRcblx0XHRcdFx0XHRcdGNvbnN0IHJlc3BvbnNlUmVmZXJyZXJQb2xpY3kgPSBwYXJzZVJlZmVycmVyUG9saWN5RnJvbUhlYWRlcihoZWFkZXJzKTtcblx0XHRcdFx0XHRcdGlmIChyZXNwb25zZVJlZmVycmVyUG9saWN5KSB7XG5cdFx0XHRcdFx0XHRcdHJlcXVlc3RPcHRpb25zLnJlZmVycmVyUG9saWN5ID0gcmVzcG9uc2VSZWZlcnJlclBvbGljeTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Ly8gSFRUUC1yZWRpcmVjdCBmZXRjaCBzdGVwIDE1XG5cdFx0XHRcdFx0XHRyZXNvbHZlKGZldGNoKG5ldyBSZXF1ZXN0KGxvY2F0aW9uVVJMLCByZXF1ZXN0T3B0aW9ucykpKTtcblx0XHRcdFx0XHRcdGZpbmFsaXplKCk7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRcdHJldHVybiByZWplY3QobmV3IFR5cGVFcnJvcihgUmVkaXJlY3Qgb3B0aW9uICcke3JlcXVlc3QucmVkaXJlY3R9JyBpcyBub3QgYSB2YWxpZCB2YWx1ZSBvZiBSZXF1ZXN0UmVkaXJlY3RgKSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gUHJlcGFyZSByZXNwb25zZVxuXHRcdFx0aWYgKHNpZ25hbCkge1xuXHRcdFx0XHRyZXNwb25zZV8ub25jZSgnZW5kJywgKCkgPT4ge1xuXHRcdFx0XHRcdHNpZ25hbC5yZW1vdmVFdmVudExpc3RlbmVyKCdhYm9ydCcsIGFib3J0QW5kRmluYWxpemUpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblxuXHRcdFx0bGV0IGJvZHkgPSBwdW1wKHJlc3BvbnNlXywgbmV3IFBhc3NUaHJvdWdoKCksIGVycm9yID0+IHtcblx0XHRcdFx0aWYgKGVycm9yKSB7XG5cdFx0XHRcdFx0cmVqZWN0KGVycm9yKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHQvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL25vZGVqcy9ub2RlL3B1bGwvMjkzNzZcblx0XHRcdC8qIGM4IGlnbm9yZSBuZXh0IDMgKi9cblx0XHRcdGlmIChwcm9jZXNzLnZlcnNpb24gPCAndjEyLjEwJykge1xuXHRcdFx0XHRyZXNwb25zZV8ub24oJ2Fib3J0ZWQnLCBhYm9ydEFuZEZpbmFsaXplKTtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgcmVzcG9uc2VPcHRpb25zID0ge1xuXHRcdFx0XHR1cmw6IHJlcXVlc3QudXJsLFxuXHRcdFx0XHRzdGF0dXM6IHJlc3BvbnNlXy5zdGF0dXNDb2RlLFxuXHRcdFx0XHRzdGF0dXNUZXh0OiByZXNwb25zZV8uc3RhdHVzTWVzc2FnZSxcblx0XHRcdFx0aGVhZGVycyxcblx0XHRcdFx0c2l6ZTogcmVxdWVzdC5zaXplLFxuXHRcdFx0XHRjb3VudGVyOiByZXF1ZXN0LmNvdW50ZXIsXG5cdFx0XHRcdGhpZ2hXYXRlck1hcms6IHJlcXVlc3QuaGlnaFdhdGVyTWFya1xuXHRcdFx0fTtcblxuXHRcdFx0Ly8gSFRUUC1uZXR3b3JrIGZldGNoIHN0ZXAgMTIuMS4xLjNcblx0XHRcdGNvbnN0IGNvZGluZ3MgPSBoZWFkZXJzLmdldCgnQ29udGVudC1FbmNvZGluZycpO1xuXG5cdFx0XHQvLyBIVFRQLW5ldHdvcmsgZmV0Y2ggc3RlcCAxMi4xLjEuNDogaGFuZGxlIGNvbnRlbnQgY29kaW5nc1xuXG5cdFx0XHQvLyBpbiBmb2xsb3dpbmcgc2NlbmFyaW9zIHdlIGlnbm9yZSBjb21wcmVzc2lvbiBzdXBwb3J0XG5cdFx0XHQvLyAxLiBjb21wcmVzc2lvbiBzdXBwb3J0IGlzIGRpc2FibGVkXG5cdFx0XHQvLyAyLiBIRUFEIHJlcXVlc3Rcblx0XHRcdC8vIDMuIG5vIENvbnRlbnQtRW5jb2RpbmcgaGVhZGVyXG5cdFx0XHQvLyA0LiBubyBjb250ZW50IHJlc3BvbnNlICgyMDQpXG5cdFx0XHQvLyA1LiBjb250ZW50IG5vdCBtb2RpZmllZCByZXNwb25zZSAoMzA0KVxuXHRcdFx0aWYgKCFyZXF1ZXN0LmNvbXByZXNzIHx8IHJlcXVlc3QubWV0aG9kID09PSAnSEVBRCcgfHwgY29kaW5ncyA9PT0gbnVsbCB8fCByZXNwb25zZV8uc3RhdHVzQ29kZSA9PT0gMjA0IHx8IHJlc3BvbnNlXy5zdGF0dXNDb2RlID09PSAzMDQpIHtcblx0XHRcdFx0cmVzcG9uc2UgPSBuZXcgUmVzcG9uc2UoYm9keSwgcmVzcG9uc2VPcHRpb25zKTtcblx0XHRcdFx0cmVzb2x2ZShyZXNwb25zZSk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gRm9yIE5vZGUgdjYrXG5cdFx0XHQvLyBCZSBsZXNzIHN0cmljdCB3aGVuIGRlY29kaW5nIGNvbXByZXNzZWQgcmVzcG9uc2VzLCBzaW5jZSBzb21ldGltZXNcblx0XHRcdC8vIHNlcnZlcnMgc2VuZCBzbGlnaHRseSBpbnZhbGlkIHJlc3BvbnNlcyB0aGF0IGFyZSBzdGlsbCBhY2NlcHRlZFxuXHRcdFx0Ly8gYnkgY29tbW9uIGJyb3dzZXJzLlxuXHRcdFx0Ly8gQWx3YXlzIHVzaW5nIFpfU1lOQ19GTFVTSCBpcyB3aGF0IGNVUkwgZG9lcy5cblx0XHRcdGNvbnN0IHpsaWJPcHRpb25zID0ge1xuXHRcdFx0XHRmbHVzaDogemxpYi5aX1NZTkNfRkxVU0gsXG5cdFx0XHRcdGZpbmlzaEZsdXNoOiB6bGliLlpfU1lOQ19GTFVTSFxuXHRcdFx0fTtcblxuXHRcdFx0Ly8gRm9yIGd6aXBcblx0XHRcdGlmIChjb2RpbmdzID09PSAnZ3ppcCcgfHwgY29kaW5ncyA9PT0gJ3gtZ3ppcCcpIHtcblx0XHRcdFx0Ym9keSA9IHB1bXAoYm9keSwgemxpYi5jcmVhdGVHdW56aXAoemxpYk9wdGlvbnMpLCBlcnJvciA9PiB7XG5cdFx0XHRcdFx0aWYgKGVycm9yKSB7XG5cdFx0XHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHRcdHJlc3BvbnNlID0gbmV3IFJlc3BvbnNlKGJvZHksIHJlc3BvbnNlT3B0aW9ucyk7XG5cdFx0XHRcdHJlc29sdmUocmVzcG9uc2UpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIEZvciBkZWZsYXRlXG5cdFx0XHRpZiAoY29kaW5ncyA9PT0gJ2RlZmxhdGUnIHx8IGNvZGluZ3MgPT09ICd4LWRlZmxhdGUnKSB7XG5cdFx0XHRcdC8vIEhhbmRsZSB0aGUgaW5mYW1vdXMgcmF3IGRlZmxhdGUgcmVzcG9uc2UgZnJvbSBvbGQgc2VydmVyc1xuXHRcdFx0XHQvLyBhIGhhY2sgZm9yIG9sZCBJSVMgYW5kIEFwYWNoZSBzZXJ2ZXJzXG5cdFx0XHRcdGNvbnN0IHJhdyA9IHB1bXAocmVzcG9uc2VfLCBuZXcgUGFzc1Rocm91Z2goKSwgZXJyb3IgPT4ge1xuXHRcdFx0XHRcdGlmIChlcnJvcikge1xuXHRcdFx0XHRcdFx0cmVqZWN0KGVycm9yKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRyYXcub25jZSgnZGF0YScsIGNodW5rID0+IHtcblx0XHRcdFx0XHQvLyBTZWUgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8zNzUxOTgyOFxuXHRcdFx0XHRcdGlmICgoY2h1bmtbMF0gJiAweDBGKSA9PT0gMHgwOCkge1xuXHRcdFx0XHRcdFx0Ym9keSA9IHB1bXAoYm9keSwgemxpYi5jcmVhdGVJbmZsYXRlKCksIGVycm9yID0+IHtcblx0XHRcdFx0XHRcdFx0aWYgKGVycm9yKSB7XG5cdFx0XHRcdFx0XHRcdFx0cmVqZWN0KGVycm9yKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGJvZHkgPSBwdW1wKGJvZHksIHpsaWIuY3JlYXRlSW5mbGF0ZVJhdygpLCBlcnJvciA9PiB7XG5cdFx0XHRcdFx0XHRcdGlmIChlcnJvcikge1xuXHRcdFx0XHRcdFx0XHRcdHJlamVjdChlcnJvcik7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHJlc3BvbnNlID0gbmV3IFJlc3BvbnNlKGJvZHksIHJlc3BvbnNlT3B0aW9ucyk7XG5cdFx0XHRcdFx0cmVzb2x2ZShyZXNwb25zZSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRyYXcub25jZSgnZW5kJywgKCkgPT4ge1xuXHRcdFx0XHRcdC8vIFNvbWUgb2xkIElJUyBzZXJ2ZXJzIHJldHVybiB6ZXJvLWxlbmd0aCBPSyBkZWZsYXRlIHJlc3BvbnNlcywgc29cblx0XHRcdFx0XHQvLyAnZGF0YScgaXMgbmV2ZXIgZW1pdHRlZC4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ub2RlLWZldGNoL25vZGUtZmV0Y2gvcHVsbC85MDNcblx0XHRcdFx0XHRpZiAoIXJlc3BvbnNlKSB7XG5cdFx0XHRcdFx0XHRyZXNwb25zZSA9IG5ldyBSZXNwb25zZShib2R5LCByZXNwb25zZU9wdGlvbnMpO1xuXHRcdFx0XHRcdFx0cmVzb2x2ZShyZXNwb25zZSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBGb3IgYnJcblx0XHRcdGlmIChjb2RpbmdzID09PSAnYnInKSB7XG5cdFx0XHRcdGJvZHkgPSBwdW1wKGJvZHksIHpsaWIuY3JlYXRlQnJvdGxpRGVjb21wcmVzcygpLCBlcnJvciA9PiB7XG5cdFx0XHRcdFx0aWYgKGVycm9yKSB7XG5cdFx0XHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHRcdHJlc3BvbnNlID0gbmV3IFJlc3BvbnNlKGJvZHksIHJlc3BvbnNlT3B0aW9ucyk7XG5cdFx0XHRcdHJlc29sdmUocmVzcG9uc2UpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIE90aGVyd2lzZSwgdXNlIHJlc3BvbnNlIGFzLWlzXG5cdFx0XHRyZXNwb25zZSA9IG5ldyBSZXNwb25zZShib2R5LCByZXNwb25zZU9wdGlvbnMpO1xuXHRcdFx0cmVzb2x2ZShyZXNwb25zZSk7XG5cdFx0fSk7XG5cblx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJvbWlzZS9wcmVmZXItYXdhaXQtdG8tdGhlblxuXHRcdHdyaXRlVG9TdHJlYW0ocmVxdWVzdF8sIHJlcXVlc3QpLmNhdGNoKHJlamVjdCk7XG5cdH0pO1xufVxuXG5mdW5jdGlvbiBmaXhSZXNwb25zZUNodW5rZWRUcmFuc2ZlckJhZEVuZGluZyhyZXF1ZXN0LCBlcnJvckNhbGxiYWNrKSB7XG5cdGNvbnN0IExBU1RfQ0hVTksgPSBCdWZmZXIuZnJvbSgnMFxcclxcblxcclxcbicpO1xuXG5cdGxldCBpc0NodW5rZWRUcmFuc2ZlciA9IGZhbHNlO1xuXHRsZXQgcHJvcGVyTGFzdENodW5rUmVjZWl2ZWQgPSBmYWxzZTtcblx0bGV0IHByZXZpb3VzQ2h1bms7XG5cblx0cmVxdWVzdC5vbigncmVzcG9uc2UnLCByZXNwb25zZSA9PiB7XG5cdFx0Y29uc3Qge2hlYWRlcnN9ID0gcmVzcG9uc2U7XG5cdFx0aXNDaHVua2VkVHJhbnNmZXIgPSBoZWFkZXJzWyd0cmFuc2Zlci1lbmNvZGluZyddID09PSAnY2h1bmtlZCcgJiYgIWhlYWRlcnNbJ2NvbnRlbnQtbGVuZ3RoJ107XG5cdH0pO1xuXG5cdHJlcXVlc3Qub24oJ3NvY2tldCcsIHNvY2tldCA9PiB7XG5cdFx0Y29uc3Qgb25Tb2NrZXRDbG9zZSA9ICgpID0+IHtcblx0XHRcdGlmIChpc0NodW5rZWRUcmFuc2ZlciAmJiAhcHJvcGVyTGFzdENodW5rUmVjZWl2ZWQpIHtcblx0XHRcdFx0Y29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoJ1ByZW1hdHVyZSBjbG9zZScpO1xuXHRcdFx0XHRlcnJvci5jb2RlID0gJ0VSUl9TVFJFQU1fUFJFTUFUVVJFX0NMT1NFJztcblx0XHRcdFx0ZXJyb3JDYWxsYmFjayhlcnJvcik7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdGNvbnN0IG9uRGF0YSA9IGJ1ZiA9PiB7XG5cdFx0XHRwcm9wZXJMYXN0Q2h1bmtSZWNlaXZlZCA9IEJ1ZmZlci5jb21wYXJlKGJ1Zi5zbGljZSgtNSksIExBU1RfQ0hVTkspID09PSAwO1xuXG5cdFx0XHQvLyBTb21ldGltZXMgZmluYWwgMC1sZW5ndGggY2h1bmsgYW5kIGVuZCBvZiBtZXNzYWdlIGNvZGUgYXJlIGluIHNlcGFyYXRlIHBhY2tldHNcblx0XHRcdGlmICghcHJvcGVyTGFzdENodW5rUmVjZWl2ZWQgJiYgcHJldmlvdXNDaHVuaykge1xuXHRcdFx0XHRwcm9wZXJMYXN0Q2h1bmtSZWNlaXZlZCA9IChcblx0XHRcdFx0XHRCdWZmZXIuY29tcGFyZShwcmV2aW91c0NodW5rLnNsaWNlKC0zKSwgTEFTVF9DSFVOSy5zbGljZSgwLCAzKSkgPT09IDAgJiZcblx0XHRcdFx0XHRCdWZmZXIuY29tcGFyZShidWYuc2xpY2UoLTIpLCBMQVNUX0NIVU5LLnNsaWNlKDMpKSA9PT0gMFxuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXG5cdFx0XHRwcmV2aW91c0NodW5rID0gYnVmO1xuXHRcdH07XG5cblx0XHRzb2NrZXQucHJlcGVuZExpc3RlbmVyKCdjbG9zZScsIG9uU29ja2V0Q2xvc2UpO1xuXHRcdHNvY2tldC5vbignZGF0YScsIG9uRGF0YSk7XG5cblx0XHRyZXF1ZXN0Lm9uKCdjbG9zZScsICgpID0+IHtcblx0XHRcdHNvY2tldC5yZW1vdmVMaXN0ZW5lcignY2xvc2UnLCBvblNvY2tldENsb3NlKTtcblx0XHRcdHNvY2tldC5yZW1vdmVMaXN0ZW5lcignZGF0YScsIG9uRGF0YSk7XG5cdFx0fSk7XG5cdH0pO1xufVxuIiwgImV4cG9ydCBpbnRlcmZhY2UgTWltZUJ1ZmZlciBleHRlbmRzIEJ1ZmZlciB7XG5cdHR5cGU6IHN0cmluZztcblx0dHlwZUZ1bGw6IHN0cmluZztcblx0Y2hhcnNldDogc3RyaW5nO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBgQnVmZmVyYCBpbnN0YW5jZSBmcm9tIHRoZSBnaXZlbiBkYXRhIFVSSSBgdXJpYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdXJpIERhdGEgVVJJIHRvIHR1cm4gaW50byBhIEJ1ZmZlciBpbnN0YW5jZVxuICogQHJldHVybnMge0J1ZmZlcn0gQnVmZmVyIGluc3RhbmNlIGZyb20gRGF0YSBVUklcbiAqIEBhcGkgcHVibGljXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkYXRhVXJpVG9CdWZmZXIodXJpOiBzdHJpbmcpOiBNaW1lQnVmZmVyIHtcblx0aWYgKCEvXmRhdGE6L2kudGVzdCh1cmkpKSB7XG5cdFx0dGhyb3cgbmV3IFR5cGVFcnJvcihcblx0XHRcdCdgdXJpYCBkb2VzIG5vdCBhcHBlYXIgdG8gYmUgYSBEYXRhIFVSSSAobXVzdCBiZWdpbiB3aXRoIFwiZGF0YTpcIiknXG5cdFx0KTtcblx0fVxuXG5cdC8vIHN0cmlwIG5ld2xpbmVzXG5cdHVyaSA9IHVyaS5yZXBsYWNlKC9cXHI/XFxuL2csICcnKTtcblxuXHQvLyBzcGxpdCB0aGUgVVJJIHVwIGludG8gdGhlIFwibWV0YWRhdGFcIiBhbmQgdGhlIFwiZGF0YVwiIHBvcnRpb25zXG5cdGNvbnN0IGZpcnN0Q29tbWEgPSB1cmkuaW5kZXhPZignLCcpO1xuXHRpZiAoZmlyc3RDb21tYSA9PT0gLTEgfHwgZmlyc3RDb21tYSA8PSA0KSB7XG5cdFx0dGhyb3cgbmV3IFR5cGVFcnJvcignbWFsZm9ybWVkIGRhdGE6IFVSSScpO1xuXHR9XG5cblx0Ly8gcmVtb3ZlIHRoZSBcImRhdGE6XCIgc2NoZW1lIGFuZCBwYXJzZSB0aGUgbWV0YWRhdGFcblx0Y29uc3QgbWV0YSA9IHVyaS5zdWJzdHJpbmcoNSwgZmlyc3RDb21tYSkuc3BsaXQoJzsnKTtcblxuXHRsZXQgY2hhcnNldCA9ICcnO1xuXHRsZXQgYmFzZTY0ID0gZmFsc2U7XG5cdGNvbnN0IHR5cGUgPSBtZXRhWzBdIHx8ICd0ZXh0L3BsYWluJztcblx0bGV0IHR5cGVGdWxsID0gdHlwZTtcblx0Zm9yIChsZXQgaSA9IDE7IGkgPCBtZXRhLmxlbmd0aDsgaSsrKSB7XG5cdFx0aWYgKG1ldGFbaV0gPT09ICdiYXNlNjQnKSB7XG5cdFx0XHRiYXNlNjQgPSB0cnVlO1xuXHRcdH0gZWxzZSBpZihtZXRhW2ldKSB7XG5cdFx0XHR0eXBlRnVsbCArPSBgOyR7ICBtZXRhW2ldfWA7XG5cdFx0XHRpZiAobWV0YVtpXS5pbmRleE9mKCdjaGFyc2V0PScpID09PSAwKSB7XG5cdFx0XHRcdGNoYXJzZXQgPSBtZXRhW2ldLnN1YnN0cmluZyg4KTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0Ly8gZGVmYXVsdHMgdG8gVVMtQVNDSUkgb25seSBpZiB0eXBlIGlzIG5vdCBwcm92aWRlZFxuXHRpZiAoIW1ldGFbMF0gJiYgIWNoYXJzZXQubGVuZ3RoKSB7XG5cdFx0dHlwZUZ1bGwgKz0gJztjaGFyc2V0PVVTLUFTQ0lJJztcblx0XHRjaGFyc2V0ID0gJ1VTLUFTQ0lJJztcblx0fVxuXG5cdC8vIGdldCB0aGUgZW5jb2RlZCBkYXRhIHBvcnRpb24gYW5kIGRlY29kZSBVUkktZW5jb2RlZCBjaGFyc1xuXHRjb25zdCBlbmNvZGluZyA9IGJhc2U2NCA/ICdiYXNlNjQnIDogJ2FzY2lpJztcblx0Y29uc3QgZGF0YSA9IHVuZXNjYXBlKHVyaS5zdWJzdHJpbmcoZmlyc3RDb21tYSArIDEpKTtcblx0Y29uc3QgYnVmZmVyID0gQnVmZmVyLmZyb20oZGF0YSwgZW5jb2RpbmcpIGFzIE1pbWVCdWZmZXI7XG5cblx0Ly8gc2V0IGAudHlwZWAgYW5kIGAudHlwZUZ1bGxgIHByb3BlcnRpZXMgdG8gTUlNRSB0eXBlXG5cdGJ1ZmZlci50eXBlID0gdHlwZTtcblx0YnVmZmVyLnR5cGVGdWxsID0gdHlwZUZ1bGw7XG5cblx0Ly8gc2V0IHRoZSBgLmNoYXJzZXRgIHByb3BlcnR5XG5cdGJ1ZmZlci5jaGFyc2V0ID0gY2hhcnNldDtcblxuXHRyZXR1cm4gYnVmZmVyO1xufVxuXG5leHBvcnQgZGVmYXVsdCBkYXRhVXJpVG9CdWZmZXI7XG4iLCAiXG4vKipcbiAqIEJvZHkuanNcbiAqXG4gKiBCb2R5IGludGVyZmFjZSBwcm92aWRlcyBjb21tb24gbWV0aG9kcyBmb3IgUmVxdWVzdCBhbmQgUmVzcG9uc2VcbiAqL1xuXG5pbXBvcnQgU3RyZWFtLCB7UGFzc1Rocm91Z2h9IGZyb20gJ25vZGU6c3RyZWFtJztcbmltcG9ydCB7dHlwZXMsIGRlcHJlY2F0ZSwgcHJvbWlzaWZ5fSBmcm9tICdub2RlOnV0aWwnO1xuaW1wb3J0IHtCdWZmZXJ9IGZyb20gJ25vZGU6YnVmZmVyJztcblxuaW1wb3J0IEJsb2IgZnJvbSAnZmV0Y2gtYmxvYic7XG5pbXBvcnQge0Zvcm1EYXRhLCBmb3JtRGF0YVRvQmxvYn0gZnJvbSAnZm9ybWRhdGEtcG9seWZpbGwvZXNtLm1pbi5qcyc7XG5cbmltcG9ydCB7RmV0Y2hFcnJvcn0gZnJvbSAnLi9lcnJvcnMvZmV0Y2gtZXJyb3IuanMnO1xuaW1wb3J0IHtGZXRjaEJhc2VFcnJvcn0gZnJvbSAnLi9lcnJvcnMvYmFzZS5qcyc7XG5pbXBvcnQge2lzQmxvYiwgaXNVUkxTZWFyY2hQYXJhbWV0ZXJzfSBmcm9tICcuL3V0aWxzL2lzLmpzJztcblxuY29uc3QgcGlwZWxpbmUgPSBwcm9taXNpZnkoU3RyZWFtLnBpcGVsaW5lKTtcbmNvbnN0IElOVEVSTkFMUyA9IFN5bWJvbCgnQm9keSBpbnRlcm5hbHMnKTtcblxuLyoqXG4gKiBCb2R5IG1peGluXG4gKlxuICogUmVmOiBodHRwczovL2ZldGNoLnNwZWMud2hhdHdnLm9yZy8jYm9keVxuICpcbiAqIEBwYXJhbSAgIFN0cmVhbSAgYm9keSAgUmVhZGFibGUgc3RyZWFtXG4gKiBAcGFyYW0gICBPYmplY3QgIG9wdHMgIFJlc3BvbnNlIG9wdGlvbnNcbiAqIEByZXR1cm4gIFZvaWRcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQm9keSB7XG5cdGNvbnN0cnVjdG9yKGJvZHksIHtcblx0XHRzaXplID0gMFxuXHR9ID0ge30pIHtcblx0XHRsZXQgYm91bmRhcnkgPSBudWxsO1xuXG5cdFx0aWYgKGJvZHkgPT09IG51bGwpIHtcblx0XHRcdC8vIEJvZHkgaXMgdW5kZWZpbmVkIG9yIG51bGxcblx0XHRcdGJvZHkgPSBudWxsO1xuXHRcdH0gZWxzZSBpZiAoaXNVUkxTZWFyY2hQYXJhbWV0ZXJzKGJvZHkpKSB7XG5cdFx0XHQvLyBCb2R5IGlzIGEgVVJMU2VhcmNoUGFyYW1zXG5cdFx0XHRib2R5ID0gQnVmZmVyLmZyb20oYm9keS50b1N0cmluZygpKTtcblx0XHR9IGVsc2UgaWYgKGlzQmxvYihib2R5KSkge1xuXHRcdFx0Ly8gQm9keSBpcyBibG9iXG5cdFx0fSBlbHNlIGlmIChCdWZmZXIuaXNCdWZmZXIoYm9keSkpIHtcblx0XHRcdC8vIEJvZHkgaXMgQnVmZmVyXG5cdFx0fSBlbHNlIGlmICh0eXBlcy5pc0FueUFycmF5QnVmZmVyKGJvZHkpKSB7XG5cdFx0XHQvLyBCb2R5IGlzIEFycmF5QnVmZmVyXG5cdFx0XHRib2R5ID0gQnVmZmVyLmZyb20oYm9keSk7XG5cdFx0fSBlbHNlIGlmIChBcnJheUJ1ZmZlci5pc1ZpZXcoYm9keSkpIHtcblx0XHRcdC8vIEJvZHkgaXMgQXJyYXlCdWZmZXJWaWV3XG5cdFx0XHRib2R5ID0gQnVmZmVyLmZyb20oYm9keS5idWZmZXIsIGJvZHkuYnl0ZU9mZnNldCwgYm9keS5ieXRlTGVuZ3RoKTtcblx0XHR9IGVsc2UgaWYgKGJvZHkgaW5zdGFuY2VvZiBTdHJlYW0pIHtcblx0XHRcdC8vIEJvZHkgaXMgc3RyZWFtXG5cdFx0fSBlbHNlIGlmIChib2R5IGluc3RhbmNlb2YgRm9ybURhdGEpIHtcblx0XHRcdC8vIEJvZHkgaXMgRm9ybURhdGFcblx0XHRcdGJvZHkgPSBmb3JtRGF0YVRvQmxvYihib2R5KTtcblx0XHRcdGJvdW5kYXJ5ID0gYm9keS50eXBlLnNwbGl0KCc9JylbMV07XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIE5vbmUgb2YgdGhlIGFib3ZlXG5cdFx0XHQvLyBjb2VyY2UgdG8gc3RyaW5nIHRoZW4gYnVmZmVyXG5cdFx0XHRib2R5ID0gQnVmZmVyLmZyb20oU3RyaW5nKGJvZHkpKTtcblx0XHR9XG5cblx0XHRsZXQgc3RyZWFtID0gYm9keTtcblxuXHRcdGlmIChCdWZmZXIuaXNCdWZmZXIoYm9keSkpIHtcblx0XHRcdHN0cmVhbSA9IFN0cmVhbS5SZWFkYWJsZS5mcm9tKGJvZHkpO1xuXHRcdH0gZWxzZSBpZiAoaXNCbG9iKGJvZHkpKSB7XG5cdFx0XHRzdHJlYW0gPSBTdHJlYW0uUmVhZGFibGUuZnJvbShib2R5LnN0cmVhbSgpKTtcblx0XHR9XG5cblx0XHR0aGlzW0lOVEVSTkFMU10gPSB7XG5cdFx0XHRib2R5LFxuXHRcdFx0c3RyZWFtLFxuXHRcdFx0Ym91bmRhcnksXG5cdFx0XHRkaXN0dXJiZWQ6IGZhbHNlLFxuXHRcdFx0ZXJyb3I6IG51bGxcblx0XHR9O1xuXHRcdHRoaXMuc2l6ZSA9IHNpemU7XG5cblx0XHRpZiAoYm9keSBpbnN0YW5jZW9mIFN0cmVhbSkge1xuXHRcdFx0Ym9keS5vbignZXJyb3InLCBlcnJvcl8gPT4ge1xuXHRcdFx0XHRjb25zdCBlcnJvciA9IGVycm9yXyBpbnN0YW5jZW9mIEZldGNoQmFzZUVycm9yID9cblx0XHRcdFx0XHRlcnJvcl8gOlxuXHRcdFx0XHRcdG5ldyBGZXRjaEVycm9yKGBJbnZhbGlkIHJlc3BvbnNlIGJvZHkgd2hpbGUgdHJ5aW5nIHRvIGZldGNoICR7dGhpcy51cmx9OiAke2Vycm9yXy5tZXNzYWdlfWAsICdzeXN0ZW0nLCBlcnJvcl8pO1xuXHRcdFx0XHR0aGlzW0lOVEVSTkFMU10uZXJyb3IgPSBlcnJvcjtcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG5cdGdldCBib2R5KCkge1xuXHRcdHJldHVybiB0aGlzW0lOVEVSTkFMU10uc3RyZWFtO1xuXHR9XG5cblx0Z2V0IGJvZHlVc2VkKCkge1xuXHRcdHJldHVybiB0aGlzW0lOVEVSTkFMU10uZGlzdHVyYmVkO1xuXHR9XG5cblx0LyoqXG5cdCAqIERlY29kZSByZXNwb25zZSBhcyBBcnJheUJ1ZmZlclxuXHQgKlxuXHQgKiBAcmV0dXJuICBQcm9taXNlXG5cdCAqL1xuXHRhc3luYyBhcnJheUJ1ZmZlcigpIHtcblx0XHRjb25zdCB7YnVmZmVyLCBieXRlT2Zmc2V0LCBieXRlTGVuZ3RofSA9IGF3YWl0IGNvbnN1bWVCb2R5KHRoaXMpO1xuXHRcdHJldHVybiBidWZmZXIuc2xpY2UoYnl0ZU9mZnNldCwgYnl0ZU9mZnNldCArIGJ5dGVMZW5ndGgpO1xuXHR9XG5cblx0YXN5bmMgZm9ybURhdGEoKSB7XG5cdFx0Y29uc3QgY3QgPSB0aGlzLmhlYWRlcnMuZ2V0KCdjb250ZW50LXR5cGUnKTtcblxuXHRcdGlmIChjdC5zdGFydHNXaXRoKCdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnKSkge1xuXHRcdFx0Y29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcblx0XHRcdGNvbnN0IHBhcmFtZXRlcnMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGF3YWl0IHRoaXMudGV4dCgpKTtcblxuXHRcdFx0Zm9yIChjb25zdCBbbmFtZSwgdmFsdWVdIG9mIHBhcmFtZXRlcnMpIHtcblx0XHRcdFx0Zm9ybURhdGEuYXBwZW5kKG5hbWUsIHZhbHVlKTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGZvcm1EYXRhO1xuXHRcdH1cblxuXHRcdGNvbnN0IHt0b0Zvcm1EYXRhfSA9IGF3YWl0IGltcG9ydCgnLi91dGlscy9tdWx0aXBhcnQtcGFyc2VyLmpzJyk7XG5cdFx0cmV0dXJuIHRvRm9ybURhdGEodGhpcy5ib2R5LCBjdCk7XG5cdH1cblxuXHQvKipcblx0ICogUmV0dXJuIHJhdyByZXNwb25zZSBhcyBCbG9iXG5cdCAqXG5cdCAqIEByZXR1cm4gUHJvbWlzZVxuXHQgKi9cblx0YXN5bmMgYmxvYigpIHtcblx0XHRjb25zdCBjdCA9ICh0aGlzLmhlYWRlcnMgJiYgdGhpcy5oZWFkZXJzLmdldCgnY29udGVudC10eXBlJykpIHx8ICh0aGlzW0lOVEVSTkFMU10uYm9keSAmJiB0aGlzW0lOVEVSTkFMU10uYm9keS50eXBlKSB8fCAnJztcblx0XHRjb25zdCBidWYgPSBhd2FpdCB0aGlzLmFycmF5QnVmZmVyKCk7XG5cblx0XHRyZXR1cm4gbmV3IEJsb2IoW2J1Zl0sIHtcblx0XHRcdHR5cGU6IGN0XG5cdFx0fSk7XG5cdH1cblxuXHQvKipcblx0ICogRGVjb2RlIHJlc3BvbnNlIGFzIGpzb25cblx0ICpcblx0ICogQHJldHVybiAgUHJvbWlzZVxuXHQgKi9cblx0YXN5bmMganNvbigpIHtcblx0XHRjb25zdCB0ZXh0ID0gYXdhaXQgdGhpcy50ZXh0KCk7XG5cdFx0cmV0dXJuIEpTT04ucGFyc2UodGV4dCk7XG5cdH1cblxuXHQvKipcblx0ICogRGVjb2RlIHJlc3BvbnNlIGFzIHRleHRcblx0ICpcblx0ICogQHJldHVybiAgUHJvbWlzZVxuXHQgKi9cblx0YXN5bmMgdGV4dCgpIHtcblx0XHRjb25zdCBidWZmZXIgPSBhd2FpdCBjb25zdW1lQm9keSh0aGlzKTtcblx0XHRyZXR1cm4gbmV3IFRleHREZWNvZGVyKCkuZGVjb2RlKGJ1ZmZlcik7XG5cdH1cblxuXHQvKipcblx0ICogRGVjb2RlIHJlc3BvbnNlIGFzIGJ1ZmZlciAobm9uLXNwZWMgYXBpKVxuXHQgKlxuXHQgKiBAcmV0dXJuICBQcm9taXNlXG5cdCAqL1xuXHRidWZmZXIoKSB7XG5cdFx0cmV0dXJuIGNvbnN1bWVCb2R5KHRoaXMpO1xuXHR9XG59XG5cbkJvZHkucHJvdG90eXBlLmJ1ZmZlciA9IGRlcHJlY2F0ZShCb2R5LnByb3RvdHlwZS5idWZmZXIsICdQbGVhc2UgdXNlIFxcJ3Jlc3BvbnNlLmFycmF5QnVmZmVyKClcXCcgaW5zdGVhZCBvZiBcXCdyZXNwb25zZS5idWZmZXIoKVxcJycsICdub2RlLWZldGNoI2J1ZmZlcicpO1xuXG4vLyBJbiBicm93c2VycywgYWxsIHByb3BlcnRpZXMgYXJlIGVudW1lcmFibGUuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhCb2R5LnByb3RvdHlwZSwge1xuXHRib2R5OiB7ZW51bWVyYWJsZTogdHJ1ZX0sXG5cdGJvZHlVc2VkOiB7ZW51bWVyYWJsZTogdHJ1ZX0sXG5cdGFycmF5QnVmZmVyOiB7ZW51bWVyYWJsZTogdHJ1ZX0sXG5cdGJsb2I6IHtlbnVtZXJhYmxlOiB0cnVlfSxcblx0anNvbjoge2VudW1lcmFibGU6IHRydWV9LFxuXHR0ZXh0OiB7ZW51bWVyYWJsZTogdHJ1ZX0sXG5cdGRhdGE6IHtnZXQ6IGRlcHJlY2F0ZSgoKSA9PiB7fSxcblx0XHQnZGF0YSBkb2VzblxcJ3QgZXhpc3QsIHVzZSBqc29uKCksIHRleHQoKSwgYXJyYXlCdWZmZXIoKSwgb3IgYm9keSBpbnN0ZWFkJyxcblx0XHQnaHR0cHM6Ly9naXRodWIuY29tL25vZGUtZmV0Y2gvbm9kZS1mZXRjaC9pc3N1ZXMvMTAwMCAocmVzcG9uc2UpJyl9XG59KTtcblxuLyoqXG4gKiBDb25zdW1lIGFuZCBjb252ZXJ0IGFuIGVudGlyZSBCb2R5IHRvIGEgQnVmZmVyLlxuICpcbiAqIFJlZjogaHR0cHM6Ly9mZXRjaC5zcGVjLndoYXR3Zy5vcmcvI2NvbmNlcHQtYm9keS1jb25zdW1lLWJvZHlcbiAqXG4gKiBAcmV0dXJuIFByb21pc2VcbiAqL1xuYXN5bmMgZnVuY3Rpb24gY29uc3VtZUJvZHkoZGF0YSkge1xuXHRpZiAoZGF0YVtJTlRFUk5BTFNdLmRpc3R1cmJlZCkge1xuXHRcdHRocm93IG5ldyBUeXBlRXJyb3IoYGJvZHkgdXNlZCBhbHJlYWR5IGZvcjogJHtkYXRhLnVybH1gKTtcblx0fVxuXG5cdGRhdGFbSU5URVJOQUxTXS5kaXN0dXJiZWQgPSB0cnVlO1xuXG5cdGlmIChkYXRhW0lOVEVSTkFMU10uZXJyb3IpIHtcblx0XHR0aHJvdyBkYXRhW0lOVEVSTkFMU10uZXJyb3I7XG5cdH1cblxuXHRjb25zdCB7Ym9keX0gPSBkYXRhO1xuXG5cdC8vIEJvZHkgaXMgbnVsbFxuXHRpZiAoYm9keSA9PT0gbnVsbCkge1xuXHRcdHJldHVybiBCdWZmZXIuYWxsb2MoMCk7XG5cdH1cblxuXHQvKiBjOCBpZ25vcmUgbmV4dCAzICovXG5cdGlmICghKGJvZHkgaW5zdGFuY2VvZiBTdHJlYW0pKSB7XG5cdFx0cmV0dXJuIEJ1ZmZlci5hbGxvYygwKTtcblx0fVxuXG5cdC8vIEJvZHkgaXMgc3RyZWFtXG5cdC8vIGdldCByZWFkeSB0byBhY3R1YWxseSBjb25zdW1lIHRoZSBib2R5XG5cdGNvbnN0IGFjY3VtID0gW107XG5cdGxldCBhY2N1bUJ5dGVzID0gMDtcblxuXHR0cnkge1xuXHRcdGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgYm9keSkge1xuXHRcdFx0aWYgKGRhdGEuc2l6ZSA+IDAgJiYgYWNjdW1CeXRlcyArIGNodW5rLmxlbmd0aCA+IGRhdGEuc2l6ZSkge1xuXHRcdFx0XHRjb25zdCBlcnJvciA9IG5ldyBGZXRjaEVycm9yKGBjb250ZW50IHNpemUgYXQgJHtkYXRhLnVybH0gb3ZlciBsaW1pdDogJHtkYXRhLnNpemV9YCwgJ21heC1zaXplJyk7XG5cdFx0XHRcdGJvZHkuZGVzdHJveShlcnJvcik7XG5cdFx0XHRcdHRocm93IGVycm9yO1xuXHRcdFx0fVxuXG5cdFx0XHRhY2N1bUJ5dGVzICs9IGNodW5rLmxlbmd0aDtcblx0XHRcdGFjY3VtLnB1c2goY2h1bmspO1xuXHRcdH1cblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRjb25zdCBlcnJvcl8gPSBlcnJvciBpbnN0YW5jZW9mIEZldGNoQmFzZUVycm9yID8gZXJyb3IgOiBuZXcgRmV0Y2hFcnJvcihgSW52YWxpZCByZXNwb25zZSBib2R5IHdoaWxlIHRyeWluZyB0byBmZXRjaCAke2RhdGEudXJsfTogJHtlcnJvci5tZXNzYWdlfWAsICdzeXN0ZW0nLCBlcnJvcik7XG5cdFx0dGhyb3cgZXJyb3JfO1xuXHR9XG5cblx0aWYgKGJvZHkucmVhZGFibGVFbmRlZCA9PT0gdHJ1ZSB8fCBib2R5Ll9yZWFkYWJsZVN0YXRlLmVuZGVkID09PSB0cnVlKSB7XG5cdFx0dHJ5IHtcblx0XHRcdGlmIChhY2N1bS5ldmVyeShjID0+IHR5cGVvZiBjID09PSAnc3RyaW5nJykpIHtcblx0XHRcdFx0cmV0dXJuIEJ1ZmZlci5mcm9tKGFjY3VtLmpvaW4oJycpKTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIEJ1ZmZlci5jb25jYXQoYWNjdW0sIGFjY3VtQnl0ZXMpO1xuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHR0aHJvdyBuZXcgRmV0Y2hFcnJvcihgQ291bGQgbm90IGNyZWF0ZSBCdWZmZXIgZnJvbSByZXNwb25zZSBib2R5IGZvciAke2RhdGEudXJsfTogJHtlcnJvci5tZXNzYWdlfWAsICdzeXN0ZW0nLCBlcnJvcik7XG5cdFx0fVxuXHR9IGVsc2Uge1xuXHRcdHRocm93IG5ldyBGZXRjaEVycm9yKGBQcmVtYXR1cmUgY2xvc2Ugb2Ygc2VydmVyIHJlc3BvbnNlIHdoaWxlIHRyeWluZyB0byBmZXRjaCAke2RhdGEudXJsfWApO1xuXHR9XG59XG5cbi8qKlxuICogQ2xvbmUgYm9keSBnaXZlbiBSZXMvUmVxIGluc3RhbmNlXG4gKlxuICogQHBhcmFtICAgTWl4ZWQgICBpbnN0YW5jZSAgICAgICBSZXNwb25zZSBvciBSZXF1ZXN0IGluc3RhbmNlXG4gKiBAcGFyYW0gICBTdHJpbmcgIGhpZ2hXYXRlck1hcmsgIGhpZ2hXYXRlck1hcmsgZm9yIGJvdGggUGFzc1Rocm91Z2ggYm9keSBzdHJlYW1zXG4gKiBAcmV0dXJuICBNaXhlZFxuICovXG5leHBvcnQgY29uc3QgY2xvbmUgPSAoaW5zdGFuY2UsIGhpZ2hXYXRlck1hcmspID0+IHtcblx0bGV0IHAxO1xuXHRsZXQgcDI7XG5cdGxldCB7Ym9keX0gPSBpbnN0YW5jZVtJTlRFUk5BTFNdO1xuXG5cdC8vIERvbid0IGFsbG93IGNsb25pbmcgYSB1c2VkIGJvZHlcblx0aWYgKGluc3RhbmNlLmJvZHlVc2VkKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKCdjYW5ub3QgY2xvbmUgYm9keSBhZnRlciBpdCBpcyB1c2VkJyk7XG5cdH1cblxuXHQvLyBDaGVjayB0aGF0IGJvZHkgaXMgYSBzdHJlYW0gYW5kIG5vdCBmb3JtLWRhdGEgb2JqZWN0XG5cdC8vIG5vdGU6IHdlIGNhbid0IGNsb25lIHRoZSBmb3JtLWRhdGEgb2JqZWN0IHdpdGhvdXQgaGF2aW5nIGl0IGFzIGEgZGVwZW5kZW5jeVxuXHRpZiAoKGJvZHkgaW5zdGFuY2VvZiBTdHJlYW0pICYmICh0eXBlb2YgYm9keS5nZXRCb3VuZGFyeSAhPT0gJ2Z1bmN0aW9uJykpIHtcblx0XHQvLyBUZWUgaW5zdGFuY2UgYm9keVxuXHRcdHAxID0gbmV3IFBhc3NUaHJvdWdoKHtoaWdoV2F0ZXJNYXJrfSk7XG5cdFx0cDIgPSBuZXcgUGFzc1Rocm91Z2goe2hpZ2hXYXRlck1hcmt9KTtcblx0XHRib2R5LnBpcGUocDEpO1xuXHRcdGJvZHkucGlwZShwMik7XG5cdFx0Ly8gU2V0IGluc3RhbmNlIGJvZHkgdG8gdGVlZCBib2R5IGFuZCByZXR1cm4gdGhlIG90aGVyIHRlZWQgYm9keVxuXHRcdGluc3RhbmNlW0lOVEVSTkFMU10uc3RyZWFtID0gcDE7XG5cdFx0Ym9keSA9IHAyO1xuXHR9XG5cblx0cmV0dXJuIGJvZHk7XG59O1xuXG5jb25zdCBnZXROb25TcGVjRm9ybURhdGFCb3VuZGFyeSA9IGRlcHJlY2F0ZShcblx0Ym9keSA9PiBib2R5LmdldEJvdW5kYXJ5KCksXG5cdCdmb3JtLWRhdGEgZG9lc25cXCd0IGZvbGxvdyB0aGUgc3BlYyBhbmQgcmVxdWlyZXMgc3BlY2lhbCB0cmVhdG1lbnQuIFVzZSBhbHRlcm5hdGl2ZSBwYWNrYWdlJyxcblx0J2h0dHBzOi8vZ2l0aHViLmNvbS9ub2RlLWZldGNoL25vZGUtZmV0Y2gvaXNzdWVzLzExNjcnXG4pO1xuXG4vKipcbiAqIFBlcmZvcm1zIHRoZSBvcGVyYXRpb24gXCJleHRyYWN0IGEgYENvbnRlbnQtVHlwZWAgdmFsdWUgZnJvbSB8b2JqZWN0fFwiIGFzXG4gKiBzcGVjaWZpZWQgaW4gdGhlIHNwZWNpZmljYXRpb246XG4gKiBodHRwczovL2ZldGNoLnNwZWMud2hhdHdnLm9yZy8jY29uY2VwdC1ib2R5aW5pdC1leHRyYWN0XG4gKlxuICogVGhpcyBmdW5jdGlvbiBhc3N1bWVzIHRoYXQgaW5zdGFuY2UuYm9keSBpcyBwcmVzZW50LlxuICpcbiAqIEBwYXJhbSB7YW55fSBib2R5IEFueSBvcHRpb25zLmJvZHkgaW5wdXRcbiAqIEByZXR1cm5zIHtzdHJpbmcgfCBudWxsfVxuICovXG5leHBvcnQgY29uc3QgZXh0cmFjdENvbnRlbnRUeXBlID0gKGJvZHksIHJlcXVlc3QpID0+IHtcblx0Ly8gQm9keSBpcyBudWxsIG9yIHVuZGVmaW5lZFxuXHRpZiAoYm9keSA9PT0gbnVsbCkge1xuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cblx0Ly8gQm9keSBpcyBzdHJpbmdcblx0aWYgKHR5cGVvZiBib2R5ID09PSAnc3RyaW5nJykge1xuXHRcdHJldHVybiAndGV4dC9wbGFpbjtjaGFyc2V0PVVURi04Jztcblx0fVxuXG5cdC8vIEJvZHkgaXMgYSBVUkxTZWFyY2hQYXJhbXNcblx0aWYgKGlzVVJMU2VhcmNoUGFyYW1ldGVycyhib2R5KSkge1xuXHRcdHJldHVybiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9VVRGLTgnO1xuXHR9XG5cblx0Ly8gQm9keSBpcyBibG9iXG5cdGlmIChpc0Jsb2IoYm9keSkpIHtcblx0XHRyZXR1cm4gYm9keS50eXBlIHx8IG51bGw7XG5cdH1cblxuXHQvLyBCb2R5IGlzIGEgQnVmZmVyIChCdWZmZXIsIEFycmF5QnVmZmVyIG9yIEFycmF5QnVmZmVyVmlldylcblx0aWYgKEJ1ZmZlci5pc0J1ZmZlcihib2R5KSB8fCB0eXBlcy5pc0FueUFycmF5QnVmZmVyKGJvZHkpIHx8IEFycmF5QnVmZmVyLmlzVmlldyhib2R5KSkge1xuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cblx0aWYgKGJvZHkgaW5zdGFuY2VvZiBGb3JtRGF0YSkge1xuXHRcdHJldHVybiBgbXVsdGlwYXJ0L2Zvcm0tZGF0YTsgYm91bmRhcnk9JHtyZXF1ZXN0W0lOVEVSTkFMU10uYm91bmRhcnl9YDtcblx0fVxuXG5cdC8vIERldGVjdCBmb3JtIGRhdGEgaW5wdXQgZnJvbSBmb3JtLWRhdGEgbW9kdWxlXG5cdGlmIChib2R5ICYmIHR5cGVvZiBib2R5LmdldEJvdW5kYXJ5ID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0cmV0dXJuIGBtdWx0aXBhcnQvZm9ybS1kYXRhO2JvdW5kYXJ5PSR7Z2V0Tm9uU3BlY0Zvcm1EYXRhQm91bmRhcnkoYm9keSl9YDtcblx0fVxuXG5cdC8vIEJvZHkgaXMgc3RyZWFtIC0gY2FuJ3QgcmVhbGx5IGRvIG11Y2ggYWJvdXQgdGhpc1xuXHRpZiAoYm9keSBpbnN0YW5jZW9mIFN0cmVhbSkge1xuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cblx0Ly8gQm9keSBjb25zdHJ1Y3RvciBkZWZhdWx0cyBvdGhlciB0aGluZ3MgdG8gc3RyaW5nXG5cdHJldHVybiAndGV4dC9wbGFpbjtjaGFyc2V0PVVURi04Jztcbn07XG5cbi8qKlxuICogVGhlIEZldGNoIFN0YW5kYXJkIHRyZWF0cyB0aGlzIGFzIGlmIFwidG90YWwgYnl0ZXNcIiBpcyBhIHByb3BlcnR5IG9uIHRoZSBib2R5LlxuICogRm9yIHVzLCB3ZSBoYXZlIHRvIGV4cGxpY2l0bHkgZ2V0IGl0IHdpdGggYSBmdW5jdGlvbi5cbiAqXG4gKiByZWY6IGh0dHBzOi8vZmV0Y2guc3BlYy53aGF0d2cub3JnLyNjb25jZXB0LWJvZHktdG90YWwtYnl0ZXNcbiAqXG4gKiBAcGFyYW0ge2FueX0gb2JqLmJvZHkgQm9keSBvYmplY3QgZnJvbSB0aGUgQm9keSBpbnN0YW5jZS5cbiAqIEByZXR1cm5zIHtudW1iZXIgfCBudWxsfVxuICovXG5leHBvcnQgY29uc3QgZ2V0VG90YWxCeXRlcyA9IHJlcXVlc3QgPT4ge1xuXHRjb25zdCB7Ym9keX0gPSByZXF1ZXN0W0lOVEVSTkFMU107XG5cblx0Ly8gQm9keSBpcyBudWxsIG9yIHVuZGVmaW5lZFxuXHRpZiAoYm9keSA9PT0gbnVsbCkge1xuXHRcdHJldHVybiAwO1xuXHR9XG5cblx0Ly8gQm9keSBpcyBCbG9iXG5cdGlmIChpc0Jsb2IoYm9keSkpIHtcblx0XHRyZXR1cm4gYm9keS5zaXplO1xuXHR9XG5cblx0Ly8gQm9keSBpcyBCdWZmZXJcblx0aWYgKEJ1ZmZlci5pc0J1ZmZlcihib2R5KSkge1xuXHRcdHJldHVybiBib2R5Lmxlbmd0aDtcblx0fVxuXG5cdC8vIERldGVjdCBmb3JtIGRhdGEgaW5wdXQgZnJvbSBmb3JtLWRhdGEgbW9kdWxlXG5cdGlmIChib2R5ICYmIHR5cGVvZiBib2R5LmdldExlbmd0aFN5bmMgPT09ICdmdW5jdGlvbicpIHtcblx0XHRyZXR1cm4gYm9keS5oYXNLbm93bkxlbmd0aCAmJiBib2R5Lmhhc0tub3duTGVuZ3RoKCkgPyBib2R5LmdldExlbmd0aFN5bmMoKSA6IG51bGw7XG5cdH1cblxuXHQvLyBCb2R5IGlzIHN0cmVhbVxuXHRyZXR1cm4gbnVsbDtcbn07XG5cbi8qKlxuICogV3JpdGUgYSBCb2R5IHRvIGEgTm9kZS5qcyBXcml0YWJsZVN0cmVhbSAoZS5nLiBodHRwLlJlcXVlc3QpIG9iamVjdC5cbiAqXG4gKiBAcGFyYW0ge1N0cmVhbS5Xcml0YWJsZX0gZGVzdCBUaGUgc3RyZWFtIHRvIHdyaXRlIHRvLlxuICogQHBhcmFtIG9iai5ib2R5IEJvZHkgb2JqZWN0IGZyb20gdGhlIEJvZHkgaW5zdGFuY2UuXG4gKiBAcmV0dXJucyB7UHJvbWlzZTx2b2lkPn1cbiAqL1xuZXhwb3J0IGNvbnN0IHdyaXRlVG9TdHJlYW0gPSBhc3luYyAoZGVzdCwge2JvZHl9KSA9PiB7XG5cdGlmIChib2R5ID09PSBudWxsKSB7XG5cdFx0Ly8gQm9keSBpcyBudWxsXG5cdFx0ZGVzdC5lbmQoKTtcblx0fSBlbHNlIHtcblx0XHQvLyBCb2R5IGlzIHN0cmVhbVxuXHRcdGF3YWl0IHBpcGVsaW5lKGJvZHksIGRlc3QpO1xuXHR9XG59O1xuIiwgImV4cG9ydCBjbGFzcyBGZXRjaEJhc2VFcnJvciBleHRlbmRzIEVycm9yIHtcblx0Y29uc3RydWN0b3IobWVzc2FnZSwgdHlwZSkge1xuXHRcdHN1cGVyKG1lc3NhZ2UpO1xuXHRcdC8vIEhpZGUgY3VzdG9tIGVycm9yIGltcGxlbWVudGF0aW9uIGRldGFpbHMgZnJvbSBlbmQtdXNlcnNcblx0XHRFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCB0aGlzLmNvbnN0cnVjdG9yKTtcblxuXHRcdHRoaXMudHlwZSA9IHR5cGU7XG5cdH1cblxuXHRnZXQgbmFtZSgpIHtcblx0XHRyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lO1xuXHR9XG5cblx0Z2V0IFtTeW1ib2wudG9TdHJpbmdUYWddKCkge1xuXHRcdHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLm5hbWU7XG5cdH1cbn1cbiIsICJcbmltcG9ydCB7RmV0Y2hCYXNlRXJyb3J9IGZyb20gJy4vYmFzZS5qcyc7XG5cbi8qKlxuICogQHR5cGVkZWYge3sgYWRkcmVzcz86IHN0cmluZywgY29kZTogc3RyaW5nLCBkZXN0Pzogc3RyaW5nLCBlcnJubzogbnVtYmVyLCBpbmZvPzogb2JqZWN0LCBtZXNzYWdlOiBzdHJpbmcsIHBhdGg/OiBzdHJpbmcsIHBvcnQ/OiBudW1iZXIsIHN5c2NhbGw6IHN0cmluZ319IFN5c3RlbUVycm9yXG4qL1xuXG4vKipcbiAqIEZldGNoRXJyb3IgaW50ZXJmYWNlIGZvciBvcGVyYXRpb25hbCBlcnJvcnNcbiAqL1xuZXhwb3J0IGNsYXNzIEZldGNoRXJyb3IgZXh0ZW5kcyBGZXRjaEJhc2VFcnJvciB7XG5cdC8qKlxuXHQgKiBAcGFyYW0gIHtzdHJpbmd9IG1lc3NhZ2UgLSAgICAgIEVycm9yIG1lc3NhZ2UgZm9yIGh1bWFuXG5cdCAqIEBwYXJhbSAge3N0cmluZ30gW3R5cGVdIC0gICAgICAgIEVycm9yIHR5cGUgZm9yIG1hY2hpbmVcblx0ICogQHBhcmFtICB7U3lzdGVtRXJyb3J9IFtzeXN0ZW1FcnJvcl0gLSBGb3IgTm9kZS5qcyBzeXN0ZW0gZXJyb3Jcblx0ICovXG5cdGNvbnN0cnVjdG9yKG1lc3NhZ2UsIHR5cGUsIHN5c3RlbUVycm9yKSB7XG5cdFx0c3VwZXIobWVzc2FnZSwgdHlwZSk7XG5cdFx0Ly8gV2hlbiBlcnIudHlwZSBpcyBgc3lzdGVtYCwgZXJyLmVycm9yZWRTeXNDYWxsIGNvbnRhaW5zIHN5c3RlbSBlcnJvciBhbmQgZXJyLmNvZGUgY29udGFpbnMgc3lzdGVtIGVycm9yIGNvZGVcblx0XHRpZiAoc3lzdGVtRXJyb3IpIHtcblx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1tdWx0aS1hc3NpZ25cblx0XHRcdHRoaXMuY29kZSA9IHRoaXMuZXJybm8gPSBzeXN0ZW1FcnJvci5jb2RlO1xuXHRcdFx0dGhpcy5lcnJvcmVkU3lzQ2FsbCA9IHN5c3RlbUVycm9yLnN5c2NhbGw7XG5cdFx0fVxuXHR9XG59XG4iLCAiLyoqXG4gKiBJcy5qc1xuICpcbiAqIE9iamVjdCB0eXBlIGNoZWNrcy5cbiAqL1xuXG5jb25zdCBOQU1FID0gU3ltYm9sLnRvU3RyaW5nVGFnO1xuXG4vKipcbiAqIENoZWNrIGlmIGBvYmpgIGlzIGEgVVJMU2VhcmNoUGFyYW1zIG9iamVjdFxuICogcmVmOiBodHRwczovL2dpdGh1Yi5jb20vbm9kZS1mZXRjaC9ub2RlLWZldGNoL2lzc3Vlcy8yOTYjaXNzdWVjb21tZW50LTMwNzU5ODE0M1xuICogQHBhcmFtIHsqfSBvYmplY3QgLSBPYmplY3QgdG8gY2hlY2sgZm9yXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgY29uc3QgaXNVUkxTZWFyY2hQYXJhbWV0ZXJzID0gb2JqZWN0ID0+IHtcblx0cmV0dXJuIChcblx0XHR0eXBlb2Ygb2JqZWN0ID09PSAnb2JqZWN0JyAmJlxuXHRcdHR5cGVvZiBvYmplY3QuYXBwZW5kID09PSAnZnVuY3Rpb24nICYmXG5cdFx0dHlwZW9mIG9iamVjdC5kZWxldGUgPT09ICdmdW5jdGlvbicgJiZcblx0XHR0eXBlb2Ygb2JqZWN0LmdldCA9PT0gJ2Z1bmN0aW9uJyAmJlxuXHRcdHR5cGVvZiBvYmplY3QuZ2V0QWxsID09PSAnZnVuY3Rpb24nICYmXG5cdFx0dHlwZW9mIG9iamVjdC5oYXMgPT09ICdmdW5jdGlvbicgJiZcblx0XHR0eXBlb2Ygb2JqZWN0LnNldCA9PT0gJ2Z1bmN0aW9uJyAmJlxuXHRcdHR5cGVvZiBvYmplY3Quc29ydCA9PT0gJ2Z1bmN0aW9uJyAmJlxuXHRcdG9iamVjdFtOQU1FXSA9PT0gJ1VSTFNlYXJjaFBhcmFtcydcblx0KTtcbn07XG5cbi8qKlxuICogQ2hlY2sgaWYgYG9iamVjdGAgaXMgYSBXM0MgYEJsb2JgIG9iamVjdCAod2hpY2ggYEZpbGVgIGluaGVyaXRzIGZyb20pXG4gKiBAcGFyYW0geyp9IG9iamVjdCAtIE9iamVjdCB0byBjaGVjayBmb3JcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBjb25zdCBpc0Jsb2IgPSBvYmplY3QgPT4ge1xuXHRyZXR1cm4gKFxuXHRcdG9iamVjdCAmJlxuXHRcdHR5cGVvZiBvYmplY3QgPT09ICdvYmplY3QnICYmXG5cdFx0dHlwZW9mIG9iamVjdC5hcnJheUJ1ZmZlciA9PT0gJ2Z1bmN0aW9uJyAmJlxuXHRcdHR5cGVvZiBvYmplY3QudHlwZSA9PT0gJ3N0cmluZycgJiZcblx0XHR0eXBlb2Ygb2JqZWN0LnN0cmVhbSA9PT0gJ2Z1bmN0aW9uJyAmJlxuXHRcdHR5cGVvZiBvYmplY3QuY29uc3RydWN0b3IgPT09ICdmdW5jdGlvbicgJiZcblx0XHQvXihCbG9ifEZpbGUpJC8udGVzdChvYmplY3RbTkFNRV0pXG5cdCk7XG59O1xuXG4vKipcbiAqIENoZWNrIGlmIGBvYmpgIGlzIGFuIGluc3RhbmNlIG9mIEFib3J0U2lnbmFsLlxuICogQHBhcmFtIHsqfSBvYmplY3QgLSBPYmplY3QgdG8gY2hlY2sgZm9yXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgY29uc3QgaXNBYm9ydFNpZ25hbCA9IG9iamVjdCA9PiB7XG5cdHJldHVybiAoXG5cdFx0dHlwZW9mIG9iamVjdCA9PT0gJ29iamVjdCcgJiYgKFxuXHRcdFx0b2JqZWN0W05BTUVdID09PSAnQWJvcnRTaWduYWwnIHx8XG5cdFx0XHRvYmplY3RbTkFNRV0gPT09ICdFdmVudFRhcmdldCdcblx0XHQpXG5cdCk7XG59O1xuXG4vKipcbiAqIGlzRG9tYWluT3JTdWJkb21haW4gcmVwb3J0cyB3aGV0aGVyIHN1YiBpcyBhIHN1YmRvbWFpbiAob3IgZXhhY3QgbWF0Y2gpIG9mXG4gKiB0aGUgcGFyZW50IGRvbWFpbi5cbiAqXG4gKiBCb3RoIGRvbWFpbnMgbXVzdCBhbHJlYWR5IGJlIGluIGNhbm9uaWNhbCBmb3JtLlxuICogQHBhcmFtIHtzdHJpbmd8VVJMfSBvcmlnaW5hbFxuICogQHBhcmFtIHtzdHJpbmd8VVJMfSBkZXN0aW5hdGlvblxuICovXG5leHBvcnQgY29uc3QgaXNEb21haW5PclN1YmRvbWFpbiA9IChkZXN0aW5hdGlvbiwgb3JpZ2luYWwpID0+IHtcblx0Y29uc3Qgb3JpZyA9IG5ldyBVUkwob3JpZ2luYWwpLmhvc3RuYW1lO1xuXHRjb25zdCBkZXN0ID0gbmV3IFVSTChkZXN0aW5hdGlvbikuaG9zdG5hbWU7XG5cblx0cmV0dXJuIG9yaWcgPT09IGRlc3QgfHwgb3JpZy5lbmRzV2l0aChgLiR7ZGVzdH1gKTtcbn07XG5cbi8qKlxuICogaXNTYW1lUHJvdG9jb2wgcmVwb3J0cyB3aGV0aGVyIHRoZSB0d28gcHJvdmlkZWQgVVJMcyB1c2UgdGhlIHNhbWUgcHJvdG9jb2wuXG4gKlxuICogQm90aCBkb21haW5zIG11c3QgYWxyZWFkeSBiZSBpbiBjYW5vbmljYWwgZm9ybS5cbiAqIEBwYXJhbSB7c3RyaW5nfFVSTH0gb3JpZ2luYWxcbiAqIEBwYXJhbSB7c3RyaW5nfFVSTH0gZGVzdGluYXRpb25cbiAqL1xuZXhwb3J0IGNvbnN0IGlzU2FtZVByb3RvY29sID0gKGRlc3RpbmF0aW9uLCBvcmlnaW5hbCkgPT4ge1xuXHRjb25zdCBvcmlnID0gbmV3IFVSTChvcmlnaW5hbCkucHJvdG9jb2w7XG5cdGNvbnN0IGRlc3QgPSBuZXcgVVJMKGRlc3RpbmF0aW9uKS5wcm90b2NvbDtcblxuXHRyZXR1cm4gb3JpZyA9PT0gZGVzdDtcbn07XG4iLCAiLyoqXG4gKiBIZWFkZXJzLmpzXG4gKlxuICogSGVhZGVycyBjbGFzcyBvZmZlcnMgY29udmVuaWVudCBoZWxwZXJzXG4gKi9cblxuaW1wb3J0IHt0eXBlc30gZnJvbSAnbm9kZTp1dGlsJztcbmltcG9ydCBodHRwIGZyb20gJ25vZGU6aHR0cCc7XG5cbi8qIGM4IGlnbm9yZSBuZXh0IDkgKi9cbmNvbnN0IHZhbGlkYXRlSGVhZGVyTmFtZSA9IHR5cGVvZiBodHRwLnZhbGlkYXRlSGVhZGVyTmFtZSA9PT0gJ2Z1bmN0aW9uJyA/XG5cdGh0dHAudmFsaWRhdGVIZWFkZXJOYW1lIDpcblx0bmFtZSA9PiB7XG5cdFx0aWYgKCEvXltcXF5gXFwtXFx3ISMkJSYnKisufH5dKyQvLnRlc3QobmFtZSkpIHtcblx0XHRcdGNvbnN0IGVycm9yID0gbmV3IFR5cGVFcnJvcihgSGVhZGVyIG5hbWUgbXVzdCBiZSBhIHZhbGlkIEhUVFAgdG9rZW4gWyR7bmFtZX1dYCk7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXJyb3IsICdjb2RlJywge3ZhbHVlOiAnRVJSX0lOVkFMSURfSFRUUF9UT0tFTid9KTtcblx0XHRcdHRocm93IGVycm9yO1xuXHRcdH1cblx0fTtcblxuLyogYzggaWdub3JlIG5leHQgOSAqL1xuY29uc3QgdmFsaWRhdGVIZWFkZXJWYWx1ZSA9IHR5cGVvZiBodHRwLnZhbGlkYXRlSGVhZGVyVmFsdWUgPT09ICdmdW5jdGlvbicgP1xuXHRodHRwLnZhbGlkYXRlSGVhZGVyVmFsdWUgOlxuXHQobmFtZSwgdmFsdWUpID0+IHtcblx0XHRpZiAoL1teXFx0XFx1MDAyMC1cXHUwMDdFXFx1MDA4MC1cXHUwMEZGXS8udGVzdCh2YWx1ZSkpIHtcblx0XHRcdGNvbnN0IGVycm9yID0gbmV3IFR5cGVFcnJvcihgSW52YWxpZCBjaGFyYWN0ZXIgaW4gaGVhZGVyIGNvbnRlbnQgW1wiJHtuYW1lfVwiXWApO1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGVycm9yLCAnY29kZScsIHt2YWx1ZTogJ0VSUl9JTlZBTElEX0NIQVInfSk7XG5cdFx0XHR0aHJvdyBlcnJvcjtcblx0XHR9XG5cdH07XG5cbi8qKlxuICogQHR5cGVkZWYge0hlYWRlcnMgfCBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+IHwgSXRlcmFibGU8cmVhZG9ubHkgW3N0cmluZywgc3RyaW5nXT4gfCBJdGVyYWJsZTxJdGVyYWJsZTxzdHJpbmc+Pn0gSGVhZGVyc0luaXRcbiAqL1xuXG4vKipcbiAqIFRoaXMgRmV0Y2ggQVBJIGludGVyZmFjZSBhbGxvd3MgeW91IHRvIHBlcmZvcm0gdmFyaW91cyBhY3Rpb25zIG9uIEhUVFAgcmVxdWVzdCBhbmQgcmVzcG9uc2UgaGVhZGVycy5cbiAqIFRoZXNlIGFjdGlvbnMgaW5jbHVkZSByZXRyaWV2aW5nLCBzZXR0aW5nLCBhZGRpbmcgdG8sIGFuZCByZW1vdmluZy5cbiAqIEEgSGVhZGVycyBvYmplY3QgaGFzIGFuIGFzc29jaWF0ZWQgaGVhZGVyIGxpc3QsIHdoaWNoIGlzIGluaXRpYWxseSBlbXB0eSBhbmQgY29uc2lzdHMgb2YgemVybyBvciBtb3JlIG5hbWUgYW5kIHZhbHVlIHBhaXJzLlxuICogWW91IGNhbiBhZGQgdG8gdGhpcyB1c2luZyBtZXRob2RzIGxpa2UgYXBwZW5kKCkgKHNlZSBFeGFtcGxlcy4pXG4gKiBJbiBhbGwgbWV0aG9kcyBvZiB0aGlzIGludGVyZmFjZSwgaGVhZGVyIG5hbWVzIGFyZSBtYXRjaGVkIGJ5IGNhc2UtaW5zZW5zaXRpdmUgYnl0ZSBzZXF1ZW5jZS5cbiAqXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEhlYWRlcnMgZXh0ZW5kcyBVUkxTZWFyY2hQYXJhbXMge1xuXHQvKipcblx0ICogSGVhZGVycyBjbGFzc1xuXHQgKlxuXHQgKiBAY29uc3RydWN0b3Jcblx0ICogQHBhcmFtIHtIZWFkZXJzSW5pdH0gW2luaXRdIC0gUmVzcG9uc2UgaGVhZGVyc1xuXHQgKi9cblx0Y29uc3RydWN0b3IoaW5pdCkge1xuXHRcdC8vIFZhbGlkYXRlIGFuZCBub3JtYWxpemUgaW5pdCBvYmplY3QgaW4gW25hbWUsIHZhbHVlKHMpXVtdXG5cdFx0LyoqIEB0eXBlIHtzdHJpbmdbXVtdfSAqL1xuXHRcdGxldCByZXN1bHQgPSBbXTtcblx0XHRpZiAoaW5pdCBpbnN0YW5jZW9mIEhlYWRlcnMpIHtcblx0XHRcdGNvbnN0IHJhdyA9IGluaXQucmF3KCk7XG5cdFx0XHRmb3IgKGNvbnN0IFtuYW1lLCB2YWx1ZXNdIG9mIE9iamVjdC5lbnRyaWVzKHJhdykpIHtcblx0XHRcdFx0cmVzdWx0LnB1c2goLi4udmFsdWVzLm1hcCh2YWx1ZSA9PiBbbmFtZSwgdmFsdWVdKSk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIGlmIChpbml0ID09IG51bGwpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1lcS1udWxsLCBlcWVxZXFcblx0XHRcdC8vIE5vIG9wXG5cdFx0fSBlbHNlIGlmICh0eXBlb2YgaW5pdCA9PT0gJ29iamVjdCcgJiYgIXR5cGVzLmlzQm94ZWRQcmltaXRpdmUoaW5pdCkpIHtcblx0XHRcdGNvbnN0IG1ldGhvZCA9IGluaXRbU3ltYm9sLml0ZXJhdG9yXTtcblx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1lcS1udWxsLCBlcWVxZXFcblx0XHRcdGlmIChtZXRob2QgPT0gbnVsbCkge1xuXHRcdFx0XHQvLyBSZWNvcmQ8Qnl0ZVN0cmluZywgQnl0ZVN0cmluZz5cblx0XHRcdFx0cmVzdWx0LnB1c2goLi4uT2JqZWN0LmVudHJpZXMoaW5pdCkpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aWYgKHR5cGVvZiBtZXRob2QgIT09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdIZWFkZXIgcGFpcnMgbXVzdCBiZSBpdGVyYWJsZScpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gU2VxdWVuY2U8c2VxdWVuY2U8Qnl0ZVN0cmluZz4+XG5cdFx0XHRcdC8vIE5vdGU6IHBlciBzcGVjIHdlIGhhdmUgdG8gZmlyc3QgZXhoYXVzdCB0aGUgbGlzdHMgdGhlbiBwcm9jZXNzIHRoZW1cblx0XHRcdFx0cmVzdWx0ID0gWy4uLmluaXRdXG5cdFx0XHRcdFx0Lm1hcChwYWlyID0+IHtcblx0XHRcdFx0XHRcdGlmIChcblx0XHRcdFx0XHRcdFx0dHlwZW9mIHBhaXIgIT09ICdvYmplY3QnIHx8IHR5cGVzLmlzQm94ZWRQcmltaXRpdmUocGFpcilcblx0XHRcdFx0XHRcdCkge1xuXHRcdFx0XHRcdFx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdFYWNoIGhlYWRlciBwYWlyIG11c3QgYmUgYW4gaXRlcmFibGUgb2JqZWN0Jyk7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHJldHVybiBbLi4ucGFpcl07XG5cdFx0XHRcdFx0fSkubWFwKHBhaXIgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKHBhaXIubGVuZ3RoICE9PSAyKSB7XG5cdFx0XHRcdFx0XHRcdHRocm93IG5ldyBUeXBlRXJyb3IoJ0VhY2ggaGVhZGVyIHBhaXIgbXVzdCBiZSBhIG5hbWUvdmFsdWUgdHVwbGUnKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0cmV0dXJuIFsuLi5wYWlyXTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhyb3cgbmV3IFR5cGVFcnJvcignRmFpbGVkIHRvIGNvbnN0cnVjdCBcXCdIZWFkZXJzXFwnOiBUaGUgcHJvdmlkZWQgdmFsdWUgaXMgbm90IG9mIHR5cGUgXFwnKHNlcXVlbmNlPHNlcXVlbmNlPEJ5dGVTdHJpbmc+PiBvciByZWNvcmQ8Qnl0ZVN0cmluZywgQnl0ZVN0cmluZz4pJyk7XG5cdFx0fVxuXG5cdFx0Ly8gVmFsaWRhdGUgYW5kIGxvd2VyY2FzZVxuXHRcdHJlc3VsdCA9XG5cdFx0XHRyZXN1bHQubGVuZ3RoID4gMCA/XG5cdFx0XHRcdHJlc3VsdC5tYXAoKFtuYW1lLCB2YWx1ZV0pID0+IHtcblx0XHRcdFx0XHR2YWxpZGF0ZUhlYWRlck5hbWUobmFtZSk7XG5cdFx0XHRcdFx0dmFsaWRhdGVIZWFkZXJWYWx1ZShuYW1lLCBTdHJpbmcodmFsdWUpKTtcblx0XHRcdFx0XHRyZXR1cm4gW1N0cmluZyhuYW1lKS50b0xvd2VyQ2FzZSgpLCBTdHJpbmcodmFsdWUpXTtcblx0XHRcdFx0fSkgOlxuXHRcdFx0XHR1bmRlZmluZWQ7XG5cblx0XHRzdXBlcihyZXN1bHQpO1xuXG5cdFx0Ly8gUmV0dXJuaW5nIGEgUHJveHkgdGhhdCB3aWxsIGxvd2VyY2FzZSBrZXkgbmFtZXMsIHZhbGlkYXRlIHBhcmFtZXRlcnMgYW5kIHNvcnQga2V5c1xuXHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zdHJ1Y3Rvci1yZXR1cm5cblx0XHRyZXR1cm4gbmV3IFByb3h5KHRoaXMsIHtcblx0XHRcdGdldCh0YXJnZXQsIHAsIHJlY2VpdmVyKSB7XG5cdFx0XHRcdHN3aXRjaCAocCkge1xuXHRcdFx0XHRcdGNhc2UgJ2FwcGVuZCc6XG5cdFx0XHRcdFx0Y2FzZSAnc2V0Jzpcblx0XHRcdFx0XHRcdHJldHVybiAobmFtZSwgdmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0dmFsaWRhdGVIZWFkZXJOYW1lKG5hbWUpO1xuXHRcdFx0XHRcdFx0XHR2YWxpZGF0ZUhlYWRlclZhbHVlKG5hbWUsIFN0cmluZyh2YWx1ZSkpO1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZVtwXS5jYWxsKFxuXHRcdFx0XHRcdFx0XHRcdHRhcmdldCxcblx0XHRcdFx0XHRcdFx0XHRTdHJpbmcobmFtZSkudG9Mb3dlckNhc2UoKSxcblx0XHRcdFx0XHRcdFx0XHRTdHJpbmcodmFsdWUpXG5cdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0Y2FzZSAnZGVsZXRlJzpcblx0XHRcdFx0XHRjYXNlICdoYXMnOlxuXHRcdFx0XHRcdGNhc2UgJ2dldEFsbCc6XG5cdFx0XHRcdFx0XHRyZXR1cm4gbmFtZSA9PiB7XG5cdFx0XHRcdFx0XHRcdHZhbGlkYXRlSGVhZGVyTmFtZShuYW1lKTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIFVSTFNlYXJjaFBhcmFtcy5wcm90b3R5cGVbcF0uY2FsbChcblx0XHRcdFx0XHRcdFx0XHR0YXJnZXQsXG5cdFx0XHRcdFx0XHRcdFx0U3RyaW5nKG5hbWUpLnRvTG93ZXJDYXNlKClcblx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdH07XG5cblx0XHRcdFx0XHRjYXNlICdrZXlzJzpcblx0XHRcdFx0XHRcdHJldHVybiAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRhcmdldC5zb3J0KCk7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBuZXcgU2V0KFVSTFNlYXJjaFBhcmFtcy5wcm90b3R5cGUua2V5cy5jYWxsKHRhcmdldCkpLmtleXMoKTtcblx0XHRcdFx0XHRcdH07XG5cblx0XHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdFx0cmV0dXJuIFJlZmxlY3QuZ2V0KHRhcmdldCwgcCwgcmVjZWl2ZXIpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0LyogYzggaWdub3JlIG5leHQgKi9cblx0fVxuXG5cdGdldCBbU3ltYm9sLnRvU3RyaW5nVGFnXSgpIHtcblx0XHRyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lO1xuXHR9XG5cblx0dG9TdHJpbmcoKSB7XG5cdFx0cmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0aGlzKTtcblx0fVxuXG5cdGdldChuYW1lKSB7XG5cdFx0Y29uc3QgdmFsdWVzID0gdGhpcy5nZXRBbGwobmFtZSk7XG5cdFx0aWYgKHZhbHVlcy5sZW5ndGggPT09IDApIHtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblxuXHRcdGxldCB2YWx1ZSA9IHZhbHVlcy5qb2luKCcsICcpO1xuXHRcdGlmICgvXmNvbnRlbnQtZW5jb2RpbmckL2kudGVzdChuYW1lKSkge1xuXHRcdFx0dmFsdWUgPSB2YWx1ZS50b0xvd2VyQ2FzZSgpO1xuXHRcdH1cblxuXHRcdHJldHVybiB2YWx1ZTtcblx0fVxuXG5cdGZvckVhY2goY2FsbGJhY2ssIHRoaXNBcmcgPSB1bmRlZmluZWQpIHtcblx0XHRmb3IgKGNvbnN0IG5hbWUgb2YgdGhpcy5rZXlzKCkpIHtcblx0XHRcdFJlZmxlY3QuYXBwbHkoY2FsbGJhY2ssIHRoaXNBcmcsIFt0aGlzLmdldChuYW1lKSwgbmFtZSwgdGhpc10pO1xuXHRcdH1cblx0fVxuXG5cdCogdmFsdWVzKCkge1xuXHRcdGZvciAoY29uc3QgbmFtZSBvZiB0aGlzLmtleXMoKSkge1xuXHRcdFx0eWllbGQgdGhpcy5nZXQobmFtZSk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIEB0eXBlIHsoKSA9PiBJdGVyYWJsZUl0ZXJhdG9yPFtzdHJpbmcsIHN0cmluZ10+fVxuXHQgKi9cblx0KiBlbnRyaWVzKCkge1xuXHRcdGZvciAoY29uc3QgbmFtZSBvZiB0aGlzLmtleXMoKSkge1xuXHRcdFx0eWllbGQgW25hbWUsIHRoaXMuZ2V0KG5hbWUpXTtcblx0XHR9XG5cdH1cblxuXHRbU3ltYm9sLml0ZXJhdG9yXSgpIHtcblx0XHRyZXR1cm4gdGhpcy5lbnRyaWVzKCk7XG5cdH1cblxuXHQvKipcblx0ICogTm9kZS1mZXRjaCBub24tc3BlYyBtZXRob2Rcblx0ICogcmV0dXJuaW5nIGFsbCBoZWFkZXJzIGFuZCB0aGVpciB2YWx1ZXMgYXMgYXJyYXlcblx0ICogQHJldHVybnMge1JlY29yZDxzdHJpbmcsIHN0cmluZ1tdPn1cblx0ICovXG5cdHJhdygpIHtcblx0XHRyZXR1cm4gWy4uLnRoaXMua2V5cygpXS5yZWR1Y2UoKHJlc3VsdCwga2V5KSA9PiB7XG5cdFx0XHRyZXN1bHRba2V5XSA9IHRoaXMuZ2V0QWxsKGtleSk7XG5cdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdH0sIHt9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBGb3IgYmV0dGVyIGNvbnNvbGUubG9nKGhlYWRlcnMpIGFuZCBhbHNvIHRvIGNvbnZlcnQgSGVhZGVycyBpbnRvIE5vZGUuanMgUmVxdWVzdCBjb21wYXRpYmxlIGZvcm1hdFxuXHQgKi9cblx0W1N5bWJvbC5mb3IoJ25vZGVqcy51dGlsLmluc3BlY3QuY3VzdG9tJyldKCkge1xuXHRcdHJldHVybiBbLi4udGhpcy5rZXlzKCldLnJlZHVjZSgocmVzdWx0LCBrZXkpID0+IHtcblx0XHRcdGNvbnN0IHZhbHVlcyA9IHRoaXMuZ2V0QWxsKGtleSk7XG5cdFx0XHQvLyBIdHRwLnJlcXVlc3QoKSBvbmx5IHN1cHBvcnRzIHN0cmluZyBhcyBIb3N0IGhlYWRlci5cblx0XHRcdC8vIFRoaXMgaGFjayBtYWtlcyBzcGVjaWZ5aW5nIGN1c3RvbSBIb3N0IGhlYWRlciBwb3NzaWJsZS5cblx0XHRcdGlmIChrZXkgPT09ICdob3N0Jykge1xuXHRcdFx0XHRyZXN1bHRba2V5XSA9IHZhbHVlc1swXTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJlc3VsdFtrZXldID0gdmFsdWVzLmxlbmd0aCA+IDEgPyB2YWx1ZXMgOiB2YWx1ZXNbMF07XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0fSwge30pO1xuXHR9XG59XG5cbi8qKlxuICogUmUtc2hhcGluZyBvYmplY3QgZm9yIFdlYiBJREwgdGVzdHNcbiAqIE9ubHkgbmVlZCB0byBkbyBpdCBmb3Igb3ZlcnJpZGRlbiBtZXRob2RzXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFxuXHRIZWFkZXJzLnByb3RvdHlwZSxcblx0WydnZXQnLCAnZW50cmllcycsICdmb3JFYWNoJywgJ3ZhbHVlcyddLnJlZHVjZSgocmVzdWx0LCBwcm9wZXJ0eSkgPT4ge1xuXHRcdHJlc3VsdFtwcm9wZXJ0eV0gPSB7ZW51bWVyYWJsZTogdHJ1ZX07XG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fSwge30pXG4pO1xuXG4vKipcbiAqIENyZWF0ZSBhIEhlYWRlcnMgb2JqZWN0IGZyb20gYW4gaHR0cC5JbmNvbWluZ01lc3NhZ2UucmF3SGVhZGVycywgaWdub3JpbmcgdGhvc2UgdGhhdCBkb1xuICogbm90IGNvbmZvcm0gdG8gSFRUUCBncmFtbWFyIHByb2R1Y3Rpb25zLlxuICogQHBhcmFtIHtpbXBvcnQoJ2h0dHAnKS5JbmNvbWluZ01lc3NhZ2VbJ3Jhd0hlYWRlcnMnXX0gaGVhZGVyc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZnJvbVJhd0hlYWRlcnMoaGVhZGVycyA9IFtdKSB7XG5cdHJldHVybiBuZXcgSGVhZGVycyhcblx0XHRoZWFkZXJzXG5cdFx0XHQvLyBTcGxpdCBpbnRvIHBhaXJzXG5cdFx0XHQucmVkdWNlKChyZXN1bHQsIHZhbHVlLCBpbmRleCwgYXJyYXkpID0+IHtcblx0XHRcdFx0aWYgKGluZGV4ICUgMiA9PT0gMCkge1xuXHRcdFx0XHRcdHJlc3VsdC5wdXNoKGFycmF5LnNsaWNlKGluZGV4LCBpbmRleCArIDIpKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0XHR9LCBbXSlcblx0XHRcdC5maWx0ZXIoKFtuYW1lLCB2YWx1ZV0pID0+IHtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHR2YWxpZGF0ZUhlYWRlck5hbWUobmFtZSk7XG5cdFx0XHRcdFx0dmFsaWRhdGVIZWFkZXJWYWx1ZShuYW1lLCBTdHJpbmcodmFsdWUpKTtcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0fSBjYXRjaCB7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXG5cdCk7XG59XG4iLCAiY29uc3QgcmVkaXJlY3RTdGF0dXMgPSBuZXcgU2V0KFszMDEsIDMwMiwgMzAzLCAzMDcsIDMwOF0pO1xuXG4vKipcbiAqIFJlZGlyZWN0IGNvZGUgbWF0Y2hpbmdcbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gY29kZSAtIFN0YXR1cyBjb2RlXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgY29uc3QgaXNSZWRpcmVjdCA9IGNvZGUgPT4ge1xuXHRyZXR1cm4gcmVkaXJlY3RTdGF0dXMuaGFzKGNvZGUpO1xufTtcbiIsICIvKipcbiAqIFJlc3BvbnNlLmpzXG4gKlxuICogUmVzcG9uc2UgY2xhc3MgcHJvdmlkZXMgY29udGVudCBkZWNvZGluZ1xuICovXG5cbmltcG9ydCBIZWFkZXJzIGZyb20gJy4vaGVhZGVycy5qcyc7XG5pbXBvcnQgQm9keSwge2Nsb25lLCBleHRyYWN0Q29udGVudFR5cGV9IGZyb20gJy4vYm9keS5qcyc7XG5pbXBvcnQge2lzUmVkaXJlY3R9IGZyb20gJy4vdXRpbHMvaXMtcmVkaXJlY3QuanMnO1xuXG5jb25zdCBJTlRFUk5BTFMgPSBTeW1ib2woJ1Jlc3BvbnNlIGludGVybmFscycpO1xuXG4vKipcbiAqIFJlc3BvbnNlIGNsYXNzXG4gKlxuICogUmVmOiBodHRwczovL2ZldGNoLnNwZWMud2hhdHdnLm9yZy8jcmVzcG9uc2UtY2xhc3NcbiAqXG4gKiBAcGFyYW0gICBTdHJlYW0gIGJvZHkgIFJlYWRhYmxlIHN0cmVhbVxuICogQHBhcmFtICAgT2JqZWN0ICBvcHRzICBSZXNwb25zZSBvcHRpb25zXG4gKiBAcmV0dXJuICBWb2lkXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlc3BvbnNlIGV4dGVuZHMgQm9keSB7XG5cdGNvbnN0cnVjdG9yKGJvZHkgPSBudWxsLCBvcHRpb25zID0ge30pIHtcblx0XHRzdXBlcihib2R5LCBvcHRpb25zKTtcblxuXHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1lcS1udWxsLCBlcWVxZXEsIG5vLW5lZ2F0ZWQtY29uZGl0aW9uXG5cdFx0Y29uc3Qgc3RhdHVzID0gb3B0aW9ucy5zdGF0dXMgIT0gbnVsbCA/IG9wdGlvbnMuc3RhdHVzIDogMjAwO1xuXG5cdFx0Y29uc3QgaGVhZGVycyA9IG5ldyBIZWFkZXJzKG9wdGlvbnMuaGVhZGVycyk7XG5cblx0XHRpZiAoYm9keSAhPT0gbnVsbCAmJiAhaGVhZGVycy5oYXMoJ0NvbnRlbnQtVHlwZScpKSB7XG5cdFx0XHRjb25zdCBjb250ZW50VHlwZSA9IGV4dHJhY3RDb250ZW50VHlwZShib2R5LCB0aGlzKTtcblx0XHRcdGlmIChjb250ZW50VHlwZSkge1xuXHRcdFx0XHRoZWFkZXJzLmFwcGVuZCgnQ29udGVudC1UeXBlJywgY29udGVudFR5cGUpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHRoaXNbSU5URVJOQUxTXSA9IHtcblx0XHRcdHR5cGU6ICdkZWZhdWx0Jyxcblx0XHRcdHVybDogb3B0aW9ucy51cmwsXG5cdFx0XHRzdGF0dXMsXG5cdFx0XHRzdGF0dXNUZXh0OiBvcHRpb25zLnN0YXR1c1RleHQgfHwgJycsXG5cdFx0XHRoZWFkZXJzLFxuXHRcdFx0Y291bnRlcjogb3B0aW9ucy5jb3VudGVyLFxuXHRcdFx0aGlnaFdhdGVyTWFyazogb3B0aW9ucy5oaWdoV2F0ZXJNYXJrXG5cdFx0fTtcblx0fVxuXG5cdGdldCB0eXBlKCkge1xuXHRcdHJldHVybiB0aGlzW0lOVEVSTkFMU10udHlwZTtcblx0fVxuXG5cdGdldCB1cmwoKSB7XG5cdFx0cmV0dXJuIHRoaXNbSU5URVJOQUxTXS51cmwgfHwgJyc7XG5cdH1cblxuXHRnZXQgc3RhdHVzKCkge1xuXHRcdHJldHVybiB0aGlzW0lOVEVSTkFMU10uc3RhdHVzO1xuXHR9XG5cblx0LyoqXG5cdCAqIENvbnZlbmllbmNlIHByb3BlcnR5IHJlcHJlc2VudGluZyBpZiB0aGUgcmVxdWVzdCBlbmRlZCBub3JtYWxseVxuXHQgKi9cblx0Z2V0IG9rKCkge1xuXHRcdHJldHVybiB0aGlzW0lOVEVSTkFMU10uc3RhdHVzID49IDIwMCAmJiB0aGlzW0lOVEVSTkFMU10uc3RhdHVzIDwgMzAwO1xuXHR9XG5cblx0Z2V0IHJlZGlyZWN0ZWQoKSB7XG5cdFx0cmV0dXJuIHRoaXNbSU5URVJOQUxTXS5jb3VudGVyID4gMDtcblx0fVxuXG5cdGdldCBzdGF0dXNUZXh0KCkge1xuXHRcdHJldHVybiB0aGlzW0lOVEVSTkFMU10uc3RhdHVzVGV4dDtcblx0fVxuXG5cdGdldCBoZWFkZXJzKCkge1xuXHRcdHJldHVybiB0aGlzW0lOVEVSTkFMU10uaGVhZGVycztcblx0fVxuXG5cdGdldCBoaWdoV2F0ZXJNYXJrKCkge1xuXHRcdHJldHVybiB0aGlzW0lOVEVSTkFMU10uaGlnaFdhdGVyTWFyaztcblx0fVxuXG5cdC8qKlxuXHQgKiBDbG9uZSB0aGlzIHJlc3BvbnNlXG5cdCAqXG5cdCAqIEByZXR1cm4gIFJlc3BvbnNlXG5cdCAqL1xuXHRjbG9uZSgpIHtcblx0XHRyZXR1cm4gbmV3IFJlc3BvbnNlKGNsb25lKHRoaXMsIHRoaXMuaGlnaFdhdGVyTWFyayksIHtcblx0XHRcdHR5cGU6IHRoaXMudHlwZSxcblx0XHRcdHVybDogdGhpcy51cmwsXG5cdFx0XHRzdGF0dXM6IHRoaXMuc3RhdHVzLFxuXHRcdFx0c3RhdHVzVGV4dDogdGhpcy5zdGF0dXNUZXh0LFxuXHRcdFx0aGVhZGVyczogdGhpcy5oZWFkZXJzLFxuXHRcdFx0b2s6IHRoaXMub2ssXG5cdFx0XHRyZWRpcmVjdGVkOiB0aGlzLnJlZGlyZWN0ZWQsXG5cdFx0XHRzaXplOiB0aGlzLnNpemUsXG5cdFx0XHRoaWdoV2F0ZXJNYXJrOiB0aGlzLmhpZ2hXYXRlck1hcmtcblx0XHR9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gdXJsICAgIFRoZSBVUkwgdGhhdCB0aGUgbmV3IHJlc3BvbnNlIGlzIHRvIG9yaWdpbmF0ZSBmcm9tLlxuXHQgKiBAcGFyYW0ge251bWJlcn0gc3RhdHVzIEFuIG9wdGlvbmFsIHN0YXR1cyBjb2RlIGZvciB0aGUgcmVzcG9uc2UgKGUuZy4sIDMwMi4pXG5cdCAqIEByZXR1cm5zIHtSZXNwb25zZX0gICAgQSBSZXNwb25zZSBvYmplY3QuXG5cdCAqL1xuXHRzdGF0aWMgcmVkaXJlY3QodXJsLCBzdGF0dXMgPSAzMDIpIHtcblx0XHRpZiAoIWlzUmVkaXJlY3Qoc3RhdHVzKSkge1xuXHRcdFx0dGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0ZhaWxlZCB0byBleGVjdXRlIFwicmVkaXJlY3RcIiBvbiBcInJlc3BvbnNlXCI6IEludmFsaWQgc3RhdHVzIGNvZGUnKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gbmV3IFJlc3BvbnNlKG51bGwsIHtcblx0XHRcdGhlYWRlcnM6IHtcblx0XHRcdFx0bG9jYXRpb246IG5ldyBVUkwodXJsKS50b1N0cmluZygpXG5cdFx0XHR9LFxuXHRcdFx0c3RhdHVzXG5cdFx0fSk7XG5cdH1cblxuXHRzdGF0aWMgZXJyb3IoKSB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBuZXcgUmVzcG9uc2UobnVsbCwge3N0YXR1czogMCwgc3RhdHVzVGV4dDogJyd9KTtcblx0XHRyZXNwb25zZVtJTlRFUk5BTFNdLnR5cGUgPSAnZXJyb3InO1xuXHRcdHJldHVybiByZXNwb25zZTtcblx0fVxuXG5cdHN0YXRpYyBqc29uKGRhdGEgPSB1bmRlZmluZWQsIGluaXQgPSB7fSkge1xuXHRcdGNvbnN0IGJvZHkgPSBKU09OLnN0cmluZ2lmeShkYXRhKTtcblxuXHRcdGlmIChib2R5ID09PSB1bmRlZmluZWQpIHtcblx0XHRcdHRocm93IG5ldyBUeXBlRXJyb3IoJ2RhdGEgaXMgbm90IEpTT04gc2VyaWFsaXphYmxlJyk7XG5cdFx0fVxuXG5cdFx0Y29uc3QgaGVhZGVycyA9IG5ldyBIZWFkZXJzKGluaXQgJiYgaW5pdC5oZWFkZXJzKTtcblxuXHRcdGlmICghaGVhZGVycy5oYXMoJ2NvbnRlbnQtdHlwZScpKSB7XG5cdFx0XHRoZWFkZXJzLnNldCgnY29udGVudC10eXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gbmV3IFJlc3BvbnNlKGJvZHksIHtcblx0XHRcdC4uLmluaXQsXG5cdFx0XHRoZWFkZXJzXG5cdFx0fSk7XG5cdH1cblxuXHRnZXQgW1N5bWJvbC50b1N0cmluZ1RhZ10oKSB7XG5cdFx0cmV0dXJuICdSZXNwb25zZSc7XG5cdH1cbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoUmVzcG9uc2UucHJvdG90eXBlLCB7XG5cdHR5cGU6IHtlbnVtZXJhYmxlOiB0cnVlfSxcblx0dXJsOiB7ZW51bWVyYWJsZTogdHJ1ZX0sXG5cdHN0YXR1czoge2VudW1lcmFibGU6IHRydWV9LFxuXHRvazoge2VudW1lcmFibGU6IHRydWV9LFxuXHRyZWRpcmVjdGVkOiB7ZW51bWVyYWJsZTogdHJ1ZX0sXG5cdHN0YXR1c1RleHQ6IHtlbnVtZXJhYmxlOiB0cnVlfSxcblx0aGVhZGVyczoge2VudW1lcmFibGU6IHRydWV9LFxuXHRjbG9uZToge2VudW1lcmFibGU6IHRydWV9XG59KTtcbiIsICIvKipcbiAqIFJlcXVlc3QuanNcbiAqXG4gKiBSZXF1ZXN0IGNsYXNzIGNvbnRhaW5zIHNlcnZlciBvbmx5IG9wdGlvbnNcbiAqXG4gKiBBbGwgc3BlYyBhbGdvcml0aG0gc3RlcCBudW1iZXJzIGFyZSBiYXNlZCBvbiBodHRwczovL2ZldGNoLnNwZWMud2hhdHdnLm9yZy9jb21taXQtc25hcHNob3RzL2FlNzE2ODIyY2IzYTYxODQzMjI2Y2QwOTBlZWZjNjU4OTQ0NmMxZDIvLlxuICovXG5cbmltcG9ydCB7Zm9ybWF0IGFzIGZvcm1hdFVybH0gZnJvbSAnbm9kZTp1cmwnO1xuaW1wb3J0IHtkZXByZWNhdGV9IGZyb20gJ25vZGU6dXRpbCc7XG5pbXBvcnQgSGVhZGVycyBmcm9tICcuL2hlYWRlcnMuanMnO1xuaW1wb3J0IEJvZHksIHtjbG9uZSwgZXh0cmFjdENvbnRlbnRUeXBlLCBnZXRUb3RhbEJ5dGVzfSBmcm9tICcuL2JvZHkuanMnO1xuaW1wb3J0IHtpc0Fib3J0U2lnbmFsfSBmcm9tICcuL3V0aWxzL2lzLmpzJztcbmltcG9ydCB7Z2V0U2VhcmNofSBmcm9tICcuL3V0aWxzL2dldC1zZWFyY2guanMnO1xuaW1wb3J0IHtcblx0dmFsaWRhdGVSZWZlcnJlclBvbGljeSwgZGV0ZXJtaW5lUmVxdWVzdHNSZWZlcnJlciwgREVGQVVMVF9SRUZFUlJFUl9QT0xJQ1lcbn0gZnJvbSAnLi91dGlscy9yZWZlcnJlci5qcyc7XG5cbmNvbnN0IElOVEVSTkFMUyA9IFN5bWJvbCgnUmVxdWVzdCBpbnRlcm5hbHMnKTtcblxuLyoqXG4gKiBDaGVjayBpZiBgb2JqYCBpcyBhbiBpbnN0YW5jZSBvZiBSZXF1ZXN0LlxuICpcbiAqIEBwYXJhbSAgeyp9IG9iamVjdFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuY29uc3QgaXNSZXF1ZXN0ID0gb2JqZWN0ID0+IHtcblx0cmV0dXJuIChcblx0XHR0eXBlb2Ygb2JqZWN0ID09PSAnb2JqZWN0JyAmJlxuXHRcdHR5cGVvZiBvYmplY3RbSU5URVJOQUxTXSA9PT0gJ29iamVjdCdcblx0KTtcbn07XG5cbmNvbnN0IGRvQmFkRGF0YVdhcm4gPSBkZXByZWNhdGUoKCkgPT4ge30sXG5cdCcuZGF0YSBpcyBub3QgYSB2YWxpZCBSZXF1ZXN0SW5pdCBwcm9wZXJ0eSwgdXNlIC5ib2R5IGluc3RlYWQnLFxuXHQnaHR0cHM6Ly9naXRodWIuY29tL25vZGUtZmV0Y2gvbm9kZS1mZXRjaC9pc3N1ZXMvMTAwMCAocmVxdWVzdCknKTtcblxuLyoqXG4gKiBSZXF1ZXN0IGNsYXNzXG4gKlxuICogUmVmOiBodHRwczovL2ZldGNoLnNwZWMud2hhdHdnLm9yZy8jcmVxdWVzdC1jbGFzc1xuICpcbiAqIEBwYXJhbSAgIE1peGVkICAgaW5wdXQgIFVybCBvciBSZXF1ZXN0IGluc3RhbmNlXG4gKiBAcGFyYW0gICBPYmplY3QgIGluaXQgICBDdXN0b20gb3B0aW9uc1xuICogQHJldHVybiAgVm9pZFxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZXF1ZXN0IGV4dGVuZHMgQm9keSB7XG5cdGNvbnN0cnVjdG9yKGlucHV0LCBpbml0ID0ge30pIHtcblx0XHRsZXQgcGFyc2VkVVJMO1xuXG5cdFx0Ly8gTm9ybWFsaXplIGlucHV0IGFuZCBmb3JjZSBVUkwgdG8gYmUgZW5jb2RlZCBhcyBVVEYtOCAoaHR0cHM6Ly9naXRodWIuY29tL25vZGUtZmV0Y2gvbm9kZS1mZXRjaC9pc3N1ZXMvMjQ1KVxuXHRcdGlmIChpc1JlcXVlc3QoaW5wdXQpKSB7XG5cdFx0XHRwYXJzZWRVUkwgPSBuZXcgVVJMKGlucHV0LnVybCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHBhcnNlZFVSTCA9IG5ldyBVUkwoaW5wdXQpO1xuXHRcdFx0aW5wdXQgPSB7fTtcblx0XHR9XG5cblx0XHRpZiAocGFyc2VkVVJMLnVzZXJuYW1lICE9PSAnJyB8fCBwYXJzZWRVUkwucGFzc3dvcmQgIT09ICcnKSB7XG5cdFx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKGAke3BhcnNlZFVSTH0gaXMgYW4gdXJsIHdpdGggZW1iZWRkZWQgY3JlZGVudGlhbHMuYCk7XG5cdFx0fVxuXG5cdFx0bGV0IG1ldGhvZCA9IGluaXQubWV0aG9kIHx8IGlucHV0Lm1ldGhvZCB8fCAnR0VUJztcblx0XHRpZiAoL14oZGVsZXRlfGdldHxoZWFkfG9wdGlvbnN8cG9zdHxwdXQpJC9pLnRlc3QobWV0aG9kKSkge1xuXHRcdFx0bWV0aG9kID0gbWV0aG9kLnRvVXBwZXJDYXNlKCk7XG5cdFx0fVxuXG5cdFx0aWYgKCFpc1JlcXVlc3QoaW5pdCkgJiYgJ2RhdGEnIGluIGluaXQpIHtcblx0XHRcdGRvQmFkRGF0YVdhcm4oKTtcblx0XHR9XG5cblx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tZXEtbnVsbCwgZXFlcWVxXG5cdFx0aWYgKChpbml0LmJvZHkgIT0gbnVsbCB8fCAoaXNSZXF1ZXN0KGlucHV0KSAmJiBpbnB1dC5ib2R5ICE9PSBudWxsKSkgJiZcblx0XHRcdChtZXRob2QgPT09ICdHRVQnIHx8IG1ldGhvZCA9PT0gJ0hFQUQnKSkge1xuXHRcdFx0dGhyb3cgbmV3IFR5cGVFcnJvcignUmVxdWVzdCB3aXRoIEdFVC9IRUFEIG1ldGhvZCBjYW5ub3QgaGF2ZSBib2R5Jyk7XG5cdFx0fVxuXG5cdFx0Y29uc3QgaW5wdXRCb2R5ID0gaW5pdC5ib2R5ID9cblx0XHRcdGluaXQuYm9keSA6XG5cdFx0XHQoaXNSZXF1ZXN0KGlucHV0KSAmJiBpbnB1dC5ib2R5ICE9PSBudWxsID9cblx0XHRcdFx0Y2xvbmUoaW5wdXQpIDpcblx0XHRcdFx0bnVsbCk7XG5cblx0XHRzdXBlcihpbnB1dEJvZHksIHtcblx0XHRcdHNpemU6IGluaXQuc2l6ZSB8fCBpbnB1dC5zaXplIHx8IDBcblx0XHR9KTtcblxuXHRcdGNvbnN0IGhlYWRlcnMgPSBuZXcgSGVhZGVycyhpbml0LmhlYWRlcnMgfHwgaW5wdXQuaGVhZGVycyB8fCB7fSk7XG5cblx0XHRpZiAoaW5wdXRCb2R5ICE9PSBudWxsICYmICFoZWFkZXJzLmhhcygnQ29udGVudC1UeXBlJykpIHtcblx0XHRcdGNvbnN0IGNvbnRlbnRUeXBlID0gZXh0cmFjdENvbnRlbnRUeXBlKGlucHV0Qm9keSwgdGhpcyk7XG5cdFx0XHRpZiAoY29udGVudFR5cGUpIHtcblx0XHRcdFx0aGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsIGNvbnRlbnRUeXBlKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRsZXQgc2lnbmFsID0gaXNSZXF1ZXN0KGlucHV0KSA/XG5cdFx0XHRpbnB1dC5zaWduYWwgOlxuXHRcdFx0bnVsbDtcblx0XHRpZiAoJ3NpZ25hbCcgaW4gaW5pdCkge1xuXHRcdFx0c2lnbmFsID0gaW5pdC5zaWduYWw7XG5cdFx0fVxuXG5cdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWVxLW51bGwsIGVxZXFlcVxuXHRcdGlmIChzaWduYWwgIT0gbnVsbCAmJiAhaXNBYm9ydFNpZ25hbChzaWduYWwpKSB7XG5cdFx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBzaWduYWwgdG8gYmUgYW4gaW5zdGFuY2VvZiBBYm9ydFNpZ25hbCBvciBFdmVudFRhcmdldCcpO1xuXHRcdH1cblxuXHRcdC8vIFx1MDBBNzUuNCwgUmVxdWVzdCBjb25zdHJ1Y3RvciBzdGVwcywgc3RlcCAxNS4xXG5cdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWVxLW51bGwsIGVxZXFlcVxuXHRcdGxldCByZWZlcnJlciA9IGluaXQucmVmZXJyZXIgPT0gbnVsbCA/IGlucHV0LnJlZmVycmVyIDogaW5pdC5yZWZlcnJlcjtcblx0XHRpZiAocmVmZXJyZXIgPT09ICcnKSB7XG5cdFx0XHQvLyBcdTAwQTc1LjQsIFJlcXVlc3QgY29uc3RydWN0b3Igc3RlcHMsIHN0ZXAgMTUuMlxuXHRcdFx0cmVmZXJyZXIgPSAnbm8tcmVmZXJyZXInO1xuXHRcdH0gZWxzZSBpZiAocmVmZXJyZXIpIHtcblx0XHRcdC8vIFx1MDBBNzUuNCwgUmVxdWVzdCBjb25zdHJ1Y3RvciBzdGVwcywgc3RlcCAxNS4zLjEsIDE1LjMuMlxuXHRcdFx0Y29uc3QgcGFyc2VkUmVmZXJyZXIgPSBuZXcgVVJMKHJlZmVycmVyKTtcblx0XHRcdC8vIFx1MDBBNzUuNCwgUmVxdWVzdCBjb25zdHJ1Y3RvciBzdGVwcywgc3RlcCAxNS4zLjMsIDE1LjMuNFxuXHRcdFx0cmVmZXJyZXIgPSAvXmFib3V0OihcXC9cXC8pP2NsaWVudCQvLnRlc3QocGFyc2VkUmVmZXJyZXIpID8gJ2NsaWVudCcgOiBwYXJzZWRSZWZlcnJlcjtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmVmZXJyZXIgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXG5cdFx0dGhpc1tJTlRFUk5BTFNdID0ge1xuXHRcdFx0bWV0aG9kLFxuXHRcdFx0cmVkaXJlY3Q6IGluaXQucmVkaXJlY3QgfHwgaW5wdXQucmVkaXJlY3QgfHwgJ2ZvbGxvdycsXG5cdFx0XHRoZWFkZXJzLFxuXHRcdFx0cGFyc2VkVVJMLFxuXHRcdFx0c2lnbmFsLFxuXHRcdFx0cmVmZXJyZXJcblx0XHR9O1xuXG5cdFx0Ly8gTm9kZS1mZXRjaC1vbmx5IG9wdGlvbnNcblx0XHR0aGlzLmZvbGxvdyA9IGluaXQuZm9sbG93ID09PSB1bmRlZmluZWQgPyAoaW5wdXQuZm9sbG93ID09PSB1bmRlZmluZWQgPyAyMCA6IGlucHV0LmZvbGxvdykgOiBpbml0LmZvbGxvdztcblx0XHR0aGlzLmNvbXByZXNzID0gaW5pdC5jb21wcmVzcyA9PT0gdW5kZWZpbmVkID8gKGlucHV0LmNvbXByZXNzID09PSB1bmRlZmluZWQgPyB0cnVlIDogaW5wdXQuY29tcHJlc3MpIDogaW5pdC5jb21wcmVzcztcblx0XHR0aGlzLmNvdW50ZXIgPSBpbml0LmNvdW50ZXIgfHwgaW5wdXQuY291bnRlciB8fCAwO1xuXHRcdHRoaXMuYWdlbnQgPSBpbml0LmFnZW50IHx8IGlucHV0LmFnZW50O1xuXHRcdHRoaXMuaGlnaFdhdGVyTWFyayA9IGluaXQuaGlnaFdhdGVyTWFyayB8fCBpbnB1dC5oaWdoV2F0ZXJNYXJrIHx8IDE2Mzg0O1xuXHRcdHRoaXMuaW5zZWN1cmVIVFRQUGFyc2VyID0gaW5pdC5pbnNlY3VyZUhUVFBQYXJzZXIgfHwgaW5wdXQuaW5zZWN1cmVIVFRQUGFyc2VyIHx8IGZhbHNlO1xuXG5cdFx0Ly8gXHUwMEE3NS40LCBSZXF1ZXN0IGNvbnN0cnVjdG9yIHN0ZXBzLCBzdGVwIDE2LlxuXHRcdC8vIERlZmF1bHQgaXMgZW1wdHkgc3RyaW5nIHBlciBodHRwczovL2ZldGNoLnNwZWMud2hhdHdnLm9yZy8jY29uY2VwdC1yZXF1ZXN0LXJlZmVycmVyLXBvbGljeVxuXHRcdHRoaXMucmVmZXJyZXJQb2xpY3kgPSBpbml0LnJlZmVycmVyUG9saWN5IHx8IGlucHV0LnJlZmVycmVyUG9saWN5IHx8ICcnO1xuXHR9XG5cblx0LyoqIEByZXR1cm5zIHtzdHJpbmd9ICovXG5cdGdldCBtZXRob2QoKSB7XG5cdFx0cmV0dXJuIHRoaXNbSU5URVJOQUxTXS5tZXRob2Q7XG5cdH1cblxuXHQvKiogQHJldHVybnMge3N0cmluZ30gKi9cblx0Z2V0IHVybCgpIHtcblx0XHRyZXR1cm4gZm9ybWF0VXJsKHRoaXNbSU5URVJOQUxTXS5wYXJzZWRVUkwpO1xuXHR9XG5cblx0LyoqIEByZXR1cm5zIHtIZWFkZXJzfSAqL1xuXHRnZXQgaGVhZGVycygpIHtcblx0XHRyZXR1cm4gdGhpc1tJTlRFUk5BTFNdLmhlYWRlcnM7XG5cdH1cblxuXHRnZXQgcmVkaXJlY3QoKSB7XG5cdFx0cmV0dXJuIHRoaXNbSU5URVJOQUxTXS5yZWRpcmVjdDtcblx0fVxuXG5cdC8qKiBAcmV0dXJucyB7QWJvcnRTaWduYWx9ICovXG5cdGdldCBzaWduYWwoKSB7XG5cdFx0cmV0dXJuIHRoaXNbSU5URVJOQUxTXS5zaWduYWw7XG5cdH1cblxuXHQvLyBodHRwczovL2ZldGNoLnNwZWMud2hhdHdnLm9yZy8jZG9tLXJlcXVlc3QtcmVmZXJyZXJcblx0Z2V0IHJlZmVycmVyKCkge1xuXHRcdGlmICh0aGlzW0lOVEVSTkFMU10ucmVmZXJyZXIgPT09ICduby1yZWZlcnJlcicpIHtcblx0XHRcdHJldHVybiAnJztcblx0XHR9XG5cblx0XHRpZiAodGhpc1tJTlRFUk5BTFNdLnJlZmVycmVyID09PSAnY2xpZW50Jykge1xuXHRcdFx0cmV0dXJuICdhYm91dDpjbGllbnQnO1xuXHRcdH1cblxuXHRcdGlmICh0aGlzW0lOVEVSTkFMU10ucmVmZXJyZXIpIHtcblx0XHRcdHJldHVybiB0aGlzW0lOVEVSTkFMU10ucmVmZXJyZXIudG9TdHJpbmcoKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdW5kZWZpbmVkO1xuXHR9XG5cblx0Z2V0IHJlZmVycmVyUG9saWN5KCkge1xuXHRcdHJldHVybiB0aGlzW0lOVEVSTkFMU10ucmVmZXJyZXJQb2xpY3k7XG5cdH1cblxuXHRzZXQgcmVmZXJyZXJQb2xpY3kocmVmZXJyZXJQb2xpY3kpIHtcblx0XHR0aGlzW0lOVEVSTkFMU10ucmVmZXJyZXJQb2xpY3kgPSB2YWxpZGF0ZVJlZmVycmVyUG9saWN5KHJlZmVycmVyUG9saWN5KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDbG9uZSB0aGlzIHJlcXVlc3Rcblx0ICpcblx0ICogQHJldHVybiAgUmVxdWVzdFxuXHQgKi9cblx0Y2xvbmUoKSB7XG5cdFx0cmV0dXJuIG5ldyBSZXF1ZXN0KHRoaXMpO1xuXHR9XG5cblx0Z2V0IFtTeW1ib2wudG9TdHJpbmdUYWddKCkge1xuXHRcdHJldHVybiAnUmVxdWVzdCc7XG5cdH1cbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoUmVxdWVzdC5wcm90b3R5cGUsIHtcblx0bWV0aG9kOiB7ZW51bWVyYWJsZTogdHJ1ZX0sXG5cdHVybDoge2VudW1lcmFibGU6IHRydWV9LFxuXHRoZWFkZXJzOiB7ZW51bWVyYWJsZTogdHJ1ZX0sXG5cdHJlZGlyZWN0OiB7ZW51bWVyYWJsZTogdHJ1ZX0sXG5cdGNsb25lOiB7ZW51bWVyYWJsZTogdHJ1ZX0sXG5cdHNpZ25hbDoge2VudW1lcmFibGU6IHRydWV9LFxuXHRyZWZlcnJlcjoge2VudW1lcmFibGU6IHRydWV9LFxuXHRyZWZlcnJlclBvbGljeToge2VudW1lcmFibGU6IHRydWV9XG59KTtcblxuLyoqXG4gKiBDb252ZXJ0IGEgUmVxdWVzdCB0byBOb2RlLmpzIGh0dHAgcmVxdWVzdCBvcHRpb25zLlxuICpcbiAqIEBwYXJhbSB7UmVxdWVzdH0gcmVxdWVzdCAtIEEgUmVxdWVzdCBpbnN0YW5jZVxuICogQHJldHVybiBUaGUgb3B0aW9ucyBvYmplY3QgdG8gYmUgcGFzc2VkIHRvIGh0dHAucmVxdWVzdFxuICovXG5leHBvcnQgY29uc3QgZ2V0Tm9kZVJlcXVlc3RPcHRpb25zID0gcmVxdWVzdCA9PiB7XG5cdGNvbnN0IHtwYXJzZWRVUkx9ID0gcmVxdWVzdFtJTlRFUk5BTFNdO1xuXHRjb25zdCBoZWFkZXJzID0gbmV3IEhlYWRlcnMocmVxdWVzdFtJTlRFUk5BTFNdLmhlYWRlcnMpO1xuXG5cdC8vIEZldGNoIHN0ZXAgMS4zXG5cdGlmICghaGVhZGVycy5oYXMoJ0FjY2VwdCcpKSB7XG5cdFx0aGVhZGVycy5zZXQoJ0FjY2VwdCcsICcqLyonKTtcblx0fVxuXG5cdC8vIEhUVFAtbmV0d29yay1vci1jYWNoZSBmZXRjaCBzdGVwcyAyLjQtMi43XG5cdGxldCBjb250ZW50TGVuZ3RoVmFsdWUgPSBudWxsO1xuXHRpZiAocmVxdWVzdC5ib2R5ID09PSBudWxsICYmIC9eKHBvc3R8cHV0KSQvaS50ZXN0KHJlcXVlc3QubWV0aG9kKSkge1xuXHRcdGNvbnRlbnRMZW5ndGhWYWx1ZSA9ICcwJztcblx0fVxuXG5cdGlmIChyZXF1ZXN0LmJvZHkgIT09IG51bGwpIHtcblx0XHRjb25zdCB0b3RhbEJ5dGVzID0gZ2V0VG90YWxCeXRlcyhyZXF1ZXN0KTtcblx0XHQvLyBTZXQgQ29udGVudC1MZW5ndGggaWYgdG90YWxCeXRlcyBpcyBhIG51bWJlciAodGhhdCBpcyBub3QgTmFOKVxuXHRcdGlmICh0eXBlb2YgdG90YWxCeXRlcyA9PT0gJ251bWJlcicgJiYgIU51bWJlci5pc05hTih0b3RhbEJ5dGVzKSkge1xuXHRcdFx0Y29udGVudExlbmd0aFZhbHVlID0gU3RyaW5nKHRvdGFsQnl0ZXMpO1xuXHRcdH1cblx0fVxuXG5cdGlmIChjb250ZW50TGVuZ3RoVmFsdWUpIHtcblx0XHRoZWFkZXJzLnNldCgnQ29udGVudC1MZW5ndGgnLCBjb250ZW50TGVuZ3RoVmFsdWUpO1xuXHR9XG5cblx0Ly8gNC4xLiBNYWluIGZldGNoLCBzdGVwIDIuNlxuXHQvLyA+IElmIHJlcXVlc3QncyByZWZlcnJlciBwb2xpY3kgaXMgdGhlIGVtcHR5IHN0cmluZywgdGhlbiBzZXQgcmVxdWVzdCdzIHJlZmVycmVyIHBvbGljeSB0byB0aGVcblx0Ly8gPiBkZWZhdWx0IHJlZmVycmVyIHBvbGljeS5cblx0aWYgKHJlcXVlc3QucmVmZXJyZXJQb2xpY3kgPT09ICcnKSB7XG5cdFx0cmVxdWVzdC5yZWZlcnJlclBvbGljeSA9IERFRkFVTFRfUkVGRVJSRVJfUE9MSUNZO1xuXHR9XG5cblx0Ly8gNC4xLiBNYWluIGZldGNoLCBzdGVwIDIuN1xuXHQvLyA+IElmIHJlcXVlc3QncyByZWZlcnJlciBpcyBub3QgXCJuby1yZWZlcnJlclwiLCBzZXQgcmVxdWVzdCdzIHJlZmVycmVyIHRvIHRoZSByZXN1bHQgb2YgaW52b2tpbmdcblx0Ly8gPiBkZXRlcm1pbmUgcmVxdWVzdCdzIHJlZmVycmVyLlxuXHRpZiAocmVxdWVzdC5yZWZlcnJlciAmJiByZXF1ZXN0LnJlZmVycmVyICE9PSAnbm8tcmVmZXJyZXInKSB7XG5cdFx0cmVxdWVzdFtJTlRFUk5BTFNdLnJlZmVycmVyID0gZGV0ZXJtaW5lUmVxdWVzdHNSZWZlcnJlcihyZXF1ZXN0KTtcblx0fSBlbHNlIHtcblx0XHRyZXF1ZXN0W0lOVEVSTkFMU10ucmVmZXJyZXIgPSAnbm8tcmVmZXJyZXInO1xuXHR9XG5cblx0Ly8gNC41LiBIVFRQLW5ldHdvcmstb3ItY2FjaGUgZmV0Y2gsIHN0ZXAgNi45XG5cdC8vID4gSWYgaHR0cFJlcXVlc3QncyByZWZlcnJlciBpcyBhIFVSTCwgdGhlbiBhcHBlbmQgYFJlZmVyZXJgL2h0dHBSZXF1ZXN0J3MgcmVmZXJyZXIsIHNlcmlhbGl6ZWRcblx0Ly8gPiAgYW5kIGlzb21vcnBoaWMgZW5jb2RlZCwgdG8gaHR0cFJlcXVlc3QncyBoZWFkZXIgbGlzdC5cblx0aWYgKHJlcXVlc3RbSU5URVJOQUxTXS5yZWZlcnJlciBpbnN0YW5jZW9mIFVSTCkge1xuXHRcdGhlYWRlcnMuc2V0KCdSZWZlcmVyJywgcmVxdWVzdC5yZWZlcnJlcik7XG5cdH1cblxuXHQvLyBIVFRQLW5ldHdvcmstb3ItY2FjaGUgZmV0Y2ggc3RlcCAyLjExXG5cdGlmICghaGVhZGVycy5oYXMoJ1VzZXItQWdlbnQnKSkge1xuXHRcdGhlYWRlcnMuc2V0KCdVc2VyLUFnZW50JywgJ25vZGUtZmV0Y2gnKTtcblx0fVxuXG5cdC8vIEhUVFAtbmV0d29yay1vci1jYWNoZSBmZXRjaCBzdGVwIDIuMTVcblx0aWYgKHJlcXVlc3QuY29tcHJlc3MgJiYgIWhlYWRlcnMuaGFzKCdBY2NlcHQtRW5jb2RpbmcnKSkge1xuXHRcdGhlYWRlcnMuc2V0KCdBY2NlcHQtRW5jb2RpbmcnLCAnZ3ppcCwgZGVmbGF0ZSwgYnInKTtcblx0fVxuXG5cdGxldCB7YWdlbnR9ID0gcmVxdWVzdDtcblx0aWYgKHR5cGVvZiBhZ2VudCA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdGFnZW50ID0gYWdlbnQocGFyc2VkVVJMKTtcblx0fVxuXG5cdC8vIEhUVFAtbmV0d29yayBmZXRjaCBzdGVwIDQuMlxuXHQvLyBjaHVua2VkIGVuY29kaW5nIGlzIGhhbmRsZWQgYnkgTm9kZS5qc1xuXG5cdGNvbnN0IHNlYXJjaCA9IGdldFNlYXJjaChwYXJzZWRVUkwpO1xuXG5cdC8vIFBhc3MgdGhlIGZ1bGwgVVJMIGRpcmVjdGx5IHRvIHJlcXVlc3QoKSwgYnV0IG92ZXJ3cml0ZSB0aGUgZm9sbG93aW5nXG5cdC8vIG9wdGlvbnM6XG5cdGNvbnN0IG9wdGlvbnMgPSB7XG5cdFx0Ly8gT3ZlcndyaXRlIHNlYXJjaCB0byByZXRhaW4gdHJhaWxpbmcgPyAoaXNzdWUgIzc3Nilcblx0XHRwYXRoOiBwYXJzZWRVUkwucGF0aG5hbWUgKyBzZWFyY2gsXG5cdFx0Ly8gVGhlIGZvbGxvd2luZyBvcHRpb25zIGFyZSBub3QgZXhwcmVzc2VkIGluIHRoZSBVUkxcblx0XHRtZXRob2Q6IHJlcXVlc3QubWV0aG9kLFxuXHRcdGhlYWRlcnM6IGhlYWRlcnNbU3ltYm9sLmZvcignbm9kZWpzLnV0aWwuaW5zcGVjdC5jdXN0b20nKV0oKSxcblx0XHRpbnNlY3VyZUhUVFBQYXJzZXI6IHJlcXVlc3QuaW5zZWN1cmVIVFRQUGFyc2VyLFxuXHRcdGFnZW50XG5cdH07XG5cblx0cmV0dXJuIHtcblx0XHQvKiogQHR5cGUge1VSTH0gKi9cblx0XHRwYXJzZWRVUkwsXG5cdFx0b3B0aW9uc1xuXHR9O1xufTtcbiIsICJleHBvcnQgY29uc3QgZ2V0U2VhcmNoID0gcGFyc2VkVVJMID0+IHtcblx0aWYgKHBhcnNlZFVSTC5zZWFyY2gpIHtcblx0XHRyZXR1cm4gcGFyc2VkVVJMLnNlYXJjaDtcblx0fVxuXG5cdGNvbnN0IGxhc3RPZmZzZXQgPSBwYXJzZWRVUkwuaHJlZi5sZW5ndGggLSAxO1xuXHRjb25zdCBoYXNoID0gcGFyc2VkVVJMLmhhc2ggfHwgKHBhcnNlZFVSTC5ocmVmW2xhc3RPZmZzZXRdID09PSAnIycgPyAnIycgOiAnJyk7XG5cdHJldHVybiBwYXJzZWRVUkwuaHJlZltsYXN0T2Zmc2V0IC0gaGFzaC5sZW5ndGhdID09PSAnPycgPyAnPycgOiAnJztcbn07XG4iLCAiaW1wb3J0IHtpc0lQfSBmcm9tICdub2RlOm5ldCc7XG5cbi8qKlxuICogQGV4dGVybmFsIFVSTFxuICogQHNlZSB7QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1VSTHxVUkx9XG4gKi9cblxuLyoqXG4gKiBAbW9kdWxlIHV0aWxzL3JlZmVycmVyXG4gKiBAcHJpdmF0ZVxuICovXG5cbi8qKlxuICogQHNlZSB7QGxpbmsgaHR0cHM6Ly93M2MuZ2l0aHViLmlvL3dlYmFwcHNlYy1yZWZlcnJlci1wb2xpY3kvI3N0cmlwLXVybHxSZWZlcnJlciBQb2xpY3kgXHUwMEE3OC40LiBTdHJpcCB1cmwgZm9yIHVzZSBhcyBhIHJlZmVycmVyfVxuICogQHBhcmFtIHtzdHJpbmd9IFVSTFxuICogQHBhcmFtIHtib29sZWFufSBbb3JpZ2luT25seT1mYWxzZV1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0cmlwVVJMRm9yVXNlQXNBUmVmZXJyZXIodXJsLCBvcmlnaW5Pbmx5ID0gZmFsc2UpIHtcblx0Ly8gMS4gSWYgdXJsIGlzIG51bGwsIHJldHVybiBubyByZWZlcnJlci5cblx0aWYgKHVybCA9PSBudWxsKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tZXEtbnVsbCwgZXFlcWVxXG5cdFx0cmV0dXJuICduby1yZWZlcnJlcic7XG5cdH1cblxuXHR1cmwgPSBuZXcgVVJMKHVybCk7XG5cblx0Ly8gMi4gSWYgdXJsJ3Mgc2NoZW1lIGlzIGEgbG9jYWwgc2NoZW1lLCB0aGVuIHJldHVybiBubyByZWZlcnJlci5cblx0aWYgKC9eKGFib3V0fGJsb2J8ZGF0YSk6JC8udGVzdCh1cmwucHJvdG9jb2wpKSB7XG5cdFx0cmV0dXJuICduby1yZWZlcnJlcic7XG5cdH1cblxuXHQvLyAzLiBTZXQgdXJsJ3MgdXNlcm5hbWUgdG8gdGhlIGVtcHR5IHN0cmluZy5cblx0dXJsLnVzZXJuYW1lID0gJyc7XG5cblx0Ly8gNC4gU2V0IHVybCdzIHBhc3N3b3JkIHRvIG51bGwuXG5cdC8vIE5vdGU6IGBudWxsYCBhcHBlYXJzIHRvIGJlIGEgbWlzdGFrZSBhcyB0aGlzIGFjdHVhbGx5IHJlc3VsdHMgaW4gdGhlIHBhc3N3b3JkIGJlaW5nIGBcIm51bGxcImAuXG5cdHVybC5wYXNzd29yZCA9ICcnO1xuXG5cdC8vIDUuIFNldCB1cmwncyBmcmFnbWVudCB0byBudWxsLlxuXHQvLyBOb3RlOiBgbnVsbGAgYXBwZWFycyB0byBiZSBhIG1pc3Rha2UgYXMgdGhpcyBhY3R1YWxseSByZXN1bHRzIGluIHRoZSBmcmFnbWVudCBiZWluZyBgXCIjbnVsbFwiYC5cblx0dXJsLmhhc2ggPSAnJztcblxuXHQvLyA2LiBJZiB0aGUgb3JpZ2luLW9ubHkgZmxhZyBpcyB0cnVlLCB0aGVuOlxuXHRpZiAob3JpZ2luT25seSkge1xuXHRcdC8vIDYuMS4gU2V0IHVybCdzIHBhdGggdG8gbnVsbC5cblx0XHQvLyBOb3RlOiBgbnVsbGAgYXBwZWFycyB0byBiZSBhIG1pc3Rha2UgYXMgdGhpcyBhY3R1YWxseSByZXN1bHRzIGluIHRoZSBwYXRoIGJlaW5nIGBcIi9udWxsXCJgLlxuXHRcdHVybC5wYXRobmFtZSA9ICcnO1xuXG5cdFx0Ly8gNi4yLiBTZXQgdXJsJ3MgcXVlcnkgdG8gbnVsbC5cblx0XHQvLyBOb3RlOiBgbnVsbGAgYXBwZWFycyB0byBiZSBhIG1pc3Rha2UgYXMgdGhpcyBhY3R1YWxseSByZXN1bHRzIGluIHRoZSBxdWVyeSBiZWluZyBgXCI/bnVsbFwiYC5cblx0XHR1cmwuc2VhcmNoID0gJyc7XG5cdH1cblxuXHQvLyA3LiBSZXR1cm4gdXJsLlxuXHRyZXR1cm4gdXJsO1xufVxuXG4vKipcbiAqIEBzZWUge0BsaW5rIGh0dHBzOi8vdzNjLmdpdGh1Yi5pby93ZWJhcHBzZWMtcmVmZXJyZXItcG9saWN5LyNlbnVtZGVmLXJlZmVycmVycG9saWN5fGVudW0gUmVmZXJyZXJQb2xpY3l9XG4gKi9cbmV4cG9ydCBjb25zdCBSZWZlcnJlclBvbGljeSA9IG5ldyBTZXQoW1xuXHQnJyxcblx0J25vLXJlZmVycmVyJyxcblx0J25vLXJlZmVycmVyLXdoZW4tZG93bmdyYWRlJyxcblx0J3NhbWUtb3JpZ2luJyxcblx0J29yaWdpbicsXG5cdCdzdHJpY3Qtb3JpZ2luJyxcblx0J29yaWdpbi13aGVuLWNyb3NzLW9yaWdpbicsXG5cdCdzdHJpY3Qtb3JpZ2luLXdoZW4tY3Jvc3Mtb3JpZ2luJyxcblx0J3Vuc2FmZS11cmwnXG5dKTtcblxuLyoqXG4gKiBAc2VlIHtAbGluayBodHRwczovL3czYy5naXRodWIuaW8vd2ViYXBwc2VjLXJlZmVycmVyLXBvbGljeS8jZGVmYXVsdC1yZWZlcnJlci1wb2xpY3l8ZGVmYXVsdCByZWZlcnJlciBwb2xpY3l9XG4gKi9cbmV4cG9ydCBjb25zdCBERUZBVUxUX1JFRkVSUkVSX1BPTElDWSA9ICdzdHJpY3Qtb3JpZ2luLXdoZW4tY3Jvc3Mtb3JpZ2luJztcblxuLyoqXG4gKiBAc2VlIHtAbGluayBodHRwczovL3czYy5naXRodWIuaW8vd2ViYXBwc2VjLXJlZmVycmVyLXBvbGljeS8jcmVmZXJyZXItcG9saWNpZXN8UmVmZXJyZXIgUG9saWN5IFx1MDBBNzMuIFJlZmVycmVyIFBvbGljaWVzfVxuICogQHBhcmFtIHtzdHJpbmd9IHJlZmVycmVyUG9saWN5XG4gKiBAcmV0dXJucyB7c3RyaW5nfSByZWZlcnJlclBvbGljeVxuICovXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVSZWZlcnJlclBvbGljeShyZWZlcnJlclBvbGljeSkge1xuXHRpZiAoIVJlZmVycmVyUG9saWN5LmhhcyhyZWZlcnJlclBvbGljeSkpIHtcblx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKGBJbnZhbGlkIHJlZmVycmVyUG9saWN5OiAke3JlZmVycmVyUG9saWN5fWApO1xuXHR9XG5cblx0cmV0dXJuIHJlZmVycmVyUG9saWN5O1xufVxuXG4vKipcbiAqIEBzZWUge0BsaW5rIGh0dHBzOi8vdzNjLmdpdGh1Yi5pby93ZWJhcHBzZWMtc2VjdXJlLWNvbnRleHRzLyNpcy1vcmlnaW4tdHJ1c3R3b3J0aHl8UmVmZXJyZXIgUG9saWN5IFx1MDBBNzMuMi4gSXMgb3JpZ2luIHBvdGVudGlhbGx5IHRydXN0d29ydGh5P31cbiAqIEBwYXJhbSB7ZXh0ZXJuYWw6VVJMfSB1cmxcbiAqIEByZXR1cm5zIGB0cnVlYDogXCJQb3RlbnRpYWxseSBUcnVzdHdvcnRoeVwiLCBgZmFsc2VgOiBcIk5vdCBUcnVzdHdvcnRoeVwiXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc09yaWdpblBvdGVudGlhbGx5VHJ1c3R3b3J0aHkodXJsKSB7XG5cdC8vIDEuIElmIG9yaWdpbiBpcyBhbiBvcGFxdWUgb3JpZ2luLCByZXR1cm4gXCJOb3QgVHJ1c3R3b3J0aHlcIi5cblx0Ly8gTm90IGFwcGxpY2FibGVcblxuXHQvLyAyLiBBc3NlcnQ6IG9yaWdpbiBpcyBhIHR1cGxlIG9yaWdpbi5cblx0Ly8gTm90IGZvciBpbXBsZW1lbnRhdGlvbnNcblxuXHQvLyAzLiBJZiBvcmlnaW4ncyBzY2hlbWUgaXMgZWl0aGVyIFwiaHR0cHNcIiBvciBcIndzc1wiLCByZXR1cm4gXCJQb3RlbnRpYWxseSBUcnVzdHdvcnRoeVwiLlxuXHRpZiAoL14oaHR0cHx3cylzOiQvLnRlc3QodXJsLnByb3RvY29sKSkge1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cblx0Ly8gNC4gSWYgb3JpZ2luJ3MgaG9zdCBjb21wb25lbnQgbWF0Y2hlcyBvbmUgb2YgdGhlIENJRFIgbm90YXRpb25zIDEyNy4wLjAuMC84IG9yIDo6MS8xMjggW1JGQzQ2MzJdLCByZXR1cm4gXCJQb3RlbnRpYWxseSBUcnVzdHdvcnRoeVwiLlxuXHRjb25zdCBob3N0SXAgPSB1cmwuaG9zdC5yZXBsYWNlKC8oXlxcWyl8KF0kKS9nLCAnJyk7XG5cdGNvbnN0IGhvc3RJUFZlcnNpb24gPSBpc0lQKGhvc3RJcCk7XG5cblx0aWYgKGhvc3RJUFZlcnNpb24gPT09IDQgJiYgL14xMjdcXC4vLnRlc3QoaG9zdElwKSkge1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cblx0aWYgKGhvc3RJUFZlcnNpb24gPT09IDYgJiYgL14oKCgwKzopezd9KXwoOjooMCs6KXswLDZ9KSkwKjEkLy50ZXN0KGhvc3RJcCkpIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdC8vIDUuIElmIG9yaWdpbidzIGhvc3QgY29tcG9uZW50IGlzIFwibG9jYWxob3N0XCIgb3IgZmFsbHMgd2l0aGluIFwiLmxvY2FsaG9zdFwiLCBhbmQgdGhlIHVzZXIgYWdlbnQgY29uZm9ybXMgdG8gdGhlIG5hbWUgcmVzb2x1dGlvbiBydWxlcyBpbiBbbGV0LWxvY2FsaG9zdC1iZS1sb2NhbGhvc3RdLCByZXR1cm4gXCJQb3RlbnRpYWxseSBUcnVzdHdvcnRoeVwiLlxuXHQvLyBXZSBhcmUgcmV0dXJuaW5nIEZBTFNFIGhlcmUgYmVjYXVzZSB3ZSBjYW5ub3QgZW5zdXJlIGNvbmZvcm1hbmNlIHRvXG5cdC8vIGxldC1sb2NhbGhvc3QtYmUtbG9hbGhvc3QgKGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9kcmFmdC13ZXN0LWxldC1sb2NhbGhvc3QtYmUtbG9jYWxob3N0KVxuXHRpZiAodXJsLmhvc3QgPT09ICdsb2NhbGhvc3QnIHx8IHVybC5ob3N0LmVuZHNXaXRoKCcubG9jYWxob3N0JykpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHQvLyA2LiBJZiBvcmlnaW4ncyBzY2hlbWUgY29tcG9uZW50IGlzIGZpbGUsIHJldHVybiBcIlBvdGVudGlhbGx5IFRydXN0d29ydGh5XCIuXG5cdGlmICh1cmwucHJvdG9jb2wgPT09ICdmaWxlOicpIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdC8vIDcuIElmIG9yaWdpbidzIHNjaGVtZSBjb21wb25lbnQgaXMgb25lIHdoaWNoIHRoZSB1c2VyIGFnZW50IGNvbnNpZGVycyB0byBiZSBhdXRoZW50aWNhdGVkLCByZXR1cm4gXCJQb3RlbnRpYWxseSBUcnVzdHdvcnRoeVwiLlxuXHQvLyBOb3Qgc3VwcG9ydGVkXG5cblx0Ly8gOC4gSWYgb3JpZ2luIGhhcyBiZWVuIGNvbmZpZ3VyZWQgYXMgYSB0cnVzdHdvcnRoeSBvcmlnaW4sIHJldHVybiBcIlBvdGVudGlhbGx5IFRydXN0d29ydGh5XCIuXG5cdC8vIE5vdCBzdXBwb3J0ZWRcblxuXHQvLyA5LiBSZXR1cm4gXCJOb3QgVHJ1c3R3b3J0aHlcIi5cblx0cmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIEBzZWUge0BsaW5rIGh0dHBzOi8vdzNjLmdpdGh1Yi5pby93ZWJhcHBzZWMtc2VjdXJlLWNvbnRleHRzLyNpcy11cmwtdHJ1c3R3b3J0aHl8UmVmZXJyZXIgUG9saWN5IFx1MDBBNzMuMy4gSXMgdXJsIHBvdGVudGlhbGx5IHRydXN0d29ydGh5P31cbiAqIEBwYXJhbSB7ZXh0ZXJuYWw6VVJMfSB1cmxcbiAqIEByZXR1cm5zIGB0cnVlYDogXCJQb3RlbnRpYWxseSBUcnVzdHdvcnRoeVwiLCBgZmFsc2VgOiBcIk5vdCBUcnVzdHdvcnRoeVwiXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1VybFBvdGVudGlhbGx5VHJ1c3R3b3J0aHkodXJsKSB7XG5cdC8vIDEuIElmIHVybCBpcyBcImFib3V0OmJsYW5rXCIgb3IgXCJhYm91dDpzcmNkb2NcIiwgcmV0dXJuIFwiUG90ZW50aWFsbHkgVHJ1c3R3b3J0aHlcIi5cblx0aWYgKC9eYWJvdXQ6KGJsYW5rfHNyY2RvYykkLy50ZXN0KHVybCkpIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdC8vIDIuIElmIHVybCdzIHNjaGVtZSBpcyBcImRhdGFcIiwgcmV0dXJuIFwiUG90ZW50aWFsbHkgVHJ1c3R3b3J0aHlcIi5cblx0aWYgKHVybC5wcm90b2NvbCA9PT0gJ2RhdGE6Jykge1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cblx0Ly8gTm90ZTogVGhlIG9yaWdpbiBvZiBibG9iOiBhbmQgZmlsZXN5c3RlbTogVVJMcyBpcyB0aGUgb3JpZ2luIG9mIHRoZSBjb250ZXh0IGluIHdoaWNoIHRoZXkgd2VyZVxuXHQvLyBjcmVhdGVkLiBUaGVyZWZvcmUsIGJsb2JzIGNyZWF0ZWQgaW4gYSB0cnVzdHdvcnRoeSBvcmlnaW4gd2lsbCB0aGVtc2VsdmVzIGJlIHBvdGVudGlhbGx5XG5cdC8vIHRydXN0d29ydGh5LlxuXHRpZiAoL14oYmxvYnxmaWxlc3lzdGVtKTokLy50ZXN0KHVybC5wcm90b2NvbCkpIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdC8vIDMuIFJldHVybiB0aGUgcmVzdWx0IG9mIGV4ZWN1dGluZyBcdTAwQTczLjIgSXMgb3JpZ2luIHBvdGVudGlhbGx5IHRydXN0d29ydGh5PyBvbiB1cmwncyBvcmlnaW4uXG5cdHJldHVybiBpc09yaWdpblBvdGVudGlhbGx5VHJ1c3R3b3J0aHkodXJsKTtcbn1cblxuLyoqXG4gKiBNb2RpZmllcyB0aGUgcmVmZXJyZXJVUkwgdG8gZW5mb3JjZSBhbnkgZXh0cmEgc2VjdXJpdHkgcG9saWN5IGNvbnNpZGVyYXRpb25zLlxuICogQHNlZSB7QGxpbmsgaHR0cHM6Ly93M2MuZ2l0aHViLmlvL3dlYmFwcHNlYy1yZWZlcnJlci1wb2xpY3kvI2RldGVybWluZS1yZXF1ZXN0cy1yZWZlcnJlcnxSZWZlcnJlciBQb2xpY3kgXHUwMEE3OC4zLiBEZXRlcm1pbmUgcmVxdWVzdCdzIFJlZmVycmVyfSwgc3RlcCA3XG4gKiBAY2FsbGJhY2sgbW9kdWxlOnV0aWxzL3JlZmVycmVyfnJlZmVycmVyVVJMQ2FsbGJhY2tcbiAqIEBwYXJhbSB7ZXh0ZXJuYWw6VVJMfSByZWZlcnJlclVSTFxuICogQHJldHVybnMge2V4dGVybmFsOlVSTH0gbW9kaWZpZWQgcmVmZXJyZXJVUkxcbiAqL1xuXG4vKipcbiAqIE1vZGlmaWVzIHRoZSByZWZlcnJlck9yaWdpbiB0byBlbmZvcmNlIGFueSBleHRyYSBzZWN1cml0eSBwb2xpY3kgY29uc2lkZXJhdGlvbnMuXG4gKiBAc2VlIHtAbGluayBodHRwczovL3czYy5naXRodWIuaW8vd2ViYXBwc2VjLXJlZmVycmVyLXBvbGljeS8jZGV0ZXJtaW5lLXJlcXVlc3RzLXJlZmVycmVyfFJlZmVycmVyIFBvbGljeSBcdTAwQTc4LjMuIERldGVybWluZSByZXF1ZXN0J3MgUmVmZXJyZXJ9LCBzdGVwIDdcbiAqIEBjYWxsYmFjayBtb2R1bGU6dXRpbHMvcmVmZXJyZXJ+cmVmZXJyZXJPcmlnaW5DYWxsYmFja1xuICogQHBhcmFtIHtleHRlcm5hbDpVUkx9IHJlZmVycmVyT3JpZ2luXG4gKiBAcmV0dXJucyB7ZXh0ZXJuYWw6VVJMfSBtb2RpZmllZCByZWZlcnJlck9yaWdpblxuICovXG5cbi8qKlxuICogQHNlZSB7QGxpbmsgaHR0cHM6Ly93M2MuZ2l0aHViLmlvL3dlYmFwcHNlYy1yZWZlcnJlci1wb2xpY3kvI2RldGVybWluZS1yZXF1ZXN0cy1yZWZlcnJlcnxSZWZlcnJlciBQb2xpY3kgXHUwMEE3OC4zLiBEZXRlcm1pbmUgcmVxdWVzdCdzIFJlZmVycmVyfVxuICogQHBhcmFtIHtSZXF1ZXN0fSByZXF1ZXN0XG4gKiBAcGFyYW0ge29iamVjdH0gb1xuICogQHBhcmFtIHttb2R1bGU6dXRpbHMvcmVmZXJyZXJ+cmVmZXJyZXJVUkxDYWxsYmFja30gby5yZWZlcnJlclVSTENhbGxiYWNrXG4gKiBAcGFyYW0ge21vZHVsZTp1dGlscy9yZWZlcnJlcn5yZWZlcnJlck9yaWdpbkNhbGxiYWNrfSBvLnJlZmVycmVyT3JpZ2luQ2FsbGJhY2tcbiAqIEByZXR1cm5zIHtleHRlcm5hbDpVUkx9IFJlcXVlc3QncyByZWZlcnJlclxuICovXG5leHBvcnQgZnVuY3Rpb24gZGV0ZXJtaW5lUmVxdWVzdHNSZWZlcnJlcihyZXF1ZXN0LCB7cmVmZXJyZXJVUkxDYWxsYmFjaywgcmVmZXJyZXJPcmlnaW5DYWxsYmFja30gPSB7fSkge1xuXHQvLyBUaGVyZSBhcmUgMiBub3RlcyBpbiB0aGUgc3BlY2lmaWNhdGlvbiBhYm91dCBpbnZhbGlkIHByZS1jb25kaXRpb25zLiAgV2UgcmV0dXJuIG51bGwsIGhlcmUsIGZvclxuXHQvLyB0aGVzZSBjYXNlczpcblx0Ly8gPiBOb3RlOiBJZiByZXF1ZXN0J3MgcmVmZXJyZXIgaXMgXCJuby1yZWZlcnJlclwiLCBGZXRjaCB3aWxsIG5vdCBjYWxsIGludG8gdGhpcyBhbGdvcml0aG0uXG5cdC8vID4gTm90ZTogSWYgcmVxdWVzdCdzIHJlZmVycmVyIHBvbGljeSBpcyB0aGUgZW1wdHkgc3RyaW5nLCBGZXRjaCB3aWxsIG5vdCBjYWxsIGludG8gdGhpc1xuXHQvLyA+IGFsZ29yaXRobS5cblx0aWYgKHJlcXVlc3QucmVmZXJyZXIgPT09ICduby1yZWZlcnJlcicgfHwgcmVxdWVzdC5yZWZlcnJlclBvbGljeSA9PT0gJycpIHtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXG5cdC8vIDEuIExldCBwb2xpY3kgYmUgcmVxdWVzdCdzIGFzc29jaWF0ZWQgcmVmZXJyZXIgcG9saWN5LlxuXHRjb25zdCBwb2xpY3kgPSByZXF1ZXN0LnJlZmVycmVyUG9saWN5O1xuXG5cdC8vIDIuIExldCBlbnZpcm9ubWVudCBiZSByZXF1ZXN0J3MgY2xpZW50LlxuXHQvLyBub3QgYXBwbGljYWJsZSB0byBub2RlLmpzXG5cblx0Ly8gMy4gU3dpdGNoIG9uIHJlcXVlc3QncyByZWZlcnJlcjpcblx0aWYgKHJlcXVlc3QucmVmZXJyZXIgPT09ICdhYm91dDpjbGllbnQnKSB7XG5cdFx0cmV0dXJuICduby1yZWZlcnJlcic7XG5cdH1cblxuXHQvLyBcImEgVVJMXCI6IExldCByZWZlcnJlclNvdXJjZSBiZSByZXF1ZXN0J3MgcmVmZXJyZXIuXG5cdGNvbnN0IHJlZmVycmVyU291cmNlID0gcmVxdWVzdC5yZWZlcnJlcjtcblxuXHQvLyA0LiBMZXQgcmVxdWVzdCdzIHJlZmVycmVyVVJMIGJlIHRoZSByZXN1bHQgb2Ygc3RyaXBwaW5nIHJlZmVycmVyU291cmNlIGZvciB1c2UgYXMgYSByZWZlcnJlci5cblx0bGV0IHJlZmVycmVyVVJMID0gc3RyaXBVUkxGb3JVc2VBc0FSZWZlcnJlcihyZWZlcnJlclNvdXJjZSk7XG5cblx0Ly8gNS4gTGV0IHJlZmVycmVyT3JpZ2luIGJlIHRoZSByZXN1bHQgb2Ygc3RyaXBwaW5nIHJlZmVycmVyU291cmNlIGZvciB1c2UgYXMgYSByZWZlcnJlciwgd2l0aCB0aGVcblx0Ly8gICAgb3JpZ2luLW9ubHkgZmxhZyBzZXQgdG8gdHJ1ZS5cblx0bGV0IHJlZmVycmVyT3JpZ2luID0gc3RyaXBVUkxGb3JVc2VBc0FSZWZlcnJlcihyZWZlcnJlclNvdXJjZSwgdHJ1ZSk7XG5cblx0Ly8gNi4gSWYgdGhlIHJlc3VsdCBvZiBzZXJpYWxpemluZyByZWZlcnJlclVSTCBpcyBhIHN0cmluZyB3aG9zZSBsZW5ndGggaXMgZ3JlYXRlciB0aGFuIDQwOTYsIHNldFxuXHQvLyAgICByZWZlcnJlclVSTCB0byByZWZlcnJlck9yaWdpbi5cblx0aWYgKHJlZmVycmVyVVJMLnRvU3RyaW5nKCkubGVuZ3RoID4gNDA5Nikge1xuXHRcdHJlZmVycmVyVVJMID0gcmVmZXJyZXJPcmlnaW47XG5cdH1cblxuXHQvLyA3LiBUaGUgdXNlciBhZ2VudCBNQVkgYWx0ZXIgcmVmZXJyZXJVUkwgb3IgcmVmZXJyZXJPcmlnaW4gYXQgdGhpcyBwb2ludCB0byBlbmZvcmNlIGFyYml0cmFyeVxuXHQvLyAgICBwb2xpY3kgY29uc2lkZXJhdGlvbnMgaW4gdGhlIGludGVyZXN0cyBvZiBtaW5pbWl6aW5nIGRhdGEgbGVha2FnZS4gRm9yIGV4YW1wbGUsIHRoZSB1c2VyXG5cdC8vICAgIGFnZW50IGNvdWxkIHN0cmlwIHRoZSBVUkwgZG93biB0byBhbiBvcmlnaW4sIG1vZGlmeSBpdHMgaG9zdCwgcmVwbGFjZSBpdCB3aXRoIGFuIGVtcHR5XG5cdC8vICAgIHN0cmluZywgZXRjLlxuXHRpZiAocmVmZXJyZXJVUkxDYWxsYmFjaykge1xuXHRcdHJlZmVycmVyVVJMID0gcmVmZXJyZXJVUkxDYWxsYmFjayhyZWZlcnJlclVSTCk7XG5cdH1cblxuXHRpZiAocmVmZXJyZXJPcmlnaW5DYWxsYmFjaykge1xuXHRcdHJlZmVycmVyT3JpZ2luID0gcmVmZXJyZXJPcmlnaW5DYWxsYmFjayhyZWZlcnJlck9yaWdpbik7XG5cdH1cblxuXHQvLyA4LkV4ZWN1dGUgdGhlIHN0YXRlbWVudHMgY29ycmVzcG9uZGluZyB0byB0aGUgdmFsdWUgb2YgcG9saWN5OlxuXHRjb25zdCBjdXJyZW50VVJMID0gbmV3IFVSTChyZXF1ZXN0LnVybCk7XG5cblx0c3dpdGNoIChwb2xpY3kpIHtcblx0XHRjYXNlICduby1yZWZlcnJlcic6XG5cdFx0XHRyZXR1cm4gJ25vLXJlZmVycmVyJztcblxuXHRcdGNhc2UgJ29yaWdpbic6XG5cdFx0XHRyZXR1cm4gcmVmZXJyZXJPcmlnaW47XG5cblx0XHRjYXNlICd1bnNhZmUtdXJsJzpcblx0XHRcdHJldHVybiByZWZlcnJlclVSTDtcblxuXHRcdGNhc2UgJ3N0cmljdC1vcmlnaW4nOlxuXHRcdFx0Ly8gMS4gSWYgcmVmZXJyZXJVUkwgaXMgYSBwb3RlbnRpYWxseSB0cnVzdHdvcnRoeSBVUkwgYW5kIHJlcXVlc3QncyBjdXJyZW50IFVSTCBpcyBub3QgYVxuXHRcdFx0Ly8gICAgcG90ZW50aWFsbHkgdHJ1c3R3b3J0aHkgVVJMLCB0aGVuIHJldHVybiBubyByZWZlcnJlci5cblx0XHRcdGlmIChpc1VybFBvdGVudGlhbGx5VHJ1c3R3b3J0aHkocmVmZXJyZXJVUkwpICYmICFpc1VybFBvdGVudGlhbGx5VHJ1c3R3b3J0aHkoY3VycmVudFVSTCkpIHtcblx0XHRcdFx0cmV0dXJuICduby1yZWZlcnJlcic7XG5cdFx0XHR9XG5cblx0XHRcdC8vIDIuIFJldHVybiByZWZlcnJlck9yaWdpbi5cblx0XHRcdHJldHVybiByZWZlcnJlck9yaWdpbi50b1N0cmluZygpO1xuXG5cdFx0Y2FzZSAnc3RyaWN0LW9yaWdpbi13aGVuLWNyb3NzLW9yaWdpbic6XG5cdFx0XHQvLyAxLiBJZiB0aGUgb3JpZ2luIG9mIHJlZmVycmVyVVJMIGFuZCB0aGUgb3JpZ2luIG9mIHJlcXVlc3QncyBjdXJyZW50IFVSTCBhcmUgdGhlIHNhbWUsIHRoZW5cblx0XHRcdC8vICAgIHJldHVybiByZWZlcnJlclVSTC5cblx0XHRcdGlmIChyZWZlcnJlclVSTC5vcmlnaW4gPT09IGN1cnJlbnRVUkwub3JpZ2luKSB7XG5cdFx0XHRcdHJldHVybiByZWZlcnJlclVSTDtcblx0XHRcdH1cblxuXHRcdFx0Ly8gMi4gSWYgcmVmZXJyZXJVUkwgaXMgYSBwb3RlbnRpYWxseSB0cnVzdHdvcnRoeSBVUkwgYW5kIHJlcXVlc3QncyBjdXJyZW50IFVSTCBpcyBub3QgYVxuXHRcdFx0Ly8gICAgcG90ZW50aWFsbHkgdHJ1c3R3b3J0aHkgVVJMLCB0aGVuIHJldHVybiBubyByZWZlcnJlci5cblx0XHRcdGlmIChpc1VybFBvdGVudGlhbGx5VHJ1c3R3b3J0aHkocmVmZXJyZXJVUkwpICYmICFpc1VybFBvdGVudGlhbGx5VHJ1c3R3b3J0aHkoY3VycmVudFVSTCkpIHtcblx0XHRcdFx0cmV0dXJuICduby1yZWZlcnJlcic7XG5cdFx0XHR9XG5cblx0XHRcdC8vIDMuIFJldHVybiByZWZlcnJlck9yaWdpbi5cblx0XHRcdHJldHVybiByZWZlcnJlck9yaWdpbjtcblxuXHRcdGNhc2UgJ3NhbWUtb3JpZ2luJzpcblx0XHRcdC8vIDEuIElmIHRoZSBvcmlnaW4gb2YgcmVmZXJyZXJVUkwgYW5kIHRoZSBvcmlnaW4gb2YgcmVxdWVzdCdzIGN1cnJlbnQgVVJMIGFyZSB0aGUgc2FtZSwgdGhlblxuXHRcdFx0Ly8gICAgcmV0dXJuIHJlZmVycmVyVVJMLlxuXHRcdFx0aWYgKHJlZmVycmVyVVJMLm9yaWdpbiA9PT0gY3VycmVudFVSTC5vcmlnaW4pIHtcblx0XHRcdFx0cmV0dXJuIHJlZmVycmVyVVJMO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyAyLiBSZXR1cm4gbm8gcmVmZXJyZXIuXG5cdFx0XHRyZXR1cm4gJ25vLXJlZmVycmVyJztcblxuXHRcdGNhc2UgJ29yaWdpbi13aGVuLWNyb3NzLW9yaWdpbic6XG5cdFx0XHQvLyAxLiBJZiB0aGUgb3JpZ2luIG9mIHJlZmVycmVyVVJMIGFuZCB0aGUgb3JpZ2luIG9mIHJlcXVlc3QncyBjdXJyZW50IFVSTCBhcmUgdGhlIHNhbWUsIHRoZW5cblx0XHRcdC8vICAgIHJldHVybiByZWZlcnJlclVSTC5cblx0XHRcdGlmIChyZWZlcnJlclVSTC5vcmlnaW4gPT09IGN1cnJlbnRVUkwub3JpZ2luKSB7XG5cdFx0XHRcdHJldHVybiByZWZlcnJlclVSTDtcblx0XHRcdH1cblxuXHRcdFx0Ly8gUmV0dXJuIHJlZmVycmVyT3JpZ2luLlxuXHRcdFx0cmV0dXJuIHJlZmVycmVyT3JpZ2luO1xuXG5cdFx0Y2FzZSAnbm8tcmVmZXJyZXItd2hlbi1kb3duZ3JhZGUnOlxuXHRcdFx0Ly8gMS4gSWYgcmVmZXJyZXJVUkwgaXMgYSBwb3RlbnRpYWxseSB0cnVzdHdvcnRoeSBVUkwgYW5kIHJlcXVlc3QncyBjdXJyZW50IFVSTCBpcyBub3QgYVxuXHRcdFx0Ly8gICAgcG90ZW50aWFsbHkgdHJ1c3R3b3J0aHkgVVJMLCB0aGVuIHJldHVybiBubyByZWZlcnJlci5cblx0XHRcdGlmIChpc1VybFBvdGVudGlhbGx5VHJ1c3R3b3J0aHkocmVmZXJyZXJVUkwpICYmICFpc1VybFBvdGVudGlhbGx5VHJ1c3R3b3J0aHkoY3VycmVudFVSTCkpIHtcblx0XHRcdFx0cmV0dXJuICduby1yZWZlcnJlcic7XG5cdFx0XHR9XG5cblx0XHRcdC8vIDIuIFJldHVybiByZWZlcnJlclVSTC5cblx0XHRcdHJldHVybiByZWZlcnJlclVSTDtcblxuXHRcdGRlZmF1bHQ6XG5cdFx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKGBJbnZhbGlkIHJlZmVycmVyUG9saWN5OiAke3BvbGljeX1gKTtcblx0fVxufVxuXG4vKipcbiAqIEBzZWUge0BsaW5rIGh0dHBzOi8vdzNjLmdpdGh1Yi5pby93ZWJhcHBzZWMtcmVmZXJyZXItcG9saWN5LyNwYXJzZS1yZWZlcnJlci1wb2xpY3ktZnJvbS1oZWFkZXJ8UmVmZXJyZXIgUG9saWN5IFx1MDBBNzguMS4gUGFyc2UgYSByZWZlcnJlciBwb2xpY3kgZnJvbSBhIFJlZmVycmVyLVBvbGljeSBoZWFkZXJ9XG4gKiBAcGFyYW0ge0hlYWRlcnN9IGhlYWRlcnMgUmVzcG9uc2UgaGVhZGVyc1xuICogQHJldHVybnMge3N0cmluZ30gcG9saWN5XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVJlZmVycmVyUG9saWN5RnJvbUhlYWRlcihoZWFkZXJzKSB7XG5cdC8vIDEuIExldCBwb2xpY3ktdG9rZW5zIGJlIHRoZSByZXN1bHQgb2YgZXh0cmFjdGluZyBoZWFkZXIgbGlzdCB2YWx1ZXMgZ2l2ZW4gYFJlZmVycmVyLVBvbGljeWBcblx0Ly8gICAgYW5kIHJlc3BvbnNlXHUyMDE5cyBoZWFkZXIgbGlzdC5cblx0Y29uc3QgcG9saWN5VG9rZW5zID0gKGhlYWRlcnMuZ2V0KCdyZWZlcnJlci1wb2xpY3knKSB8fCAnJykuc3BsaXQoL1ssXFxzXSsvKTtcblxuXHQvLyAyLiBMZXQgcG9saWN5IGJlIHRoZSBlbXB0eSBzdHJpbmcuXG5cdGxldCBwb2xpY3kgPSAnJztcblxuXHQvLyAzLiBGb3IgZWFjaCB0b2tlbiBpbiBwb2xpY3ktdG9rZW5zLCBpZiB0b2tlbiBpcyBhIHJlZmVycmVyIHBvbGljeSBhbmQgdG9rZW4gaXMgbm90IHRoZSBlbXB0eVxuXHQvLyAgICBzdHJpbmcsIHRoZW4gc2V0IHBvbGljeSB0byB0b2tlbi5cblx0Ly8gTm90ZTogVGhpcyBhbGdvcml0aG0gbG9vcHMgb3ZlciBtdWx0aXBsZSBwb2xpY3kgdmFsdWVzIHRvIGFsbG93IGRlcGxveW1lbnQgb2YgbmV3IHBvbGljeVxuXHQvLyB2YWx1ZXMgd2l0aCBmYWxsYmFja3MgZm9yIG9sZGVyIHVzZXIgYWdlbnRzLCBhcyBkZXNjcmliZWQgaW4gXHUwMEE3IDExLjEgVW5rbm93biBQb2xpY3kgVmFsdWVzLlxuXHRmb3IgKGNvbnN0IHRva2VuIG9mIHBvbGljeVRva2Vucykge1xuXHRcdGlmICh0b2tlbiAmJiBSZWZlcnJlclBvbGljeS5oYXModG9rZW4pKSB7XG5cdFx0XHRwb2xpY3kgPSB0b2tlbjtcblx0XHR9XG5cdH1cblxuXHQvLyA0LiBSZXR1cm4gcG9saWN5LlxuXHRyZXR1cm4gcG9saWN5O1xufVxuIiwgImltcG9ydCB7RmV0Y2hCYXNlRXJyb3J9IGZyb20gJy4vYmFzZS5qcyc7XG5cbi8qKlxuICogQWJvcnRFcnJvciBpbnRlcmZhY2UgZm9yIGNhbmNlbGxlZCByZXF1ZXN0c1xuICovXG5leHBvcnQgY2xhc3MgQWJvcnRFcnJvciBleHRlbmRzIEZldGNoQmFzZUVycm9yIHtcblx0Y29uc3RydWN0b3IobWVzc2FnZSwgdHlwZSA9ICdhYm9ydGVkJykge1xuXHRcdHN1cGVyKG1lc3NhZ2UsIHR5cGUpO1xuXHR9XG59XG4iLCAiY2xhc3MgQ3N2RXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKGNvZGUsIG1lc3NhZ2UsIG9wdGlvbnMsIC4uLmNvbnRleHRzKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkobWVzc2FnZSkpIG1lc3NhZ2UgPSBtZXNzYWdlLmpvaW4oXCIgXCIpLnRyaW0oKTtcbiAgICBzdXBlcihtZXNzYWdlKTtcbiAgICBpZiAoRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgQ3N2RXJyb3IpO1xuICAgIH1cbiAgICB0aGlzLmNvZGUgPSBjb2RlO1xuICAgIGZvciAoY29uc3QgY29udGV4dCBvZiBjb250ZXh0cykge1xuICAgICAgZm9yIChjb25zdCBrZXkgaW4gY29udGV4dCkge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGNvbnRleHRba2V5XTtcbiAgICAgICAgdGhpc1trZXldID0gQnVmZmVyLmlzQnVmZmVyKHZhbHVlKVxuICAgICAgICAgID8gdmFsdWUudG9TdHJpbmcob3B0aW9ucy5lbmNvZGluZylcbiAgICAgICAgICA6IHZhbHVlID09IG51bGxcbiAgICAgICAgICAgID8gdmFsdWVcbiAgICAgICAgICAgIDogSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh2YWx1ZSkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgeyBDc3ZFcnJvciB9O1xuIiwgImNvbnN0IGlzX29iamVjdCA9IGZ1bmN0aW9uIChvYmopIHtcbiAgcmV0dXJuIHR5cGVvZiBvYmogPT09IFwib2JqZWN0XCIgJiYgb2JqICE9PSBudWxsICYmICFBcnJheS5pc0FycmF5KG9iaik7XG59O1xuXG5leHBvcnQgeyBpc19vYmplY3QgfTtcbiIsICJpbXBvcnQgeyBDc3ZFcnJvciB9IGZyb20gXCIuL0NzdkVycm9yLmpzXCI7XG5pbXBvcnQgeyBpc19vYmplY3QgfSBmcm9tIFwiLi4vdXRpbHMvaXNfb2JqZWN0LmpzXCI7XG5cbmNvbnN0IG5vcm1hbGl6ZV9jb2x1bW5zX2FycmF5ID0gZnVuY3Rpb24gKGNvbHVtbnMpIHtcbiAgY29uc3Qgbm9ybWFsaXplZENvbHVtbnMgPSBbXTtcbiAgZm9yIChsZXQgaSA9IDAsIGwgPSBjb2x1bW5zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGNvbnN0IGNvbHVtbiA9IGNvbHVtbnNbaV07XG4gICAgaWYgKGNvbHVtbiA9PT0gdW5kZWZpbmVkIHx8IGNvbHVtbiA9PT0gbnVsbCB8fCBjb2x1bW4gPT09IGZhbHNlKSB7XG4gICAgICBub3JtYWxpemVkQ29sdW1uc1tpXSA9IHsgZGlzYWJsZWQ6IHRydWUgfTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBjb2x1bW4gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIG5vcm1hbGl6ZWRDb2x1bW5zW2ldID0geyBuYW1lOiBjb2x1bW4gfTtcbiAgICB9IGVsc2UgaWYgKGlzX29iamVjdChjb2x1bW4pKSB7XG4gICAgICBpZiAodHlwZW9mIGNvbHVtbi5uYW1lICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHRocm93IG5ldyBDc3ZFcnJvcihcIkNTVl9PUFRJT05fQ09MVU1OU19NSVNTSU5HX05BTUVcIiwgW1xuICAgICAgICAgIFwiT3B0aW9uIGNvbHVtbnMgbWlzc2luZyBuYW1lOlwiLFxuICAgICAgICAgIGBwcm9wZXJ0eSBcIm5hbWVcIiBpcyByZXF1aXJlZCBhdCBwb3NpdGlvbiAke2l9YCxcbiAgICAgICAgICBcIndoZW4gY29sdW1uIGlzIGFuIG9iamVjdCBsaXRlcmFsXCIsXG4gICAgICAgIF0pO1xuICAgICAgfVxuICAgICAgbm9ybWFsaXplZENvbHVtbnNbaV0gPSBjb2x1bW47XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBDc3ZFcnJvcihcIkNTVl9JTlZBTElEX0NPTFVNTl9ERUZJTklUSU9OXCIsIFtcbiAgICAgICAgXCJJbnZhbGlkIGNvbHVtbiBkZWZpbml0aW9uOlwiLFxuICAgICAgICBcImV4cGVjdCBhIHN0cmluZyBvciBhIGxpdGVyYWwgb2JqZWN0LFwiLFxuICAgICAgICBgZ290ICR7SlNPTi5zdHJpbmdpZnkoY29sdW1uKX0gYXQgcG9zaXRpb24gJHtpfWAsXG4gICAgICBdKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG5vcm1hbGl6ZWRDb2x1bW5zO1xufTtcblxuZXhwb3J0IHsgbm9ybWFsaXplX2NvbHVtbnNfYXJyYXkgfTtcbiIsICJjbGFzcyBSZXNpemVhYmxlQnVmZmVyIHtcbiAgY29uc3RydWN0b3Ioc2l6ZSA9IDEwMCkge1xuICAgIHRoaXMuc2l6ZSA9IHNpemU7XG4gICAgdGhpcy5sZW5ndGggPSAwO1xuICAgIHRoaXMuYnVmID0gQnVmZmVyLmFsbG9jVW5zYWZlKHNpemUpO1xuICB9XG4gIHByZXBlbmQodmFsKSB7XG4gICAgaWYgKEJ1ZmZlci5pc0J1ZmZlcih2YWwpKSB7XG4gICAgICBjb25zdCBsZW5ndGggPSB0aGlzLmxlbmd0aCArIHZhbC5sZW5ndGg7XG4gICAgICBpZiAobGVuZ3RoID49IHRoaXMuc2l6ZSkge1xuICAgICAgICB0aGlzLnJlc2l6ZSgpO1xuICAgICAgICBpZiAobGVuZ3RoID49IHRoaXMuc2l6ZSkge1xuICAgICAgICAgIHRocm93IEVycm9yKFwiSU5WQUxJRF9CVUZGRVJfU1RBVEVcIik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IGJ1ZiA9IHRoaXMuYnVmO1xuICAgICAgdGhpcy5idWYgPSBCdWZmZXIuYWxsb2NVbnNhZmUodGhpcy5zaXplKTtcbiAgICAgIHZhbC5jb3B5KHRoaXMuYnVmLCAwKTtcbiAgICAgIGJ1Zi5jb3B5KHRoaXMuYnVmLCB2YWwubGVuZ3RoKTtcbiAgICAgIHRoaXMubGVuZ3RoICs9IHZhbC5sZW5ndGg7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGxlbmd0aCA9IHRoaXMubGVuZ3RoKys7XG4gICAgICBpZiAobGVuZ3RoID09PSB0aGlzLnNpemUpIHtcbiAgICAgICAgdGhpcy5yZXNpemUoKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGJ1ZiA9IHRoaXMuY2xvbmUoKTtcbiAgICAgIHRoaXMuYnVmWzBdID0gdmFsO1xuICAgICAgYnVmLmNvcHkodGhpcy5idWYsIDEsIDAsIGxlbmd0aCk7XG4gICAgfVxuICB9XG4gIGFwcGVuZCh2YWwpIHtcbiAgICBjb25zdCBsZW5ndGggPSB0aGlzLmxlbmd0aCsrO1xuICAgIGlmIChsZW5ndGggPT09IHRoaXMuc2l6ZSkge1xuICAgICAgdGhpcy5yZXNpemUoKTtcbiAgICB9XG4gICAgdGhpcy5idWZbbGVuZ3RoXSA9IHZhbDtcbiAgfVxuICBjbG9uZSgpIHtcbiAgICByZXR1cm4gQnVmZmVyLmZyb20odGhpcy5idWYuc2xpY2UoMCwgdGhpcy5sZW5ndGgpKTtcbiAgfVxuICByZXNpemUoKSB7XG4gICAgY29uc3QgbGVuZ3RoID0gdGhpcy5sZW5ndGg7XG4gICAgdGhpcy5zaXplID0gdGhpcy5zaXplICogMjtcbiAgICBjb25zdCBidWYgPSBCdWZmZXIuYWxsb2NVbnNhZmUodGhpcy5zaXplKTtcbiAgICB0aGlzLmJ1Zi5jb3B5KGJ1ZiwgMCwgMCwgbGVuZ3RoKTtcbiAgICB0aGlzLmJ1ZiA9IGJ1ZjtcbiAgfVxuICB0b1N0cmluZyhlbmNvZGluZykge1xuICAgIGlmIChlbmNvZGluZykge1xuICAgICAgcmV0dXJuIHRoaXMuYnVmLnNsaWNlKDAsIHRoaXMubGVuZ3RoKS50b1N0cmluZyhlbmNvZGluZyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBVaW50OEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMuYnVmLnNsaWNlKDAsIHRoaXMubGVuZ3RoKSk7XG4gICAgfVxuICB9XG4gIHRvSlNPTigpIHtcbiAgICByZXR1cm4gdGhpcy50b1N0cmluZyhcInV0ZjhcIik7XG4gIH1cbiAgcmVzZXQoKSB7XG4gICAgdGhpcy5sZW5ndGggPSAwO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFJlc2l6ZWFibGVCdWZmZXI7XG4iLCAiaW1wb3J0IFJlc2l6ZWFibGVCdWZmZXIgZnJvbSBcIi4uL3V0aWxzL1Jlc2l6ZWFibGVCdWZmZXIuanNcIjtcblxuLy8gd2hpdGUgc3BhY2UgY2hhcmFjdGVyc1xuLy8gaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvV2hpdGVzcGFjZV9jaGFyYWN0ZXJcbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvR3VpZGUvUmVndWxhcl9FeHByZXNzaW9ucy9DaGFyYWN0ZXJfQ2xhc3NlcyNUeXBlc1xuLy8gXFxmXFxuXFxyXFx0XFx2XFx1MDBhMFxcdTE2ODBcXHUyMDAwLVxcdTIwMGFcXHUyMDI4XFx1MjAyOVxcdTIwMmZcXHUyMDVmXFx1MzAwMFxcdWZlZmZcbmNvbnN0IG5wID0gMTI7XG5jb25zdCBjciA9IDEzOyAvLyBgXFxyYCwgY2FycmlhZ2UgcmV0dXJuLCAweDBEIGluIGhleGFkXHUwMEU5Y2ltYWwsIDEzIGluIGRlY2ltYWxcbmNvbnN0IG5sID0gMTA7IC8vIGBcXG5gLCBuZXdsaW5lLCAweDBBIGluIGhleGFkZWNpbWFsLCAxMCBpbiBkZWNpbWFsXG5jb25zdCBzcGFjZSA9IDMyO1xuY29uc3QgdGFiID0gOTtcblxuY29uc3QgaW5pdF9zdGF0ZSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gIHJldHVybiB7XG4gICAgYm9tU2tpcHBlZDogZmFsc2UsXG4gICAgYnVmQnl0ZXNTdGFydDogMCxcbiAgICBjYXN0RmllbGQ6IG9wdGlvbnMuY2FzdF9mdW5jdGlvbixcbiAgICBjb21tZW50aW5nOiBmYWxzZSxcbiAgICAvLyBDdXJyZW50IGVycm9yIGVuY291bnRlcmVkIGJ5IGEgcmVjb3JkXG4gICAgZXJyb3I6IHVuZGVmaW5lZCxcbiAgICBlbmFibGVkOiBvcHRpb25zLmZyb21fbGluZSA9PT0gMSxcbiAgICBlc2NhcGluZzogZmFsc2UsXG4gICAgZXNjYXBlSXNRdW90ZTpcbiAgICAgIEJ1ZmZlci5pc0J1ZmZlcihvcHRpb25zLmVzY2FwZSkgJiZcbiAgICAgIEJ1ZmZlci5pc0J1ZmZlcihvcHRpb25zLnF1b3RlKSAmJlxuICAgICAgQnVmZmVyLmNvbXBhcmUob3B0aW9ucy5lc2NhcGUsIG9wdGlvbnMucXVvdGUpID09PSAwLFxuICAgIC8vIGNvbHVtbnMgY2FuIGJlIGBmYWxzZWAsIGB0cnVlYCwgYEFycmF5YFxuICAgIGV4cGVjdGVkUmVjb3JkTGVuZ3RoOiBBcnJheS5pc0FycmF5KG9wdGlvbnMuY29sdW1ucylcbiAgICAgID8gb3B0aW9ucy5jb2x1bW5zLmxlbmd0aFxuICAgICAgOiB1bmRlZmluZWQsXG4gICAgZmllbGQ6IG5ldyBSZXNpemVhYmxlQnVmZmVyKDIwKSxcbiAgICBmaXJzdExpbmVUb0hlYWRlcnM6IG9wdGlvbnMuY2FzdF9maXJzdF9saW5lX3RvX2hlYWRlcixcbiAgICBuZWVkTW9yZURhdGFTaXplOiBNYXRoLm1heChcbiAgICAgIC8vIFNraXAgaWYgdGhlIHJlbWFpbmluZyBidWZmZXIgc21hbGxlciB0aGFuIGNvbW1lbnRcbiAgICAgIG9wdGlvbnMuY29tbWVudCAhPT0gbnVsbCA/IG9wdGlvbnMuY29tbWVudC5sZW5ndGggOiAwLFxuICAgICAgLy8gU2tpcCBpZiB0aGUgcmVtYWluaW5nIGJ1ZmZlciBjYW4gYmUgZGVsaW1pdGVyXG4gICAgICAuLi5vcHRpb25zLmRlbGltaXRlci5tYXAoKGRlbGltaXRlcikgPT4gZGVsaW1pdGVyLmxlbmd0aCksXG4gICAgICAvLyBTa2lwIGlmIHRoZSByZW1haW5pbmcgYnVmZmVyIGNhbiBiZSBlc2NhcGUgc2VxdWVuY2VcbiAgICAgIG9wdGlvbnMucXVvdGUgIT09IG51bGwgPyBvcHRpb25zLnF1b3RlLmxlbmd0aCA6IDAsXG4gICAgKSxcbiAgICBwcmV2aW91c0J1ZjogdW5kZWZpbmVkLFxuICAgIHF1b3Rpbmc6IGZhbHNlLFxuICAgIHN0b3A6IGZhbHNlLFxuICAgIHJhd0J1ZmZlcjogbmV3IFJlc2l6ZWFibGVCdWZmZXIoMTAwKSxcbiAgICByZWNvcmQ6IFtdLFxuICAgIHJlY29yZEhhc0Vycm9yOiBmYWxzZSxcbiAgICByZWNvcmRfbGVuZ3RoOiAwLFxuICAgIHJlY29yZERlbGltaXRlck1heExlbmd0aDpcbiAgICAgIG9wdGlvbnMucmVjb3JkX2RlbGltaXRlci5sZW5ndGggPT09IDBcbiAgICAgICAgPyAwXG4gICAgICAgIDogTWF0aC5tYXgoLi4ub3B0aW9ucy5yZWNvcmRfZGVsaW1pdGVyLm1hcCgodikgPT4gdi5sZW5ndGgpKSxcbiAgICB0cmltQ2hhcnM6IFtcbiAgICAgIEJ1ZmZlci5mcm9tKFwiIFwiLCBvcHRpb25zLmVuY29kaW5nKVswXSxcbiAgICAgIEJ1ZmZlci5mcm9tKFwiXFx0XCIsIG9wdGlvbnMuZW5jb2RpbmcpWzBdLFxuICAgIF0sXG4gICAgd2FzUXVvdGluZzogZmFsc2UsXG4gICAgd2FzUm93RGVsaW1pdGVyOiBmYWxzZSxcbiAgICB0aW1jaGFyczogW1xuICAgICAgQnVmZmVyLmZyb20oQnVmZmVyLmZyb20oW2NyXSwgXCJ1dGY4XCIpLnRvU3RyaW5nKCksIG9wdGlvbnMuZW5jb2RpbmcpLFxuICAgICAgQnVmZmVyLmZyb20oQnVmZmVyLmZyb20oW25sXSwgXCJ1dGY4XCIpLnRvU3RyaW5nKCksIG9wdGlvbnMuZW5jb2RpbmcpLFxuICAgICAgQnVmZmVyLmZyb20oQnVmZmVyLmZyb20oW25wXSwgXCJ1dGY4XCIpLnRvU3RyaW5nKCksIG9wdGlvbnMuZW5jb2RpbmcpLFxuICAgICAgQnVmZmVyLmZyb20oQnVmZmVyLmZyb20oW3NwYWNlXSwgXCJ1dGY4XCIpLnRvU3RyaW5nKCksIG9wdGlvbnMuZW5jb2RpbmcpLFxuICAgICAgQnVmZmVyLmZyb20oQnVmZmVyLmZyb20oW3RhYl0sIFwidXRmOFwiKS50b1N0cmluZygpLCBvcHRpb25zLmVuY29kaW5nKSxcbiAgICBdLFxuICB9O1xufTtcblxuZXhwb3J0IHsgaW5pdF9zdGF0ZSB9O1xuIiwgImNvbnN0IHVuZGVyc2NvcmUgPSBmdW5jdGlvbiAoc3RyKSB7XG4gIHJldHVybiBzdHIucmVwbGFjZSgvKFtBLVpdKS9nLCBmdW5jdGlvbiAoXywgbWF0Y2gpIHtcbiAgICByZXR1cm4gXCJfXCIgKyBtYXRjaC50b0xvd2VyQ2FzZSgpO1xuICB9KTtcbn07XG5cbmV4cG9ydCB7IHVuZGVyc2NvcmUgfTtcbiIsICJpbXBvcnQgeyBub3JtYWxpemVfY29sdW1uc19hcnJheSB9IGZyb20gXCIuL25vcm1hbGl6ZV9jb2x1bW5zX2FycmF5LmpzXCI7XG5pbXBvcnQgeyBDc3ZFcnJvciB9IGZyb20gXCIuL0NzdkVycm9yLmpzXCI7XG5pbXBvcnQgeyB1bmRlcnNjb3JlIH0gZnJvbSBcIi4uL3V0aWxzL3VuZGVyc2NvcmUuanNcIjtcblxuY29uc3Qgbm9ybWFsaXplX29wdGlvbnMgPSBmdW5jdGlvbiAob3B0cykge1xuICBjb25zdCBvcHRpb25zID0ge307XG4gIC8vIE1lcmdlIHdpdGggdXNlciBvcHRpb25zXG4gIGZvciAoY29uc3Qgb3B0IGluIG9wdHMpIHtcbiAgICBvcHRpb25zW3VuZGVyc2NvcmUob3B0KV0gPSBvcHRzW29wdF07XG4gIH1cbiAgLy8gTm9ybWFsaXplIG9wdGlvbiBgZW5jb2RpbmdgXG4gIC8vIE5vdGU6IGRlZmluZWQgZmlyc3QgYmVjYXVzZSBvdGhlciBvcHRpb25zIGRlcGVuZHMgb24gaXRcbiAgLy8gdG8gY29udmVydCBjaGFycy9zdHJpbmdzIGludG8gYnVmZmVycy5cbiAgaWYgKG9wdGlvbnMuZW5jb2RpbmcgPT09IHVuZGVmaW5lZCB8fCBvcHRpb25zLmVuY29kaW5nID09PSB0cnVlKSB7XG4gICAgb3B0aW9ucy5lbmNvZGluZyA9IFwidXRmOFwiO1xuICB9IGVsc2UgaWYgKG9wdGlvbnMuZW5jb2RpbmcgPT09IG51bGwgfHwgb3B0aW9ucy5lbmNvZGluZyA9PT0gZmFsc2UpIHtcbiAgICBvcHRpb25zLmVuY29kaW5nID0gbnVsbDtcbiAgfSBlbHNlIGlmIChcbiAgICB0eXBlb2Ygb3B0aW9ucy5lbmNvZGluZyAhPT0gXCJzdHJpbmdcIiAmJlxuICAgIG9wdGlvbnMuZW5jb2RpbmcgIT09IG51bGxcbiAgKSB7XG4gICAgdGhyb3cgbmV3IENzdkVycm9yKFxuICAgICAgXCJDU1ZfSU5WQUxJRF9PUFRJT05fRU5DT0RJTkdcIixcbiAgICAgIFtcbiAgICAgICAgXCJJbnZhbGlkIG9wdGlvbiBlbmNvZGluZzpcIixcbiAgICAgICAgXCJlbmNvZGluZyBtdXN0IGJlIGEgc3RyaW5nIG9yIG51bGwgdG8gcmV0dXJuIGEgYnVmZmVyLFwiLFxuICAgICAgICBgZ290ICR7SlNPTi5zdHJpbmdpZnkob3B0aW9ucy5lbmNvZGluZyl9YCxcbiAgICAgIF0sXG4gICAgICBvcHRpb25zLFxuICAgICk7XG4gIH1cbiAgLy8gTm9ybWFsaXplIG9wdGlvbiBgYm9tYFxuICBpZiAoXG4gICAgb3B0aW9ucy5ib20gPT09IHVuZGVmaW5lZCB8fFxuICAgIG9wdGlvbnMuYm9tID09PSBudWxsIHx8XG4gICAgb3B0aW9ucy5ib20gPT09IGZhbHNlXG4gICkge1xuICAgIG9wdGlvbnMuYm9tID0gZmFsc2U7XG4gIH0gZWxzZSBpZiAob3B0aW9ucy5ib20gIT09IHRydWUpIHtcbiAgICB0aHJvdyBuZXcgQ3N2RXJyb3IoXG4gICAgICBcIkNTVl9JTlZBTElEX09QVElPTl9CT01cIixcbiAgICAgIFtcbiAgICAgICAgXCJJbnZhbGlkIG9wdGlvbiBib206XCIsXG4gICAgICAgIFwiYm9tIG11c3QgYmUgdHJ1ZSxcIixcbiAgICAgICAgYGdvdCAke0pTT04uc3RyaW5naWZ5KG9wdGlvbnMuYm9tKX1gLFxuICAgICAgXSxcbiAgICAgIG9wdGlvbnMsXG4gICAgKTtcbiAgfVxuICAvLyBOb3JtYWxpemUgb3B0aW9uIGBjYXN0YFxuICBvcHRpb25zLmNhc3RfZnVuY3Rpb24gPSBudWxsO1xuICBpZiAoXG4gICAgb3B0aW9ucy5jYXN0ID09PSB1bmRlZmluZWQgfHxcbiAgICBvcHRpb25zLmNhc3QgPT09IG51bGwgfHxcbiAgICBvcHRpb25zLmNhc3QgPT09IGZhbHNlIHx8XG4gICAgb3B0aW9ucy5jYXN0ID09PSBcIlwiXG4gICkge1xuICAgIG9wdGlvbnMuY2FzdCA9IHVuZGVmaW5lZDtcbiAgfSBlbHNlIGlmICh0eXBlb2Ygb3B0aW9ucy5jYXN0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBvcHRpb25zLmNhc3RfZnVuY3Rpb24gPSBvcHRpb25zLmNhc3Q7XG4gICAgb3B0aW9ucy5jYXN0ID0gdHJ1ZTtcbiAgfSBlbHNlIGlmIChvcHRpb25zLmNhc3QgIT09IHRydWUpIHtcbiAgICB0aHJvdyBuZXcgQ3N2RXJyb3IoXG4gICAgICBcIkNTVl9JTlZBTElEX09QVElPTl9DQVNUXCIsXG4gICAgICBbXG4gICAgICAgIFwiSW52YWxpZCBvcHRpb24gY2FzdDpcIixcbiAgICAgICAgXCJjYXN0IG11c3QgYmUgdHJ1ZSBvciBhIGZ1bmN0aW9uLFwiLFxuICAgICAgICBgZ290ICR7SlNPTi5zdHJpbmdpZnkob3B0aW9ucy5jYXN0KX1gLFxuICAgICAgXSxcbiAgICAgIG9wdGlvbnMsXG4gICAgKTtcbiAgfVxuICAvLyBOb3JtYWxpemUgb3B0aW9uIGBjYXN0X2RhdGVgXG4gIGlmIChcbiAgICBvcHRpb25zLmNhc3RfZGF0ZSA9PT0gdW5kZWZpbmVkIHx8XG4gICAgb3B0aW9ucy5jYXN0X2RhdGUgPT09IG51bGwgfHxcbiAgICBvcHRpb25zLmNhc3RfZGF0ZSA9PT0gZmFsc2UgfHxcbiAgICBvcHRpb25zLmNhc3RfZGF0ZSA9PT0gXCJcIlxuICApIHtcbiAgICBvcHRpb25zLmNhc3RfZGF0ZSA9IGZhbHNlO1xuICB9IGVsc2UgaWYgKG9wdGlvbnMuY2FzdF9kYXRlID09PSB0cnVlKSB7XG4gICAgb3B0aW9ucy5jYXN0X2RhdGUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIGNvbnN0IGRhdGUgPSBEYXRlLnBhcnNlKHZhbHVlKTtcbiAgICAgIHJldHVybiAhaXNOYU4oZGF0ZSkgPyBuZXcgRGF0ZShkYXRlKSA6IHZhbHVlO1xuICAgIH07XG4gIH0gZWxzZSBpZiAodHlwZW9mIG9wdGlvbnMuY2FzdF9kYXRlICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICB0aHJvdyBuZXcgQ3N2RXJyb3IoXG4gICAgICBcIkNTVl9JTlZBTElEX09QVElPTl9DQVNUX0RBVEVcIixcbiAgICAgIFtcbiAgICAgICAgXCJJbnZhbGlkIG9wdGlvbiBjYXN0X2RhdGU6XCIsXG4gICAgICAgIFwiY2FzdF9kYXRlIG11c3QgYmUgdHJ1ZSBvciBhIGZ1bmN0aW9uLFwiLFxuICAgICAgICBgZ290ICR7SlNPTi5zdHJpbmdpZnkob3B0aW9ucy5jYXN0X2RhdGUpfWAsXG4gICAgICBdLFxuICAgICAgb3B0aW9ucyxcbiAgICApO1xuICB9XG4gIC8vIE5vcm1hbGl6ZSBvcHRpb24gYGNvbHVtbnNgXG4gIG9wdGlvbnMuY2FzdF9maXJzdF9saW5lX3RvX2hlYWRlciA9IG51bGw7XG4gIGlmIChvcHRpb25zLmNvbHVtbnMgPT09IHRydWUpIHtcbiAgICAvLyBGaWVsZHMgaW4gdGhlIGZpcnN0IGxpbmUgYXJlIGNvbnZlcnRlZCBhcy1pcyB0byBjb2x1bW5zXG4gICAgb3B0aW9ucy5jYXN0X2ZpcnN0X2xpbmVfdG9faGVhZGVyID0gdW5kZWZpbmVkO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBvcHRpb25zLmNvbHVtbnMgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIG9wdGlvbnMuY2FzdF9maXJzdF9saW5lX3RvX2hlYWRlciA9IG9wdGlvbnMuY29sdW1ucztcbiAgICBvcHRpb25zLmNvbHVtbnMgPSB0cnVlO1xuICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkob3B0aW9ucy5jb2x1bW5zKSkge1xuICAgIG9wdGlvbnMuY29sdW1ucyA9IG5vcm1hbGl6ZV9jb2x1bW5zX2FycmF5KG9wdGlvbnMuY29sdW1ucyk7XG4gIH0gZWxzZSBpZiAoXG4gICAgb3B0aW9ucy5jb2x1bW5zID09PSB1bmRlZmluZWQgfHxcbiAgICBvcHRpb25zLmNvbHVtbnMgPT09IG51bGwgfHxcbiAgICBvcHRpb25zLmNvbHVtbnMgPT09IGZhbHNlXG4gICkge1xuICAgIG9wdGlvbnMuY29sdW1ucyA9IGZhbHNlO1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBDc3ZFcnJvcihcbiAgICAgIFwiQ1NWX0lOVkFMSURfT1BUSU9OX0NPTFVNTlNcIixcbiAgICAgIFtcbiAgICAgICAgXCJJbnZhbGlkIG9wdGlvbiBjb2x1bW5zOlwiLFxuICAgICAgICBcImV4cGVjdCBhbiBhcnJheSwgYSBmdW5jdGlvbiBvciB0cnVlLFwiLFxuICAgICAgICBgZ290ICR7SlNPTi5zdHJpbmdpZnkob3B0aW9ucy5jb2x1bW5zKX1gLFxuICAgICAgXSxcbiAgICAgIG9wdGlvbnMsXG4gICAgKTtcbiAgfVxuICAvLyBOb3JtYWxpemUgb3B0aW9uIGBncm91cF9jb2x1bW5zX2J5X25hbWVgXG4gIGlmIChcbiAgICBvcHRpb25zLmdyb3VwX2NvbHVtbnNfYnlfbmFtZSA9PT0gdW5kZWZpbmVkIHx8XG4gICAgb3B0aW9ucy5ncm91cF9jb2x1bW5zX2J5X25hbWUgPT09IG51bGwgfHxcbiAgICBvcHRpb25zLmdyb3VwX2NvbHVtbnNfYnlfbmFtZSA9PT0gZmFsc2VcbiAgKSB7XG4gICAgb3B0aW9ucy5ncm91cF9jb2x1bW5zX2J5X25hbWUgPSBmYWxzZTtcbiAgfSBlbHNlIGlmIChvcHRpb25zLmdyb3VwX2NvbHVtbnNfYnlfbmFtZSAhPT0gdHJ1ZSkge1xuICAgIHRocm93IG5ldyBDc3ZFcnJvcihcbiAgICAgIFwiQ1NWX0lOVkFMSURfT1BUSU9OX0dST1VQX0NPTFVNTlNfQllfTkFNRVwiLFxuICAgICAgW1xuICAgICAgICBcIkludmFsaWQgb3B0aW9uIGdyb3VwX2NvbHVtbnNfYnlfbmFtZTpcIixcbiAgICAgICAgXCJleHBlY3QgYW4gYm9vbGVhbixcIixcbiAgICAgICAgYGdvdCAke0pTT04uc3RyaW5naWZ5KG9wdGlvbnMuZ3JvdXBfY29sdW1uc19ieV9uYW1lKX1gLFxuICAgICAgXSxcbiAgICAgIG9wdGlvbnMsXG4gICAgKTtcbiAgfSBlbHNlIGlmIChvcHRpb25zLmNvbHVtbnMgPT09IGZhbHNlKSB7XG4gICAgdGhyb3cgbmV3IENzdkVycm9yKFxuICAgICAgXCJDU1ZfSU5WQUxJRF9PUFRJT05fR1JPVVBfQ09MVU1OU19CWV9OQU1FXCIsXG4gICAgICBbXG4gICAgICAgIFwiSW52YWxpZCBvcHRpb24gZ3JvdXBfY29sdW1uc19ieV9uYW1lOlwiLFxuICAgICAgICBcInRoZSBgY29sdW1uc2AgbW9kZSBtdXN0IGJlIGFjdGl2YXRlZC5cIixcbiAgICAgIF0sXG4gICAgICBvcHRpb25zLFxuICAgICk7XG4gIH1cbiAgLy8gTm9ybWFsaXplIG9wdGlvbiBgY29tbWVudGBcbiAgaWYgKFxuICAgIG9wdGlvbnMuY29tbWVudCA9PT0gdW5kZWZpbmVkIHx8XG4gICAgb3B0aW9ucy5jb21tZW50ID09PSBudWxsIHx8XG4gICAgb3B0aW9ucy5jb21tZW50ID09PSBmYWxzZSB8fFxuICAgIG9wdGlvbnMuY29tbWVudCA9PT0gXCJcIlxuICApIHtcbiAgICBvcHRpb25zLmNvbW1lbnQgPSBudWxsO1xuICB9IGVsc2Uge1xuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5jb21tZW50ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBvcHRpb25zLmNvbW1lbnQgPSBCdWZmZXIuZnJvbShvcHRpb25zLmNvbW1lbnQsIG9wdGlvbnMuZW5jb2RpbmcpO1xuICAgIH1cbiAgICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihvcHRpb25zLmNvbW1lbnQpKSB7XG4gICAgICB0aHJvdyBuZXcgQ3N2RXJyb3IoXG4gICAgICAgIFwiQ1NWX0lOVkFMSURfT1BUSU9OX0NPTU1FTlRcIixcbiAgICAgICAgW1xuICAgICAgICAgIFwiSW52YWxpZCBvcHRpb24gY29tbWVudDpcIixcbiAgICAgICAgICBcImNvbW1lbnQgbXVzdCBiZSBhIGJ1ZmZlciBvciBhIHN0cmluZyxcIixcbiAgICAgICAgICBgZ290ICR7SlNPTi5zdHJpbmdpZnkob3B0aW9ucy5jb21tZW50KX1gLFxuICAgICAgICBdLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgKTtcbiAgICB9XG4gIH1cbiAgLy8gTm9ybWFsaXplIG9wdGlvbiBgY29tbWVudF9ub19pbmZpeGBcbiAgaWYgKFxuICAgIG9wdGlvbnMuY29tbWVudF9ub19pbmZpeCA9PT0gdW5kZWZpbmVkIHx8XG4gICAgb3B0aW9ucy5jb21tZW50X25vX2luZml4ID09PSBudWxsIHx8XG4gICAgb3B0aW9ucy5jb21tZW50X25vX2luZml4ID09PSBmYWxzZVxuICApIHtcbiAgICBvcHRpb25zLmNvbW1lbnRfbm9faW5maXggPSBmYWxzZTtcbiAgfSBlbHNlIGlmIChvcHRpb25zLmNvbW1lbnRfbm9faW5maXggIT09IHRydWUpIHtcbiAgICB0aHJvdyBuZXcgQ3N2RXJyb3IoXG4gICAgICBcIkNTVl9JTlZBTElEX09QVElPTl9DT01NRU5UXCIsXG4gICAgICBbXG4gICAgICAgIFwiSW52YWxpZCBvcHRpb24gY29tbWVudF9ub19pbmZpeDpcIixcbiAgICAgICAgXCJ2YWx1ZSBtdXN0IGJlIGEgYm9vbGVhbixcIixcbiAgICAgICAgYGdvdCAke0pTT04uc3RyaW5naWZ5KG9wdGlvbnMuY29tbWVudF9ub19pbmZpeCl9YCxcbiAgICAgIF0sXG4gICAgICBvcHRpb25zLFxuICAgICk7XG4gIH1cbiAgLy8gTm9ybWFsaXplIG9wdGlvbiBgZGVsaW1pdGVyYFxuICBjb25zdCBkZWxpbWl0ZXJfanNvbiA9IEpTT04uc3RyaW5naWZ5KG9wdGlvbnMuZGVsaW1pdGVyKTtcbiAgaWYgKCFBcnJheS5pc0FycmF5KG9wdGlvbnMuZGVsaW1pdGVyKSlcbiAgICBvcHRpb25zLmRlbGltaXRlciA9IFtvcHRpb25zLmRlbGltaXRlcl07XG4gIGlmIChvcHRpb25zLmRlbGltaXRlci5sZW5ndGggPT09IDApIHtcbiAgICB0aHJvdyBuZXcgQ3N2RXJyb3IoXG4gICAgICBcIkNTVl9JTlZBTElEX09QVElPTl9ERUxJTUlURVJcIixcbiAgICAgIFtcbiAgICAgICAgXCJJbnZhbGlkIG9wdGlvbiBkZWxpbWl0ZXI6XCIsXG4gICAgICAgIFwiZGVsaW1pdGVyIG11c3QgYmUgYSBub24gZW1wdHkgc3RyaW5nIG9yIGJ1ZmZlciBvciBhcnJheSBvZiBzdHJpbmd8YnVmZmVyLFwiLFxuICAgICAgICBgZ290ICR7ZGVsaW1pdGVyX2pzb259YCxcbiAgICAgIF0sXG4gICAgICBvcHRpb25zLFxuICAgICk7XG4gIH1cbiAgb3B0aW9ucy5kZWxpbWl0ZXIgPSBvcHRpb25zLmRlbGltaXRlci5tYXAoZnVuY3Rpb24gKGRlbGltaXRlcikge1xuICAgIGlmIChkZWxpbWl0ZXIgPT09IHVuZGVmaW5lZCB8fCBkZWxpbWl0ZXIgPT09IG51bGwgfHwgZGVsaW1pdGVyID09PSBmYWxzZSkge1xuICAgICAgcmV0dXJuIEJ1ZmZlci5mcm9tKFwiLFwiLCBvcHRpb25zLmVuY29kaW5nKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBkZWxpbWl0ZXIgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIGRlbGltaXRlciA9IEJ1ZmZlci5mcm9tKGRlbGltaXRlciwgb3B0aW9ucy5lbmNvZGluZyk7XG4gICAgfVxuICAgIGlmICghQnVmZmVyLmlzQnVmZmVyKGRlbGltaXRlcikgfHwgZGVsaW1pdGVyLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IENzdkVycm9yKFxuICAgICAgICBcIkNTVl9JTlZBTElEX09QVElPTl9ERUxJTUlURVJcIixcbiAgICAgICAgW1xuICAgICAgICAgIFwiSW52YWxpZCBvcHRpb24gZGVsaW1pdGVyOlwiLFxuICAgICAgICAgIFwiZGVsaW1pdGVyIG11c3QgYmUgYSBub24gZW1wdHkgc3RyaW5nIG9yIGJ1ZmZlciBvciBhcnJheSBvZiBzdHJpbmd8YnVmZmVyLFwiLFxuICAgICAgICAgIGBnb3QgJHtkZWxpbWl0ZXJfanNvbn1gLFxuICAgICAgICBdLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIGRlbGltaXRlcjtcbiAgfSk7XG4gIC8vIE5vcm1hbGl6ZSBvcHRpb24gYGVzY2FwZWBcbiAgaWYgKG9wdGlvbnMuZXNjYXBlID09PSB1bmRlZmluZWQgfHwgb3B0aW9ucy5lc2NhcGUgPT09IHRydWUpIHtcbiAgICBvcHRpb25zLmVzY2FwZSA9IEJ1ZmZlci5mcm9tKCdcIicsIG9wdGlvbnMuZW5jb2RpbmcpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBvcHRpb25zLmVzY2FwZSA9PT0gXCJzdHJpbmdcIikge1xuICAgIG9wdGlvbnMuZXNjYXBlID0gQnVmZmVyLmZyb20ob3B0aW9ucy5lc2NhcGUsIG9wdGlvbnMuZW5jb2RpbmcpO1xuICB9IGVsc2UgaWYgKG9wdGlvbnMuZXNjYXBlID09PSBudWxsIHx8IG9wdGlvbnMuZXNjYXBlID09PSBmYWxzZSkge1xuICAgIG9wdGlvbnMuZXNjYXBlID0gbnVsbDtcbiAgfVxuICBpZiAob3B0aW9ucy5lc2NhcGUgIT09IG51bGwpIHtcbiAgICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihvcHRpb25zLmVzY2FwZSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYEludmFsaWQgT3B0aW9uOiBlc2NhcGUgbXVzdCBiZSBhIGJ1ZmZlciwgYSBzdHJpbmcgb3IgYSBib29sZWFuLCBnb3QgJHtKU09OLnN0cmluZ2lmeShvcHRpb25zLmVzY2FwZSl9YCxcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIC8vIE5vcm1hbGl6ZSBvcHRpb24gYGZyb21gXG4gIGlmIChvcHRpb25zLmZyb20gPT09IHVuZGVmaW5lZCB8fCBvcHRpb25zLmZyb20gPT09IG51bGwpIHtcbiAgICBvcHRpb25zLmZyb20gPSAxO1xuICB9IGVsc2Uge1xuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5mcm9tID09PSBcInN0cmluZ1wiICYmIC9cXGQrLy50ZXN0KG9wdGlvbnMuZnJvbSkpIHtcbiAgICAgIG9wdGlvbnMuZnJvbSA9IHBhcnNlSW50KG9wdGlvbnMuZnJvbSk7XG4gICAgfVxuICAgIGlmIChOdW1iZXIuaXNJbnRlZ2VyKG9wdGlvbnMuZnJvbSkpIHtcbiAgICAgIGlmIChvcHRpb25zLmZyb20gPCAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgSW52YWxpZCBPcHRpb246IGZyb20gbXVzdCBiZSBhIHBvc2l0aXZlIGludGVnZXIsIGdvdCAke0pTT04uc3RyaW5naWZ5KG9wdHMuZnJvbSl9YCxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgSW52YWxpZCBPcHRpb246IGZyb20gbXVzdCBiZSBhbiBpbnRlZ2VyLCBnb3QgJHtKU09OLnN0cmluZ2lmeShvcHRpb25zLmZyb20pfWAsXG4gICAgICApO1xuICAgIH1cbiAgfVxuICAvLyBOb3JtYWxpemUgb3B0aW9uIGBmcm9tX2xpbmVgXG4gIGlmIChvcHRpb25zLmZyb21fbGluZSA9PT0gdW5kZWZpbmVkIHx8IG9wdGlvbnMuZnJvbV9saW5lID09PSBudWxsKSB7XG4gICAgb3B0aW9ucy5mcm9tX2xpbmUgPSAxO1xuICB9IGVsc2Uge1xuICAgIGlmIChcbiAgICAgIHR5cGVvZiBvcHRpb25zLmZyb21fbGluZSA9PT0gXCJzdHJpbmdcIiAmJlxuICAgICAgL1xcZCsvLnRlc3Qob3B0aW9ucy5mcm9tX2xpbmUpXG4gICAgKSB7XG4gICAgICBvcHRpb25zLmZyb21fbGluZSA9IHBhcnNlSW50KG9wdGlvbnMuZnJvbV9saW5lKTtcbiAgICB9XG4gICAgaWYgKE51bWJlci5pc0ludGVnZXIob3B0aW9ucy5mcm9tX2xpbmUpKSB7XG4gICAgICBpZiAob3B0aW9ucy5mcm9tX2xpbmUgPD0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYEludmFsaWQgT3B0aW9uOiBmcm9tX2xpbmUgbXVzdCBiZSBhIHBvc2l0aXZlIGludGVnZXIgZ3JlYXRlciB0aGFuIDAsIGdvdCAke0pTT04uc3RyaW5naWZ5KG9wdHMuZnJvbV9saW5lKX1gLFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBJbnZhbGlkIE9wdGlvbjogZnJvbV9saW5lIG11c3QgYmUgYW4gaW50ZWdlciwgZ290ICR7SlNPTi5zdHJpbmdpZnkob3B0cy5mcm9tX2xpbmUpfWAsXG4gICAgICApO1xuICAgIH1cbiAgfVxuICAvLyBOb3JtYWxpemUgb3B0aW9ucyBgaWdub3JlX2xhc3RfZGVsaW1pdGVyc2BcbiAgaWYgKFxuICAgIG9wdGlvbnMuaWdub3JlX2xhc3RfZGVsaW1pdGVycyA9PT0gdW5kZWZpbmVkIHx8XG4gICAgb3B0aW9ucy5pZ25vcmVfbGFzdF9kZWxpbWl0ZXJzID09PSBudWxsXG4gICkge1xuICAgIG9wdGlvbnMuaWdub3JlX2xhc3RfZGVsaW1pdGVycyA9IGZhbHNlO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBvcHRpb25zLmlnbm9yZV9sYXN0X2RlbGltaXRlcnMgPT09IFwibnVtYmVyXCIpIHtcbiAgICBvcHRpb25zLmlnbm9yZV9sYXN0X2RlbGltaXRlcnMgPSBNYXRoLmZsb29yKG9wdGlvbnMuaWdub3JlX2xhc3RfZGVsaW1pdGVycyk7XG4gICAgaWYgKG9wdGlvbnMuaWdub3JlX2xhc3RfZGVsaW1pdGVycyA9PT0gMCkge1xuICAgICAgb3B0aW9ucy5pZ25vcmVfbGFzdF9kZWxpbWl0ZXJzID0gZmFsc2U7XG4gICAgfVxuICB9IGVsc2UgaWYgKHR5cGVvZiBvcHRpb25zLmlnbm9yZV9sYXN0X2RlbGltaXRlcnMgIT09IFwiYm9vbGVhblwiKSB7XG4gICAgdGhyb3cgbmV3IENzdkVycm9yKFxuICAgICAgXCJDU1ZfSU5WQUxJRF9PUFRJT05fSUdOT1JFX0xBU1RfREVMSU1JVEVSU1wiLFxuICAgICAgW1xuICAgICAgICBcIkludmFsaWQgb3B0aW9uIGBpZ25vcmVfbGFzdF9kZWxpbWl0ZXJzYDpcIixcbiAgICAgICAgXCJ0aGUgdmFsdWUgbXVzdCBiZSBhIGJvb2xlYW4gdmFsdWUgb3IgYW4gaW50ZWdlcixcIixcbiAgICAgICAgYGdvdCAke0pTT04uc3RyaW5naWZ5KG9wdGlvbnMuaWdub3JlX2xhc3RfZGVsaW1pdGVycyl9YCxcbiAgICAgIF0sXG4gICAgICBvcHRpb25zLFxuICAgICk7XG4gIH1cbiAgaWYgKG9wdGlvbnMuaWdub3JlX2xhc3RfZGVsaW1pdGVycyA9PT0gdHJ1ZSAmJiBvcHRpb25zLmNvbHVtbnMgPT09IGZhbHNlKSB7XG4gICAgdGhyb3cgbmV3IENzdkVycm9yKFxuICAgICAgXCJDU1ZfSUdOT1JFX0xBU1RfREVMSU1JVEVSU19SRVFVSVJFU19DT0xVTU5TXCIsXG4gICAgICBbXG4gICAgICAgIFwiVGhlIG9wdGlvbiBgaWdub3JlX2xhc3RfZGVsaW1pdGVyc2BcIixcbiAgICAgICAgXCJyZXF1aXJlcyB0aGUgYWN0aXZhdGlvbiBvZiB0aGUgYGNvbHVtbnNgIG9wdGlvblwiLFxuICAgICAgXSxcbiAgICAgIG9wdGlvbnMsXG4gICAgKTtcbiAgfVxuICAvLyBOb3JtYWxpemUgb3B0aW9uIGBpbmZvYFxuICBpZiAoXG4gICAgb3B0aW9ucy5pbmZvID09PSB1bmRlZmluZWQgfHxcbiAgICBvcHRpb25zLmluZm8gPT09IG51bGwgfHxcbiAgICBvcHRpb25zLmluZm8gPT09IGZhbHNlXG4gICkge1xuICAgIG9wdGlvbnMuaW5mbyA9IGZhbHNlO1xuICB9IGVsc2UgaWYgKG9wdGlvbnMuaW5mbyAhPT0gdHJ1ZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBJbnZhbGlkIE9wdGlvbjogaW5mbyBtdXN0IGJlIHRydWUsIGdvdCAke0pTT04uc3RyaW5naWZ5KG9wdGlvbnMuaW5mbyl9YCxcbiAgICApO1xuICB9XG4gIC8vIE5vcm1hbGl6ZSBvcHRpb24gYG1heF9yZWNvcmRfc2l6ZWBcbiAgaWYgKFxuICAgIG9wdGlvbnMubWF4X3JlY29yZF9zaXplID09PSB1bmRlZmluZWQgfHxcbiAgICBvcHRpb25zLm1heF9yZWNvcmRfc2l6ZSA9PT0gbnVsbCB8fFxuICAgIG9wdGlvbnMubWF4X3JlY29yZF9zaXplID09PSBmYWxzZVxuICApIHtcbiAgICBvcHRpb25zLm1heF9yZWNvcmRfc2l6ZSA9IDA7XG4gIH0gZWxzZSBpZiAoXG4gICAgTnVtYmVyLmlzSW50ZWdlcihvcHRpb25zLm1heF9yZWNvcmRfc2l6ZSkgJiZcbiAgICBvcHRpb25zLm1heF9yZWNvcmRfc2l6ZSA+PSAwXG4gICkge1xuICAgIC8vIEdyZWF0LCBub3RoaW5nIHRvIGRvXG4gIH0gZWxzZSBpZiAoXG4gICAgdHlwZW9mIG9wdGlvbnMubWF4X3JlY29yZF9zaXplID09PSBcInN0cmluZ1wiICYmXG4gICAgL1xcZCsvLnRlc3Qob3B0aW9ucy5tYXhfcmVjb3JkX3NpemUpXG4gICkge1xuICAgIG9wdGlvbnMubWF4X3JlY29yZF9zaXplID0gcGFyc2VJbnQob3B0aW9ucy5tYXhfcmVjb3JkX3NpemUpO1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBJbnZhbGlkIE9wdGlvbjogbWF4X3JlY29yZF9zaXplIG11c3QgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyLCBnb3QgJHtKU09OLnN0cmluZ2lmeShvcHRpb25zLm1heF9yZWNvcmRfc2l6ZSl9YCxcbiAgICApO1xuICB9XG4gIC8vIE5vcm1hbGl6ZSBvcHRpb24gYG9iam5hbWVgXG4gIGlmIChcbiAgICBvcHRpb25zLm9iam5hbWUgPT09IHVuZGVmaW5lZCB8fFxuICAgIG9wdGlvbnMub2JqbmFtZSA9PT0gbnVsbCB8fFxuICAgIG9wdGlvbnMub2JqbmFtZSA9PT0gZmFsc2VcbiAgKSB7XG4gICAgb3B0aW9ucy5vYmpuYW1lID0gdW5kZWZpbmVkO1xuICB9IGVsc2UgaWYgKEJ1ZmZlci5pc0J1ZmZlcihvcHRpb25zLm9iam5hbWUpKSB7XG4gICAgaWYgKG9wdGlvbnMub2JqbmFtZS5sZW5ndGggPT09IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBPcHRpb246IG9iam5hbWUgbXVzdCBiZSBhIG5vbiBlbXB0eSBidWZmZXJgKTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMuZW5jb2RpbmcgPT09IG51bGwpIHtcbiAgICAgIC8vIERvbid0IGNhbGwgYHRvU3RyaW5nYCwgbGVhdmUgb2JqbmFtZSBhcyBhIGJ1ZmZlclxuICAgIH0gZWxzZSB7XG4gICAgICBvcHRpb25zLm9iam5hbWUgPSBvcHRpb25zLm9iam5hbWUudG9TdHJpbmcob3B0aW9ucy5lbmNvZGluZyk7XG4gICAgfVxuICB9IGVsc2UgaWYgKHR5cGVvZiBvcHRpb25zLm9iam5hbWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICBpZiAob3B0aW9ucy5vYmpuYW1lLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIE9wdGlvbjogb2JqbmFtZSBtdXN0IGJlIGEgbm9uIGVtcHR5IHN0cmluZ2ApO1xuICAgIH1cbiAgICAvLyBHcmVhdCwgbm90aGluZyB0byBkb1xuICB9IGVsc2UgaWYgKHR5cGVvZiBvcHRpb25zLm9iam5hbWUgPT09IFwibnVtYmVyXCIpIHtcbiAgICAvLyBpZihvcHRpb25zLm9iam5hbWUubGVuZ3RoID09PSAwKXtcbiAgICAvLyAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBPcHRpb246IG9iam5hbWUgbXVzdCBiZSBhIG5vbiBlbXB0eSBzdHJpbmdgKTtcbiAgICAvLyB9XG4gICAgLy8gR3JlYXQsIG5vdGhpbmcgdG8gZG9cbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgSW52YWxpZCBPcHRpb246IG9iam5hbWUgbXVzdCBiZSBhIHN0cmluZyBvciBhIGJ1ZmZlciwgZ290ICR7b3B0aW9ucy5vYmpuYW1lfWAsXG4gICAgKTtcbiAgfVxuICBpZiAob3B0aW9ucy5vYmpuYW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMub2JqbmFtZSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgaWYgKG9wdGlvbnMuY29sdW1ucyAhPT0gZmFsc2UpIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoXG4gICAgICAgICAgXCJJbnZhbGlkIE9wdGlvbjogb2JqbmFtZSBpbmRleCBjYW5ub3QgYmUgY29tYmluZWQgd2l0aCBjb2x1bW5zIG9yIGJlIGRlZmluZWQgYXMgYSBmaWVsZFwiLFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBBIHN0cmluZyBvciBhIGJ1ZmZlclxuICAgICAgaWYgKG9wdGlvbnMuY29sdW1ucyA9PT0gZmFsc2UpIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoXG4gICAgICAgICAgXCJJbnZhbGlkIE9wdGlvbjogb2JqbmFtZSBmaWVsZCBtdXN0IGJlIGNvbWJpbmVkIHdpdGggY29sdW1ucyBvciBiZSBkZWZpbmVkIGFzIGFuIGluZGV4XCIsXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8vIE5vcm1hbGl6ZSBvcHRpb24gYG9uX3JlY29yZGBcbiAgaWYgKG9wdGlvbnMub25fcmVjb3JkID09PSB1bmRlZmluZWQgfHwgb3B0aW9ucy5vbl9yZWNvcmQgPT09IG51bGwpIHtcbiAgICBvcHRpb25zLm9uX3JlY29yZCA9IHVuZGVmaW5lZDtcbiAgfSBlbHNlIGlmICh0eXBlb2Ygb3B0aW9ucy5vbl9yZWNvcmQgIT09IFwiZnVuY3Rpb25cIikge1xuICAgIHRocm93IG5ldyBDc3ZFcnJvcihcbiAgICAgIFwiQ1NWX0lOVkFMSURfT1BUSU9OX09OX1JFQ09SRFwiLFxuICAgICAgW1xuICAgICAgICBcIkludmFsaWQgb3B0aW9uIGBvbl9yZWNvcmRgOlwiLFxuICAgICAgICBcImV4cGVjdCBhIGZ1bmN0aW9uLFwiLFxuICAgICAgICBgZ290ICR7SlNPTi5zdHJpbmdpZnkob3B0aW9ucy5vbl9yZWNvcmQpfWAsXG4gICAgICBdLFxuICAgICAgb3B0aW9ucyxcbiAgICApO1xuICB9XG4gIC8vIE5vcm1hbGl6ZSBvcHRpb24gYG9uX3NraXBgXG4gIC8vIG9wdGlvbnMub25fc2tpcCA/Pz0gKGVyciwgY2h1bmspID0+IHtcbiAgLy8gICB0aGlzLmVtaXQoJ3NraXAnLCBlcnIsIGNodW5rKTtcbiAgLy8gfTtcbiAgaWYgKFxuICAgIG9wdGlvbnMub25fc2tpcCAhPT0gdW5kZWZpbmVkICYmXG4gICAgb3B0aW9ucy5vbl9za2lwICE9PSBudWxsICYmXG4gICAgdHlwZW9mIG9wdGlvbnMub25fc2tpcCAhPT0gXCJmdW5jdGlvblwiXG4gICkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBJbnZhbGlkIE9wdGlvbjogb25fc2tpcCBtdXN0IGJlIGEgZnVuY3Rpb24sIGdvdCAke0pTT04uc3RyaW5naWZ5KG9wdGlvbnMub25fc2tpcCl9YCxcbiAgICApO1xuICB9XG4gIC8vIE5vcm1hbGl6ZSBvcHRpb24gYHF1b3RlYFxuICBpZiAoXG4gICAgb3B0aW9ucy5xdW90ZSA9PT0gbnVsbCB8fFxuICAgIG9wdGlvbnMucXVvdGUgPT09IGZhbHNlIHx8XG4gICAgb3B0aW9ucy5xdW90ZSA9PT0gXCJcIlxuICApIHtcbiAgICBvcHRpb25zLnF1b3RlID0gbnVsbDtcbiAgfSBlbHNlIHtcbiAgICBpZiAob3B0aW9ucy5xdW90ZSA9PT0gdW5kZWZpbmVkIHx8IG9wdGlvbnMucXVvdGUgPT09IHRydWUpIHtcbiAgICAgIG9wdGlvbnMucXVvdGUgPSBCdWZmZXIuZnJvbSgnXCInLCBvcHRpb25zLmVuY29kaW5nKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBvcHRpb25zLnF1b3RlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBvcHRpb25zLnF1b3RlID0gQnVmZmVyLmZyb20ob3B0aW9ucy5xdW90ZSwgb3B0aW9ucy5lbmNvZGluZyk7XG4gICAgfVxuICAgIGlmICghQnVmZmVyLmlzQnVmZmVyKG9wdGlvbnMucXVvdGUpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBJbnZhbGlkIE9wdGlvbjogcXVvdGUgbXVzdCBiZSBhIGJ1ZmZlciBvciBhIHN0cmluZywgZ290ICR7SlNPTi5zdHJpbmdpZnkob3B0aW9ucy5xdW90ZSl9YCxcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIC8vIE5vcm1hbGl6ZSBvcHRpb24gYHJhd2BcbiAgaWYgKFxuICAgIG9wdGlvbnMucmF3ID09PSB1bmRlZmluZWQgfHxcbiAgICBvcHRpb25zLnJhdyA9PT0gbnVsbCB8fFxuICAgIG9wdGlvbnMucmF3ID09PSBmYWxzZVxuICApIHtcbiAgICBvcHRpb25zLnJhdyA9IGZhbHNlO1xuICB9IGVsc2UgaWYgKG9wdGlvbnMucmF3ICE9PSB0cnVlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYEludmFsaWQgT3B0aW9uOiByYXcgbXVzdCBiZSB0cnVlLCBnb3QgJHtKU09OLnN0cmluZ2lmeShvcHRpb25zLnJhdyl9YCxcbiAgICApO1xuICB9XG4gIC8vIE5vcm1hbGl6ZSBvcHRpb24gYHJlY29yZF9kZWxpbWl0ZXJgXG4gIGlmIChvcHRpb25zLnJlY29yZF9kZWxpbWl0ZXIgPT09IHVuZGVmaW5lZCkge1xuICAgIG9wdGlvbnMucmVjb3JkX2RlbGltaXRlciA9IFtdO1xuICB9IGVsc2UgaWYgKFxuICAgIHR5cGVvZiBvcHRpb25zLnJlY29yZF9kZWxpbWl0ZXIgPT09IFwic3RyaW5nXCIgfHxcbiAgICBCdWZmZXIuaXNCdWZmZXIob3B0aW9ucy5yZWNvcmRfZGVsaW1pdGVyKVxuICApIHtcbiAgICBpZiAob3B0aW9ucy5yZWNvcmRfZGVsaW1pdGVyLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IENzdkVycm9yKFxuICAgICAgICBcIkNTVl9JTlZBTElEX09QVElPTl9SRUNPUkRfREVMSU1JVEVSXCIsXG4gICAgICAgIFtcbiAgICAgICAgICBcIkludmFsaWQgb3B0aW9uIGByZWNvcmRfZGVsaW1pdGVyYDpcIixcbiAgICAgICAgICBcInZhbHVlIG11c3QgYmUgYSBub24gZW1wdHkgc3RyaW5nIG9yIGJ1ZmZlcixcIixcbiAgICAgICAgICBgZ290ICR7SlNPTi5zdHJpbmdpZnkob3B0aW9ucy5yZWNvcmRfZGVsaW1pdGVyKX1gLFxuICAgICAgICBdLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgKTtcbiAgICB9XG4gICAgb3B0aW9ucy5yZWNvcmRfZGVsaW1pdGVyID0gW29wdGlvbnMucmVjb3JkX2RlbGltaXRlcl07XG4gIH0gZWxzZSBpZiAoIUFycmF5LmlzQXJyYXkob3B0aW9ucy5yZWNvcmRfZGVsaW1pdGVyKSkge1xuICAgIHRocm93IG5ldyBDc3ZFcnJvcihcbiAgICAgIFwiQ1NWX0lOVkFMSURfT1BUSU9OX1JFQ09SRF9ERUxJTUlURVJcIixcbiAgICAgIFtcbiAgICAgICAgXCJJbnZhbGlkIG9wdGlvbiBgcmVjb3JkX2RlbGltaXRlcmA6XCIsXG4gICAgICAgIFwidmFsdWUgbXVzdCBiZSBhIHN0cmluZywgYSBidWZmZXIgb3IgYXJyYXkgb2Ygc3RyaW5nfGJ1ZmZlcixcIixcbiAgICAgICAgYGdvdCAke0pTT04uc3RyaW5naWZ5KG9wdGlvbnMucmVjb3JkX2RlbGltaXRlcil9YCxcbiAgICAgIF0sXG4gICAgICBvcHRpb25zLFxuICAgICk7XG4gIH1cbiAgb3B0aW9ucy5yZWNvcmRfZGVsaW1pdGVyID0gb3B0aW9ucy5yZWNvcmRfZGVsaW1pdGVyLm1hcChmdW5jdGlvbiAocmQsIGkpIHtcbiAgICBpZiAodHlwZW9mIHJkICE9PSBcInN0cmluZ1wiICYmICFCdWZmZXIuaXNCdWZmZXIocmQpKSB7XG4gICAgICB0aHJvdyBuZXcgQ3N2RXJyb3IoXG4gICAgICAgIFwiQ1NWX0lOVkFMSURfT1BUSU9OX1JFQ09SRF9ERUxJTUlURVJcIixcbiAgICAgICAgW1xuICAgICAgICAgIFwiSW52YWxpZCBvcHRpb24gYHJlY29yZF9kZWxpbWl0ZXJgOlwiLFxuICAgICAgICAgIFwidmFsdWUgbXVzdCBiZSBhIHN0cmluZywgYSBidWZmZXIgb3IgYXJyYXkgb2Ygc3RyaW5nfGJ1ZmZlclwiLFxuICAgICAgICAgIGBhdCBpbmRleCAke2l9LGAsXG4gICAgICAgICAgYGdvdCAke0pTT04uc3RyaW5naWZ5KHJkKX1gLFxuICAgICAgICBdLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKHJkLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IENzdkVycm9yKFxuICAgICAgICBcIkNTVl9JTlZBTElEX09QVElPTl9SRUNPUkRfREVMSU1JVEVSXCIsXG4gICAgICAgIFtcbiAgICAgICAgICBcIkludmFsaWQgb3B0aW9uIGByZWNvcmRfZGVsaW1pdGVyYDpcIixcbiAgICAgICAgICBcInZhbHVlIG11c3QgYmUgYSBub24gZW1wdHkgc3RyaW5nIG9yIGJ1ZmZlclwiLFxuICAgICAgICAgIGBhdCBpbmRleCAke2l9LGAsXG4gICAgICAgICAgYGdvdCAke0pTT04uc3RyaW5naWZ5KHJkKX1gLFxuICAgICAgICBdLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiByZCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgcmQgPSBCdWZmZXIuZnJvbShyZCwgb3B0aW9ucy5lbmNvZGluZyk7XG4gICAgfVxuICAgIHJldHVybiByZDtcbiAgfSk7XG4gIC8vIE5vcm1hbGl6ZSBvcHRpb24gYHJlbGF4X2NvbHVtbl9jb3VudGBcbiAgaWYgKHR5cGVvZiBvcHRpb25zLnJlbGF4X2NvbHVtbl9jb3VudCA9PT0gXCJib29sZWFuXCIpIHtcbiAgICAvLyBHcmVhdCwgbm90aGluZyB0byBkb1xuICB9IGVsc2UgaWYgKFxuICAgIG9wdGlvbnMucmVsYXhfY29sdW1uX2NvdW50ID09PSB1bmRlZmluZWQgfHxcbiAgICBvcHRpb25zLnJlbGF4X2NvbHVtbl9jb3VudCA9PT0gbnVsbFxuICApIHtcbiAgICBvcHRpb25zLnJlbGF4X2NvbHVtbl9jb3VudCA9IGZhbHNlO1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBJbnZhbGlkIE9wdGlvbjogcmVsYXhfY29sdW1uX2NvdW50IG11c3QgYmUgYSBib29sZWFuLCBnb3QgJHtKU09OLnN0cmluZ2lmeShvcHRpb25zLnJlbGF4X2NvbHVtbl9jb3VudCl9YCxcbiAgICApO1xuICB9XG4gIGlmICh0eXBlb2Ygb3B0aW9ucy5yZWxheF9jb2x1bW5fY291bnRfbGVzcyA9PT0gXCJib29sZWFuXCIpIHtcbiAgICAvLyBHcmVhdCwgbm90aGluZyB0byBkb1xuICB9IGVsc2UgaWYgKFxuICAgIG9wdGlvbnMucmVsYXhfY29sdW1uX2NvdW50X2xlc3MgPT09IHVuZGVmaW5lZCB8fFxuICAgIG9wdGlvbnMucmVsYXhfY29sdW1uX2NvdW50X2xlc3MgPT09IG51bGxcbiAgKSB7XG4gICAgb3B0aW9ucy5yZWxheF9jb2x1bW5fY291bnRfbGVzcyA9IGZhbHNlO1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBJbnZhbGlkIE9wdGlvbjogcmVsYXhfY29sdW1uX2NvdW50X2xlc3MgbXVzdCBiZSBhIGJvb2xlYW4sIGdvdCAke0pTT04uc3RyaW5naWZ5KG9wdGlvbnMucmVsYXhfY29sdW1uX2NvdW50X2xlc3MpfWAsXG4gICAgKTtcbiAgfVxuICBpZiAodHlwZW9mIG9wdGlvbnMucmVsYXhfY29sdW1uX2NvdW50X21vcmUgPT09IFwiYm9vbGVhblwiKSB7XG4gICAgLy8gR3JlYXQsIG5vdGhpbmcgdG8gZG9cbiAgfSBlbHNlIGlmIChcbiAgICBvcHRpb25zLnJlbGF4X2NvbHVtbl9jb3VudF9tb3JlID09PSB1bmRlZmluZWQgfHxcbiAgICBvcHRpb25zLnJlbGF4X2NvbHVtbl9jb3VudF9tb3JlID09PSBudWxsXG4gICkge1xuICAgIG9wdGlvbnMucmVsYXhfY29sdW1uX2NvdW50X21vcmUgPSBmYWxzZTtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgSW52YWxpZCBPcHRpb246IHJlbGF4X2NvbHVtbl9jb3VudF9tb3JlIG11c3QgYmUgYSBib29sZWFuLCBnb3QgJHtKU09OLnN0cmluZ2lmeShvcHRpb25zLnJlbGF4X2NvbHVtbl9jb3VudF9tb3JlKX1gLFxuICAgICk7XG4gIH1cbiAgLy8gTm9ybWFsaXplIG9wdGlvbiBgcmVsYXhfcXVvdGVzYFxuICBpZiAodHlwZW9mIG9wdGlvbnMucmVsYXhfcXVvdGVzID09PSBcImJvb2xlYW5cIikge1xuICAgIC8vIEdyZWF0LCBub3RoaW5nIHRvIGRvXG4gIH0gZWxzZSBpZiAoXG4gICAgb3B0aW9ucy5yZWxheF9xdW90ZXMgPT09IHVuZGVmaW5lZCB8fFxuICAgIG9wdGlvbnMucmVsYXhfcXVvdGVzID09PSBudWxsXG4gICkge1xuICAgIG9wdGlvbnMucmVsYXhfcXVvdGVzID0gZmFsc2U7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYEludmFsaWQgT3B0aW9uOiByZWxheF9xdW90ZXMgbXVzdCBiZSBhIGJvb2xlYW4sIGdvdCAke0pTT04uc3RyaW5naWZ5KG9wdGlvbnMucmVsYXhfcXVvdGVzKX1gLFxuICAgICk7XG4gIH1cbiAgLy8gTm9ybWFsaXplIG9wdGlvbiBgc2tpcF9lbXB0eV9saW5lc2BcbiAgaWYgKHR5cGVvZiBvcHRpb25zLnNraXBfZW1wdHlfbGluZXMgPT09IFwiYm9vbGVhblwiKSB7XG4gICAgLy8gR3JlYXQsIG5vdGhpbmcgdG8gZG9cbiAgfSBlbHNlIGlmIChcbiAgICBvcHRpb25zLnNraXBfZW1wdHlfbGluZXMgPT09IHVuZGVmaW5lZCB8fFxuICAgIG9wdGlvbnMuc2tpcF9lbXB0eV9saW5lcyA9PT0gbnVsbFxuICApIHtcbiAgICBvcHRpb25zLnNraXBfZW1wdHlfbGluZXMgPSBmYWxzZTtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgSW52YWxpZCBPcHRpb246IHNraXBfZW1wdHlfbGluZXMgbXVzdCBiZSBhIGJvb2xlYW4sIGdvdCAke0pTT04uc3RyaW5naWZ5KG9wdGlvbnMuc2tpcF9lbXB0eV9saW5lcyl9YCxcbiAgICApO1xuICB9XG4gIC8vIE5vcm1hbGl6ZSBvcHRpb24gYHNraXBfcmVjb3Jkc193aXRoX2VtcHR5X3ZhbHVlc2BcbiAgaWYgKHR5cGVvZiBvcHRpb25zLnNraXBfcmVjb3Jkc193aXRoX2VtcHR5X3ZhbHVlcyA9PT0gXCJib29sZWFuXCIpIHtcbiAgICAvLyBHcmVhdCwgbm90aGluZyB0byBkb1xuICB9IGVsc2UgaWYgKFxuICAgIG9wdGlvbnMuc2tpcF9yZWNvcmRzX3dpdGhfZW1wdHlfdmFsdWVzID09PSB1bmRlZmluZWQgfHxcbiAgICBvcHRpb25zLnNraXBfcmVjb3Jkc193aXRoX2VtcHR5X3ZhbHVlcyA9PT0gbnVsbFxuICApIHtcbiAgICBvcHRpb25zLnNraXBfcmVjb3Jkc193aXRoX2VtcHR5X3ZhbHVlcyA9IGZhbHNlO1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBJbnZhbGlkIE9wdGlvbjogc2tpcF9yZWNvcmRzX3dpdGhfZW1wdHlfdmFsdWVzIG11c3QgYmUgYSBib29sZWFuLCBnb3QgJHtKU09OLnN0cmluZ2lmeShvcHRpb25zLnNraXBfcmVjb3Jkc193aXRoX2VtcHR5X3ZhbHVlcyl9YCxcbiAgICApO1xuICB9XG4gIC8vIE5vcm1hbGl6ZSBvcHRpb24gYHNraXBfcmVjb3Jkc193aXRoX2Vycm9yYFxuICBpZiAodHlwZW9mIG9wdGlvbnMuc2tpcF9yZWNvcmRzX3dpdGhfZXJyb3IgPT09IFwiYm9vbGVhblwiKSB7XG4gICAgLy8gR3JlYXQsIG5vdGhpbmcgdG8gZG9cbiAgfSBlbHNlIGlmIChcbiAgICBvcHRpb25zLnNraXBfcmVjb3Jkc193aXRoX2Vycm9yID09PSB1bmRlZmluZWQgfHxcbiAgICBvcHRpb25zLnNraXBfcmVjb3Jkc193aXRoX2Vycm9yID09PSBudWxsXG4gICkge1xuICAgIG9wdGlvbnMuc2tpcF9yZWNvcmRzX3dpdGhfZXJyb3IgPSBmYWxzZTtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgSW52YWxpZCBPcHRpb246IHNraXBfcmVjb3Jkc193aXRoX2Vycm9yIG11c3QgYmUgYSBib29sZWFuLCBnb3QgJHtKU09OLnN0cmluZ2lmeShvcHRpb25zLnNraXBfcmVjb3Jkc193aXRoX2Vycm9yKX1gLFxuICAgICk7XG4gIH1cbiAgLy8gTm9ybWFsaXplIG9wdGlvbiBgcnRyaW1gXG4gIGlmIChcbiAgICBvcHRpb25zLnJ0cmltID09PSB1bmRlZmluZWQgfHxcbiAgICBvcHRpb25zLnJ0cmltID09PSBudWxsIHx8XG4gICAgb3B0aW9ucy5ydHJpbSA9PT0gZmFsc2VcbiAgKSB7XG4gICAgb3B0aW9ucy5ydHJpbSA9IGZhbHNlO1xuICB9IGVsc2UgaWYgKG9wdGlvbnMucnRyaW0gIT09IHRydWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgSW52YWxpZCBPcHRpb246IHJ0cmltIG11c3QgYmUgYSBib29sZWFuLCBnb3QgJHtKU09OLnN0cmluZ2lmeShvcHRpb25zLnJ0cmltKX1gLFxuICAgICk7XG4gIH1cbiAgLy8gTm9ybWFsaXplIG9wdGlvbiBgbHRyaW1gXG4gIGlmIChcbiAgICBvcHRpb25zLmx0cmltID09PSB1bmRlZmluZWQgfHxcbiAgICBvcHRpb25zLmx0cmltID09PSBudWxsIHx8XG4gICAgb3B0aW9ucy5sdHJpbSA9PT0gZmFsc2VcbiAgKSB7XG4gICAgb3B0aW9ucy5sdHJpbSA9IGZhbHNlO1xuICB9IGVsc2UgaWYgKG9wdGlvbnMubHRyaW0gIT09IHRydWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgSW52YWxpZCBPcHRpb246IGx0cmltIG11c3QgYmUgYSBib29sZWFuLCBnb3QgJHtKU09OLnN0cmluZ2lmeShvcHRpb25zLmx0cmltKX1gLFxuICAgICk7XG4gIH1cbiAgLy8gTm9ybWFsaXplIG9wdGlvbiBgdHJpbWBcbiAgaWYgKFxuICAgIG9wdGlvbnMudHJpbSA9PT0gdW5kZWZpbmVkIHx8XG4gICAgb3B0aW9ucy50cmltID09PSBudWxsIHx8XG4gICAgb3B0aW9ucy50cmltID09PSBmYWxzZVxuICApIHtcbiAgICBvcHRpb25zLnRyaW0gPSBmYWxzZTtcbiAgfSBlbHNlIGlmIChvcHRpb25zLnRyaW0gIT09IHRydWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgSW52YWxpZCBPcHRpb246IHRyaW0gbXVzdCBiZSBhIGJvb2xlYW4sIGdvdCAke0pTT04uc3RyaW5naWZ5KG9wdGlvbnMudHJpbSl9YCxcbiAgICApO1xuICB9XG4gIC8vIE5vcm1hbGl6ZSBvcHRpb25zIGB0cmltYCwgYGx0cmltYCBhbmQgYHJ0cmltYFxuICBpZiAob3B0aW9ucy50cmltID09PSB0cnVlICYmIG9wdHMubHRyaW0gIT09IGZhbHNlKSB7XG4gICAgb3B0aW9ucy5sdHJpbSA9IHRydWU7XG4gIH0gZWxzZSBpZiAob3B0aW9ucy5sdHJpbSAhPT0gdHJ1ZSkge1xuICAgIG9wdGlvbnMubHRyaW0gPSBmYWxzZTtcbiAgfVxuICBpZiAob3B0aW9ucy50cmltID09PSB0cnVlICYmIG9wdHMucnRyaW0gIT09IGZhbHNlKSB7XG4gICAgb3B0aW9ucy5ydHJpbSA9IHRydWU7XG4gIH0gZWxzZSBpZiAob3B0aW9ucy5ydHJpbSAhPT0gdHJ1ZSkge1xuICAgIG9wdGlvbnMucnRyaW0gPSBmYWxzZTtcbiAgfVxuICAvLyBOb3JtYWxpemUgb3B0aW9uIGB0b2BcbiAgaWYgKG9wdGlvbnMudG8gPT09IHVuZGVmaW5lZCB8fCBvcHRpb25zLnRvID09PSBudWxsKSB7XG4gICAgb3B0aW9ucy50byA9IC0xO1xuICB9IGVsc2Uge1xuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy50byA9PT0gXCJzdHJpbmdcIiAmJiAvXFxkKy8udGVzdChvcHRpb25zLnRvKSkge1xuICAgICAgb3B0aW9ucy50byA9IHBhcnNlSW50KG9wdGlvbnMudG8pO1xuICAgIH1cbiAgICBpZiAoTnVtYmVyLmlzSW50ZWdlcihvcHRpb25zLnRvKSkge1xuICAgICAgaWYgKG9wdGlvbnMudG8gPD0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYEludmFsaWQgT3B0aW9uOiB0byBtdXN0IGJlIGEgcG9zaXRpdmUgaW50ZWdlciBncmVhdGVyIHRoYW4gMCwgZ290ICR7SlNPTi5zdHJpbmdpZnkob3B0cy50byl9YCxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgSW52YWxpZCBPcHRpb246IHRvIG11c3QgYmUgYW4gaW50ZWdlciwgZ290ICR7SlNPTi5zdHJpbmdpZnkob3B0cy50byl9YCxcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIC8vIE5vcm1hbGl6ZSBvcHRpb24gYHRvX2xpbmVgXG4gIGlmIChvcHRpb25zLnRvX2xpbmUgPT09IHVuZGVmaW5lZCB8fCBvcHRpb25zLnRvX2xpbmUgPT09IG51bGwpIHtcbiAgICBvcHRpb25zLnRvX2xpbmUgPSAtMTtcbiAgfSBlbHNlIHtcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMudG9fbGluZSA9PT0gXCJzdHJpbmdcIiAmJiAvXFxkKy8udGVzdChvcHRpb25zLnRvX2xpbmUpKSB7XG4gICAgICBvcHRpb25zLnRvX2xpbmUgPSBwYXJzZUludChvcHRpb25zLnRvX2xpbmUpO1xuICAgIH1cbiAgICBpZiAoTnVtYmVyLmlzSW50ZWdlcihvcHRpb25zLnRvX2xpbmUpKSB7XG4gICAgICBpZiAob3B0aW9ucy50b19saW5lIDw9IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIGBJbnZhbGlkIE9wdGlvbjogdG9fbGluZSBtdXN0IGJlIGEgcG9zaXRpdmUgaW50ZWdlciBncmVhdGVyIHRoYW4gMCwgZ290ICR7SlNPTi5zdHJpbmdpZnkob3B0cy50b19saW5lKX1gLFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBJbnZhbGlkIE9wdGlvbjogdG9fbGluZSBtdXN0IGJlIGFuIGludGVnZXIsIGdvdCAke0pTT04uc3RyaW5naWZ5KG9wdHMudG9fbGluZSl9YCxcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIHJldHVybiBvcHRpb25zO1xufTtcblxuZXhwb3J0IHsgbm9ybWFsaXplX29wdGlvbnMgfTtcbiIsICJpbXBvcnQgeyBub3JtYWxpemVfY29sdW1uc19hcnJheSB9IGZyb20gXCIuL25vcm1hbGl6ZV9jb2x1bW5zX2FycmF5LmpzXCI7XG5pbXBvcnQgeyBpbml0X3N0YXRlIH0gZnJvbSBcIi4vaW5pdF9zdGF0ZS5qc1wiO1xuaW1wb3J0IHsgbm9ybWFsaXplX29wdGlvbnMgfSBmcm9tIFwiLi9ub3JtYWxpemVfb3B0aW9ucy5qc1wiO1xuaW1wb3J0IHsgQ3N2RXJyb3IgfSBmcm9tIFwiLi9Dc3ZFcnJvci5qc1wiO1xuXG5jb25zdCBpc1JlY29yZEVtcHR5ID0gZnVuY3Rpb24gKHJlY29yZCkge1xuICByZXR1cm4gcmVjb3JkLmV2ZXJ5KFxuICAgIChmaWVsZCkgPT5cbiAgICAgIGZpZWxkID09IG51bGwgfHwgKGZpZWxkLnRvU3RyaW5nICYmIGZpZWxkLnRvU3RyaW5nKCkudHJpbSgpID09PSBcIlwiKSxcbiAgKTtcbn07XG5cbmNvbnN0IGNyID0gMTM7IC8vIGBcXHJgLCBjYXJyaWFnZSByZXR1cm4sIDB4MEQgaW4gaGV4YWRcdTAwRTljaW1hbCwgMTMgaW4gZGVjaW1hbFxuY29uc3QgbmwgPSAxMDsgLy8gYFxcbmAsIG5ld2xpbmUsIDB4MEEgaW4gaGV4YWRlY2ltYWwsIDEwIGluIGRlY2ltYWxcblxuY29uc3QgYm9tcyA9IHtcbiAgLy8gTm90ZSwgdGhlIGZvbGxvd2luZyBhcmUgZXF1YWxzOlxuICAvLyBCdWZmZXIuZnJvbShcIlxcdWZlZmZcIilcbiAgLy8gQnVmZmVyLmZyb20oWzIzOSwgMTg3LCAxOTFdKVxuICAvLyBCdWZmZXIuZnJvbSgnRUZCQkJGJywgJ2hleCcpXG4gIHV0Zjg6IEJ1ZmZlci5mcm9tKFsyMzksIDE4NywgMTkxXSksXG4gIC8vIE5vdGUsIHRoZSBmb2xsb3dpbmcgYXJlIGVxdWFsczpcbiAgLy8gQnVmZmVyLmZyb20gXCJcXHVmZWZmXCIsICd1dGYxNmxlXG4gIC8vIEJ1ZmZlci5mcm9tKFsyNTUsIDI1NF0pXG4gIHV0ZjE2bGU6IEJ1ZmZlci5mcm9tKFsyNTUsIDI1NF0pLFxufTtcblxuY29uc3QgdHJhbnNmb3JtID0gZnVuY3Rpb24gKG9yaWdpbmFsX29wdGlvbnMgPSB7fSkge1xuICBjb25zdCBpbmZvID0ge1xuICAgIGJ5dGVzOiAwLFxuICAgIGNvbW1lbnRfbGluZXM6IDAsXG4gICAgZW1wdHlfbGluZXM6IDAsXG4gICAgaW52YWxpZF9maWVsZF9sZW5ndGg6IDAsXG4gICAgbGluZXM6IDEsXG4gICAgcmVjb3JkczogMCxcbiAgfTtcbiAgY29uc3Qgb3B0aW9ucyA9IG5vcm1hbGl6ZV9vcHRpb25zKG9yaWdpbmFsX29wdGlvbnMpO1xuICByZXR1cm4ge1xuICAgIGluZm86IGluZm8sXG4gICAgb3JpZ2luYWxfb3B0aW9uczogb3JpZ2luYWxfb3B0aW9ucyxcbiAgICBvcHRpb25zOiBvcHRpb25zLFxuICAgIHN0YXRlOiBpbml0X3N0YXRlKG9wdGlvbnMpLFxuICAgIF9fbmVlZE1vcmVEYXRhOiBmdW5jdGlvbiAoaSwgYnVmTGVuLCBlbmQpIHtcbiAgICAgIGlmIChlbmQpIHJldHVybiBmYWxzZTtcbiAgICAgIGNvbnN0IHsgZW5jb2RpbmcsIGVzY2FwZSwgcXVvdGUgfSA9IHRoaXMub3B0aW9ucztcbiAgICAgIGNvbnN0IHsgcXVvdGluZywgbmVlZE1vcmVEYXRhU2l6ZSwgcmVjb3JkRGVsaW1pdGVyTWF4TGVuZ3RoIH0gPVxuICAgICAgICB0aGlzLnN0YXRlO1xuICAgICAgY29uc3QgbnVtT2ZDaGFyTGVmdCA9IGJ1ZkxlbiAtIGkgLSAxO1xuICAgICAgY29uc3QgcmVxdWlyZWRMZW5ndGggPSBNYXRoLm1heChcbiAgICAgICAgbmVlZE1vcmVEYXRhU2l6ZSxcbiAgICAgICAgLy8gU2tpcCBpZiB0aGUgcmVtYWluaW5nIGJ1ZmZlciBzbWFsbGVyIHRoYW4gcmVjb3JkIGRlbGltaXRlclxuICAgICAgICAvLyBJZiBcInJlY29yZF9kZWxpbWl0ZXJcIiBpcyB5ZXQgdG8gYmUgZGlzY292ZXJlZDpcbiAgICAgICAgLy8gMS4gSXQgaXMgZXF1YWxzIHRvIGBbXWAgYW5kIFwicmVjb3JkRGVsaW1pdGVyTWF4TGVuZ3RoXCIgZXF1YWxzIGAwYFxuICAgICAgICAvLyAyLiBXZSBzZXQgdGhlIGxlbmd0aCB0byB3aW5kb3dzIGxpbmUgZW5kaW5nIGluIHRoZSBjdXJyZW50IGVuY29kaW5nXG4gICAgICAgIC8vIE5vdGUsIHRoYXQgZW5jb2RpbmcgaXMga25vd24gZnJvbSB1c2VyIG9yIGJvbSBkaXNjb3ZlcnkgYXQgdGhhdCBwb2ludFxuICAgICAgICAvLyByZWNvcmREZWxpbWl0ZXJNYXhMZW5ndGgsXG4gICAgICAgIHJlY29yZERlbGltaXRlck1heExlbmd0aCA9PT0gMFxuICAgICAgICAgID8gQnVmZmVyLmZyb20oXCJcXHJcXG5cIiwgZW5jb2RpbmcpLmxlbmd0aFxuICAgICAgICAgIDogcmVjb3JkRGVsaW1pdGVyTWF4TGVuZ3RoLFxuICAgICAgICAvLyBTa2lwIGlmIHJlbWFpbmluZyBidWZmZXIgY2FuIGJlIGFuIGVzY2FwZWQgcXVvdGVcbiAgICAgICAgcXVvdGluZyA/IChlc2NhcGUgPT09IG51bGwgPyAwIDogZXNjYXBlLmxlbmd0aCkgKyBxdW90ZS5sZW5ndGggOiAwLFxuICAgICAgICAvLyBTa2lwIGlmIHJlbWFpbmluZyBidWZmZXIgY2FuIGJlIHJlY29yZCBkZWxpbWl0ZXIgZm9sbG93aW5nIHRoZSBjbG9zaW5nIHF1b3RlXG4gICAgICAgIHF1b3RpbmcgPyBxdW90ZS5sZW5ndGggKyByZWNvcmREZWxpbWl0ZXJNYXhMZW5ndGggOiAwLFxuICAgICAgKTtcbiAgICAgIHJldHVybiBudW1PZkNoYXJMZWZ0IDwgcmVxdWlyZWRMZW5ndGg7XG4gICAgfSxcbiAgICAvLyBDZW50cmFsIHBhcnNlciBpbXBsZW1lbnRhdGlvblxuICAgIHBhcnNlOiBmdW5jdGlvbiAobmV4dEJ1ZiwgZW5kLCBwdXNoLCBjbG9zZSkge1xuICAgICAgY29uc3Qge1xuICAgICAgICBib20sXG4gICAgICAgIGNvbW1lbnRfbm9faW5maXgsXG4gICAgICAgIGVuY29kaW5nLFxuICAgICAgICBmcm9tX2xpbmUsXG4gICAgICAgIGx0cmltLFxuICAgICAgICBtYXhfcmVjb3JkX3NpemUsXG4gICAgICAgIHJhdyxcbiAgICAgICAgcmVsYXhfcXVvdGVzLFxuICAgICAgICBydHJpbSxcbiAgICAgICAgc2tpcF9lbXB0eV9saW5lcyxcbiAgICAgICAgdG8sXG4gICAgICAgIHRvX2xpbmUsXG4gICAgICB9ID0gdGhpcy5vcHRpb25zO1xuICAgICAgbGV0IHsgY29tbWVudCwgZXNjYXBlLCBxdW90ZSwgcmVjb3JkX2RlbGltaXRlciB9ID0gdGhpcy5vcHRpb25zO1xuICAgICAgY29uc3QgeyBib21Ta2lwcGVkLCBwcmV2aW91c0J1ZiwgcmF3QnVmZmVyLCBlc2NhcGVJc1F1b3RlIH0gPSB0aGlzLnN0YXRlO1xuICAgICAgbGV0IGJ1ZjtcbiAgICAgIGlmIChwcmV2aW91c0J1ZiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmIChuZXh0QnVmID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAvLyBIYW5kbGUgZW1wdHkgc3RyaW5nXG4gICAgICAgICAgY2xvc2UoKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYnVmID0gbmV4dEJ1ZjtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChwcmV2aW91c0J1ZiAhPT0gdW5kZWZpbmVkICYmIG5leHRCdWYgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBidWYgPSBwcmV2aW91c0J1ZjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJ1ZiA9IEJ1ZmZlci5jb25jYXQoW3ByZXZpb3VzQnVmLCBuZXh0QnVmXSk7XG4gICAgICB9XG4gICAgICAvLyBIYW5kbGUgVVRGIEJPTVxuICAgICAgaWYgKGJvbVNraXBwZWQgPT09IGZhbHNlKSB7XG4gICAgICAgIGlmIChib20gPT09IGZhbHNlKSB7XG4gICAgICAgICAgdGhpcy5zdGF0ZS5ib21Ta2lwcGVkID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmIChidWYubGVuZ3RoIDwgMykge1xuICAgICAgICAgIC8vIE5vIGVub3VnaCBkYXRhXG4gICAgICAgICAgaWYgKGVuZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIC8vIFdhaXQgZm9yIG1vcmUgZGF0YVxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5wcmV2aW91c0J1ZiA9IGJ1ZjtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZm9yIChjb25zdCBlbmNvZGluZyBpbiBib21zKSB7XG4gICAgICAgICAgICBpZiAoYm9tc1tlbmNvZGluZ10uY29tcGFyZShidWYsIDAsIGJvbXNbZW5jb2RpbmddLmxlbmd0aCkgPT09IDApIHtcbiAgICAgICAgICAgICAgLy8gU2tpcCBCT01cbiAgICAgICAgICAgICAgY29uc3QgYm9tTGVuZ3RoID0gYm9tc1tlbmNvZGluZ10ubGVuZ3RoO1xuICAgICAgICAgICAgICB0aGlzLnN0YXRlLmJ1ZkJ5dGVzU3RhcnQgKz0gYm9tTGVuZ3RoO1xuICAgICAgICAgICAgICBidWYgPSBidWYuc2xpY2UoYm9tTGVuZ3RoKTtcbiAgICAgICAgICAgICAgLy8gUmVub3JtYWxpemUgb3JpZ2luYWwgb3B0aW9ucyB3aXRoIHRoZSBuZXcgZW5jb2RpbmdcbiAgICAgICAgICAgICAgdGhpcy5vcHRpb25zID0gbm9ybWFsaXplX29wdGlvbnMoe1xuICAgICAgICAgICAgICAgIC4uLnRoaXMub3JpZ2luYWxfb3B0aW9ucyxcbiAgICAgICAgICAgICAgICBlbmNvZGluZzogZW5jb2RpbmcsXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAvLyBPcHRpb25zIHdpbGwgcmUtZXZhbHVhdGUgdGhlIEJ1ZmZlciB3aXRoIHRoZSBuZXcgZW5jb2RpbmdcbiAgICAgICAgICAgICAgKHsgY29tbWVudCwgZXNjYXBlLCBxdW90ZSB9ID0gdGhpcy5vcHRpb25zKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuc3RhdGUuYm9tU2tpcHBlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IGJ1ZkxlbiA9IGJ1Zi5sZW5ndGg7XG4gICAgICBsZXQgcG9zO1xuICAgICAgZm9yIChwb3MgPSAwOyBwb3MgPCBidWZMZW47IHBvcysrKSB7XG4gICAgICAgIC8vIEVuc3VyZSB3ZSBnZXQgZW5vdWdoIHNwYWNlIHRvIGxvb2sgYWhlYWRcbiAgICAgICAgLy8gVGhlcmUgc2hvdWxkIGJlIGEgd2F5IHRvIG1vdmUgdGhpcyBvdXQgb2YgdGhlIGxvb3BcbiAgICAgICAgaWYgKHRoaXMuX19uZWVkTW9yZURhdGEocG9zLCBidWZMZW4sIGVuZCkpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zdGF0ZS53YXNSb3dEZWxpbWl0ZXIgPT09IHRydWUpIHtcbiAgICAgICAgICB0aGlzLmluZm8ubGluZXMrKztcbiAgICAgICAgICB0aGlzLnN0YXRlLndhc1Jvd0RlbGltaXRlciA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0b19saW5lICE9PSAtMSAmJiB0aGlzLmluZm8ubGluZXMgPiB0b19saW5lKSB7XG4gICAgICAgICAgdGhpcy5zdGF0ZS5zdG9wID0gdHJ1ZTtcbiAgICAgICAgICBjbG9zZSgpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBBdXRvIGRpc2NvdmVyeSBvZiByZWNvcmRfZGVsaW1pdGVyLCB1bml4LCBtYWMgYW5kIHdpbmRvd3Mgc3VwcG9ydGVkXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnF1b3RpbmcgPT09IGZhbHNlICYmIHJlY29yZF9kZWxpbWl0ZXIubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgY29uc3QgcmVjb3JkX2RlbGltaXRlckNvdW50ID0gdGhpcy5fX2F1dG9EaXNjb3ZlclJlY29yZERlbGltaXRlcihcbiAgICAgICAgICAgIGJ1ZixcbiAgICAgICAgICAgIHBvcyxcbiAgICAgICAgICApO1xuICAgICAgICAgIGlmIChyZWNvcmRfZGVsaW1pdGVyQ291bnQpIHtcbiAgICAgICAgICAgIHJlY29yZF9kZWxpbWl0ZXIgPSB0aGlzLm9wdGlvbnMucmVjb3JkX2RlbGltaXRlcjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2hyID0gYnVmW3Bvc107XG4gICAgICAgIGlmIChyYXcgPT09IHRydWUpIHtcbiAgICAgICAgICByYXdCdWZmZXIuYXBwZW5kKGNocik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIChjaHIgPT09IGNyIHx8IGNociA9PT0gbmwpICYmXG4gICAgICAgICAgdGhpcy5zdGF0ZS53YXNSb3dEZWxpbWl0ZXIgPT09IGZhbHNlXG4gICAgICAgICkge1xuICAgICAgICAgIHRoaXMuc3RhdGUud2FzUm93RGVsaW1pdGVyID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBQcmV2aW91cyBjaGFyIHdhcyBhIHZhbGlkIGVzY2FwZSBjaGFyXG4gICAgICAgIC8vIHRyZWF0IHRoZSBjdXJyZW50IGNoYXIgYXMgYSByZWd1bGFyIGNoYXJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuZXNjYXBpbmcgPT09IHRydWUpIHtcbiAgICAgICAgICB0aGlzLnN0YXRlLmVzY2FwaW5nID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gRXNjYXBlIGlzIG9ubHkgYWN0aXZlIGluc2lkZSBxdW90ZWQgZmllbGRzXG4gICAgICAgICAgLy8gV2UgYXJlIHF1b3RpbmcsIHRoZSBjaGFyIGlzIGFuIGVzY2FwZSBjaHIgYW5kIHRoZXJlIGlzIGEgY2hyIHRvIGVzY2FwZVxuICAgICAgICAgIC8vIGlmKGVzY2FwZSAhPT0gbnVsbCAmJiB0aGlzLnN0YXRlLnF1b3RpbmcgPT09IHRydWUgJiYgY2hyID09PSBlc2NhcGUgJiYgcG9zICsgMSA8IGJ1Zkxlbil7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgZXNjYXBlICE9PSBudWxsICYmXG4gICAgICAgICAgICB0aGlzLnN0YXRlLnF1b3RpbmcgPT09IHRydWUgJiZcbiAgICAgICAgICAgIHRoaXMuX19pc0VzY2FwZShidWYsIHBvcywgY2hyKSAmJlxuICAgICAgICAgICAgcG9zICsgZXNjYXBlLmxlbmd0aCA8IGJ1ZkxlblxuICAgICAgICAgICkge1xuICAgICAgICAgICAgaWYgKGVzY2FwZUlzUXVvdGUpIHtcbiAgICAgICAgICAgICAgaWYgKHRoaXMuX19pc1F1b3RlKGJ1ZiwgcG9zICsgZXNjYXBlLmxlbmd0aCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmVzY2FwaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBwb3MgKz0gZXNjYXBlLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMuc3RhdGUuZXNjYXBpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICBwb3MgKz0gZXNjYXBlLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBOb3QgY3VycmVudGx5IGVzY2FwaW5nIGFuZCBjaHIgaXMgYSBxdW90ZVxuICAgICAgICAgIC8vIFRPRE86IG5lZWQgdG8gY29tcGFyZSBieXRlcyBpbnN0ZWFkIG9mIHNpbmdsZSBjaGFyXG4gICAgICAgICAgaWYgKHRoaXMuc3RhdGUuY29tbWVudGluZyA9PT0gZmFsc2UgJiYgdGhpcy5fX2lzUXVvdGUoYnVmLCBwb3MpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5xdW90aW5nID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgIGNvbnN0IG5leHRDaHIgPSBidWZbcG9zICsgcXVvdGUubGVuZ3RoXTtcbiAgICAgICAgICAgICAgY29uc3QgaXNOZXh0Q2hyVHJpbWFibGUgPVxuICAgICAgICAgICAgICAgIHJ0cmltICYmIHRoaXMuX19pc0NoYXJUcmltYWJsZShidWYsIHBvcyArIHF1b3RlLmxlbmd0aCk7XG4gICAgICAgICAgICAgIGNvbnN0IGlzTmV4dENockNvbW1lbnQgPVxuICAgICAgICAgICAgICAgIGNvbW1lbnQgIT09IG51bGwgJiZcbiAgICAgICAgICAgICAgICB0aGlzLl9fY29tcGFyZUJ5dGVzKGNvbW1lbnQsIGJ1ZiwgcG9zICsgcXVvdGUubGVuZ3RoLCBuZXh0Q2hyKTtcbiAgICAgICAgICAgICAgY29uc3QgaXNOZXh0Q2hyRGVsaW1pdGVyID0gdGhpcy5fX2lzRGVsaW1pdGVyKFxuICAgICAgICAgICAgICAgIGJ1ZixcbiAgICAgICAgICAgICAgICBwb3MgKyBxdW90ZS5sZW5ndGgsXG4gICAgICAgICAgICAgICAgbmV4dENocixcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgY29uc3QgaXNOZXh0Q2hyUmVjb3JkRGVsaW1pdGVyID1cbiAgICAgICAgICAgICAgICByZWNvcmRfZGVsaW1pdGVyLmxlbmd0aCA9PT0gMFxuICAgICAgICAgICAgICAgICAgPyB0aGlzLl9fYXV0b0Rpc2NvdmVyUmVjb3JkRGVsaW1pdGVyKGJ1ZiwgcG9zICsgcXVvdGUubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgOiB0aGlzLl9faXNSZWNvcmREZWxpbWl0ZXIobmV4dENociwgYnVmLCBwb3MgKyBxdW90ZS5sZW5ndGgpO1xuICAgICAgICAgICAgICAvLyBFc2NhcGUgYSBxdW90ZVxuICAgICAgICAgICAgICAvLyBUcmVhdCBuZXh0IGNoYXIgYXMgYSByZWd1bGFyIGNoYXJhY3RlclxuICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgZXNjYXBlICE9PSBudWxsICYmXG4gICAgICAgICAgICAgICAgdGhpcy5fX2lzRXNjYXBlKGJ1ZiwgcG9zLCBjaHIpICYmXG4gICAgICAgICAgICAgICAgdGhpcy5fX2lzUXVvdGUoYnVmLCBwb3MgKyBlc2NhcGUubGVuZ3RoKVxuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBwb3MgKz0gZXNjYXBlLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgIW5leHRDaHIgfHxcbiAgICAgICAgICAgICAgICBpc05leHRDaHJEZWxpbWl0ZXIgfHxcbiAgICAgICAgICAgICAgICBpc05leHRDaHJSZWNvcmREZWxpbWl0ZXIgfHxcbiAgICAgICAgICAgICAgICBpc05leHRDaHJDb21tZW50IHx8XG4gICAgICAgICAgICAgICAgaXNOZXh0Q2hyVHJpbWFibGVcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5xdW90aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS53YXNRdW90aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBwb3MgKz0gcXVvdGUubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZWxheF9xdW90ZXMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyID0gdGhpcy5fX2Vycm9yKFxuICAgICAgICAgICAgICAgICAgbmV3IENzdkVycm9yKFxuICAgICAgICAgICAgICAgICAgICBcIkNTVl9JTlZBTElEX0NMT1NJTkdfUVVPVEVcIixcbiAgICAgICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICAgIFwiSW52YWxpZCBDbG9zaW5nIFF1b3RlOlwiLFxuICAgICAgICAgICAgICAgICAgICAgIGBnb3QgXCIke1N0cmluZy5mcm9tQ2hhckNvZGUobmV4dENocil9XCJgLFxuICAgICAgICAgICAgICAgICAgICAgIGBhdCBsaW5lICR7dGhpcy5pbmZvLmxpbmVzfWAsXG4gICAgICAgICAgICAgICAgICAgICAgXCJpbnN0ZWFkIG9mIGRlbGltaXRlciwgcmVjb3JkIGRlbGltaXRlciwgdHJpbWFibGUgY2hhcmFjdGVyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgXCIoaWYgYWN0aXZhdGVkKSBvciBjb21tZW50XCIsXG4gICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fX2luZm9GaWVsZCgpLFxuICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGlmIChlcnIgIT09IHVuZGVmaW5lZCkgcmV0dXJuIGVycjtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnF1b3RpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLndhc1F1b3RpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuZmllbGQucHJlcGVuZChxdW90ZSk7XG4gICAgICAgICAgICAgICAgcG9zICs9IHF1b3RlLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLmZpZWxkLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgICAgIC8vIEluIHJlbGF4X3F1b3RlcyBtb2RlLCB0cmVhdCBvcGVuaW5nIHF1b3RlIHByZWNlZGVkIGJ5IGNocnMgYXMgcmVndWxhclxuICAgICAgICAgICAgICAgIGlmIChyZWxheF9xdW90ZXMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBpbmZvID0gdGhpcy5fX2luZm9GaWVsZCgpO1xuICAgICAgICAgICAgICAgICAgY29uc3QgYm9tID0gT2JqZWN0LmtleXMoYm9tcylcbiAgICAgICAgICAgICAgICAgICAgLm1hcCgoYikgPT5cbiAgICAgICAgICAgICAgICAgICAgICBib21zW2JdLmVxdWFscyh0aGlzLnN0YXRlLmZpZWxkLnRvU3RyaW5nKCkpID8gYiA6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoQm9vbGVhbilbMF07XG4gICAgICAgICAgICAgICAgICBjb25zdCBlcnIgPSB0aGlzLl9fZXJyb3IoXG4gICAgICAgICAgICAgICAgICAgIG5ldyBDc3ZFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgICBcIklOVkFMSURfT1BFTklOR19RVU9URVwiLFxuICAgICAgICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiSW52YWxpZCBPcGVuaW5nIFF1b3RlOlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgYGEgcXVvdGUgaXMgZm91bmQgb24gZmllbGQgJHtKU09OLnN0cmluZ2lmeShpbmZvLmNvbHVtbil9IGF0IGxpbmUgJHtpbmZvLmxpbmVzfSwgdmFsdWUgaXMgJHtKU09OLnN0cmluZ2lmeSh0aGlzLnN0YXRlLmZpZWxkLnRvU3RyaW5nKGVuY29kaW5nKSl9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvbSA/IGAoJHtib219IGJvbSlgIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLFxuICAgICAgICAgICAgICAgICAgICAgIGluZm8sXG4gICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQ6IHRoaXMuc3RhdGUuZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICBpZiAoZXJyICE9PSB1bmRlZmluZWQpIHJldHVybiBlcnI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUucXVvdGluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgcG9zICs9IHF1b3RlLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHRoaXMuc3RhdGUucXVvdGluZyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlY29yZERlbGltaXRlckxlbmd0aCA9IHRoaXMuX19pc1JlY29yZERlbGltaXRlcihcbiAgICAgICAgICAgICAgY2hyLFxuICAgICAgICAgICAgICBidWYsXG4gICAgICAgICAgICAgIHBvcyxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAocmVjb3JkRGVsaW1pdGVyTGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICAgIC8vIERvIG5vdCBlbWl0IGNvbW1lbnRzIHdoaWNoIHRha2UgYSBmdWxsIGxpbmVcbiAgICAgICAgICAgICAgY29uc3Qgc2tpcENvbW1lbnRMaW5lID1cbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmNvbW1lbnRpbmcgJiZcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLndhc1F1b3RpbmcgPT09IGZhbHNlICYmXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5yZWNvcmQubGVuZ3RoID09PSAwICYmXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5maWVsZC5sZW5ndGggPT09IDA7XG4gICAgICAgICAgICAgIGlmIChza2lwQ29tbWVudExpbmUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmluZm8uY29tbWVudF9saW5lcysrO1xuICAgICAgICAgICAgICAgIC8vIFNraXAgZnVsbCBjb21tZW50IGxpbmVcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBBY3RpdmF0ZSByZWNvcmRzIGVtaXRpb24gaWYgYWJvdmUgZnJvbV9saW5lXG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5lbmFibGVkID09PSBmYWxzZSAmJlxuICAgICAgICAgICAgICAgICAgdGhpcy5pbmZvLmxpbmVzICtcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMuc3RhdGUud2FzUm93RGVsaW1pdGVyID09PSB0cnVlID8gMSA6IDApID49XG4gICAgICAgICAgICAgICAgICAgIGZyb21fbGluZVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5lbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgIHRoaXMuX19yZXNldEZpZWxkKCk7XG4gICAgICAgICAgICAgICAgICB0aGlzLl9fcmVzZXRSZWNvcmQoKTtcbiAgICAgICAgICAgICAgICAgIHBvcyArPSByZWNvcmREZWxpbWl0ZXJMZW5ndGggLSAxO1xuICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFNraXAgaWYgbGluZSBpcyBlbXB0eSBhbmQgc2tpcF9lbXB0eV9saW5lcyBhY3RpdmF0ZWRcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICBza2lwX2VtcHR5X2xpbmVzID09PSB0cnVlICYmXG4gICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLndhc1F1b3RpbmcgPT09IGZhbHNlICYmXG4gICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnJlY29yZC5sZW5ndGggPT09IDAgJiZcbiAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuZmllbGQubGVuZ3RoID09PSAwXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLmluZm8uZW1wdHlfbGluZXMrKztcbiAgICAgICAgICAgICAgICAgIHBvcyArPSByZWNvcmREZWxpbWl0ZXJMZW5ndGggLSAxO1xuICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuaW5mby5ieXRlcyA9IHRoaXMuc3RhdGUuYnVmQnl0ZXNTdGFydCArIHBvcztcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJGaWVsZCA9IHRoaXMuX19vbkZpZWxkKCk7XG4gICAgICAgICAgICAgICAgaWYgKGVyckZpZWxkICE9PSB1bmRlZmluZWQpIHJldHVybiBlcnJGaWVsZDtcbiAgICAgICAgICAgICAgICB0aGlzLmluZm8uYnl0ZXMgPVxuICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5idWZCeXRlc1N0YXJ0ICsgcG9zICsgcmVjb3JkRGVsaW1pdGVyTGVuZ3RoO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVyclJlY29yZCA9IHRoaXMuX19vblJlY29yZChwdXNoKTtcbiAgICAgICAgICAgICAgICBpZiAoZXJyUmVjb3JkICE9PSB1bmRlZmluZWQpIHJldHVybiBlcnJSZWNvcmQ7XG4gICAgICAgICAgICAgICAgaWYgKHRvICE9PSAtMSAmJiB0aGlzLmluZm8ucmVjb3JkcyA+PSB0bykge1xuICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5zdG9wID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgIGNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHRoaXMuc3RhdGUuY29tbWVudGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICBwb3MgKz0gcmVjb3JkRGVsaW1pdGVyTGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5jb21tZW50aW5nKSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICBjb21tZW50ICE9PSBudWxsICYmXG4gICAgICAgICAgICAgIChjb21tZW50X25vX2luZml4ID09PSBmYWxzZSB8fFxuICAgICAgICAgICAgICAgICh0aGlzLnN0YXRlLnJlY29yZC5sZW5ndGggPT09IDAgJiZcbiAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuZmllbGQubGVuZ3RoID09PSAwKSlcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBjb25zdCBjb21tZW50Q291bnQgPSB0aGlzLl9fY29tcGFyZUJ5dGVzKGNvbW1lbnQsIGJ1ZiwgcG9zLCBjaHIpO1xuICAgICAgICAgICAgICBpZiAoY29tbWVudENvdW50ICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5jb21tZW50aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZGVsaW1pdGVyTGVuZ3RoID0gdGhpcy5fX2lzRGVsaW1pdGVyKGJ1ZiwgcG9zLCBjaHIpO1xuICAgICAgICAgICAgaWYgKGRlbGltaXRlckxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgICB0aGlzLmluZm8uYnl0ZXMgPSB0aGlzLnN0YXRlLmJ1ZkJ5dGVzU3RhcnQgKyBwb3M7XG4gICAgICAgICAgICAgIGNvbnN0IGVyckZpZWxkID0gdGhpcy5fX29uRmllbGQoKTtcbiAgICAgICAgICAgICAgaWYgKGVyckZpZWxkICE9PSB1bmRlZmluZWQpIHJldHVybiBlcnJGaWVsZDtcbiAgICAgICAgICAgICAgcG9zICs9IGRlbGltaXRlckxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5jb21tZW50aW5nID09PSBmYWxzZSkge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIG1heF9yZWNvcmRfc2l6ZSAhPT0gMCAmJlxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5yZWNvcmRfbGVuZ3RoICsgdGhpcy5zdGF0ZS5maWVsZC5sZW5ndGggPiBtYXhfcmVjb3JkX3NpemVcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9fZXJyb3IoXG4gICAgICAgICAgICAgIG5ldyBDc3ZFcnJvcihcbiAgICAgICAgICAgICAgICBcIkNTVl9NQVhfUkVDT1JEX1NJWkVcIixcbiAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICBcIk1heCBSZWNvcmQgU2l6ZTpcIixcbiAgICAgICAgICAgICAgICAgIFwicmVjb3JkIGV4Y2VlZCB0aGUgbWF4aW11bSBudW1iZXIgb2YgdG9sZXJhdGVkIGJ5dGVzXCIsXG4gICAgICAgICAgICAgICAgICBgb2YgJHttYXhfcmVjb3JkX3NpemV9YCxcbiAgICAgICAgICAgICAgICAgIGBhdCBsaW5lICR7dGhpcy5pbmZvLmxpbmVzfWAsXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMsXG4gICAgICAgICAgICAgICAgdGhpcy5fX2luZm9GaWVsZCgpLFxuICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbGFwcGVuZCA9XG4gICAgICAgICAgbHRyaW0gPT09IGZhbHNlIHx8XG4gICAgICAgICAgdGhpcy5zdGF0ZS5xdW90aW5nID09PSB0cnVlIHx8XG4gICAgICAgICAgdGhpcy5zdGF0ZS5maWVsZC5sZW5ndGggIT09IDAgfHxcbiAgICAgICAgICAhdGhpcy5fX2lzQ2hhclRyaW1hYmxlKGJ1ZiwgcG9zKTtcbiAgICAgICAgLy8gcnRyaW0gaW4gbm9uIHF1b3RpbmcgaXMgaGFuZGxlIGluIF9fb25GaWVsZFxuICAgICAgICBjb25zdCByYXBwZW5kID0gcnRyaW0gPT09IGZhbHNlIHx8IHRoaXMuc3RhdGUud2FzUXVvdGluZyA9PT0gZmFsc2U7XG4gICAgICAgIGlmIChsYXBwZW5kID09PSB0cnVlICYmIHJhcHBlbmQgPT09IHRydWUpIHtcbiAgICAgICAgICB0aGlzLnN0YXRlLmZpZWxkLmFwcGVuZChjaHIpO1xuICAgICAgICB9IGVsc2UgaWYgKHJ0cmltID09PSB0cnVlICYmICF0aGlzLl9faXNDaGFyVHJpbWFibGUoYnVmLCBwb3MpKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX19lcnJvcihcbiAgICAgICAgICAgIG5ldyBDc3ZFcnJvcihcbiAgICAgICAgICAgICAgXCJDU1ZfTk9OX1RSSU1BQkxFX0NIQVJfQUZURVJfQ0xPU0lOR19RVU9URVwiLFxuICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgXCJJbnZhbGlkIENsb3NpbmcgUXVvdGU6XCIsXG4gICAgICAgICAgICAgICAgXCJmb3VuZCBub24gdHJpbWFibGUgYnl0ZSBhZnRlciBxdW90ZVwiLFxuICAgICAgICAgICAgICAgIGBhdCBsaW5lICR7dGhpcy5pbmZvLmxpbmVzfWAsXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgIHRoaXMub3B0aW9ucyxcbiAgICAgICAgICAgICAgdGhpcy5fX2luZm9GaWVsZCgpLFxuICAgICAgICAgICAgKSxcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChsYXBwZW5kID09PSBmYWxzZSkge1xuICAgICAgICAgICAgcG9zICs9IHRoaXMuX19pc0NoYXJUcmltYWJsZShidWYsIHBvcykgLSAxO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGVuZCA9PT0gdHJ1ZSkge1xuICAgICAgICAvLyBFbnN1cmUgd2UgYXJlIG5vdCBlbmRpbmcgaW4gYSBxdW90aW5nIHN0YXRlXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnF1b3RpbmcgPT09IHRydWUpIHtcbiAgICAgICAgICBjb25zdCBlcnIgPSB0aGlzLl9fZXJyb3IoXG4gICAgICAgICAgICBuZXcgQ3N2RXJyb3IoXG4gICAgICAgICAgICAgIFwiQ1NWX1FVT1RFX05PVF9DTE9TRURcIixcbiAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgIFwiUXVvdGUgTm90IENsb3NlZDpcIixcbiAgICAgICAgICAgICAgICBgdGhlIHBhcnNpbmcgaXMgZmluaXNoZWQgd2l0aCBhbiBvcGVuaW5nIHF1b3RlIGF0IGxpbmUgJHt0aGlzLmluZm8ubGluZXN9YCxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLFxuICAgICAgICAgICAgICB0aGlzLl9faW5mb0ZpZWxkKCksXG4gICAgICAgICAgICApLFxuICAgICAgICAgICk7XG4gICAgICAgICAgaWYgKGVyciAhPT0gdW5kZWZpbmVkKSByZXR1cm4gZXJyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFNraXAgbGFzdCBsaW5lIGlmIGl0IGhhcyBubyBjaGFyYWN0ZXJzXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy5zdGF0ZS53YXNRdW90aW5nID09PSB0cnVlIHx8XG4gICAgICAgICAgICB0aGlzLnN0YXRlLnJlY29yZC5sZW5ndGggIT09IDAgfHxcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuZmllbGQubGVuZ3RoICE9PSAwXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLmluZm8uYnl0ZXMgPSB0aGlzLnN0YXRlLmJ1ZkJ5dGVzU3RhcnQgKyBwb3M7XG4gICAgICAgICAgICBjb25zdCBlcnJGaWVsZCA9IHRoaXMuX19vbkZpZWxkKCk7XG4gICAgICAgICAgICBpZiAoZXJyRmllbGQgIT09IHVuZGVmaW5lZCkgcmV0dXJuIGVyckZpZWxkO1xuICAgICAgICAgICAgY29uc3QgZXJyUmVjb3JkID0gdGhpcy5fX29uUmVjb3JkKHB1c2gpO1xuICAgICAgICAgICAgaWYgKGVyclJlY29yZCAhPT0gdW5kZWZpbmVkKSByZXR1cm4gZXJyUmVjb3JkO1xuICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZS53YXNSb3dEZWxpbWl0ZXIgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHRoaXMuaW5mby5lbXB0eV9saW5lcysrO1xuICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZS5jb21tZW50aW5nID09PSB0cnVlKSB7XG4gICAgICAgICAgICB0aGlzLmluZm8uY29tbWVudF9saW5lcysrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zdGF0ZS5idWZCeXRlc1N0YXJ0ICs9IHBvcztcbiAgICAgICAgdGhpcy5zdGF0ZS5wcmV2aW91c0J1ZiA9IGJ1Zi5zbGljZShwb3MpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuc3RhdGUud2FzUm93RGVsaW1pdGVyID09PSB0cnVlKSB7XG4gICAgICAgIHRoaXMuaW5mby5saW5lcysrO1xuICAgICAgICB0aGlzLnN0YXRlLndhc1Jvd0RlbGltaXRlciA9IGZhbHNlO1xuICAgICAgfVxuICAgIH0sXG4gICAgX19vblJlY29yZDogZnVuY3Rpb24gKHB1c2gpIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgY29sdW1ucyxcbiAgICAgICAgZ3JvdXBfY29sdW1uc19ieV9uYW1lLFxuICAgICAgICBlbmNvZGluZyxcbiAgICAgICAgaW5mbyxcbiAgICAgICAgZnJvbSxcbiAgICAgICAgcmVsYXhfY29sdW1uX2NvdW50LFxuICAgICAgICByZWxheF9jb2x1bW5fY291bnRfbGVzcyxcbiAgICAgICAgcmVsYXhfY29sdW1uX2NvdW50X21vcmUsXG4gICAgICAgIHJhdyxcbiAgICAgICAgc2tpcF9yZWNvcmRzX3dpdGhfZW1wdHlfdmFsdWVzLFxuICAgICAgfSA9IHRoaXMub3B0aW9ucztcbiAgICAgIGNvbnN0IHsgZW5hYmxlZCwgcmVjb3JkIH0gPSB0aGlzLnN0YXRlO1xuICAgICAgaWYgKGVuYWJsZWQgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9fcmVzZXRSZWNvcmQoKTtcbiAgICAgIH1cbiAgICAgIC8vIENvbnZlcnQgdGhlIGZpcnN0IGxpbmUgaW50byBjb2x1bW4gbmFtZXNcbiAgICAgIGNvbnN0IHJlY29yZExlbmd0aCA9IHJlY29yZC5sZW5ndGg7XG4gICAgICBpZiAoY29sdW1ucyA9PT0gdHJ1ZSkge1xuICAgICAgICBpZiAoc2tpcF9yZWNvcmRzX3dpdGhfZW1wdHlfdmFsdWVzID09PSB0cnVlICYmIGlzUmVjb3JkRW1wdHkocmVjb3JkKSkge1xuICAgICAgICAgIHRoaXMuX19yZXNldFJlY29yZCgpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fX2ZpcnN0TGluZVRvQ29sdW1ucyhyZWNvcmQpO1xuICAgICAgfVxuICAgICAgaWYgKGNvbHVtbnMgPT09IGZhbHNlICYmIHRoaXMuaW5mby5yZWNvcmRzID09PSAwKSB7XG4gICAgICAgIHRoaXMuc3RhdGUuZXhwZWN0ZWRSZWNvcmRMZW5ndGggPSByZWNvcmRMZW5ndGg7XG4gICAgICB9XG4gICAgICBpZiAocmVjb3JkTGVuZ3RoICE9PSB0aGlzLnN0YXRlLmV4cGVjdGVkUmVjb3JkTGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IGVyciA9XG4gICAgICAgICAgY29sdW1ucyA9PT0gZmFsc2VcbiAgICAgICAgICAgID8gbmV3IENzdkVycm9yKFxuICAgICAgICAgICAgICAgIFwiQ1NWX1JFQ09SRF9JTkNPTlNJU1RFTlRfRklFTERTX0xFTkdUSFwiLFxuICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgIFwiSW52YWxpZCBSZWNvcmQgTGVuZ3RoOlwiLFxuICAgICAgICAgICAgICAgICAgYGV4cGVjdCAke3RoaXMuc3RhdGUuZXhwZWN0ZWRSZWNvcmRMZW5ndGh9LGAsXG4gICAgICAgICAgICAgICAgICBgZ290ICR7cmVjb3JkTGVuZ3RofSBvbiBsaW5lICR7dGhpcy5pbmZvLmxpbmVzfWAsXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMsXG4gICAgICAgICAgICAgICAgdGhpcy5fX2luZm9GaWVsZCgpLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIHJlY29yZDogcmVjb3JkLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIDogbmV3IENzdkVycm9yKFxuICAgICAgICAgICAgICAgIFwiQ1NWX1JFQ09SRF9JTkNPTlNJU1RFTlRfQ09MVU1OU1wiLFxuICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgIFwiSW52YWxpZCBSZWNvcmQgTGVuZ3RoOlwiLFxuICAgICAgICAgICAgICAgICAgYGNvbHVtbnMgbGVuZ3RoIGlzICR7Y29sdW1ucy5sZW5ndGh9LGAsIC8vIHJlbmFtZSBjb2x1bW5zXG4gICAgICAgICAgICAgICAgICBgZ290ICR7cmVjb3JkTGVuZ3RofSBvbiBsaW5lICR7dGhpcy5pbmZvLmxpbmVzfWAsXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMsXG4gICAgICAgICAgICAgICAgdGhpcy5fX2luZm9GaWVsZCgpLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIHJlY29yZDogcmVjb3JkLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICk7XG4gICAgICAgIGlmIChcbiAgICAgICAgICByZWxheF9jb2x1bW5fY291bnQgPT09IHRydWUgfHxcbiAgICAgICAgICAocmVsYXhfY29sdW1uX2NvdW50X2xlc3MgPT09IHRydWUgJiZcbiAgICAgICAgICAgIHJlY29yZExlbmd0aCA8IHRoaXMuc3RhdGUuZXhwZWN0ZWRSZWNvcmRMZW5ndGgpIHx8XG4gICAgICAgICAgKHJlbGF4X2NvbHVtbl9jb3VudF9tb3JlID09PSB0cnVlICYmXG4gICAgICAgICAgICByZWNvcmRMZW5ndGggPiB0aGlzLnN0YXRlLmV4cGVjdGVkUmVjb3JkTGVuZ3RoKVxuICAgICAgICApIHtcbiAgICAgICAgICB0aGlzLmluZm8uaW52YWxpZF9maWVsZF9sZW5ndGgrKztcbiAgICAgICAgICB0aGlzLnN0YXRlLmVycm9yID0gZXJyO1xuICAgICAgICAgIC8vIEVycm9yIGlzIHVuZGVmaW5lZCB3aXRoIHNraXBfcmVjb3Jkc193aXRoX2Vycm9yXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgZmluYWxFcnIgPSB0aGlzLl9fZXJyb3IoZXJyKTtcbiAgICAgICAgICBpZiAoZmluYWxFcnIpIHJldHVybiBmaW5hbEVycjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHNraXBfcmVjb3Jkc193aXRoX2VtcHR5X3ZhbHVlcyA9PT0gdHJ1ZSAmJiBpc1JlY29yZEVtcHR5KHJlY29yZCkpIHtcbiAgICAgICAgdGhpcy5fX3Jlc2V0UmVjb3JkKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnN0YXRlLnJlY29yZEhhc0Vycm9yID09PSB0cnVlKSB7XG4gICAgICAgIHRoaXMuX19yZXNldFJlY29yZCgpO1xuICAgICAgICB0aGlzLnN0YXRlLnJlY29yZEhhc0Vycm9yID0gZmFsc2U7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMuaW5mby5yZWNvcmRzKys7XG4gICAgICBpZiAoZnJvbSA9PT0gMSB8fCB0aGlzLmluZm8ucmVjb3JkcyA+PSBmcm9tKSB7XG4gICAgICAgIGNvbnN0IHsgb2JqbmFtZSB9ID0gdGhpcy5vcHRpb25zO1xuICAgICAgICAvLyBXaXRoIGNvbHVtbnMsIHJlY29yZHMgYXJlIG9iamVjdFxuICAgICAgICBpZiAoY29sdW1ucyAhPT0gZmFsc2UpIHtcbiAgICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgICAvLyBUcmFuc2Zvcm0gcmVjb3JkIGFycmF5IHRvIGFuIG9iamVjdFxuICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gcmVjb3JkLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgaWYgKGNvbHVtbnNbaV0gPT09IHVuZGVmaW5lZCB8fCBjb2x1bW5zW2ldLmRpc2FibGVkKSBjb250aW51ZTtcbiAgICAgICAgICAgIC8vIFR1cm4gZHVwbGljYXRlIGNvbHVtbnMgaW50byBhbiBhcnJheVxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICBncm91cF9jb2x1bW5zX2J5X25hbWUgPT09IHRydWUgJiZcbiAgICAgICAgICAgICAgb2JqW2NvbHVtbnNbaV0ubmFtZV0gIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9ialtjb2x1bW5zW2ldLm5hbWVdKSkge1xuICAgICAgICAgICAgICAgIG9ialtjb2x1bW5zW2ldLm5hbWVdID0gb2JqW2NvbHVtbnNbaV0ubmFtZV0uY29uY2F0KHJlY29yZFtpXSk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgb2JqW2NvbHVtbnNbaV0ubmFtZV0gPSBbb2JqW2NvbHVtbnNbaV0ubmFtZV0sIHJlY29yZFtpXV07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIG9ialtjb2x1bW5zW2ldLm5hbWVdID0gcmVjb3JkW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBXaXRob3V0IG9iam5hbWUgKGRlZmF1bHQpXG4gICAgICAgICAgaWYgKHJhdyA9PT0gdHJ1ZSB8fCBpbmZvID09PSB0cnVlKSB7XG4gICAgICAgICAgICBjb25zdCBleHRSZWNvcmQgPSBPYmplY3QuYXNzaWduKFxuICAgICAgICAgICAgICB7IHJlY29yZDogb2JqIH0sXG4gICAgICAgICAgICAgIHJhdyA9PT0gdHJ1ZVxuICAgICAgICAgICAgICAgID8geyByYXc6IHRoaXMuc3RhdGUucmF3QnVmZmVyLnRvU3RyaW5nKGVuY29kaW5nKSB9XG4gICAgICAgICAgICAgICAgOiB7fSxcbiAgICAgICAgICAgICAgaW5mbyA9PT0gdHJ1ZSA/IHsgaW5mbzogdGhpcy5fX2luZm9SZWNvcmQoKSB9IDoge30sXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgY29uc3QgZXJyID0gdGhpcy5fX3B1c2goXG4gICAgICAgICAgICAgIG9iam5hbWUgPT09IHVuZGVmaW5lZCA/IGV4dFJlY29yZCA6IFtvYmpbb2JqbmFtZV0sIGV4dFJlY29yZF0sXG4gICAgICAgICAgICAgIHB1c2gsXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICByZXR1cm4gZXJyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBlcnIgPSB0aGlzLl9fcHVzaChcbiAgICAgICAgICAgICAgb2JqbmFtZSA9PT0gdW5kZWZpbmVkID8gb2JqIDogW29ialtvYmpuYW1lXSwgb2JqXSxcbiAgICAgICAgICAgICAgcHVzaCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgIHJldHVybiBlcnI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIFdpdGhvdXQgY29sdW1ucywgcmVjb3JkcyBhcmUgYXJyYXlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAocmF3ID09PSB0cnVlIHx8IGluZm8gPT09IHRydWUpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4dFJlY29yZCA9IE9iamVjdC5hc3NpZ24oXG4gICAgICAgICAgICAgIHsgcmVjb3JkOiByZWNvcmQgfSxcbiAgICAgICAgICAgICAgcmF3ID09PSB0cnVlXG4gICAgICAgICAgICAgICAgPyB7IHJhdzogdGhpcy5zdGF0ZS5yYXdCdWZmZXIudG9TdHJpbmcoZW5jb2RpbmcpIH1cbiAgICAgICAgICAgICAgICA6IHt9LFxuICAgICAgICAgICAgICBpbmZvID09PSB0cnVlID8geyBpbmZvOiB0aGlzLl9faW5mb1JlY29yZCgpIH0gOiB7fSxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zdCBlcnIgPSB0aGlzLl9fcHVzaChcbiAgICAgICAgICAgICAgb2JqbmFtZSA9PT0gdW5kZWZpbmVkID8gZXh0UmVjb3JkIDogW3JlY29yZFtvYmpuYW1lXSwgZXh0UmVjb3JkXSxcbiAgICAgICAgICAgICAgcHVzaCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgIHJldHVybiBlcnI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGVyciA9IHRoaXMuX19wdXNoKFxuICAgICAgICAgICAgICBvYmpuYW1lID09PSB1bmRlZmluZWQgPyByZWNvcmQgOiBbcmVjb3JkW29iam5hbWVdLCByZWNvcmRdLFxuICAgICAgICAgICAgICBwdXNoLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGVycjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMuX19yZXNldFJlY29yZCgpO1xuICAgIH0sXG4gICAgX19maXJzdExpbmVUb0NvbHVtbnM6IGZ1bmN0aW9uIChyZWNvcmQpIHtcbiAgICAgIGNvbnN0IHsgZmlyc3RMaW5lVG9IZWFkZXJzIH0gPSB0aGlzLnN0YXRlO1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgaGVhZGVycyA9XG4gICAgICAgICAgZmlyc3RMaW5lVG9IZWFkZXJzID09PSB1bmRlZmluZWRcbiAgICAgICAgICAgID8gcmVjb3JkXG4gICAgICAgICAgICA6IGZpcnN0TGluZVRvSGVhZGVycy5jYWxsKG51bGwsIHJlY29yZCk7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShoZWFkZXJzKSkge1xuICAgICAgICAgIHJldHVybiB0aGlzLl9fZXJyb3IoXG4gICAgICAgICAgICBuZXcgQ3N2RXJyb3IoXG4gICAgICAgICAgICAgIFwiQ1NWX0lOVkFMSURfQ09MVU1OX01BUFBJTkdcIixcbiAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgIFwiSW52YWxpZCBDb2x1bW4gTWFwcGluZzpcIixcbiAgICAgICAgICAgICAgICBcImV4cGVjdCBhbiBhcnJheSBmcm9tIGNvbHVtbiBmdW5jdGlvbixcIixcbiAgICAgICAgICAgICAgICBgZ290ICR7SlNPTi5zdHJpbmdpZnkoaGVhZGVycyl9YCxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLFxuICAgICAgICAgICAgICB0aGlzLl9faW5mb0ZpZWxkKCksXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgKSxcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRIZWFkZXJzID0gbm9ybWFsaXplX2NvbHVtbnNfYXJyYXkoaGVhZGVycyk7XG4gICAgICAgIHRoaXMuc3RhdGUuZXhwZWN0ZWRSZWNvcmRMZW5ndGggPSBub3JtYWxpemVkSGVhZGVycy5sZW5ndGg7XG4gICAgICAgIHRoaXMub3B0aW9ucy5jb2x1bW5zID0gbm9ybWFsaXplZEhlYWRlcnM7XG4gICAgICAgIHRoaXMuX19yZXNldFJlY29yZCgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIGVycjtcbiAgICAgIH1cbiAgICB9LFxuICAgIF9fcmVzZXRSZWNvcmQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMucmF3ID09PSB0cnVlKSB7XG4gICAgICAgIHRoaXMuc3RhdGUucmF3QnVmZmVyLnJlc2V0KCk7XG4gICAgICB9XG4gICAgICB0aGlzLnN0YXRlLmVycm9yID0gdW5kZWZpbmVkO1xuICAgICAgdGhpcy5zdGF0ZS5yZWNvcmQgPSBbXTtcbiAgICAgIHRoaXMuc3RhdGUucmVjb3JkX2xlbmd0aCA9IDA7XG4gICAgfSxcbiAgICBfX29uRmllbGQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IHsgY2FzdCwgZW5jb2RpbmcsIHJ0cmltLCBtYXhfcmVjb3JkX3NpemUgfSA9IHRoaXMub3B0aW9ucztcbiAgICAgIGNvbnN0IHsgZW5hYmxlZCwgd2FzUXVvdGluZyB9ID0gdGhpcy5zdGF0ZTtcbiAgICAgIC8vIFNob3J0IGNpcmN1aXQgZm9yIHRoZSBmcm9tX2xpbmUgb3B0aW9uc1xuICAgICAgaWYgKGVuYWJsZWQgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9fcmVzZXRGaWVsZCgpO1xuICAgICAgfVxuICAgICAgbGV0IGZpZWxkID0gdGhpcy5zdGF0ZS5maWVsZC50b1N0cmluZyhlbmNvZGluZyk7XG4gICAgICBpZiAocnRyaW0gPT09IHRydWUgJiYgd2FzUXVvdGluZyA9PT0gZmFsc2UpIHtcbiAgICAgICAgZmllbGQgPSBmaWVsZC50cmltUmlnaHQoKTtcbiAgICAgIH1cbiAgICAgIGlmIChjYXN0ID09PSB0cnVlKSB7XG4gICAgICAgIGNvbnN0IFtlcnIsIGZdID0gdGhpcy5fX2Nhc3QoZmllbGQpO1xuICAgICAgICBpZiAoZXJyICE9PSB1bmRlZmluZWQpIHJldHVybiBlcnI7XG4gICAgICAgIGZpZWxkID0gZjtcbiAgICAgIH1cbiAgICAgIHRoaXMuc3RhdGUucmVjb3JkLnB1c2goZmllbGQpO1xuICAgICAgLy8gSW5jcmVtZW50IHJlY29yZCBsZW5ndGggaWYgcmVjb3JkIHNpemUgbXVzdCBub3QgZXhjZWVkIGEgbGltaXRcbiAgICAgIGlmIChtYXhfcmVjb3JkX3NpemUgIT09IDAgJiYgdHlwZW9mIGZpZWxkID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHRoaXMuc3RhdGUucmVjb3JkX2xlbmd0aCArPSBmaWVsZC5sZW5ndGg7XG4gICAgICB9XG4gICAgICB0aGlzLl9fcmVzZXRGaWVsZCgpO1xuICAgIH0sXG4gICAgX19yZXNldEZpZWxkOiBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLnN0YXRlLmZpZWxkLnJlc2V0KCk7XG4gICAgICB0aGlzLnN0YXRlLndhc1F1b3RpbmcgPSBmYWxzZTtcbiAgICB9LFxuICAgIF9fcHVzaDogZnVuY3Rpb24gKHJlY29yZCwgcHVzaCkge1xuICAgICAgY29uc3QgeyBvbl9yZWNvcmQgfSA9IHRoaXMub3B0aW9ucztcbiAgICAgIGlmIChvbl9yZWNvcmQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25zdCBpbmZvID0gdGhpcy5fX2luZm9SZWNvcmQoKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZWNvcmQgPSBvbl9yZWNvcmQuY2FsbChudWxsLCByZWNvcmQsIGluZm8pO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICByZXR1cm4gZXJyO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZWNvcmQgPT09IHVuZGVmaW5lZCB8fCByZWNvcmQgPT09IG51bGwpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHB1c2gocmVjb3JkKTtcbiAgICB9LFxuICAgIC8vIFJldHVybiBhIHR1cGxlIHdpdGggdGhlIGVycm9yIGFuZCB0aGUgY2FzdGVkIHZhbHVlXG4gICAgX19jYXN0OiBmdW5jdGlvbiAoZmllbGQpIHtcbiAgICAgIGNvbnN0IHsgY29sdW1ucywgcmVsYXhfY29sdW1uX2NvdW50IH0gPSB0aGlzLm9wdGlvbnM7XG4gICAgICBjb25zdCBpc0NvbHVtbnMgPSBBcnJheS5pc0FycmF5KGNvbHVtbnMpO1xuICAgICAgLy8gRG9udCBsb29zZSB0aW1lIGNhbGxpbmcgY2FzdFxuICAgICAgLy8gYmVjYXVzZSB0aGUgZmluYWwgcmVjb3JkIGlzIGFuIG9iamVjdFxuICAgICAgLy8gYW5kIHRoaXMgZmllbGQgY2FuJ3QgYmUgYXNzb2NpYXRlZCB0byBhIGtleSBwcmVzZW50IGluIGNvbHVtbnNcbiAgICAgIGlmIChcbiAgICAgICAgaXNDb2x1bW5zID09PSB0cnVlICYmXG4gICAgICAgIHJlbGF4X2NvbHVtbl9jb3VudCAmJlxuICAgICAgICB0aGlzLm9wdGlvbnMuY29sdW1ucy5sZW5ndGggPD0gdGhpcy5zdGF0ZS5yZWNvcmQubGVuZ3RoXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIFt1bmRlZmluZWQsIHVuZGVmaW5lZF07XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5zdGF0ZS5jYXN0RmllbGQgIT09IG51bGwpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBpbmZvID0gdGhpcy5fX2luZm9GaWVsZCgpO1xuICAgICAgICAgIHJldHVybiBbdW5kZWZpbmVkLCB0aGlzLnN0YXRlLmNhc3RGaWVsZC5jYWxsKG51bGwsIGZpZWxkLCBpbmZvKV07XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIHJldHVybiBbZXJyXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuX19pc0Zsb2F0KGZpZWxkKSkge1xuICAgICAgICByZXR1cm4gW3VuZGVmaW5lZCwgcGFyc2VGbG9hdChmaWVsZCldO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLm9wdGlvbnMuY2FzdF9kYXRlICE9PSBmYWxzZSkge1xuICAgICAgICBjb25zdCBpbmZvID0gdGhpcy5fX2luZm9GaWVsZCgpO1xuICAgICAgICByZXR1cm4gW3VuZGVmaW5lZCwgdGhpcy5vcHRpb25zLmNhc3RfZGF0ZS5jYWxsKG51bGwsIGZpZWxkLCBpbmZvKV07XG4gICAgICB9XG4gICAgICByZXR1cm4gW3VuZGVmaW5lZCwgZmllbGRdO1xuICAgIH0sXG4gICAgLy8gSGVscGVyIHRvIHRlc3QgaWYgYSBjaGFyYWN0ZXIgaXMgYSBzcGFjZSBvciBhIGxpbmUgZGVsaW1pdGVyXG4gICAgX19pc0NoYXJUcmltYWJsZTogZnVuY3Rpb24gKGJ1ZiwgcG9zKSB7XG4gICAgICBjb25zdCBpc1RyaW0gPSAoYnVmLCBwb3MpID0+IHtcbiAgICAgICAgY29uc3QgeyB0aW1jaGFycyB9ID0gdGhpcy5zdGF0ZTtcbiAgICAgICAgbG9vcDE6IGZvciAobGV0IGkgPSAwOyBpIDwgdGltY2hhcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBjb25zdCB0aW1jaGFyID0gdGltY2hhcnNbaV07XG4gICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aW1jaGFyLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICBpZiAodGltY2hhcltqXSAhPT0gYnVmW3BvcyArIGpdKSBjb250aW51ZSBsb29wMTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHRpbWNoYXIubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfTtcbiAgICAgIHJldHVybiBpc1RyaW0oYnVmLCBwb3MpO1xuICAgIH0sXG4gICAgLy8gS2VlcCBpdCBpbiBjYXNlIHdlIGltcGxlbWVudCB0aGUgYGNhc3RfaW50YCBvcHRpb25cbiAgICAvLyBfX2lzSW50KHZhbHVlKXtcbiAgICAvLyAgIC8vIHJldHVybiBOdW1iZXIuaXNJbnRlZ2VyKHBhcnNlSW50KHZhbHVlKSlcbiAgICAvLyAgIC8vIHJldHVybiAhaXNOYU4oIHBhcnNlSW50KCBvYmogKSApO1xuICAgIC8vICAgcmV0dXJuIC9eKFxcLXxcXCspP1sxLTldWzAtOV0qJC8udGVzdCh2YWx1ZSlcbiAgICAvLyB9XG4gICAgX19pc0Zsb2F0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIHJldHVybiB2YWx1ZSAtIHBhcnNlRmxvYXQodmFsdWUpICsgMSA+PSAwOyAvLyBCb3Jyb3dlZCBmcm9tIGpxdWVyeVxuICAgIH0sXG4gICAgX19jb21wYXJlQnl0ZXM6IGZ1bmN0aW9uIChzb3VyY2VCdWYsIHRhcmdldEJ1ZiwgdGFyZ2V0UG9zLCBmaXJzdEJ5dGUpIHtcbiAgICAgIGlmIChzb3VyY2VCdWZbMF0gIT09IGZpcnN0Qnl0ZSkgcmV0dXJuIDA7XG4gICAgICBjb25zdCBzb3VyY2VMZW5ndGggPSBzb3VyY2VCdWYubGVuZ3RoO1xuICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBzb3VyY2VMZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoc291cmNlQnVmW2ldICE9PSB0YXJnZXRCdWZbdGFyZ2V0UG9zICsgaV0pIHJldHVybiAwO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHNvdXJjZUxlbmd0aDtcbiAgICB9LFxuICAgIF9faXNEZWxpbWl0ZXI6IGZ1bmN0aW9uIChidWYsIHBvcywgY2hyKSB7XG4gICAgICBjb25zdCB7IGRlbGltaXRlciwgaWdub3JlX2xhc3RfZGVsaW1pdGVycyB9ID0gdGhpcy5vcHRpb25zO1xuICAgICAgaWYgKFxuICAgICAgICBpZ25vcmVfbGFzdF9kZWxpbWl0ZXJzID09PSB0cnVlICYmXG4gICAgICAgIHRoaXMuc3RhdGUucmVjb3JkLmxlbmd0aCA9PT0gdGhpcy5vcHRpb25zLmNvbHVtbnMubGVuZ3RoIC0gMVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgaWdub3JlX2xhc3RfZGVsaW1pdGVycyAhPT0gZmFsc2UgJiZcbiAgICAgICAgdHlwZW9mIGlnbm9yZV9sYXN0X2RlbGltaXRlcnMgPT09IFwibnVtYmVyXCIgJiZcbiAgICAgICAgdGhpcy5zdGF0ZS5yZWNvcmQubGVuZ3RoID09PSBpZ25vcmVfbGFzdF9kZWxpbWl0ZXJzIC0gMVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfVxuICAgICAgbG9vcDE6IGZvciAobGV0IGkgPSAwOyBpIDwgZGVsaW1pdGVyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGRlbCA9IGRlbGltaXRlcltpXTtcbiAgICAgICAgaWYgKGRlbFswXSA9PT0gY2hyKSB7XG4gICAgICAgICAgZm9yIChsZXQgaiA9IDE7IGogPCBkZWwubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIGlmIChkZWxbal0gIT09IGJ1Zltwb3MgKyBqXSkgY29udGludWUgbG9vcDE7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBkZWwubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gMDtcbiAgICB9LFxuICAgIF9faXNSZWNvcmREZWxpbWl0ZXI6IGZ1bmN0aW9uIChjaHIsIGJ1ZiwgcG9zKSB7XG4gICAgICBjb25zdCB7IHJlY29yZF9kZWxpbWl0ZXIgfSA9IHRoaXMub3B0aW9ucztcbiAgICAgIGNvbnN0IHJlY29yZERlbGltaXRlckxlbmd0aCA9IHJlY29yZF9kZWxpbWl0ZXIubGVuZ3RoO1xuICAgICAgbG9vcDE6IGZvciAobGV0IGkgPSAwOyBpIDwgcmVjb3JkRGVsaW1pdGVyTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgcmQgPSByZWNvcmRfZGVsaW1pdGVyW2ldO1xuICAgICAgICBjb25zdCByZExlbmd0aCA9IHJkLmxlbmd0aDtcbiAgICAgICAgaWYgKHJkWzBdICE9PSBjaHIpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBqID0gMTsgaiA8IHJkTGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICBpZiAocmRbal0gIT09IGJ1Zltwb3MgKyBqXSkge1xuICAgICAgICAgICAgY29udGludWUgbG9vcDE7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZC5sZW5ndGg7XG4gICAgICB9XG4gICAgICByZXR1cm4gMDtcbiAgICB9LFxuICAgIF9faXNFc2NhcGU6IGZ1bmN0aW9uIChidWYsIHBvcywgY2hyKSB7XG4gICAgICBjb25zdCB7IGVzY2FwZSB9ID0gdGhpcy5vcHRpb25zO1xuICAgICAgaWYgKGVzY2FwZSA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuICAgICAgY29uc3QgbCA9IGVzY2FwZS5sZW5ndGg7XG4gICAgICBpZiAoZXNjYXBlWzBdID09PSBjaHIpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICBpZiAoZXNjYXBlW2ldICE9PSBidWZbcG9zICsgaV0pIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcbiAgICBfX2lzUXVvdGU6IGZ1bmN0aW9uIChidWYsIHBvcykge1xuICAgICAgY29uc3QgeyBxdW90ZSB9ID0gdGhpcy5vcHRpb25zO1xuICAgICAgaWYgKHF1b3RlID09PSBudWxsKSByZXR1cm4gZmFsc2U7XG4gICAgICBjb25zdCBsID0gcXVvdGUubGVuZ3RoO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgaWYgKHF1b3RlW2ldICE9PSBidWZbcG9zICsgaV0pIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG4gICAgX19hdXRvRGlzY292ZXJSZWNvcmREZWxpbWl0ZXI6IGZ1bmN0aW9uIChidWYsIHBvcykge1xuICAgICAgY29uc3QgeyBlbmNvZGluZyB9ID0gdGhpcy5vcHRpb25zO1xuICAgICAgLy8gTm90ZSwgd2UgZG9uJ3QgbmVlZCB0byBjYWNoZSB0aGlzIGluZm9ybWF0aW9uIGluIHN0YXRlLFxuICAgICAgLy8gSXQgaXMgb25seSBjYWxsZWQgb24gdGhlIGZpcnN0IGxpbmUgdW50aWwgd2UgZmluZCBvdXQgYSBzdWl0YWJsZVxuICAgICAgLy8gcmVjb3JkIGRlbGltaXRlci5cbiAgICAgIGNvbnN0IHJkcyA9IFtcbiAgICAgICAgLy8gSW1wb3J0YW50LCB0aGUgd2luZG93cyBsaW5lIGVuZGluZyBtdXN0IGJlIGJlZm9yZSBtYWMgb3MgOVxuICAgICAgICBCdWZmZXIuZnJvbShcIlxcclxcblwiLCBlbmNvZGluZyksXG4gICAgICAgIEJ1ZmZlci5mcm9tKFwiXFxuXCIsIGVuY29kaW5nKSxcbiAgICAgICAgQnVmZmVyLmZyb20oXCJcXHJcIiwgZW5jb2RpbmcpLFxuICAgICAgXTtcbiAgICAgIGxvb3A6IGZvciAobGV0IGkgPSAwOyBpIDwgcmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGwgPSByZHNbaV0ubGVuZ3RoO1xuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGw7IGorKykge1xuICAgICAgICAgIGlmIChyZHNbaV1bal0gIT09IGJ1Zltwb3MgKyBqXSkge1xuICAgICAgICAgICAgY29udGludWUgbG9vcDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vcHRpb25zLnJlY29yZF9kZWxpbWl0ZXIucHVzaChyZHNbaV0pO1xuICAgICAgICB0aGlzLnN0YXRlLnJlY29yZERlbGltaXRlck1heExlbmd0aCA9IHJkc1tpXS5sZW5ndGg7XG4gICAgICAgIHJldHVybiByZHNbaV0ubGVuZ3RoO1xuICAgICAgfVxuICAgICAgcmV0dXJuIDA7XG4gICAgfSxcbiAgICBfX2Vycm9yOiBmdW5jdGlvbiAobXNnKSB7XG4gICAgICBjb25zdCB7IGVuY29kaW5nLCByYXcsIHNraXBfcmVjb3Jkc193aXRoX2Vycm9yIH0gPSB0aGlzLm9wdGlvbnM7XG4gICAgICBjb25zdCBlcnIgPSB0eXBlb2YgbXNnID09PSBcInN0cmluZ1wiID8gbmV3IEVycm9yKG1zZykgOiBtc2c7XG4gICAgICBpZiAoc2tpcF9yZWNvcmRzX3dpdGhfZXJyb3IpIHtcbiAgICAgICAgdGhpcy5zdGF0ZS5yZWNvcmRIYXNFcnJvciA9IHRydWU7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMub25fc2tpcCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgdGhpcy5vcHRpb25zLm9uX3NraXAoXG4gICAgICAgICAgICBlcnIsXG4gICAgICAgICAgICByYXcgPyB0aGlzLnN0YXRlLnJhd0J1ZmZlci50b1N0cmluZyhlbmNvZGluZykgOiB1bmRlZmluZWQsXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICAvLyB0aGlzLmVtaXQoJ3NraXAnLCBlcnIsIHJhdyA/IHRoaXMuc3RhdGUucmF3QnVmZmVyLnRvU3RyaW5nKGVuY29kaW5nKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZXJyO1xuICAgICAgfVxuICAgIH0sXG4gICAgX19pbmZvRGF0YVNldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4udGhpcy5pbmZvLFxuICAgICAgICBjb2x1bW5zOiB0aGlzLm9wdGlvbnMuY29sdW1ucyxcbiAgICAgIH07XG4gICAgfSxcbiAgICBfX2luZm9SZWNvcmQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IHsgY29sdW1ucywgcmF3LCBlbmNvZGluZyB9ID0gdGhpcy5vcHRpb25zO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4udGhpcy5fX2luZm9EYXRhU2V0KCksXG4gICAgICAgIGVycm9yOiB0aGlzLnN0YXRlLmVycm9yLFxuICAgICAgICBoZWFkZXI6IGNvbHVtbnMgPT09IHRydWUsXG4gICAgICAgIGluZGV4OiB0aGlzLnN0YXRlLnJlY29yZC5sZW5ndGgsXG4gICAgICAgIHJhdzogcmF3ID8gdGhpcy5zdGF0ZS5yYXdCdWZmZXIudG9TdHJpbmcoZW5jb2RpbmcpIDogdW5kZWZpbmVkLFxuICAgICAgfTtcbiAgICB9LFxuICAgIF9faW5mb0ZpZWxkOiBmdW5jdGlvbiAoKSB7XG4gICAgICBjb25zdCB7IGNvbHVtbnMgfSA9IHRoaXMub3B0aW9ucztcbiAgICAgIGNvbnN0IGlzQ29sdW1ucyA9IEFycmF5LmlzQXJyYXkoY29sdW1ucyk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi50aGlzLl9faW5mb1JlY29yZCgpLFxuICAgICAgICBjb2x1bW46XG4gICAgICAgICAgaXNDb2x1bW5zID09PSB0cnVlXG4gICAgICAgICAgICA/IGNvbHVtbnMubGVuZ3RoID4gdGhpcy5zdGF0ZS5yZWNvcmQubGVuZ3RoXG4gICAgICAgICAgICAgID8gY29sdW1uc1t0aGlzLnN0YXRlLnJlY29yZC5sZW5ndGhdLm5hbWVcbiAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICA6IHRoaXMuc3RhdGUucmVjb3JkLmxlbmd0aCxcbiAgICAgICAgcXVvdGluZzogdGhpcy5zdGF0ZS53YXNRdW90aW5nLFxuICAgICAgfTtcbiAgICB9LFxuICB9O1xufTtcblxuZXhwb3J0IHsgdHJhbnNmb3JtLCBDc3ZFcnJvciB9O1xuIiwgImltcG9ydCB7IENzdkVycm9yLCB0cmFuc2Zvcm0gfSBmcm9tIFwiLi9hcGkvaW5kZXguanNcIjtcblxuY29uc3QgcGFyc2UgPSBmdW5jdGlvbiAoZGF0YSwgb3B0cyA9IHt9KSB7XG4gIGlmICh0eXBlb2YgZGF0YSA9PT0gXCJzdHJpbmdcIikge1xuICAgIGRhdGEgPSBCdWZmZXIuZnJvbShkYXRhKTtcbiAgfVxuICBjb25zdCByZWNvcmRzID0gb3B0cyAmJiBvcHRzLm9iam5hbWUgPyB7fSA6IFtdO1xuICBjb25zdCBwYXJzZXIgPSB0cmFuc2Zvcm0ob3B0cyk7XG4gIGNvbnN0IHB1c2ggPSAocmVjb3JkKSA9PiB7XG4gICAgaWYgKHBhcnNlci5vcHRpb25zLm9iam5hbWUgPT09IHVuZGVmaW5lZCkgcmVjb3Jkcy5wdXNoKHJlY29yZCk7XG4gICAgZWxzZSB7XG4gICAgICByZWNvcmRzW3JlY29yZFswXV0gPSByZWNvcmRbMV07XG4gICAgfVxuICB9O1xuICBjb25zdCBjbG9zZSA9ICgpID0+IHt9O1xuICBjb25zdCBlcnIxID0gcGFyc2VyLnBhcnNlKGRhdGEsIGZhbHNlLCBwdXNoLCBjbG9zZSk7XG4gIGlmIChlcnIxICE9PSB1bmRlZmluZWQpIHRocm93IGVycjE7XG4gIGNvbnN0IGVycjIgPSBwYXJzZXIucGFyc2UodW5kZWZpbmVkLCB0cnVlLCBwdXNoLCBjbG9zZSk7XG4gIGlmIChlcnIyICE9PSB1bmRlZmluZWQpIHRocm93IGVycjI7XG4gIHJldHVybiByZWNvcmRzO1xufTtcblxuLy8gZXhwb3J0IGRlZmF1bHQgcGFyc2VcbmV4cG9ydCB7IHBhcnNlIH07XG5leHBvcnQgeyBDc3ZFcnJvciB9O1xuIiwgIi8qKlxuICogR1RGUyBSZWFsdGltZSBmZWVkIGZldGNoZXIgYW5kIHBhcnNlclxuICovXG5cbmltcG9ydCBmZXRjaCBmcm9tIFwibm9kZS1mZXRjaFwiO1xuaW1wb3J0IHsgdHJhbnNpdF9yZWFsdGltZSB9IGZyb20gXCJndGZzLXJ0LWJpbmRpbmdzXCI7XG5pbXBvcnQgeyBzaG93VG9hc3QsIFRvYXN0IH0gZnJvbSBcIkByYXljYXN0L2FwaVwiO1xuaW1wb3J0IHtcbiAgVmVoaWNsZURhdGEsXG4gIFRyaXBVcGRhdGVEYXRhLFxuICBTdG9wVGltZVVwZGF0ZURhdGEsXG4gIEFsZXJ0RGF0YSxcbiAgUmVhbHRpbWVEYXRhLFxufSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCB7IGlzRGF0YVN0YWxlIH0gZnJvbSBcIi4vdXRpbHNcIjtcblxuLy8gR1RGUy1SVCBGZWVkIFVSTHNcbi8vIE5vdGU6IENBVEEncyByZWFsLXRpbWUgZmVlZHMgYXBwZWFyIHRvIGJlIHVuYXZhaWxhYmxlIGFzIG9mIDIwMjRcbi8vIFRoZSBwcmV2aW91cyBVUkxzIHJldHVybiA0MDQgZXJyb3JzXG4vLyBUT0RPOiBDb250YWN0IENBVEEgYXQgaXRkZXZlbG9wZXJzQGNhdGEub3JnIGZvciB1cGRhdGVkIGZlZWQgVVJMc1xuY29uc3QgVkVISUNMRV9QT1NJVElPTlNfVVJMID0gXCJodHRwczovL2NhdGFidXMuY29tL2d0ZnNydC9WZWhpY2xlUG9zaXRpb24ucGJcIjtcbmNvbnN0IFRSSVBfVVBEQVRFU19VUkwgPSBcImh0dHBzOi8vY2F0YWJ1cy5jb20vZ3Rmc3J0L1RyaXBVcGRhdGUucGJcIjtcbmNvbnN0IFNFUlZJQ0VfQUxFUlRTX1VSTCA9IFwiaHR0cHM6Ly9jYXRhYnVzLmNvbS9ndGZzcnQvU2VydmljZUFsZXJ0cy5wYlwiO1xuXG4vLyBGZXRjaCBjb25maWd1cmF0aW9uXG5jb25zdCBGRVRDSF9USU1FT1VUID0gODAwMDsgLy8gOCBzZWNvbmRzXG5jb25zdCBTVEFMRU5FU1NfVEhSRVNIT0xEID0gNjA7IC8vIDYwIHNlY29uZHNcblxuLyoqXG4gKiBGZXRjaCBhIEdURlMtUlQgUHJvdG9jb2wgQnVmZmVyIGZlZWRcbiAqIEBwYXJhbSB1cmwgLSBGZWVkIFVSTFxuICogQHJldHVybnMgUGFyc2VkIEZlZWRNZXNzYWdlIG9yIG51bGwgb24gZXJyb3JcbiAqL1xuYXN5bmMgZnVuY3Rpb24gZmV0Y2hHVEZTUmVhbHRpbWVGZWVkKHVybDogc3RyaW5nKTogUHJvbWlzZTx0cmFuc2l0X3JlYWx0aW1lLkZlZWRNZXNzYWdlIHwgbnVsbD4ge1xuICBjb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICBjb25zdCB0aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiBjb250cm9sbGVyLmFib3J0KCksIEZFVENIX1RJTUVPVVQpO1xuICBcbiAgdHJ5IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgc2lnbmFsOiBjb250cm9sbGVyLnNpZ25hbCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgXCJBY2NlcHRcIjogXCJhcHBsaWNhdGlvbi94LXByb3RvYnVmXCIsXG4gICAgICB9LFxuICAgIH0pO1xuICAgIFxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIC8vIFNpbGVudGx5IGZhaWwgZm9yIDQwNHMgYXMgdGhlIGZlZWRzIGFwcGVhciB0byBiZSB1bmF2YWlsYWJsZVxuICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDA0KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBSZWFsLXRpbWUgZmVlZCB1bmF2YWlsYWJsZSAoNDA0KTogJHt1cmx9YCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBIVFRQICR7cmVzcG9uc2Uuc3RhdHVzfTogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGJ1ZmZlciA9IGF3YWl0IHJlc3BvbnNlLmFycmF5QnVmZmVyKCk7XG4gICAgY29uc3QgZmVlZCA9IHRyYW5zaXRfcmVhbHRpbWUuRmVlZE1lc3NhZ2UuZGVjb2RlKG5ldyBVaW50OEFycmF5KGJ1ZmZlcikpO1xuICAgIFxuICAgIHJldHVybiBmZWVkO1xuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgaWYgKGVycm9yLm5hbWUgPT09IFwiQWJvcnRFcnJvclwiKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBUaW1lb3V0IGZldGNoaW5nICR7dXJsfWApO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBmZXRjaGluZyAke3VybH06YCwgZXJyb3IubWVzc2FnZSk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9IGZpbmFsbHkge1xuICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgfVxufVxuXG4vKipcbiAqIFBhcnNlIHZlaGljbGUgcG9zaXRpb25zIGZyb20gR1RGUy1SVCBmZWVkXG4gKiBAcGFyYW0gZmVlZCAtIEdURlMtUlQgRmVlZE1lc3NhZ2VcbiAqIEByZXR1cm5zIEFycmF5IG9mIHZlaGljbGUgZGF0YVxuICovXG5mdW5jdGlvbiBwYXJzZVZlaGljbGVQb3NpdGlvbnMoZmVlZDogdHJhbnNpdF9yZWFsdGltZS5GZWVkTWVzc2FnZSk6IFZlaGljbGVEYXRhW10ge1xuICBjb25zdCB2ZWhpY2xlczogVmVoaWNsZURhdGFbXSA9IFtdO1xuICBcbiAgZm9yIChjb25zdCBlbnRpdHkgb2YgZmVlZC5lbnRpdHkpIHtcbiAgICBpZiAoIWVudGl0eS52ZWhpY2xlKSBjb250aW51ZTtcbiAgICBcbiAgICBjb25zdCB2ZWhpY2xlID0gZW50aXR5LnZlaGljbGU7XG4gICAgY29uc3QgcG9zaXRpb24gPSB2ZWhpY2xlLnBvc2l0aW9uO1xuICAgIGNvbnN0IHRyaXAgPSB2ZWhpY2xlLnRyaXA7XG4gICAgXG4gICAgdmVoaWNsZXMucHVzaCh7XG4gICAgICB2ZWhpY2xlSWQ6IHZlaGljbGUudmVoaWNsZT8uaWQgfHwgZW50aXR5LmlkLFxuICAgICAgcm91dGVJZDogdHJpcD8ucm91dGVJZCB8fCB1bmRlZmluZWQsXG4gICAgICB0cmlwSWQ6IHRyaXA/LnRyaXBJZCB8fCB1bmRlZmluZWQsXG4gICAgICBsYXRpdHVkZTogcG9zaXRpb24/LmxhdGl0dWRlIHx8IHVuZGVmaW5lZCxcbiAgICAgIGxvbmdpdHVkZTogcG9zaXRpb24/LmxvbmdpdHVkZSB8fCB1bmRlZmluZWQsXG4gICAgICBiZWFyaW5nOiBwb3NpdGlvbj8uYmVhcmluZyB8fCB1bmRlZmluZWQsXG4gICAgICBzcGVlZDogcG9zaXRpb24/LnNwZWVkIHx8IHVuZGVmaW5lZCxcbiAgICAgIHN0b3BJZDogdmVoaWNsZS5zdG9wSWQgfHwgdW5kZWZpbmVkLFxuICAgICAgY3VycmVudFN0YXR1czogdmVoaWNsZS5jdXJyZW50U3RhdHVzIHx8IHVuZGVmaW5lZCxcbiAgICAgIHRpbWVzdGFtcDogdmVoaWNsZS50aW1lc3RhbXA/LmxvdyB8fCB1bmRlZmluZWQsXG4gICAgICBjb25nZXN0aW9uTGV2ZWw6IHZlaGljbGUuY29uZ2VzdGlvbkxldmVsIHx8IHVuZGVmaW5lZCxcbiAgICAgIG9jY3VwYW5jeVN0YXR1czogdmVoaWNsZS5vY2N1cGFuY3lTdGF0dXMgfHwgdW5kZWZpbmVkLFxuICAgIH0pO1xuICB9XG4gIFxuICByZXR1cm4gdmVoaWNsZXM7XG59XG5cbi8qKlxuICogUGFyc2UgdHJpcCB1cGRhdGVzIGZyb20gR1RGUy1SVCBmZWVkXG4gKiBAcGFyYW0gZmVlZCAtIEdURlMtUlQgRmVlZE1lc3NhZ2VcbiAqIEByZXR1cm5zIEFycmF5IG9mIHRyaXAgdXBkYXRlIGRhdGFcbiAqL1xuZnVuY3Rpb24gcGFyc2VUcmlwVXBkYXRlcyhmZWVkOiB0cmFuc2l0X3JlYWx0aW1lLkZlZWRNZXNzYWdlKTogVHJpcFVwZGF0ZURhdGFbXSB7XG4gIGNvbnN0IHVwZGF0ZXM6IFRyaXBVcGRhdGVEYXRhW10gPSBbXTtcbiAgXG4gIGZvciAoY29uc3QgZW50aXR5IG9mIGZlZWQuZW50aXR5KSB7XG4gICAgaWYgKCFlbnRpdHkudHJpcFVwZGF0ZSkgY29udGludWU7XG4gICAgXG4gICAgY29uc3QgdXBkYXRlID0gZW50aXR5LnRyaXBVcGRhdGU7XG4gICAgY29uc3QgdHJpcCA9IHVwZGF0ZS50cmlwO1xuICAgIFxuICAgIGNvbnN0IHN0b3BUaW1lVXBkYXRlczogU3RvcFRpbWVVcGRhdGVEYXRhW10gPSBbXTtcbiAgICBcbiAgICBmb3IgKGNvbnN0IHN0dSBvZiB1cGRhdGUuc3RvcFRpbWVVcGRhdGUgfHwgW10pIHtcbiAgICAgIHN0b3BUaW1lVXBkYXRlcy5wdXNoKHtcbiAgICAgICAgc3RvcFNlcXVlbmNlOiBzdHUuc3RvcFNlcXVlbmNlIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgc3RvcElkOiBzdHUuc3RvcElkIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgYXJyaXZhbDogc3R1LmFycml2YWxcbiAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgZGVsYXk6IHN0dS5hcnJpdmFsLmRlbGF5IHx8IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgdGltZTogc3R1LmFycml2YWwudGltZT8ubG93IHx8IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgdW5jZXJ0YWludHk6IHN0dS5hcnJpdmFsLnVuY2VydGFpbnR5IHx8IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgZGVwYXJ0dXJlOiBzdHUuZGVwYXJ0dXJlXG4gICAgICAgICAgPyB7XG4gICAgICAgICAgICAgIGRlbGF5OiBzdHUuZGVwYXJ0dXJlLmRlbGF5IHx8IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgdGltZTogc3R1LmRlcGFydHVyZS50aW1lPy5sb3cgfHwgdW5kZWZpbmVkLFxuICAgICAgICAgICAgICB1bmNlcnRhaW50eTogc3R1LmRlcGFydHVyZS51bmNlcnRhaW50eSB8fCB1bmRlZmluZWQsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICAgIHNjaGVkdWxlUmVsYXRpb25zaGlwOiBzdHUuc2NoZWR1bGVSZWxhdGlvbnNoaXAgfHwgdW5kZWZpbmVkLFxuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIHVwZGF0ZXMucHVzaCh7XG4gICAgICB0cmlwSWQ6IHRyaXA/LnRyaXBJZCB8fCBcIlwiLFxuICAgICAgcm91dGVJZDogdHJpcD8ucm91dGVJZCB8fCB1bmRlZmluZWQsXG4gICAgICB2ZWhpY2xlSWQ6IHVwZGF0ZS52ZWhpY2xlPy5pZCB8fCB1bmRlZmluZWQsXG4gICAgICBzdGFydERhdGU6IHRyaXA/LnN0YXJ0RGF0ZSB8fCB1bmRlZmluZWQsXG4gICAgICBzdGFydFRpbWU6IHRyaXA/LnN0YXJ0VGltZSB8fCB1bmRlZmluZWQsXG4gICAgICBzY2hlZHVsZVJlbGF0aW9uc2hpcDogdHJpcD8uc2NoZWR1bGVSZWxhdGlvbnNoaXAgfHwgdW5kZWZpbmVkLFxuICAgICAgc3RvcFRpbWVVcGRhdGVzLFxuICAgICAgdGltZXN0YW1wOiB1cGRhdGUudGltZXN0YW1wPy5sb3cgfHwgdW5kZWZpbmVkLFxuICAgICAgZGVsYXk6IHVwZGF0ZS5kZWxheSB8fCB1bmRlZmluZWQsXG4gICAgfSk7XG4gIH1cbiAgXG4gIHJldHVybiB1cGRhdGVzO1xufVxuXG4vKipcbiAqIFBhcnNlIHNlcnZpY2UgYWxlcnRzIGZyb20gR1RGUy1SVCBmZWVkXG4gKiBAcGFyYW0gZmVlZCAtIEdURlMtUlQgRmVlZE1lc3NhZ2VcbiAqIEByZXR1cm5zIEFycmF5IG9mIGFsZXJ0IGRhdGFcbiAqL1xuZnVuY3Rpb24gcGFyc2VTZXJ2aWNlQWxlcnRzKGZlZWQ6IHRyYW5zaXRfcmVhbHRpbWUuRmVlZE1lc3NhZ2UpOiBBbGVydERhdGFbXSB7XG4gIGNvbnN0IGFsZXJ0czogQWxlcnREYXRhW10gPSBbXTtcbiAgXG4gIGZvciAoY29uc3QgZW50aXR5IG9mIGZlZWQuZW50aXR5KSB7XG4gICAgaWYgKCFlbnRpdHkuYWxlcnQpIGNvbnRpbnVlO1xuICAgIFxuICAgIGNvbnN0IGFsZXJ0ID0gZW50aXR5LmFsZXJ0O1xuICAgIFxuICAgIGNvbnN0IGFjdGl2ZVBlcmlvZHMgPSAoYWxlcnQuYWN0aXZlUGVyaW9kIHx8IFtdKS5tYXAoKHBlcmlvZCkgPT4gKHtcbiAgICAgIHN0YXJ0OiBwZXJpb2Quc3RhcnQ/LmxvdyB8fCB1bmRlZmluZWQsXG4gICAgICBlbmQ6IHBlcmlvZC5lbmQ/LmxvdyB8fCB1bmRlZmluZWQsXG4gICAgfSkpO1xuICAgIFxuICAgIGNvbnN0IGluZm9ybWVkRW50aXRpZXMgPSAoYWxlcnQuaW5mb3JtZWRFbnRpdHkgfHwgW10pLm1hcCgoZW50aXR5KSA9PiAoe1xuICAgICAgYWdlbmN5SWQ6IGVudGl0eS5hZ2VuY3lJZCB8fCB1bmRlZmluZWQsXG4gICAgICByb3V0ZUlkOiBlbnRpdHkucm91dGVJZCB8fCB1bmRlZmluZWQsXG4gICAgICByb3V0ZVR5cGU6IGVudGl0eS5yb3V0ZVR5cGUgfHwgdW5kZWZpbmVkLFxuICAgICAgdHJpcElkOiBlbnRpdHkudHJpcD8udHJpcElkIHx8IHVuZGVmaW5lZCxcbiAgICAgIHN0b3BJZDogZW50aXR5LnN0b3BJZCB8fCB1bmRlZmluZWQsXG4gICAgfSkpO1xuICAgIFxuICAgIGFsZXJ0cy5wdXNoKHtcbiAgICAgIGlkOiBlbnRpdHkuaWQsXG4gICAgICBhY3RpdmVQZXJpb2RzLFxuICAgICAgaW5mb3JtZWRFbnRpdGllcyxcbiAgICAgIGNhdXNlOiBhbGVydC5jYXVzZSB8fCB1bmRlZmluZWQsXG4gICAgICBlZmZlY3Q6IGFsZXJ0LmVmZmVjdCB8fCB1bmRlZmluZWQsXG4gICAgICB1cmw6IGFsZXJ0LnVybCB8fCB1bmRlZmluZWQsXG4gICAgICBoZWFkZXJUZXh0OiBhbGVydC5oZWFkZXJUZXh0IHx8IHVuZGVmaW5lZCxcbiAgICAgIGRlc2NyaXB0aW9uVGV4dDogYWxlcnQuZGVzY3JpcHRpb25UZXh0IHx8IHVuZGVmaW5lZCxcbiAgICAgIHR0c0hlYWRlclRleHQ6IGFsZXJ0LnR0c0hlYWRlclRleHQgfHwgdW5kZWZpbmVkLFxuICAgICAgdHRzRGVzY3JpcHRpb25UZXh0OiBhbGVydC50dHNEZXNjcmlwdGlvblRleHQgfHwgdW5kZWZpbmVkLFxuICAgICAgc2V2ZXJpdHlMZXZlbDogYWxlcnQuc2V2ZXJpdHlMZXZlbCB8fCB1bmRlZmluZWQsXG4gICAgfSk7XG4gIH1cbiAgXG4gIHJldHVybiBhbGVydHM7XG59XG5cbi8qKlxuICogRmV0Y2ggYWxsIHJlYWx0aW1lIGRhdGFcbiAqIEByZXR1cm5zIENvbWJpbmVkIHJlYWx0aW1lIGRhdGFcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoUmVhbHRpbWVEYXRhKCk6IFByb21pc2U8UmVhbHRpbWVEYXRhPiB7XG4gIGNvbnN0IFt2ZWhpY2xlRmVlZCwgdHJpcEZlZWQsIGFsZXJ0RmVlZF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgZmV0Y2hHVEZTUmVhbHRpbWVGZWVkKFZFSElDTEVfUE9TSVRJT05TX1VSTCksXG4gICAgZmV0Y2hHVEZTUmVhbHRpbWVGZWVkKFRSSVBfVVBEQVRFU19VUkwpLFxuICAgIGZldGNoR1RGU1JlYWx0aW1lRmVlZChTRVJWSUNFX0FMRVJUU19VUkwpLFxuICBdKTtcbiAgXG4gIGNvbnN0IHZlaGljbGVzID0gdmVoaWNsZUZlZWQgPyBwYXJzZVZlaGljbGVQb3NpdGlvbnModmVoaWNsZUZlZWQpIDogW107XG4gIGNvbnN0IHRyaXBVcGRhdGVzID0gdHJpcEZlZWQgPyBwYXJzZVRyaXBVcGRhdGVzKHRyaXBGZWVkKSA6IFtdO1xuICBjb25zdCBhbGVydHMgPSBhbGVydEZlZWQgPyBwYXJzZVNlcnZpY2VBbGVydHMoYWxlcnRGZWVkKSA6IFtdO1xuICBcbiAgLy8gR2V0IHRoZSBtb3N0IHJlY2VudCB0aW1lc3RhbXAgZnJvbSBhbGwgZmVlZHNcbiAgY29uc3QgdGltZXN0YW1wcyA9IFtcbiAgICB2ZWhpY2xlRmVlZD8uaGVhZGVyLnRpbWVzdGFtcD8ubG93LFxuICAgIHRyaXBGZWVkPy5oZWFkZXIudGltZXN0YW1wPy5sb3csXG4gICAgYWxlcnRGZWVkPy5oZWFkZXIudGltZXN0YW1wPy5sb3csXG4gIF0uZmlsdGVyKCh0KTogdCBpcyBudW1iZXIgPT4gdCAhPT0gdW5kZWZpbmVkKTtcbiAgXG4gIGNvbnN0IHRpbWVzdGFtcCA9IHRpbWVzdGFtcHMubGVuZ3RoID4gMCA/IE1hdGgubWF4KC4uLnRpbWVzdGFtcHMpIDogMDtcbiAgY29uc3QgaXNTdGFsZSA9IGlzRGF0YVN0YWxlKHRpbWVzdGFtcCwgU1RBTEVORVNTX1RIUkVTSE9MRCk7XG4gIFxuICAvLyBPbmx5IHNob3cgd2FybmluZyBpZiB3ZSBoYXZlIGRhdGEgYnV0IGl0J3Mgc3RhbGUgKG5vdCBpZiBmZWVkcyBhcmUgdW5hdmFpbGFibGUpXG4gIGlmIChpc1N0YWxlICYmIHRpbWVzdGFtcCA+IDAgJiYgKHZlaGljbGVzLmxlbmd0aCA+IDAgfHwgdHJpcFVwZGF0ZXMubGVuZ3RoID4gMCkpIHtcbiAgICBhd2FpdCBzaG93VG9hc3Qoe1xuICAgICAgc3R5bGU6IFRvYXN0LlN0eWxlLkZhaWx1cmUsXG4gICAgICB0aXRsZTogXCJTdGFsZSBEYXRhXCIsXG4gICAgICBtZXNzYWdlOiBcIkJ1cyBkYXRhIG1heSBiZSBvdXRkYXRlZCAoPjYwcyBvbGQpXCIsXG4gICAgfSk7XG4gIH1cbiAgXG4gIHJldHVybiB7XG4gICAgdmVoaWNsZXMsXG4gICAgdHJpcFVwZGF0ZXMsXG4gICAgYWxlcnRzLFxuICAgIHRpbWVzdGFtcCxcbiAgICBpc1N0YWxlLFxuICB9O1xufVxuXG4vKipcbiAqIEZldGNoIHZlaGljbGUgcG9zaXRpb25zIG9ubHlcbiAqIEByZXR1cm5zIEFycmF5IG9mIHZlaGljbGUgZGF0YVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hWZWhpY2xlUG9zaXRpb25zKCk6IFByb21pc2U8VmVoaWNsZURhdGFbXT4ge1xuICBjb25zdCBmZWVkID0gYXdhaXQgZmV0Y2hHVEZTUmVhbHRpbWVGZWVkKFZFSElDTEVfUE9TSVRJT05TX1VSTCk7XG4gIHJldHVybiBmZWVkID8gcGFyc2VWZWhpY2xlUG9zaXRpb25zKGZlZWQpIDogW107XG59XG5cbi8qKlxuICogRmV0Y2ggdHJpcCB1cGRhdGVzIG9ubHlcbiAqIEByZXR1cm5zIEFycmF5IG9mIHRyaXAgdXBkYXRlIGRhdGFcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoVHJpcFVwZGF0ZXMoKTogUHJvbWlzZTxUcmlwVXBkYXRlRGF0YVtdPiB7XG4gIGNvbnN0IGZlZWQgPSBhd2FpdCBmZXRjaEdURlNSZWFsdGltZUZlZWQoVFJJUF9VUERBVEVTX1VSTCk7XG4gIHJldHVybiBmZWVkID8gcGFyc2VUcmlwVXBkYXRlcyhmZWVkKSA6IFtdO1xufVxuXG4vKipcbiAqIEZldGNoIHNlcnZpY2UgYWxlcnRzIG9ubHlcbiAqIEByZXR1cm5zIEFycmF5IG9mIGFsZXJ0IGRhdGFcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoU2VydmljZUFsZXJ0cygpOiBQcm9taXNlPEFsZXJ0RGF0YVtdPiB7XG4gIGNvbnN0IGZlZWQgPSBhd2FpdCBmZXRjaEdURlNSZWFsdGltZUZlZWQoU0VSVklDRV9BTEVSVFNfVVJMKTtcbiAgcmV0dXJuIGZlZWQgPyBwYXJzZVNlcnZpY2VBbGVydHMoZmVlZCkgOiBbXTtcbn1cblxuLyoqXG4gKiBHZXQgdHJpcCB1cGRhdGVzIGZvciBhIHNwZWNpZmljIHN0b3BcbiAqIEBwYXJhbSBzdG9wSWQgLSBTdG9wIElEXG4gKiBAcGFyYW0gdHJpcFVwZGF0ZXMgLSBBbGwgdHJpcCB1cGRhdGVzXG4gKiBAcmV0dXJucyBGaWx0ZXJlZCB0cmlwIHVwZGF0ZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRyaXBVcGRhdGVzRm9yU3RvcChcbiAgc3RvcElkOiBzdHJpbmcsXG4gIHRyaXBVcGRhdGVzOiBUcmlwVXBkYXRlRGF0YVtdXG4pOiBUcmlwVXBkYXRlRGF0YVtdIHtcbiAgcmV0dXJuIHRyaXBVcGRhdGVzLmZpbHRlcigodXBkYXRlKSA9PlxuICAgIHVwZGF0ZS5zdG9wVGltZVVwZGF0ZXMuc29tZSgoc3R1KSA9PiBzdHUuc3RvcElkID09PSBzdG9wSWQpXG4gICk7XG59XG5cbi8qKlxuICogR2V0IHRyaXAgdXBkYXRlcyBmb3IgYSBzcGVjaWZpYyByb3V0ZVxuICogQHBhcmFtIHJvdXRlSWQgLSBSb3V0ZSBJRFxuICogQHBhcmFtIHRyaXBVcGRhdGVzIC0gQWxsIHRyaXAgdXBkYXRlc1xuICogQHJldHVybnMgRmlsdGVyZWQgdHJpcCB1cGRhdGVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUcmlwVXBkYXRlc0ZvclJvdXRlKFxuICByb3V0ZUlkOiBzdHJpbmcsXG4gIHRyaXBVcGRhdGVzOiBUcmlwVXBkYXRlRGF0YVtdXG4pOiBUcmlwVXBkYXRlRGF0YVtdIHtcbiAgcmV0dXJuIHRyaXBVcGRhdGVzLmZpbHRlcigodXBkYXRlKSA9PiB1cGRhdGUucm91dGVJZCA9PT0gcm91dGVJZCk7XG59XG5cbi8qKlxuICogR2V0IHZlaGljbGVzIGZvciBhIHNwZWNpZmljIHJvdXRlXG4gKiBAcGFyYW0gcm91dGVJZCAtIFJvdXRlIElEXG4gKiBAcGFyYW0gdmVoaWNsZXMgLSBBbGwgdmVoaWNsZXNcbiAqIEByZXR1cm5zIEZpbHRlcmVkIHZlaGljbGVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRWZWhpY2xlc0ZvclJvdXRlKFxuICByb3V0ZUlkOiBzdHJpbmcsXG4gIHZlaGljbGVzOiBWZWhpY2xlRGF0YVtdXG4pOiBWZWhpY2xlRGF0YVtdIHtcbiAgcmV0dXJuIHZlaGljbGVzLmZpbHRlcigodmVoaWNsZSkgPT4gdmVoaWNsZS5yb3V0ZUlkID09PSByb3V0ZUlkKTtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIHByZWRpY3RlZCBhcnJpdmFsIHRpbWUgZm9yIGEgc3RvcFxuICogQHBhcmFtIHN0b3BJZCAtIFN0b3AgSURcbiAqIEBwYXJhbSB0cmlwVXBkYXRlIC0gVHJpcCB1cGRhdGUgZGF0YVxuICogQHJldHVybnMgUHJlZGljdGVkIGFycml2YWwgdGltZSBpbiBzZWNvbmRzIG9yIG51bGxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFByZWRpY3RlZEFycml2YWwoXG4gIHN0b3BJZDogc3RyaW5nLFxuICB0cmlwVXBkYXRlOiBUcmlwVXBkYXRlRGF0YVxuKTogbnVtYmVyIHwgbnVsbCB7XG4gIGNvbnN0IHN0b3BVcGRhdGUgPSB0cmlwVXBkYXRlLnN0b3BUaW1lVXBkYXRlcy5maW5kKChzdHUpID0+IHN0dS5zdG9wSWQgPT09IHN0b3BJZCk7XG4gIFxuICBpZiAoIXN0b3BVcGRhdGUpIHJldHVybiBudWxsO1xuICBcbiAgLy8gUHJlZmVyIGFycml2YWwgdGltZSBvdmVyIGRlcGFydHVyZSB0aW1lXG4gIGNvbnN0IGFycml2YWxUaW1lID0gc3RvcFVwZGF0ZS5hcnJpdmFsPy50aW1lO1xuICBjb25zdCBkZXBhcnR1cmVUaW1lID0gc3RvcFVwZGF0ZS5kZXBhcnR1cmU/LnRpbWU7XG4gIFxuICByZXR1cm4gYXJyaXZhbFRpbWUgfHwgZGVwYXJ0dXJlVGltZSB8fCBudWxsO1xufVxuXG4vKipcbiAqIEdldCB0aGUgZGVsYXkgZm9yIGEgc3RvcFxuICogQHBhcmFtIHN0b3BJZCAtIFN0b3AgSURcbiAqIEBwYXJhbSB0cmlwVXBkYXRlIC0gVHJpcCB1cGRhdGUgZGF0YVxuICogQHJldHVybnMgRGVsYXkgaW4gc2Vjb25kcyBvciBudWxsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTdG9wRGVsYXkoXG4gIHN0b3BJZDogc3RyaW5nLFxuICB0cmlwVXBkYXRlOiBUcmlwVXBkYXRlRGF0YVxuKTogbnVtYmVyIHwgbnVsbCB7XG4gIGNvbnN0IHN0b3BVcGRhdGUgPSB0cmlwVXBkYXRlLnN0b3BUaW1lVXBkYXRlcy5maW5kKChzdHUpID0+IHN0dS5zdG9wSWQgPT09IHN0b3BJZCk7XG4gIFxuICBpZiAoIXN0b3BVcGRhdGUpIHJldHVybiBudWxsO1xuICBcbiAgLy8gUHJlZmVyIGFycml2YWwgZGVsYXkgb3ZlciBkZXBhcnR1cmUgZGVsYXlcbiAgY29uc3QgYXJyaXZhbERlbGF5ID0gc3RvcFVwZGF0ZS5hcnJpdmFsPy5kZWxheTtcbiAgY29uc3QgZGVwYXJ0dXJlRGVsYXkgPSBzdG9wVXBkYXRlLmRlcGFydHVyZT8uZGVsYXk7XG4gIFxuICBpZiAoYXJyaXZhbERlbGF5ICE9PSB1bmRlZmluZWQpIHJldHVybiBhcnJpdmFsRGVsYXk7XG4gIGlmIChkZXBhcnR1cmVEZWxheSAhPT0gdW5kZWZpbmVkKSByZXR1cm4gZGVwYXJ0dXJlRGVsYXk7XG4gIFxuICAvLyBVc2UgdHJpcC1sZXZlbCBkZWxheSBpZiBhdmFpbGFibGVcbiAgcmV0dXJuIHRyaXBVcGRhdGUuZGVsYXkgfHwgbnVsbDtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiB0aGVyZSBhcmUgYW55IGFjdGl2ZSBhbGVydHMgZm9yIGEgcm91dGVcbiAqIEBwYXJhbSByb3V0ZUlkIC0gUm91dGUgSURcbiAqIEBwYXJhbSBhbGVydHMgLSBBbGwgYWxlcnRzXG4gKiBAcmV0dXJucyBUcnVlIGlmIHRoZXJlIGFyZSBhY3RpdmUgYWxlcnRzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoYXNBY3RpdmVBbGVydHMocm91dGVJZDogc3RyaW5nLCBhbGVydHM6IEFsZXJ0RGF0YVtdKTogYm9vbGVhbiB7XG4gIGNvbnN0IG5vdyA9IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMDApO1xuICBcbiAgcmV0dXJuIGFsZXJ0cy5zb21lKChhbGVydCkgPT4ge1xuICAgIC8vIENoZWNrIGlmIHJvdXRlIGlzIGFmZmVjdGVkXG4gICAgY29uc3QgYWZmZWN0c1JvdXRlID0gYWxlcnQuaW5mb3JtZWRFbnRpdGllcy5zb21lKChlbnRpdHkpID0+IGVudGl0eS5yb3V0ZUlkID09PSByb3V0ZUlkKTtcbiAgICBpZiAoIWFmZmVjdHNSb3V0ZSkgcmV0dXJuIGZhbHNlO1xuICAgIFxuICAgIC8vIENoZWNrIGlmIGFsZXJ0IGlzIGN1cnJlbnRseSBhY3RpdmVcbiAgICByZXR1cm4gYWxlcnQuYWN0aXZlUGVyaW9kcy5zb21lKChwZXJpb2QpID0+IHtcbiAgICAgIGNvbnN0IHN0YXJ0ID0gcGVyaW9kLnN0YXJ0IHx8IDA7XG4gICAgICBjb25zdCBlbmQgPSBwZXJpb2QuZW5kIHx8IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSO1xuICAgICAgcmV0dXJuIG5vdyA+PSBzdGFydCAmJiBub3cgPD0gZW5kO1xuICAgIH0pO1xuICB9KTtcbn1cblxuLyoqXG4gKiBHZXQgYWN0aXZlIGFsZXJ0cyBmb3IgYSBzdG9wXG4gKiBAcGFyYW0gc3RvcElkIC0gU3RvcCBJRFxuICogQHBhcmFtIGFsZXJ0cyAtIEFsbCBhbGVydHNcbiAqIEByZXR1cm5zIEFjdGl2ZSBhbGVydHMgZm9yIHRoZSBzdG9wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRBbGVydHNGb3JTdG9wKHN0b3BJZDogc3RyaW5nLCBhbGVydHM6IEFsZXJ0RGF0YVtdKTogQWxlcnREYXRhW10ge1xuICBjb25zdCBub3cgPSBNYXRoLmZsb29yKERhdGUubm93KCkgLyAxMDAwKTtcbiAgXG4gIHJldHVybiBhbGVydHMuZmlsdGVyKChhbGVydCkgPT4ge1xuICAgIC8vIENoZWNrIGlmIHN0b3AgaXMgYWZmZWN0ZWRcbiAgICBjb25zdCBhZmZlY3RzU3RvcCA9IGFsZXJ0LmluZm9ybWVkRW50aXRpZXMuc29tZSgoZW50aXR5KSA9PiBlbnRpdHkuc3RvcElkID09PSBzdG9wSWQpO1xuICAgIGlmICghYWZmZWN0c1N0b3ApIHJldHVybiBmYWxzZTtcbiAgICBcbiAgICAvLyBDaGVjayBpZiBhbGVydCBpcyBjdXJyZW50bHkgYWN0aXZlXG4gICAgcmV0dXJuIGFsZXJ0LmFjdGl2ZVBlcmlvZHMuc29tZSgocGVyaW9kKSA9PiB7XG4gICAgICBjb25zdCBzdGFydCA9IHBlcmlvZC5zdGFydCB8fCAwO1xuICAgICAgY29uc3QgZW5kID0gcGVyaW9kLmVuZCB8fCBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUjtcbiAgICAgIHJldHVybiBub3cgPj0gc3RhcnQgJiYgbm93IDw9IGVuZDtcbiAgICB9KTtcbiAgfSk7XG59IiwgIi8qKlxuICogVXRpbGl0eSBmdW5jdGlvbnMgZm9yIENBVEFCVVMgU3RhdHVzIGV4dGVuc2lvblxuICovXG5cbmltcG9ydCBkYXlqcyBmcm9tIFwiZGF5anNcIjtcbmltcG9ydCByZWxhdGl2ZVRpbWUgZnJvbSBcImRheWpzL3BsdWdpbi9yZWxhdGl2ZVRpbWVcIjtcbmltcG9ydCBjdXN0b21QYXJzZUZvcm1hdCBmcm9tIFwiZGF5anMvcGx1Z2luL2N1c3RvbVBhcnNlRm9ybWF0XCI7XG5pbXBvcnQgdXRjIGZyb20gXCJkYXlqcy9wbHVnaW4vdXRjXCI7XG5pbXBvcnQgdGltZXpvbmUgZnJvbSBcImRheWpzL3BsdWdpbi90aW1lem9uZVwiO1xuaW1wb3J0IHsgQ29sb3IgfSBmcm9tIFwiQHJheWNhc3QvYXBpXCI7XG5cbi8vIEluaXRpYWxpemUgZGF5anMgcGx1Z2luc1xuZGF5anMuZXh0ZW5kKHJlbGF0aXZlVGltZSk7XG5kYXlqcy5leHRlbmQoY3VzdG9tUGFyc2VGb3JtYXQpO1xuZGF5anMuZXh0ZW5kKHV0Yyk7XG5kYXlqcy5leHRlbmQodGltZXpvbmUpO1xuXG4vLyBTZXQgZGVmYXVsdCB0aW1lem9uZSB0byBFYXN0ZXJuIFRpbWUgKFN0YXRlIENvbGxlZ2UsIFBBKVxuY29uc3QgREVGQVVMVF9USU1FWk9ORSA9IFwiQW1lcmljYS9OZXdfWW9ya1wiO1xuXG4vKipcbiAqIEZvcm1hdCB0aW1lIGluIG1pbnV0ZXMgdW50aWwgYXJyaXZhbFxuICogQHBhcmFtIGFycml2YWxUaW1lIC0gVGhlIGFycml2YWwgdGltZSBhcyBEYXRlIG9yIHN0cmluZ1xuICogQHJldHVybnMgRm9ybWF0dGVkIHN0cmluZyBsaWtlIFwiNSBtaW5cIiwgXCJhcnJpdmluZ1wiLCBcIjEgaHIgMTUgbWluXCJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdE1pbnV0ZXNVbnRpbChhcnJpdmFsVGltZTogRGF0ZSB8IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IG5vdyA9IGRheWpzKCk7XG4gIGNvbnN0IGFycml2YWwgPSBkYXlqcyhhcnJpdmFsVGltZSk7XG4gIGNvbnN0IGRpZmZNaW51dGVzID0gYXJyaXZhbC5kaWZmKG5vdywgXCJtaW51dGVcIik7XG4gIFxuICBpZiAoZGlmZk1pbnV0ZXMgPCAwKSB7XG4gICAgcmV0dXJuIFwiZGVwYXJ0ZWRcIjtcbiAgfSBlbHNlIGlmIChkaWZmTWludXRlcyA9PT0gMCkge1xuICAgIHJldHVybiBcImFycml2aW5nXCI7XG4gIH0gZWxzZSBpZiAoZGlmZk1pbnV0ZXMgPCA2MCkge1xuICAgIHJldHVybiBgJHtkaWZmTWludXRlc30gbWluYDtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBob3VycyA9IE1hdGguZmxvb3IoZGlmZk1pbnV0ZXMgLyA2MCk7XG4gICAgY29uc3QgbWludXRlcyA9IGRpZmZNaW51dGVzICUgNjA7XG4gICAgaWYgKG1pbnV0ZXMgPT09IDApIHtcbiAgICAgIHJldHVybiBgJHtob3Vyc30gaHJgO1xuICAgIH1cbiAgICByZXR1cm4gYCR7aG91cnN9IGhyICR7bWludXRlc30gbWluYDtcbiAgfVxufVxuXG4vKipcbiAqIEZvcm1hdCByZWxhdGl2ZSB0aW1lIChlLmcuLCBcImluIDUgbWludXRlc1wiLCBcIjIgbWludXRlcyBhZ29cIilcbiAqIEBwYXJhbSB0aW1lIC0gVGhlIHRpbWUgdG8gZm9ybWF0XG4gKiBAcmV0dXJucyBSZWxhdGl2ZSB0aW1lIHN0cmluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0UmVsYXRpdmVUaW1lKHRpbWU6IERhdGUgfCBzdHJpbmcgfCBudW1iZXIpOiBzdHJpbmcge1xuICByZXR1cm4gZGF5anModGltZSkuZnJvbU5vdygpO1xufVxuXG4vKipcbiAqIEZvcm1hdCB0aW1lIGluIDEyLWhvdXIgZm9ybWF0IChlLmcuLCBcIjM6NDUgUE1cIilcbiAqIEBwYXJhbSB0aW1lIC0gVGhlIHRpbWUgdG8gZm9ybWF0XG4gKiBAcmV0dXJucyBGb3JtYXR0ZWQgdGltZSBzdHJpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdFRpbWUxMkhvdXIodGltZTogRGF0ZSB8IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBkYXlqcyh0aW1lKS5mb3JtYXQoXCJoOm1tIEFcIik7XG59XG5cbi8qKlxuICogRm9ybWF0IHRpbWUgaW4gMjQtaG91ciBmb3JtYXQgKGUuZy4sIFwiMTU6NDVcIilcbiAqIEBwYXJhbSB0aW1lIC0gVGhlIHRpbWUgdG8gZm9ybWF0XG4gKiBAcmV0dXJucyBGb3JtYXR0ZWQgdGltZSBzdHJpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdFRpbWUyNEhvdXIodGltZTogRGF0ZSB8IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBkYXlqcyh0aW1lKS5mb3JtYXQoXCJISDptbVwiKTtcbn1cblxuLyoqXG4gKiBDYWxjdWxhdGUgZGVsYXkgaW4gbWludXRlcyBmcm9tIHNlY29uZHNcbiAqIEBwYXJhbSBkZWxheVNlY29uZHMgLSBEZWxheSBpbiBzZWNvbmRzIChwb3NpdGl2ZSA9IGxhdGUsIG5lZ2F0aXZlID0gZWFybHkpXG4gKiBAcmV0dXJucyBGb3JtYXR0ZWQgZGVsYXkgc3RyaW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXREZWxheShkZWxheVNlY29uZHM/OiBudW1iZXIpOiBzdHJpbmcge1xuICBpZiAoZGVsYXlTZWNvbmRzID09PSB1bmRlZmluZWQgfHwgZGVsYXlTZWNvbmRzID09PSAwKSB7XG4gICAgcmV0dXJuIFwib24gdGltZVwiO1xuICB9XG4gIFxuICBjb25zdCBkZWxheU1pbnV0ZXMgPSBNYXRoLmFicyhNYXRoLnJvdW5kKGRlbGF5U2Vjb25kcyAvIDYwKSk7XG4gIGNvbnN0IGRlbGF5VGV4dCA9IGRlbGF5TWludXRlcyA9PT0gMSA/IFwiMSBtaW5cIiA6IGAke2RlbGF5TWludXRlc30gbWluYDtcbiAgXG4gIGlmIChkZWxheVNlY29uZHMgPiAwKSB7XG4gICAgcmV0dXJuIGAke2RlbGF5VGV4dH0gbGF0ZWA7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGAke2RlbGF5VGV4dH0gZWFybHlgO1xuICB9XG59XG5cbi8qKlxuICogR2V0IGNvbG9yIGZvciBkZWxheSBzdGF0dXNcbiAqIEBwYXJhbSBkZWxheVNlY29uZHMgLSBEZWxheSBpbiBzZWNvbmRzXG4gKiBAcmV0dXJucyBSYXljYXN0IENvbG9yXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXREZWxheUNvbG9yKGRlbGF5U2Vjb25kcz86IG51bWJlcik6IENvbG9yIHtcbiAgaWYgKGRlbGF5U2Vjb25kcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIENvbG9yLlNlY29uZGFyeVRleHQ7XG4gIH1cbiAgXG4gIGNvbnN0IGRlbGF5TWludXRlcyA9IGRlbGF5U2Vjb25kcyAvIDYwO1xuICBcbiAgaWYgKGRlbGF5TWludXRlcyA8PSAtMSkge1xuICAgIHJldHVybiBDb2xvci5CbHVlOyAvLyBFYXJseVxuICB9IGVsc2UgaWYgKGRlbGF5TWludXRlcyA8PSAyKSB7XG4gICAgcmV0dXJuIENvbG9yLkdyZWVuOyAvLyBPbiB0aW1lIG9yIHNsaWdodGx5IGxhdGVcbiAgfSBlbHNlIGlmIChkZWxheU1pbnV0ZXMgPD0gNSkge1xuICAgIHJldHVybiBDb2xvci5ZZWxsb3c7IC8vIE1vZGVyYXRlbHkgbGF0ZVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBDb2xvci5SZWQ7IC8vIFZlcnkgbGF0ZVxuICB9XG59XG5cbi8qKlxuICogUGx1cmFsaXplIGEgd29yZCBiYXNlZCBvbiBjb3VudFxuICogQHBhcmFtIGNvdW50IC0gVGhlIGNvdW50XG4gKiBAcGFyYW0gc2luZ3VsYXIgLSBTaW5ndWxhciBmb3JtXG4gKiBAcGFyYW0gcGx1cmFsIC0gUGx1cmFsIGZvcm0gKG9wdGlvbmFsLCBkZWZhdWx0cyB0byBzaW5ndWxhciArICdzJylcbiAqIEByZXR1cm5zIFBsdXJhbGl6ZWQgc3RyaW5nIHdpdGggY291bnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBsdXJhbGl6ZShjb3VudDogbnVtYmVyLCBzaW5ndWxhcjogc3RyaW5nLCBwbHVyYWw/OiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCB3b3JkID0gY291bnQgPT09IDEgPyBzaW5ndWxhciA6IChwbHVyYWwgfHwgYCR7c2luZ3VsYXJ9c2ApO1xuICByZXR1cm4gYCR7Y291bnR9ICR7d29yZH1gO1xufVxuXG4vKipcbiAqIFBhcnNlIEdURlMgdGltZSBmb3JtYXQgKEhIOk1NOlNTLCBjYW4gYmUgPjI0IGhvdXJzKSB0byBEYXRlXG4gKiBAcGFyYW0gZ3Rmc1RpbWUgLSBUaW1lIGluIEdURlMgZm9ybWF0XG4gKiBAcGFyYW0gc2VydmljZURhdGUgLSBUaGUgc2VydmljZSBkYXRlXG4gKiBAcmV0dXJucyBEYXRlIG9iamVjdFxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VHVEZTVGltZShndGZzVGltZTogc3RyaW5nLCBzZXJ2aWNlRGF0ZTogRGF0ZSB8IHN0cmluZyk6IERhdGUge1xuICBjb25zdCBbaG91cnMsIG1pbnV0ZXMsIHNlY29uZHNdID0gZ3Rmc1RpbWUuc3BsaXQoXCI6XCIpLm1hcChOdW1iZXIpO1xuICBjb25zdCBkYXRlID0gZGF5anMoc2VydmljZURhdGUpLnR6KERFRkFVTFRfVElNRVpPTkUpO1xuICBcbiAgLy8gSGFuZGxlIHRpbWVzIHBhc3QgbWlkbmlnaHQgKGUuZy4sIDI1OjMwOjAwKVxuICBjb25zdCBhY3R1YWxIb3VycyA9IGhvdXJzICUgMjQ7XG4gIGNvbnN0IGRheXNUb0FkZCA9IE1hdGguZmxvb3IoaG91cnMgLyAyNCk7XG4gIFxuICByZXR1cm4gZGF0ZVxuICAgIC5hZGQoZGF5c1RvQWRkLCBcImRheVwiKVxuICAgIC5ob3VyKGFjdHVhbEhvdXJzKVxuICAgIC5taW51dGUobWludXRlcylcbiAgICAuc2Vjb25kKHNlY29uZHMgfHwgMClcbiAgICAudG9EYXRlKCk7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYSBzZXJ2aWNlIGlzIHJ1bm5pbmcgdG9kYXkgYmFzZWQgb24gY2FsZW5kYXIgZGF0ZXNcbiAqIEBwYXJhbSBzZXJ2aWNlSWQgLSBUaGUgc2VydmljZSBJRFxuICogQHBhcmFtIGNhbGVuZGFyRGF0ZXMgLSBBcnJheSBvZiBjYWxlbmRhciBkYXRlIGV4Y2VwdGlvbnNcbiAqIEBwYXJhbSB0YXJnZXREYXRlIC0gVGhlIGRhdGUgdG8gY2hlY2sgKGRlZmF1bHRzIHRvIHRvZGF5KVxuICogQHJldHVybnMgVHJ1ZSBpZiBzZXJ2aWNlIGlzIHJ1bm5pbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzU2VydmljZVJ1bm5pbmdUb2RheShcbiAgc2VydmljZUlkOiBzdHJpbmcsXG4gIGNhbGVuZGFyRGF0ZXM6IEFycmF5PHsgc2VydmljZV9pZDogc3RyaW5nOyBkYXRlOiBzdHJpbmc7IGV4Y2VwdGlvbl90eXBlOiBudW1iZXIgfT4sXG4gIHRhcmdldERhdGU6IERhdGUgPSBuZXcgRGF0ZSgpXG4pOiBib29sZWFuIHtcbiAgY29uc3QgZGF0ZVN0ciA9IGRheWpzKHRhcmdldERhdGUpLmZvcm1hdChcIllZWVlNTUREXCIpO1xuICBcbiAgY29uc3QgZXhjZXB0aW9uID0gY2FsZW5kYXJEYXRlcy5maW5kKFxuICAgIChjZCkgPT4gY2Quc2VydmljZV9pZCA9PT0gc2VydmljZUlkICYmIGNkLmRhdGUgPT09IGRhdGVTdHJcbiAgKTtcbiAgXG4gIC8vIGV4Y2VwdGlvbl90eXBlOiAxID0gc2VydmljZSBhZGRlZCwgMiA9IHNlcnZpY2UgcmVtb3ZlZFxuICBpZiAoZXhjZXB0aW9uKSB7XG4gICAgcmV0dXJuIGV4Y2VwdGlvbi5leGNlcHRpb25fdHlwZSA9PT0gMTtcbiAgfVxuICBcbiAgLy8gSWYgbm8gZXhjZXB0aW9uLCBhc3N1bWUgc2VydmljZSBpcyBydW5uaW5nICh3b3VsZCBuZWVkIGNhbGVuZGFyLnR4dCBmb3IgZnVsbCBsb2dpYylcbiAgcmV0dXJuIHRydWU7XG59XG5cbi8qKlxuICogQ2FsY3VsYXRlIGRpc3RhbmNlIGJldHdlZW4gdHdvIGNvb3JkaW5hdGVzIGluIG1ldGVyc1xuICogQHBhcmFtIGxhdDEgLSBMYXRpdHVkZSBvZiBmaXJzdCBwb2ludFxuICogQHBhcmFtIGxvbjEgLSBMb25naXR1ZGUgb2YgZmlyc3QgcG9pbnRcbiAqIEBwYXJhbSBsYXQyIC0gTGF0aXR1ZGUgb2Ygc2Vjb25kIHBvaW50XG4gKiBAcGFyYW0gbG9uMiAtIExvbmdpdHVkZSBvZiBzZWNvbmQgcG9pbnRcbiAqIEByZXR1cm5zIERpc3RhbmNlIGluIG1ldGVyc1xuICovXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlRGlzdGFuY2UobGF0MTogbnVtYmVyLCBsb24xOiBudW1iZXIsIGxhdDI6IG51bWJlciwgbG9uMjogbnVtYmVyKTogbnVtYmVyIHtcbiAgY29uc3QgUiA9IDYzNzEwMDA7IC8vIEVhcnRoJ3MgcmFkaXVzIGluIG1ldGVyc1xuICBjb25zdCBkTGF0ID0gdG9SYWRpYW5zKGxhdDIgLSBsYXQxKTtcbiAgY29uc3QgZExvbiA9IHRvUmFkaWFucyhsb24yIC0gbG9uMSk7XG4gIGNvbnN0IGEgPVxuICAgIE1hdGguc2luKGRMYXQgLyAyKSAqIE1hdGguc2luKGRMYXQgLyAyKSArXG4gICAgTWF0aC5jb3ModG9SYWRpYW5zKGxhdDEpKSAqXG4gICAgICBNYXRoLmNvcyh0b1JhZGlhbnMobGF0MikpICpcbiAgICAgIE1hdGguc2luKGRMb24gLyAyKSAqXG4gICAgICBNYXRoLnNpbihkTG9uIC8gMik7XG4gIGNvbnN0IGMgPSAyICogTWF0aC5hdGFuMihNYXRoLnNxcnQoYSksIE1hdGguc3FydCgxIC0gYSkpO1xuICByZXR1cm4gUiAqIGM7XG59XG5cbi8qKlxuICogQ29udmVydCBkZWdyZWVzIHRvIHJhZGlhbnNcbiAqIEBwYXJhbSBkZWdyZWVzIC0gRGVncmVlcyB0byBjb252ZXJ0XG4gKiBAcmV0dXJucyBSYWRpYW5zXG4gKi9cbmZ1bmN0aW9uIHRvUmFkaWFucyhkZWdyZWVzOiBudW1iZXIpOiBudW1iZXIge1xuICByZXR1cm4gKGRlZ3JlZXMgKiBNYXRoLlBJKSAvIDE4MDtcbn1cblxuLyoqXG4gKiBGb3JtYXQgZGlzdGFuY2UgZm9yIGRpc3BsYXlcbiAqIEBwYXJhbSBtZXRlcnMgLSBEaXN0YW5jZSBpbiBtZXRlcnNcbiAqIEByZXR1cm5zIEZvcm1hdHRlZCBkaXN0YW5jZSBzdHJpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdERpc3RhbmNlKG1ldGVyczogbnVtYmVyKTogc3RyaW5nIHtcbiAgaWYgKG1ldGVycyA8IDEwMDApIHtcbiAgICByZXR1cm4gYCR7TWF0aC5yb3VuZChtZXRlcnMpfSBtYDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gYCR7KG1ldGVycyAvIDEwMDApLnRvRml4ZWQoMSl9IGttYDtcbiAgfVxufVxuXG4vKipcbiAqIENoZWNrIGlmIGEgdGltZXN0YW1wIGlzIHN0YWxlIChvbGRlciB0aGFuIHRocmVzaG9sZClcbiAqIEBwYXJhbSB0aW1lc3RhbXAgLSBUaW1lc3RhbXAgdG8gY2hlY2sgKGluIHNlY29uZHMpXG4gKiBAcGFyYW0gdGhyZXNob2xkU2Vjb25kcyAtIFN0YWxlbmVzcyB0aHJlc2hvbGQgaW4gc2Vjb25kcyAoZGVmYXVsdCA2MClcbiAqIEByZXR1cm5zIFRydWUgaWYgc3RhbGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRGF0YVN0YWxlKHRpbWVzdGFtcD86IG51bWJlciwgdGhyZXNob2xkU2Vjb25kczogbnVtYmVyID0gNjApOiBib29sZWFuIHtcbiAgaWYgKCF0aW1lc3RhbXApIHJldHVybiB0cnVlO1xuICBcbiAgY29uc3Qgbm93ID0gTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMTAwMCk7XG4gIHJldHVybiBub3cgLSB0aW1lc3RhbXAgPiB0aHJlc2hvbGRTZWNvbmRzO1xufVxuXG4vKipcbiAqIEZvcm1hdCB2ZWhpY2xlIG9jY3VwYW5jeSBzdGF0dXNcbiAqIEBwYXJhbSBvY2N1cGFuY3lTdGF0dXMgLSBOdW1lcmljIG9jY3VwYW5jeSBzdGF0dXMgZnJvbSBHVEZTLVJUXG4gKiBAcmV0dXJucyBIdW1hbi1yZWFkYWJsZSBvY2N1cGFuY3kgc3RyaW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRPY2N1cGFuY3kob2NjdXBhbmN5U3RhdHVzPzogbnVtYmVyKTogc3RyaW5nIHtcbiAgc3dpdGNoIChvY2N1cGFuY3lTdGF0dXMpIHtcbiAgICBjYXNlIDA6XG4gICAgICByZXR1cm4gXCJFbXB0eVwiO1xuICAgIGNhc2UgMTpcbiAgICAgIHJldHVybiBcIk1hbnkgc2VhdHNcIjtcbiAgICBjYXNlIDI6XG4gICAgICByZXR1cm4gXCJGZXcgc2VhdHNcIjtcbiAgICBjYXNlIDM6XG4gICAgICByZXR1cm4gXCJTdGFuZGluZyByb29tXCI7XG4gICAgY2FzZSA0OlxuICAgICAgcmV0dXJuIFwiQ3J1c2hlZCBzdGFuZGluZ1wiO1xuICAgIGNhc2UgNTpcbiAgICAgIHJldHVybiBcIkZ1bGxcIjtcbiAgICBjYXNlIDY6XG4gICAgICByZXR1cm4gXCJOb3QgYWNjZXB0aW5nXCI7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBcIlVua25vd25cIjtcbiAgfVxufVxuXG4vKipcbiAqIEdldCBpY29uIGZvciBvY2N1cGFuY3kgc3RhdHVzXG4gKiBAcGFyYW0gb2NjdXBhbmN5U3RhdHVzIC0gTnVtZXJpYyBvY2N1cGFuY3kgc3RhdHVzXG4gKiBAcmV0dXJucyBFbW9qaSBpY29uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRPY2N1cGFuY3lJY29uKG9jY3VwYW5jeVN0YXR1cz86IG51bWJlcik6IHN0cmluZyB7XG4gIHN3aXRjaCAob2NjdXBhbmN5U3RhdHVzKSB7XG4gICAgY2FzZSAwOlxuICAgIGNhc2UgMTpcbiAgICAgIHJldHVybiBcIlx1RDgzRFx1REZFMlwiOyAvLyBFbXB0eSBvciBtYW55IHNlYXRzXG4gICAgY2FzZSAyOlxuICAgIGNhc2UgMzpcbiAgICAgIHJldHVybiBcIlx1RDgzRFx1REZFMVwiOyAvLyBGZXcgc2VhdHMgb3Igc3RhbmRpbmcgcm9vbVxuICAgIGNhc2UgNDpcbiAgICBjYXNlIDU6XG4gICAgY2FzZSA2OlxuICAgICAgcmV0dXJuIFwiXHVEODNEXHVERDM0XCI7IC8vIENydXNoZWQsIGZ1bGwsIG9yIG5vdCBhY2NlcHRpbmdcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIFwiXHUyNkFBXCI7IC8vIFVua25vd25cbiAgfVxufVxuXG4vKipcbiAqIFNvcnQgZGVwYXJ0dXJlcyBieSB0aW1lXG4gKiBAcGFyYW0gZGVwYXJ0dXJlcyAtIEFycmF5IG9mIGRlcGFydHVyZSBpbmZvXG4gKiBAcmV0dXJucyBTb3J0ZWQgYXJyYXlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNvcnREZXBhcnR1cmVzQnlUaW1lPFQgZXh0ZW5kcyB7IHNjaGVkdWxlZFRpbWU6IERhdGU7IHByZWRpY3RlZFRpbWU/OiBEYXRlIH0+KFxuICBkZXBhcnR1cmVzOiBUW11cbik6IFRbXSB7XG4gIHJldHVybiBkZXBhcnR1cmVzLnNvcnQoKGEsIGIpID0+IHtcbiAgICBjb25zdCB0aW1lQSA9IGEucHJlZGljdGVkVGltZSB8fCBhLnNjaGVkdWxlZFRpbWU7XG4gICAgY29uc3QgdGltZUIgPSBiLnByZWRpY3RlZFRpbWUgfHwgYi5zY2hlZHVsZWRUaW1lO1xuICAgIHJldHVybiB0aW1lQS5nZXRUaW1lKCkgLSB0aW1lQi5nZXRUaW1lKCk7XG4gIH0pO1xufVxuXG4vKipcbiAqIEdyb3VwIGRlcGFydHVyZXMgYnkgcm91dGVcbiAqIEBwYXJhbSBkZXBhcnR1cmVzIC0gQXJyYXkgb2YgZGVwYXJ0dXJlIGluZm9cbiAqIEByZXR1cm5zIE1hcCBvZiByb3V0ZSBJRCB0byBkZXBhcnR1cmVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBncm91cERlcGFydHVyZXNCeVJvdXRlPFQgZXh0ZW5kcyB7IHJvdXRlSWQ6IHN0cmluZyB9PihcbiAgZGVwYXJ0dXJlczogVFtdXG4pOiBNYXA8c3RyaW5nLCBUW10+IHtcbiAgY29uc3QgZ3JvdXBlZCA9IG5ldyBNYXA8c3RyaW5nLCBUW10+KCk7XG4gIFxuICBmb3IgKGNvbnN0IGRlcGFydHVyZSBvZiBkZXBhcnR1cmVzKSB7XG4gICAgY29uc3QgZXhpc3RpbmcgPSBncm91cGVkLmdldChkZXBhcnR1cmUucm91dGVJZCkgfHwgW107XG4gICAgZXhpc3RpbmcucHVzaChkZXBhcnR1cmUpO1xuICAgIGdyb3VwZWQuc2V0KGRlcGFydHVyZS5yb3V0ZUlkLCBleGlzdGluZyk7XG4gIH1cbiAgXG4gIHJldHVybiBncm91cGVkO1xufVxuXG4vKipcbiAqIFNhbml0aXplIGFuZCB2YWxpZGF0ZSBzdG9wIElEIGlucHV0XG4gKiBAcGFyYW0gaW5wdXQgLSBVc2VyIGlucHV0IGZvciBzdG9wIElEXG4gKiBAcmV0dXJucyBTYW5pdGl6ZWQgc3RvcCBJRCBvciBudWxsIGlmIGludmFsaWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNhbml0aXplU3RvcElkKGlucHV0OiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgY29uc3QgY2xlYW5lZCA9IGlucHV0LnRyaW0oKTtcbiAgaWYgKCFjbGVhbmVkIHx8ICEvXlxcZCskLy50ZXN0KGNsZWFuZWQpKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIGNsZWFuZWQ7XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgY2FjaGUga2V5IGZvciBkYXRhXG4gKiBAcGFyYW0gcGFydHMgLSBQYXJ0cyB0byBpbmNsdWRlIGluIHRoZSBrZXlcbiAqIEByZXR1cm5zIENhY2hlIGtleSBzdHJpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNhY2hlS2V5KC4uLnBhcnRzOiBzdHJpbmdbXSk6IHN0cmluZyB7XG4gIHJldHVybiBwYXJ0cy5maWx0ZXIoQm9vbGVhbikuam9pbihcIjpcIik7XG59XG5cbi8qKlxuICogQ0FUQSBSb3V0ZSBDb2xvcnMgLSBPZmZpY2lhbCBjb2xvcnMgZnJvbSBDQVRBXG4gKi9cbmV4cG9ydCBjb25zdCBST1VURV9DT0xPUlM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gIFwiQUNcIjogXCIjMjI4QjIyXCIsIC8vIEZvcmVzdCBHcmVlblxuICBcIk5FXCI6IFwiIzY2Q0RBQVwiLCAvLyBNZWRpdW0gQXF1YW1hcmluZVxuICBcIlVQXCI6IFwiIzQwRTBEMFwiLCAvLyBUdXJxdW9pc2VcbiAgXCJDQ1wiOiBcIiMwMDAwQ0RcIiwgLy8gTWVkaXVtIEJsdWVcbiAgXCJOVlwiOiBcIiM2OTY5NjlcIiwgLy8gRGltIEdyYXlcbiAgXCJWXCI6IFwiI0ZGOEMwMFwiLCAgLy8gRGFyayBPcmFuZ2VcbiAgXCJIXCI6IFwiIzkzNzBEQlwiLCAgLy8gTWVkaXVtIFB1cnBsZVxuICBcIlJcIjogXCIjRkY2OUI0XCIsICAvLyBIb3QgUGlua1xuICBcIlZFXCI6IFwiI0ZGQTA3QVwiLCAvLyBMaWdodCBTYWxtb25cbiAgXCJIVVwiOiBcIiNEQTcwRDZcIiwgLy8gT3JjaGlkXG4gIFwiUkNcIjogXCIjRkYxNDkzXCIsIC8vIERlZXAgUGlua1xuICBcIldcIjogXCIjRkZGRjAwXCIsICAvLyBCcmlnaHQgWWVsbG93XG4gIFwiTlwiOiBcIiMxRTkwRkZcIiwgIC8vIERvZGdlciBCbHVlXG4gIFwiUlBcIjogXCIjRkY0NTAwXCIsIC8vIE9yYW5nZSBSZWRcbiAgXCJXRVwiOiBcIiM4MDAwODBcIiwgLy8gUHVycGxlXG4gIFwiQkxcIjogXCIjMDAwMEZGXCIsIC8vIEJsdWVcbiAgXCJSTFwiOiBcIiNGRjAwMDBcIiwgLy8gUmVkXG4gIFwiV0xcIjogXCIjRkZGRkZGXCIsIC8vIFdoaXRlICh3aXRoIGJsYWNrIGJvcmRlcilcbiAgLy8gR2FtZWRheSByb3V0ZXMgdXNlIHNhbWUgY29sb3JzIGFzIHJlZ3VsYXJcbiAgXCJCTCBHYW1lZGF5XCI6IFwiIzAwMDBGRlwiLFxuICBcIlJMIEdhbWVkYXlcIjogXCIjRkYwMDAwXCIsXG4gIFwiV0wgR2FtZWRheVwiOiBcIiNGRkZGRkZcIixcbiAgXCJIIEdhbWVkYXlcIjogXCIjOTM3MERCXCIsXG4gIC8vIERlZmF1bHQgZm9yIHVua25vd24gcm91dGVzXG4gIFwiREVGQVVMVFwiOiBcIiM4MDgwODBcIiwgLy8gR3JheVxufTtcblxuLyoqXG4gKiBHZXQgcm91dGUgY29sb3JcbiAqIEBwYXJhbSByb3V0ZVNob3J0TmFtZSAtIFNob3J0IG5hbWUgb2YgdGhlIHJvdXRlXG4gKiBAcmV0dXJucyBIZXggY29sb3Igc3RyaW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRSb3V0ZUNvbG9yKHJvdXRlU2hvcnROYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gUk9VVEVfQ09MT1JTW3JvdXRlU2hvcnROYW1lXSB8fCBST1VURV9DT0xPUlNbXCJERUZBVUxUXCJdO1xufSJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztlQUFnQkEsUUFBSTtBQUNsQixlQUFPO01BQ1Q7QUNDTSxlQUFVLGFBQWFDLElBQU07QUFDakMsZUFBUSxPQUFPQSxPQUFNLFlBQVlBLE9BQU0sUUFBUyxP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bUI7QUFBQTtBQUFBO0FBQUEsTUFHbkIsUUFBbUI7QUFBQTtBQUFBLE1BQ25CLFFBQW1CO0FBQUE7QUFBQSxNQUNuQixRQUFtQjtBQUFBO0FBQUEsTUFDbkIsUUFBbUI7QUFBQTtBQUFBLE1BQ25CLFFBQW1CO0FBQUE7QUFBQTtBQUFBLE1BR25CLFFBQW1CO0FBQUE7QUFBQSxNQUNuQixRQUFtQjtBQUFBO0FBQUEsTUFDbkIsUUFBbUI7QUFBQTtBQUFBLE1BQ25CLFFBQW1CO0FBQUE7QUFBQSxNQUNuQixRQUFtQjtBQUFBO0FBQUEsTUFDbkIsUUFBbUI7QUFBQTtBQUFBLE1BQ25CLFFBQW1CO0FBQUE7QUFBQSxNQUNuQixRQUFtQjtBQUFBO0FBQUEsTUFDbkIsUUFBbUI7QUFBQTtBQUFBLE1BQ25CLFFBQW1CO0FBQUE7QUFBQSxNQUNuQixRQUFtQjtBQUFBO0FBQUEsTUFDbkIsUUFBbUI7QUFBQTtBQUFBLE1BQ25CLFFBQW1CO0FBQUE7QUFBQSxNQUNuQixRQUFtQjtBQUFBO0FBQUEsTUFDbkIsUUFBbUI7QUFBQTtBQUFBLE1BQ25CLFFBQW1CO0FBQUE7QUFBQSxNQUNuQixRQUFtQjtBQUFBO0FBQUE7QUFBQSxNQUduQixRQUFtQjtBQUFBO0FBQUEsTUFDbkIsUUFBbUI7QUFBQTtBQUFBLE1BQ25CLFFBQW1CO0FBQUE7QUFBQSxNQUNuQixRQUFtQjtBQUFBO0FBQUEsTUFDbkIsUUFBbUI7QUFBQTtBQUFBLE1BQ25CLFFBQW1CO0FBQUE7QUFBQSxNQUNuQixRQUFtQjtBQUFBO0FBQUEsTUFFbkIsVUFBbUI7QUFBQTtBQUFBLE1BQ25CLFVBQW1CO0FBQUE7QUFBQSxNQUNuQixZQUFtQjtBQUFBO0FBQUEsTUFDbkIsVUFBbUI7QUFBQTtBQUFBLE1BQ25CLGVBQW1CO0FBQUE7QUFBQSxNQUVuQixVQUFtQjtBQUFBO0FBQUEsTUFDbkIsVUFBbUI7QUFBQTtBQUFBLE1BQ25CLFdBQW1CO0FBQUE7QUFBQSxNQUNuQixXQUFtQjtBQUFBO0FBQUEsTUFDbkIsVUFBbUI7QUFBQTtBQUFBLE1BQ25CLFVBQW1CO0FBQUE7QUFBQSxNQUNuQixVQUFtQjtBQUFBO0FBQUEsTUFDbkIsYUFBbUI7QUFBQTtBQUFBLE1BQ25CLFVBQW1CO0FBQUE7QUFBQSxNQUNuQixVQUFtQjtBQUFBO0FBQUEsTUFDbkIsV0FBbUI7QUFBQTtBQUFBLE1BQ25CLFVBQW1CO0FBQUE7QUFBQSxNQUNuQixZQUFtQjtBQUFBO0FBQUE7QUFBQSxNQUduQixRQUFtQjtBQUFBO0FBQUEsTUFDbkIsUUFBbUI7QUFBQTtBQUFBLE1BQ25CLFVBQW1CO0FBQUE7QUFBQSxNQUNuQixVQUFtQjtBQUFBO0FBQUEsTUFDbkIsVUFBbUI7QUFBQTtBQUFBLE1BQ25CLFVBQW1CO0FBQUE7QUFBQSxNQUNuQixVQUFtQjtBQUFBO0FBQUE7QUFBQSxNQUVuQixVQUFtQjtBQUFBO0FBQUEsTUFDbkIsbUJBQW1CO0FBQUE7QUFBQSxNQUNuQixRQUFtQjtBQUFBO0FBQUE7QUFBQSxNQUVuQixPQUFtQjtBQUFBO0FBQUE7QUFBQSxNQUVuQixNQUFtQjtBQUFBO0FBQUE7QUFBQSxNQUVuQixXQUFtQjtBQUFBO0FBQUEsTUFDbkIsVUFBbUI7QUFBQTtBQUFBLE1BQ25CLGFBQW1CO0FBQUE7QUFBQTtBQUFBO0FBQUEsTUFJbkIsU0FBbUI7QUFBQTtBQUFBLE1BQ25CLFdBQW1CO0FBQUE7QUFBQSxNQUNuQixXQUFtQjtBQUFBO0FBQUEsTUFDbkIsVUFBbUI7QUFBQTtBQUFBLE1BQ25CLFNBQW1CO0FBQUE7QUFBQSxNQUNuQixXQUFtQjtBQUFBO0FBQUEsTUFDbkIsU0FBbUI7QUFBQTtBQUFBO0FBQUEsTUFFbkIsU0FBbUI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLE1BSW5CLFNBQW1CO0FBQUE7QUFBQTtBQUFBLE1BR25CLE1BQW1CO0FBQUEsTUFDbkIsUUFBbUI7QUFBQSxNQUNuQixNQUFtQjtBQUFBO0FBQUEsTUFHbkIsT0FBbUI7QUFBQSxNQUNuQixTQUFtQjtBQUFBO0FBQUEsTUFHbkIsVUFBbUI7QUFBQSxNQUNuQixXQUFtQjtBQUFBLE1BQ25CLFFBQW1CO0FBQUEsTUFD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QU0sR0FBRyxHQUFFLFNBQVEsU0FBU04sSUFBRTtBQUFDLFlBQUlDLEtBQUUsQ0FBQyxNQUFLLE1BQUssTUFBSyxJQUFJLEdBQUVNLEtBQUVQLEtBQUU7QUFBSSxlQUFNLE1BQUlBLE1BQUdDLElBQUdNLEtBQUUsTUFBSSxFQUFFLEtBQUdOLEdBQUVNLEVBQUMsS0FBR04sR0FBRSxDQUFDLEtBQUc7QUFBQSxNQUFHLEVBQUMsR0FBRU8sS0FBRSxTQUFTUixJQUFFQyxJQUFFTSxJQUFFO0FBQUMsWUFBSUwsS0FBRSxPQUFPRixFQUFDO0FBQUUsZUFBTSxDQUFDRSxNQUFHQSxHQUFFLFVBQVFELEtBQUVELEtBQUUsS0FBRyxNQUFNQyxLQUFFLElBQUVDLEdBQUUsTUFBTSxFQUFFLEtBQUtLLEVBQUMsSUFBRVA7QUFBQSxNQUFDLEdBQUUsSUFBRSxFQUFDLEdBQUVRLElBQUUsR0FBRSxTQUFTUixJQUFFO0FBQUMsWUFBSUMsS0FBRSxDQUFDRCxHQUFFLFVBQVUsR0FBRU8sS0FBRSxLQUFLLElBQUlOLEVBQUMsR0FBRUMsS0FBRSxLQUFLLE1BQU1LLEtBQUUsRUFBRSxHQUFFSixLQUFFSSxLQUFFO0FBQUcsZ0JBQU9OLE1BQUcsSUFBRSxNQUFJLE9BQUtPLEdBQUVOLElBQUUsR0FBRSxHQUFHLElBQUUsTUFBSU0sR0FBRUwsSUFBRSxHQUFFLEdBQUc7QUFBQSxNQUFDLEdBQUUsR0FBRSxTQUFTSCxHQUFFQyxJQUFFTSxJQUFFO0FBQUMsWUFBR04sR0FBRSxLQUFLLElBQUVNLEdBQUUsS0FBSyxFQUFFLFFBQU0sQ0FBQ1AsR0FBRU8sSUFBRU4sRUFBQztBQUFFLFlBQUlDLEtBQUUsTUFBSUssR0FBRSxLQUFLLElBQUVOLEdBQUUsS0FBSyxNQUFJTSxHQUFFLE1BQU0sSUFBRU4sR0FBRSxNQUFNLElBQUdFLEtBQUVGLEdBQUUsTUFBTSxFQUFFLElBQUlDLElBQUUsQ0FBQyxHQUFFRSxLQUFFRyxLQUFFSixLQUFFLEdBQUVNLEtBQUVSLEdBQUUsTUFBTSxFQUFFLElBQUlDLE1BQUdFLEtBQUUsS0FBRyxJQUFH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QUVGLEVBQUMsQ0FBQyxJQUFFLElBQUc7QUFBQyxZQUFBTSxLQUFFSixLQUFFO0FBQUc7QUFBQSxVQUFLO0FBQUEsUUFBQyxNQUFNLENBQUFJLEtBQUVQLFFBQUtDLEtBQUUsT0FBSztBQUFNLGVBQU9NO0FBQUEsTUFBQyxHQUFFLElBQUUsRUFBQyxHQUFFLENBQUMsR0FBRSxTQUFTUCxJQUFFO0FBQUMsYUFBSyxZQUFVLEVBQUVBLElBQUUsS0FBRTtBQUFBLE1BQUMsQ0FBQyxHQUFFLEdBQUUsQ0FBQyxHQUFFLFNBQVNBLElBQUU7QUFBQyxhQUFLLFlBQVUsRUFBRUEsSUFBRSxJQUFFO0FBQUEsTUFBQyxDQUFDLEdBQUUsR0FBRSxDQUFDLEdBQUUsU0FBU0EsSUFBRTtBQUFDLGFBQUssUUFBTSxLQUFHQSxLQUFFLEtBQUc7QUFBQSxNQUFDLENBQUMsR0FBRSxHQUFFLENBQUMsR0FBRSxTQUFTQSxJQUFFO0FBQUMsYUFBSyxlQUFhLE1BQUksQ0FBQ0E7QUFBQSxNQUFDLENBQUMsR0FBRSxJQUFHLENBQUNFLElBQUUsU0FBU0YsSUFBRTtBQUFDLGFBQUssZUFBYSxLQUFHLENBQUNBO0FBQUEsTUFBQyxDQUFDLEdBQUUsS0FBSSxDQUFDLFNBQVEsU0FBU0EsSUFBRTtBQUFDLGFBQUssZUFBYSxDQUFDQTtBQUFBLE1BQUMsQ0FBQyxHQUFFLEdBQUUsQ0FBQ0csSUFBRUUsR0FBRSxTQUFTLENBQUMsR0FBRSxJQUFHLENBQUNGLElBQUVFLEdBQUUsU0FBUyxDQUFDLEdBQUUsR0FBRSxDQUFDRixJQUFFRSxHQUFFLFNBQVMsQ0FBQyxHQUFFLElBQUcsQ0FBQ0YsSUFBRUUsR0FBRSxTQUFTLENBQUMsR0FBRSxHQUFFLENBQUNGLElBQUVFLEdBQUUsT0FBTyxDQUFDLEdBQUUsR0FBRSxDQUFDRixJQUFFRSxHQUFFLE9BQU8sQ0FBQyxHQUFFLElBQUcsQ0FBQ0YsSUFBRUUsR0FBRSxPQUFPLENBQUMsR0FBRSxJQUFHLENBQUNGLElBQUVFLEdBQUUsT0FBTyxDQUFDLEdBQUUsR0FBRSxDQUFDRixJQUFFRSxHQUFF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QUE4QixjQUFjLGdCQUFnQjtBQUFBO0FBQUEsZ0JBQ25FO0FBQUEsZ0JBQ0E7QUFBQSxrQkFBQyxtQkFBTztBQUFBLGtCQUFQO0FBQUEsb0JBQ0MsT0FBTTtBQUFBLG9CQUNOLEtBQUk7QUFBQTtBQUFBLGdCQUNOO0FBQUEsaUJBQ0Y7QUFBQTtBQUFBLFVBRUosR0FDRjtBQUFBLFdBQ0Y7QUFBQTtBQUFBO0FBQUEsRUFFSjtBQUVKOyIsCiAgIm5hbWVzIjogWyJub29wIiwgIngiLCAiX2EiLCAiRiIsICJpIiwgImUiLCAicXVldWVNaWNyb3Rhc2siLCAiciIsICJpc0Fib3J0U2lnbmFsIiwgInN0cmVhbUJyYW5kQ2hlY2tFeGNlcHRpb24iLCAiZGVmYXVsdENvbnRyb2xsZXJCcmFuZENoZWNrRXhjZXB0aW9uIiwgIkRPTUV4Y2VwdGlvbiIsICJSZWFkYWJsZVN0cmVhbSIsICJ0cmFuc2Zvcm0iLCAiUE9PTF9TSVpFIiwgInByb2Nlc3MiLCAiQmxvYiIsICJjbG9uZSIsICJCbG9iIiwgInNpemUiLCAiRmlsZSIsICJGIiwgImYiLCAiZSIsICJGb3JtRGF0YSIsICJtIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImZzIiwgIm0iLCAiQm9keSIsICJmIiwgImkiLCAiY2xlYXIiLCAiZXhwb3J0cyIsICJtb2R1bGUiLCAiZXhwb3J0cyIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJ0IiwgInNlbGYiLCAic3RhdCIsICJlIiwgInBhdGgiLCAiZXJyIiwgImZkIiwgImkiLCAiZXhwb3J0cyIsICJtb2R1bGUiLCAicGF0aCIsICJmcyIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJleHBvcnRzIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgInpsaWIiLCAiaSIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJ6bGliIiwgImkiLCAiZXhwb3J0cyIsICJtb2R1bGUiLCAidCIsICJpIiwgImV4cG9ydHMiLCAiZXhwb3J0cyIsICJtb2R1bGUiLCAiSGVhZGVycyIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJIZWFkZXJzIiwgImkiLCAiZSIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJsb2NhbFBhdGgiLCAib3B0aW9ucyIsICJzZWxmIiwgImVyciIsICJpIiwgImNvbnRlbnQiLCAiZmlsZUF0dHIiLCAiZSIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJwYXJhbXMiLCAib2Zmc2V0IiwgImV4cG9ydHMiLCAiaSIsICJ0IiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImkiLCAiZXhwb3J0cyIsICJtb2R1bGUiLCAiZSIsICJleHBvcnRzIiwgImkiLCAidCIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJzaXplIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAiQnVmZmVyIiwgImUiLCAiaSIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJub29wIiwgImNyZWF0ZSIsICJpIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImkiLCAiZXhwb3J0cyIsICJtb2R1bGUiLCAiY3JlYXRlX2FycmF5IiwgImNyZWF0ZSIsICJidWZmZXIiLCAiaSIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJzZWxmIiwgImVyciIsICJleHBvcnRzIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAicmVxdWlyZV9taW5pbWFsIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgInRyYW5zaXRfcmVhbHRpbWUiLCAiaSIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJ0cmFuc2l0X3JlYWx0aW1lIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgInQiLCAiZSIsICJyIiwgImkiLCAicyIsICJmIiwgImgiLCAibiIsICJtIiwgInUiLCAiUyIsICJhIiwgIk0iLCAibCIsICIkIiwgInkiLCAidiIsICJnIiwgIkQiLCAibyIsICJkIiwgImMiLCAiZXhwb3J0cyIsICJtb2R1bGUiLCAiciIsICJlIiwgInQiLCAiaSIsICJvIiwgIm4iLCAiZCIsICJmIiwgInMiLCAiaCIsICJtIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgImUiLCAidCIsICJyIiwgImkiLCAicyIsICJmIiwgImgiLCAibiIsICJvIiwgImEiLCAidSIsICJkIiwgImwiLCAiYyIsICJtIiwgIk0iLCAiZXhwb3J0cyIsICJtb2R1bGUiLCAidCIsICJpIiwgImUiLCAicyIsICJmIiwgInIiLCAibiIsICJ1IiwgIm8iLCAiaCIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJ0IiwgImUiLCAiaSIsICJyIiwgIm4iLCAibyIsICJ1IiwgImYiLCAicyIsICJtIiwgImgiLCAiYSIsICJpbXBvcnRfYXBpIiwgImltcG9ydF9ub2RlX2h0dHAiLCAiaW1wb3J0X25vZGVfc3RyZWFtIiwgImltcG9ydF9ub2RlX2J1ZmZlciIsICJpIiwgIlN0cmVhbSIsICJ0b0Zvcm1EYXRhIiwgImltcG9ydF9ub2RlX3V0aWwiLCAiaHR0cCIsICJJTlRFUk5BTFMiLCAiaW1wb3J0X25vZGVfdXRpbCIsICJJTlRFUk5BTFMiLCAiZm9ybWF0VXJsIiwgInJlc3BvbnNlIiwgImh0dHBzIiwgImh0dHAiLCAiU3RyZWFtIiwgInMiLCAicHVtcCIsICJ6bGliIiwgImkiLCAiaSIsICJjciIsICJubCIsICJpIiwgImVuY29kaW5nIiwgImluZm8iLCAiYm9tIiwgImYiLCAiYnVmIiwgInBvcyIsICJpbXBvcnRfYXBpIiwgInBhdGgiLCAiZnMiLCAib3MiLCAiQWRtWmlwIiwgImltcG9ydF9hcGkiLCAiaW1wb3J0X2FwaSIsICJkYXlqcyIsICJyZWxhdGl2ZVRpbWUiLCAiY3VzdG9tUGFyc2VGb3JtYXQiLCAidXRjIiwgInRpbWV6b25lIiwgImRheWpzIiwgImVudGl0eSIsICJ0IiwgInIiXQp9Cg==
